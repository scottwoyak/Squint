/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/css-loader/dist/cjs.js!./src/styles/ArtSeeApp.css":
/*!************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles/ArtSeeApp.css ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, "#ArtSeeApp #Video {\r\n  position: absolute;\r\n  left: -100em;\r\n  top: 2em;\r\n  width: 2em;\r\n  border: solid 0.1em;\r\n  border-color: white;\r\n  margin: 0.9em;\r\n}\r\n\r\n#ArtSeeApp #VideoOverlay {\r\n  position: absolute;\r\n  left: -100em;\r\n  top: 2em;\r\n}\r\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/styles/Button.css":
/*!*********************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles/Button.css ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".ButtonClass {\r\n  border: none;\r\n  cursor: pointer;\r\n  border-radius: 0.4em;\r\n  background-color: lightgray;\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n  padding-left: 0.5em;\r\n  padding-right: 0.5em;\r\n  padding-top: 0.2em;\r\n  padding-bottom: 0.2em;\r\n}\r\n\r\n.ButtonClass:hover:enabled {\r\n  background-color: rgb(231, 231, 231);\r\n}\r\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/styles/Checkbox.css":
/*!***********************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles/Checkbox.css ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, "/* Customize the label (the CheckboxLabel) */\r\n.CheckboxLabel {\r\n  display: block;\r\n  position: relative;\r\n  padding-left: 1.5em;\r\n  cursor: pointer;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n/* Hide the browser's default checkbox */\r\n.CheckboxLabel input {\r\n  position: absolute;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n  height: 0;\r\n  width: 0;\r\n}\r\n\r\n/* Create a custom checkbox */\r\n.Checkmark {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  height: 1.1em;\r\n  width: 1.1em;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n/* When the checkbox is checked, add a blue background */\r\n.CheckboxLabel input:checked ~ .Checkmark {\r\n  background-color: #2196f3;\r\n}\r\n\r\n/* Create the checkmark/indicator (hidden when not checked) */\r\n.Checkmark:after {\r\n  content: \"\";\r\n  position: absolute;\r\n  display: none;\r\n}\r\n\r\n/* Show the checkmark when checked */\r\n.CheckboxLabel input:checked ~ .Checkmark:after {\r\n  display: block;\r\n}\r\n\r\n/* Style the checkmark/indicator */\r\n.CheckboxLabel .Checkmark:after {\r\n  left: 0.3em;\r\n  top: 0.05em;\r\n  width: 0.3em;\r\n  height: 0.6em;\r\n  border: solid white;\r\n  border-width: 0 0.25em 0.25em 0;\r\n  -webkit-transform: rotate(45deg);\r\n  -ms-transform: rotate(45deg);\r\n  transform: rotate(45deg);\r\n}\r\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/styles/ListBox.css":
/*!**********************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles/ListBox.css ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".ListBoxClass {\r\n  background-color: white;\r\n  overflow-y: scroll;\r\n  cursor: pointer;\r\n}\r\n\r\n.ListBoxItemClass {\r\n  padding: 0.25em;\r\n  user-select: none;\r\n}\r\n\r\n.ListBoxItemClass:hover {\r\n  background-color: powderblue;\r\n}\r\n\r\n.ListBoxItemSelectedClass,\r\n.ListBoxItemSelectedClass:hover {\r\n  background-color: steelblue;\r\n  color: white;\r\n}\r\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/styles/Menu.css":
/*!*******************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles/Menu.css ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".Menubar {\r\n  left: 0em;\r\n  top: 0em;\r\n  right: 0em;\r\n  color: black;\r\n  background-color: rgba(var(--main-color), 0.25);\r\n  border: none;\r\n  cursor: pointer;\r\n  height: 2.1em;\r\n}\r\n\r\n.Menubar > .MenuItem {\r\n  display: inline-block;\r\n  padding-right: 0.5em;\r\n  padding-left: 0.5em;\r\n  vertical-align: middle;\r\n}\r\n\r\n.Menu {\r\n  display: none;\r\n  position: fixed;\r\n  background-color: rgba(230, 230, 230, 0.9);\r\n  width: 15em;\r\n  box-shadow: 0px 0.5em 1em 0px rgba(0, 0, 0, 0.2);\r\n  z-index: 1;\r\n}\r\n\r\n.MenuItem {\r\n  color: black;\r\n  padding: 0.5em;\r\n  text-decoration: none;\r\n  display: block;\r\n  cursor: pointer;\r\n}\r\n\r\n.Menubar > .MenuItemDisabledClass {\r\n  color: gray;\r\n}\r\n\r\n.MenuItemDisabledClass {\r\n  color: gray;\r\n}\r\n\r\n.Menubar > .MenuItemHiddenClass {\r\n  display: none;\r\n}\r\n\r\n.MenuItemDisabledClass {\r\n  display: none;\r\n}\r\n\r\n.MenuItem .SliderRange {\r\n  width: 12em;\r\n}\r\n\r\n.MenuItem:hover {\r\n  background-color: rgba(200, 200, 255, 0.75);\r\n}\r\n\r\n/* Style we add or remove as menus are displayed or hidden */\r\n.MenuShow {\r\n  display: block;\r\n}\r\n\r\n.MenuItem .SliderLabel,\r\n.MenuItem .SliderColorSpan,\r\n.MenuItem .SliderValueSpan {\r\n  display: none;\r\n}\r\n\r\n.MenuItem .Checkbox {\r\n  float: left;\r\n}\r\n\r\n.Menubar .ImageMenuItem {\r\n  padding-top: 0.2em;\r\n  padding-bottom: 0em;\r\n  padding-left: 0.1em;\r\n  padding-right: 0.1em;\r\n}\r\n\r\n.Menubar .MenuItemImage {\r\n  width: 1em;\r\n  height: 1em;\r\n  padding: 0.3em;\r\n}\r\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/styles/ModelTimerApp.css":
/*!****************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles/ModelTimerApp.css ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, "#ModelTimerApp .Menubar {\r\n  background-color: rgb(110, 110, 110);\r\n}\r\n\r\n#ModelTimerApp #BodyDiv {\r\n  position: absolute;\r\n  /* matches the size of the menubar hight */\r\n  top: 2.1em;\r\n  bottom: 0px;\r\n  left: 0px;\r\n  right: 0px;\r\n}\r\n\r\n#ModelTimerApp #ModelTimerCanvas {\r\n  background-color: black;\r\n  color: lightgray;\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n#ModelTimerApp #OverlayCanvas {\r\n  background-color: transparent;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 1;\r\n  user-select: none;\r\n  pointer-events: none;\r\n}\r\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/styles/PathTracerApp.css":
/*!****************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles/PathTracerApp.css ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, "#PathTracerApp #description {\r\n  position: absolute;\r\n  bottom: 5px;\r\n  left: 2px;\r\n  padding: 2px;\r\n  padding-right: 5px;\r\n  padding-left: 5px;\r\n  border-radius: 5px;\r\n  font-size: 10pt;\r\n  font-family: arial;\r\n  color: white;\r\n  text-shadow: 0px 0px 6px rgba(0, 0, 0, 1);\r\n  user-select: none;\r\n}\r\n\r\n#PathTracerApp #drawTime {\r\n  position: absolute;\r\n  top: 5px;\r\n  left: 2px;\r\n  padding: 2px;\r\n  padding-right: 5px;\r\n  padding-left: 5px;\r\n  font-size: 8pt;\r\n  font-family: arial;\r\n  color: white;\r\n  text-shadow: 0px 0px 6px rgba(0, 0, 0, 1);\r\n  user-select: none;\r\n}\r\n\r\n#PathTracerApp #progressBar {\r\n  position: absolute;\r\n  bottom: 0px;\r\n  left: 0px;\r\n  right: 0px;\r\n  height: 5px;\r\n  background-color: rgba(50, 205, 50, 0.75);\r\n}\r\n\r\n#PathTracerApp #modeButton {\r\n  position: absolute;\r\n  bottom: 5px;\r\n  right: 5px;\r\n  padding: 2px;\r\n  padding-right: 5px;\r\n  padding-left: 5px;\r\n  border-radius: 5px;\r\n  font-size: 10pt;\r\n  font-family: arial;\r\n  color: yellow;\r\n  text-shadow: 0px 0px 6px rgba(0, 0, 0, 1);\r\n  user-select: none;\r\n  cursor: pointer;\r\n  display: inline-block;\r\n}\r\n\r\n#PathTracerApp .SliderLabel {\r\n  flex: 0 0 150px;\r\n}\r\n\r\n#PathTracerApp .SliderValueSpan {\r\n  flex: 0 0 80px;\r\n}\r\n\r\n@media only screen and (max-device-width: 800px) {\r\n  #PathTracerApp #drawTime {\r\n    left: 4px;\r\n    top: 10px;\r\n    font-size: 16pt;\r\n    font-weight: darker;\r\n  }\r\n\r\n  #PathTracerApp #modeButton {\r\n    font-size: 20pt;\r\n    font-weight: darker;\r\n  }\r\n\r\n  #PathTracerApp #description {\r\n    font-size: 20pt;\r\n    font-weight: darker;\r\n  }\r\n\r\n  #PathTracerApp .SliderLabel {\r\n    flex: 0 0 300px;\r\n  }\r\n\r\n  #PathTracerApp .SliderValueSpan {\r\n    flex: 0 0 160px;\r\n  }\r\n}\r\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/styles/Radiobutton.css":
/*!**************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles/Radiobutton.css ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, "/* Customize the label (the RadiobuttonLabel) */\r\n.RadiobuttonLabel {\r\n  display: block;\r\n  position: relative;\r\n  padding-left: 1.4em;\r\n  cursor: pointer;\r\n  -webkit-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n/* Hide the browser's default Radiobutton */\r\n.RadiobuttonLabel input {\r\n  position: absolute;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n  height: 0;\r\n  width: 0;\r\n}\r\n\r\n/* Create a custom Radiobutton */\r\n.RadioCheckmark {\r\n  position: absolute;\r\n  top: 0.15em;\r\n  left: 0;\r\n  height: 1em;\r\n  width: 1em;\r\n  background-color: #f5f5f5;\r\n  border-radius: 50%;\r\n}\r\n\r\n/* When the Radiobutton is checked, add a blue background */\r\n.RadiobuttonLabel input:checked ~ .RadioCheckmark {\r\n  background-color: #2196f3;\r\n}\r\n\r\n/* Create the checkmark/indicator (hidden when not checked) */\r\n.RadioCheckmark:after {\r\n  content: \"\";\r\n  position: absolute;\r\n  display: none;\r\n}\r\n\r\n/* Show the checkmark when checked */\r\n.RadiobuttonLabel input:checked ~ .RadioCheckmark:after {\r\n  display: block;\r\n}\r\n\r\n/* Style the checkmark/indicator */\r\n.RadiobuttonLabel .RadioCheckmark:after {\r\n  background: white;\r\n  top: 0.25em;\r\n  left: 0.25em;\r\n  width: 0.5em;\r\n  height: 0.5em;\r\n  border-radius: 50%;\r\n}\r\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/styles/Slider.css":
/*!*********************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles/Slider.css ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".SliderDiv {\r\n  display: flex;\r\n  align-items: stretch;\r\n  margin-top: 0.5em;\r\n  margin-bottom: 0.5em;\r\n}\r\n\r\n.SliderLabel {\r\n  flex: 0 0 8em;\r\n  text-align: right;\r\n}\r\n\r\n.SliderRange {\r\n  flex: 1 1 13em;\r\n  -webkit-appearance: none;\r\n  outline: none;\r\n  border-radius: 1em;\r\n  height: 0.8em;\r\n  margin-top: 0.2em;\r\n  margin-left: 0.3em;\r\n  margin-right: 0.3em;\r\n  border: gray;\r\n  border-style: solid;\r\n  border-width: 0.075em;\r\n  vertical-align: bottom;\r\n}\r\n\r\n.SliderRange::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n  width: 1.3em;\r\n  height: 1.3em;\r\n  border-radius: 50%;\r\n  border-width: 0.1em;\r\n  border-style: solid;\r\n  border-color: darkgreen;\r\n  background: lightgreen;\r\n}\r\n\r\n.SliderRange::-moz-range-thumb {\r\n  box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\r\n  width: 1.3em;\r\n  height: 1.3em;\r\n  border-radius: 50%;\r\n  border-width: 0.1em;\r\n  border-style: solid;\r\n  border-color: darkgreen;\r\n  background: lightgreen;\r\n  cursor: pointer;\r\n}\r\n\r\n.SliderColorSpan {\r\n  vertical-align: text-bottom;\r\n  flex: 0 0 1em;\r\n  width: 1em;\r\n  height: 1em;\r\n  margin-right: 0.3em;\r\n  margin-top: 0.1em;\r\n  border-radius: 50%;\r\n  border: gray;\r\n  border-style: solid;\r\n  border-width: 1px;\r\n}\r\n\r\n.SliderValueSpan {\r\n  flex: 0 0 3em;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n#Slider .disabled {\r\n  color: gray;\r\n}\r\n\r\n#Slider .disabled::-webkit-slider-thumb {\r\n  background: lightgray;\r\n  border-color: gray;\r\n}\r\n\r\n#Slider .disabled::-moz-range-thumb {\r\n  background: lightgray;\r\n  border-color: gray;\r\n}\r\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/styles/SquintApp.css":
/*!************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles/SquintApp.css ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, "#SquintApp {\r\n  /* generated at https://www.w3schools.com/w3css/w3css_color_generator.asp */\r\n  --blue1: #fafdfd;\r\n  --blue2: #eff7fa;\r\n  --blue3: #deeff5;\r\n  --blue4: #cee7f0;\r\n  --blue5: #bde0eb;\r\n  --blue6: #add8e6;\r\n  --blue7: #8ec9dc;\r\n  --blue8: #6fbad3;\r\n  --blue9: #51abc9;\r\n  --blue10: #3999b9;\r\n  --blue11: #2f7f9a;\r\n\r\n  --pink1: #fffbfb;\r\n  --pink2: #fff1f3;\r\n  --pink3: #ffe2e7;\r\n  --pink4: #ffd4db;\r\n  --pink5: #ffc6ce;\r\n  --pink6: #ffb6c1;\r\n  --pink7: #ff8c9d;\r\n  --pink8: #ff6078;\r\n  --pink9: #ff3452;\r\n  --pink10: #ff082d;\r\n  --pink11: #db0021;\r\n\r\n  --view-bg-color: var(--blue6);\r\n  --view-button-color: var(--blue4);\r\n  --view-button-color-hover: var(--blue3);\r\n  --view-button-color-disabled: var(--blue4);\r\n  --view-button-textcolor-disabled: rgb(180, 180, 180);\r\n  --host-bg-color: var(--pink6);\r\n  --host-button-color: var(--pink4);\r\n  --host-button-color-hover: var(--pink3);\r\n\r\n  --corner-radius-large: 0.8em;\r\n  --corner-radius-medium: 0.6em;\r\n  --corner-radius-small: 0.4em;\r\n\r\n  --margin: 0.5em;\r\n\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n}\r\n\r\n/* prevent scaling on Apple */\r\nbody {\r\n  touch-action: none;\r\n}\r\n\r\n#SquintApp #BodyDiv {\r\n  position: absolute;\r\n  /* matches the size of the menubar hight */\r\n  top: 2.1em;\r\n  bottom: 0px;\r\n  left: 0px;\r\n  right: 0px;\r\n}\r\n\r\n#SquintApp #Panel {\r\n  flex: 0 0 300px;\r\n  display: block;\r\n  background-color: white;\r\n}\r\n\r\n#SquintApp .SliderLabel .disabled {\r\n  color: gray;\r\n}\r\n\r\n#SquintApp #Slider .disabled::-webkit-slider-thumb {\r\n  background: linear-gradient(135deg, lightgray, lightgray);\r\n}\r\n\r\n/* menu item */\r\n#SquintApp #UserNameItemDiv {\r\n  position: absolute;\r\n  right: 0px;\r\n}\r\n\r\n#SquintApp #Video {\r\n  display: \"none\";\r\n  position: absolute;\r\n  left: 0em;\r\n  top: 2em;\r\n  width: 20%;\r\n  border: solid 0.1em;\r\n  border-color: white;\r\n  margin: 0.9em;\r\n}\r\n\r\n#SquintApp #VideoOverlay {\r\n  display: \"none\";\r\n  position: absolute;\r\n  left: 0em;\r\n  top: 2em;\r\n}\r\n\r\n#SquintApp #Canvas {\r\n  font-size: 1em;\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n/********************************************************************\r\n *\r\n * Levels Panel\r\n *\r\n ********************************************************************/\r\n#SquintApp #LevelsPanelDiv {\r\n  position: absolute;\r\n  left: 1em;\r\n  bottom: 1em;\r\n  width: 20em;\r\n  height: 22em;\r\n  border: solid;\r\n  border-color: lightgray;\r\n  border-width: var(--margin);\r\n  background-color: lightgray;\r\n  margin: 0px;\r\n  display: none;\r\n  flex-direction: column;\r\n  font-size: smaller;\r\n  border-radius: var(--corner-radius-small);\r\n  cursor: move;\r\n}\r\n\r\n#SquintApp #LevelsPanelDiv .TitleClass {\r\n  color: white;\r\n  background-color: lightskyblue;\r\n  border-top-left-radius: var(--corner-radius-small);\r\n  border-top-right-radius: var(--corner-radius-small);\r\n  padding: var(--margin);\r\n}\r\n\r\n#SquintApp #LevelsPanelDiv #LevelsPanelCloseButton {\r\n  position: absolute;\r\n  right: var(--margin);\r\n  background-color: transparent;\r\n  color: rgba(255, 255, 255, 0.5);\r\n  padding: 0px;\r\n}\r\n\r\n#SquintApp #LevelsPanelDiv #LevelsPanelCloseButton:hover {\r\n  color: rgba(255, 255, 255, 1);\r\n}\r\n\r\n#SquintApp #LevelsPanelDiv #AfterCanvas {\r\n  height: 0;\r\n  flex: 1 1 auto;\r\n  padding-top: var(--margin);\r\n}\r\n\r\n#SquintApp #LevelsPanelDiv #SliderLabel {\r\n  flex: 0 0 4.5em;\r\n}\r\n\r\n#SquintApp #LevelsPanelDiv #SliderValueSpan {\r\n  flex: 0 0 2.5em;\r\n}\r\n\r\n/********************************************************************\r\n *\r\n * Chat Panel\r\n *\r\n ********************************************************************/\r\n#SquintApp #ChatPanelDiv {\r\n  position: absolute;\r\n  right: 1em;\r\n  top: 3em;\r\n  width: 30em;\r\n  border: solid;\r\n  border-color: lightgray;\r\n  border-width: var(--margin);\r\n  background-color: lightgray;\r\n  margin: 0px;\r\n  display: none;\r\n  flex-direction: column;\r\n  font-size: smaller;\r\n  border-radius: var(--corner-radius-small);\r\n  cursor: move;\r\n}\r\n\r\n#SquintApp #ChatPanelDiv .TitleClass {\r\n  color: white;\r\n  background-color: lightskyblue;\r\n  border-top-left-radius: var(--corner-radius-small);\r\n  border-top-right-radius: var(--corner-radius-small);\r\n  padding: var(--margin);\r\n}\r\n\r\n#SquintApp #ChatPanelDiv #ChatPanelCloseButton {\r\n  position: absolute;\r\n  right: var(--margin);\r\n  background-color: transparent;\r\n  color: rgba(255, 255, 255, 0.5);\r\n  padding: 0px;\r\n}\r\n\r\n#SquintApp #ChatPanelDiv #ChatPanelCloseButton:hover {\r\n  color: rgba(255, 255, 255, 1);\r\n}\r\n\r\n#SquintApp #ChatPanelDiv #ViewersListBox {\r\n  cursor: move;\r\n  flex: 0 0 10em;\r\n}\r\n\r\n#SquintApp #ChatPanelDiv #ChatListBox {\r\n  cursor: move;\r\n  flex: 0 0 15em;\r\n}\r\n\r\n#SquintApp #ChatPanelDiv .ListBoxClass {\r\n  margin-bottom: var(--margin);\r\n}\r\n\r\n#SquintApp #ChatPanelDiv .ListBoxItemClass,\r\n#SquintApp #ChatPanelDiv .ListBoxItemSelectedClass,\r\n#SquintApp #ChatPanelDiv .ListBoxItemSelectedClass:hover {\r\n  background-color: white;\r\n  color: black;\r\n}\r\n\r\n#SquintApp #NotificationDiv {\r\n  position: absolute;\r\n  right: 1em;\r\n  bottom: 0.5em;\r\n  left: 50%;\r\n  height: 2 em;\r\n  text-align: right;\r\n  animation: fadeOut 3s ease 1s forwards;\r\n  text-shadow: 0 0 3px #ffffff; /* white glow */\r\n}\r\n\r\n@keyframes fadeOut {\r\n  0% {\r\n    opacity: 1;\r\n  }\r\n  100% {\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n#SquintApp .DialogBackgroundClass {\r\n  justify-content: center;\r\n  align-items: center;\r\n  position: fixed; /* Stay in place */\r\n  z-index: 1; /* Sit on top */\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%; /* Full width */\r\n  height: 100%; /* Full height */\r\n  background-color: rgb(0, 0, 0, 0.4);\r\n  display: none;\r\n}\r\n\r\n/********************************************************************\r\n *\r\n * Welcome Dialog\r\n *\r\n ********************************************************************/\r\n#SquintApp #WelcomeDialogDiv {\r\n  width: 25em;\r\n  height: 25em;\r\n  background-color: white;\r\n  border-radius: var(--corner-radius-medium);\r\n}\r\n\r\n#SquintApp #WelcomeDialogBackgroundDiv {\r\n  background-color: rgb(160, 160, 160);\r\n}\r\n\r\n/* non-phone displays */\r\n@media (max-resolution: 192dpi) {\r\n  #SquintApp #WelcomeDialogDiv {\r\n    width: 30em;\r\n    height: 30em;\r\n  }\r\n}\r\n\r\n#SquintApp #WelcomeDialogDiv #TitleDiv {\r\n  font-weight: bold;\r\n  font-size: 1.75em;\r\n  flex: 1 0 auto;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 0.5em;\r\n  margin-bottom: 0.5em;\r\n}\r\n\r\n#SquintApp #WelcomeDialogDiv #SquintImg {\r\n  width: 25em;\r\n}\r\n\r\n#SquintApp #WelcomeDialogDiv #UserNameGroupDiv {\r\n  height: 4em;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n#SquintApp #WelcomeDialogDiv #UserNameTextInput {\r\n  margin-right: 1em;\r\n  margin-left: 1em;\r\n}\r\n\r\n/********************************************************************\r\n *\r\n * Start Dialog\r\n *\r\n ********************************************************************/\r\n#SquintApp #StartDialogBackgroundDiv {\r\n  background-color: rgb(160, 160, 160);\r\n}\r\n\r\n#SquintApp #StartDialogDiv {\r\n  flex-direction: column;\r\n  display: flex;\r\n  width: 60%;\r\n  height: 60%;\r\n  background-color: white;\r\n  border-radius: var(--corner-radius-large);\r\n}\r\n\r\n@media (orientation: portrait) {\r\n  #SquintApp #StartDialogDiv {\r\n    width: 70%;\r\n    height: 70%;\r\n  }\r\n\r\n  #SquintApp #StartDialogDiv #DialogBodyDiv {\r\n    flex-direction: row;\r\n  }\r\n}\r\n@media (orientation: portrait) {\r\n  #SquintApp #StartDialogDiv #DialogBodyDiv {\r\n    flex-direction: column;\r\n  }\r\n}\r\n\r\n#SquintApp #StartDialogDiv #DialogTitleDiv {\r\n  border-top-left-radius: var(--corner-radius-large);\r\n  border-top-right-radius: var(--corner-radius-large);\r\n  background-color: lightgray;\r\n  padding-left: 0.7em;\r\n  padding-right: 0.7em;\r\n  padding-top: var(--margin);\r\n  padding-bottom: var(--margin);\r\n  display: flex;\r\n}\r\n\r\n#SquintApp #StartDialogDiv #TitleDiv {\r\n  font-weight: bold;\r\n  flex: 1 1 auto;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: left;\r\n}\r\n\r\n#SquintApp #StartDialogDiv #ConnectingTextDiv {\r\n  color: white;\r\n  padding-right: 1em;\r\n}\r\n\r\n#SquintApp #StartDialogDiv #ConnectingAnimationDiv {\r\n  zoom: 0.2;\r\n}\r\n\r\n#SquintApp #StartDialogDiv #DialogBodyDiv {\r\n  display: flex;\r\n  background-color: white;\r\n  border-bottom-right-radius: var(--corner-radius-medium);\r\n  border-bottom-left-radius: var(--corner-radius-medium);\r\n  flex: 1 1;\r\n  position: relative;\r\n}\r\n\r\n#SquintApp #StartDialogDiv .ButtonDivClass {\r\n  text-align: right;\r\n}\r\n\r\n#SquintApp #StartDialogDiv #ViewPanelDiv {\r\n  flex: auto;\r\n  padding: var(--margin);\r\n  margin: var(--margin);\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: var(--view-bg-color);\r\n  border-radius: var(--corner-radius-medium);\r\n}\r\n\r\n#SquintApp #StartDialogDiv #ViewButton {\r\n  flex: 0 1 auto;\r\n  margin-top: 0.25em;\r\n  background-color: var(--view-button-color);\r\n}\r\n\r\n#SquintApp #StartDialogDiv #ViewButton:hover {\r\n  background-color: var(--view-button-color-hover);\r\n}\r\n\r\n#SquintApp #StartDialogDiv #ViewButton:disabled {\r\n  background-color: var(--view-button-color-disabled);\r\n  color: var(--view-button-textcolor-disabled);\r\n}\r\n\r\n#SquintApp #StartDialogDiv #ViewListBox {\r\n  margin-top: 0.25em;\r\n  margin-bottom: 0.25em;\r\n  flex: 1 1 auto;\r\n}\r\n\r\n#SquintApp #StartDialogDiv #OrPanelDiv {\r\n  align-items: center;\r\n  justify-content: center;\r\n  display: flex;\r\n}\r\n\r\n#SquintApp #StartDialogDiv #OrDiv {\r\n  padding: 1em;\r\n}\r\n\r\n#SquintApp #StartDialogDiv #HostPanelDiv {\r\n  flex: auto;\r\n  padding: var(--margin);\r\n  margin: var(--margin);\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: var(--host-bg-color);\r\n  border-radius: var(--corner-radius-medium);\r\n}\r\n\r\n#SquintApp #StartDialogDiv #HostImageDiv {\r\n  flex: 1 0 auto; /* stretch */\r\n}\r\n\r\n#SquintApp #StartDialogDiv #HostButton {\r\n  background-color: var(--host-button-color);\r\n}\r\n\r\n#SquintApp #StartDialogDiv #HostButton:hover {\r\n  background-color: var(--host-button-color-hover);\r\n}\r\n\r\n#SquintApp #StartDialogDiv #NameInputText {\r\n  flex: 1 1 auto;\r\n  width: 0;\r\n}\r\n\r\n#SquintApp #StartDialogDiv .icon {\r\n  flex: 1 0 auto; /* stretch */\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  zoom: 1.5;\r\n}\r\n\r\n#SquintApp #StartDialogDiv .icon .camera-icon {\r\n  background: #626262;\r\n  height: 4em;\r\n  width: 6em;\r\n  border-radius: var(--corner-radius-medium);\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n#SquintApp #StartDialogDiv .icon .camera-icon .camera-circle {\r\n  width: 2em;\r\n  height: 2em;\r\n  border: 0.5em solid #fff;\r\n  border-radius: 50%;\r\n}\r\n#SquintApp #StartDialogDiv .icon .camera-icon .camera-btn {\r\n  width: 0.5em;\r\n  height: 0.5em;\r\n  background: #fff;\r\n  border-radius: 50%;\r\n  position: absolute;\r\n  right: 0.5em;\r\n  top: 0.5em;\r\n}\r\n#SquintApp #StartDialogDiv .icon .camera-icon:after {\r\n  content: \"\";\r\n  position: absolute;\r\n  top: -0.4em;\r\n  background: #626262;\r\n  width: 3em;\r\n  height: 0.7em;\r\n  border-top-right-radius: 1.5em;\r\n  border-top-left-radius: 1.5em;\r\n}\r\n\r\n/********************************************************************\r\n *\r\n * User Name Dialog\r\n *\r\n ********************************************************************/\r\n#SquintApp #UserNameDialogDiv {\r\n  width: 25em;\r\n  height: 7em;\r\n  background-color: white;\r\n  border-radius: var(--corner-radius-medium);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n}\r\n\r\n#SquintApp #UserNameDialogDiv #UserNameGroupDiv {\r\n  flex: 1 0 auto; /* stretch */\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n#SquintApp #UserNameDialogDiv #UserNameTextInput {\r\n  margin-right: var(--margin);\r\n  margin-left: var(--margin);\r\n}\r\n\r\n/********************************************************************\r\n *\r\n * Session Setup Dialog\r\n *\r\n ********************************************************************/\r\n#SquintApp #SessionSetupDialogDiv {\r\n  width: 25em;\r\n  height: 7em;\r\n  background-color: white;\r\n  border-radius: var(--corner-radius-medium);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n}\r\n\r\n#SquintApp #SessionSetupDialogDiv #PasswordGroupDiv {\r\n  flex: 1 0 auto; /* stretch */\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n#SquintApp #SessionSetupDialogDiv #PasswordTextInput {\r\n  margin-right: var(--margin);\r\n  margin-left: var(--margin);\r\n}\r\n\r\n/********************************************************************\r\n *\r\n * Password Dialog\r\n *\r\n ********************************************************************/\r\n#SquintApp #PasswordDialogDiv {\r\n  width: 25em;\r\n  height: 7em;\r\n  background-color: white;\r\n  border-radius: var(--corner-radius-medium);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n}\r\n\r\n#SquintApp #PasswordDialogDiv #PasswordGroupDiv {\r\n  flex: 1 0 auto; /* stretch */\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n#SquintApp #PasswordDialogDiv #PasswordTextInput {\r\n  margin-right: var(--margin);\r\n  margin-left: var(--margin);\r\n}\r\n\r\n#SquintApp #PasswordDialogDiv #ButtonGroupDiv {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin: var(--margin);\r\n}\r\n\r\n#SquintApp #PasswordDialogDiv #ButtonGroupDiv .ButtonClass {\r\n  margin-right: var(--margin);\r\n}\r\n\r\n/********************************************************************\r\n *\r\n * Timer Panel\r\n *\r\n ********************************************************************/\r\n#SquintApp #ModelTimerCanvas {\r\n  opacity: 0.5;\r\n  position: absolute;\r\n  right: 0.5em;\r\n  top: 3em;\r\n  border-radius: var(--corner-radius-small);\r\n  background-color: lightgray;\r\n  border-radius: 0.6em;\r\n  width: 10em;\r\n  height: 3em;\r\n  color: black;\r\n}\r\n\r\n/********************************************************************\r\n *\r\n * Zoom Panel\r\n *\r\n ********************************************************************/\r\n#SquintApp #ZoomCanvas {\r\n  position: absolute;\r\n  right: 0.5em;\r\n  top: 25%;\r\n  opacity: 0.6;\r\n  background-color: lightgray;\r\n  border-radius: 1em;\r\n  width: 2em;\r\n  height: 60%;\r\n}\r\n\r\n/********************************************************************\r\n *\r\n * Working Animation\r\n *\r\n ********************************************************************/\r\n/* cool animation from https://loading.io/css/ */\r\n.lds-ring {\r\n  display: inline-block;\r\n  position: relative;\r\n  width: 80px;\r\n  height: 80px;\r\n}\r\n.lds-ring div {\r\n  box-sizing: border-box;\r\n  display: block;\r\n  position: absolute;\r\n  width: 64px;\r\n  height: 64px;\r\n  margin: 8px;\r\n  border: 8px solid #fff;\r\n  border-radius: 50%;\r\n  animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\r\n  border-color: #fff transparent transparent transparent;\r\n}\r\n.lds-ring div:nth-child(1) {\r\n  animation-delay: -0.45s;\r\n}\r\n.lds-ring div:nth-child(2) {\r\n  animation-delay: -0.3s;\r\n}\r\n.lds-ring div:nth-child(3) {\r\n  animation-delay: -0.15s;\r\n}\r\n@keyframes lds-ring {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n#SquintApp .MenuItem .SliderValueSpan {\r\n  display: flex;\r\n}\r\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/styles/Tabs.css":
/*!*******************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles/Tabs.css ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, "/* Style the tab */\r\n.Tabs {\r\n  overflow: hidden;\r\n}\r\n\r\n/* Style the buttons that are used to open the tab content */\r\n.Tabs button {\r\n  background-color: #fff;\r\n  float: left;\r\n  border: none;\r\n  outline: none;\r\n  cursor: pointer;\r\n  padding: 10px 20px;\r\n  color: #333;\r\n}\r\n\r\n/* Change background color of buttons on hover */\r\n.Tabs button:hover {\r\n  background-color: #ddd;\r\n  color: #000;\r\n}\r\n\r\n/* Create an active/current tablink class */\r\n.Tabs button.active {\r\n  background-color: #eee;\r\n  color: #000;\r\n}\r\n\r\n/* Style the tab content */\r\n.TabContent {\r\n  display: none;\r\n  padding: 20px 12px;\r\n  background-color: #eee;\r\n}\r\n\r\n@media only screen and (max-device-width: 800px) {\r\n  .Tabs button {\r\n    padding: 20px 40px;\r\n  }\r\n}\r\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/styles/ViewerApp.css":
/*!************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles/ViewerApp.css ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, "#ViewerApp #PerspectiveCanvas {\r\n  background-color: rgb(114, 117, 134);\r\n  height: 100px;\r\n  width: 100%;\r\n}\r\n\r\n#ViewerApp #ValuePlanesPanel {\r\n  height: 154px;\r\n  width: 100%;\r\n}\r\n\r\n#ValuePlanesPanel .SlidersDiv {\r\n  position: absolute;\r\n  left: 0px;\r\n  right: 154px;\r\n}\r\n\r\n#ValuePlanesPanel #LightLightRange::-webkit-slider-thumb {\r\n  background: linear-gradient(135deg, lightgray, darkgray);\r\n}\r\n#ValuePlanesPanel #LightLightSliderRange::-moz-range-thumb {\r\n  background: linear-gradient(135deg, lightgray, darkgray);\r\n}\r\n\r\n#ValuePlanesPanel #MidLightRange::-webkit-slider-thumb {\r\n  background: linear-gradient(135deg, lightgray, darkgray);\r\n}\r\n#ValuePlanesPanel #MidLightSliderRange::-moz-range-thumb {\r\n  background: linear-gradient(135deg, lightgray, darkgray);\r\n}\r\n\r\n#ValuePlanesPanel #DarkLightRange::-webkit-slider-thumb {\r\n  background: linear-gradient(135deg, lightgray, darkgray);\r\n}\r\n#ValuePlanesPanel #DarkLightSliderRange::-moz-range-thumb {\r\n  background: linear-gradient(135deg, lightgray, darkgray);\r\n}\r\n\r\n#ValuePlanesPanel #ValuePlanesCanvas {\r\n  position: absolute;\r\n  right: 0px;\r\n  width: 150px;\r\n  height: 150px;\r\n  background-color: rgb(128, 128, 150);\r\n}\r\n\r\n#ValuePlanesPanel #ValuePlanesOverlayCanvas {\r\n  position: absolute;\r\n  right: 0px;\r\n  width: 150px;\r\n  height: 150px;\r\n  background-color: transparent;\r\n}\r\n\r\n@media only screen and (max-device-width: 800px) {\r\n  #ViewerApp #PerspectiveCanvas {\r\n    height: 200px;\r\n  }\r\n\r\n  #ViewerApp #ValuePlanesPanel {\r\n    height: 308px;\r\n  }\r\n\r\n  #ValuePlanesPanel .SlidersDiv {\r\n    right: 308px;\r\n  }\r\n\r\n  #ValuePlanesPanel #ValuePlanesCanvas {\r\n    width: 300px;\r\n    height: 300px;\r\n  }\r\n\r\n  #ValuePlanesPanel #ValuePlanesOverlayCanvas {\r\n    width: 300px;\r\n    height: 300px;\r\n  }\r\n}\r\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/styles/styles.css":
/*!*********************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles/styles.css ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
var ___CSS_LOADER_AT_RULE_IMPORT_0___ = __webpack_require__(/*! -!../../node_modules/css-loader/dist/cjs.js!./Menu.css */ "./node_modules/css-loader/dist/cjs.js!./src/styles/Menu.css");
var ___CSS_LOADER_AT_RULE_IMPORT_1___ = __webpack_require__(/*! -!../../node_modules/css-loader/dist/cjs.js!./Slider.css */ "./node_modules/css-loader/dist/cjs.js!./src/styles/Slider.css");
var ___CSS_LOADER_AT_RULE_IMPORT_2___ = __webpack_require__(/*! -!../../node_modules/css-loader/dist/cjs.js!./Tabs.css */ "./node_modules/css-loader/dist/cjs.js!./src/styles/Tabs.css");
var ___CSS_LOADER_AT_RULE_IMPORT_3___ = __webpack_require__(/*! -!../../node_modules/css-loader/dist/cjs.js!./Checkbox.css */ "./node_modules/css-loader/dist/cjs.js!./src/styles/Checkbox.css");
var ___CSS_LOADER_AT_RULE_IMPORT_4___ = __webpack_require__(/*! -!../../node_modules/css-loader/dist/cjs.js!./Radiobutton.css */ "./node_modules/css-loader/dist/cjs.js!./src/styles/Radiobutton.css");
var ___CSS_LOADER_AT_RULE_IMPORT_5___ = __webpack_require__(/*! -!../../node_modules/css-loader/dist/cjs.js!./ListBox.css */ "./node_modules/css-loader/dist/cjs.js!./src/styles/ListBox.css");
var ___CSS_LOADER_AT_RULE_IMPORT_6___ = __webpack_require__(/*! -!../../node_modules/css-loader/dist/cjs.js!./Button.css */ "./node_modules/css-loader/dist/cjs.js!./src/styles/Button.css");
var ___CSS_LOADER_AT_RULE_IMPORT_7___ = __webpack_require__(/*! -!../../node_modules/css-loader/dist/cjs.js!./ArtSeeApp.css */ "./node_modules/css-loader/dist/cjs.js!./src/styles/ArtSeeApp.css");
var ___CSS_LOADER_AT_RULE_IMPORT_8___ = __webpack_require__(/*! -!../../node_modules/css-loader/dist/cjs.js!./PathTracerApp.css */ "./node_modules/css-loader/dist/cjs.js!./src/styles/PathTracerApp.css");
var ___CSS_LOADER_AT_RULE_IMPORT_9___ = __webpack_require__(/*! -!../../node_modules/css-loader/dist/cjs.js!./ViewerApp.css */ "./node_modules/css-loader/dist/cjs.js!./src/styles/ViewerApp.css");
var ___CSS_LOADER_AT_RULE_IMPORT_10___ = __webpack_require__(/*! -!../../node_modules/css-loader/dist/cjs.js!./SquintApp.css */ "./node_modules/css-loader/dist/cjs.js!./src/styles/SquintApp.css");
var ___CSS_LOADER_AT_RULE_IMPORT_11___ = __webpack_require__(/*! -!../../node_modules/css-loader/dist/cjs.js!./ModelTimerApp.css */ "./node_modules/css-loader/dist/cjs.js!./src/styles/ModelTimerApp.css");
exports = ___CSS_LOADER_API_IMPORT___(false);
exports.i(___CSS_LOADER_AT_RULE_IMPORT_0___);
exports.i(___CSS_LOADER_AT_RULE_IMPORT_1___);
exports.i(___CSS_LOADER_AT_RULE_IMPORT_2___);
exports.i(___CSS_LOADER_AT_RULE_IMPORT_3___);
exports.i(___CSS_LOADER_AT_RULE_IMPORT_4___);
exports.i(___CSS_LOADER_AT_RULE_IMPORT_5___);
exports.i(___CSS_LOADER_AT_RULE_IMPORT_6___);
exports.i(___CSS_LOADER_AT_RULE_IMPORT_7___);
exports.i(___CSS_LOADER_AT_RULE_IMPORT_8___);
exports.i(___CSS_LOADER_AT_RULE_IMPORT_9___);
exports.i(___CSS_LOADER_AT_RULE_IMPORT_10___);
exports.i(___CSS_LOADER_AT_RULE_IMPORT_11___);
// Module
exports.push([module.i, "* {\r\n  font-family: Arial, Helvetica, sans-serif;\r\n}\r\n\r\n/*\r\n * Our strategy for handling multiple devices is to set the font size and \r\n * then scale everything else based on em's. The variables below are set\r\n * within the Javascript code based on the platform, browser, and orientation\r\n */\r\n* {\r\n  font-size: var(--fontSize);\r\n}\r\n\r\n/* for some reason inputs don't respond to our global font size, so manually set them */\r\ninput {\r\n  font-size: 1em;\r\n}\r\nbutton {\r\n  font-size: 1em;\r\n}\r\n\r\n:root {\r\n  --main-color: 114, 117, 134;\r\n}\r\n\r\nbody {\r\n  margin: 0px;\r\n  scrollbar-width: none;\r\n}\r\n\r\nbody::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n\r\n.Container {\r\n  position: relative;\r\n}\r\n\r\n.FlexContainer {\r\n  display: flex;\r\n}\r\n\r\n#MainCanvas {\r\n  background-color: rgb(114, 117, 134);\r\n}\r\n\r\n.Overlay {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  font-size: 40px;\r\n  text-align: center;\r\n  color: white;\r\n  background-color: transparent;\r\n  user-select: none;\r\n  pointer-events: none;\r\n}\r\n\r\n/* hide panels by default - users show them via menus */\r\n.Panel {\r\n  display: none;\r\n}\r\n\r\n.Panel #ExitButton {\r\n  position: absolute;\r\n  display: inline-block;\r\n  width: 20px;\r\n  right: 0;\r\n  top: 0;\r\n  cursor: pointer;\r\n  color: lightgray;\r\n  z-index: 1;\r\n}\r\n\r\n.ViewerApp #ExitButton:hover {\r\n  color: red;\r\n}\r\n\r\n#Console {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: darkblue;\r\n  color: white;\r\n  font-size: smaller;\r\n  display: none;\r\n}\r\n\r\n@media only screen and (max-device-width: 800px) {\r\n  .Panel #ExitButton {\r\n    width: 40px;\r\n  }\r\n\r\n  .OverlayAnnotation {\r\n    font-size: 20pt;\r\n  }\r\n}\r\n", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (useSourceMap) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item, useSourceMap);

      if (item[2]) {
        return "@media ".concat(item[2], " {").concat(content, "}");
      }

      return content;
    }).join('');
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery, dedupe) {
    if (typeof modules === 'string') {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, '']];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var i = 0; i < this.length; i++) {
        // eslint-disable-next-line prefer-destructuring
        var id = this[i][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = [].concat(modules[_i]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        // eslint-disable-next-line no-continue
        continue;
      }

      if (mediaQuery) {
        if (!item[2]) {
          item[2] = mediaQuery;
        } else {
          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
        }
      }

      list.push(item);
    }
  };

  return list;
};

function cssWithMappingToString(item, useSourceMap) {
  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring

  var cssMapping = item[3];

  if (!cssMapping) {
    return content;
  }

  if (useSourceMap && typeof btoa === 'function') {
    var sourceMapping = toComment(cssMapping);
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || '').concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
  }

  return [content].join('\n');
} // Adapted from convert-source-map (MIT)


function toComment(sourceMap) {
  // eslint-disable-next-line no-undef
  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
  var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
  return "/*# ".concat(data, " */");
}

/***/ }),

/***/ "./node_modules/file-saver/dist/FileSaver.min.js":
/*!*******************************************************!*\
  !*** ./node_modules/file-saver/dist/FileSaver.min.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function(a,b){if(true)!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (b),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else {}})(this,function(){"use strict";function b(a,b){return"undefined"==typeof b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error("could not download file")},d.send()}function d(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof b)return c(b,d,e);var h="application/octet-stream"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&"undefined"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g, true&&(module.exports=g)});

//# sourceMappingURL=FileSaver.min.js.map
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/nosleep.js/src/index.js":
/*!**********************************************!*\
  !*** ./node_modules/nosleep.js/src/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const { webm, mp4 } = __webpack_require__(/*! ./media.js */ "./node_modules/nosleep.js/src/media.js");

// Detect iOS browsers < version 10
const oldIOS =
  typeof navigator !== "undefined" &&
  parseFloat(
    (
      "" +
      (/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(
        navigator.userAgent
      ) || [0, ""])[1]
    )
      .replace("undefined", "3_2")
      .replace("_", ".")
      .replace("_", "")
  ) < 10 &&
  !window.MSStream;

// Detect native Wake Lock API support
const nativeWakeLock = "wakeLock" in navigator;

class NoSleep {
  constructor() {
    if (nativeWakeLock) {
      this._wakeLock = null;
      const handleVisibilityChange = () => {
        if (this._wakeLock !== null && document.visibilityState === "visible") {
          this.enable();
        }
      };
      document.addEventListener("visibilitychange", handleVisibilityChange);
      document.addEventListener("fullscreenchange", handleVisibilityChange);
    } else if (oldIOS) {
      this.noSleepTimer = null;
    } else {
      // Set up no sleep video element
      this.noSleepVideo = document.createElement("video");

      this.noSleepVideo.setAttribute("title", "No Sleep");
      this.noSleepVideo.setAttribute("playsinline", "");

      this._addSourceToVideo(this.noSleepVideo, "webm", webm);
      this._addSourceToVideo(this.noSleepVideo, "mp4", mp4);

      this.noSleepVideo.addEventListener("loadedmetadata", () => {
        if (this.noSleepVideo.duration <= 1) {
          // webm source
          this.noSleepVideo.setAttribute("loop", "");
        } else {
          // mp4 source
          this.noSleepVideo.addEventListener("timeupdate", () => {
            if (this.noSleepVideo.currentTime > 0.5) {
              this.noSleepVideo.currentTime = Math.random();
            }
          });
        }
      });
    }
  }

  _addSourceToVideo(element, type, dataURI) {
    var source = document.createElement("source");
    source.src = dataURI;
    source.type = `video/${type}`;
    element.appendChild(source);
  }

  enable() {
    if (nativeWakeLock) {
      navigator.wakeLock
        .request("screen")
        .then((wakeLock) => {
          this._wakeLock = wakeLock;
          console.log("Wake Lock active.");
          this._wakeLock.addEventListener("release", () => {
            // ToDo: Potentially emit an event for the page to observe since
            // Wake Lock releases happen when page visibility changes.
            // (https://web.dev/wakelock/#wake-lock-lifecycle)
            console.log("Wake Lock released.");
          });
        })
        .catch((err) => {
          console.error(`${err.name}, ${err.message}`);
        });
    } else if (oldIOS) {
      this.disable();
      console.warn(`
        NoSleep enabled for older iOS devices. This can interrupt
        active or long-running network requests from completing successfully.
        See https://github.com/richtr/NoSleep.js/issues/15 for more details.
      `);
      this.noSleepTimer = window.setInterval(() => {
        if (!document.hidden) {
          window.location.href = window.location.href.split("#")[0];
          window.setTimeout(window.stop, 0);
        }
      }, 15000);
    } else {
      this.noSleepVideo.play();
    }
  }

  disable() {
    if (nativeWakeLock) {
      this._wakeLock.release();
      this._wakeLock = null;
    } else if (oldIOS) {
      if (this.noSleepTimer) {
        console.warn(`
          NoSleep now disabled for older iOS devices.
        `);
        window.clearInterval(this.noSleepTimer);
        this.noSleepTimer = null;
      }
    } else {
      this.noSleepVideo.pause();
    }
  }
}

module.exports = NoSleep;


/***/ }),

/***/ "./node_modules/nosleep.js/src/media.js":
/*!**********************************************!*\
  !*** ./node_modules/nosleep.js/src/media.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = {
  webm:
    "data:video/webm;base64,GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=",
  mp4:
    "data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQAD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",
};


/***/ }),

/***/ "./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js":
/*!******************************************************************!*\
  !*** ./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/*
 *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
 /* eslint-env node */


var SDPUtils = __webpack_require__(/*! sdp */ "./node_modules/sdp/sdp.js");

function fixStatsType(stat) {
  return {
    inboundrtp: 'inbound-rtp',
    outboundrtp: 'outbound-rtp',
    candidatepair: 'candidate-pair',
    localcandidate: 'local-candidate',
    remotecandidate: 'remote-candidate'
  }[stat.type] || stat.type;
}

function writeMediaSection(transceiver, caps, type, stream, dtlsRole) {
  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);

  // Map ICE parameters (ufrag, pwd) to SDP.
  sdp += SDPUtils.writeIceParameters(
      transceiver.iceGatherer.getLocalParameters());

  // Map DTLS parameters to SDP.
  sdp += SDPUtils.writeDtlsParameters(
      transceiver.dtlsTransport.getLocalParameters(),
      type === 'offer' ? 'actpass' : dtlsRole || 'active');

  sdp += 'a=mid:' + transceiver.mid + '\r\n';

  if (transceiver.rtpSender && transceiver.rtpReceiver) {
    sdp += 'a=sendrecv\r\n';
  } else if (transceiver.rtpSender) {
    sdp += 'a=sendonly\r\n';
  } else if (transceiver.rtpReceiver) {
    sdp += 'a=recvonly\r\n';
  } else {
    sdp += 'a=inactive\r\n';
  }

  if (transceiver.rtpSender) {
    var trackId = transceiver.rtpSender._initialTrackId ||
        transceiver.rtpSender.track.id;
    transceiver.rtpSender._initialTrackId = trackId;
    // spec.
    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +
        trackId + '\r\n';
    sdp += 'a=' + msid;
    // for Chrome. Legacy should no longer be required.
    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +
        ' ' + msid;

    // RTX
    if (transceiver.sendEncodingParameters[0].rtx) {
      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +
          ' ' + msid;
      sdp += 'a=ssrc-group:FID ' +
          transceiver.sendEncodingParameters[0].ssrc + ' ' +
          transceiver.sendEncodingParameters[0].rtx.ssrc +
          '\r\n';
    }
  }
  // FIXME: this should be written by writeRtpDescription.
  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +
      ' cname:' + SDPUtils.localCName + '\r\n';
  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {
    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +
        ' cname:' + SDPUtils.localCName + '\r\n';
  }
  return sdp;
}

// Edge does not like
// 1) stun: filtered after 14393 unless ?transport=udp is present
// 2) turn: that does not have all of turn:host:port?transport=udp
// 3) turn: with ipv6 addresses
// 4) turn: occurring muliple times
function filterIceServers(iceServers, edgeVersion) {
  var hasTurn = false;
  iceServers = JSON.parse(JSON.stringify(iceServers));
  return iceServers.filter(function(server) {
    if (server && (server.urls || server.url)) {
      var urls = server.urls || server.url;
      if (server.url && !server.urls) {
        console.warn('RTCIceServer.url is deprecated! Use urls instead.');
      }
      var isString = typeof urls === 'string';
      if (isString) {
        urls = [urls];
      }
      urls = urls.filter(function(url) {
        var validTurn = url.indexOf('turn:') === 0 &&
            url.indexOf('transport=udp') !== -1 &&
            url.indexOf('turn:[') === -1 &&
            !hasTurn;

        if (validTurn) {
          hasTurn = true;
          return true;
        }
        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&
            url.indexOf('?transport=udp') === -1;
      });

      delete server.url;
      server.urls = isString ? urls[0] : urls;
      return !!urls.length;
    }
  });
}

// Determines the intersection of local and remote capabilities.
function getCommonCapabilities(localCapabilities, remoteCapabilities) {
  var commonCapabilities = {
    codecs: [],
    headerExtensions: [],
    fecMechanisms: []
  };

  var findCodecByPayloadType = function(pt, codecs) {
    pt = parseInt(pt, 10);
    for (var i = 0; i < codecs.length; i++) {
      if (codecs[i].payloadType === pt ||
          codecs[i].preferredPayloadType === pt) {
        return codecs[i];
      }
    }
  };

  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {
    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);
    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);
    return lCodec && rCodec &&
        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();
  };

  localCapabilities.codecs.forEach(function(lCodec) {
    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {
      var rCodec = remoteCapabilities.codecs[i];
      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&
          lCodec.clockRate === rCodec.clockRate) {
        if (lCodec.name.toLowerCase() === 'rtx' &&
            lCodec.parameters && rCodec.parameters.apt) {
          // for RTX we need to find the local rtx that has a apt
          // which points to the same local codec as the remote one.
          if (!rtxCapabilityMatches(lCodec, rCodec,
              localCapabilities.codecs, remoteCapabilities.codecs)) {
            continue;
          }
        }
        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy
        // number of channels is the highest common number of channels
        rCodec.numChannels = Math.min(lCodec.numChannels,
            rCodec.numChannels);
        // push rCodec so we reply with offerer payload type
        commonCapabilities.codecs.push(rCodec);

        // determine common feedback mechanisms
        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {
          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {
            if (lCodec.rtcpFeedback[j].type === fb.type &&
                lCodec.rtcpFeedback[j].parameter === fb.parameter) {
              return true;
            }
          }
          return false;
        });
        // FIXME: also need to determine .parameters
        //  see https://github.com/openpeer/ortc/issues/569
        break;
      }
    }
  });

  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {
    for (var i = 0; i < remoteCapabilities.headerExtensions.length;
         i++) {
      var rHeaderExtension = remoteCapabilities.headerExtensions[i];
      if (lHeaderExtension.uri === rHeaderExtension.uri) {
        commonCapabilities.headerExtensions.push(rHeaderExtension);
        break;
      }
    }
  });

  // FIXME: fecMechanisms
  return commonCapabilities;
}

// is action=setLocalDescription with type allowed in signalingState
function isActionAllowedInSignalingState(action, type, signalingState) {
  return {
    offer: {
      setLocalDescription: ['stable', 'have-local-offer'],
      setRemoteDescription: ['stable', 'have-remote-offer']
    },
    answer: {
      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],
      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']
    }
  }[type][action].indexOf(signalingState) !== -1;
}

function maybeAddCandidate(iceTransport, candidate) {
  // Edge's internal representation adds some fields therefore
  // not all fieldѕ are taken into account.
  var alreadyAdded = iceTransport.getRemoteCandidates()
      .find(function(remoteCandidate) {
        return candidate.foundation === remoteCandidate.foundation &&
            candidate.ip === remoteCandidate.ip &&
            candidate.port === remoteCandidate.port &&
            candidate.priority === remoteCandidate.priority &&
            candidate.protocol === remoteCandidate.protocol &&
            candidate.type === remoteCandidate.type;
      });
  if (!alreadyAdded) {
    iceTransport.addRemoteCandidate(candidate);
  }
  return !alreadyAdded;
}


function makeError(name, description) {
  var e = new Error(description);
  e.name = name;
  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names
  e.code = {
    NotSupportedError: 9,
    InvalidStateError: 11,
    InvalidAccessError: 15,
    TypeError: undefined,
    OperationError: undefined
  }[name];
  return e;
}

module.exports = function(window, edgeVersion) {
  // https://w3c.github.io/mediacapture-main/#mediastream
  // Helper function to add the track to the stream and
  // dispatch the event ourselves.
  function addTrackToStreamAndFireEvent(track, stream) {
    stream.addTrack(track);
    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',
        {track: track}));
  }

  function removeTrackFromStreamAndFireEvent(track, stream) {
    stream.removeTrack(track);
    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',
        {track: track}));
  }

  function fireAddTrack(pc, track, receiver, streams) {
    var trackEvent = new Event('track');
    trackEvent.track = track;
    trackEvent.receiver = receiver;
    trackEvent.transceiver = {receiver: receiver};
    trackEvent.streams = streams;
    window.setTimeout(function() {
      pc._dispatchEvent('track', trackEvent);
    });
  }

  var RTCPeerConnection = function(config) {
    var pc = this;

    var _eventTarget = document.createDocumentFragment();
    ['addEventListener', 'removeEventListener', 'dispatchEvent']
        .forEach(function(method) {
          pc[method] = _eventTarget[method].bind(_eventTarget);
        });

    this.canTrickleIceCandidates = null;

    this.needNegotiation = false;

    this.localStreams = [];
    this.remoteStreams = [];

    this._localDescription = null;
    this._remoteDescription = null;

    this.signalingState = 'stable';
    this.iceConnectionState = 'new';
    this.connectionState = 'new';
    this.iceGatheringState = 'new';

    config = JSON.parse(JSON.stringify(config || {}));

    this.usingBundle = config.bundlePolicy === 'max-bundle';
    if (config.rtcpMuxPolicy === 'negotiate') {
      throw(makeError('NotSupportedError',
          'rtcpMuxPolicy \'negotiate\' is not supported'));
    } else if (!config.rtcpMuxPolicy) {
      config.rtcpMuxPolicy = 'require';
    }

    switch (config.iceTransportPolicy) {
      case 'all':
      case 'relay':
        break;
      default:
        config.iceTransportPolicy = 'all';
        break;
    }

    switch (config.bundlePolicy) {
      case 'balanced':
      case 'max-compat':
      case 'max-bundle':
        break;
      default:
        config.bundlePolicy = 'balanced';
        break;
    }

    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);

    this._iceGatherers = [];
    if (config.iceCandidatePoolSize) {
      for (var i = config.iceCandidatePoolSize; i > 0; i--) {
        this._iceGatherers.push(new window.RTCIceGatherer({
          iceServers: config.iceServers,
          gatherPolicy: config.iceTransportPolicy
        }));
      }
    } else {
      config.iceCandidatePoolSize = 0;
    }

    this._config = config;

    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...
    // everything that is needed to describe a SDP m-line.
    this.transceivers = [];

    this._sdpSessionId = SDPUtils.generateSessionId();
    this._sdpSessionVersion = 0;

    this._dtlsRole = undefined; // role for a=setup to use in answers.

    this._isClosed = false;
  };

  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {
    configurable: true,
    get: function() {
      return this._localDescription;
    }
  });
  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {
    configurable: true,
    get: function() {
      return this._remoteDescription;
    }
  });

  // set up event handlers on prototype
  RTCPeerConnection.prototype.onicecandidate = null;
  RTCPeerConnection.prototype.onaddstream = null;
  RTCPeerConnection.prototype.ontrack = null;
  RTCPeerConnection.prototype.onremovestream = null;
  RTCPeerConnection.prototype.onsignalingstatechange = null;
  RTCPeerConnection.prototype.oniceconnectionstatechange = null;
  RTCPeerConnection.prototype.onconnectionstatechange = null;
  RTCPeerConnection.prototype.onicegatheringstatechange = null;
  RTCPeerConnection.prototype.onnegotiationneeded = null;
  RTCPeerConnection.prototype.ondatachannel = null;

  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {
    if (this._isClosed) {
      return;
    }
    this.dispatchEvent(event);
    if (typeof this['on' + name] === 'function') {
      this['on' + name](event);
    }
  };

  RTCPeerConnection.prototype._emitGatheringStateChange = function() {
    var event = new Event('icegatheringstatechange');
    this._dispatchEvent('icegatheringstatechange', event);
  };

  RTCPeerConnection.prototype.getConfiguration = function() {
    return this._config;
  };

  RTCPeerConnection.prototype.getLocalStreams = function() {
    return this.localStreams;
  };

  RTCPeerConnection.prototype.getRemoteStreams = function() {
    return this.remoteStreams;
  };

  // internal helper to create a transceiver object.
  // (which is not yet the same as the WebRTC 1.0 transceiver)
  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {
    var hasBundleTransport = this.transceivers.length > 0;
    var transceiver = {
      track: null,
      iceGatherer: null,
      iceTransport: null,
      dtlsTransport: null,
      localCapabilities: null,
      remoteCapabilities: null,
      rtpSender: null,
      rtpReceiver: null,
      kind: kind,
      mid: null,
      sendEncodingParameters: null,
      recvEncodingParameters: null,
      stream: null,
      associatedRemoteMediaStreams: [],
      wantReceive: true
    };
    if (this.usingBundle && hasBundleTransport) {
      transceiver.iceTransport = this.transceivers[0].iceTransport;
      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;
    } else {
      var transports = this._createIceAndDtlsTransports();
      transceiver.iceTransport = transports.iceTransport;
      transceiver.dtlsTransport = transports.dtlsTransport;
    }
    if (!doNotAdd) {
      this.transceivers.push(transceiver);
    }
    return transceiver;
  };

  RTCPeerConnection.prototype.addTrack = function(track, stream) {
    if (this._isClosed) {
      throw makeError('InvalidStateError',
          'Attempted to call addTrack on a closed peerconnection.');
    }

    var alreadyExists = this.transceivers.find(function(s) {
      return s.track === track;
    });

    if (alreadyExists) {
      throw makeError('InvalidAccessError', 'Track already exists.');
    }

    var transceiver;
    for (var i = 0; i < this.transceivers.length; i++) {
      if (!this.transceivers[i].track &&
          this.transceivers[i].kind === track.kind) {
        transceiver = this.transceivers[i];
      }
    }
    if (!transceiver) {
      transceiver = this._createTransceiver(track.kind);
    }

    this._maybeFireNegotiationNeeded();

    if (this.localStreams.indexOf(stream) === -1) {
      this.localStreams.push(stream);
    }

    transceiver.track = track;
    transceiver.stream = stream;
    transceiver.rtpSender = new window.RTCRtpSender(track,
        transceiver.dtlsTransport);
    return transceiver.rtpSender;
  };

  RTCPeerConnection.prototype.addStream = function(stream) {
    var pc = this;
    if (edgeVersion >= 15025) {
      stream.getTracks().forEach(function(track) {
        pc.addTrack(track, stream);
      });
    } else {
      // Clone is necessary for local demos mostly, attaching directly
      // to two different senders does not work (build 10547).
      // Fixed in 15025 (or earlier)
      var clonedStream = stream.clone();
      stream.getTracks().forEach(function(track, idx) {
        var clonedTrack = clonedStream.getTracks()[idx];
        track.addEventListener('enabled', function(event) {
          clonedTrack.enabled = event.enabled;
        });
      });
      clonedStream.getTracks().forEach(function(track) {
        pc.addTrack(track, clonedStream);
      });
    }
  };

  RTCPeerConnection.prototype.removeTrack = function(sender) {
    if (this._isClosed) {
      throw makeError('InvalidStateError',
          'Attempted to call removeTrack on a closed peerconnection.');
    }

    if (!(sender instanceof window.RTCRtpSender)) {
      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +
          'does not implement interface RTCRtpSender.');
    }

    var transceiver = this.transceivers.find(function(t) {
      return t.rtpSender === sender;
    });

    if (!transceiver) {
      throw makeError('InvalidAccessError',
          'Sender was not created by this connection.');
    }
    var stream = transceiver.stream;

    transceiver.rtpSender.stop();
    transceiver.rtpSender = null;
    transceiver.track = null;
    transceiver.stream = null;

    // remove the stream from the set of local streams
    var localStreams = this.transceivers.map(function(t) {
      return t.stream;
    });
    if (localStreams.indexOf(stream) === -1 &&
        this.localStreams.indexOf(stream) > -1) {
      this.localStreams.splice(this.localStreams.indexOf(stream), 1);
    }

    this._maybeFireNegotiationNeeded();
  };

  RTCPeerConnection.prototype.removeStream = function(stream) {
    var pc = this;
    stream.getTracks().forEach(function(track) {
      var sender = pc.getSenders().find(function(s) {
        return s.track === track;
      });
      if (sender) {
        pc.removeTrack(sender);
      }
    });
  };

  RTCPeerConnection.prototype.getSenders = function() {
    return this.transceivers.filter(function(transceiver) {
      return !!transceiver.rtpSender;
    })
    .map(function(transceiver) {
      return transceiver.rtpSender;
    });
  };

  RTCPeerConnection.prototype.getReceivers = function() {
    return this.transceivers.filter(function(transceiver) {
      return !!transceiver.rtpReceiver;
    })
    .map(function(transceiver) {
      return transceiver.rtpReceiver;
    });
  };


  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,
      usingBundle) {
    var pc = this;
    if (usingBundle && sdpMLineIndex > 0) {
      return this.transceivers[0].iceGatherer;
    } else if (this._iceGatherers.length) {
      return this._iceGatherers.shift();
    }
    var iceGatherer = new window.RTCIceGatherer({
      iceServers: this._config.iceServers,
      gatherPolicy: this._config.iceTransportPolicy
    });
    Object.defineProperty(iceGatherer, 'state',
        {value: 'new', writable: true}
    );

    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];
    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {
      var end = !event.candidate || Object.keys(event.candidate).length === 0;
      // polyfill since RTCIceGatherer.state is not implemented in
      // Edge 10547 yet.
      iceGatherer.state = end ? 'completed' : 'gathering';
      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {
        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);
      }
    };
    iceGatherer.addEventListener('localcandidate',
      this.transceivers[sdpMLineIndex].bufferCandidates);
    return iceGatherer;
  };

  // start gathering from an RTCIceGatherer.
  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {
    var pc = this;
    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;
    if (iceGatherer.onlocalcandidate) {
      return;
    }
    var bufferedCandidateEvents =
      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;
    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;
    iceGatherer.removeEventListener('localcandidate',
      this.transceivers[sdpMLineIndex].bufferCandidates);
    iceGatherer.onlocalcandidate = function(evt) {
      if (pc.usingBundle && sdpMLineIndex > 0) {
        // if we know that we use bundle we can drop candidates with
        // ѕdpMLineIndex > 0. If we don't do this then our state gets
        // confused since we dispose the extra ice gatherer.
        return;
      }
      var event = new Event('icecandidate');
      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};

      var cand = evt.candidate;
      // Edge emits an empty object for RTCIceCandidateComplete‥
      var end = !cand || Object.keys(cand).length === 0;
      if (end) {
        // polyfill since RTCIceGatherer.state is not implemented in
        // Edge 10547 yet.
        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {
          iceGatherer.state = 'completed';
        }
      } else {
        if (iceGatherer.state === 'new') {
          iceGatherer.state = 'gathering';
        }
        // RTCIceCandidate doesn't have a component, needs to be added
        cand.component = 1;
        // also the usernameFragment. TODO: update SDP to take both variants.
        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;

        var serializedCandidate = SDPUtils.writeCandidate(cand);
        event.candidate = Object.assign(event.candidate,
            SDPUtils.parseCandidate(serializedCandidate));

        event.candidate.candidate = serializedCandidate;
        event.candidate.toJSON = function() {
          return {
            candidate: event.candidate.candidate,
            sdpMid: event.candidate.sdpMid,
            sdpMLineIndex: event.candidate.sdpMLineIndex,
            usernameFragment: event.candidate.usernameFragment
          };
        };
      }

      // update local description.
      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);
      if (!end) {
        sections[event.candidate.sdpMLineIndex] +=
            'a=' + event.candidate.candidate + '\r\n';
      } else {
        sections[event.candidate.sdpMLineIndex] +=
            'a=end-of-candidates\r\n';
      }
      pc._localDescription.sdp =
          SDPUtils.getDescription(pc._localDescription.sdp) +
          sections.join('');
      var complete = pc.transceivers.every(function(transceiver) {
        return transceiver.iceGatherer &&
            transceiver.iceGatherer.state === 'completed';
      });

      if (pc.iceGatheringState !== 'gathering') {
        pc.iceGatheringState = 'gathering';
        pc._emitGatheringStateChange();
      }

      // Emit candidate. Also emit null candidate when all gatherers are
      // complete.
      if (!end) {
        pc._dispatchEvent('icecandidate', event);
      }
      if (complete) {
        pc._dispatchEvent('icecandidate', new Event('icecandidate'));
        pc.iceGatheringState = 'complete';
        pc._emitGatheringStateChange();
      }
    };

    // emit already gathered candidates.
    window.setTimeout(function() {
      bufferedCandidateEvents.forEach(function(e) {
        iceGatherer.onlocalcandidate(e);
      });
    }, 0);
  };

  // Create ICE transport and DTLS transport.
  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {
    var pc = this;
    var iceTransport = new window.RTCIceTransport(null);
    iceTransport.onicestatechange = function() {
      pc._updateIceConnectionState();
      pc._updateConnectionState();
    };

    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);
    dtlsTransport.ondtlsstatechange = function() {
      pc._updateConnectionState();
    };
    dtlsTransport.onerror = function() {
      // onerror does not set state to failed by itself.
      Object.defineProperty(dtlsTransport, 'state',
          {value: 'failed', writable: true});
      pc._updateConnectionState();
    };

    return {
      iceTransport: iceTransport,
      dtlsTransport: dtlsTransport
    };
  };

  // Destroy ICE gatherer, ICE transport and DTLS transport.
  // Without triggering the callbacks.
  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(
      sdpMLineIndex) {
    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;
    if (iceGatherer) {
      delete iceGatherer.onlocalcandidate;
      delete this.transceivers[sdpMLineIndex].iceGatherer;
    }
    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;
    if (iceTransport) {
      delete iceTransport.onicestatechange;
      delete this.transceivers[sdpMLineIndex].iceTransport;
    }
    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;
    if (dtlsTransport) {
      delete dtlsTransport.ondtlsstatechange;
      delete dtlsTransport.onerror;
      delete this.transceivers[sdpMLineIndex].dtlsTransport;
    }
  };

  // Start the RTP Sender and Receiver for a transceiver.
  RTCPeerConnection.prototype._transceive = function(transceiver,
      send, recv) {
    var params = getCommonCapabilities(transceiver.localCapabilities,
        transceiver.remoteCapabilities);
    if (send && transceiver.rtpSender) {
      params.encodings = transceiver.sendEncodingParameters;
      params.rtcp = {
        cname: SDPUtils.localCName,
        compound: transceiver.rtcpParameters.compound
      };
      if (transceiver.recvEncodingParameters.length) {
        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;
      }
      transceiver.rtpSender.send(params);
    }
    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {
      // remove RTX field in Edge 14942
      if (transceiver.kind === 'video'
          && transceiver.recvEncodingParameters
          && edgeVersion < 15019) {
        transceiver.recvEncodingParameters.forEach(function(p) {
          delete p.rtx;
        });
      }
      if (transceiver.recvEncodingParameters.length) {
        params.encodings = transceiver.recvEncodingParameters;
      } else {
        params.encodings = [{}];
      }
      params.rtcp = {
        compound: transceiver.rtcpParameters.compound
      };
      if (transceiver.rtcpParameters.cname) {
        params.rtcp.cname = transceiver.rtcpParameters.cname;
      }
      if (transceiver.sendEncodingParameters.length) {
        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;
      }
      transceiver.rtpReceiver.receive(params);
    }
  };

  RTCPeerConnection.prototype.setLocalDescription = function(description) {
    var pc = this;

    // Note: pranswer is not supported.
    if (['offer', 'answer'].indexOf(description.type) === -1) {
      return Promise.reject(makeError('TypeError',
          'Unsupported type "' + description.type + '"'));
    }

    if (!isActionAllowedInSignalingState('setLocalDescription',
        description.type, pc.signalingState) || pc._isClosed) {
      return Promise.reject(makeError('InvalidStateError',
          'Can not set local ' + description.type +
          ' in state ' + pc.signalingState));
    }

    var sections;
    var sessionpart;
    if (description.type === 'offer') {
      // VERY limited support for SDP munging. Limited to:
      // * changing the order of codecs
      sections = SDPUtils.splitSections(description.sdp);
      sessionpart = sections.shift();
      sections.forEach(function(mediaSection, sdpMLineIndex) {
        var caps = SDPUtils.parseRtpParameters(mediaSection);
        pc.transceivers[sdpMLineIndex].localCapabilities = caps;
      });

      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {
        pc._gather(transceiver.mid, sdpMLineIndex);
      });
    } else if (description.type === 'answer') {
      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);
      sessionpart = sections.shift();
      var isIceLite = SDPUtils.matchPrefix(sessionpart,
          'a=ice-lite').length > 0;
      sections.forEach(function(mediaSection, sdpMLineIndex) {
        var transceiver = pc.transceivers[sdpMLineIndex];
        var iceGatherer = transceiver.iceGatherer;
        var iceTransport = transceiver.iceTransport;
        var dtlsTransport = transceiver.dtlsTransport;
        var localCapabilities = transceiver.localCapabilities;
        var remoteCapabilities = transceiver.remoteCapabilities;

        // treat bundle-only as not-rejected.
        var rejected = SDPUtils.isRejected(mediaSection) &&
            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;

        if (!rejected && !transceiver.rejected) {
          var remoteIceParameters = SDPUtils.getIceParameters(
              mediaSection, sessionpart);
          var remoteDtlsParameters = SDPUtils.getDtlsParameters(
              mediaSection, sessionpart);
          if (isIceLite) {
            remoteDtlsParameters.role = 'server';
          }

          if (!pc.usingBundle || sdpMLineIndex === 0) {
            pc._gather(transceiver.mid, sdpMLineIndex);
            if (iceTransport.state === 'new') {
              iceTransport.start(iceGatherer, remoteIceParameters,
                  isIceLite ? 'controlling' : 'controlled');
            }
            if (dtlsTransport.state === 'new') {
              dtlsTransport.start(remoteDtlsParameters);
            }
          }

          // Calculate intersection of capabilities.
          var params = getCommonCapabilities(localCapabilities,
              remoteCapabilities);

          // Start the RTCRtpSender. The RTCRtpReceiver for this
          // transceiver has already been started in setRemoteDescription.
          pc._transceive(transceiver,
              params.codecs.length > 0,
              false);
        }
      });
    }

    pc._localDescription = {
      type: description.type,
      sdp: description.sdp
    };
    if (description.type === 'offer') {
      pc._updateSignalingState('have-local-offer');
    } else {
      pc._updateSignalingState('stable');
    }

    return Promise.resolve();
  };

  RTCPeerConnection.prototype.setRemoteDescription = function(description) {
    var pc = this;

    // Note: pranswer is not supported.
    if (['offer', 'answer'].indexOf(description.type) === -1) {
      return Promise.reject(makeError('TypeError',
          'Unsupported type "' + description.type + '"'));
    }

    if (!isActionAllowedInSignalingState('setRemoteDescription',
        description.type, pc.signalingState) || pc._isClosed) {
      return Promise.reject(makeError('InvalidStateError',
          'Can not set remote ' + description.type +
          ' in state ' + pc.signalingState));
    }

    var streams = {};
    pc.remoteStreams.forEach(function(stream) {
      streams[stream.id] = stream;
    });
    var receiverList = [];
    var sections = SDPUtils.splitSections(description.sdp);
    var sessionpart = sections.shift();
    var isIceLite = SDPUtils.matchPrefix(sessionpart,
        'a=ice-lite').length > 0;
    var usingBundle = SDPUtils.matchPrefix(sessionpart,
        'a=group:BUNDLE ').length > 0;
    pc.usingBundle = usingBundle;
    var iceOptions = SDPUtils.matchPrefix(sessionpart,
        'a=ice-options:')[0];
    if (iceOptions) {
      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')
          .indexOf('trickle') >= 0;
    } else {
      pc.canTrickleIceCandidates = false;
    }

    sections.forEach(function(mediaSection, sdpMLineIndex) {
      var lines = SDPUtils.splitLines(mediaSection);
      var kind = SDPUtils.getKind(mediaSection);
      // treat bundle-only as not-rejected.
      var rejected = SDPUtils.isRejected(mediaSection) &&
          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;
      var protocol = lines[0].substr(2).split(' ')[2];

      var direction = SDPUtils.getDirection(mediaSection, sessionpart);
      var remoteMsid = SDPUtils.parseMsid(mediaSection);

      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();

      // Reject datachannels which are not implemented yet.
      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||
          protocol === 'UDP/DTLS/SCTP'))) {
        // TODO: this is dangerous in the case where a non-rejected m-line
        //     becomes rejected.
        pc.transceivers[sdpMLineIndex] = {
          mid: mid,
          kind: kind,
          protocol: protocol,
          rejected: true
        };
        return;
      }

      if (!rejected && pc.transceivers[sdpMLineIndex] &&
          pc.transceivers[sdpMLineIndex].rejected) {
        // recycle a rejected transceiver.
        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);
      }

      var transceiver;
      var iceGatherer;
      var iceTransport;
      var dtlsTransport;
      var rtpReceiver;
      var sendEncodingParameters;
      var recvEncodingParameters;
      var localCapabilities;

      var track;
      // FIXME: ensure the mediaSection has rtcp-mux set.
      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);
      var remoteIceParameters;
      var remoteDtlsParameters;
      if (!rejected) {
        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,
            sessionpart);
        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,
            sessionpart);
        remoteDtlsParameters.role = 'client';
      }
      recvEncodingParameters =
          SDPUtils.parseRtpEncodingParameters(mediaSection);

      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);

      var isComplete = SDPUtils.matchPrefix(mediaSection,
          'a=end-of-candidates', sessionpart).length > 0;
      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')
          .map(function(cand) {
            return SDPUtils.parseCandidate(cand);
          })
          .filter(function(cand) {
            return cand.component === 1;
          });

      // Check if we can use BUNDLE and dispose transports.
      if ((description.type === 'offer' || description.type === 'answer') &&
          !rejected && usingBundle && sdpMLineIndex > 0 &&
          pc.transceivers[sdpMLineIndex]) {
        pc._disposeIceAndDtlsTransports(sdpMLineIndex);
        pc.transceivers[sdpMLineIndex].iceGatherer =
            pc.transceivers[0].iceGatherer;
        pc.transceivers[sdpMLineIndex].iceTransport =
            pc.transceivers[0].iceTransport;
        pc.transceivers[sdpMLineIndex].dtlsTransport =
            pc.transceivers[0].dtlsTransport;
        if (pc.transceivers[sdpMLineIndex].rtpSender) {
          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(
              pc.transceivers[0].dtlsTransport);
        }
        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {
          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(
              pc.transceivers[0].dtlsTransport);
        }
      }
      if (description.type === 'offer' && !rejected) {
        transceiver = pc.transceivers[sdpMLineIndex] ||
            pc._createTransceiver(kind);
        transceiver.mid = mid;

        if (!transceiver.iceGatherer) {
          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,
              usingBundle);
        }

        if (cands.length && transceiver.iceTransport.state === 'new') {
          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {
            transceiver.iceTransport.setRemoteCandidates(cands);
          } else {
            cands.forEach(function(candidate) {
              maybeAddCandidate(transceiver.iceTransport, candidate);
            });
          }
        }

        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);

        // filter RTX until additional stuff needed for RTX is implemented
        // in adapter.js
        if (edgeVersion < 15019) {
          localCapabilities.codecs = localCapabilities.codecs.filter(
              function(codec) {
                return codec.name !== 'rtx';
              });
        }

        sendEncodingParameters = transceiver.sendEncodingParameters || [{
          ssrc: (2 * sdpMLineIndex + 2) * 1001
        }];

        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams
        var isNewTrack = false;
        if (direction === 'sendrecv' || direction === 'sendonly') {
          isNewTrack = !transceiver.rtpReceiver;
          rtpReceiver = transceiver.rtpReceiver ||
              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);

          if (isNewTrack) {
            var stream;
            track = rtpReceiver.track;
            // FIXME: does not work with Plan B.
            if (remoteMsid && remoteMsid.stream === '-') {
              // no-op. a stream id of '-' means: no associated stream.
            } else if (remoteMsid) {
              if (!streams[remoteMsid.stream]) {
                streams[remoteMsid.stream] = new window.MediaStream();
                Object.defineProperty(streams[remoteMsid.stream], 'id', {
                  get: function() {
                    return remoteMsid.stream;
                  }
                });
              }
              Object.defineProperty(track, 'id', {
                get: function() {
                  return remoteMsid.track;
                }
              });
              stream = streams[remoteMsid.stream];
            } else {
              if (!streams.default) {
                streams.default = new window.MediaStream();
              }
              stream = streams.default;
            }
            if (stream) {
              addTrackToStreamAndFireEvent(track, stream);
              transceiver.associatedRemoteMediaStreams.push(stream);
            }
            receiverList.push([track, rtpReceiver, stream]);
          }
        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {
          transceiver.associatedRemoteMediaStreams.forEach(function(s) {
            var nativeTrack = s.getTracks().find(function(t) {
              return t.id === transceiver.rtpReceiver.track.id;
            });
            if (nativeTrack) {
              removeTrackFromStreamAndFireEvent(nativeTrack, s);
            }
          });
          transceiver.associatedRemoteMediaStreams = [];
        }

        transceiver.localCapabilities = localCapabilities;
        transceiver.remoteCapabilities = remoteCapabilities;
        transceiver.rtpReceiver = rtpReceiver;
        transceiver.rtcpParameters = rtcpParameters;
        transceiver.sendEncodingParameters = sendEncodingParameters;
        transceiver.recvEncodingParameters = recvEncodingParameters;

        // Start the RTCRtpReceiver now. The RTPSender is started in
        // setLocalDescription.
        pc._transceive(pc.transceivers[sdpMLineIndex],
            false,
            isNewTrack);
      } else if (description.type === 'answer' && !rejected) {
        transceiver = pc.transceivers[sdpMLineIndex];
        iceGatherer = transceiver.iceGatherer;
        iceTransport = transceiver.iceTransport;
        dtlsTransport = transceiver.dtlsTransport;
        rtpReceiver = transceiver.rtpReceiver;
        sendEncodingParameters = transceiver.sendEncodingParameters;
        localCapabilities = transceiver.localCapabilities;

        pc.transceivers[sdpMLineIndex].recvEncodingParameters =
            recvEncodingParameters;
        pc.transceivers[sdpMLineIndex].remoteCapabilities =
            remoteCapabilities;
        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;

        if (cands.length && iceTransport.state === 'new') {
          if ((isIceLite || isComplete) &&
              (!usingBundle || sdpMLineIndex === 0)) {
            iceTransport.setRemoteCandidates(cands);
          } else {
            cands.forEach(function(candidate) {
              maybeAddCandidate(transceiver.iceTransport, candidate);
            });
          }
        }

        if (!usingBundle || sdpMLineIndex === 0) {
          if (iceTransport.state === 'new') {
            iceTransport.start(iceGatherer, remoteIceParameters,
                'controlling');
          }
          if (dtlsTransport.state === 'new') {
            dtlsTransport.start(remoteDtlsParameters);
          }
        }

        // If the offer contained RTX but the answer did not,
        // remove RTX from sendEncodingParameters.
        var commonCapabilities = getCommonCapabilities(
          transceiver.localCapabilities,
          transceiver.remoteCapabilities);

        var hasRtx = commonCapabilities.codecs.filter(function(c) {
          return c.name.toLowerCase() === 'rtx';
        }).length;
        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {
          delete transceiver.sendEncodingParameters[0].rtx;
        }

        pc._transceive(transceiver,
            direction === 'sendrecv' || direction === 'recvonly',
            direction === 'sendrecv' || direction === 'sendonly');

        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams
        if (rtpReceiver &&
            (direction === 'sendrecv' || direction === 'sendonly')) {
          track = rtpReceiver.track;
          if (remoteMsid) {
            if (!streams[remoteMsid.stream]) {
              streams[remoteMsid.stream] = new window.MediaStream();
            }
            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);
            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);
          } else {
            if (!streams.default) {
              streams.default = new window.MediaStream();
            }
            addTrackToStreamAndFireEvent(track, streams.default);
            receiverList.push([track, rtpReceiver, streams.default]);
          }
        } else {
          // FIXME: actually the receiver should be created later.
          delete transceiver.rtpReceiver;
        }
      }
    });

    if (pc._dtlsRole === undefined) {
      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';
    }

    pc._remoteDescription = {
      type: description.type,
      sdp: description.sdp
    };
    if (description.type === 'offer') {
      pc._updateSignalingState('have-remote-offer');
    } else {
      pc._updateSignalingState('stable');
    }
    Object.keys(streams).forEach(function(sid) {
      var stream = streams[sid];
      if (stream.getTracks().length) {
        if (pc.remoteStreams.indexOf(stream) === -1) {
          pc.remoteStreams.push(stream);
          var event = new Event('addstream');
          event.stream = stream;
          window.setTimeout(function() {
            pc._dispatchEvent('addstream', event);
          });
        }

        receiverList.forEach(function(item) {
          var track = item[0];
          var receiver = item[1];
          if (stream.id !== item[2].id) {
            return;
          }
          fireAddTrack(pc, track, receiver, [stream]);
        });
      }
    });
    receiverList.forEach(function(item) {
      if (item[2]) {
        return;
      }
      fireAddTrack(pc, item[0], item[1], []);
    });

    // check whether addIceCandidate({}) was called within four seconds after
    // setRemoteDescription.
    window.setTimeout(function() {
      if (!(pc && pc.transceivers)) {
        return;
      }
      pc.transceivers.forEach(function(transceiver) {
        if (transceiver.iceTransport &&
            transceiver.iceTransport.state === 'new' &&
            transceiver.iceTransport.getRemoteCandidates().length > 0) {
          console.warn('Timeout for addRemoteCandidate. Consider sending ' +
              'an end-of-candidates notification');
          transceiver.iceTransport.addRemoteCandidate({});
        }
      });
    }, 4000);

    return Promise.resolve();
  };

  RTCPeerConnection.prototype.close = function() {
    this.transceivers.forEach(function(transceiver) {
      /* not yet
      if (transceiver.iceGatherer) {
        transceiver.iceGatherer.close();
      }
      */
      if (transceiver.iceTransport) {
        transceiver.iceTransport.stop();
      }
      if (transceiver.dtlsTransport) {
        transceiver.dtlsTransport.stop();
      }
      if (transceiver.rtpSender) {
        transceiver.rtpSender.stop();
      }
      if (transceiver.rtpReceiver) {
        transceiver.rtpReceiver.stop();
      }
    });
    // FIXME: clean up tracks, local streams, remote streams, etc
    this._isClosed = true;
    this._updateSignalingState('closed');
  };

  // Update the signaling state.
  RTCPeerConnection.prototype._updateSignalingState = function(newState) {
    this.signalingState = newState;
    var event = new Event('signalingstatechange');
    this._dispatchEvent('signalingstatechange', event);
  };

  // Determine whether to fire the negotiationneeded event.
  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {
    var pc = this;
    if (this.signalingState !== 'stable' || this.needNegotiation === true) {
      return;
    }
    this.needNegotiation = true;
    window.setTimeout(function() {
      if (pc.needNegotiation) {
        pc.needNegotiation = false;
        var event = new Event('negotiationneeded');
        pc._dispatchEvent('negotiationneeded', event);
      }
    }, 0);
  };

  // Update the ice connection state.
  RTCPeerConnection.prototype._updateIceConnectionState = function() {
    var newState;
    var states = {
      'new': 0,
      closed: 0,
      checking: 0,
      connected: 0,
      completed: 0,
      disconnected: 0,
      failed: 0
    };
    this.transceivers.forEach(function(transceiver) {
      if (transceiver.iceTransport && !transceiver.rejected) {
        states[transceiver.iceTransport.state]++;
      }
    });

    newState = 'new';
    if (states.failed > 0) {
      newState = 'failed';
    } else if (states.checking > 0) {
      newState = 'checking';
    } else if (states.disconnected > 0) {
      newState = 'disconnected';
    } else if (states.new > 0) {
      newState = 'new';
    } else if (states.connected > 0) {
      newState = 'connected';
    } else if (states.completed > 0) {
      newState = 'completed';
    }

    if (newState !== this.iceConnectionState) {
      this.iceConnectionState = newState;
      var event = new Event('iceconnectionstatechange');
      this._dispatchEvent('iceconnectionstatechange', event);
    }
  };

  // Update the connection state.
  RTCPeerConnection.prototype._updateConnectionState = function() {
    var newState;
    var states = {
      'new': 0,
      closed: 0,
      connecting: 0,
      connected: 0,
      completed: 0,
      disconnected: 0,
      failed: 0
    };
    this.transceivers.forEach(function(transceiver) {
      if (transceiver.iceTransport && transceiver.dtlsTransport &&
          !transceiver.rejected) {
        states[transceiver.iceTransport.state]++;
        states[transceiver.dtlsTransport.state]++;
      }
    });
    // ICETransport.completed and connected are the same for this purpose.
    states.connected += states.completed;

    newState = 'new';
    if (states.failed > 0) {
      newState = 'failed';
    } else if (states.connecting > 0) {
      newState = 'connecting';
    } else if (states.disconnected > 0) {
      newState = 'disconnected';
    } else if (states.new > 0) {
      newState = 'new';
    } else if (states.connected > 0) {
      newState = 'connected';
    }

    if (newState !== this.connectionState) {
      this.connectionState = newState;
      var event = new Event('connectionstatechange');
      this._dispatchEvent('connectionstatechange', event);
    }
  };

  RTCPeerConnection.prototype.createOffer = function() {
    var pc = this;

    if (pc._isClosed) {
      return Promise.reject(makeError('InvalidStateError',
          'Can not call createOffer after close'));
    }

    var numAudioTracks = pc.transceivers.filter(function(t) {
      return t.kind === 'audio';
    }).length;
    var numVideoTracks = pc.transceivers.filter(function(t) {
      return t.kind === 'video';
    }).length;

    // Determine number of audio and video tracks we need to send/recv.
    var offerOptions = arguments[0];
    if (offerOptions) {
      // Reject Chrome legacy constraints.
      if (offerOptions.mandatory || offerOptions.optional) {
        throw new TypeError(
            'Legacy mandatory/optional constraints not supported.');
      }
      if (offerOptions.offerToReceiveAudio !== undefined) {
        if (offerOptions.offerToReceiveAudio === true) {
          numAudioTracks = 1;
        } else if (offerOptions.offerToReceiveAudio === false) {
          numAudioTracks = 0;
        } else {
          numAudioTracks = offerOptions.offerToReceiveAudio;
        }
      }
      if (offerOptions.offerToReceiveVideo !== undefined) {
        if (offerOptions.offerToReceiveVideo === true) {
          numVideoTracks = 1;
        } else if (offerOptions.offerToReceiveVideo === false) {
          numVideoTracks = 0;
        } else {
          numVideoTracks = offerOptions.offerToReceiveVideo;
        }
      }
    }

    pc.transceivers.forEach(function(transceiver) {
      if (transceiver.kind === 'audio') {
        numAudioTracks--;
        if (numAudioTracks < 0) {
          transceiver.wantReceive = false;
        }
      } else if (transceiver.kind === 'video') {
        numVideoTracks--;
        if (numVideoTracks < 0) {
          transceiver.wantReceive = false;
        }
      }
    });

    // Create M-lines for recvonly streams.
    while (numAudioTracks > 0 || numVideoTracks > 0) {
      if (numAudioTracks > 0) {
        pc._createTransceiver('audio');
        numAudioTracks--;
      }
      if (numVideoTracks > 0) {
        pc._createTransceiver('video');
        numVideoTracks--;
      }
    }

    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,
        pc._sdpSessionVersion++);
    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {
      // For each track, create an ice gatherer, ice transport,
      // dtls transport, potentially rtpsender and rtpreceiver.
      var track = transceiver.track;
      var kind = transceiver.kind;
      var mid = transceiver.mid || SDPUtils.generateIdentifier();
      transceiver.mid = mid;

      if (!transceiver.iceGatherer) {
        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,
            pc.usingBundle);
      }

      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);
      // filter RTX until additional stuff needed for RTX is implemented
      // in adapter.js
      if (edgeVersion < 15019) {
        localCapabilities.codecs = localCapabilities.codecs.filter(
            function(codec) {
              return codec.name !== 'rtx';
            });
      }
      localCapabilities.codecs.forEach(function(codec) {
        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552
        // by adding level-asymmetry-allowed=1
        if (codec.name === 'H264' &&
            codec.parameters['level-asymmetry-allowed'] === undefined) {
          codec.parameters['level-asymmetry-allowed'] = '1';
        }

        // for subsequent offers, we might have to re-use the payload
        // type of the last offer.
        if (transceiver.remoteCapabilities &&
            transceiver.remoteCapabilities.codecs) {
          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {
            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&
                codec.clockRate === remoteCodec.clockRate) {
              codec.preferredPayloadType = remoteCodec.payloadType;
            }
          });
        }
      });
      localCapabilities.headerExtensions.forEach(function(hdrExt) {
        var remoteExtensions = transceiver.remoteCapabilities &&
            transceiver.remoteCapabilities.headerExtensions || [];
        remoteExtensions.forEach(function(rHdrExt) {
          if (hdrExt.uri === rHdrExt.uri) {
            hdrExt.id = rHdrExt.id;
          }
        });
      });

      // generate an ssrc now, to be used later in rtpSender.send
      var sendEncodingParameters = transceiver.sendEncodingParameters || [{
        ssrc: (2 * sdpMLineIndex + 1) * 1001
      }];
      if (track) {
        // add RTX
        if (edgeVersion >= 15019 && kind === 'video' &&
            !sendEncodingParameters[0].rtx) {
          sendEncodingParameters[0].rtx = {
            ssrc: sendEncodingParameters[0].ssrc + 1
          };
        }
      }

      if (transceiver.wantReceive) {
        transceiver.rtpReceiver = new window.RTCRtpReceiver(
            transceiver.dtlsTransport, kind);
      }

      transceiver.localCapabilities = localCapabilities;
      transceiver.sendEncodingParameters = sendEncodingParameters;
    });

    // always offer BUNDLE and dispose on return if not supported.
    if (pc._config.bundlePolicy !== 'max-compat') {
      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {
        return t.mid;
      }).join(' ') + '\r\n';
    }
    sdp += 'a=ice-options:trickle\r\n';

    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {
      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,
          'offer', transceiver.stream, pc._dtlsRole);
      sdp += 'a=rtcp-rsize\r\n';

      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&
          (sdpMLineIndex === 0 || !pc.usingBundle)) {
        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {
          cand.component = 1;
          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\r\n';
        });

        if (transceiver.iceGatherer.state === 'completed') {
          sdp += 'a=end-of-candidates\r\n';
        }
      }
    });

    var desc = new window.RTCSessionDescription({
      type: 'offer',
      sdp: sdp
    });
    return Promise.resolve(desc);
  };

  RTCPeerConnection.prototype.createAnswer = function() {
    var pc = this;

    if (pc._isClosed) {
      return Promise.reject(makeError('InvalidStateError',
          'Can not call createAnswer after close'));
    }

    if (!(pc.signalingState === 'have-remote-offer' ||
        pc.signalingState === 'have-local-pranswer')) {
      return Promise.reject(makeError('InvalidStateError',
          'Can not call createAnswer in signalingState ' + pc.signalingState));
    }

    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,
        pc._sdpSessionVersion++);
    if (pc.usingBundle) {
      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {
        return t.mid;
      }).join(' ') + '\r\n';
    }
    sdp += 'a=ice-options:trickle\r\n';

    var mediaSectionsInOffer = SDPUtils.getMediaSections(
        pc._remoteDescription.sdp).length;
    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {
      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {
        return;
      }
      if (transceiver.rejected) {
        if (transceiver.kind === 'application') {
          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt
            sdp += 'm=application 0 DTLS/SCTP 5000\r\n';
          } else {
            sdp += 'm=application 0 ' + transceiver.protocol +
                ' webrtc-datachannel\r\n';
          }
        } else if (transceiver.kind === 'audio') {
          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\r\n' +
              'a=rtpmap:0 PCMU/8000\r\n';
        } else if (transceiver.kind === 'video') {
          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\r\n' +
              'a=rtpmap:120 VP8/90000\r\n';
        }
        sdp += 'c=IN IP4 0.0.0.0\r\n' +
            'a=inactive\r\n' +
            'a=mid:' + transceiver.mid + '\r\n';
        return;
      }

      // FIXME: look at direction.
      if (transceiver.stream) {
        var localTrack;
        if (transceiver.kind === 'audio') {
          localTrack = transceiver.stream.getAudioTracks()[0];
        } else if (transceiver.kind === 'video') {
          localTrack = transceiver.stream.getVideoTracks()[0];
        }
        if (localTrack) {
          // add RTX
          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&
              !transceiver.sendEncodingParameters[0].rtx) {
            transceiver.sendEncodingParameters[0].rtx = {
              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1
            };
          }
        }
      }

      // Calculate intersection of capabilities.
      var commonCapabilities = getCommonCapabilities(
          transceiver.localCapabilities,
          transceiver.remoteCapabilities);

      var hasRtx = commonCapabilities.codecs.filter(function(c) {
        return c.name.toLowerCase() === 'rtx';
      }).length;
      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {
        delete transceiver.sendEncodingParameters[0].rtx;
      }

      sdp += writeMediaSection(transceiver, commonCapabilities,
          'answer', transceiver.stream, pc._dtlsRole);
      if (transceiver.rtcpParameters &&
          transceiver.rtcpParameters.reducedSize) {
        sdp += 'a=rtcp-rsize\r\n';
      }
    });

    var desc = new window.RTCSessionDescription({
      type: 'answer',
      sdp: sdp
    });
    return Promise.resolve(desc);
  };

  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {
    var pc = this;
    var sections;
    if (candidate && !(candidate.sdpMLineIndex !== undefined ||
        candidate.sdpMid)) {
      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));
    }

    // TODO: needs to go into ops queue.
    return new Promise(function(resolve, reject) {
      if (!pc._remoteDescription) {
        return reject(makeError('InvalidStateError',
            'Can not add ICE candidate without a remote description'));
      } else if (!candidate || candidate.candidate === '') {
        for (var j = 0; j < pc.transceivers.length; j++) {
          if (pc.transceivers[j].rejected) {
            continue;
          }
          pc.transceivers[j].iceTransport.addRemoteCandidate({});
          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);
          sections[j] += 'a=end-of-candidates\r\n';
          pc._remoteDescription.sdp =
              SDPUtils.getDescription(pc._remoteDescription.sdp) +
              sections.join('');
          if (pc.usingBundle) {
            break;
          }
        }
      } else {
        var sdpMLineIndex = candidate.sdpMLineIndex;
        if (candidate.sdpMid) {
          for (var i = 0; i < pc.transceivers.length; i++) {
            if (pc.transceivers[i].mid === candidate.sdpMid) {
              sdpMLineIndex = i;
              break;
            }
          }
        }
        var transceiver = pc.transceivers[sdpMLineIndex];
        if (transceiver) {
          if (transceiver.rejected) {
            return resolve();
          }
          var cand = Object.keys(candidate.candidate).length > 0 ?
              SDPUtils.parseCandidate(candidate.candidate) : {};
          // Ignore Chrome's invalid candidates since Edge does not like them.
          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {
            return resolve();
          }
          // Ignore RTCP candidates, we assume RTCP-MUX.
          if (cand.component && cand.component !== 1) {
            return resolve();
          }
          // when using bundle, avoid adding candidates to the wrong
          // ice transport. And avoid adding candidates added in the SDP.
          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&
              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {
            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {
              return reject(makeError('OperationError',
                  'Can not add ICE candidate'));
            }
          }

          // update the remoteDescription.
          var candidateString = candidate.candidate.trim();
          if (candidateString.indexOf('a=') === 0) {
            candidateString = candidateString.substr(2);
          }
          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);
          sections[sdpMLineIndex] += 'a=' +
              (cand.type ? candidateString : 'end-of-candidates')
              + '\r\n';
          pc._remoteDescription.sdp =
              SDPUtils.getDescription(pc._remoteDescription.sdp) +
              sections.join('');
        } else {
          return reject(makeError('OperationError',
              'Can not add ICE candidate'));
        }
      }
      resolve();
    });
  };

  RTCPeerConnection.prototype.getStats = function(selector) {
    if (selector && selector instanceof window.MediaStreamTrack) {
      var senderOrReceiver = null;
      this.transceivers.forEach(function(transceiver) {
        if (transceiver.rtpSender &&
            transceiver.rtpSender.track === selector) {
          senderOrReceiver = transceiver.rtpSender;
        } else if (transceiver.rtpReceiver &&
            transceiver.rtpReceiver.track === selector) {
          senderOrReceiver = transceiver.rtpReceiver;
        }
      });
      if (!senderOrReceiver) {
        throw makeError('InvalidAccessError', 'Invalid selector.');
      }
      return senderOrReceiver.getStats();
    }

    var promises = [];
    this.transceivers.forEach(function(transceiver) {
      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',
          'dtlsTransport'].forEach(function(method) {
            if (transceiver[method]) {
              promises.push(transceiver[method].getStats());
            }
          });
    });
    return Promise.all(promises).then(function(allStats) {
      var results = new Map();
      allStats.forEach(function(stats) {
        stats.forEach(function(stat) {
          results.set(stat.id, stat);
        });
      });
      return results;
    });
  };

  // fix low-level stat names and return Map instead of object.
  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',
    'RTCIceTransport', 'RTCDtlsTransport'];
  ortcObjects.forEach(function(ortcObjectName) {
    var obj = window[ortcObjectName];
    if (obj && obj.prototype && obj.prototype.getStats) {
      var nativeGetstats = obj.prototype.getStats;
      obj.prototype.getStats = function() {
        return nativeGetstats.apply(this)
        .then(function(nativeStats) {
          var mapStats = new Map();
          Object.keys(nativeStats).forEach(function(id) {
            nativeStats[id].type = fixStatsType(nativeStats[id]);
            mapStats.set(id, nativeStats[id]);
          });
          return mapStats;
        });
      };
    }
  });

  // legacy callback shims. Should be moved to adapter.js some days.
  var methods = ['createOffer', 'createAnswer'];
  methods.forEach(function(method) {
    var nativeMethod = RTCPeerConnection.prototype[method];
    RTCPeerConnection.prototype[method] = function() {
      var args = arguments;
      if (typeof args[0] === 'function' ||
          typeof args[1] === 'function') { // legacy
        return nativeMethod.apply(this, [arguments[2]])
        .then(function(description) {
          if (typeof args[0] === 'function') {
            args[0].apply(null, [description]);
          }
        }, function(error) {
          if (typeof args[1] === 'function') {
            args[1].apply(null, [error]);
          }
        });
      }
      return nativeMethod.apply(this, arguments);
    };
  });

  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];
  methods.forEach(function(method) {
    var nativeMethod = RTCPeerConnection.prototype[method];
    RTCPeerConnection.prototype[method] = function() {
      var args = arguments;
      if (typeof args[1] === 'function' ||
          typeof args[2] === 'function') { // legacy
        return nativeMethod.apply(this, arguments)
        .then(function() {
          if (typeof args[1] === 'function') {
            args[1].apply(null);
          }
        }, function(error) {
          if (typeof args[2] === 'function') {
            args[2].apply(null, [error]);
          }
        });
      }
      return nativeMethod.apply(this, arguments);
    };
  });

  // getStats is special. It doesn't have a spec legacy method yet we support
  // getStats(something, cb) without error callbacks.
  ['getStats'].forEach(function(method) {
    var nativeMethod = RTCPeerConnection.prototype[method];
    RTCPeerConnection.prototype[method] = function() {
      var args = arguments;
      if (typeof args[1] === 'function') {
        return nativeMethod.apply(this, arguments)
        .then(function() {
          if (typeof args[1] === 'function') {
            args[1].apply(null);
          }
        });
      }
      return nativeMethod.apply(this, arguments);
    };
  });

  return RTCPeerConnection;
};


/***/ }),

/***/ "./node_modules/screenfull/dist/screenfull.js":
/*!****************************************************!*\
  !*** ./node_modules/screenfull/dist/screenfull.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/
(function () {
	'use strict';

	var document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};
	var isCommonjs =  true && module.exports;

	var fn = (function () {
		var val;

		var fnMap = [
			[
				'requestFullscreen',
				'exitFullscreen',
				'fullscreenElement',
				'fullscreenEnabled',
				'fullscreenchange',
				'fullscreenerror'
			],
			// New WebKit
			[
				'webkitRequestFullscreen',
				'webkitExitFullscreen',
				'webkitFullscreenElement',
				'webkitFullscreenEnabled',
				'webkitfullscreenchange',
				'webkitfullscreenerror'

			],
			// Old WebKit
			[
				'webkitRequestFullScreen',
				'webkitCancelFullScreen',
				'webkitCurrentFullScreenElement',
				'webkitCancelFullScreen',
				'webkitfullscreenchange',
				'webkitfullscreenerror'

			],
			[
				'mozRequestFullScreen',
				'mozCancelFullScreen',
				'mozFullScreenElement',
				'mozFullScreenEnabled',
				'mozfullscreenchange',
				'mozfullscreenerror'
			],
			[
				'msRequestFullscreen',
				'msExitFullscreen',
				'msFullscreenElement',
				'msFullscreenEnabled',
				'MSFullscreenChange',
				'MSFullscreenError'
			]
		];

		var i = 0;
		var l = fnMap.length;
		var ret = {};

		for (; i < l; i++) {
			val = fnMap[i];
			if (val && val[1] in document) {
				for (i = 0; i < val.length; i++) {
					ret[fnMap[0][i]] = val[i];
				}
				return ret;
			}
		}

		return false;
	})();

	var eventNameMap = {
		change: fn.fullscreenchange,
		error: fn.fullscreenerror
	};

	var screenfull = {
		request: function (element, options) {
			return new Promise(function (resolve, reject) {
				var onFullScreenEntered = function () {
					this.off('change', onFullScreenEntered);
					resolve();
				}.bind(this);

				this.on('change', onFullScreenEntered);

				element = element || document.documentElement;

				var returnPromise = element[fn.requestFullscreen](options);

				if (returnPromise instanceof Promise) {
					returnPromise.then(onFullScreenEntered).catch(reject);
				}
			}.bind(this));
		},
		exit: function () {
			return new Promise(function (resolve, reject) {
				if (!this.isFullscreen) {
					resolve();
					return;
				}

				var onFullScreenExit = function () {
					this.off('change', onFullScreenExit);
					resolve();
				}.bind(this);

				this.on('change', onFullScreenExit);

				var returnPromise = document[fn.exitFullscreen]();

				if (returnPromise instanceof Promise) {
					returnPromise.then(onFullScreenExit).catch(reject);
				}
			}.bind(this));
		},
		toggle: function (element, options) {
			return this.isFullscreen ? this.exit() : this.request(element, options);
		},
		onchange: function (callback) {
			this.on('change', callback);
		},
		onerror: function (callback) {
			this.on('error', callback);
		},
		on: function (event, callback) {
			var eventName = eventNameMap[event];
			if (eventName) {
				document.addEventListener(eventName, callback, false);
			}
		},
		off: function (event, callback) {
			var eventName = eventNameMap[event];
			if (eventName) {
				document.removeEventListener(eventName, callback, false);
			}
		},
		raw: fn
	};

	if (!fn) {
		if (isCommonjs) {
			module.exports = {isEnabled: false};
		} else {
			window.screenfull = {isEnabled: false};
		}

		return;
	}

	Object.defineProperties(screenfull, {
		isFullscreen: {
			get: function () {
				return Boolean(document[fn.fullscreenElement]);
			}
		},
		element: {
			enumerable: true,
			get: function () {
				return document[fn.fullscreenElement];
			}
		},
		isEnabled: {
			enumerable: true,
			get: function () {
				// Coerce to boolean in case of old WebKit
				return Boolean(document[fn.fullscreenEnabled]);
			}
		}
	});

	if (isCommonjs) {
		module.exports = screenfull;
	} else {
		window.screenfull = screenfull;
	}
})();


/***/ }),

/***/ "./node_modules/sdp/sdp.js":
/*!*********************************!*\
  !*** ./node_modules/sdp/sdp.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* eslint-env node */


// SDP helpers.
var SDPUtils = {};

// Generate an alphanumeric identifier for cname or mids.
// TODO: use UUIDs instead? https://gist.github.com/jed/982883
SDPUtils.generateIdentifier = function() {
  return Math.random().toString(36).substr(2, 10);
};

// The RTCP CNAME used by all peerconnections from the same JS.
SDPUtils.localCName = SDPUtils.generateIdentifier();

// Splits SDP into lines, dealing with both CRLF and LF.
SDPUtils.splitLines = function(blob) {
  return blob.trim().split('\n').map(function(line) {
    return line.trim();
  });
};
// Splits SDP into sessionpart and mediasections. Ensures CRLF.
SDPUtils.splitSections = function(blob) {
  var parts = blob.split('\nm=');
  return parts.map(function(part, index) {
    return (index > 0 ? 'm=' + part : part).trim() + '\r\n';
  });
};

// returns the session description.
SDPUtils.getDescription = function(blob) {
  var sections = SDPUtils.splitSections(blob);
  return sections && sections[0];
};

// returns the individual media sections.
SDPUtils.getMediaSections = function(blob) {
  var sections = SDPUtils.splitSections(blob);
  sections.shift();
  return sections;
};

// Returns lines that start with a certain prefix.
SDPUtils.matchPrefix = function(blob, prefix) {
  return SDPUtils.splitLines(blob).filter(function(line) {
    return line.indexOf(prefix) === 0;
  });
};

// Parses an ICE candidate line. Sample input:
// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8
// rport 55996"
SDPUtils.parseCandidate = function(line) {
  var parts;
  // Parse both variants.
  if (line.indexOf('a=candidate:') === 0) {
    parts = line.substring(12).split(' ');
  } else {
    parts = line.substring(10).split(' ');
  }

  var candidate = {
    foundation: parts[0],
    component: parseInt(parts[1], 10),
    protocol: parts[2].toLowerCase(),
    priority: parseInt(parts[3], 10),
    ip: parts[4],
    address: parts[4], // address is an alias for ip.
    port: parseInt(parts[5], 10),
    // skip parts[6] == 'typ'
    type: parts[7]
  };

  for (var i = 8; i < parts.length; i += 2) {
    switch (parts[i]) {
      case 'raddr':
        candidate.relatedAddress = parts[i + 1];
        break;
      case 'rport':
        candidate.relatedPort = parseInt(parts[i + 1], 10);
        break;
      case 'tcptype':
        candidate.tcpType = parts[i + 1];
        break;
      case 'ufrag':
        candidate.ufrag = parts[i + 1]; // for backward compability.
        candidate.usernameFragment = parts[i + 1];
        break;
      default: // extension handling, in particular ufrag
        candidate[parts[i]] = parts[i + 1];
        break;
    }
  }
  return candidate;
};

// Translates a candidate object into SDP candidate attribute.
SDPUtils.writeCandidate = function(candidate) {
  var sdp = [];
  sdp.push(candidate.foundation);
  sdp.push(candidate.component);
  sdp.push(candidate.protocol.toUpperCase());
  sdp.push(candidate.priority);
  sdp.push(candidate.address || candidate.ip);
  sdp.push(candidate.port);

  var type = candidate.type;
  sdp.push('typ');
  sdp.push(type);
  if (type !== 'host' && candidate.relatedAddress &&
      candidate.relatedPort) {
    sdp.push('raddr');
    sdp.push(candidate.relatedAddress);
    sdp.push('rport');
    sdp.push(candidate.relatedPort);
  }
  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {
    sdp.push('tcptype');
    sdp.push(candidate.tcpType);
  }
  if (candidate.usernameFragment || candidate.ufrag) {
    sdp.push('ufrag');
    sdp.push(candidate.usernameFragment || candidate.ufrag);
  }
  return 'candidate:' + sdp.join(' ');
};

// Parses an ice-options line, returns an array of option tags.
// a=ice-options:foo bar
SDPUtils.parseIceOptions = function(line) {
  return line.substr(14).split(' ');
};

// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:
// a=rtpmap:111 opus/48000/2
SDPUtils.parseRtpMap = function(line) {
  var parts = line.substr(9).split(' ');
  var parsed = {
    payloadType: parseInt(parts.shift(), 10) // was: id
  };

  parts = parts[0].split('/');

  parsed.name = parts[0];
  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate
  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;
  // legacy alias, got renamed back to channels in ORTC.
  parsed.numChannels = parsed.channels;
  return parsed;
};

// Generate an a=rtpmap line from RTCRtpCodecCapability or
// RTCRtpCodecParameters.
SDPUtils.writeRtpMap = function(codec) {
  var pt = codec.payloadType;
  if (codec.preferredPayloadType !== undefined) {
    pt = codec.preferredPayloadType;
  }
  var channels = codec.channels || codec.numChannels || 1;
  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +
      (channels !== 1 ? '/' + channels : '') + '\r\n';
};

// Parses an a=extmap line (headerextension from RFC 5285). Sample input:
// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset
// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset
SDPUtils.parseExtmap = function(line) {
  var parts = line.substr(9).split(' ');
  return {
    id: parseInt(parts[0], 10),
    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',
    uri: parts[1]
  };
};

// Generates a=extmap line from RTCRtpHeaderExtensionParameters or
// RTCRtpHeaderExtension.
SDPUtils.writeExtmap = function(headerExtension) {
  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +
      (headerExtension.direction && headerExtension.direction !== 'sendrecv'
        ? '/' + headerExtension.direction
        : '') +
      ' ' + headerExtension.uri + '\r\n';
};

// Parses an ftmp line, returns dictionary. Sample input:
// a=fmtp:96 vbr=on;cng=on
// Also deals with vbr=on; cng=on
SDPUtils.parseFmtp = function(line) {
  var parsed = {};
  var kv;
  var parts = line.substr(line.indexOf(' ') + 1).split(';');
  for (var j = 0; j < parts.length; j++) {
    kv = parts[j].trim().split('=');
    parsed[kv[0].trim()] = kv[1];
  }
  return parsed;
};

// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.
SDPUtils.writeFmtp = function(codec) {
  var line = '';
  var pt = codec.payloadType;
  if (codec.preferredPayloadType !== undefined) {
    pt = codec.preferredPayloadType;
  }
  if (codec.parameters && Object.keys(codec.parameters).length) {
    var params = [];
    Object.keys(codec.parameters).forEach(function(param) {
      if (codec.parameters[param]) {
        params.push(param + '=' + codec.parameters[param]);
      } else {
        params.push(param);
      }
    });
    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\r\n';
  }
  return line;
};

// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:
// a=rtcp-fb:98 nack rpsi
SDPUtils.parseRtcpFb = function(line) {
  var parts = line.substr(line.indexOf(' ') + 1).split(' ');
  return {
    type: parts.shift(),
    parameter: parts.join(' ')
  };
};
// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.
SDPUtils.writeRtcpFb = function(codec) {
  var lines = '';
  var pt = codec.payloadType;
  if (codec.preferredPayloadType !== undefined) {
    pt = codec.preferredPayloadType;
  }
  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {
    // FIXME: special handling for trr-int?
    codec.rtcpFeedback.forEach(function(fb) {
      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +
      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +
          '\r\n';
    });
  }
  return lines;
};

// Parses an RFC 5576 ssrc media attribute. Sample input:
// a=ssrc:3735928559 cname:something
SDPUtils.parseSsrcMedia = function(line) {
  var sp = line.indexOf(' ');
  var parts = {
    ssrc: parseInt(line.substr(7, sp - 7), 10)
  };
  var colon = line.indexOf(':', sp);
  if (colon > -1) {
    parts.attribute = line.substr(sp + 1, colon - sp - 1);
    parts.value = line.substr(colon + 1);
  } else {
    parts.attribute = line.substr(sp + 1);
  }
  return parts;
};

SDPUtils.parseSsrcGroup = function(line) {
  var parts = line.substr(13).split(' ');
  return {
    semantics: parts.shift(),
    ssrcs: parts.map(function(ssrc) {
      return parseInt(ssrc, 10);
    })
  };
};

// Extracts the MID (RFC 5888) from a media section.
// returns the MID or undefined if no mid line was found.
SDPUtils.getMid = function(mediaSection) {
  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];
  if (mid) {
    return mid.substr(6);
  }
};

SDPUtils.parseFingerprint = function(line) {
  var parts = line.substr(14).split(' ');
  return {
    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.
    value: parts[1]
  };
};

// Extracts DTLS parameters from SDP media section or sessionpart.
// FIXME: for consistency with other functions this should only
//   get the fingerprint line as input. See also getIceParameters.
SDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {
  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=fingerprint:');
  // Note: a=setup line is ignored since we use the 'auto' role.
  // Note2: 'algorithm' is not case sensitive except in Edge.
  return {
    role: 'auto',
    fingerprints: lines.map(SDPUtils.parseFingerprint)
  };
};

// Serializes DTLS parameters to SDP.
SDPUtils.writeDtlsParameters = function(params, setupType) {
  var sdp = 'a=setup:' + setupType + '\r\n';
  params.fingerprints.forEach(function(fp) {
    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\r\n';
  });
  return sdp;
};

// Parses a=crypto lines into
//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members
SDPUtils.parseCryptoLine = function(line) {
  var parts = line.substr(9).split(' ');
  return {
    tag: parseInt(parts[0], 10),
    cryptoSuite: parts[1],
    keyParams: parts[2],
    sessionParams: parts.slice(3),
  };
};

SDPUtils.writeCryptoLine = function(parameters) {
  return 'a=crypto:' + parameters.tag + ' ' +
    parameters.cryptoSuite + ' ' +
    (typeof parameters.keyParams === 'object'
      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)
      : parameters.keyParams) +
    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +
    '\r\n';
};

// Parses the crypto key parameters into
//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*
SDPUtils.parseCryptoKeyParams = function(keyParams) {
  if (keyParams.indexOf('inline:') !== 0) {
    return null;
  }
  var parts = keyParams.substr(7).split('|');
  return {
    keyMethod: 'inline',
    keySalt: parts[0],
    lifeTime: parts[1],
    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,
    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,
  };
};

SDPUtils.writeCryptoKeyParams = function(keyParams) {
  return keyParams.keyMethod + ':'
    + keyParams.keySalt +
    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +
    (keyParams.mkiValue && keyParams.mkiLength
      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength
      : '');
};

// Extracts all SDES paramters.
SDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {
  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=crypto:');
  return lines.map(SDPUtils.parseCryptoLine);
};

// Parses ICE information from SDP media section or sessionpart.
// FIXME: for consistency with other functions this should only
//   get the ice-ufrag and ice-pwd lines as input.
SDPUtils.getIceParameters = function(mediaSection, sessionpart) {
  var ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=ice-ufrag:')[0];
  var pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=ice-pwd:')[0];
  if (!(ufrag && pwd)) {
    return null;
  }
  return {
    usernameFragment: ufrag.substr(12),
    password: pwd.substr(10),
  };
};

// Serializes ICE parameters to SDP.
SDPUtils.writeIceParameters = function(params) {
  return 'a=ice-ufrag:' + params.usernameFragment + '\r\n' +
      'a=ice-pwd:' + params.password + '\r\n';
};

// Parses the SDP media section and returns RTCRtpParameters.
SDPUtils.parseRtpParameters = function(mediaSection) {
  var description = {
    codecs: [],
    headerExtensions: [],
    fecMechanisms: [],
    rtcp: []
  };
  var lines = SDPUtils.splitLines(mediaSection);
  var mline = lines[0].split(' ');
  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]
    var pt = mline[i];
    var rtpmapline = SDPUtils.matchPrefix(
      mediaSection, 'a=rtpmap:' + pt + ' ')[0];
    if (rtpmapline) {
      var codec = SDPUtils.parseRtpMap(rtpmapline);
      var fmtps = SDPUtils.matchPrefix(
        mediaSection, 'a=fmtp:' + pt + ' ');
      // Only the first a=fmtp:<pt> is considered.
      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};
      codec.rtcpFeedback = SDPUtils.matchPrefix(
        mediaSection, 'a=rtcp-fb:' + pt + ' ')
        .map(SDPUtils.parseRtcpFb);
      description.codecs.push(codec);
      // parse FEC mechanisms from rtpmap lines.
      switch (codec.name.toUpperCase()) {
        case 'RED':
        case 'ULPFEC':
          description.fecMechanisms.push(codec.name.toUpperCase());
          break;
        default: // only RED and ULPFEC are recognized as FEC mechanisms.
          break;
      }
    }
  }
  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {
    description.headerExtensions.push(SDPUtils.parseExtmap(line));
  });
  // FIXME: parse rtcp.
  return description;
};

// Generates parts of the SDP media section describing the capabilities /
// parameters.
SDPUtils.writeRtpDescription = function(kind, caps) {
  var sdp = '';

  // Build the mline.
  sdp += 'm=' + kind + ' ';
  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.
  sdp += ' UDP/TLS/RTP/SAVPF ';
  sdp += caps.codecs.map(function(codec) {
    if (codec.preferredPayloadType !== undefined) {
      return codec.preferredPayloadType;
    }
    return codec.payloadType;
  }).join(' ') + '\r\n';

  sdp += 'c=IN IP4 0.0.0.0\r\n';
  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\r\n';

  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.
  caps.codecs.forEach(function(codec) {
    sdp += SDPUtils.writeRtpMap(codec);
    sdp += SDPUtils.writeFmtp(codec);
    sdp += SDPUtils.writeRtcpFb(codec);
  });
  var maxptime = 0;
  caps.codecs.forEach(function(codec) {
    if (codec.maxptime > maxptime) {
      maxptime = codec.maxptime;
    }
  });
  if (maxptime > 0) {
    sdp += 'a=maxptime:' + maxptime + '\r\n';
  }
  sdp += 'a=rtcp-mux\r\n';

  if (caps.headerExtensions) {
    caps.headerExtensions.forEach(function(extension) {
      sdp += SDPUtils.writeExtmap(extension);
    });
  }
  // FIXME: write fecMechanisms.
  return sdp;
};

// Parses the SDP media section and returns an array of
// RTCRtpEncodingParameters.
SDPUtils.parseRtpEncodingParameters = function(mediaSection) {
  var encodingParameters = [];
  var description = SDPUtils.parseRtpParameters(mediaSection);
  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;
  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;

  // filter a=ssrc:... cname:, ignore PlanB-msid
  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')
    .map(function(line) {
      return SDPUtils.parseSsrcMedia(line);
    })
    .filter(function(parts) {
      return parts.attribute === 'cname';
    });
  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;
  var secondarySsrc;

  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')
    .map(function(line) {
      var parts = line.substr(17).split(' ');
      return parts.map(function(part) {
        return parseInt(part, 10);
      });
    });
  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {
    secondarySsrc = flows[0][1];
  }

  description.codecs.forEach(function(codec) {
    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {
      var encParam = {
        ssrc: primarySsrc,
        codecPayloadType: parseInt(codec.parameters.apt, 10)
      };
      if (primarySsrc && secondarySsrc) {
        encParam.rtx = {ssrc: secondarySsrc};
      }
      encodingParameters.push(encParam);
      if (hasRed) {
        encParam = JSON.parse(JSON.stringify(encParam));
        encParam.fec = {
          ssrc: primarySsrc,
          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'
        };
        encodingParameters.push(encParam);
      }
    }
  });
  if (encodingParameters.length === 0 && primarySsrc) {
    encodingParameters.push({
      ssrc: primarySsrc
    });
  }

  // we support both b=AS and b=TIAS but interpret AS as TIAS.
  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');
  if (bandwidth.length) {
    if (bandwidth[0].indexOf('b=TIAS:') === 0) {
      bandwidth = parseInt(bandwidth[0].substr(7), 10);
    } else if (bandwidth[0].indexOf('b=AS:') === 0) {
      // use formula from JSEP to convert b=AS to TIAS value.
      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95
          - (50 * 40 * 8);
    } else {
      bandwidth = undefined;
    }
    encodingParameters.forEach(function(params) {
      params.maxBitrate = bandwidth;
    });
  }
  return encodingParameters;
};

// parses http://draft.ortc.org/#rtcrtcpparameters*
SDPUtils.parseRtcpParameters = function(mediaSection) {
  var rtcpParameters = {};

  // Gets the first SSRC. Note tha with RTX there might be multiple
  // SSRCs.
  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')
    .map(function(line) {
      return SDPUtils.parseSsrcMedia(line);
    })
    .filter(function(obj) {
      return obj.attribute === 'cname';
    })[0];
  if (remoteSsrc) {
    rtcpParameters.cname = remoteSsrc.value;
    rtcpParameters.ssrc = remoteSsrc.ssrc;
  }

  // Edge uses the compound attribute instead of reducedSize
  // compound is !reducedSize
  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');
  rtcpParameters.reducedSize = rsize.length > 0;
  rtcpParameters.compound = rsize.length === 0;

  // parses the rtcp-mux attrіbute.
  // Note that Edge does not support unmuxed RTCP.
  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');
  rtcpParameters.mux = mux.length > 0;

  return rtcpParameters;
};

// parses either a=msid: or a=ssrc:... msid lines and returns
// the id of the MediaStream and MediaStreamTrack.
SDPUtils.parseMsid = function(mediaSection) {
  var parts;
  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');
  if (spec.length === 1) {
    parts = spec[0].substr(7).split(' ');
    return {stream: parts[0], track: parts[1]};
  }
  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')
    .map(function(line) {
      return SDPUtils.parseSsrcMedia(line);
    })
    .filter(function(msidParts) {
      return msidParts.attribute === 'msid';
    });
  if (planB.length > 0) {
    parts = planB[0].value.split(' ');
    return {stream: parts[0], track: parts[1]};
  }
};

// SCTP
// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back
// to draft-ietf-mmusic-sctp-sdp-05
SDPUtils.parseSctpDescription = function(mediaSection) {
  var mline = SDPUtils.parseMLine(mediaSection);
  var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');
  var maxMessageSize;
  if (maxSizeLine.length > 0) {
    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);
  }
  if (isNaN(maxMessageSize)) {
    maxMessageSize = 65536;
  }
  var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');
  if (sctpPort.length > 0) {
    return {
      port: parseInt(sctpPort[0].substr(12), 10),
      protocol: mline.fmt,
      maxMessageSize: maxMessageSize
    };
  }
  var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');
  if (sctpMapLines.length > 0) {
    var parts = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:')[0]
      .substr(10)
      .split(' ');
    return {
      port: parseInt(parts[0], 10),
      protocol: parts[1],
      maxMessageSize: maxMessageSize
    };
  }
};

// SCTP
// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers
// support by now receiving in this format, unless we originally parsed
// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line
// protocol of DTLS/SCTP -- without UDP/ or TCP/)
SDPUtils.writeSctpDescription = function(media, sctp) {
  var output = [];
  if (media.protocol !== 'DTLS/SCTP') {
    output = [
      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\r\n',
      'c=IN IP4 0.0.0.0\r\n',
      'a=sctp-port:' + sctp.port + '\r\n'
    ];
  } else {
    output = [
      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\r\n',
      'c=IN IP4 0.0.0.0\r\n',
      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\r\n'
    ];
  }
  if (sctp.maxMessageSize !== undefined) {
    output.push('a=max-message-size:' + sctp.maxMessageSize + '\r\n');
  }
  return output.join('');
};

// Generate a session ID for SDP.
// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1
// recommends using a cryptographically random +ve 64-bit value
// but right now this should be acceptable and within the right range
SDPUtils.generateSessionId = function() {
  return Math.random().toString().substr(2, 21);
};

// Write boilder plate for start of SDP
// sessId argument is optional - if not supplied it will
// be generated randomly
// sessVersion is optional and defaults to 2
// sessUser is optional and defaults to 'thisisadapterortc'
SDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {
  var sessionId;
  var version = sessVer !== undefined ? sessVer : 2;
  if (sessId) {
    sessionId = sessId;
  } else {
    sessionId = SDPUtils.generateSessionId();
  }
  var user = sessUser || 'thisisadapterortc';
  // FIXME: sess-id should be an NTP timestamp.
  return 'v=0\r\n' +
      'o=' + user + ' ' + sessionId + ' ' + version +
        ' IN IP4 127.0.0.1\r\n' +
      's=-\r\n' +
      't=0 0\r\n';
};

SDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {
  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);

  // Map ICE parameters (ufrag, pwd) to SDP.
  sdp += SDPUtils.writeIceParameters(
    transceiver.iceGatherer.getLocalParameters());

  // Map DTLS parameters to SDP.
  sdp += SDPUtils.writeDtlsParameters(
    transceiver.dtlsTransport.getLocalParameters(),
    type === 'offer' ? 'actpass' : 'active');

  sdp += 'a=mid:' + transceiver.mid + '\r\n';

  if (transceiver.direction) {
    sdp += 'a=' + transceiver.direction + '\r\n';
  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {
    sdp += 'a=sendrecv\r\n';
  } else if (transceiver.rtpSender) {
    sdp += 'a=sendonly\r\n';
  } else if (transceiver.rtpReceiver) {
    sdp += 'a=recvonly\r\n';
  } else {
    sdp += 'a=inactive\r\n';
  }

  if (transceiver.rtpSender) {
    // spec.
    var msid = 'msid:' + stream.id + ' ' +
        transceiver.rtpSender.track.id + '\r\n';
    sdp += 'a=' + msid;

    // for Chrome.
    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +
        ' ' + msid;
    if (transceiver.sendEncodingParameters[0].rtx) {
      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +
          ' ' + msid;
      sdp += 'a=ssrc-group:FID ' +
          transceiver.sendEncodingParameters[0].ssrc + ' ' +
          transceiver.sendEncodingParameters[0].rtx.ssrc +
          '\r\n';
    }
  }
  // FIXME: this should be written by writeRtpDescription.
  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +
      ' cname:' + SDPUtils.localCName + '\r\n';
  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {
    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +
        ' cname:' + SDPUtils.localCName + '\r\n';
  }
  return sdp;
};

// Gets the direction from the mediaSection or the sessionpart.
SDPUtils.getDirection = function(mediaSection, sessionpart) {
  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.
  var lines = SDPUtils.splitLines(mediaSection);
  for (var i = 0; i < lines.length; i++) {
    switch (lines[i]) {
      case 'a=sendrecv':
      case 'a=sendonly':
      case 'a=recvonly':
      case 'a=inactive':
        return lines[i].substr(2);
      default:
        // FIXME: What should happen here?
    }
  }
  if (sessionpart) {
    return SDPUtils.getDirection(sessionpart);
  }
  return 'sendrecv';
};

SDPUtils.getKind = function(mediaSection) {
  var lines = SDPUtils.splitLines(mediaSection);
  var mline = lines[0].split(' ');
  return mline[0].substr(2);
};

SDPUtils.isRejected = function(mediaSection) {
  return mediaSection.split(' ', 2)[1] === '0';
};

SDPUtils.parseMLine = function(mediaSection) {
  var lines = SDPUtils.splitLines(mediaSection);
  var parts = lines[0].substr(2).split(' ');
  return {
    kind: parts[0],
    port: parseInt(parts[1], 10),
    protocol: parts[2],
    fmt: parts.slice(3).join(' ')
  };
};

SDPUtils.parseOLine = function(mediaSection) {
  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];
  var parts = line.substr(2).split(' ');
  return {
    username: parts[0],
    sessionId: parts[1],
    sessionVersion: parseInt(parts[2], 10),
    netType: parts[3],
    addressType: parts[4],
    address: parts[5]
  };
};

// a very naive interpretation of a valid SDP.
SDPUtils.isValidSDP = function(blob) {
  if (typeof blob !== 'string' || blob.length === 0) {
    return false;
  }
  var lines = SDPUtils.splitLines(blob);
  for (var i = 0; i < lines.length; i++) {
    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {
      return false;
    }
    // TODO: check the modifier a bit more.
  }
  return true;
};

// Expose public methods.
if (true) {
  module.exports = SDPUtils;
}


/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

var stylesInDom = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDom.length; i++) {
    if (stylesInDom[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var index = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3]
    };

    if (index !== -1) {
      stylesInDom[index].references++;
      stylesInDom[index].updater(obj);
    } else {
      stylesInDom.push({
        identifier: identifier,
        updater: addStyle(obj, options),
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function insertStyleElement(options) {
  var style = document.createElement('style');
  var attributes = options.attributes || {};

  if (typeof attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : undefined;

    if (nonce) {
      attributes.nonce = nonce;
    }
  }

  Object.keys(attributes).forEach(function (key) {
    style.setAttribute(key, attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  } else {
    style.removeAttribute('media');
  }

  if (sourceMap && typeof btoa !== 'undefined') {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDom[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDom[_index].references === 0) {
        stylesInDom[_index].updater();

        stylesInDom.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./node_modules/ua-parser-js/src/ua-parser.js":
/*!****************************************************!*\
  !*** ./node_modules/ua-parser-js/src/ua-parser.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/////////////////////////////////////////////////////////////////////////////////
/* UAParser.js v0.7.31
   Copyright © 2012-2021 Faisal Salman <f@faisalman.com>
   MIT License *//*
   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.
   Supports browser & node.js environment. 
   Demo   : https://faisalman.github.io/ua-parser-js
   Source : https://github.com/faisalman/ua-parser-js */
/////////////////////////////////////////////////////////////////////////////////

(function (window, undefined) {

    'use strict';

    //////////////
    // Constants
    /////////////


    var LIBVERSION  = '0.7.31',
        EMPTY       = '',
        UNKNOWN     = '?',
        FUNC_TYPE   = 'function',
        UNDEF_TYPE  = 'undefined',
        OBJ_TYPE    = 'object',
        STR_TYPE    = 'string',
        MAJOR       = 'major',
        MODEL       = 'model',
        NAME        = 'name',
        TYPE        = 'type',
        VENDOR      = 'vendor',
        VERSION     = 'version',
        ARCHITECTURE= 'architecture',
        CONSOLE     = 'console',
        MOBILE      = 'mobile',
        TABLET      = 'tablet',
        SMARTTV     = 'smarttv',
        WEARABLE    = 'wearable',
        EMBEDDED    = 'embedded',
        UA_MAX_LENGTH = 255;

    var AMAZON  = 'Amazon',
        APPLE   = 'Apple',
        ASUS    = 'ASUS',
        BLACKBERRY = 'BlackBerry',
        BROWSER = 'Browser',
        CHROME  = 'Chrome',
        EDGE    = 'Edge',
        FIREFOX = 'Firefox',
        GOOGLE  = 'Google',
        HUAWEI  = 'Huawei',
        LG      = 'LG',
        MICROSOFT = 'Microsoft',
        MOTOROLA  = 'Motorola',
        OPERA   = 'Opera',
        SAMSUNG = 'Samsung',
        SONY    = 'Sony',
        XIAOMI  = 'Xiaomi',
        ZEBRA   = 'Zebra',
        FACEBOOK   = 'Facebook';

    ///////////
    // Helper
    //////////

    var extend = function (regexes, extensions) {
            var mergedRegexes = {};
            for (var i in regexes) {
                if (extensions[i] && extensions[i].length % 2 === 0) {
                    mergedRegexes[i] = extensions[i].concat(regexes[i]);
                } else {
                    mergedRegexes[i] = regexes[i];
                }
            }
            return mergedRegexes;
        },
        enumerize = function (arr) {
            var enums = {};
            for (var i=0; i<arr.length; i++) {
                enums[arr[i].toUpperCase()] = arr[i];
            }
            return enums;
        },
        has = function (str1, str2) {
            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;
        },
        lowerize = function (str) {
            return str.toLowerCase();
        },
        majorize = function (version) {
            return typeof(version) === STR_TYPE ? version.replace(/[^\d\.]/g, EMPTY).split('.')[0] : undefined;
        },
        trim = function (str, len) {
            if (typeof(str) === STR_TYPE) {
                str = str.replace(/^\s\s*/, EMPTY).replace(/\s\s*$/, EMPTY);
                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);
            }
    };

    ///////////////
    // Map helper
    //////////////

    var rgxMapper = function (ua, arrays) {

            var i = 0, j, k, p, q, matches, match;

            // loop through all regexes maps
            while (i < arrays.length && !matches) {

                var regex = arrays[i],       // even sequence (0,2,4,..)
                    props = arrays[i + 1];   // odd sequence (1,3,5,..)
                j = k = 0;

                // try matching uastring with regexes
                while (j < regex.length && !matches) {

                    matches = regex[j++].exec(ua);

                    if (!!matches) {
                        for (p = 0; p < props.length; p++) {
                            match = matches[++k];
                            q = props[p];
                            // check if given property is actually array
                            if (typeof q === OBJ_TYPE && q.length > 0) {
                                if (q.length === 2) {
                                    if (typeof q[1] == FUNC_TYPE) {
                                        // assign modified match
                                        this[q[0]] = q[1].call(this, match);
                                    } else {
                                        // assign given value, ignore regex match
                                        this[q[0]] = q[1];
                                    }
                                } else if (q.length === 3) {
                                    // check whether function or regex
                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {
                                        // call function (usually string mapper)
                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;
                                    } else {
                                        // sanitize match using given regex
                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;
                                    }
                                } else if (q.length === 4) {
                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;
                                }
                            } else {
                                this[q] = match ? match : undefined;
                            }
                        }
                    }
                }
                i += 2;
            }
        },

        strMapper = function (str, map) {

            for (var i in map) {
                // check if current value is array
                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {
                    for (var j = 0; j < map[i].length; j++) {
                        if (has(map[i][j], str)) {
                            return (i === UNKNOWN) ? undefined : i;
                        }
                    }
                } else if (has(map[i], str)) {
                    return (i === UNKNOWN) ? undefined : i;
                }
            }
            return str;
    };

    ///////////////
    // String map
    //////////////

    // Safari < 3.0
    var oldSafariMap = {
            '1.0'   : '/8',
            '1.2'   : '/1',
            '1.3'   : '/3',
            '2.0'   : '/412',
            '2.0.2' : '/416',
            '2.0.3' : '/417',
            '2.0.4' : '/419',
            '?'     : '/'
        },
        windowsVersionMap = {
            'ME'        : '4.90',
            'NT 3.11'   : 'NT3.51',
            'NT 4.0'    : 'NT4.0',
            '2000'      : 'NT 5.0',
            'XP'        : ['NT 5.1', 'NT 5.2'],
            'Vista'     : 'NT 6.0',
            '7'         : 'NT 6.1',
            '8'         : 'NT 6.2',
            '8.1'       : 'NT 6.3',
            '10'        : ['NT 6.4', 'NT 10.0'],
            'RT'        : 'ARM'
    };

    //////////////
    // Regex map
    /////////////

    var regexes = {

        browser : [[

            /\b(?:crmo|crios)\/([\w\.]+)/i                                      // Chrome for Android/iOS
            ], [VERSION, [NAME, 'Chrome']], [
            /edg(?:e|ios|a)?\/([\w\.]+)/i                                       // Microsoft Edge
            ], [VERSION, [NAME, 'Edge']], [

            // Presto based
            /(opera mini)\/([-\w\.]+)/i,                                        // Opera Mini
            /(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,                 // Opera Mobi/Tablet
            /(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i                           // Opera
            ], [NAME, VERSION], [
            /opios[\/ ]+([\w\.]+)/i                                             // Opera mini on iphone >= 8.0
            ], [VERSION, [NAME, OPERA+' Mini']], [
            /\bopr\/([\w\.]+)/i                                                 // Opera Webkit
            ], [VERSION, [NAME, OPERA]], [

            // Mixed
            /(kindle)\/([\w\.]+)/i,                                             // Kindle
            /(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,      // Lunascape/Maxthon/Netfront/Jasmine/Blazer
            // Trident based
            /(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,               // Avant/IEMobile/SlimBrowser
            /(ba?idubrowser)[\/ ]?([\w\.]+)/i,                                  // Baidu Browser
            /(?:ms|\()(ie) ([\w\.]+)/i,                                         // Internet Explorer

            // Webkit/KHTML based                                               // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon
            /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,
                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ, aka ShouQ
            /(weibo)__([\d\.]+)/i                                               // Weibo
            ], [NAME, VERSION], [
            /(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i                 // UCBrowser
            ], [VERSION, [NAME, 'UC'+BROWSER]], [
            /\bqbcore\/([\w\.]+)/i                                              // WeChat Desktop for Windows Built-in Browser
            ], [VERSION, [NAME, 'WeChat(Win) Desktop']], [
            /micromessenger\/([\w\.]+)/i                                        // WeChat
            ], [VERSION, [NAME, 'WeChat']], [
            /konqueror\/([\w\.]+)/i                                             // Konqueror
            ], [VERSION, [NAME, 'Konqueror']], [
            /trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i                       // IE11
            ], [VERSION, [NAME, 'IE']], [
            /yabrowser\/([\w\.]+)/i                                             // Yandex
            ], [VERSION, [NAME, 'Yandex']], [
            /(avast|avg)\/([\w\.]+)/i                                           // Avast/AVG Secure Browser
            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [
            /\bfocus\/([\w\.]+)/i                                               // Firefox Focus
            ], [VERSION, [NAME, FIREFOX+' Focus']], [
            /\bopt\/([\w\.]+)/i                                                 // Opera Touch
            ], [VERSION, [NAME, OPERA+' Touch']], [
            /coc_coc\w+\/([\w\.]+)/i                                            // Coc Coc Browser
            ], [VERSION, [NAME, 'Coc Coc']], [
            /dolfin\/([\w\.]+)/i                                                // Dolphin
            ], [VERSION, [NAME, 'Dolphin']], [
            /coast\/([\w\.]+)/i                                                 // Opera Coast
            ], [VERSION, [NAME, OPERA+' Coast']], [
            /miuibrowser\/([\w\.]+)/i                                           // MIUI Browser
            ], [VERSION, [NAME, 'MIUI '+BROWSER]], [
            /fxios\/([-\w\.]+)/i                                                // Firefox for iOS
            ], [VERSION, [NAME, FIREFOX]], [
            /\bqihu|(qi?ho?o?|360)browser/i                                     // 360
            ], [[NAME, '360 '+BROWSER]], [
            /(oculus|samsung|sailfish)browser\/([\w\.]+)/i
            ], [[NAME, /(.+)/, '$1 '+BROWSER], VERSION], [                      // Oculus/Samsung/Sailfish Browser
            /(comodo_dragon)\/([\w\.]+)/i                                       // Comodo Dragon
            ], [[NAME, /_/g, ' '], VERSION], [
            /(electron)\/([\w\.]+) safari/i,                                    // Electron-based App
            /(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,                   // Tesla
            /m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i            // QQBrowser/Baidu App/2345 Browser
            ], [NAME, VERSION], [
            /(metasr)[\/ ]?([\w\.]+)/i,                                         // SouGouBrowser
            /(lbbrowser)/i                                                      // LieBao Browser
            ], [NAME], [

            // WebView
            /((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i       // Facebook App for iOS & Android
            ], [[NAME, FACEBOOK], VERSION], [
            /safari (line)\/([\w\.]+)/i,                                        // Line App for iOS
            /\b(line)\/([\w\.]+)\/iab/i,                                        // Line App for Android
            /(chromium|instagram)[\/ ]([-\w\.]+)/i                              // Chromium/Instagram
            ], [NAME, VERSION], [
            /\bgsa\/([\w\.]+) .*safari\//i                                      // Google Search Appliance on iOS
            ], [VERSION, [NAME, 'GSA']], [

            /headlesschrome(?:\/([\w\.]+)| )/i                                  // Chrome Headless
            ], [VERSION, [NAME, CHROME+' Headless']], [

            / wv\).+(chrome)\/([\w\.]+)/i                                       // Chrome WebView
            ], [[NAME, CHROME+' WebView'], VERSION], [

            /droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i           // Android Browser
            ], [VERSION, [NAME, 'Android '+BROWSER]], [

            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia
            ], [NAME, VERSION], [

            /version\/([\w\.]+) .*mobile\/\w+ (safari)/i                        // Mobile Safari
            ], [VERSION, [NAME, 'Mobile Safari']], [
            /version\/([\w\.]+) .*(mobile ?safari|safari)/i                     // Safari & Safari Mobile
            ], [VERSION, NAME], [
            /webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i                      // Safari < 3.0
            ], [NAME, [VERSION, strMapper, oldSafariMap]], [

            /(webkit|khtml)\/([\w\.]+)/i
            ], [NAME, VERSION], [

            // Gecko based
            /(navigator|netscape\d?)\/([-\w\.]+)/i                              // Netscape
            ], [[NAME, 'Netscape'], VERSION], [
            /mobile vr; rv:([\w\.]+)\).+firefox/i                               // Firefox Reality
            ], [VERSION, [NAME, FIREFOX+' Reality']], [
            /ekiohf.+(flow)\/([\w\.]+)/i,                                       // Flow
            /(swiftfox)/i,                                                      // Swiftfox
            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,
                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror/Klar
            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,
                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix
            /(firefox)\/([\w\.]+)/i,                                            // Other Firefox-based
            /(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,                         // Mozilla

            // Other
            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,
                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir/Obigo/Mosaic/Go/ICE/UP.Browser
            /(links) \(([\w\.]+)/i                                              // Links
            ], [NAME, VERSION]
        ],

        cpu : [[

            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i                     // AMD64 (x64)
            ], [[ARCHITECTURE, 'amd64']], [

            /(ia32(?=;))/i                                                      // IA32 (quicktime)
            ], [[ARCHITECTURE, lowerize]], [

            /((?:i[346]|x)86)[;\)]/i                                            // IA32 (x86)
            ], [[ARCHITECTURE, 'ia32']], [

            /\b(aarch64|arm(v?8e?l?|_?64))\b/i                                 // ARM64
            ], [[ARCHITECTURE, 'arm64']], [

            /\b(arm(?:v[67])?ht?n?[fl]p?)\b/i                                   // ARMHF
            ], [[ARCHITECTURE, 'armhf']], [

            // PocketPC mistakenly identified as PowerPC
            /windows (ce|mobile); ppc;/i
            ], [[ARCHITECTURE, 'arm']], [

            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i                            // PowerPC
            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [

            /(sun4\w)[;\)]/i                                                    // SPARC
            ], [[ARCHITECTURE, 'sparc']], [

            /((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i
                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC
            ], [[ARCHITECTURE, lowerize]]
        ],

        device : [[

            //////////////////////////
            // MOBILES & TABLETS
            // Ordered by popularity
            /////////////////////////

            // Samsung
            /\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i
            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [
            /\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,
            /samsung[- ]([-\w]+)/i,
            /sec-(sgh\w+)/i
            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [

            // Apple
            /\((ip(?:hone|od)[\w ]*);/i                                         // iPod/iPhone
            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [
            /\((ipad);[-\w\),; ]+apple/i,                                       // iPad
            /applecoremedia\/[\w\.]+ \((ipad)/i,
            /\b(ipad)\d\d?,\d\d?[;\]].+ios/i
            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [

            // Huawei
            /\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i
            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [
            /(?:huawei|honor)([-\w ]+)[;\)]/i,
            /\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i
            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [

            // Xiaomi
            /\b(poco[\w ]+)(?: bui|\))/i,                                       // Xiaomi POCO
            /\b; (\w+) build\/hm\1/i,                                           // Xiaomi Hongmi 'numeric' models
            /\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,                             // Xiaomi Hongmi
            /\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,                   // Xiaomi Redmi
            /\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i // Xiaomi Mi
            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [
            /\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i                        // Mi Pad tablets
            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [

            // OPPO
            /; (\w+) bui.+ oppo/i,
            /\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i
            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [

            // Vivo
            /vivo (\w+)(?: bui|\))/i,
            /\b(v[12]\d{3}\w?[at])(?: bui|;)/i
            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [

            // Realme
            /\b(rmx[12]\d{3})(?: bui|;|\))/i
            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [

            // Motorola
            /\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,
            /\bmot(?:orola)?[- ](\w*)/i,
            /((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i
            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [
            /\b(mz60\d|xoom[2 ]{0,2}) build\//i
            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [

            // LG
            /((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i
            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [
            /(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,
            /\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,
            /\blg-?([\d\w]+) bui/i
            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [

            // Lenovo
            /(ideatab[-\w ]+)/i,
            /lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i
            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [

            // Nokia
            /(?:maemo|nokia).*(n900|lumia \d+)/i,
            /nokia[-_ ]?([-\w\.]*)/i
            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [

            // Google
            /(pixel c)\b/i                                                      // Google Pixel C
            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [
            /droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i                         // Google Pixel
            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [

            // Sony
            /droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i
            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [
            /sony tablet [ps]/i,
            /\b(?:sony)?sgp\w+(?: bui|\))/i
            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [

            // OnePlus
            / (kb2005|in20[12]5|be20[12][59])\b/i,
            /(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i
            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [

            // Amazon
            /(alexa)webm/i,
            /(kf[a-z]{2}wi)( bui|\))/i,                                         // Kindle Fire without Silk
            /(kf[a-z]+)( bui|\)).+silk\//i                                      // Kindle Fire HD
            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [
            /((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i                     // Fire Phone
            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [

            // BlackBerry
            /(playbook);[-\w\),; ]+(rim)/i                                      // BlackBerry PlayBook
            ], [MODEL, VENDOR, [TYPE, TABLET]], [
            /\b((?:bb[a-f]|st[hv])100-\d)/i,
            /\(bb10; (\w+)/i                                                    // BlackBerry 10
            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [

            // Asus
            /(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i
            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [
            / (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i
            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [

            // HTC
            /(nexus 9)/i                                                        // HTC Nexus 9
            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [
            /(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,                         // HTC

            // ZTE
            /(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,
            /(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony
            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [

            // Acer
            /droid.+; ([ab][1-7]-?[0178a]\d\d?)/i
            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [

            // Meizu
            /droid.+; (m[1-5] note) bui/i,
            /\bmz-([-\w]{2,})/i
            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [

            // Sharp
            /\b(sh-?[altvz]?\d\d[a-ekm]?)/i
            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, MOBILE]], [

            // MIXED
            /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,
                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron
            /(hp) ([\w ]+\w)/i,                                                 // HP iPAQ
            /(asus)-?(\w+)/i,                                                   // Asus
            /(microsoft); (lumia[\w ]+)/i,                                      // Microsoft Lumia
            /(lenovo)[-_ ]?([-\w]+)/i,                                          // Lenovo
            /(jolla)/i,                                                         // Jolla
            /(oppo) ?([\w ]+) bui/i                                             // OPPO
            ], [VENDOR, MODEL, [TYPE, MOBILE]], [

            /(archos) (gamepad2?)/i,                                            // Archos
            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad
            /(kindle)\/([\w\.]+)/i,                                             // Kindle
            /(nook)[\w ]+build\/(\w+)/i,                                        // Nook
            /(dell) (strea[kpr\d ]*[\dko])/i,                                   // Dell Streak
            /(le[- ]+pan)[- ]+(\w{1,9}) bui/i,                                  // Le Pan Tablets
            /(trinity)[- ]*(t\d{3}) bui/i,                                      // Trinity Tablets
            /(gigaset)[- ]+(q\w{1,9}) bui/i,                                    // Gigaset Tablets
            /(vodafone) ([\w ]+)(?:\)| bui)/i                                   // Vodafone
            ], [VENDOR, MODEL, [TYPE, TABLET]], [

            /(surface duo)/i                                                    // Surface Duo
            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [
            /droid [\d\.]+; (fp\du?)(?: b|\))/i                                 // Fairphone
            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [
            /(u304aa)/i                                                         // AT&T
            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [
            /\bsie-(\w*)/i                                                      // Siemens
            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [
            /\b(rct\w+) b/i                                                     // RCA Tablets
            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [
            /\b(venue[\d ]{2,7}) b/i                                            // Dell Venue Tablets
            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [
            /\b(q(?:mv|ta)\w+) b/i                                              // Verizon Tablet
            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [
            /\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i                       // Barnes & Noble Tablet
            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [
            /\b(tm\d{3}\w+) b/i
            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [
            /\b(k88) b/i                                                        // ZTE K Series Tablet
            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [
            /\b(nx\d{3}j) b/i                                                   // ZTE Nubia
            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [
            /\b(gen\d{3}) b.+49h/i                                              // Swiss GEN Mobile
            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [
            /\b(zur\d{3}) b/i                                                   // Swiss ZUR Tablet
            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [
            /\b((zeki)?tb.*\b) b/i                                              // Zeki Tablets
            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [
            /\b([yr]\d{2}) b/i,
            /\b(dragon[- ]+touch |dt)(\w{5}) b/i                                // Dragon Touch Tablet
            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [
            /\b(ns-?\w{0,9}) b/i                                                // Insignia Tablets
            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [
            /\b((nxa|next)-?\w{0,9}) b/i                                        // NextBook Tablets
            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [
            /\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones
            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [
            /\b(lvtel\-)?(v1[12]) b/i                                           // LvTel Phones
            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [
            /\b(ph-1) /i                                                        // Essential PH-1
            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [
            /\b(v(100md|700na|7011|917g).*\b) b/i                               // Envizen Tablets
            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [
            /\b(trio[-\w\. ]+) b/i                                              // MachSpeed Tablets
            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [
            /\btu_(1491) b/i                                                    // Rotor Tablets
            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [
            /(shield[\w ]+) b/i                                                 // Nvidia Shield Tablets
            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [
            /(sprint) (\w+)/i                                                   // Sprint Phones
            ], [VENDOR, MODEL, [TYPE, MOBILE]], [
            /(kin\.[onetw]{3})/i                                                // Microsoft Kin
            ], [[MODEL, /\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [
            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i             // Zebra
            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [
            /droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i
            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [

            ///////////////////
            // CONSOLES
            ///////////////////

            /(ouya)/i,                                                          // Ouya
            /(nintendo) ([wids3utch]+)/i                                        // Nintendo
            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [
            /droid.+; (shield) bui/i                                            // Nvidia
            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [
            /(playstation [345portablevi]+)/i                                   // Playstation
            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [
            /\b(xbox(?: one)?(?!; xbox))[\); ]/i                                // Microsoft Xbox
            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [

            ///////////////////
            // SMARTTVS
            ///////////////////

            /smart-tv.+(samsung)/i                                              // Samsung
            ], [VENDOR, [TYPE, SMARTTV]], [
            /hbbtv.+maple;(\d+)/i
            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [
            /(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i        // LG SmartTV
            ], [[VENDOR, LG], [TYPE, SMARTTV]], [
            /(apple) ?tv/i                                                      // Apple TV
            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [
            /crkey/i                                                            // Google Chromecast
            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [
            /droid.+aft(\w)( bui|\))/i                                          // Fire TV
            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [
            /\(dtv[\);].+(aquos)/i                                              // Sharp
            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [
            /\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,                          // Roku
            /hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i               // HbbTV devices
            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [
            /\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i                   // SmartTV from Unidentified Vendors
            ], [[TYPE, SMARTTV]], [

            ///////////////////
            // WEARABLES
            ///////////////////

            /((pebble))app/i                                                    // Pebble
            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [
            /droid.+; (glass) \d/i                                              // Google Glass
            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [
            /droid.+; (wt63?0{2,3})\)/i
            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [
            /(quest( 2)?)/i                                                     // Oculus Quest
            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [

            ///////////////////
            // EMBEDDED
            ///////////////////

            /(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i                              // Tesla
            ], [VENDOR, [TYPE, EMBEDDED]], [

            ////////////////////
            // MIXED (GENERIC)
            ///////////////////

            /droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i           // Android Phones from Unidentified Vendors
            ], [MODEL, [TYPE, MOBILE]], [
            /droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors
            ], [MODEL, [TYPE, TABLET]], [
            /\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i                      // Unidentifiable Tablet
            ], [[TYPE, TABLET]], [
            /(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i              // Unidentifiable Mobile
            ], [[TYPE, MOBILE]], [
            /(android[-\w\. ]{0,9});.+buil/i                                    // Generic Android Device
            ], [MODEL, [VENDOR, 'Generic']]
        ],

        engine : [[

            /windows.+ edge\/([\w\.]+)/i                                       // EdgeHTML
            ], [VERSION, [NAME, EDGE+'HTML']], [

            /webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i                         // Blink
            ], [VERSION, [NAME, 'Blink']], [

            /(presto)\/([\w\.]+)/i,                                             // Presto
            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna
            /ekioh(flow)\/([\w\.]+)/i,                                          // Flow
            /(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,                           // KHTML/Tasman/Links
            /(icab)[\/ ]([23]\.[\d\.]+)/i                                       // iCab
            ], [NAME, VERSION], [

            /rv\:([\w\.]{1,9})\b.+(gecko)/i                                     // Gecko
            ], [VERSION, NAME]
        ],

        os : [[

            // Windows
            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)
            ], [NAME, VERSION], [
            /(windows) nt 6\.2; (arm)/i,                                        // Windows RT
            /(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,            // Windows Phone
            /(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i
            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [
            /(win(?=3|9|n)|win 9x )([nt\d\.]+)/i
            ], [[NAME, 'Windows'], [VERSION, strMapper, windowsVersionMap]], [

            // iOS/macOS
            /ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,              // iOS
            /cfnetwork\/.+darwin/i
            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [
            /(mac os x) ?([\w\. ]*)/i,
            /(macintosh|mac_powerpc\b)(?!.+haiku)/i                             // Mac OS
            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [

            // Mobile OSes
            /droid ([\w\.]+)\b.+(android[- ]x86)/i                              // Android-x86
            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS
            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,
            /(blackberry)\w*\/([\w\.]*)/i,                                      // Blackberry
            /(tizen|kaios)[\/ ]([\w\.]+)/i,                                     // Tizen/KaiOS
            /\((series40);/i                                                    // Series 40
            ], [NAME, VERSION], [
            /\(bb(10);/i                                                        // BlackBerry 10
            ], [VERSION, [NAME, BLACKBERRY]], [
            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i         // Symbian
            ], [VERSION, [NAME, 'Symbian']], [
            /mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i // Firefox OS
            ], [VERSION, [NAME, FIREFOX+' OS']], [
            /web0s;.+rt(tv)/i,
            /\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i                              // WebOS
            ], [VERSION, [NAME, 'webOS']], [

            // Google Chromecast
            /crkey\/([\d\.]+)/i                                                 // Google Chromecast
            ], [VERSION, [NAME, CHROME+'cast']], [
            /(cros) [\w]+ ([\w\.]+\w)/i                                         // Chromium OS
            ], [[NAME, 'Chromium OS'], VERSION],[

            // Console
            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation
            /(xbox); +xbox ([^\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)

            // Other
            /\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,                            // Joli/Palm
            /(mint)[\/\(\) ]?(\w*)/i,                                           // Mint
            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux
            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,
                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire
            /(hurd|linux) ?([\w\.]*)/i,                                         // Hurd/Linux
            /(gnu) ?([\w\.]*)/i,                                                // GNU
            /\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly
            /(haiku) (\w+)/i                                                    // Haiku
            ], [NAME, VERSION], [
            /(sunos) ?([\w\.\d]*)/i                                             // Solaris
            ], [[NAME, 'Solaris'], VERSION], [
            /((?:open)?solaris)[-\/ ]?([\w\.]*)/i,                              // Solaris
            /(aix) ((\d)(?=\.|\)| )[\w\.])*/i,                                  // AIX
            /\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,            // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX
            /(unix) ?([\w\.]*)/i                                                // UNIX
            ], [NAME, VERSION]
        ]
    };

    /////////////////
    // Constructor
    ////////////////

    var UAParser = function (ua, extensions) {

        if (typeof ua === OBJ_TYPE) {
            extensions = ua;
            ua = undefined;
        }

        if (!(this instanceof UAParser)) {
            return new UAParser(ua, extensions).getResult();
        }

        var _ua = ua || ((typeof window !== UNDEF_TYPE && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);
        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;

        this.getBrowser = function () {
            var _browser = {};
            _browser[NAME] = undefined;
            _browser[VERSION] = undefined;
            rgxMapper.call(_browser, _ua, _rgxmap.browser);
            _browser.major = majorize(_browser.version);
            return _browser;
        };
        this.getCPU = function () {
            var _cpu = {};
            _cpu[ARCHITECTURE] = undefined;
            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);
            return _cpu;
        };
        this.getDevice = function () {
            var _device = {};
            _device[VENDOR] = undefined;
            _device[MODEL] = undefined;
            _device[TYPE] = undefined;
            rgxMapper.call(_device, _ua, _rgxmap.device);
            return _device;
        };
        this.getEngine = function () {
            var _engine = {};
            _engine[NAME] = undefined;
            _engine[VERSION] = undefined;
            rgxMapper.call(_engine, _ua, _rgxmap.engine);
            return _engine;
        };
        this.getOS = function () {
            var _os = {};
            _os[NAME] = undefined;
            _os[VERSION] = undefined;
            rgxMapper.call(_os, _ua, _rgxmap.os);
            return _os;
        };
        this.getResult = function () {
            return {
                ua      : this.getUA(),
                browser : this.getBrowser(),
                engine  : this.getEngine(),
                os      : this.getOS(),
                device  : this.getDevice(),
                cpu     : this.getCPU()
            };
        };
        this.getUA = function () {
            return _ua;
        };
        this.setUA = function (ua) {
            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;
            return this;
        };
        this.setUA(_ua);
        return this;
    };

    UAParser.VERSION = LIBVERSION;
    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);
    UAParser.CPU = enumerize([ARCHITECTURE]);
    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);
    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);

    ///////////
    // Export
    //////////

    // check js environment
    if (typeof(exports) !== UNDEF_TYPE) {
        // nodejs env
        if (typeof module !== UNDEF_TYPE && module.exports) {
            exports = module.exports = UAParser;
        }
        exports.UAParser = UAParser;
    } else {
        // requirejs env (optional)
        if ("function" === FUNC_TYPE && __webpack_require__(/*! !webpack amd options */ "./node_modules/webpack/buildin/amd-options.js")) {
            !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {
                return UAParser;
            }).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
        } else if (typeof window !== UNDEF_TYPE) {
            // browser env
            window.UAParser = UAParser;
        }
    }

    // jQuery/Zepto specific (optional)
    // Note:
    //   In AMD env the global scope should be kept clean, but jQuery is an exception.
    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,
    //   and we should catch that.
    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);
    if ($ && !$.ua) {
        var parser = new UAParser();
        $.ua = parser.getResult();
        $.ua.get = function () {
            return parser.getUA();
        };
        $.ua.set = function (ua) {
            parser.setUA(ua);
            var result = parser.getResult();
            for (var prop in result) {
                $.ua[prop] = result[prop];
            }
        };
    }

})(typeof window === 'object' ? window : this);


/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/index.js ***!
  \*****************************************************/
/*! exports provided: v1, v3, v4, v5, NIL, version, validate, stringify, parse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _v1_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./v1.js */ "./node_modules/uuid/dist/esm-browser/v1.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "v1", function() { return _v1_js__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _v3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./v3.js */ "./node_modules/uuid/dist/esm-browser/v3.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "v3", function() { return _v3_js__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _v4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./v4.js */ "./node_modules/uuid/dist/esm-browser/v4.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "v4", function() { return _v4_js__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _v5_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./v5.js */ "./node_modules/uuid/dist/esm-browser/v5.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "v5", function() { return _v5_js__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _nil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./nil.js */ "./node_modules/uuid/dist/esm-browser/nil.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NIL", function() { return _nil_js__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _version_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./version.js */ "./node_modules/uuid/dist/esm-browser/version.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "version", function() { return _version_js__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/esm-browser/validate.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "validate", function() { return _validate_js__WEBPACK_IMPORTED_MODULE_6__["default"]; });

/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/esm-browser/stringify.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stringify", function() { return _stringify_js__WEBPACK_IMPORTED_MODULE_7__["default"]; });

/* harmony import */ var _parse_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./parse.js */ "./node_modules/uuid/dist/esm-browser/parse.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "parse", function() { return _parse_js__WEBPACK_IMPORTED_MODULE_8__["default"]; });











/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/md5.js":
/*!***************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/md5.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/*
 * Browser-compatible JavaScript MD5
 *
 * Modification of JavaScript MD5
 * https://github.com/blueimp/JavaScript-MD5
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 *
 * Based on
 * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.
 */
function md5(bytes) {
  if (typeof bytes === 'string') {
    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape

    bytes = new Uint8Array(msg.length);

    for (var i = 0; i < msg.length; ++i) {
      bytes[i] = msg.charCodeAt(i);
    }
  }

  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));
}
/*
 * Convert an array of little-endian words to an array of bytes
 */


function md5ToHexEncodedArray(input) {
  var output = [];
  var length32 = input.length * 32;
  var hexTab = '0123456789abcdef';

  for (var i = 0; i < length32; i += 8) {
    var x = input[i >> 5] >>> i % 32 & 0xff;
    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);
    output.push(hex);
  }

  return output;
}
/**
 * Calculate output length with padding and bit length
 */


function getOutputLength(inputLength8) {
  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;
}
/*
 * Calculate the MD5 of an array of little-endian words, and a bit length.
 */


function wordsToMd5(x, len) {
  /* append padding */
  x[len >> 5] |= 0x80 << len % 32;
  x[getOutputLength(len) - 1] = len;
  var a = 1732584193;
  var b = -271733879;
  var c = -1732584194;
  var d = 271733878;

  for (var i = 0; i < x.length; i += 16) {
    var olda = a;
    var oldb = b;
    var oldc = c;
    var oldd = d;
    a = md5ff(a, b, c, d, x[i], 7, -680876936);
    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);
    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);
    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);
    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);
    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);
    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);
    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);
    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);
    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);
    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);
    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);
    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);
    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);
    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);
    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);
    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);
    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);
    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);
    b = md5gg(b, c, d, a, x[i], 20, -373897302);
    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);
    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);
    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);
    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);
    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);
    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);
    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);
    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);
    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);
    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);
    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);
    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);
    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);
    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);
    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);
    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);
    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);
    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);
    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);
    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);
    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);
    d = md5hh(d, a, b, c, x[i], 11, -358537222);
    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);
    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);
    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);
    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);
    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);
    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);
    a = md5ii(a, b, c, d, x[i], 6, -198630844);
    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);
    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);
    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);
    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);
    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);
    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);
    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);
    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);
    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);
    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);
    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);
    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);
    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);
    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);
    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);
    a = safeAdd(a, olda);
    b = safeAdd(b, oldb);
    c = safeAdd(c, oldc);
    d = safeAdd(d, oldd);
  }

  return [a, b, c, d];
}
/*
 * Convert an array bytes to an array of little-endian words
 * Characters >255 have their high-byte silently ignored.
 */


function bytesToWords(input) {
  if (input.length === 0) {
    return [];
  }

  var length8 = input.length * 8;
  var output = new Uint32Array(getOutputLength(length8));

  for (var i = 0; i < length8; i += 8) {
    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;
  }

  return output;
}
/*
 * Add integers, wrapping at 2^32. This uses 16-bit operations internally
 * to work around bugs in some JS interpreters.
 */


function safeAdd(x, y) {
  var lsw = (x & 0xffff) + (y & 0xffff);
  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);
  return msw << 16 | lsw & 0xffff;
}
/*
 * Bitwise rotate a 32-bit number to the left.
 */


function bitRotateLeft(num, cnt) {
  return num << cnt | num >>> 32 - cnt;
}
/*
 * These functions implement the four basic operations the algorithm uses.
 */


function md5cmn(q, a, b, x, s, t) {
  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);
}

function md5ff(a, b, c, d, x, s, t) {
  return md5cmn(b & c | ~b & d, a, b, x, s, t);
}

function md5gg(a, b, c, d, x, s, t) {
  return md5cmn(b & d | c & ~d, a, b, x, s, t);
}

function md5hh(a, b, c, d, x, s, t) {
  return md5cmn(b ^ c ^ d, a, b, x, s, t);
}

function md5ii(a, b, c, d, x, s, t) {
  return md5cmn(c ^ (b | ~d), a, b, x, s, t);
}

/* harmony default export */ __webpack_exports__["default"] = (md5);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/nil.js":
/*!***************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/nil.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ('00000000-0000-0000-0000-000000000000');

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/parse.js":
/*!*****************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/parse.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/esm-browser/validate.js");


function parse(uuid) {
  if (!Object(_validate_js__WEBPACK_IMPORTED_MODULE_0__["default"])(uuid)) {
    throw TypeError('Invalid UUID');
  }

  var v;
  var arr = new Uint8Array(16); // Parse ########-....-....-....-............

  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;
  arr[1] = v >>> 16 & 0xff;
  arr[2] = v >>> 8 & 0xff;
  arr[3] = v & 0xff; // Parse ........-####-....-....-............

  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;
  arr[5] = v & 0xff; // Parse ........-....-####-....-............

  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;
  arr[7] = v & 0xff; // Parse ........-....-....-####-............

  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;
  arr[9] = v & 0xff; // Parse ........-....-....-....-############
  // (Use "/" to avoid 32-bit truncation when bit-shifting high-order bytes)

  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;
  arr[11] = v / 0x100000000 & 0xff;
  arr[12] = v >>> 24 & 0xff;
  arr[13] = v >>> 16 & 0xff;
  arr[14] = v >>> 8 & 0xff;
  arr[15] = v & 0xff;
  return arr;
}

/* harmony default export */ __webpack_exports__["default"] = (parse);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/regex.js":
/*!*****************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/regex.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/rng.js":
/*!***************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/rng.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return rng; });
// Unique ID creation requires a high quality random # generator. In the browser we therefore
// require the crypto API and do not support built-in fallback to lower quality random number
// generators (like Math.random()).
var getRandomValues;
var rnds8 = new Uint8Array(16);
function rng() {
  // lazy load so that environments that need to polyfill have a chance to do so
  if (!getRandomValues) {
    // getRandomValues needs to be invoked in a context where "this" is a Crypto implementation. Also,
    // find the complete implementation of crypto (msCrypto) on IE11.
    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);

    if (!getRandomValues) {
      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');
    }
  }

  return getRandomValues(rnds8);
}

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/sha1.js":
/*!****************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/sha1.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
// Adapted from Chris Veness' SHA1 code at
// http://www.movable-type.co.uk/scripts/sha1.html
function f(s, x, y, z) {
  switch (s) {
    case 0:
      return x & y ^ ~x & z;

    case 1:
      return x ^ y ^ z;

    case 2:
      return x & y ^ x & z ^ y & z;

    case 3:
      return x ^ y ^ z;
  }
}

function ROTL(x, n) {
  return x << n | x >>> 32 - n;
}

function sha1(bytes) {
  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];
  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];

  if (typeof bytes === 'string') {
    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape

    bytes = [];

    for (var i = 0; i < msg.length; ++i) {
      bytes.push(msg.charCodeAt(i));
    }
  } else if (!Array.isArray(bytes)) {
    // Convert Array-like to Array
    bytes = Array.prototype.slice.call(bytes);
  }

  bytes.push(0x80);
  var l = bytes.length / 4 + 2;
  var N = Math.ceil(l / 16);
  var M = new Array(N);

  for (var _i = 0; _i < N; ++_i) {
    var arr = new Uint32Array(16);

    for (var j = 0; j < 16; ++j) {
      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];
    }

    M[_i] = arr;
  }

  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);
  M[N - 1][14] = Math.floor(M[N - 1][14]);
  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;

  for (var _i2 = 0; _i2 < N; ++_i2) {
    var W = new Uint32Array(80);

    for (var t = 0; t < 16; ++t) {
      W[t] = M[_i2][t];
    }

    for (var _t = 16; _t < 80; ++_t) {
      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);
    }

    var a = H[0];
    var b = H[1];
    var c = H[2];
    var d = H[3];
    var e = H[4];

    for (var _t2 = 0; _t2 < 80; ++_t2) {
      var s = Math.floor(_t2 / 20);
      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;
      e = d;
      d = c;
      c = ROTL(b, 30) >>> 0;
      b = a;
      a = T;
    }

    H[0] = H[0] + a >>> 0;
    H[1] = H[1] + b >>> 0;
    H[2] = H[2] + c >>> 0;
    H[3] = H[3] + d >>> 0;
    H[4] = H[4] + e >>> 0;
  }

  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];
}

/* harmony default export */ __webpack_exports__["default"] = (sha1);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/stringify.js":
/*!*********************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/stringify.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/esm-browser/validate.js");

/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */

var byteToHex = [];

for (var i = 0; i < 256; ++i) {
  byteToHex.push((i + 0x100).toString(16).substr(1));
}

function stringify(arr) {
  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
  // Note: Be careful editing this code!  It's been tuned for performance
  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one
  // of the following:
  // - One or more input array values don't map to a hex octet (leading to
  // "undefined" in the uuid)
  // - Invalid input values for the RFC `version` or `variant` fields

  if (!Object(_validate_js__WEBPACK_IMPORTED_MODULE_0__["default"])(uuid)) {
    throw TypeError('Stringified UUID is invalid');
  }

  return uuid;
}

/* harmony default export */ __webpack_exports__["default"] = (stringify);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/v1.js":
/*!**************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/v1.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rng.js */ "./node_modules/uuid/dist/esm-browser/rng.js");
/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/esm-browser/stringify.js");

 // **`v1()` - Generate time-based UUID**
//
// Inspired by https://github.com/LiosK/UUID.js
// and http://docs.python.org/library/uuid.html

var _nodeId;

var _clockseq; // Previous uuid creation time


var _lastMSecs = 0;
var _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details

function v1(options, buf, offset) {
  var i = buf && offset || 0;
  var b = buf || new Array(16);
  options = options || {};
  var node = options.node || _nodeId;
  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not
  // specified.  We do this lazily to minimize issues related to insufficient
  // system entropy.  See #189

  if (node == null || clockseq == null) {
    var seedBytes = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_0__["default"])();

    if (node == null) {
      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)
      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];
    }

    if (clockseq == null) {
      // Per 4.2.2, randomize (14 bit) clockseq
      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;
    }
  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,
  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so
  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'
  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.


  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock
  // cycle to simulate higher resolution clock

  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)

  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression

  if (dt < 0 && options.clockseq === undefined) {
    clockseq = clockseq + 1 & 0x3fff;
  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new
  // time interval


  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {
    nsecs = 0;
  } // Per 4.2.1.2 Throw error if too many uuids are requested


  if (nsecs >= 10000) {
    throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
  }

  _lastMSecs = msecs;
  _lastNSecs = nsecs;
  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch

  msecs += 12219292800000; // `time_low`

  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;
  b[i++] = tl >>> 24 & 0xff;
  b[i++] = tl >>> 16 & 0xff;
  b[i++] = tl >>> 8 & 0xff;
  b[i++] = tl & 0xff; // `time_mid`

  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;
  b[i++] = tmh >>> 8 & 0xff;
  b[i++] = tmh & 0xff; // `time_high_and_version`

  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version

  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)

  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`

  b[i++] = clockseq & 0xff; // `node`

  for (var n = 0; n < 6; ++n) {
    b[i + n] = node[n];
  }

  return buf || Object(_stringify_js__WEBPACK_IMPORTED_MODULE_1__["default"])(b);
}

/* harmony default export */ __webpack_exports__["default"] = (v1);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/v3.js":
/*!**************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/v3.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _v35_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./v35.js */ "./node_modules/uuid/dist/esm-browser/v35.js");
/* harmony import */ var _md5_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./md5.js */ "./node_modules/uuid/dist/esm-browser/md5.js");


var v3 = Object(_v35_js__WEBPACK_IMPORTED_MODULE_0__["default"])('v3', 0x30, _md5_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (v3);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/v35.js":
/*!***************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/v35.js ***!
  \***************************************************/
/*! exports provided: DNS, URL, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DNS", function() { return DNS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "URL", function() { return URL; });
/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/esm-browser/stringify.js");
/* harmony import */ var _parse_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parse.js */ "./node_modules/uuid/dist/esm-browser/parse.js");



function stringToBytes(str) {
  str = unescape(encodeURIComponent(str)); // UTF8 escape

  var bytes = [];

  for (var i = 0; i < str.length; ++i) {
    bytes.push(str.charCodeAt(i));
  }

  return bytes;
}

var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';
var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';
/* harmony default export */ __webpack_exports__["default"] = (function (name, version, hashfunc) {
  function generateUUID(value, namespace, buf, offset) {
    if (typeof value === 'string') {
      value = stringToBytes(value);
    }

    if (typeof namespace === 'string') {
      namespace = Object(_parse_js__WEBPACK_IMPORTED_MODULE_1__["default"])(namespace);
    }

    if (namespace.length !== 16) {
      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');
    } // Compute hash of namespace and value, Per 4.3
    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =
    // hashfunc([...namespace, ... value])`


    var bytes = new Uint8Array(16 + value.length);
    bytes.set(namespace);
    bytes.set(value, namespace.length);
    bytes = hashfunc(bytes);
    bytes[6] = bytes[6] & 0x0f | version;
    bytes[8] = bytes[8] & 0x3f | 0x80;

    if (buf) {
      offset = offset || 0;

      for (var i = 0; i < 16; ++i) {
        buf[offset + i] = bytes[i];
      }

      return buf;
    }

    return Object(_stringify_js__WEBPACK_IMPORTED_MODULE_0__["default"])(bytes);
  } // Function#name is not settable on some platforms (#270)


  try {
    generateUUID.name = name; // eslint-disable-next-line no-empty
  } catch (err) {} // For CommonJS default export support


  generateUUID.DNS = DNS;
  generateUUID.URL = URL;
  return generateUUID;
});

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/v4.js":
/*!**************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/v4.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rng.js */ "./node_modules/uuid/dist/esm-browser/rng.js");
/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/esm-browser/stringify.js");



function v4(options, buf, offset) {
  options = options || {};
  var rnds = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_0__["default"])(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`

  rnds[6] = rnds[6] & 0x0f | 0x40;
  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided

  if (buf) {
    offset = offset || 0;

    for (var i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }

    return buf;
  }

  return Object(_stringify_js__WEBPACK_IMPORTED_MODULE_1__["default"])(rnds);
}

/* harmony default export */ __webpack_exports__["default"] = (v4);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/v5.js":
/*!**************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/v5.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _v35_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./v35.js */ "./node_modules/uuid/dist/esm-browser/v35.js");
/* harmony import */ var _sha1_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sha1.js */ "./node_modules/uuid/dist/esm-browser/sha1.js");


var v5 = Object(_v35_js__WEBPACK_IMPORTED_MODULE_0__["default"])('v5', 0x50, _sha1_js__WEBPACK_IMPORTED_MODULE_1__["default"]);
/* harmony default export */ __webpack_exports__["default"] = (v5);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/validate.js":
/*!********************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/validate.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ "./node_modules/uuid/dist/esm-browser/regex.js");


function validate(uuid) {
  return typeof uuid === 'string' && _regex_js__WEBPACK_IMPORTED_MODULE_0__["default"].test(uuid);
}

/* harmony default export */ __webpack_exports__["default"] = (validate);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/version.js":
/*!*******************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/version.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/esm-browser/validate.js");


function version(uuid) {
  if (!Object(_validate_js__WEBPACK_IMPORTED_MODULE_0__["default"])(uuid)) {
    throw TypeError('Invalid UUID');
  }

  return parseInt(uuid.substr(14, 1), 16);
}

/* harmony default export */ __webpack_exports__["default"] = (version);

/***/ }),

/***/ "./node_modules/webpack/buildin/amd-options.js":
/*!****************************************!*\
  !*** (webpack)/buildin/amd-options.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */
module.exports = __webpack_amd_options__;

/* WEBPACK VAR INJECTION */}.call(this, {}))

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/adapter_core.js":
/*!************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/adapter_core.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _adapter_factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adapter_factory.js */ "./node_modules/webrtc-adapter/src/js/adapter_factory.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */





const adapter =
  Object(_adapter_factory_js__WEBPACK_IMPORTED_MODULE_0__["adapterFactory"])({window: typeof window === 'undefined' ? undefined : window});
/* harmony default export */ __webpack_exports__["default"] = (adapter);


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/adapter_factory.js":
/*!***************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/adapter_factory.js ***!
  \***************************************************************/
/*! exports provided: adapterFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "adapterFactory", function() { return adapterFactory; });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/* harmony import */ var _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chrome/chrome_shim */ "./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js");
/* harmony import */ var _edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./edge/edge_shim */ "./node_modules/webrtc-adapter/src/js/edge/edge_shim.js");
/* harmony import */ var _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./firefox/firefox_shim */ "./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js");
/* harmony import */ var _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./safari/safari_shim */ "./node_modules/webrtc-adapter/src/js/safari/safari_shim.js");
/* harmony import */ var _common_shim__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./common_shim */ "./node_modules/webrtc-adapter/src/js/common_shim.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */


  // Browser shims.






// Shimming starts here.
function adapterFactory({window} = {}, options = {
  shimChrome: true,
  shimFirefox: true,
  shimEdge: true,
  shimSafari: true,
}) {
  // Utils.
  const logging = _utils__WEBPACK_IMPORTED_MODULE_0__["log"];
  const browserDetails = _utils__WEBPACK_IMPORTED_MODULE_0__["detectBrowser"](window);

  const adapter = {
    browserDetails,
    commonShim: _common_shim__WEBPACK_IMPORTED_MODULE_5__,
    extractVersion: _utils__WEBPACK_IMPORTED_MODULE_0__["extractVersion"],
    disableLog: _utils__WEBPACK_IMPORTED_MODULE_0__["disableLog"],
    disableWarnings: _utils__WEBPACK_IMPORTED_MODULE_0__["disableWarnings"]
  };

  // Shim browser if found.
  switch (browserDetails.browser) {
    case 'chrome':
      if (!_chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__ || !_chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__["shimPeerConnection"] ||
          !options.shimChrome) {
        logging('Chrome shim is not included in this adapter release.');
        return adapter;
      }
      if (browserDetails.version === null) {
        logging('Chrome shim can not determine version, not shimming.');
        return adapter;
      }
      logging('adapter.js shimming chrome.');
      // Export to the adapter global object visible in the browser.
      adapter.browserShim = _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__;

      // Must be called before shimPeerConnection.
      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimAddIceCandidateNullOrEmpty"](window, browserDetails);

      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__["shimGetUserMedia"](window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__["shimMediaStream"](window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__["shimPeerConnection"](window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__["shimOnTrack"](window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__["shimAddTrackRemoveTrack"](window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__["shimGetSendersWithDtmf"](window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__["shimGetStats"](window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__["shimSenderReceiverGetStats"](window, browserDetails);
      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__["fixNegotiationNeeded"](window, browserDetails);

      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimRTCIceCandidate"](window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimConnectionState"](window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimMaxMessageSize"](window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimSendThrowTypeError"](window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_5__["removeExtmapAllowMixed"](window, browserDetails);
      break;
    case 'firefox':
      if (!_firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__ || !_firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__["shimPeerConnection"] ||
          !options.shimFirefox) {
        logging('Firefox shim is not included in this adapter release.');
        return adapter;
      }
      logging('adapter.js shimming firefox.');
      // Export to the adapter global object visible in the browser.
      adapter.browserShim = _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__;

      // Must be called before shimPeerConnection.
      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimAddIceCandidateNullOrEmpty"](window, browserDetails);

      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__["shimGetUserMedia"](window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__["shimPeerConnection"](window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__["shimOnTrack"](window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__["shimRemoveStream"](window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__["shimSenderGetStats"](window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__["shimReceiverGetStats"](window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__["shimRTCDataChannel"](window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__["shimAddTransceiver"](window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__["shimGetParameters"](window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__["shimCreateOffer"](window, browserDetails);
      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__["shimCreateAnswer"](window, browserDetails);

      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimRTCIceCandidate"](window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimConnectionState"](window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimMaxMessageSize"](window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimSendThrowTypeError"](window, browserDetails);
      break;
    case 'edge':
      if (!_edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__ || !_edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__["shimPeerConnection"] || !options.shimEdge) {
        logging('MS edge shim is not included in this adapter release.');
        return adapter;
      }
      logging('adapter.js shimming edge.');
      // Export to the adapter global object visible in the browser.
      adapter.browserShim = _edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__;

      _edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__["shimGetUserMedia"](window, browserDetails);
      _edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__["shimGetDisplayMedia"](window, browserDetails);
      _edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__["shimPeerConnection"](window, browserDetails);
      _edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__["shimReplaceTrack"](window, browserDetails);

      // the edge shim implements the full RTCIceCandidate object.

      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimMaxMessageSize"](window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimSendThrowTypeError"](window, browserDetails);
      break;
    case 'safari':
      if (!_safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__ || !options.shimSafari) {
        logging('Safari shim is not included in this adapter release.');
        return adapter;
      }
      logging('adapter.js shimming safari.');
      // Export to the adapter global object visible in the browser.
      adapter.browserShim = _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__;

      // Must be called before shimCallbackAPI.
      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimAddIceCandidateNullOrEmpty"](window, browserDetails);

      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__["shimRTCIceServerUrls"](window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__["shimCreateOfferLegacy"](window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__["shimCallbacksAPI"](window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__["shimLocalStreamsAPI"](window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__["shimRemoteStreamsAPI"](window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__["shimTrackEventTransceiver"](window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__["shimGetUserMedia"](window, browserDetails);
      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__["shimAudioContext"](window, browserDetails);

      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimRTCIceCandidate"](window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimMaxMessageSize"](window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_5__["shimSendThrowTypeError"](window, browserDetails);
      _common_shim__WEBPACK_IMPORTED_MODULE_5__["removeExtmapAllowMixed"](window, browserDetails);
      break;
    default:
      logging('Unsupported browser!');
      break;
  }

  return adapter;
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js":
/*!******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js ***!
  \******************************************************************/
/*! exports provided: shimGetUserMedia, shimGetDisplayMedia, shimMediaStream, shimOnTrack, shimGetSendersWithDtmf, shimGetStats, shimSenderReceiverGetStats, shimAddTrackRemoveTrackWithNative, shimAddTrackRemoveTrack, shimPeerConnection, fixNegotiationNeeded */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimMediaStream", function() { return shimMediaStream; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimOnTrack", function() { return shimOnTrack; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimGetSendersWithDtmf", function() { return shimGetSendersWithDtmf; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimGetStats", function() { return shimGetStats; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimSenderReceiverGetStats", function() { return shimSenderReceiverGetStats; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimAddTrackRemoveTrackWithNative", function() { return shimAddTrackRemoveTrackWithNative; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimAddTrackRemoveTrack", function() { return shimAddTrackRemoveTrack; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimPeerConnection", function() { return shimPeerConnection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fixNegotiationNeeded", function() { return fixNegotiationNeeded; });
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ "./node_modules/webrtc-adapter/src/js/utils.js");
/* harmony import */ var _getusermedia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getusermedia */ "./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "shimGetUserMedia", function() { return _getusermedia__WEBPACK_IMPORTED_MODULE_1__["shimGetUserMedia"]; });

/* harmony import */ var _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getdisplaymedia */ "./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "shimGetDisplayMedia", function() { return _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__["shimGetDisplayMedia"]; });

/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
 /* eslint-env node */






function shimMediaStream(window) {
  window.MediaStream = window.MediaStream || window.webkitMediaStream;
}

function shimOnTrack(window) {
  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in
      window.RTCPeerConnection.prototype)) {
    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {
      get() {
        return this._ontrack;
      },
      set(f) {
        if (this._ontrack) {
          this.removeEventListener('track', this._ontrack);
        }
        this.addEventListener('track', this._ontrack = f);
      },
      enumerable: true,
      configurable: true
    });
    const origSetRemoteDescription =
        window.RTCPeerConnection.prototype.setRemoteDescription;
    window.RTCPeerConnection.prototype.setRemoteDescription =
      function setRemoteDescription() {
        if (!this._ontrackpoly) {
          this._ontrackpoly = (e) => {
            // onaddstream does not fire when a track is added to an existing
            // stream. But stream.onaddtrack is implemented so we use that.
            e.stream.addEventListener('addtrack', te => {
              let receiver;
              if (window.RTCPeerConnection.prototype.getReceivers) {
                receiver = this.getReceivers()
                  .find(r => r.track && r.track.id === te.track.id);
              } else {
                receiver = {track: te.track};
              }

              const event = new Event('track');
              event.track = te.track;
              event.receiver = receiver;
              event.transceiver = {receiver};
              event.streams = [e.stream];
              this.dispatchEvent(event);
            });
            e.stream.getTracks().forEach(track => {
              let receiver;
              if (window.RTCPeerConnection.prototype.getReceivers) {
                receiver = this.getReceivers()
                  .find(r => r.track && r.track.id === track.id);
              } else {
                receiver = {track};
              }
              const event = new Event('track');
              event.track = track;
              event.receiver = receiver;
              event.transceiver = {receiver};
              event.streams = [e.stream];
              this.dispatchEvent(event);
            });
          };
          this.addEventListener('addstream', this._ontrackpoly);
        }
        return origSetRemoteDescription.apply(this, arguments);
      };
  } else {
    // even if RTCRtpTransceiver is in window, it is only used and
    // emitted in unified-plan. Unfortunately this means we need
    // to unconditionally wrap the event.
    _utils_js__WEBPACK_IMPORTED_MODULE_0__["wrapPeerConnectionEvent"](window, 'track', e => {
      if (!e.transceiver) {
        Object.defineProperty(e, 'transceiver',
          {value: {receiver: e.receiver}});
      }
      return e;
    });
  }
}

function shimGetSendersWithDtmf(window) {
  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.
  if (typeof window === 'object' && window.RTCPeerConnection &&
      !('getSenders' in window.RTCPeerConnection.prototype) &&
      'createDTMFSender' in window.RTCPeerConnection.prototype) {
    const shimSenderWithDtmf = function(pc, track) {
      return {
        track,
        get dtmf() {
          if (this._dtmf === undefined) {
            if (track.kind === 'audio') {
              this._dtmf = pc.createDTMFSender(track);
            } else {
              this._dtmf = null;
            }
          }
          return this._dtmf;
        },
        _pc: pc
      };
    };

    // augment addTrack when getSenders is not available.
    if (!window.RTCPeerConnection.prototype.getSenders) {
      window.RTCPeerConnection.prototype.getSenders = function getSenders() {
        this._senders = this._senders || [];
        return this._senders.slice(); // return a copy of the internal state.
      };
      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;
      window.RTCPeerConnection.prototype.addTrack =
        function addTrack(track, stream) {
          let sender = origAddTrack.apply(this, arguments);
          if (!sender) {
            sender = shimSenderWithDtmf(this, track);
            this._senders.push(sender);
          }
          return sender;
        };

      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;
      window.RTCPeerConnection.prototype.removeTrack =
        function removeTrack(sender) {
          origRemoveTrack.apply(this, arguments);
          const idx = this._senders.indexOf(sender);
          if (idx !== -1) {
            this._senders.splice(idx, 1);
          }
        };
    }
    const origAddStream = window.RTCPeerConnection.prototype.addStream;
    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {
      this._senders = this._senders || [];
      origAddStream.apply(this, [stream]);
      stream.getTracks().forEach(track => {
        this._senders.push(shimSenderWithDtmf(this, track));
      });
    };

    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;
    window.RTCPeerConnection.prototype.removeStream =
      function removeStream(stream) {
        this._senders = this._senders || [];
        origRemoveStream.apply(this, [stream]);

        stream.getTracks().forEach(track => {
          const sender = this._senders.find(s => s.track === track);
          if (sender) { // remove sender
            this._senders.splice(this._senders.indexOf(sender), 1);
          }
        });
      };
  } else if (typeof window === 'object' && window.RTCPeerConnection &&
             'getSenders' in window.RTCPeerConnection.prototype &&
             'createDTMFSender' in window.RTCPeerConnection.prototype &&
             window.RTCRtpSender &&
             !('dtmf' in window.RTCRtpSender.prototype)) {
    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;
    window.RTCPeerConnection.prototype.getSenders = function getSenders() {
      const senders = origGetSenders.apply(this, []);
      senders.forEach(sender => sender._pc = this);
      return senders;
    };

    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {
      get() {
        if (this._dtmf === undefined) {
          if (this.track.kind === 'audio') {
            this._dtmf = this._pc.createDTMFSender(this.track);
          } else {
            this._dtmf = null;
          }
        }
        return this._dtmf;
      }
    });
  }
}

function shimGetStats(window) {
  if (!window.RTCPeerConnection) {
    return;
  }

  const origGetStats = window.RTCPeerConnection.prototype.getStats;
  window.RTCPeerConnection.prototype.getStats = function getStats() {
    const [selector, onSucc, onErr] = arguments;

    // If selector is a function then we are in the old style stats so just
    // pass back the original getStats format to avoid breaking old users.
    if (arguments.length > 0 && typeof selector === 'function') {
      return origGetStats.apply(this, arguments);
    }

    // When spec-style getStats is supported, return those when called with
    // either no arguments or the selector argument is null.
    if (origGetStats.length === 0 && (arguments.length === 0 ||
        typeof selector !== 'function')) {
      return origGetStats.apply(this, []);
    }

    const fixChromeStats_ = function(response) {
      const standardReport = {};
      const reports = response.result();
      reports.forEach(report => {
        const standardStats = {
          id: report.id,
          timestamp: report.timestamp,
          type: {
            localcandidate: 'local-candidate',
            remotecandidate: 'remote-candidate'
          }[report.type] || report.type
        };
        report.names().forEach(name => {
          standardStats[name] = report.stat(name);
        });
        standardReport[standardStats.id] = standardStats;
      });

      return standardReport;
    };

    // shim getStats with maplike support
    const makeMapStats = function(stats) {
      return new Map(Object.keys(stats).map(key => [key, stats[key]]));
    };

    if (arguments.length >= 2) {
      const successCallbackWrapper_ = function(response) {
        onSucc(makeMapStats(fixChromeStats_(response)));
      };

      return origGetStats.apply(this, [successCallbackWrapper_,
        selector]);
    }

    // promise-support
    return new Promise((resolve, reject) => {
      origGetStats.apply(this, [
        function(response) {
          resolve(makeMapStats(fixChromeStats_(response)));
        }, reject]);
    }).then(onSucc, onErr);
  };
}

function shimSenderReceiverGetStats(window) {
  if (!(typeof window === 'object' && window.RTCPeerConnection &&
      window.RTCRtpSender && window.RTCRtpReceiver)) {
    return;
  }

  // shim sender stats.
  if (!('getStats' in window.RTCRtpSender.prototype)) {
    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;
    if (origGetSenders) {
      window.RTCPeerConnection.prototype.getSenders = function getSenders() {
        const senders = origGetSenders.apply(this, []);
        senders.forEach(sender => sender._pc = this);
        return senders;
      };
    }

    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;
    if (origAddTrack) {
      window.RTCPeerConnection.prototype.addTrack = function addTrack() {
        const sender = origAddTrack.apply(this, arguments);
        sender._pc = this;
        return sender;
      };
    }
    window.RTCRtpSender.prototype.getStats = function getStats() {
      const sender = this;
      return this._pc.getStats().then(result =>
        /* Note: this will include stats of all senders that
         *   send a track with the same id as sender.track as
         *   it is not possible to identify the RTCRtpSender.
         */
        _utils_js__WEBPACK_IMPORTED_MODULE_0__["filterStats"](result, sender.track, true));
    };
  }

  // shim receiver stats.
  if (!('getStats' in window.RTCRtpReceiver.prototype)) {
    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;
    if (origGetReceivers) {
      window.RTCPeerConnection.prototype.getReceivers =
        function getReceivers() {
          const receivers = origGetReceivers.apply(this, []);
          receivers.forEach(receiver => receiver._pc = this);
          return receivers;
        };
    }
    _utils_js__WEBPACK_IMPORTED_MODULE_0__["wrapPeerConnectionEvent"](window, 'track', e => {
      e.receiver._pc = e.srcElement;
      return e;
    });
    window.RTCRtpReceiver.prototype.getStats = function getStats() {
      const receiver = this;
      return this._pc.getStats().then(result =>
        _utils_js__WEBPACK_IMPORTED_MODULE_0__["filterStats"](result, receiver.track, false));
    };
  }

  if (!('getStats' in window.RTCRtpSender.prototype &&
      'getStats' in window.RTCRtpReceiver.prototype)) {
    return;
  }

  // shim RTCPeerConnection.getStats(track).
  const origGetStats = window.RTCPeerConnection.prototype.getStats;
  window.RTCPeerConnection.prototype.getStats = function getStats() {
    if (arguments.length > 0 &&
        arguments[0] instanceof window.MediaStreamTrack) {
      const track = arguments[0];
      let sender;
      let receiver;
      let err;
      this.getSenders().forEach(s => {
        if (s.track === track) {
          if (sender) {
            err = true;
          } else {
            sender = s;
          }
        }
      });
      this.getReceivers().forEach(r => {
        if (r.track === track) {
          if (receiver) {
            err = true;
          } else {
            receiver = r;
          }
        }
        return r.track === track;
      });
      if (err || (sender && receiver)) {
        return Promise.reject(new DOMException(
          'There are more than one sender or receiver for the track.',
          'InvalidAccessError'));
      } else if (sender) {
        return sender.getStats();
      } else if (receiver) {
        return receiver.getStats();
      }
      return Promise.reject(new DOMException(
        'There is no sender or receiver for the track.',
        'InvalidAccessError'));
    }
    return origGetStats.apply(this, arguments);
  };
}

function shimAddTrackRemoveTrackWithNative(window) {
  // shim addTrack/removeTrack with native variants in order to make
  // the interactions with legacy getLocalStreams behave as in other browsers.
  // Keeps a mapping stream.id => [stream, rtpsenders...]
  window.RTCPeerConnection.prototype.getLocalStreams =
    function getLocalStreams() {
      this._shimmedLocalStreams = this._shimmedLocalStreams || {};
      return Object.keys(this._shimmedLocalStreams)
        .map(streamId => this._shimmedLocalStreams[streamId][0]);
    };

  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;
  window.RTCPeerConnection.prototype.addTrack =
    function addTrack(track, stream) {
      if (!stream) {
        return origAddTrack.apply(this, arguments);
      }
      this._shimmedLocalStreams = this._shimmedLocalStreams || {};

      const sender = origAddTrack.apply(this, arguments);
      if (!this._shimmedLocalStreams[stream.id]) {
        this._shimmedLocalStreams[stream.id] = [stream, sender];
      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {
        this._shimmedLocalStreams[stream.id].push(sender);
      }
      return sender;
    };

  const origAddStream = window.RTCPeerConnection.prototype.addStream;
  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {
    this._shimmedLocalStreams = this._shimmedLocalStreams || {};

    stream.getTracks().forEach(track => {
      const alreadyExists = this.getSenders().find(s => s.track === track);
      if (alreadyExists) {
        throw new DOMException('Track already exists.',
            'InvalidAccessError');
      }
    });
    const existingSenders = this.getSenders();
    origAddStream.apply(this, arguments);
    const newSenders = this.getSenders()
      .filter(newSender => existingSenders.indexOf(newSender) === -1);
    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);
  };

  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;
  window.RTCPeerConnection.prototype.removeStream =
    function removeStream(stream) {
      this._shimmedLocalStreams = this._shimmedLocalStreams || {};
      delete this._shimmedLocalStreams[stream.id];
      return origRemoveStream.apply(this, arguments);
    };

  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;
  window.RTCPeerConnection.prototype.removeTrack =
    function removeTrack(sender) {
      this._shimmedLocalStreams = this._shimmedLocalStreams || {};
      if (sender) {
        Object.keys(this._shimmedLocalStreams).forEach(streamId => {
          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);
          if (idx !== -1) {
            this._shimmedLocalStreams[streamId].splice(idx, 1);
          }
          if (this._shimmedLocalStreams[streamId].length === 1) {
            delete this._shimmedLocalStreams[streamId];
          }
        });
      }
      return origRemoveTrack.apply(this, arguments);
    };
}

function shimAddTrackRemoveTrack(window, browserDetails) {
  if (!window.RTCPeerConnection) {
    return;
  }
  // shim addTrack and removeTrack.
  if (window.RTCPeerConnection.prototype.addTrack &&
      browserDetails.version >= 65) {
    return shimAddTrackRemoveTrackWithNative(window);
  }

  // also shim pc.getLocalStreams when addTrack is shimmed
  // to return the original streams.
  const origGetLocalStreams = window.RTCPeerConnection.prototype
      .getLocalStreams;
  window.RTCPeerConnection.prototype.getLocalStreams =
    function getLocalStreams() {
      const nativeStreams = origGetLocalStreams.apply(this);
      this._reverseStreams = this._reverseStreams || {};
      return nativeStreams.map(stream => this._reverseStreams[stream.id]);
    };

  const origAddStream = window.RTCPeerConnection.prototype.addStream;
  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {
    this._streams = this._streams || {};
    this._reverseStreams = this._reverseStreams || {};

    stream.getTracks().forEach(track => {
      const alreadyExists = this.getSenders().find(s => s.track === track);
      if (alreadyExists) {
        throw new DOMException('Track already exists.',
            'InvalidAccessError');
      }
    });
    // Add identity mapping for consistency with addTrack.
    // Unless this is being used with a stream from addTrack.
    if (!this._reverseStreams[stream.id]) {
      const newStream = new window.MediaStream(stream.getTracks());
      this._streams[stream.id] = newStream;
      this._reverseStreams[newStream.id] = stream;
      stream = newStream;
    }
    origAddStream.apply(this, [stream]);
  };

  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;
  window.RTCPeerConnection.prototype.removeStream =
    function removeStream(stream) {
      this._streams = this._streams || {};
      this._reverseStreams = this._reverseStreams || {};

      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);
      delete this._reverseStreams[(this._streams[stream.id] ?
          this._streams[stream.id].id : stream.id)];
      delete this._streams[stream.id];
    };

  window.RTCPeerConnection.prototype.addTrack =
    function addTrack(track, stream) {
      if (this.signalingState === 'closed') {
        throw new DOMException(
          'The RTCPeerConnection\'s signalingState is \'closed\'.',
          'InvalidStateError');
      }
      const streams = [].slice.call(arguments, 1);
      if (streams.length !== 1 ||
          !streams[0].getTracks().find(t => t === track)) {
        // this is not fully correct but all we can manage without
        // [[associated MediaStreams]] internal slot.
        throw new DOMException(
          'The adapter.js addTrack polyfill only supports a single ' +
          ' stream which is associated with the specified track.',
          'NotSupportedError');
      }

      const alreadyExists = this.getSenders().find(s => s.track === track);
      if (alreadyExists) {
        throw new DOMException('Track already exists.',
            'InvalidAccessError');
      }

      this._streams = this._streams || {};
      this._reverseStreams = this._reverseStreams || {};
      const oldStream = this._streams[stream.id];
      if (oldStream) {
        // this is using odd Chrome behaviour, use with caution:
        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815
        // Note: we rely on the high-level addTrack/dtmf shim to
        // create the sender with a dtmf sender.
        oldStream.addTrack(track);

        // Trigger ONN async.
        Promise.resolve().then(() => {
          this.dispatchEvent(new Event('negotiationneeded'));
        });
      } else {
        const newStream = new window.MediaStream([track]);
        this._streams[stream.id] = newStream;
        this._reverseStreams[newStream.id] = stream;
        this.addStream(newStream);
      }
      return this.getSenders().find(s => s.track === track);
    };

  // replace the internal stream id with the external one and
  // vice versa.
  function replaceInternalStreamId(pc, description) {
    let sdp = description.sdp;
    Object.keys(pc._reverseStreams || []).forEach(internalId => {
      const externalStream = pc._reverseStreams[internalId];
      const internalStream = pc._streams[externalStream.id];
      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),
          externalStream.id);
    });
    return new RTCSessionDescription({
      type: description.type,
      sdp
    });
  }
  function replaceExternalStreamId(pc, description) {
    let sdp = description.sdp;
    Object.keys(pc._reverseStreams || []).forEach(internalId => {
      const externalStream = pc._reverseStreams[internalId];
      const internalStream = pc._streams[externalStream.id];
      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),
          internalStream.id);
    });
    return new RTCSessionDescription({
      type: description.type,
      sdp
    });
  }
  ['createOffer', 'createAnswer'].forEach(function(method) {
    const nativeMethod = window.RTCPeerConnection.prototype[method];
    const methodObj = {[method]() {
      const args = arguments;
      const isLegacyCall = arguments.length &&
          typeof arguments[0] === 'function';
      if (isLegacyCall) {
        return nativeMethod.apply(this, [
          (description) => {
            const desc = replaceInternalStreamId(this, description);
            args[0].apply(null, [desc]);
          },
          (err) => {
            if (args[1]) {
              args[1].apply(null, err);
            }
          }, arguments[2]
        ]);
      }
      return nativeMethod.apply(this, arguments)
      .then(description => replaceInternalStreamId(this, description));
    }};
    window.RTCPeerConnection.prototype[method] = methodObj[method];
  });

  const origSetLocalDescription =
      window.RTCPeerConnection.prototype.setLocalDescription;
  window.RTCPeerConnection.prototype.setLocalDescription =
    function setLocalDescription() {
      if (!arguments.length || !arguments[0].type) {
        return origSetLocalDescription.apply(this, arguments);
      }
      arguments[0] = replaceExternalStreamId(this, arguments[0]);
      return origSetLocalDescription.apply(this, arguments);
    };

  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier

  const origLocalDescription = Object.getOwnPropertyDescriptor(
      window.RTCPeerConnection.prototype, 'localDescription');
  Object.defineProperty(window.RTCPeerConnection.prototype,
      'localDescription', {
        get() {
          const description = origLocalDescription.get.apply(this);
          if (description.type === '') {
            return description;
          }
          return replaceInternalStreamId(this, description);
        }
      });

  window.RTCPeerConnection.prototype.removeTrack =
    function removeTrack(sender) {
      if (this.signalingState === 'closed') {
        throw new DOMException(
          'The RTCPeerConnection\'s signalingState is \'closed\'.',
          'InvalidStateError');
      }
      // We can not yet check for sender instanceof RTCRtpSender
      // since we shim RTPSender. So we check if sender._pc is set.
      if (!sender._pc) {
        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +
            'does not implement interface RTCRtpSender.', 'TypeError');
      }
      const isLocal = sender._pc === this;
      if (!isLocal) {
        throw new DOMException('Sender was not created by this connection.',
            'InvalidAccessError');
      }

      // Search for the native stream the senders track belongs to.
      this._streams = this._streams || {};
      let stream;
      Object.keys(this._streams).forEach(streamid => {
        const hasTrack = this._streams[streamid].getTracks()
          .find(track => sender.track === track);
        if (hasTrack) {
          stream = this._streams[streamid];
        }
      });

      if (stream) {
        if (stream.getTracks().length === 1) {
          // if this is the last track of the stream, remove the stream. This
          // takes care of any shimmed _senders.
          this.removeStream(this._reverseStreams[stream.id]);
        } else {
          // relying on the same odd chrome behaviour as above.
          stream.removeTrack(sender.track);
        }
        this.dispatchEvent(new Event('negotiationneeded'));
      }
    };
}

function shimPeerConnection(window, browserDetails) {
  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {
    // very basic support for old versions.
    window.RTCPeerConnection = window.webkitRTCPeerConnection;
  }
  if (!window.RTCPeerConnection) {
    return;
  }

  // shim implicit creation of RTCSessionDescription/RTCIceCandidate
  if (browserDetails.version < 53) {
    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']
        .forEach(function(method) {
          const nativeMethod = window.RTCPeerConnection.prototype[method];
          const methodObj = {[method]() {
            arguments[0] = new ((method === 'addIceCandidate') ?
                window.RTCIceCandidate :
                window.RTCSessionDescription)(arguments[0]);
            return nativeMethod.apply(this, arguments);
          }};
          window.RTCPeerConnection.prototype[method] = methodObj[method];
        });
  }
}

// Attempt to fix ONN in plan-b mode.
function fixNegotiationNeeded(window, browserDetails) {
  _utils_js__WEBPACK_IMPORTED_MODULE_0__["wrapPeerConnectionEvent"](window, 'negotiationneeded', e => {
    const pc = e.target;
    if (browserDetails.version < 72 || (pc.getConfiguration &&
        pc.getConfiguration().sdpSemantics === 'plan-b')) {
      if (pc.signalingState !== 'stable') {
        return;
      }
    }
    return e;
  });
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js":
/*!**********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js ***!
  \**********************************************************************/
/*! exports provided: shimGetDisplayMedia */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimGetDisplayMedia", function() { return shimGetDisplayMedia; });
/*
 *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */

function shimGetDisplayMedia(window, getSourceId) {
  if (window.navigator.mediaDevices &&
    'getDisplayMedia' in window.navigator.mediaDevices) {
    return;
  }
  if (!(window.navigator.mediaDevices)) {
    return;
  }
  // getSourceId is a function that returns a promise resolving with
  // the sourceId of the screen/window/tab to be shared.
  if (typeof getSourceId !== 'function') {
    console.error('shimGetDisplayMedia: getSourceId argument is not ' +
        'a function');
    return;
  }
  window.navigator.mediaDevices.getDisplayMedia =
    function getDisplayMedia(constraints) {
      return getSourceId(constraints)
        .then(sourceId => {
          const widthSpecified = constraints.video && constraints.video.width;
          const heightSpecified = constraints.video &&
            constraints.video.height;
          const frameRateSpecified = constraints.video &&
            constraints.video.frameRate;
          constraints.video = {
            mandatory: {
              chromeMediaSource: 'desktop',
              chromeMediaSourceId: sourceId,
              maxFrameRate: frameRateSpecified || 3
            }
          };
          if (widthSpecified) {
            constraints.video.mandatory.maxWidth = widthSpecified;
          }
          if (heightSpecified) {
            constraints.video.mandatory.maxHeight = heightSpecified;
          }
          return window.navigator.mediaDevices.getUserMedia(constraints);
        });
    };
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js":
/*!*******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js ***!
  \*******************************************************************/
/*! exports provided: shimGetUserMedia */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimGetUserMedia", function() { return shimGetUserMedia; });
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ "./node_modules/webrtc-adapter/src/js/utils.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */


const logging = _utils_js__WEBPACK_IMPORTED_MODULE_0__["log"];

function shimGetUserMedia(window, browserDetails) {
  const navigator = window && window.navigator;

  if (!navigator.mediaDevices) {
    return;
  }

  const constraintsToChrome_ = function(c) {
    if (typeof c !== 'object' || c.mandatory || c.optional) {
      return c;
    }
    const cc = {};
    Object.keys(c).forEach(key => {
      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {
        return;
      }
      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};
      if (r.exact !== undefined && typeof r.exact === 'number') {
        r.min = r.max = r.exact;
      }
      const oldname_ = function(prefix, name) {
        if (prefix) {
          return prefix + name.charAt(0).toUpperCase() + name.slice(1);
        }
        return (name === 'deviceId') ? 'sourceId' : name;
      };
      if (r.ideal !== undefined) {
        cc.optional = cc.optional || [];
        let oc = {};
        if (typeof r.ideal === 'number') {
          oc[oldname_('min', key)] = r.ideal;
          cc.optional.push(oc);
          oc = {};
          oc[oldname_('max', key)] = r.ideal;
          cc.optional.push(oc);
        } else {
          oc[oldname_('', key)] = r.ideal;
          cc.optional.push(oc);
        }
      }
      if (r.exact !== undefined && typeof r.exact !== 'number') {
        cc.mandatory = cc.mandatory || {};
        cc.mandatory[oldname_('', key)] = r.exact;
      } else {
        ['min', 'max'].forEach(mix => {
          if (r[mix] !== undefined) {
            cc.mandatory = cc.mandatory || {};
            cc.mandatory[oldname_(mix, key)] = r[mix];
          }
        });
      }
    });
    if (c.advanced) {
      cc.optional = (cc.optional || []).concat(c.advanced);
    }
    return cc;
  };

  const shimConstraints_ = function(constraints, func) {
    if (browserDetails.version >= 61) {
      return func(constraints);
    }
    constraints = JSON.parse(JSON.stringify(constraints));
    if (constraints && typeof constraints.audio === 'object') {
      const remap = function(obj, a, b) {
        if (a in obj && !(b in obj)) {
          obj[b] = obj[a];
          delete obj[a];
        }
      };
      constraints = JSON.parse(JSON.stringify(constraints));
      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');
      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');
      constraints.audio = constraintsToChrome_(constraints.audio);
    }
    if (constraints && typeof constraints.video === 'object') {
      // Shim facingMode for mobile & surface pro.
      let face = constraints.video.facingMode;
      face = face && ((typeof face === 'object') ? face : {ideal: face});
      const getSupportedFacingModeLies = browserDetails.version < 66;

      if ((face && (face.exact === 'user' || face.exact === 'environment' ||
                    face.ideal === 'user' || face.ideal === 'environment')) &&
          !(navigator.mediaDevices.getSupportedConstraints &&
            navigator.mediaDevices.getSupportedConstraints().facingMode &&
            !getSupportedFacingModeLies)) {
        delete constraints.video.facingMode;
        let matches;
        if (face.exact === 'environment' || face.ideal === 'environment') {
          matches = ['back', 'rear'];
        } else if (face.exact === 'user' || face.ideal === 'user') {
          matches = ['front'];
        }
        if (matches) {
          // Look for matches in label, or use last cam for back (typical).
          return navigator.mediaDevices.enumerateDevices()
          .then(devices => {
            devices = devices.filter(d => d.kind === 'videoinput');
            let dev = devices.find(d => matches.some(match =>
              d.label.toLowerCase().includes(match)));
            if (!dev && devices.length && matches.includes('back')) {
              dev = devices[devices.length - 1]; // more likely the back cam
            }
            if (dev) {
              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :
                                                        {ideal: dev.deviceId};
            }
            constraints.video = constraintsToChrome_(constraints.video);
            logging('chrome: ' + JSON.stringify(constraints));
            return func(constraints);
          });
        }
      }
      constraints.video = constraintsToChrome_(constraints.video);
    }
    logging('chrome: ' + JSON.stringify(constraints));
    return func(constraints);
  };

  const shimError_ = function(e) {
    if (browserDetails.version >= 64) {
      return e;
    }
    return {
      name: {
        PermissionDeniedError: 'NotAllowedError',
        PermissionDismissedError: 'NotAllowedError',
        InvalidStateError: 'NotAllowedError',
        DevicesNotFoundError: 'NotFoundError',
        ConstraintNotSatisfiedError: 'OverconstrainedError',
        TrackStartError: 'NotReadableError',
        MediaDeviceFailedDueToShutdown: 'NotAllowedError',
        MediaDeviceKillSwitchOn: 'NotAllowedError',
        TabCaptureError: 'AbortError',
        ScreenCaptureError: 'AbortError',
        DeviceCaptureError: 'AbortError'
      }[e.name] || e.name,
      message: e.message,
      constraint: e.constraint || e.constraintName,
      toString() {
        return this.name + (this.message && ': ') + this.message;
      }
    };
  };

  const getUserMedia_ = function(constraints, onSuccess, onError) {
    shimConstraints_(constraints, c => {
      navigator.webkitGetUserMedia(c, onSuccess, e => {
        if (onError) {
          onError(shimError_(e));
        }
      });
    });
  };
  navigator.getUserMedia = getUserMedia_.bind(navigator);

  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia
  // function which returns a Promise, it does not accept spec-style
  // constraints.
  if (navigator.mediaDevices.getUserMedia) {
    const origGetUserMedia = navigator.mediaDevices.getUserMedia.
        bind(navigator.mediaDevices);
    navigator.mediaDevices.getUserMedia = function(cs) {
      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {
        if (c.audio && !stream.getAudioTracks().length ||
            c.video && !stream.getVideoTracks().length) {
          stream.getTracks().forEach(track => {
            track.stop();
          });
          throw new DOMException('', 'NotFoundError');
        }
        return stream;
      }, e => Promise.reject(shimError_(e))));
    };
  }
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/common_shim.js":
/*!***********************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/common_shim.js ***!
  \***********************************************************/
/*! exports provided: shimRTCIceCandidate, shimMaxMessageSize, shimSendThrowTypeError, shimConnectionState, removeExtmapAllowMixed, shimAddIceCandidateNullOrEmpty */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimRTCIceCandidate", function() { return shimRTCIceCandidate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimMaxMessageSize", function() { return shimMaxMessageSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimSendThrowTypeError", function() { return shimSendThrowTypeError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimConnectionState", function() { return shimConnectionState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeExtmapAllowMixed", function() { return removeExtmapAllowMixed; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimAddIceCandidateNullOrEmpty", function() { return shimAddIceCandidateNullOrEmpty; });
/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sdp */ "./node_modules/sdp/sdp.js");
/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sdp__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/*
 *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */





function shimRTCIceCandidate(window) {
  // foundation is arbitrarily chosen as an indicator for full support for
  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface
  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in
      window.RTCIceCandidate.prototype)) {
    return;
  }

  const NativeRTCIceCandidate = window.RTCIceCandidate;
  window.RTCIceCandidate = function RTCIceCandidate(args) {
    // Remove the a= which shouldn't be part of the candidate string.
    if (typeof args === 'object' && args.candidate &&
        args.candidate.indexOf('a=') === 0) {
      args = JSON.parse(JSON.stringify(args));
      args.candidate = args.candidate.substr(2);
    }

    if (args.candidate && args.candidate.length) {
      // Augment the native candidate with the parsed fields.
      const nativeCandidate = new NativeRTCIceCandidate(args);
      const parsedCandidate = sdp__WEBPACK_IMPORTED_MODULE_0___default.a.parseCandidate(args.candidate);
      const augmentedCandidate = Object.assign(nativeCandidate,
          parsedCandidate);

      // Add a serializer that does not serialize the extra attributes.
      augmentedCandidate.toJSON = function toJSON() {
        return {
          candidate: augmentedCandidate.candidate,
          sdpMid: augmentedCandidate.sdpMid,
          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,
          usernameFragment: augmentedCandidate.usernameFragment,
        };
      };
      return augmentedCandidate;
    }
    return new NativeRTCIceCandidate(args);
  };
  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;

  // Hook up the augmented candidate in onicecandidate and
  // addEventListener('icecandidate', ...)
  _utils__WEBPACK_IMPORTED_MODULE_1__["wrapPeerConnectionEvent"](window, 'icecandidate', e => {
    if (e.candidate) {
      Object.defineProperty(e, 'candidate', {
        value: new window.RTCIceCandidate(e.candidate),
        writable: 'false'
      });
    }
    return e;
  });
}

function shimMaxMessageSize(window, browserDetails) {
  if (!window.RTCPeerConnection) {
    return;
  }

  if (!('sctp' in window.RTCPeerConnection.prototype)) {
    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {
      get() {
        return typeof this._sctp === 'undefined' ? null : this._sctp;
      }
    });
  }

  const sctpInDescription = function(description) {
    if (!description || !description.sdp) {
      return false;
    }
    const sections = sdp__WEBPACK_IMPORTED_MODULE_0___default.a.splitSections(description.sdp);
    sections.shift();
    return sections.some(mediaSection => {
      const mLine = sdp__WEBPACK_IMPORTED_MODULE_0___default.a.parseMLine(mediaSection);
      return mLine && mLine.kind === 'application'
          && mLine.protocol.indexOf('SCTP') !== -1;
    });
  };

  const getRemoteFirefoxVersion = function(description) {
    // TODO: Is there a better solution for detecting Firefox?
    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);
    if (match === null || match.length < 2) {
      return -1;
    }
    const version = parseInt(match[1], 10);
    // Test for NaN (yes, this is ugly)
    return version !== version ? -1 : version;
  };

  const getCanSendMaxMessageSize = function(remoteIsFirefox) {
    // Every implementation we know can send at least 64 KiB.
    // Note: Although Chrome is technically able to send up to 256 KiB, the
    //       data does not reach the other peer reliably.
    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419
    let canSendMaxMessageSize = 65536;
    if (browserDetails.browser === 'firefox') {
      if (browserDetails.version < 57) {
        if (remoteIsFirefox === -1) {
          // FF < 57 will send in 16 KiB chunks using the deprecated PPID
          // fragmentation.
          canSendMaxMessageSize = 16384;
        } else {
          // However, other FF (and RAWRTC) can reassemble PPID-fragmented
          // messages. Thus, supporting ~2 GiB when sending.
          canSendMaxMessageSize = 2147483637;
        }
      } else if (browserDetails.version < 60) {
        // Currently, all FF >= 57 will reset the remote maximum message size
        // to the default value when a data channel is created at a later
        // stage. :(
        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831
        canSendMaxMessageSize =
          browserDetails.version === 57 ? 65535 : 65536;
      } else {
        // FF >= 60 supports sending ~2 GiB
        canSendMaxMessageSize = 2147483637;
      }
    }
    return canSendMaxMessageSize;
  };

  const getMaxMessageSize = function(description, remoteIsFirefox) {
    // Note: 65536 bytes is the default value from the SDP spec. Also,
    //       every implementation we know supports receiving 65536 bytes.
    let maxMessageSize = 65536;

    // FF 57 has a slightly incorrect default remote max message size, so
    // we need to adjust it here to avoid a failure when sending.
    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697
    if (browserDetails.browser === 'firefox'
         && browserDetails.version === 57) {
      maxMessageSize = 65535;
    }

    const match = sdp__WEBPACK_IMPORTED_MODULE_0___default.a.matchPrefix(description.sdp,
      'a=max-message-size:');
    if (match.length > 0) {
      maxMessageSize = parseInt(match[0].substr(19), 10);
    } else if (browserDetails.browser === 'firefox' &&
                remoteIsFirefox !== -1) {
      // If the maximum message size is not present in the remote SDP and
      // both local and remote are Firefox, the remote peer can receive
      // ~2 GiB.
      maxMessageSize = 2147483637;
    }
    return maxMessageSize;
  };

  const origSetRemoteDescription =
      window.RTCPeerConnection.prototype.setRemoteDescription;
  window.RTCPeerConnection.prototype.setRemoteDescription =
    function setRemoteDescription() {
      this._sctp = null;
      // Chrome decided to not expose .sctp in plan-b mode.
      // As usual, adapter.js has to do an 'ugly worakaround'
      // to cover up the mess.
      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {
        const {sdpSemantics} = this.getConfiguration();
        if (sdpSemantics === 'plan-b') {
          Object.defineProperty(this, 'sctp', {
            get() {
              return typeof this._sctp === 'undefined' ? null : this._sctp;
            },
            enumerable: true,
            configurable: true,
          });
        }
      }

      if (sctpInDescription(arguments[0])) {
        // Check if the remote is FF.
        const isFirefox = getRemoteFirefoxVersion(arguments[0]);

        // Get the maximum message size the local peer is capable of sending
        const canSendMMS = getCanSendMaxMessageSize(isFirefox);

        // Get the maximum message size of the remote peer.
        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);

        // Determine final maximum message size
        let maxMessageSize;
        if (canSendMMS === 0 && remoteMMS === 0) {
          maxMessageSize = Number.POSITIVE_INFINITY;
        } else if (canSendMMS === 0 || remoteMMS === 0) {
          maxMessageSize = Math.max(canSendMMS, remoteMMS);
        } else {
          maxMessageSize = Math.min(canSendMMS, remoteMMS);
        }

        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'
        // attribute.
        const sctp = {};
        Object.defineProperty(sctp, 'maxMessageSize', {
          get() {
            return maxMessageSize;
          }
        });
        this._sctp = sctp;
      }

      return origSetRemoteDescription.apply(this, arguments);
    };
}

function shimSendThrowTypeError(window) {
  if (!(window.RTCPeerConnection &&
      'createDataChannel' in window.RTCPeerConnection.prototype)) {
    return;
  }

  // Note: Although Firefox >= 57 has a native implementation, the maximum
  //       message size can be reset for all data channels at a later stage.
  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831

  function wrapDcSend(dc, pc) {
    const origDataChannelSend = dc.send;
    dc.send = function send() {
      const data = arguments[0];
      const length = data.length || data.size || data.byteLength;
      if (dc.readyState === 'open' &&
          pc.sctp && length > pc.sctp.maxMessageSize) {
        throw new TypeError('Message too large (can send a maximum of ' +
          pc.sctp.maxMessageSize + ' bytes)');
      }
      return origDataChannelSend.apply(dc, arguments);
    };
  }
  const origCreateDataChannel =
    window.RTCPeerConnection.prototype.createDataChannel;
  window.RTCPeerConnection.prototype.createDataChannel =
    function createDataChannel() {
      const dataChannel = origCreateDataChannel.apply(this, arguments);
      wrapDcSend(dataChannel, this);
      return dataChannel;
    };
  _utils__WEBPACK_IMPORTED_MODULE_1__["wrapPeerConnectionEvent"](window, 'datachannel', e => {
    wrapDcSend(e.channel, e.target);
    return e;
  });
}


/* shims RTCConnectionState by pretending it is the same as iceConnectionState.
 * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12
 * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect
 * since DTLS failures would be hidden. See
 * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827
 * for the Firefox tracking bug.
 */
function shimConnectionState(window) {
  if (!window.RTCPeerConnection ||
      'connectionState' in window.RTCPeerConnection.prototype) {
    return;
  }
  const proto = window.RTCPeerConnection.prototype;
  Object.defineProperty(proto, 'connectionState', {
    get() {
      return {
        completed: 'connected',
        checking: 'connecting'
      }[this.iceConnectionState] || this.iceConnectionState;
    },
    enumerable: true,
    configurable: true
  });
  Object.defineProperty(proto, 'onconnectionstatechange', {
    get() {
      return this._onconnectionstatechange || null;
    },
    set(cb) {
      if (this._onconnectionstatechange) {
        this.removeEventListener('connectionstatechange',
            this._onconnectionstatechange);
        delete this._onconnectionstatechange;
      }
      if (cb) {
        this.addEventListener('connectionstatechange',
            this._onconnectionstatechange = cb);
      }
    },
    enumerable: true,
    configurable: true
  });

  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {
    const origMethod = proto[method];
    proto[method] = function() {
      if (!this._connectionstatechangepoly) {
        this._connectionstatechangepoly = e => {
          const pc = e.target;
          if (pc._lastConnectionState !== pc.connectionState) {
            pc._lastConnectionState = pc.connectionState;
            const newEvent = new Event('connectionstatechange', e);
            pc.dispatchEvent(newEvent);
          }
          return e;
        };
        this.addEventListener('iceconnectionstatechange',
          this._connectionstatechangepoly);
      }
      return origMethod.apply(this, arguments);
    };
  });
}

function removeExtmapAllowMixed(window, browserDetails) {
  /* remove a=extmap-allow-mixed for webrtc.org < M71 */
  if (!window.RTCPeerConnection) {
    return;
  }
  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {
    return;
  }
  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {
    return;
  }
  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;
  window.RTCPeerConnection.prototype.setRemoteDescription =
  function setRemoteDescription(desc) {
    if (desc && desc.sdp && desc.sdp.indexOf('\na=extmap-allow-mixed') !== -1) {
      const sdp = desc.sdp.split('\n').filter((line) => {
        return line.trim() !== 'a=extmap-allow-mixed';
      }).join('\n');
      // Safari enforces read-only-ness of RTCSessionDescription fields.
      if (window.RTCSessionDescription &&
          desc instanceof window.RTCSessionDescription) {
        arguments[0] = new window.RTCSessionDescription({
          type: desc.type,
          sdp,
        });
      } else {
        desc.sdp = sdp;
      }
    }
    return nativeSRD.apply(this, arguments);
  };
}

function shimAddIceCandidateNullOrEmpty(window, browserDetails) {
  // Support for addIceCandidate(null or undefined)
  // as well as addIceCandidate({candidate: "", ...})
  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582
  // Note: must be called before other polyfills which change the signature.
  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {
    return;
  }
  const nativeAddIceCandidate =
      window.RTCPeerConnection.prototype.addIceCandidate;
  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {
    return;
  }
  window.RTCPeerConnection.prototype.addIceCandidate =
    function addIceCandidate() {
      if (!arguments[0]) {
        if (arguments[1]) {
          arguments[1].apply(null);
        }
        return Promise.resolve();
      }
      // Firefox 68+ emits and processes {candidate: "", ...}, ignore
      // in older versions.
      // Native support for ignoring exists for Chrome M77+.
      // Safari ignores as well, exact version unknown but works in the same
      // version that also ignores addIceCandidate(null).
      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)
           || (browserDetails.browser === 'firefox'
               && browserDetails.version < 68)
           || (browserDetails.browser === 'safari'))
          && arguments[0] && arguments[0].candidate === '') {
        return Promise.resolve();
      }
      return nativeAddIceCandidate.apply(this, arguments);
    };
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/edge/edge_shim.js":
/*!**************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/edge/edge_shim.js ***!
  \**************************************************************/
/*! exports provided: shimGetUserMedia, shimGetDisplayMedia, shimPeerConnection, shimReplaceTrack */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimPeerConnection", function() { return shimPeerConnection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimReplaceTrack", function() { return shimReplaceTrack; });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/* harmony import */ var _filtericeservers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./filtericeservers */ "./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js");
/* harmony import */ var rtcpeerconnection_shim__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rtcpeerconnection-shim */ "./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js");
/* harmony import */ var rtcpeerconnection_shim__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(rtcpeerconnection_shim__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _getusermedia__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getusermedia */ "./node_modules/webrtc-adapter/src/js/edge/getusermedia.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "shimGetUserMedia", function() { return _getusermedia__WEBPACK_IMPORTED_MODULE_3__["shimGetUserMedia"]; });

/* harmony import */ var _getdisplaymedia__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./getdisplaymedia */ "./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "shimGetDisplayMedia", function() { return _getdisplaymedia__WEBPACK_IMPORTED_MODULE_4__["shimGetDisplayMedia"]; });

/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */









function shimPeerConnection(window, browserDetails) {
  if (window.RTCIceGatherer) {
    if (!window.RTCIceCandidate) {
      window.RTCIceCandidate = function RTCIceCandidate(args) {
        return args;
      };
    }
    if (!window.RTCSessionDescription) {
      window.RTCSessionDescription = function RTCSessionDescription(args) {
        return args;
      };
    }
    // this adds an additional event listener to MediaStrackTrack that signals
    // when a tracks enabled property was changed. Workaround for a bug in
    // addStream, see below. No longer required in 15025+
    if (browserDetails.version < 15025) {
      const origMSTEnabled = Object.getOwnPropertyDescriptor(
          window.MediaStreamTrack.prototype, 'enabled');
      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {
        set(value) {
          origMSTEnabled.set.call(this, value);
          const ev = new Event('enabled');
          ev.enabled = value;
          this.dispatchEvent(ev);
        }
      });
    }
  }

  // ORTC defines the DTMF sender a bit different.
  // https://github.com/w3c/ortc/issues/714
  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {
    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {
      get() {
        if (this._dtmf === undefined) {
          if (this.track.kind === 'audio') {
            this._dtmf = new window.RTCDtmfSender(this);
          } else if (this.track.kind === 'video') {
            this._dtmf = null;
          }
        }
        return this._dtmf;
      }
    });
  }
  // Edge currently only implements the RTCDtmfSender, not the
  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*
  if (window.RTCDtmfSender && !window.RTCDTMFSender) {
    window.RTCDTMFSender = window.RTCDtmfSender;
  }

  const RTCPeerConnectionShim = rtcpeerconnection_shim__WEBPACK_IMPORTED_MODULE_2___default()(window,
      browserDetails.version);
  window.RTCPeerConnection = function RTCPeerConnection(config) {
    if (config && config.iceServers) {
      config.iceServers = Object(_filtericeservers__WEBPACK_IMPORTED_MODULE_1__["filterIceServers"])(config.iceServers,
        browserDetails.version);
      _utils__WEBPACK_IMPORTED_MODULE_0__["log"]('ICE servers after filtering:', config.iceServers);
    }
    return new RTCPeerConnectionShim(config);
  };
  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;
}

function shimReplaceTrack(window) {
  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614
  if (window.RTCRtpSender &&
      !('replaceTrack' in window.RTCRtpSender.prototype)) {
    window.RTCRtpSender.prototype.replaceTrack =
        window.RTCRtpSender.prototype.setTrack;
  }
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js":
/*!*********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js ***!
  \*********************************************************************/
/*! exports provided: filterIceServers */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "filterIceServers", function() { return filterIceServers; });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/*
 *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */



// Edge does not like
// 1) stun: filtered after 14393 unless ?transport=udp is present
// 2) turn: that does not have all of turn:host:port?transport=udp
// 3) turn: with ipv6 addresses
// 4) turn: occurring muliple times
function filterIceServers(iceServers, edgeVersion) {
  let hasTurn = false;
  iceServers = JSON.parse(JSON.stringify(iceServers));
  return iceServers.filter(server => {
    if (server && (server.urls || server.url)) {
      let urls = server.urls || server.url;
      if (server.url && !server.urls) {
        _utils__WEBPACK_IMPORTED_MODULE_0__["deprecated"]('RTCIceServer.url', 'RTCIceServer.urls');
      }
      const isString = typeof urls === 'string';
      if (isString) {
        urls = [urls];
      }
      urls = urls.filter(url => {
        // filter STUN unconditionally.
        if (url.indexOf('stun:') === 0) {
          return false;
        }

        const validTurn = url.startsWith('turn') &&
            !url.startsWith('turn:[') &&
            url.includes('transport=udp');
        if (validTurn && !hasTurn) {
          hasTurn = true;
          return true;
        }
        return validTurn && !hasTurn;
      });

      delete server.url;
      server.urls = isString ? urls[0] : urls;
      return !!urls.length;
    }
  });
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js":
/*!********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js ***!
  \********************************************************************/
/*! exports provided: shimGetDisplayMedia */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimGetDisplayMedia", function() { return shimGetDisplayMedia; });
/*
 *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
 /* eslint-env node */


function shimGetDisplayMedia(window) {
  if (!('getDisplayMedia' in window.navigator)) {
    return;
  }
  if (!(window.navigator.mediaDevices)) {
    return;
  }
  if (window.navigator.mediaDevices &&
    'getDisplayMedia' in window.navigator.mediaDevices) {
    return;
  }
  window.navigator.mediaDevices.getDisplayMedia =
    window.navigator.getDisplayMedia.bind(window.navigator);
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/edge/getusermedia.js":
/*!*****************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/edge/getusermedia.js ***!
  \*****************************************************************/
/*! exports provided: shimGetUserMedia */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimGetUserMedia", function() { return shimGetUserMedia; });
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
 /* eslint-env node */


function shimGetUserMedia(window) {
  const navigator = window && window.navigator;

  const shimError_ = function(e) {
    return {
      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,
      message: e.message,
      constraint: e.constraint,
      toString() {
        return this.name;
      }
    };
  };

  // getUserMedia error shim.
  const origGetUserMedia = navigator.mediaDevices.getUserMedia.
      bind(navigator.mediaDevices);
  navigator.mediaDevices.getUserMedia = function(c) {
    return origGetUserMedia(c).catch(e => Promise.reject(shimError_(e)));
  };
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js":
/*!********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js ***!
  \********************************************************************/
/*! exports provided: shimGetUserMedia, shimGetDisplayMedia, shimOnTrack, shimPeerConnection, shimSenderGetStats, shimReceiverGetStats, shimRemoveStream, shimRTCDataChannel, shimAddTransceiver, shimGetParameters, shimCreateOffer, shimCreateAnswer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimOnTrack", function() { return shimOnTrack; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimPeerConnection", function() { return shimPeerConnection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimSenderGetStats", function() { return shimSenderGetStats; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimReceiverGetStats", function() { return shimReceiverGetStats; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimRemoveStream", function() { return shimRemoveStream; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimRTCDataChannel", function() { return shimRTCDataChannel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimAddTransceiver", function() { return shimAddTransceiver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimGetParameters", function() { return shimGetParameters; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimCreateOffer", function() { return shimCreateOffer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimCreateAnswer", function() { return shimCreateAnswer; });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/* harmony import */ var _getusermedia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getusermedia */ "./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "shimGetUserMedia", function() { return _getusermedia__WEBPACK_IMPORTED_MODULE_1__["shimGetUserMedia"]; });

/* harmony import */ var _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getdisplaymedia */ "./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "shimGetDisplayMedia", function() { return _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__["shimGetDisplayMedia"]; });

/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */






function shimOnTrack(window) {
  if (typeof window === 'object' && window.RTCTrackEvent &&
      ('receiver' in window.RTCTrackEvent.prototype) &&
      !('transceiver' in window.RTCTrackEvent.prototype)) {
    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {
      get() {
        return {receiver: this.receiver};
      }
    });
  }
}

function shimPeerConnection(window, browserDetails) {
  if (typeof window !== 'object' ||
      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {
    return; // probably media.peerconnection.enabled=false in about:config
  }
  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {
    // very basic support for old versions.
    window.RTCPeerConnection = window.mozRTCPeerConnection;
  }

  if (browserDetails.version < 53) {
    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.
    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']
        .forEach(function(method) {
          const nativeMethod = window.RTCPeerConnection.prototype[method];
          const methodObj = {[method]() {
            arguments[0] = new ((method === 'addIceCandidate') ?
                window.RTCIceCandidate :
                window.RTCSessionDescription)(arguments[0]);
            return nativeMethod.apply(this, arguments);
          }};
          window.RTCPeerConnection.prototype[method] = methodObj[method];
        });
  }

  const modernStatsTypes = {
    inboundrtp: 'inbound-rtp',
    outboundrtp: 'outbound-rtp',
    candidatepair: 'candidate-pair',
    localcandidate: 'local-candidate',
    remotecandidate: 'remote-candidate'
  };

  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;
  window.RTCPeerConnection.prototype.getStats = function getStats() {
    const [selector, onSucc, onErr] = arguments;
    return nativeGetStats.apply(this, [selector || null])
      .then(stats => {
        if (browserDetails.version < 53 && !onSucc) {
          // Shim only promise getStats with spec-hyphens in type names
          // Leave callback version alone; misc old uses of forEach before Map
          try {
            stats.forEach(stat => {
              stat.type = modernStatsTypes[stat.type] || stat.type;
            });
          } catch (e) {
            if (e.name !== 'TypeError') {
              throw e;
            }
            // Avoid TypeError: "type" is read-only, in old versions. 34-43ish
            stats.forEach((stat, i) => {
              stats.set(i, Object.assign({}, stat, {
                type: modernStatsTypes[stat.type] || stat.type
              }));
            });
          }
        }
        return stats;
      })
      .then(onSucc, onErr);
  };
}

function shimSenderGetStats(window) {
  if (!(typeof window === 'object' && window.RTCPeerConnection &&
      window.RTCRtpSender)) {
    return;
  }
  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {
    return;
  }
  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;
  if (origGetSenders) {
    window.RTCPeerConnection.prototype.getSenders = function getSenders() {
      const senders = origGetSenders.apply(this, []);
      senders.forEach(sender => sender._pc = this);
      return senders;
    };
  }

  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;
  if (origAddTrack) {
    window.RTCPeerConnection.prototype.addTrack = function addTrack() {
      const sender = origAddTrack.apply(this, arguments);
      sender._pc = this;
      return sender;
    };
  }
  window.RTCRtpSender.prototype.getStats = function getStats() {
    return this.track ? this._pc.getStats(this.track) :
        Promise.resolve(new Map());
  };
}

function shimReceiverGetStats(window) {
  if (!(typeof window === 'object' && window.RTCPeerConnection &&
      window.RTCRtpSender)) {
    return;
  }
  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {
    return;
  }
  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;
  if (origGetReceivers) {
    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {
      const receivers = origGetReceivers.apply(this, []);
      receivers.forEach(receiver => receiver._pc = this);
      return receivers;
    };
  }
  _utils__WEBPACK_IMPORTED_MODULE_0__["wrapPeerConnectionEvent"](window, 'track', e => {
    e.receiver._pc = e.srcElement;
    return e;
  });
  window.RTCRtpReceiver.prototype.getStats = function getStats() {
    return this._pc.getStats(this.track);
  };
}

function shimRemoveStream(window) {
  if (!window.RTCPeerConnection ||
      'removeStream' in window.RTCPeerConnection.prototype) {
    return;
  }
  window.RTCPeerConnection.prototype.removeStream =
    function removeStream(stream) {
      _utils__WEBPACK_IMPORTED_MODULE_0__["deprecated"]('removeStream', 'removeTrack');
      this.getSenders().forEach(sender => {
        if (sender.track && stream.getTracks().includes(sender.track)) {
          this.removeTrack(sender);
        }
      });
    };
}

function shimRTCDataChannel(window) {
  // rename DataChannel to RTCDataChannel (native fix in FF60):
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851
  if (window.DataChannel && !window.RTCDataChannel) {
    window.RTCDataChannel = window.DataChannel;
  }
}

function shimAddTransceiver(window) {
  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647
  // Firefox ignores the init sendEncodings options passed to addTransceiver
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918
  if (!(typeof window === 'object' && window.RTCPeerConnection)) {
    return;
  }
  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;
  if (origAddTransceiver) {
    window.RTCPeerConnection.prototype.addTransceiver =
      function addTransceiver() {
        this.setParametersPromises = [];
        const initParameters = arguments[1];
        const shouldPerformCheck = initParameters &&
                                  'sendEncodings' in initParameters;
        if (shouldPerformCheck) {
          // If sendEncodings params are provided, validate grammar
          initParameters.sendEncodings.forEach((encodingParam) => {
            if ('rid' in encodingParam) {
              const ridRegex = /^[a-z0-9]{0,16}$/i;
              if (!ridRegex.test(encodingParam.rid)) {
                throw new TypeError('Invalid RID value provided.');
              }
            }
            if ('scaleResolutionDownBy' in encodingParam) {
              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {
                throw new RangeError('scale_resolution_down_by must be >= 1.0');
              }
            }
            if ('maxFramerate' in encodingParam) {
              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {
                throw new RangeError('max_framerate must be >= 0.0');
              }
            }
          });
        }
        const transceiver = origAddTransceiver.apply(this, arguments);
        if (shouldPerformCheck) {
          // Check if the init options were applied. If not we do this in an
          // asynchronous way and save the promise reference in a global object.
          // This is an ugly hack, but at the same time is way more robust than
          // checking the sender parameters before and after the createOffer
          // Also note that after the createoffer we are not 100% sure that
          // the params were asynchronously applied so we might miss the
          // opportunity to recreate offer.
          const {sender} = transceiver;
          const params = sender.getParameters();
          if (!('encodings' in params) ||
              // Avoid being fooled by patched getParameters() below.
              (params.encodings.length === 1 &&
               Object.keys(params.encodings[0]).length === 0)) {
            params.encodings = initParameters.sendEncodings;
            sender.sendEncodings = initParameters.sendEncodings;
            this.setParametersPromises.push(sender.setParameters(params)
              .then(() => {
                delete sender.sendEncodings;
              }).catch(() => {
                delete sender.sendEncodings;
              })
            );
          }
        }
        return transceiver;
      };
  }
}

function shimGetParameters(window) {
  if (!(typeof window === 'object' && window.RTCRtpSender)) {
    return;
  }
  const origGetParameters = window.RTCRtpSender.prototype.getParameters;
  if (origGetParameters) {
    window.RTCRtpSender.prototype.getParameters =
      function getParameters() {
        const params = origGetParameters.apply(this, arguments);
        if (!('encodings' in params)) {
          params.encodings = [].concat(this.sendEncodings || [{}]);
        }
        return params;
      };
  }
}

function shimCreateOffer(window) {
  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647
  // Firefox ignores the init sendEncodings options passed to addTransceiver
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918
  if (!(typeof window === 'object' && window.RTCPeerConnection)) {
    return;
  }
  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;
  window.RTCPeerConnection.prototype.createOffer = function createOffer() {
    if (this.setParametersPromises && this.setParametersPromises.length) {
      return Promise.all(this.setParametersPromises)
      .then(() => {
        return origCreateOffer.apply(this, arguments);
      })
      .finally(() => {
        this.setParametersPromises = [];
      });
    }
    return origCreateOffer.apply(this, arguments);
  };
}

function shimCreateAnswer(window) {
  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647
  // Firefox ignores the init sendEncodings options passed to addTransceiver
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918
  if (!(typeof window === 'object' && window.RTCPeerConnection)) {
    return;
  }
  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;
  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {
    if (this.setParametersPromises && this.setParametersPromises.length) {
      return Promise.all(this.setParametersPromises)
      .then(() => {
        return origCreateAnswer.apply(this, arguments);
      })
      .finally(() => {
        this.setParametersPromises = [];
      });
    }
    return origCreateAnswer.apply(this, arguments);
  };
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js":
/*!***********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js ***!
  \***********************************************************************/
/*! exports provided: shimGetDisplayMedia */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimGetDisplayMedia", function() { return shimGetDisplayMedia; });
/*
 *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */


function shimGetDisplayMedia(window, preferredMediaSource) {
  if (window.navigator.mediaDevices &&
    'getDisplayMedia' in window.navigator.mediaDevices) {
    return;
  }
  if (!(window.navigator.mediaDevices)) {
    return;
  }
  window.navigator.mediaDevices.getDisplayMedia =
    function getDisplayMedia(constraints) {
      if (!(constraints && constraints.video)) {
        const err = new DOMException('getDisplayMedia without video ' +
            'constraints is undefined');
        err.name = 'NotFoundError';
        // from https://heycam.github.io/webidl/#idl-DOMException-error-names
        err.code = 8;
        return Promise.reject(err);
      }
      if (constraints.video === true) {
        constraints.video = {mediaSource: preferredMediaSource};
      } else {
        constraints.video.mediaSource = preferredMediaSource;
      }
      return window.navigator.mediaDevices.getUserMedia(constraints);
    };
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js":
/*!********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js ***!
  \********************************************************************/
/*! exports provided: shimGetUserMedia */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimGetUserMedia", function() { return shimGetUserMedia; });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
/* eslint-env node */




function shimGetUserMedia(window, browserDetails) {
  const navigator = window && window.navigator;
  const MediaStreamTrack = window && window.MediaStreamTrack;

  navigator.getUserMedia = function(constraints, onSuccess, onError) {
    // Replace Firefox 44+'s deprecation warning with unprefixed version.
    _utils__WEBPACK_IMPORTED_MODULE_0__["deprecated"]('navigator.getUserMedia',
        'navigator.mediaDevices.getUserMedia');
    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);
  };

  if (!(browserDetails.version > 55 &&
      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {
    const remap = function(obj, a, b) {
      if (a in obj && !(b in obj)) {
        obj[b] = obj[a];
        delete obj[a];
      }
    };

    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.
        bind(navigator.mediaDevices);
    navigator.mediaDevices.getUserMedia = function(c) {
      if (typeof c === 'object' && typeof c.audio === 'object') {
        c = JSON.parse(JSON.stringify(c));
        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');
        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');
      }
      return nativeGetUserMedia(c);
    };

    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {
      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;
      MediaStreamTrack.prototype.getSettings = function() {
        const obj = nativeGetSettings.apply(this, arguments);
        remap(obj, 'mozAutoGainControl', 'autoGainControl');
        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');
        return obj;
      };
    }

    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {
      const nativeApplyConstraints =
        MediaStreamTrack.prototype.applyConstraints;
      MediaStreamTrack.prototype.applyConstraints = function(c) {
        if (this.kind === 'audio' && typeof c === 'object') {
          c = JSON.parse(JSON.stringify(c));
          remap(c, 'autoGainControl', 'mozAutoGainControl');
          remap(c, 'noiseSuppression', 'mozNoiseSuppression');
        }
        return nativeApplyConstraints.apply(this, [c]);
      };
    }
  }
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/safari/safari_shim.js":
/*!******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/safari/safari_shim.js ***!
  \******************************************************************/
/*! exports provided: shimLocalStreamsAPI, shimRemoteStreamsAPI, shimCallbacksAPI, shimGetUserMedia, shimConstraints, shimRTCIceServerUrls, shimTrackEventTransceiver, shimCreateOfferLegacy, shimAudioContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimLocalStreamsAPI", function() { return shimLocalStreamsAPI; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimRemoteStreamsAPI", function() { return shimRemoteStreamsAPI; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimCallbacksAPI", function() { return shimCallbacksAPI; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimGetUserMedia", function() { return shimGetUserMedia; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimConstraints", function() { return shimConstraints; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimRTCIceServerUrls", function() { return shimRTCIceServerUrls; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimTrackEventTransceiver", function() { return shimTrackEventTransceiver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimCreateOfferLegacy", function() { return shimCreateOfferLegacy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shimAudioContext", function() { return shimAudioContext; });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./node_modules/webrtc-adapter/src/js/utils.js");
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */



function shimLocalStreamsAPI(window) {
  if (typeof window !== 'object' || !window.RTCPeerConnection) {
    return;
  }
  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {
    window.RTCPeerConnection.prototype.getLocalStreams =
      function getLocalStreams() {
        if (!this._localStreams) {
          this._localStreams = [];
        }
        return this._localStreams;
      };
  }
  if (!('addStream' in window.RTCPeerConnection.prototype)) {
    const _addTrack = window.RTCPeerConnection.prototype.addTrack;
    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {
      if (!this._localStreams) {
        this._localStreams = [];
      }
      if (!this._localStreams.includes(stream)) {
        this._localStreams.push(stream);
      }
      // Try to emulate Chrome's behaviour of adding in audio-video order.
      // Safari orders by track id.
      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,
        stream));
      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,
        stream));
    };

    window.RTCPeerConnection.prototype.addTrack =
      function addTrack(track, ...streams) {
        if (streams) {
          streams.forEach((stream) => {
            if (!this._localStreams) {
              this._localStreams = [stream];
            } else if (!this._localStreams.includes(stream)) {
              this._localStreams.push(stream);
            }
          });
        }
        return _addTrack.apply(this, arguments);
      };
  }
  if (!('removeStream' in window.RTCPeerConnection.prototype)) {
    window.RTCPeerConnection.prototype.removeStream =
      function removeStream(stream) {
        if (!this._localStreams) {
          this._localStreams = [];
        }
        const index = this._localStreams.indexOf(stream);
        if (index === -1) {
          return;
        }
        this._localStreams.splice(index, 1);
        const tracks = stream.getTracks();
        this.getSenders().forEach(sender => {
          if (tracks.includes(sender.track)) {
            this.removeTrack(sender);
          }
        });
      };
  }
}

function shimRemoteStreamsAPI(window) {
  if (typeof window !== 'object' || !window.RTCPeerConnection) {
    return;
  }
  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {
    window.RTCPeerConnection.prototype.getRemoteStreams =
      function getRemoteStreams() {
        return this._remoteStreams ? this._remoteStreams : [];
      };
  }
  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {
    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {
      get() {
        return this._onaddstream;
      },
      set(f) {
        if (this._onaddstream) {
          this.removeEventListener('addstream', this._onaddstream);
          this.removeEventListener('track', this._onaddstreampoly);
        }
        this.addEventListener('addstream', this._onaddstream = f);
        this.addEventListener('track', this._onaddstreampoly = (e) => {
          e.streams.forEach(stream => {
            if (!this._remoteStreams) {
              this._remoteStreams = [];
            }
            if (this._remoteStreams.includes(stream)) {
              return;
            }
            this._remoteStreams.push(stream);
            const event = new Event('addstream');
            event.stream = stream;
            this.dispatchEvent(event);
          });
        });
      }
    });
    const origSetRemoteDescription =
      window.RTCPeerConnection.prototype.setRemoteDescription;
    window.RTCPeerConnection.prototype.setRemoteDescription =
      function setRemoteDescription() {
        const pc = this;
        if (!this._onaddstreampoly) {
          this.addEventListener('track', this._onaddstreampoly = function(e) {
            e.streams.forEach(stream => {
              if (!pc._remoteStreams) {
                pc._remoteStreams = [];
              }
              if (pc._remoteStreams.indexOf(stream) >= 0) {
                return;
              }
              pc._remoteStreams.push(stream);
              const event = new Event('addstream');
              event.stream = stream;
              pc.dispatchEvent(event);
            });
          });
        }
        return origSetRemoteDescription.apply(pc, arguments);
      };
  }
}

function shimCallbacksAPI(window) {
  if (typeof window !== 'object' || !window.RTCPeerConnection) {
    return;
  }
  const prototype = window.RTCPeerConnection.prototype;
  const origCreateOffer = prototype.createOffer;
  const origCreateAnswer = prototype.createAnswer;
  const setLocalDescription = prototype.setLocalDescription;
  const setRemoteDescription = prototype.setRemoteDescription;
  const addIceCandidate = prototype.addIceCandidate;

  prototype.createOffer =
    function createOffer(successCallback, failureCallback) {
      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];
      const promise = origCreateOffer.apply(this, [options]);
      if (!failureCallback) {
        return promise;
      }
      promise.then(successCallback, failureCallback);
      return Promise.resolve();
    };

  prototype.createAnswer =
    function createAnswer(successCallback, failureCallback) {
      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];
      const promise = origCreateAnswer.apply(this, [options]);
      if (!failureCallback) {
        return promise;
      }
      promise.then(successCallback, failureCallback);
      return Promise.resolve();
    };

  let withCallback = function(description, successCallback, failureCallback) {
    const promise = setLocalDescription.apply(this, [description]);
    if (!failureCallback) {
      return promise;
    }
    promise.then(successCallback, failureCallback);
    return Promise.resolve();
  };
  prototype.setLocalDescription = withCallback;

  withCallback = function(description, successCallback, failureCallback) {
    const promise = setRemoteDescription.apply(this, [description]);
    if (!failureCallback) {
      return promise;
    }
    promise.then(successCallback, failureCallback);
    return Promise.resolve();
  };
  prototype.setRemoteDescription = withCallback;

  withCallback = function(candidate, successCallback, failureCallback) {
    const promise = addIceCandidate.apply(this, [candidate]);
    if (!failureCallback) {
      return promise;
    }
    promise.then(successCallback, failureCallback);
    return Promise.resolve();
  };
  prototype.addIceCandidate = withCallback;
}

function shimGetUserMedia(window) {
  const navigator = window && window.navigator;

  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
    // shim not needed in Safari 12.1
    const mediaDevices = navigator.mediaDevices;
    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);
    navigator.mediaDevices.getUserMedia = (constraints) => {
      return _getUserMedia(shimConstraints(constraints));
    };
  }

  if (!navigator.getUserMedia && navigator.mediaDevices &&
    navigator.mediaDevices.getUserMedia) {
    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {
      navigator.mediaDevices.getUserMedia(constraints)
      .then(cb, errcb);
    }.bind(navigator);
  }
}

function shimConstraints(constraints) {
  if (constraints && constraints.video !== undefined) {
    return Object.assign({},
      constraints,
      {video: _utils__WEBPACK_IMPORTED_MODULE_0__["compactObject"](constraints.video)}
    );
  }

  return constraints;
}

function shimRTCIceServerUrls(window) {
  if (!window.RTCPeerConnection) {
    return;
  }
  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls
  const OrigPeerConnection = window.RTCPeerConnection;
  window.RTCPeerConnection =
    function RTCPeerConnection(pcConfig, pcConstraints) {
      if (pcConfig && pcConfig.iceServers) {
        const newIceServers = [];
        for (let i = 0; i < pcConfig.iceServers.length; i++) {
          let server = pcConfig.iceServers[i];
          if (!server.hasOwnProperty('urls') &&
              server.hasOwnProperty('url')) {
            _utils__WEBPACK_IMPORTED_MODULE_0__["deprecated"]('RTCIceServer.url', 'RTCIceServer.urls');
            server = JSON.parse(JSON.stringify(server));
            server.urls = server.url;
            delete server.url;
            newIceServers.push(server);
          } else {
            newIceServers.push(pcConfig.iceServers[i]);
          }
        }
        pcConfig.iceServers = newIceServers;
      }
      return new OrigPeerConnection(pcConfig, pcConstraints);
    };
  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;
  // wrap static methods. Currently just generateCertificate.
  if ('generateCertificate' in OrigPeerConnection) {
    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {
      get() {
        return OrigPeerConnection.generateCertificate;
      }
    });
  }
}

function shimTrackEventTransceiver(window) {
  // Add event.transceiver member over deprecated event.receiver
  if (typeof window === 'object' && window.RTCTrackEvent &&
      'receiver' in window.RTCTrackEvent.prototype &&
      !('transceiver' in window.RTCTrackEvent.prototype)) {
    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {
      get() {
        return {receiver: this.receiver};
      }
    });
  }
}

function shimCreateOfferLegacy(window) {
  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;
  window.RTCPeerConnection.prototype.createOffer =
    function createOffer(offerOptions) {
      if (offerOptions) {
        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {
          // support bit values
          offerOptions.offerToReceiveAudio =
            !!offerOptions.offerToReceiveAudio;
        }
        const audioTransceiver = this.getTransceivers().find(transceiver =>
          transceiver.receiver.track.kind === 'audio');
        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {
          if (audioTransceiver.direction === 'sendrecv') {
            if (audioTransceiver.setDirection) {
              audioTransceiver.setDirection('sendonly');
            } else {
              audioTransceiver.direction = 'sendonly';
            }
          } else if (audioTransceiver.direction === 'recvonly') {
            if (audioTransceiver.setDirection) {
              audioTransceiver.setDirection('inactive');
            } else {
              audioTransceiver.direction = 'inactive';
            }
          }
        } else if (offerOptions.offerToReceiveAudio === true &&
            !audioTransceiver) {
          this.addTransceiver('audio');
        }

        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {
          // support bit values
          offerOptions.offerToReceiveVideo =
            !!offerOptions.offerToReceiveVideo;
        }
        const videoTransceiver = this.getTransceivers().find(transceiver =>
          transceiver.receiver.track.kind === 'video');
        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {
          if (videoTransceiver.direction === 'sendrecv') {
            if (videoTransceiver.setDirection) {
              videoTransceiver.setDirection('sendonly');
            } else {
              videoTransceiver.direction = 'sendonly';
            }
          } else if (videoTransceiver.direction === 'recvonly') {
            if (videoTransceiver.setDirection) {
              videoTransceiver.setDirection('inactive');
            } else {
              videoTransceiver.direction = 'inactive';
            }
          }
        } else if (offerOptions.offerToReceiveVideo === true &&
            !videoTransceiver) {
          this.addTransceiver('video');
        }
      }
      return origCreateOffer.apply(this, arguments);
    };
}

function shimAudioContext(window) {
  if (typeof window !== 'object' || window.AudioContext) {
    return;
  }
  window.AudioContext = window.webkitAudioContext;
}


/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/utils.js":
/*!*****************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/utils.js ***!
  \*****************************************************/
/*! exports provided: extractVersion, wrapPeerConnectionEvent, disableLog, disableWarnings, log, deprecated, detectBrowser, compactObject, walkStats, filterStats */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extractVersion", function() { return extractVersion; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "wrapPeerConnectionEvent", function() { return wrapPeerConnectionEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "disableLog", function() { return disableLog; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "disableWarnings", function() { return disableWarnings; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "log", function() { return log; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deprecated", function() { return deprecated; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "detectBrowser", function() { return detectBrowser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compactObject", function() { return compactObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "walkStats", function() { return walkStats; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "filterStats", function() { return filterStats; });
/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
 /* eslint-env node */


let logDisabled_ = true;
let deprecationWarnings_ = true;

/**
 * Extract browser version out of the provided user agent string.
 *
 * @param {!string} uastring userAgent string.
 * @param {!string} expr Regular expression used as match criteria.
 * @param {!number} pos position in the version string to be returned.
 * @return {!number} browser version.
 */
function extractVersion(uastring, expr, pos) {
  const match = uastring.match(expr);
  return match && match.length >= pos && parseInt(match[pos], 10);
}

// Wraps the peerconnection event eventNameToWrap in a function
// which returns the modified event object (or false to prevent
// the event).
function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {
  if (!window.RTCPeerConnection) {
    return;
  }
  const proto = window.RTCPeerConnection.prototype;
  const nativeAddEventListener = proto.addEventListener;
  proto.addEventListener = function(nativeEventName, cb) {
    if (nativeEventName !== eventNameToWrap) {
      return nativeAddEventListener.apply(this, arguments);
    }
    const wrappedCallback = (e) => {
      const modifiedEvent = wrapper(e);
      if (modifiedEvent) {
        if (cb.handleEvent) {
          cb.handleEvent(modifiedEvent);
        } else {
          cb(modifiedEvent);
        }
      }
    };
    this._eventMap = this._eventMap || {};
    if (!this._eventMap[eventNameToWrap]) {
      this._eventMap[eventNameToWrap] = new Map();
    }
    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);
    return nativeAddEventListener.apply(this, [nativeEventName,
      wrappedCallback]);
  };

  const nativeRemoveEventListener = proto.removeEventListener;
  proto.removeEventListener = function(nativeEventName, cb) {
    if (nativeEventName !== eventNameToWrap || !this._eventMap
        || !this._eventMap[eventNameToWrap]) {
      return nativeRemoveEventListener.apply(this, arguments);
    }
    if (!this._eventMap[eventNameToWrap].has(cb)) {
      return nativeRemoveEventListener.apply(this, arguments);
    }
    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);
    this._eventMap[eventNameToWrap].delete(cb);
    if (this._eventMap[eventNameToWrap].size === 0) {
      delete this._eventMap[eventNameToWrap];
    }
    if (Object.keys(this._eventMap).length === 0) {
      delete this._eventMap;
    }
    return nativeRemoveEventListener.apply(this, [nativeEventName,
      unwrappedCb]);
  };

  Object.defineProperty(proto, 'on' + eventNameToWrap, {
    get() {
      return this['_on' + eventNameToWrap];
    },
    set(cb) {
      if (this['_on' + eventNameToWrap]) {
        this.removeEventListener(eventNameToWrap,
            this['_on' + eventNameToWrap]);
        delete this['_on' + eventNameToWrap];
      }
      if (cb) {
        this.addEventListener(eventNameToWrap,
            this['_on' + eventNameToWrap] = cb);
      }
    },
    enumerable: true,
    configurable: true
  });
}

function disableLog(bool) {
  if (typeof bool !== 'boolean') {
    return new Error('Argument type: ' + typeof bool +
        '. Please use a boolean.');
  }
  logDisabled_ = bool;
  return (bool) ? 'adapter.js logging disabled' :
      'adapter.js logging enabled';
}

/**
 * Disable or enable deprecation warnings
 * @param {!boolean} bool set to true to disable warnings.
 */
function disableWarnings(bool) {
  if (typeof bool !== 'boolean') {
    return new Error('Argument type: ' + typeof bool +
        '. Please use a boolean.');
  }
  deprecationWarnings_ = !bool;
  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');
}

function log() {
  if (typeof window === 'object') {
    if (logDisabled_) {
      return;
    }
    if (typeof console !== 'undefined' && typeof console.log === 'function') {
      console.log.apply(console, arguments);
    }
  }
}

/**
 * Shows a deprecation warning suggesting the modern and spec-compatible API.
 */
function deprecated(oldMethod, newMethod) {
  if (!deprecationWarnings_) {
    return;
  }
  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +
      ' instead.');
}

/**
 * Browser detector.
 *
 * @return {object} result containing browser and version
 *     properties.
 */
function detectBrowser(window) {
  // Returned result object.
  const result = {browser: null, version: null};

  // Fail early if it's not a browser
  if (typeof window === 'undefined' || !window.navigator) {
    result.browser = 'Not a browser.';
    return result;
  }

  const {navigator} = window;

  if (navigator.mozGetUserMedia) { // Firefox.
    result.browser = 'firefox';
    result.version = extractVersion(navigator.userAgent,
        /Firefox\/(\d+)\./, 1);
  } else if (navigator.webkitGetUserMedia ||
      (window.isSecureContext === false && window.webkitRTCPeerConnection &&
       !window.RTCIceGatherer)) {
    // Chrome, Chromium, Webview, Opera.
    // Version matches Chrome/WebRTC version.
    // Chrome 74 removed webkitGetUserMedia on http as well so we need the
    // more complicated fallback to webkitRTCPeerConnection.
    result.browser = 'chrome';
    result.version = extractVersion(navigator.userAgent,
        /Chrom(e|ium)\/(\d+)\./, 2);
  } else if (navigator.mediaDevices &&
      navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)) { // Edge.
    result.browser = 'edge';
    result.version = extractVersion(navigator.userAgent,
        /Edge\/(\d+).(\d+)$/, 2);
  } else if (window.RTCPeerConnection &&
      navigator.userAgent.match(/AppleWebKit\/(\d+)\./)) { // Safari.
    result.browser = 'safari';
    result.version = extractVersion(navigator.userAgent,
        /AppleWebKit\/(\d+)\./, 1);
    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&
        'currentDirection' in window.RTCRtpTransceiver.prototype;
  } else { // Default fallthrough: not supported.
    result.browser = 'Not a supported browser.';
    return result;
  }

  return result;
}

/**
 * Checks if something is an object.
 *
 * @param {*} val The something you want to check.
 * @return true if val is an object, false otherwise.
 */
function isObject(val) {
  return Object.prototype.toString.call(val) === '[object Object]';
}

/**
 * Remove all empty objects and undefined values
 * from a nested object -- an enhanced and vanilla version
 * of Lodash's `compact`.
 */
function compactObject(data) {
  if (!isObject(data)) {
    return data;
  }

  return Object.keys(data).reduce(function(accumulator, key) {
    const isObj = isObject(data[key]);
    const value = isObj ? compactObject(data[key]) : data[key];
    const isEmptyObject = isObj && !Object.keys(value).length;
    if (value === undefined || isEmptyObject) {
      return accumulator;
    }
    return Object.assign(accumulator, {[key]: value});
  }, {});
}

/* iterates the stats graph recursively. */
function walkStats(stats, base, resultSet) {
  if (!base || resultSet.has(base.id)) {
    return;
  }
  resultSet.set(base.id, base);
  Object.keys(base).forEach(name => {
    if (name.endsWith('Id')) {
      walkStats(stats, stats.get(base[name]), resultSet);
    } else if (name.endsWith('Ids')) {
      base[name].forEach(id => {
        walkStats(stats, stats.get(id), resultSet);
      });
    }
  });
}

/* filter getStats for a sender/receiver track. */
function filterStats(result, track, outbound) {
  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';
  const filteredResult = new Map();
  if (track === null) {
    return filteredResult;
  }
  const trackStats = [];
  result.forEach(value => {
    if (value.type === 'track' &&
        value.trackIdentifier === track.id) {
      trackStats.push(value);
    }
  });
  trackStats.forEach(trackStat => {
    result.forEach(stats => {
      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {
        walkStats(result, stats, filteredResult);
      }
    });
  });
  return filteredResult;
}



/***/ }),

/***/ "./node_modules/worker-loader/dist/cjs.js?name=LoaderWorker.worker.js!./src/Apps/Viewer/LoaderWorker.ts":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/worker-loader/dist/cjs.js?name=LoaderWorker.worker.js!./src/Apps/Viewer/LoaderWorker.ts ***!
  \**************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = function() {
  return new Worker(__webpack_require__.p + "LoaderWorker.worker.js");
};

/***/ }),

/***/ "./src/Apps/PathTracer/ColorAnalyzer.ts":
/*!**********************************************!*\
  !*** ./src/Apps/PathTracer/ColorAnalyzer.ts ***!
  \**********************************************/
/*! exports provided: ColorAnalyzer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ColorAnalyzer", function() { return ColorAnalyzer; });
/* harmony import */ var _gl_glColor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../gl/glColor */ "./src/gl/glColor.ts");

/**
 * This class grabs a copy of the rendered texture and examines it for
 * color values.
 */
var ColorAnalyzer = /** @class */ (function () {
    /**
     * @param size The width and height of the buffer
     */
    function ColorAnalyzer(size) {
        this.size = size;
        // allocate the buffer used for grabs
        this.pixels = new Float32Array(this.size * this.size * 4);
    }
    /**
     * Runs the analysis - grabs a copy of the frame buffer and scans it.
     *
     * @param alphaLight The alpha value for things in light. Values above this are due to specular lighting.
     * @param alphaShadow The alpha value for things in shadow.
     */
    ColorAnalyzer.prototype.run = function (gl, alphaLight, alphaShadow) {
        var data = {
            maxChroma: 0,
            avgLightColor: new _gl_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"]([0, 0, 0]),
            lightestLightColor: new _gl_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"]([0, 0, 0]),
            darkestLightColor: new _gl_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"]([1, 1, 1]),
            avgShadowColor: new _gl_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"]([0, 0, 0]),
            lightestShadowColor: new _gl_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"]([0, 0, 0]),
            darkestShadowColor: new _gl_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"]([1, 1, 1]),
            terminatorColor: new _gl_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"]([0, 0, 0]),
            highlightColor: new _gl_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"]([0, 0, 0]),
        };
        // TODO handle case when the text type is UNSIGNED_BYTE
        // TODO gl.FLOAT not supported on Safari.
        gl.readPixels(0, 0, this.size, this.size, gl.RGBA, gl.FLOAT, this.pixels);
        var numLightPixels = 0;
        var numShadowPixels = 0;
        var numTerminatorPixels = 0;
        for (var row = 0; row < this.size; row++) {
            for (var col = 0; col < this.size; col++) {
                var index = (row * this.size + col) * 4;
                var r = this.pixels[index + 0];
                var g = this.pixels[index + 1];
                var b = this.pixels[index + 2];
                var a = this.pixels[index + 3];
                // ignore values that are not part of the ball
                if (a === 1) {
                    continue;
                }
                var avg = (r + g + b) / 3;
                var chroma = (Math.abs(r - avg) + Math.abs(g - avg) + Math.abs(b - avg)) / (4 / 3);
                if (chroma > data.maxChroma) {
                    data.maxChroma = chroma;
                }
                var color = new _gl_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"]([r, g, b]);
                if (a == alphaLight) {
                    numLightPixels++;
                    if (data.lightestLightColor == null) {
                        data.lightestLightColor = color;
                    }
                    if (data.darkestLightColor == null) {
                        data.darkestLightColor = color;
                    }
                    data.lightestLightColor = _gl_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"].lightest(data.lightestLightColor, color);
                    data.darkestLightColor = _gl_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"].darkest(data.darkestLightColor, color);
                    data.avgLightColor.r += color.r;
                    data.avgLightColor.b += color.b;
                    data.avgLightColor.g += color.g;
                }
                else if (a == alphaShadow) {
                    numShadowPixels++;
                    if (data.lightestShadowColor == null) {
                        data.lightestShadowColor = color;
                    }
                    if (data.darkestShadowColor == null) {
                        data.darkestShadowColor = color;
                    }
                    data.lightestShadowColor = _gl_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"].lightest(data.lightestShadowColor, color);
                    data.darkestShadowColor = _gl_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"].darkest(data.darkestShadowColor, color);
                    data.avgShadowColor.r += color.r;
                    data.avgShadowColor.b += color.b;
                    data.avgShadowColor.g += color.g;
                }
                else if (a > alphaLight) {
                    data.highlightColor = _gl_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"].lightest(data.highlightColor, color);
                }
                var terminator = (alphaLight + alphaShadow) / 2.0;
                if (Math.abs(a - terminator) < 0.1) {
                    numTerminatorPixels++;
                    data.terminatorColor.r += color.r;
                    data.terminatorColor.b += color.b;
                    data.terminatorColor.g += color.g;
                }
            }
        }
        if (numLightPixels > 0) {
            data.avgLightColor.r /= numLightPixels;
            data.avgLightColor.g /= numLightPixels;
            data.avgLightColor.b /= numLightPixels;
        }
        if (numShadowPixels > 0) {
            data.avgShadowColor.r /= numShadowPixels;
            data.avgShadowColor.g /= numShadowPixels;
            data.avgShadowColor.b /= numShadowPixels;
        }
        if (numTerminatorPixels > 0) {
            data.terminatorColor.r /= numTerminatorPixels;
            data.terminatorColor.g /= numTerminatorPixels;
            data.terminatorColor.b /= numTerminatorPixels;
        }
        return data;
    };
    return ColorAnalyzer;
}());



/***/ }),

/***/ "./src/Apps/PathTracer/PathTracerApp.ts":
/*!**********************************************!*\
  !*** ./src/Apps/PathTracer/PathTracerApp.ts ***!
  \**********************************************/
/*! exports provided: PathTracerApp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PathTracerApp", function() { return PathTracerApp; });
/* harmony import */ var _Util_htmlColor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Util/htmlColor */ "./src/Util/htmlColor.ts");
/* harmony import */ var _PathTracerRenderer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PathTracerRenderer */ "./src/Apps/PathTracer/PathTracerRenderer.ts");
/* harmony import */ var _Util3D_SphericalCoord__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Util3D/SphericalCoord */ "./src/Util3D/SphericalCoord.ts");
/* harmony import */ var _GUI_Slider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../GUI/Slider */ "./src/GUI/Slider.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../GUI/PointerEventHandler */ "./src/GUI/PointerEventHandler.ts");
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../Util3D/Vec */ "./src/Util3D/Vec.ts");
/* harmony import */ var _gl_glColorWithTemperature__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../gl/glColorWithTemperature */ "./src/gl/glColorWithTemperature.ts");
/* harmony import */ var _Util3D_TriangleObjBuilder__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../Util3D/TriangleObjBuilder */ "./src/Util3D/TriangleObjBuilder.ts");
/* harmony import */ var _Util3D_TriangleObjFile__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../Util3D/TriangleObjFile */ "./src/Util3D/TriangleObjFile.ts");
/* harmony import */ var _Util3D_Mat__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../Util3D/Mat */ "./src/Util3D/Mat.ts");











var skinTones = [
    new _Util_htmlColor__WEBPACK_IMPORTED_MODULE_0__["htmlColor"]([240, 223, 214]),
    new _Util_htmlColor__WEBPACK_IMPORTED_MODULE_0__["htmlColor"]([255, 218, 200]),
    new _Util_htmlColor__WEBPACK_IMPORTED_MODULE_0__["htmlColor"]([232, 179, 117]),
    new _Util_htmlColor__WEBPACK_IMPORTED_MODULE_0__["htmlColor"]([190, 136, 87]),
    //   new htmlColor([115, 91, 59]),
    new _Util_htmlColor__WEBPACK_IMPORTED_MODULE_0__["htmlColor"]([139, 73, 65])
    //   new htmlColor([132, 55, 34]),
    //new htmlColor([61, 12, 2]),
    //   new htmlColor([38, 7, 1])
];
var PointerMode;
(function (PointerMode) {
    PointerMode[PointerMode["View"] = 0] = "View";
    PointerMode[PointerMode["Light"] = 1] = "Light";
})(PointerMode || (PointerMode = {}));
var PathTracerApp = /** @class */ (function () {
    function PathTracerApp(file) {
        this.gl = null;
        this.pointerMode = PointerMode.View;
        this.pointerModeSpecial = false;
        this.angleX = 0.5;
        this.angleY = 0.75;
        this.zoomZ = 3.5;
        this.lastTimes = [];
        this.MAX_SAMPLES = 500;
        this.initialFile = file;
    }
    PathTracerApp.prototype.create = function (div) {
        var _this = this;
        div.id = 'PathTracerApp';
        var container = document.createElement('div');
        container.className = 'Container';
        div.appendChild(container);
        this.canvas = document.createElement('canvas');
        this.canvas.id = 'canvasx';
        container.appendChild(this.canvas);
        var context = this.canvas.getContext('webgl2');
        if (!context) {
            context = this.canvas.getContext('webgl');
        }
        if (!context) {
            // TODO display a message about not being able to create a WebGL context
            console.log('Unable to get WebGL context');
        }
        this.gl = context;
        var size = 512;
        if (_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["isMobile"]) {
            size = document.body.clientWidth;
        }
        this.gl.canvas.width = size;
        this.gl.canvas.height = size;
        div.style.width = size + 'px';
        container.style.height = size + 'px';
        this.renderer = new _PathTracerRenderer__WEBPACK_IMPORTED_MODULE_1__["PathTracerRenderer"](this.gl);
        var handler = new _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_5__["PointerEventHandler"](this.canvas);
        handler.onDrag = function (pos, delta) { return _this.onMove(pos, delta); };
        handler.onClick = function (pos) { return _this.click(pos.x, pos.y); };
        handler.onDown = function (pos) { return _this.onDown(pos.x, pos.y); };
        this.loadModel(this.initialFile).then(function (tObj) {
            _this.renderer.setObj(tObj);
            requestAnimationFrame(function () { return _this.tick(); });
        });
        var drawTime = document.createElement('div');
        drawTime.id = 'drawTime';
        container.appendChild(drawTime);
        var description = document.createElement('div');
        description.id = 'description';
        container.appendChild(description);
        var button = document.createElement('div');
        button.id = 'modeButton';
        button.innerHTML = 'View';
        this.pointerMode = PointerMode.View;
        button.onclick = function () {
            switch (_this.pointerMode) {
                case PointerMode.View:
                    button.innerHTML = 'Light';
                    _this.pointerMode = PointerMode.Light;
                    break;
                case PointerMode.Light:
                    button.innerHTML = 'View';
                    _this.pointerMode = PointerMode.View;
                    break;
            }
        };
        container.appendChild(button);
        var progressBar = document.createElement('div');
        progressBar.id = 'progressBar';
        container.appendChild(progressBar);
        this.intensitySlider = new _GUI_Slider__WEBPACK_IMPORTED_MODULE_3__["Slider"](div, {
            id: 'LightIntensity',
            label: 'Light Intensity',
            min: 0,
            max: 1,
            value: this.renderer.uniforms.uLightIntensity,
            colors: [_Util_htmlColor__WEBPACK_IMPORTED_MODULE_0__["htmlColor"].black, _Util_htmlColor__WEBPACK_IMPORTED_MODULE_0__["htmlColor"].white],
            oninput: function () {
                _this.renderer.uniforms.uLightIntensity = _this.intensitySlider.value;
                _this.restart();
            }
        });
        // build a range of colors
        var min = 2000;
        var max = 10000;
        var colors = [];
        for (var i = 0; i < 10; i++) {
            var temp = min + (i / 9) * (max - min);
            colors.push(_gl_glColorWithTemperature__WEBPACK_IMPORTED_MODULE_7__["glColorWithTemperature"].create(temp).toHtmlColor());
        }
        this.lightColorSlider = new _GUI_Slider__WEBPACK_IMPORTED_MODULE_3__["Slider"](div, {
            id: 'LightColor',
            label: 'Light Color',
            min: 2000,
            max: 10000,
            value: _gl_glColorWithTemperature__WEBPACK_IMPORTED_MODULE_7__["glColorWithTemperature"].daylight.temperature,
            colors: colors,
            oninput: function () {
                _this.setLightColor();
            },
            onGetText: function (slider) { return slider.value.toFixed() + 'K'; }
        });
        // apply the initial colors
        this.setLightColor();
        this.ballColorSlider = new _GUI_Slider__WEBPACK_IMPORTED_MODULE_3__["Slider"](div, {
            id: 'BallColor',
            label: 'Ball Color',
            min: 0,
            max: 100,
            value: 50,
            colors: skinTones,
            oninput: function () {
                _this.renderer.uniforms.uObjColor = _this.ballColorSlider.glColor;
                _this.restart();
            }
        });
        // make sure gl matches the initial UI setting
        this.renderer.uniforms.uObjColor = this.ballColorSlider.glColor;
        this.ambientIntensitySlider = new _GUI_Slider__WEBPACK_IMPORTED_MODULE_3__["Slider"](div, {
            id: 'AmbientIntensity',
            label: 'Ambient Light',
            min: 0,
            max: 1,
            value: this.renderer.uniforms.uAmbientLightIntensity,
            colors: [_Util_htmlColor__WEBPACK_IMPORTED_MODULE_0__["htmlColor"].black, _Util_htmlColor__WEBPACK_IMPORTED_MODULE_0__["htmlColor"].white],
            oninput: function () {
                _this.renderer.uniforms.uAmbientLightIntensity = _this.ambientIntensitySlider.value;
                _this.restart();
            }
        });
    };
    PathTracerApp.prototype.buildMenu = function (menubar) {
        // no menus
    };
    PathTracerApp.prototype.loadModel = function (file) {
        if (file && file.toLowerCase() === 'sphere') {
            this.renderer.uniforms.uBallRadius = 0;
            var radius = 0.5;
            var center = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_6__["Vec3"]([0, radius, 0]);
            var tObj = new _Util3D_TriangleObjBuilder__WEBPACK_IMPORTED_MODULE_8__["TriangleObjBuilder"]();
            tObj.addSphere(8, radius, center);
            return Promise.resolve(tObj);
        }
        else if (file && file.toLowerCase() === 'cube') {
            this.renderer.uniforms.uBallRadius = 0;
            var size = 0.8;
            var center = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_6__["Vec3"]([0, size / 2.0, 0]);
            var tObj = new _Util3D_TriangleObjBuilder__WEBPACK_IMPORTED_MODULE_8__["TriangleObjBuilder"]();
            tObj.addCube(size, center);
            return Promise.resolve(tObj);
        }
        else if (file && file.toLowerCase().endsWith('.obj')) {
            this.renderer.uniforms.uBallRadius = 0;
            return fetch(file)
                .then(function (res) { return res.text(); })
                .then(function (res) {
                return new _Util3D_TriangleObjFile__WEBPACK_IMPORTED_MODULE_9__["TriangleObjFile"](file, res);
            });
        }
        else {
            return Promise.resolve(null);
        }
    };
    PathTracerApp.prototype.setLightColor = function () {
        // update the colors for the intensity slider
        this.intensitySlider.colors = [_Util_htmlColor__WEBPACK_IMPORTED_MODULE_0__["htmlColor"].black, this.lightColorSlider.htmlColor];
        // use the value in rendering
        this.renderer.uniforms.uLightColor = this.lightColorSlider.glColor;
        this.restart();
    };
    PathTracerApp.prototype.onDown = function (x, y) {
        this.pointerModeSpecial = (x < 0.1 * this.canvas.width) ? true : false;
        this.pos = _Util3D_SphericalCoord__WEBPACK_IMPORTED_MODULE_2__["SphericalCoord"].fromXYZ(this.renderer.uniforms.uLightPos.values);
    };
    PathTracerApp.prototype.onMove = function (pos, delta) {
        if (this.pointerMode === PointerMode.View) {
            if (this.pointerModeSpecial) {
                this.zoomZ -= (delta.y) * 0.01;
                this.zoomZ = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["clamp"])(this.zoomZ, 1, 8);
            }
            else {
                // update the angles based on how far we moved since last time
                this.angleY -= (delta.x) * 0.01;
                this.angleX += (delta.y) * 0.01;
                // don't go upside down
                this.angleX = Math.max(this.angleX, -Math.PI / 2 + 0.01);
                this.angleX = Math.min(this.angleX, Math.PI / 2 - 0.01);
            }
        }
        else if (this.pointerMode === PointerMode.Light) {
            if (this.pointerModeSpecial) {
                this.pos.radius -= (delta.y) * 0.005;
                this.pos.radius = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["clamp"])(this.pos.radius, this.renderer.uniforms.uBallRadius + 0.5, 5);
                this.renderer.uniforms.uLightPos.values = this.pos.toXYZ();
            }
            else {
                this.pos.rotationAngle += (-delta.x);
                this.pos.elevationAngle += (-delta.y);
                this.pos.elevationAngle = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["clamp"])(this.pos.elevationAngle, 0, 180);
                this.renderer.uniforms.uLightPos.values = this.pos.toXYZ();
            }
        }
        // clear the sample buffer
        this.restart();
    };
    /**
     * Processes a click/touch event at the designated coordinates. If a hit
     * occurs, the clicked on view is swapped for the primary view and true
     * is returned. If no hit occurs, false is returned.
     *
     * @param x The x coordinate.
     * @param y The y coordinate.
     * @returns true if a hit on one of the views occurs.
     */
    PathTracerApp.prototype.click = function (x, y) {
        // TODO handle this within the PathTracer class so that we don't have to hard code view stuff
        var size = 0.2 * this.canvas.width;
        if (y < size) {
            if (x > this.canvas.width - 1 * size) {
                this.swap(2);
                this.setDescription();
                return true;
            }
            else if (x > this.canvas.width - 2 * size) {
                this.swap(1);
                this.setDescription();
                return true;
            }
            else if (x > this.canvas.width - 3 * size) {
                this.swap(0);
                this.setDescription();
                return true;
            }
        }
        return false;
    };
    PathTracerApp.prototype.setDescription = function () {
        var description = document.getElementById('description');
        switch (this.renderer.renderMode) {
            case _PathTracerRenderer__WEBPACK_IMPORTED_MODULE_1__["RenderMode"].Artist:
                description.innerText = '';
                break;
            case _PathTracerRenderer__WEBPACK_IMPORTED_MODULE_1__["RenderMode"].Chroma:
                description.innerText = 'Chroma View: red=highest chroma';
                break;
            case _PathTracerRenderer__WEBPACK_IMPORTED_MODULE_1__["RenderMode"].Value:
                description.innerText = 'Value View';
                break;
            case _PathTracerRenderer__WEBPACK_IMPORTED_MODULE_1__["RenderMode"].Bands:
                description.innerText = '5 Color + Highlight View';
                break;
        }
    };
    PathTracerApp.prototype.updateTexture = function () {
        var modelview = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_10__["Mat4"].makeLookAt(this.renderer.uniforms.uEye, new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_6__["Vec3"]([0, 1, 0]), // center point
        new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_6__["Vec3"]([0, 1, 0]) // up vector
        );
        var projection = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_10__["Mat4"].makePerspective(55, 1, 0.1, 100);
        var modelviewProjection = projection.multM(modelview);
        this.renderer.updateTexture(modelviewProjection);
    };
    PathTracerApp.prototype.displayTexture = function () {
        this.renderer.displayTexture();
    };
    PathTracerApp.prototype.restart = function () {
        if (this.renderer) {
            this.renderer.restart();
        }
    };
    PathTracerApp.prototype.swap = function (pos) {
        this.renderer.swap(pos);
    };
    PathTracerApp.prototype.tick = function () {
        var _this = this;
        this.updateTimerLabel();
        this.updateProgress();
        if (this.renderer.uniforms.uSample < this.MAX_SAMPLES) {
            this.renderer.uniforms.uEye.values[0] = this.zoomZ * Math.sin(this.angleY) * Math.cos(this.angleX);
            this.renderer.uniforms.uEye.values[1] = this.zoomZ * Math.sin(this.angleX);
            this.renderer.uniforms.uEye.values[2] = this.zoomZ * Math.cos(this.angleY) * Math.cos(this.angleX);
            this.updateTexture();
            this.displayTexture();
        }
        this.animationFrame = requestAnimationFrame(function () { return _this.tick(); });
    };
    PathTracerApp.prototype.updateTimerLabel = function () {
        var t = window.performance.now();
        var drawTimeLabel = document.getElementById('drawTime');
        if (this.lastTimes.length > 0) {
            var elapsedMs = (t - this.lastTimes[0]) / this.lastTimes.length;
            drawTimeLabel.innerText = elapsedMs.toFixed(0) + 'ms';
        }
        this.lastTimes.push(t);
        if (this.lastTimes.length > 30) {
            this.lastTimes.shift();
        }
        drawTimeLabel.style.visibility = this.renderer.uniforms.uSample < this.MAX_SAMPLES ? 'visible' : 'hidden';
    };
    PathTracerApp.prototype.updateProgress = function () {
        var progress = this.renderer.uniforms.uSample / this.MAX_SAMPLES;
        var bar = document.getElementById('progressBar');
        if (progress >= 0 && progress < 1) {
            bar.style.visibility = 'visible';
            var w = this.canvas.width;
            bar.style.right = w * (1 - progress) + 'px';
        }
        else {
            bar.style.visibility = 'hidden';
        }
    };
    return PathTracerApp;
}());



/***/ }),

/***/ "./src/Apps/PathTracer/PathTracerObj.ts":
/*!**********************************************!*\
  !*** ./src/Apps/PathTracer/PathTracerObj.ts ***!
  \**********************************************/
/*! exports provided: PathTracerObj */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PathTracerObj", function() { return PathTracerObj; });
/* harmony import */ var _Volume__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Volume */ "./src/Apps/PathTracer/Volume.ts");
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Util3D/Vec */ "./src/Util3D/Vec.ts");
/* harmony import */ var _Util3D_IndexedVec3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Util3D/IndexedVec3 */ "./src/Util3D/IndexedVec3.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");




/**
 * Wrapper for TriangleObj used by the PathTracer app. Adds the ability to
 * move vertices (as opposed to using a tranformation matrix) and to break
 * things down into volumes.
 */
var PathTracerObj = /** @class */ (function () {
    function PathTracerObj(tObj) {
        this.volumes = [];
        this.tObj = tObj;
        this.autoCenter();
        this.breakIntoVolumes();
    }
    /**
     * Scales the object, centers it, and puts it on the floor at y=0
     */
    PathTracerObj.prototype.autoCenter = function () {
        var center = this.tObj.box.center;
        var trans = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([-center.x, -center.y + this.tObj.height / 2, -center.z]);
        var scale = 2 / this.tObj.diagonal;
        for (var i = 0; i < this.tObj.numVertices; i++) {
            var v = new _Util3D_IndexedVec3__WEBPACK_IMPORTED_MODULE_2__["IndexedVec3"](this.tObj.vertices, i);
            v.x = (v.x + trans.x) * scale;
            v.y = (v.y + trans.y) * scale;
            v.z = (v.z + trans.z) * scale;
        }
        this.tObj.box.min.x = (this.tObj.box.min.x + trans.x) * scale;
        this.tObj.box.min.y = (this.tObj.box.min.y + trans.y) * scale;
        this.tObj.box.min.z = (this.tObj.box.min.z + trans.z) * scale;
        this.tObj.box.max.x = (this.tObj.box.max.x + trans.x) * scale;
        this.tObj.box.max.y = (this.tObj.box.max.y + trans.y) * scale;
        this.tObj.box.max.z = (this.tObj.box.max.z + trans.z) * scale;
        for (var i = 0; i < this.volumes.length; i++) {
            var v = this.volumes[i];
            v.boxMin.x = (v.boxMin.x + trans.x) * scale;
            v.boxMin.y = (v.boxMin.y + trans.y) * scale;
            v.boxMin.z = (v.boxMin.z + trans.z) * scale;
            v.boxMax.x = (v.boxMax.x + trans.x) * scale;
            v.boxMax.y = (v.boxMax.y + trans.y) * scale;
            v.boxMax.z = (v.boxMax.z + trans.z) * scale;
        }
    };
    /**
     * Breaks the object into evenly spaced volumes. The number of volumes is automatically
     * determined based on the number of triangles.
     */
    PathTracerObj.prototype.breakIntoVolumes = function () {
        var numSteps;
        if (this.tObj.numTriangles < 40) {
            numSteps = 1;
        }
        else if (this.tObj.numTriangles < 1500) {
            numSteps = 2;
        }
        else {
            numSteps = 3;
        }
        this.volumes = [];
        for (var i = 0; i < Math.pow(numSteps, 3); i++) {
            this.volumes.push(new _Volume__WEBPACK_IMPORTED_MODULE_0__["Volume"]());
        }
        for (var i = 0; i < this.tObj.numTriangles; i++) {
            var t = this.tObj.getTriangle(i);
            var x = Math.floor(numSteps * (t.minX - this.tObj.box.min.x) / (this.tObj.box.width));
            var y = Math.floor(numSteps * (t.minY - this.tObj.box.min.y) / (this.tObj.box.height));
            var z = Math.floor(numSteps * (t.minZ - this.tObj.box.min.z) / (this.tObj.box.depth));
            x = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_3__["clamp"])(x, 0, numSteps - 1);
            y = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_3__["clamp"])(y, 0, numSteps - 1);
            z = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_3__["clamp"])(z, 0, numSteps - 1);
            var index = x + y * numSteps + z * numSteps * numSteps;
            this.volumes[index].push(t);
        }
    };
    return PathTracerObj;
}());



/***/ }),

/***/ "./src/Apps/PathTracer/PathTracerRenderer.ts":
/*!***************************************************!*\
  !*** ./src/Apps/PathTracer/PathTracerRenderer.ts ***!
  \***************************************************/
/*! exports provided: RenderMode, PathTracerRenderer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RenderMode", function() { return RenderMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PathTracerRenderer", function() { return PathTracerRenderer; });
/* harmony import */ var _shaders_PathTracerToScreenVertex_glsl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shaders/PathTracerToScreenVertex.glsl */ "./src/shaders/PathTracerToScreenVertex.glsl");
/* harmony import */ var _shaders_PathTracerToScreenFragment_glsl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shaders/PathTracerToScreenFragment.glsl */ "./src/shaders/PathTracerToScreenFragment.glsl");
/* harmony import */ var _shaders_PathTracerToTextureVertex_glsl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shaders/PathTracerToTextureVertex.glsl */ "./src/shaders/PathTracerToTextureVertex.glsl");
/* harmony import */ var _shaders_PathTracerToTextureFragment_glsl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../shaders/PathTracerToTextureFragment.glsl */ "./src/shaders/PathTracerToTextureFragment.glsl");
/* harmony import */ var _gl_glColor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../gl/glColor */ "./src/gl/glColor.ts");
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../Util3D/Vec */ "./src/Util3D/Vec.ts");
/* harmony import */ var _Util3D_SphericalCoord__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../Util3D/SphericalCoord */ "./src/Util3D/SphericalCoord.ts");
/* harmony import */ var _gl_glFrameBuffer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../gl/glFrameBuffer */ "./src/gl/glFrameBuffer.ts");
/* harmony import */ var _gl_glTexture__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../gl/glTexture */ "./src/gl/glTexture.ts");
/* harmony import */ var _gl_glProgram__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../gl/glProgram */ "./src/gl/glProgram.ts");
/* harmony import */ var _gl_glAttributeBuffer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../gl/glAttributeBuffer */ "./src/gl/glAttributeBuffer.ts");
/* harmony import */ var _ColorAnalyzer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./ColorAnalyzer */ "./src/Apps/PathTracer/ColorAnalyzer.ts");
/* harmony import */ var _gl_glUniformBlock__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../gl/glUniformBlock */ "./src/gl/glUniformBlock.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _Util_Profiler__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../Util/Profiler */ "./src/Util/Profiler.ts");
/* harmony import */ var _PathTracerObj__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./PathTracerObj */ "./src/Apps/PathTracer/PathTracerObj.ts");
/* harmony import */ var _gl_glUniform__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../gl/glUniform */ "./src/gl/glUniform.ts");
/* harmony import */ var _Util3D_Mat__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../Util3D/Mat */ "./src/Util3D/Mat.ts");
/* harmony import */ var _GUI_ColorRange__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../GUI/ColorRange */ "./src/GUI/ColorRange.ts");



















/**
 * Rendering mode for displaying the texture
 */
var RenderMode;
(function (RenderMode) {
    RenderMode[RenderMode["Artist"] = 0] = "Artist";
    RenderMode[RenderMode["Value"] = 1] = "Value";
    RenderMode[RenderMode["Chroma"] = 2] = "Chroma";
    RenderMode[RenderMode["Bands"] = 3] = "Bands";
})(RenderMode || (RenderMode = {}));
var Uniforms = /** @class */ (function () {
    function Uniforms() {
        this.uScale = 1.0;
        this.uXOffset = 0.0;
        this.uYOffset = 0.0;
        this.uMode = 0;
        this.uMaxChroma = 1.0;
        this.uLightAlpha = 1001;
        this.uShadowAlpha = 1000;
        this.uLightIntensity = 0.7;
        this.uLightColor = new _gl_glColor__WEBPACK_IMPORTED_MODULE_4__["glColor3"]([1.0, 1.0, 1.0]);
        this.uLightPos = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_5__["Vec3"](new _Util3D_SphericalCoord__WEBPACK_IMPORTED_MODULE_6__["SphericalCoord"](2, 60, 110).toXYZ());
        this.uAmbientLightIntensity = 0.3;
        this.uObjColor = new _gl_glColor__WEBPACK_IMPORTED_MODULE_4__["glColor3"]([0.5, 0.5, 0.8]);
        this.uBallRadius = 0.5;
        this.uEye = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_5__["Vec3"]([0, 0, 0]);
        this.uTextureSize = 256;
        this.uRandom = Math.random();
        this.uRay00 = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_5__["Vec3"]([0, 0, 0]);
        this.uRay01 = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_5__["Vec3"]([0, 0, 0]);
        this.uRay10 = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_5__["Vec3"]([0, 0, 0]);
        this.uRay11 = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_5__["Vec3"]([0, 0, 0]);
        this.uSample = 0.0;
    }
    return Uniforms;
}());
/**
 * Class that does the work of building the Path Traced texture
 */
var PathTracerRenderer = /** @class */ (function () {
    function PathTracerRenderer(glCtx) {
        this.gl = null;
        this.uniforms = new Uniforms();
        this.mainView = RenderMode.Artist;
        this.smallViews = [
            RenderMode.Chroma,
            RenderMode.Value,
            RenderMode.Bands,
        ];
        this.vertices = [
            -1, -1,
            -1, +1,
            +1, -1,
            +1, +1
        ];
        this.gl = glCtx;
        var gl = this.gl;
        // larger texture is higher resolution, but takes longer to compute
        if (_Util_Globals__WEBPACK_IMPORTED_MODULE_13__["isMobile"]) {
            this.uniforms.uTextureSize = 256;
        }
        else {
            // this.uniforms.uTextureSize = 512;
            this.uniforms.uTextureSize = 256;
        }
        this.analyzer = new _ColorAnalyzer__WEBPACK_IMPORTED_MODULE_11__["ColorAnalyzer"](this.uniforms.uTextureSize);
        // create framebuffer
        this.frameBuffer = new _gl_glFrameBuffer__WEBPACK_IMPORTED_MODULE_7__["glFrameBuffer"](gl, this.uniforms.uTextureSize, this.uniforms.uTextureSize);
        // create two textures. One we display and one we draw to
        this.textures = [];
        for (var i = 0; i < 2; i++) {
            this.textures.push(this.frameBuffer.createTexture(_gl_glTexture__WEBPACK_IMPORTED_MODULE_8__["glTextureStyle"].Float));
        }
        // create toScreen shader
        this.toScreenProgram = new _gl_glProgram__WEBPACK_IMPORTED_MODULE_9__["glProgram"](gl, _shaders_PathTracerToScreenVertex_glsl__WEBPACK_IMPORTED_MODULE_0__["default"], _shaders_PathTracerToScreenFragment_glsl__WEBPACK_IMPORTED_MODULE_1__["default"]);
        this.toScreenVertexAttribute = new _gl_glAttributeBuffer__WEBPACK_IMPORTED_MODULE_10__["glAttributeBuffer"](gl, this.toScreenProgram, 'vertex');
        this.toScreenVertexAttribute.upload(this.vertices);
    }
    PathTracerRenderer.prototype.setObj = function (tObj) {
        this.compileShader(tObj);
    };
    PathTracerRenderer.prototype.dispose = function () {
        this.frameBuffer.dispose();
        this.textures[0].dispose();
        this.textures[1].dispose();
        if (this.vBlock) {
            this.vBlock.dispose();
        }
        if (this.tBlock) {
            this.tBlock.dispose();
        }
    };
    PathTracerRenderer.prototype.compileShader = function (tObj) {
        var gl = this.gl;
        if (this.toTextureProgram) {
            this.toTextureProgram.dispose();
            this.toTextureProgram = null;
        }
        var p = new _Util_Profiler__WEBPACK_IMPORTED_MODULE_14__["Profiler"]();
        // create the toTexture shader
        if (tObj && tObj.numTriangles > 0) {
            var pObj = new _PathTracerObj__WEBPACK_IMPORTED_MODULE_15__["PathTracerObj"](tObj);
            this.toTextureProgram = new _gl_glProgram__WEBPACK_IMPORTED_MODULE_9__["glProgram"](gl, _shaders_PathTracerToTextureVertex_glsl__WEBPACK_IMPORTED_MODULE_2__["default"]
                .replace('<VERSION>', '#version 300 es')
                .replace('NOTHING', 'USE_TRIANGLES'), _shaders_PathTracerToTextureFragment_glsl__WEBPACK_IMPORTED_MODULE_3__["default"]
                .replace('<VERSION>', '#version 300 es')
                .replace('NOTHING', 'USE_TRIANGLES')
                .replace('<NUM_VERTICES>', tObj.numVertices.toString())
                .replace('<NUM_VOLUMES>', pObj.volumes.length.toString())
                .replace('<NUM_TRIANGLES>', tObj.numTriangles.toString()));
            // upload triangles to the GPU
            this.uploadUniforms(pObj);
        }
        else {
            this.toTextureProgram = new _gl_glProgram__WEBPACK_IMPORTED_MODULE_9__["glProgram"](gl, _shaders_PathTracerToTextureVertex_glsl__WEBPACK_IMPORTED_MODULE_2__["default"]
                .replace('<VERSION>', ''), _shaders_PathTracerToTextureFragment_glsl__WEBPACK_IMPORTED_MODULE_3__["default"]
                .replace('<VERSION>', ''));
        }
        this.toTextureVertexAttribute = new _gl_glAttributeBuffer__WEBPACK_IMPORTED_MODULE_10__["glAttributeBuffer"](gl, this.toTextureProgram, 'vertex');
        this.toTextureVertexAttribute.upload(this.vertices);
        p.log('compile');
    };
    /**
     * Uploads all the triangle data to WebGL
     *
     * @param program The program to upload to
     */
    PathTracerRenderer.prototype.uploadUniforms = function (pObj) {
        var gl = this.gl;
        var tObj = pObj.tObj;
        // upload the big chunks as Uniform Blocks
        var blockBinding = 2;
        this.vBlock = new _gl_glUniformBlock__WEBPACK_IMPORTED_MODULE_12__["glUniformBlock"](gl, this.toTextureProgram, 'MyVerticesBlock', blockBinding);
        // put the data into a Float32Array for uploading
        var vData = new Float32Array(pObj.tObj.numVertices * 4);
        for (var i = 0; i < tObj.numVertices; i++) {
            vData[4 * i + 0] = tObj.vertices[3 * i + 0];
            vData[4 * i + 1] = tObj.vertices[3 * i + 1];
            vData[4 * i + 2] = tObj.vertices[3 * i + 2];
            vData[4 * i + 3] = 0;
        }
        this.vBlock.upload(vData);
        blockBinding = 3;
        this.tBlock = new _gl_glUniformBlock__WEBPACK_IMPORTED_MODULE_12__["glUniformBlock"](gl, this.toTextureProgram, 'MyTrianglesBlock', blockBinding);
        // put the data into a Float32Array for uploading
        var tData = new Int32Array(tObj.numTriangles * 4);
        var index = 0;
        for (var v = 0; v < pObj.volumes.length; v++) {
            var vol = pObj.volumes[v];
            for (var i = 0; i < vol.triangles.length; i++) {
                var t = vol.triangles[i];
                tData[index++] = t.i1;
                tData[index++] = t.i2;
                tData[index++] = t.i3;
                tData[index++] = 0;
            }
        }
        this.tBlock.upload(tData);
        // Upload the volume info as a standard uniform
        var uni = new _gl_glUniform__WEBPACK_IMPORTED_MODULE_16__["glUniform"](gl, this.toTextureProgram);
        var startIndex = 0;
        for (var i = 0; i < pObj.volumes.length; i++) {
            var vol = pObj.volumes[i];
            uni.set('object.volumes[' + i + '].startIndex', startIndex, true);
            uni.set('object.volumes[' + i + '].numTriangles', vol.triangles.length, true);
            uni.set('object.volumes[' + i + '].boxMin', vol.boxMin);
            uni.set('object.volumes[' + i + '].boxMax', vol.boxMax);
            startIndex += vol.triangles.length;
        }
        uni.set('object.boxMin', tObj.box.min);
        uni.set('object.boxMax', tObj.box.max);
    };
    Object.defineProperty(PathTracerRenderer.prototype, "renderMode", {
        get: function () {
            return this.mainView;
        },
        enumerable: false,
        configurable: true
    });
    PathTracerRenderer.prototype.restart = function () {
        this.uniforms.uSample = 0;
    };
    PathTracerRenderer.prototype.getEyeRay = function (matrix, x, y) {
        var vec = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_5__["Vec4"]([x, y, 0, 1]);
        return matrix.multV(vec).divideByW().subtract(this.uniforms.uEye);
    };
    PathTracerRenderer.prototype.updateTexture = function (modelviewProjection) {
        var gl = this.gl;
        // implement aliasing by random sampling within a pixel
        var x = (Math.random() * 2 - 1) / this.uniforms.uTextureSize;
        var y = (Math.random() * 2 - 1) / this.uniforms.uTextureSize;
        var z = 0;
        var v = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_5__["Vec3"]([x, y, z]);
        var jitter = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_17__["Mat4"].fromTranslation(v);
        var matrix = jitter.multM(modelviewProjection).inverse();
        this.uniforms.uRay00 = this.getEyeRay(matrix, -1, -1);
        this.uniforms.uRay01 = this.getEyeRay(matrix, -1, +1);
        this.uniforms.uRay10 = this.getEyeRay(matrix, +1, -1);
        this.uniforms.uRay11 = this.getEyeRay(matrix, +1, +1);
        // set uniforms
        var uni = new _gl_glUniform__WEBPACK_IMPORTED_MODULE_16__["glUniform"](gl, this.toTextureProgram);
        uni.setAll(this.uniforms);
        // render to texture
        gl.viewport(0, 0, this.uniforms.uTextureSize, this.uniforms.uTextureSize);
        this.textures[0].bind();
        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
        this.frameBuffer.bind();
        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.textures[1].get(), 0);
        this.toTextureVertexAttribute.bind(2);
        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
        var data = this.analyzer.run(gl, this.uniforms.uLightAlpha, this.uniforms.uShadowAlpha);
        this.uniforms.uMaxChroma = data.maxChroma;
        var cr = new _GUI_ColorRange__WEBPACK_IMPORTED_MODULE_18__["ColorRange"]([data.darkestLightColor.toHtmlColor(), data.avgLightColor.toHtmlColor(), data.lightestLightColor.toHtmlColor()]);
        this.uniforms.uHighlightColor = data.highlightColor;
        this.uniforms.uLightLightColor = cr.get(0.85).toGlColor();
        this.uniforms.uMidLightColor = cr.get(0.5).toGlColor();
        this.uniforms.uDarkLightColor = cr.get(0.15).toGlColor();
        cr = new _GUI_ColorRange__WEBPACK_IMPORTED_MODULE_18__["ColorRange"]([data.darkestShadowColor.toHtmlColor(), data.avgShadowColor.toHtmlColor(), data.lightestShadowColor.toHtmlColor()]);
        //this.uniforms.uShadowColor = data.terminatorColor;
        this.uniforms.uShadowColor = data.avgShadowColor;
        this.uniforms.uReflectedLightColor = cr.get(1).toGlColor();
        this.uniforms.uDarkAccentColor = cr.get(0.0).toGlColor();
        gl.bindFramebuffer(gl.FRAMEBUFFER, null);
        // ping pong textures
        this.textures.reverse();
        this.uniforms.uSample++;
        this.uniforms.uRandom = Math.random();
    };
    ;
    PathTracerRenderer.prototype.displayTexture = function () {
        var gl = this.gl;
        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
        this.toScreenProgram.use();
        this.textures[0].bind();
        this.toScreenVertexAttribute.bind(2);
        // display the main screen
        var uni = new _gl_glUniform__WEBPACK_IMPORTED_MODULE_16__["glUniform"](gl, this.toScreenProgram);
        this.uniforms.uScale = 1.0;
        this.uniforms.uXOffset = 0.0;
        this.uniforms.uYOffset = 0.0;
        this.uniforms.uMode = this.mainView;
        uni.setAll(this.uniforms);
        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
        // display the smaller views
        this.uniforms.uScale = 0.2;
        for (var i = 0; i < this.smallViews.length; i++) {
            this.uniforms.uXOffset = 1.0 - (this.smallViews.length - i - 0.5) * (2 * this.uniforms.uScale);
            this.uniforms.uYOffset = 1.0 - this.uniforms.uScale;
            this.uniforms.uMode = this.smallViews[i];
            uni.setAll(this.uniforms);
            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
        }
    };
    PathTracerRenderer.prototype.swap = function (pos) {
        this.smallViews = [
            RenderMode.Chroma,
            RenderMode.Value,
            RenderMode.Bands,
        ];
        if (this.mainView == this.smallViews[pos]) {
            this.mainView = RenderMode.Artist;
        }
        else {
            this.mainView = this.smallViews[pos];
            this.smallViews[pos] = RenderMode.Artist;
        }
        this.displayTexture();
    };
    return PathTracerRenderer;
}());



/***/ }),

/***/ "./src/Apps/PathTracer/Volume.ts":
/*!***************************************!*\
  !*** ./src/Apps/PathTracer/Volume.ts ***!
  \***************************************/
/*! exports provided: Volume */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Volume", function() { return Volume; });
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Util3D/Vec */ "./src/Util3D/Vec.ts");

var MAX = 1000; // INFINITY in our rendering world
/**
 * Class that manages a set of triangles within a given space
 */
var Volume = /** @class */ (function () {
    function Volume() {
        /**
         * The triangles enclosed within the bounding box
         */
        this.triangles = [];
        /**
         * Bounding box minimum
         */
        this.boxMin = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([MAX, MAX, MAX]);
        /**
         * Bounding box maximum
         */
        this.boxMax = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([-MAX, -MAX, -MAX]);
    }
    /**
     * Stores a triangle and updates the bounding box
     *
     * @param triangle The triangle to store
     */
    Volume.prototype.push = function (triangle) {
        this.triangles.push(triangle);
        this.boxMin.x = Math.min(this.boxMin.x, triangle.minX);
        this.boxMin.y = Math.min(this.boxMin.y, triangle.minY);
        this.boxMin.z = Math.min(this.boxMin.z, triangle.minZ);
        this.boxMax.x = Math.max(this.boxMax.x, triangle.maxX);
        this.boxMax.y = Math.max(this.boxMax.y, triangle.maxY);
        this.boxMax.z = Math.max(this.boxMax.z, triangle.maxZ);
    };
    return Volume;
}());



/***/ }),

/***/ "./src/Apps/Squint/ArtSeeApp.ts":
/*!**************************************!*\
  !*** ./src/Apps/Squint/ArtSeeApp.ts ***!
  \**************************************/
/*! exports provided: SeeApp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SeeApp", function() { return SeeApp; });
/* harmony import */ var webrtc_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! webrtc-adapter */ "./node_modules/webrtc-adapter/src/js/adapter_core.js");
/* harmony import */ var _Camera__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Camera */ "./src/Apps/Squint/Camera.ts");
/* harmony import */ var _GUI_Slider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../GUI/Slider */ "./src/GUI/Slider.ts");
/* harmony import */ var _Version__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Version */ "./src/Apps/Squint/Version.ts");
/* harmony import */ var _GUI_GUI__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../GUI/GUI */ "./src/GUI/GUI.ts");
/* harmony import */ var nosleep_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! nosleep.js */ "./node_modules/nosleep.js/src/index.js");
/* harmony import */ var nosleep_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(nosleep_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _ImageFilter__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ImageFilter */ "./src/Apps/Squint/ImageFilter.ts");








var SeeApp = /** @class */ (function () {
    function SeeApp() {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-call
        this.noSleep = new nosleep_js__WEBPACK_IMPORTED_MODULE_5___default.a();
        this.busy = false;
        // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access
        this.noSleep.enable();
        document.title += (' ' + _Version__WEBPACK_IMPORTED_MODULE_3__["Version"].Build);
    }
    SeeApp.prototype.create = function (div) {
        var _this = this;
        div.id = 'ArtSeeApp';
        this.div = _GUI_GUI__WEBPACK_IMPORTED_MODULE_4__["GUI"].create('div', 'BodyDiv', div);
        this.canvas = _GUI_GUI__WEBPACK_IMPORTED_MODULE_4__["GUI"].create('canvas', 'Canvas', this.div);
        this.numLevels = new _GUI_Slider__WEBPACK_IMPORTED_MODULE_2__["Slider"](this.div, {
            label: 'Levels',
            min: 2,
            max: 25,
            value: 25,
            onGetText: function (slider) {
                if (slider.value === slider.max) {
                    return '∞';
                }
                else {
                    return slider.value.toFixed(0);
                }
            }
        });
        this.chroma = new _GUI_Slider__WEBPACK_IMPORTED_MODULE_2__["Slider"](this.div, {
            label: 'Chroma',
            min: 0,
            max: 200,
            value: 100,
            onGetText: function (slider) { return slider.value.toFixed(0) + '%'; },
        });
        this.camera = new _Camera__WEBPACK_IMPORTED_MODULE_1__["Camera"](this.div);
        _Camera__WEBPACK_IMPORTED_MODULE_1__["Camera"].getCameras(function (constraint, cameraIndex, numCameras) {
            if (cameraIndex === (numCameras - 1)) {
                _this.camera.start(constraint)
                    .catch(function (err) {
                    alert('Cannot start camera: ' + err);
                });
            }
        });
        window.addEventListener('resize', function () { return _this.updateSizes(); });
        this.updateSizes();
        // kick off the rendering loop
        this.drawImg();
    };
    SeeApp.prototype.buildMenu = function (menubar) {
        var _this = this;
        var cameraMenu = menubar.addSubMenu('Camera');
        _Camera__WEBPACK_IMPORTED_MODULE_1__["Camera"].getCameras(function (constraint, cameraIndex, numCameras) {
            var radioButton = cameraMenu.addRadiobutton({
                label: constraint.label,
                oncheck: function () {
                    _this.camera.start(constraint)
                        .catch(function (err) {
                        alert('Cannot start camera: ' + err);
                    });
                },
                checked: cameraIndex === (numCameras - 1),
                group: 'CamerasGroup',
            });
        });
    };
    SeeApp.prototype.updateSizes = function () {
        var menuBar = document.getElementById('Menubar');
        var menubarHeight = menuBar.getBoundingClientRect().height;
        var style = getComputedStyle(this.chroma.div);
        var sliderHeight = this.chroma.div.getBoundingClientRect().height + Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_6__["pxToNumber"])(style.marginTop) + Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_6__["pxToNumber"])(style.marginBottom);
        var viewWidth = window.innerWidth;
        var viewHeight = window.innerHeight;
        this.canvas.width = viewWidth;
        this.canvas.height = viewHeight - menubarHeight - 2 * sliderHeight;
    };
    SeeApp.prototype.drawImg = function () {
        var _this = this;
        requestAnimationFrame(function () { return _this.drawImg(); });
        if (this.busy) {
            return;
        }
        this.busy = true;
        var canvasWidth = this.canvas.width;
        var canvasHeight = this.canvas.height;
        var canvasAR = canvasWidth / canvasHeight;
        var cameraWidth = this.camera.videoWidth;
        var cameraHeight = this.camera.videoHeight;
        var cameraAR = cameraWidth / cameraHeight;
        var width;
        var height;
        if (canvasAR > cameraAR) {
            height = canvasHeight;
            width = height * cameraAR;
        }
        else {
            width = canvasWidth;
            height = width / cameraAR;
        }
        var megaPixels = width * height / (1000 * 1000);
        var scale = 1;
        while (megaPixels > 1) {
            megaPixels /= 4;
            width /= 2;
            height /= 2;
            scale /= 2;
        }
        var numLevels = this.numLevels.value < this.numLevels.max ? this.numLevels.value : NaN;
        var blurSize = 0;
        if (isNaN(numLevels) === false) {
            blurSize = Math.min(3, 30 / numLevels);
        }
        var imageData = this.camera.takePicture2(megaPixels, blurSize);
        if (imageData !== null) {
            var ctx = this.canvas.getContext('2d');
            if (this.chroma.value !== 100) {
                _ImageFilter__WEBPACK_IMPORTED_MODULE_7__["ImageFilter"].chroma(imageData, this.chroma.value);
            }
            var white = 1;
            var black = 0;
            var midPt = 0.5;
            var midValue = 0.5;
            if (isNaN(numLevels) === false) {
                _ImageFilter__WEBPACK_IMPORTED_MODULE_7__["ImageFilter"].levels(imageData, white, black, midPt, midValue, numLevels);
            }
            var tempCanvas = document.createElement('canvas');
            tempCanvas.width = width;
            tempCanvas.height = height;
            var tempCtx = tempCanvas.getContext('2d');
            tempCtx.putImageData(imageData, 0, 0);
            width /= scale;
            height /= scale;
            ctx.drawImage(tempCanvas, (canvasWidth - width) / 2, (canvasHeight - height) / 2, width, height);
        }
        this.busy = false;
    };
    return SeeApp;
}());



/***/ }),

/***/ "./src/Apps/Squint/BandwidthTracker.ts":
/*!*********************************************!*\
  !*** ./src/Apps/Squint/BandwidthTracker.ts ***!
  \*********************************************/
/*! exports provided: BandwidthTracker */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BandwidthTracker", function() { return BandwidthTracker; });
/* harmony import */ var _Util_FPS__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Util/FPS */ "./src/Util/FPS.ts");
/* harmony import */ var _Util_Stopwatch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Util/Stopwatch */ "./src/Util/Stopwatch.ts");


var Transfer = /** @class */ (function () {
    function Transfer(bytes) {
        this.elapsedS = NaN;
        this.bytes = bytes;
    }
    Transfer.prototype.end = function (elapsedS) {
        this.elapsedS = elapsedS;
    };
    return Transfer;
}());
/**
 * This class monitors the upload rate and recommends a frame rate to match. We
 * can then use this to pace our uploads to match available bandwidth.
 */
var BandwidthTracker = /** @class */ (function () {
    function BandwidthTracker() {
        this.transfers = [];
        this._fps = new _Util_FPS__WEBPACK_IMPORTED_MODULE_0__["FPS"]();
        this.stopwatch = new _Util_Stopwatch__WEBPACK_IMPORTED_MODULE_1__["Stopwatch"]();
        this.activeTransfer = null;
    }
    Object.defineProperty(BandwidthTracker.prototype, "numSamples", {
        get: function () {
            return this.transfers.length;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BandwidthTracker.prototype, "lastTransferBytes", {
        get: function () {
            if (this.activeTransfer !== null) {
                return this.activeTransfer.bytes;
            }
            else {
                return NaN;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BandwidthTracker.prototype, "elapsedS", {
        get: function () {
            var elapsedS = 0;
            for (var _i = 0, _a = this.transfers; _i < _a.length; _i++) {
                var transfer = _a[_i];
                elapsedS += transfer.elapsedS;
            }
            return elapsedS;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BandwidthTracker.prototype, "bytes", {
        get: function () {
            var bytes = 0;
            for (var _i = 0, _a = this.transfers; _i < _a.length; _i++) {
                var transfer = _a[_i];
                bytes += transfer.bytes;
            }
            return bytes;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BandwidthTracker.prototype, "megaBitsPerSec", {
        /**
         * bandwidth, Mbps
         */
        get: function () {
            if (this.transfers.length < 2) {
                return Number.NaN;
            }
            else {
                return (8 * this.bytes / (1000 * 1000)) / this.elapsedS;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BandwidthTracker.prototype, "fps", {
        get: function () {
            return this._fps.rate;
        },
        enumerable: false,
        configurable: true
    });
    BandwidthTracker.prototype.pause = function () {
        this.stopwatch.stop();
    };
    BandwidthTracker.prototype.resume = function () {
        this.stopwatch.start();
    };
    /**
     * Call this data is transfered
     */
    BandwidthTracker.prototype.tick = function (bytes) {
        // create an object for tracking the transfer
        var transfer = new Transfer(bytes);
        // capture the transfer
        if (this.activeTransfer !== null) {
            this.activeTransfer.end(this.stopwatch.elapsedS);
            this.transfers.push(this.activeTransfer);
        }
        this.activeTransfer = transfer;
        // start a new transfer
        this.activeTransfer = new Transfer(bytes);
        this.stopwatch.restart();
        this._fps.tick();
        // trim existing transfers
        while (this.transfers.length > 20 ||
            (this.transfers.length > 2 && (this.elapsedS > 3))) {
            this.transfers.shift();
        }
    };
    return BandwidthTracker;
}());



/***/ }),

/***/ "./src/Apps/Squint/Camera.ts":
/*!***********************************!*\
  !*** ./src/Apps/Squint/Camera.ts ***!
  \***********************************/
/*! exports provided: CameraRotation, Camera */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CameraRotation", function() { return CameraRotation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Camera", function() { return Camera; });
/* harmony import */ var _SquintApp__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SquintApp */ "./src/Apps/Squint/SquintApp.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _SquintStrings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SquintStrings */ "./src/Apps/Squint/SquintStrings.ts");
/* harmony import */ var _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../GUI/PointerEventHandler */ "./src/GUI/PointerEventHandler.ts");
/* harmony import */ var _Rect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Rect */ "./src/Apps/Squint/Rect.ts");
/* eslint-disable @typescript-eslint/no-unsafe-member-access */
/* eslint-disable @typescript-eslint/no-unsafe-assignment */





var CameraRotation;
(function (CameraRotation) {
    CameraRotation[CameraRotation["DEG_0"] = 0] = "DEG_0";
    CameraRotation[CameraRotation["DEG_90"] = Math.PI / 2] = "DEG_90";
    CameraRotation[CameraRotation["DEG_180"] = Math.PI] = "DEG_180";
    CameraRotation[CameraRotation["DEG_270"] = 3 * Math.PI / 2] = "DEG_270";
})(CameraRotation || (CameraRotation = {}));
var Camera = /** @class */ (function () {
    function Camera(parent) {
        var _this = this;
        // the area of the camera that we capture in a photo
        this.capture = new _Rect__WEBPACK_IMPORTED_MODULE_4__["Rect"]();
        // id for the active camera
        this._deviceId = '';
        this.onPaused = null;
        this.onResume = null;
        this.rotation = CameraRotation.DEG_0;
        this.hiddenCanvas = document.createElement('canvas');
        this.video = document.createElement('video');
        this.video.id = 'Video';
        this.video.autoplay = true;
        this.video.setAttribute('playsinline', 'true'); // needed for iPhones
        this.video.onerror = function (err) {
            alert('video.onerror(): ' + err);
        };
        parent.appendChild(this.video);
        this.overlayCanvas = document.createElement('canvas');
        this.overlayCanvas.id = 'VideoOverlay';
        parent.appendChild(this.overlayCanvas);
        var handler = new _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_3__["PointerEventHandler"](this.overlayCanvas);
        var hit = _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].None;
        handler.onDown = function (pos) {
            hit = _this.getHit(pos);
        };
        handler.onMove = function (pos) {
            var hit = _this.getHit(pos);
            switch (hit) {
                case _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].UL:
                    _this.overlayCanvas.style.cursor = 'nwse-resize';
                    break;
                case _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].UR:
                    _this.overlayCanvas.style.cursor = 'nesw-resize';
                    break;
                case _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].LL:
                    _this.overlayCanvas.style.cursor = 'nesw-resize';
                    break;
                case _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].LR:
                    _this.overlayCanvas.style.cursor = 'nwse-resize';
                    break;
                case _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].Inside:
                    if (_this.capture.width < _this.videoWidth || _this.capture.height < _this.videoHeight) {
                        _this.overlayCanvas.style.cursor = 'move';
                    }
                    else {
                        _this.overlayCanvas.style.cursor = 'default';
                    }
                    break;
                case _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].None:
                    _this.overlayCanvas.style.cursor = 'default';
                    break;
            }
        };
        handler.onDrag = function (pos, delta) {
            var ratio = _this.videoWidth / _this.clientWidth;
            delta.x *= ratio;
            delta.y *= ratio;
            var min = 200;
            // check for limits
            if (hit === _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].UL || hit === _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].LL || hit === _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].Inside) {
                if (_this.capture.width - delta.x < min) {
                    delta.x = _this.capture.width - min;
                }
                if (_this.capture.x + delta.x < 0) {
                    delta.x = -_this.capture.x;
                }
            }
            if (hit === _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].UR || hit === _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].LR || hit === _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].Inside) {
                if (_this.capture.right + delta.x > _this.videoWidth) {
                    delta.x = _this.videoWidth - _this.capture.right;
                }
                if (_this.capture.width + delta.x < min) {
                    delta.x = min - _this.capture.width;
                }
            }
            if (hit === _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].UL || hit === _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].UR || hit === _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].Inside) {
                if (_this.capture.y + delta.y + min > _this.capture.bottom) {
                    delta.y = _this.capture.bottom - _this.capture.y - min;
                }
                if (_this.capture.y + delta.y < 0) {
                    delta.y = -_this.capture.y;
                }
            }
            if (hit === _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].LL || hit === _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].LR || hit === _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].Inside) {
                if (_this.capture.height + delta.y < min) {
                    delta.y = min - _this.capture.height;
                }
                if (_this.capture.bottom + delta.y > _this.videoHeight) {
                    delta.y = _this.videoHeight - _this.capture.bottom;
                }
            }
            // do the move
            switch (hit) {
                case _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].UL:
                    _this.capture.x += delta.x;
                    _this.capture.y += delta.y;
                    _this.capture.width -= delta.x;
                    _this.capture.height -= delta.y;
                    _this.drawOverlay();
                    break;
                case _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].UR:
                    _this.capture.y += delta.y;
                    _this.capture.width += delta.x;
                    _this.capture.height -= delta.y;
                    _this.drawOverlay();
                    break;
                case _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].LL:
                    _this.capture.x += delta.x;
                    _this.capture.width -= delta.x;
                    _this.capture.height += delta.y;
                    _this.drawOverlay();
                    break;
                case _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].LR:
                    _this.capture.width += delta.x;
                    _this.capture.height += delta.y;
                    _this.drawOverlay();
                    break;
                case _Rect__WEBPACK_IMPORTED_MODULE_4__["RectHit"].Inside:
                    _this.capture.x += delta.x;
                    _this.capture.y += delta.y;
                    break;
            }
        };
        document.addEventListener('visibilitychange', function () {
            if (_this.visible) {
                if (document.visibilityState === 'visible') {
                    if (_this.onResume) {
                        _this.onResume();
                    }
                }
                else {
                    if (_this.onPaused) {
                        _this.onPaused();
                    }
                }
            }
        });
        /*
        window.addEventListener('orientationchange', () => {
           this.capture.x = 0;
           this.capture.y = 0;
           this.capture.width = this.videoWidth;
           this.capture.height = this.videoHeight;
           let rect = this.video.getBoundingClientRect();
           this.overlayCanvas.style.left = rect.left + 'px';
           this.overlayCanvas.style.right = rect.right + 'px';
           this.overlayCanvas.style.top = rect.top + 'px';
           this.overlayCanvas.style.bottom = rect.bottom + 'px';
        });
        */
    }
    Object.defineProperty(Camera.prototype, "deviceId", {
        get: function () {
            return this._deviceId;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Camera.prototype, "paused", {
        get: function () {
            return (document.visibilityState !== 'visible');
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Camera.prototype, "videoWidth", {
        get: function () {
            return this.video.videoWidth;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Camera.prototype, "videoHeight", {
        get: function () {
            return this.video.videoHeight;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Camera.prototype, "clientWidth", {
        get: function () {
            return this.video.clientWidth;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Camera.prototype, "clientHeight", {
        get: function () {
            return this.video.clientHeight;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Camera.prototype, "offset", {
        get: function () {
            var style = getComputedStyle(this.video);
            return Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_1__["pxToNumber"])(style.borderWidth) + Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_1__["pxToNumber"])(style.margin);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Camera.prototype, "width", {
        set: function (value) {
            this.video.style.width = value + 'px';
            this.overlayCanvas.style.width = (value + 2 * this.offset) + 'px';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Camera.prototype, "height", {
        set: function (value) {
            this.video.style.height = value + 'px';
            this.overlayCanvas.style.height = (value + 2 * this.offset) + 'px';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Camera.prototype, "visible", {
        get: function () {
            return (getComputedStyle(this.video).display !== 'none');
        },
        set: function (flag) {
            if (flag === this.visible) {
                return;
            }
            if (flag) {
                this.video.style.display = 'block';
                this.overlayCanvas.style.display = 'block';
            }
            else {
                this.video.style.display = 'none';
                this.overlayCanvas.style.display = 'none';
            }
        },
        enumerable: false,
        configurable: true
    });
    Camera.prototype.getHit = function (pos) {
        var scale = this.clientWidth / this.videoWidth;
        var rect = this.capture.getScaled(scale);
        var offset = this.offset;
        rect.x += offset;
        rect.y += offset;
        var radius = 0.5 * Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_1__["getEmPixels"])();
        var epsilon = 3 * radius;
        return rect.hit(pos, epsilon);
    };
    Camera.prototype.drawOverlay = function () {
        var ctx = this.overlayCanvas.getContext('2d');
        var w = this.overlayCanvas.width;
        var h = this.overlayCanvas.height;
        var m = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_1__["getEmPixels"])();
        ctx.clearRect(0, 0, w, h);
        ctx.fillStyle = 'rgba(0,0,0,0.6)';
        ctx.fillRect(m, m, w - 2 * m, h - 2 * m);
        var scale = this.video.clientWidth / this.video.videoWidth;
        var rect = this.capture.getScaled(scale);
        ctx.clearRect(m + rect.x, m + rect.y, rect.width, rect.height);
        // handles
        ctx.fillStyle = 'lightgreen';
        ctx.strokeStyle = 'darkgreen';
        var radius = 0.5 * Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_1__["getEmPixels"])();
        ctx.beginPath();
        ctx.arc(m + rect.left, m + rect.top, radius, 0, 2 * Math.PI);
        ctx.fill();
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(m + rect.right, m + rect.top, radius, 0, 2 * Math.PI);
        ctx.fill();
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(m + rect.left, m + rect.bottom, radius, 0, 2 * Math.PI);
        ctx.fill();
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(m + rect.right, m + rect.bottom, radius, 0, 2 * Math.PI);
        ctx.fill();
        ctx.stroke();
    };
    Camera.prototype.takePicture = function (megaPixels, jpegQuality) {
        var _this = this;
        if (this.video.readyState != 4) {
            return Promise.reject(_SquintStrings__WEBPACK_IMPORTED_MODULE_2__["SquintStrings"].CAMERA_NOT_READY);
        }
        if (this.paused) {
            return Promise.reject(_SquintStrings__WEBPACK_IMPORTED_MODULE_2__["SquintStrings"].CAMERA_NOT_READY);
        }
        if (this.video.videoHeight === 0 || this.video.videoWidth === 0) {
            return Promise.reject('XX Video Size = 0');
        }
        this.overlayCanvas.width = this.overlayCanvas.clientWidth;
        this.overlayCanvas.height = this.overlayCanvas.clientHeight;
        this.drawOverlay();
        var scale = Math.min(Math.sqrt(1000000 * megaPixels / (this.capture.width * this.capture.height)), 1);
        var imgWidth = this.capture.width * scale;
        var imgHeight = this.capture.height * scale;
        if (this.rotation === CameraRotation.DEG_0 || this.rotation === CameraRotation.DEG_180) {
            this.hiddenCanvas.width = imgWidth;
            this.hiddenCanvas.height = imgHeight;
        }
        else {
            this.hiddenCanvas.width = imgHeight;
            this.hiddenCanvas.height = imgWidth;
        }
        var context = this.hiddenCanvas.getContext('2d');
        if (context === null) {
            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_0__["debug"])('Cannot get context 2D');
            return Promise.reject(_SquintStrings__WEBPACK_IMPORTED_MODULE_2__["SquintStrings"].CAMERA_NOT_READY);
        }
        context.rotate(this.rotation);
        switch (this.rotation) {
            case CameraRotation.DEG_0:
                break;
            case CameraRotation.DEG_90:
                context.translate(0, -imgHeight);
                break;
            case CameraRotation.DEG_180:
                context.translate(-imgWidth, -imgHeight);
                break;
            case CameraRotation.DEG_270:
                context.translate(-imgWidth, 0);
                break;
        }
        context.drawImage(this.video, this.capture.x, this.capture.y, this.capture.width, this.capture.height, 0, 0, imgWidth, imgHeight);
        return new Promise(function (resolve, reject) {
            _this.hiddenCanvas.toBlob(function (blob) {
                // the camera could have stopped since we started this
                // process. If so, abandon the result as we don't know
                // when the camera went off
                if (_this.video.readyState != 4) {
                    return reject(_SquintStrings__WEBPACK_IMPORTED_MODULE_2__["SquintStrings"].CAMERA_NOT_READY);
                }
                else if (_this.paused) {
                    return reject(_SquintStrings__WEBPACK_IMPORTED_MODULE_2__["SquintStrings"].CAMERA_NOT_READY);
                }
                else {
                    resolve(blob);
                }
            }, 'image/jpeg', jpegQuality);
        });
    };
    Camera.prototype.takePicture2 = function (megaPixels, blur) {
        if (this.video.readyState != 4) {
            return null;
            //return Promise.reject(SquintStrings.CAMERA_NOT_READY);
        }
        if (this.paused) {
            return null;
            //return Promise.reject(SquintStrings.CAMERA_NOT_READY);
        }
        if (this.video.videoHeight === 0 || this.video.videoWidth === 0) {
            return null;
            //return Promise.reject('XX Video Size = 0');
        }
        this.overlayCanvas.width = this.overlayCanvas.clientWidth;
        this.overlayCanvas.height = this.overlayCanvas.clientHeight;
        this.drawOverlay();
        var scale = Math.min(Math.sqrt(1000000 * megaPixels / (this.capture.width * this.capture.height)), 1);
        this.hiddenCanvas.width = this.capture.width * scale;
        this.hiddenCanvas.height = this.capture.height * scale;
        var context = this.hiddenCanvas.getContext('2d');
        if (context === null) {
            return null;
            //return Promise.reject(SquintStrings.CAMERA_NOT_READY);
        }
        context.filter = 'blur(' + blur + 'px)';
        context.imageSmoothingEnabled = true;
        context.imageSmoothingQuality = 'high';
        context.drawImage(this.video, this.capture.x, this.capture.y, this.capture.width, this.capture.height, 0, 0, this.hiddenCanvas.width, this.hiddenCanvas.height);
        return context.getImageData(0, 0, this.hiddenCanvas.width, this.hiddenCanvas.height);
    };
    Camera.prototype.start = function (desired) {
        var _this = this;
        var constraints;
        if (desired.deviceId && desired.deviceId.toString().trim().length > 0) {
            constraints = {
                video: {
                    width: { ideal: desired.width ? desired.width : 10 * 1000 },
                    height: { ideal: desired.height ? desired.height : 10 * 1000 },
                    facingMode: desired.facingMode,
                    deviceId: desired.deviceId,
                },
                audio: false,
            };
        }
        else {
            //debug('no device id, falling back to any camera');
            constraints = {
                video: {
                    width: { ideal: 10 * 1000 },
                    height: { ideal: 10 * 1000 },
                    facingMode: desired.facingMode,
                },
                audio: false,
            };
        }
        return new Promise(function (resolve, reject) {
            navigator.mediaDevices.getUserMedia(constraints)
                .then(function (stream) {
                if (stream === null) {
                    reject('Could not create video stream');
                }
                else {
                    // let the Video object know that the user has know granted user permission
                    // to use the camera
                    Camera.videoEnabled = true;
                    _this.video.srcObject = stream;
                    var track_1 = stream.getVideoTracks()[0];
                    _this.video.play()
                        .then(function () {
                        _this.capture.x = 0;
                        _this.capture.y = 0;
                        _this.capture.width = _this.video.videoWidth;
                        _this.capture.height = _this.video.videoHeight;
                        if (desired.deviceId) {
                            _this._deviceId = desired.deviceId.toString();
                        }
                        else {
                            _this._deviceId = '';
                        }
                        resolve(track_1);
                    })
                        .catch(function (err) {
                        reject(err);
                    });
                }
            })
                .catch(function (reason) {
                reject('Video error: ' + reason);
            });
        });
    };
    Camera.prototype.stop = function () {
        if (this.video.srcObject) {
            // Using the camera is not robust. Applying constraints to change things
            // like which camera is in use only works sometimes. The most robust I can
            // make it is to close the video element and create a new one.
            var stream = this.video.srcObject;
            stream.getTracks().forEach(function (track) {
                track.stop();
            });
        }
    };
    Camera.prototype.applyAdvancedConstraints = function (advancedConstraints) {
        var stream = this.video.srcObject;
        var track = stream.getVideoTracks()[0];
        var constraint = {};
        for (var _i = 0, advancedConstraints_1 = advancedConstraints; _i < advancedConstraints_1.length; _i++) {
            var item = advancedConstraints_1[_i];
            constraint[item.constraint] = item.value();
        }
        console.log('setting advanced constraints: ' + JSON.stringify(constraint, null, ' '));
        var constraints = { advanced: [constraint] };
        track.applyConstraints((constraints))
            .catch(function (err) {
            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_0__["debug"])('Cannot apply constraints: ' + err);
        });
    };
    Camera.prototype.getCapabilities = function () {
        if (this.video.srcObject) {
            var stream = this.video.srcObject;
            var track = stream.getVideoTracks()[0];
            if (track.getCapabilities) {
                return track.getCapabilities();
            }
        }
        return {};
    };
    Camera.numToString = function (num) {
        if (Number.isInteger(num)) {
            return num.toString();
        }
        else {
            return num.toFixed(3);
        }
    };
    Camera.capabilityToString = function (capabilities, name) {
        var obj = capabilities[name];
        var str = name + ': ';
        if (typeof obj === 'object') {
            if (obj['min'] !== undefined) {
                str += Camera.numToString(obj['min']) + ' to ' + Camera.numToString(obj['max']);
            }
            else if (obj instanceof Array) {
                for (var i = 0; i < obj.length; i++) {
                    if (i > 0) {
                        str += ', ';
                    }
                    str += JSON.stringify(obj[i]);
                }
            }
            else {
                str += JSON.stringify(obj);
            }
        }
        else {
            str += JSON.stringify(obj);
        }
        return str;
    };
    Camera.getCameras = function (onFound) {
        var index = 0;
        navigator.mediaDevices.enumerateDevices()
            .then(function (devices) {
            var numCameras = 0;
            for (var i = 0; i < devices.length; i++) {
                var device = devices[i];
                // AvStream is the infared camera that isn't a camera in chrome
                if (device.kind === 'videoinput' && device.label.startsWith('AvStream Media Device') === false) {
                    numCameras++;
                }
            }
            if (Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_1__["iOS"])() && Camera.videoEnabled === false) {
                // iPhones and iPads don't allow you to enumerate cameras until the user
                // has given permission and that doesn't happen until the first time
                // we try to use one. 
                // TODO make this work on iPhones without the if statement
                onFound({
                    label: 'Front Camera',
                    facingMode: 'user',
                }, 0, 2);
                onFound({
                    label: 'Back Camera',
                    facingMode: 'environment',
                }, 1, 2);
            }
            else {
                var str = '';
                var count = 0;
                for (var i = 0; i < devices.length; i++) {
                    var device = devices[i];
                    if (device.kind === 'videoinput') {
                        count++;
                        str += '"' + device.deviceId + '": ' + device.label + '\n';
                    }
                }
                str = count + ' cameras found.\n' + str;
                console.log('enumerateDevices()\n' + str);
                var cameraCount = 1;
                for (var i = 0; i < devices.length; i++) {
                    var device = devices[i];
                    if (device.kind === 'videoinput' && device.label.startsWith('AvStream Media Device') === false) {
                        if (device.label.includes('INOGENI 4K')) {
                            var actual = {
                                label: 'INOGENI 4K',
                                deviceId: device.deviceId,
                                width: 2 * 1920,
                                height: 2 * 1080,
                            };
                            onFound(actual, index++, numCameras);
                        }
                        else {
                            var actual = {
                                label: 'camera ' + cameraCount++,
                                deviceId: device.deviceId,
                            };
                            onFound(actual, index++, numCameras);
                        }
                    }
                }
            }
        })
            .catch(function (err) {
            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_0__["debug"])('Cannot enumerate video devices: ' + err);
        });
    };
    Camera.videoEnabled = false;
    return Camera;
}());



/***/ }),

/***/ "./src/Apps/Squint/ChatPanel.ts":
/*!**************************************!*\
  !*** ./src/Apps/Squint/ChatPanel.ts ***!
  \**************************************/
/*! exports provided: ChatPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatPanel", function() { return ChatPanel; });
/* harmony import */ var _GUI_ListBox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../GUI/ListBox */ "./src/GUI/ListBox.ts");
/* harmony import */ var _GUI_GUI__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../GUI/GUI */ "./src/GUI/GUI.ts");
/* harmony import */ var _ResizeablePanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ResizeablePanel */ "./src/Apps/Squint/ResizeablePanel.ts");
/* harmony import */ var _SquintEvents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SquintEvents */ "./src/Apps/Squint/SquintEvents.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();




var ChatPanel = /** @class */ (function (_super) {
    __extends(ChatPanel, _super);
    function ChatPanel(squint, parent) {
        var _this = _super.call(this, parent, 'ChatPanelDiv', 'Flex', 'ChatPanel') || this;
        _this.squint = squint;
        var viewersTitleDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_1__["GUI"].create('div', 'ViewersTitleDiv', _this.div);
        viewersTitleDiv.className = 'TitleClass';
        viewersTitleDiv.innerText = 'Viewers';
        var closeButton = _GUI_GUI__WEBPACK_IMPORTED_MODULE_1__["GUI"].create('button', 'ChatPanelCloseButton', viewersTitleDiv);
        closeButton.className = 'ButtonClass';
        closeButton.innerText = 'X';
        closeButton.onclick = function () {
            _this.visible = false;
        };
        _this.viewersListBox = new _GUI_ListBox__WEBPACK_IMPORTED_MODULE_0__["ListBox"](_this.div, 'ViewersListBox');
        var chatTitleDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_1__["GUI"].create('div', 'ChatTitleDiv', _this.div);
        chatTitleDiv.className = 'TitleClass';
        chatTitleDiv.innerText = 'Chat';
        _this.chatListBox = new _GUI_ListBox__WEBPACK_IMPORTED_MODULE_0__["ListBox"](_this.div, 'ChatListBox');
        var chatTextInput = _GUI_GUI__WEBPACK_IMPORTED_MODULE_1__["GUI"].create('input', 'ChatTextInput', _this.div);
        chatTextInput.type = 'text';
        chatTextInput.placeholder = 'Type chat message here';
        chatTextInput.onkeydown = function (event) {
            if (event.keyCode === 13) {
                _this.squint.sendChatMessage(chatTextInput.value);
                chatTextInput.value = '';
            }
            event.stopPropagation();
        };
        _this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_3__["SquintEvent"].SessionInfo,
            handler: function (info) {
                _this.onSessionInfo(info);
            }
        });
        _this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_3__["SquintEvent"].ConnectionInfoUpdate,
            handler: function (info) {
                _this.onUpdateConnectionInfo(info);
            }
        });
        _this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_3__["SquintEvent"].ChatMessage,
            handler: function (src, msg) {
                _this.onChatMessage(src, msg);
            }
        });
        _this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_3__["SquintEvent"].Close,
            handler: function () {
                _this.chatListBox.clear();
                _this.viewersListBox.clear();
            }
        });
        return _this;
    }
    Object.defineProperty(ChatPanel.prototype, "numViewers", {
        get: function () {
            return this.viewersListBox.items.length - 1;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatPanel.prototype, "viewers", {
        get: function () {
            var items = [];
            this.viewersListBox.items.forEach(function (item) {
                items.push(item.div.innerText);
            });
            return items;
        },
        enumerable: false,
        configurable: true
    });
    ChatPanel.prototype.onSessionInfo = function (info) {
        this.viewersListBox.clear();
        if (info.host) {
            this.viewersListBox.addItem(info.host.userName + ' (host)', info.host.connectionId);
            this.hostConnectionId = info.host.connectionId;
        }
        for (var _i = 0, _a = info.viewers; _i < _a.length; _i++) {
            var viewer = _a[_i];
            this.viewersListBox.addItem(viewer.userName, viewer.connectionId);
        }
    };
    ChatPanel.prototype.onUpdateConnectionInfo = function (info) {
        for (var _i = 0, _a = this.viewersListBox.items; _i < _a.length; _i++) {
            var item = _a[_i];
            if (item.userData === info.connectionId) {
                if (info.connectionId === this.hostConnectionId) {
                    item.div.innerText = info.userName + ' (host)';
                }
                else {
                    item.div.innerText = info.userName;
                }
            }
        }
    };
    ChatPanel.prototype.onChatMessage = function (src, msg) {
        var item = this.chatListBox.addItem();
        item.innerHTML = '<b>' + src.userName + '</b>: ' + msg;
        item.scrollIntoView();
    };
    return ChatPanel;
}(_ResizeablePanel__WEBPACK_IMPORTED_MODULE_2__["ResizeablePanel"]));



/***/ }),

/***/ "./src/Apps/Squint/EventManager.ts":
/*!*****************************************!*\
  !*** ./src/Apps/Squint/EventManager.ts ***!
  \*****************************************/
/*! exports provided: EventManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventManager", function() { return EventManager; });
var EventManager = /** @class */ (function () {
    function EventManager() {
        this.handlers = new Map();
    }
    EventManager.prototype.on = function (name, handler) {
        var arr = this.handlers.get(name);
        if (arr) {
            arr.push(handler);
        }
        else {
            var arr_1 = [];
            arr_1.push(handler);
            this.handlers.set(name, arr_1);
        }
    };
    EventManager.prototype.remove = function (name, handler) {
        var arr = this.handlers.get(name);
        if (arr) {
            arr = arr.filter(function (elem) { return elem != handler; });
            this.handlers.set(name, arr);
        }
    };
    EventManager.prototype.emit = function (name) {
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        var arr = this.handlers.get(name);
        if (arr) {
            for (var _a = 0, arr_2 = arr; _a < arr_2.length; _a++) {
                var handler = arr_2[_a];
                try {
                    handler(args[0], args[1], args[2], args[3], args[4], args[5], args[6], args[7], args[8], args[9]);
                }
                catch (err) {
                    console.error('Unhandled exception: ' + err + '\n' + JSON.stringify(err, null, ' '));
                }
            }
        }
    };
    return EventManager;
}());



/***/ }),

/***/ "./src/Apps/Squint/ImageCanvas.ts":
/*!****************************************!*\
  !*** ./src/Apps/Squint/ImageCanvas.ts ***!
  \****************************************/
/*! exports provided: ImageCanvas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageCanvas", function() { return ImageCanvas; });
/* harmony import */ var _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../GUI/GUI */ "./src/GUI/GUI.ts");
/* harmony import */ var _Util_hsvColor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Util/hsvColor */ "./src/Util/hsvColor.ts");
/* harmony import */ var _ImageFilter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ImageFilter */ "./src/Apps/Squint/ImageFilter.ts");



var ImageCanvas = /** @class */ (function () {
    function ImageCanvas(parent, id) {
        this.zoom = 1;
        this.xOffset = 0;
        this.yOffset = 0;
        this.chroma = 100;
        this.black = 0;
        this.white = 1;
        this.midPt = 0.5;
        this.midValue = 0.5;
        this.showAsTemperature = false;
        this.numLevels = NaN;
        this.canvas = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('canvas', id, parent);
    }
    Object.defineProperty(ImageCanvas.prototype, "element", {
        get: function () {
            return this.canvas;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ImageCanvas.prototype, "width", {
        get: function () {
            return this.canvas.width;
        },
        set: function (px) {
            this.canvas.width = px;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ImageCanvas.prototype, "height", {
        get: function () {
            return this.canvas.height;
        },
        set: function (px) {
            this.canvas.height = px;
        },
        enumerable: false,
        configurable: true
    });
    ImageCanvas.prototype.clear = function () {
        var ctx = this.canvas.getContext('2d');
        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
    };
    ImageCanvas.prototype.draw = function (img) {
        this.canvas.width = this.canvas.clientWidth;
        this.canvas.height = this.canvas.clientHeight;
        var canvasWidth = this.canvas.width;
        var canvasHeight = this.canvas.height;
        var canvasAR = canvasWidth / canvasHeight;
        var imgWidth = img.width;
        var imgHeight = img.height;
        var imgAR = imgWidth / imgHeight;
        var width;
        var height;
        if (canvasAR > imgAR) {
            height = Math.floor(this.zoom * canvasHeight);
            width = Math.floor(height * imgAR);
        }
        else {
            width = Math.floor(this.zoom * canvasWidth);
            height = Math.floor(width / imgAR);
        }
        var x = (canvasWidth - width) / 2.0 + this.xOffset;
        var y = (canvasHeight - height) / 2.0 - this.yOffset;
        var ctx = this.canvas.getContext('2d');
        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        ctx.imageSmoothingEnabled = true;
        ctx.imageSmoothingQuality = 'high';
        if (isNaN(this.numLevels) === false) {
            var blurSize = Math.min(3, 30 / this.numLevels);
            ctx.filter = 'blur(' + blurSize + 'px)';
        }
        ctx.drawImage(img, x, y, width, height);
        // adjust dimensions so we're now only editing what is visible
        var right = Math.min(canvasWidth, width + x);
        var bottom = Math.min(canvasHeight, height + y);
        x = Math.max(0, x);
        y = Math.max(0, y);
        width = Math.min(right - x, canvasWidth);
        height = Math.min(bottom - y, canvasHeight);
        var imageData = ctx.getImageData(x, y, width, height);
        var data = imageData.data;
        if (this.chroma !== 100) {
            _ImageFilter__WEBPACK_IMPORTED_MODULE_2__["ImageFilter"].chroma(imageData, this.chroma);
        }
        if (this.black !== 0 || this.midPt !== 0.5 || this.midValue !== 0.5 || this.white !== 1 || isNaN(this.numLevels) === false) {
            _ImageFilter__WEBPACK_IMPORTED_MODULE_2__["ImageFilter"].levels(imageData, this.white, this.black, this.midPt, this.midValue, this.numLevels);
        }
        if (this.showAsTemperature) {
            // first compute min and max temp
            var minTemp = 255;
            var maxTemp = -255;
            var hsv = new _Util_hsvColor__WEBPACK_IMPORTED_MODULE_1__["hsvColor"]([0, 0, 0]);
            for (var i = 0; i < data.length; i += 4) {
                var r = data[i + 0];
                var g = data[i + 1];
                var b = data[i + 2];
                hsv.fromHtmlValues(r, g, b);
                var temp = this.temperature(r, g, b);
                minTemp = Math.min(minTemp, temp);
                maxTemp = Math.max(maxTemp, temp);
            }
            //console.log(minTemp + '   ' + maxTemp);
            var avgTemp = (maxTemp + minTemp) / 2;
            for (var i = 0; i < data.length; i += 4) {
                var r = data[i + 0];
                var g = data[i + 1];
                var b = data[i + 2];
                var temp = this.temperature(r, g, b);
                if (temp < avgTemp) {
                    r = 0;
                    g = 0;
                    b = 255 * (avgTemp - temp) / (avgTemp - minTemp);
                    r = 255 - b;
                    g = 255 - b;
                    b = 255;
                }
                else {
                    r = 255 * (temp - avgTemp) / (maxTemp - avgTemp);
                    g = 0;
                    b = 0;
                    g = 255 - r;
                    b = 255 - r;
                    r = 255;
                }
                data[i + 0] = r;
                data[i + 1] = g;
                data[i + 2] = b;
            }
        }
        ctx.putImageData(imageData, x, y);
    };
    ImageCanvas.prototype.temperature = function (r, g, b) {
        return 0.5 + (((g + r) / 2 - b) / 255) / 2;
    };
    return ImageCanvas;
}());



/***/ }),

/***/ "./src/Apps/Squint/ImageFilter.ts":
/*!****************************************!*\
  !*** ./src/Apps/Squint/ImageFilter.ts ***!
  \****************************************/
/*! exports provided: ImageFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageFilter", function() { return ImageFilter; });
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");

var ImageFilter = /** @class */ (function () {
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    function ImageFilter() {
    }
    ImageFilter.chroma = function (img, chroma) {
        var data = img.data;
        var width = img.width;
        var height = img.height;
        var amount = chroma / 100;
        var lumR = (1 - amount) * .3086;
        var lumG = (1 - amount) * .6094;
        var lumB = (1 - amount) * .0820;
        var shiftW = width << 2;
        for (var j = 0; j < height; j++) {
            var offset = j * shiftW;
            for (var i = 0; i < width; i++) {
                var pos = offset + (i << 2);
                var r = data[pos + 0];
                var g = data[pos + 1];
                var b = data[pos + 2];
                data[pos + 0] = ((lumR + amount) * r) + (lumG * g) + (lumB * b);
                data[pos + 1] = (lumR * r) + ((lumG + amount) * g) + (lumB * b);
                data[pos + 2] = (lumR * r) + (lumG * g) + ((lumB + amount) * b);
            }
        }
    };
    ImageFilter.levels = function (img, white, black, midPt, midValue, numLevels) {
        var data = img.data;
        var realMidPt = black + midPt * (white - black);
        for (var i = 0; i < data.length; i += 4) {
            var oldLum = (0.3086 * data[i + 0] + 0.6094 * data[i + 1] + 0.0820 * data[i + 2]) / 255.0;
            var newLum = NaN;
            if (oldLum <= black) {
                newLum = 0;
            }
            else if (oldLum >= white) {
                newLum = 1;
            }
            else {
                if (oldLum < realMidPt) {
                    newLum = 0 + midValue * ((oldLum - black) / (realMidPt - black));
                }
                else {
                    newLum = midValue + (1 - midValue) * (oldLum - realMidPt) / (white - realMidPt);
                }
            }
            if (isNaN(numLevels) === false) {
                var val = newLum;
                newLum = (Math.floor(numLevels * (val - 0.0001)) + 0.5) / numLevels;
            }
            var ratio = newLum / oldLum;
            if (oldLum < 10 / 255) {
                // for really dark values, scale up as black and white
                // rather than the actual color which erroneously turns
                // blue or sometimes red
                data[i + 0] = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_0__["clamp"])(255 * newLum, 0, 255);
                data[i + 1] = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_0__["clamp"])(255 * newLum, 0, 255);
                data[i + 2] = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_0__["clamp"])(255 * newLum, 0, 255);
            }
            else {
                data[i + 0] = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_0__["clamp"])(data[i + 0] * ratio, 0, 255);
                data[i + 1] = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_0__["clamp"])(data[i + 1] * ratio, 0, 255);
                data[i + 2] = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_0__["clamp"])(data[i + 2] * ratio, 0, 255);
            }
        }
    };
    return ImageFilter;
}());



/***/ }),

/***/ "./src/Apps/Squint/LevelsPanel.ts":
/*!****************************************!*\
  !*** ./src/Apps/Squint/LevelsPanel.ts ***!
  \****************************************/
/*! exports provided: LevelsPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LevelsPanel", function() { return LevelsPanel; });
/* harmony import */ var _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../GUI/GUI */ "./src/GUI/GUI.ts");
/* harmony import */ var _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../GUI/PointerEventHandler */ "./src/GUI/PointerEventHandler.ts");
/* harmony import */ var _GUI_Slider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../GUI/Slider */ "./src/GUI/Slider.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../Util3D/Vec */ "./src/Util3D/Vec.ts");
/* harmony import */ var _ResizeablePanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ResizeablePanel */ "./src/Apps/Squint/ResizeablePanel.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();






var HitItem;
(function (HitItem) {
    HitItem[HitItem["Black"] = 0] = "Black";
    HitItem[HitItem["White"] = 1] = "White";
    HitItem[HitItem["Both"] = 2] = "Both";
    HitItem[HitItem["Mid"] = 3] = "Mid";
    HitItem[HitItem["None"] = 4] = "None";
})(HitItem || (HitItem = {}));
var Hit = /** @class */ (function () {
    function Hit() {
        this.offsetX = 0;
        this.offsetY = 0;
        this.item = HitItem.None;
    }
    return Hit;
}());
var LevelsPanel = /** @class */ (function (_super) {
    __extends(LevelsPanel, _super);
    function LevelsPanel(parent) {
        var _this = _super.call(this, parent, 'LevelsPanelDiv', 'Flex', 'LevelsPanel') || this;
        _this.white = 1;
        _this.black = 0;
        _this.midPoint = 0.5;
        _this.midValue = 0.5;
        _this.numLevels = NaN;
        _this.chroma = 100;
        _this.onChange = null;
        var viewersTitleDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('div', 'TitleDiv', _this.div);
        viewersTitleDiv.className = 'TitleClass';
        viewersTitleDiv.innerText = 'Levels';
        var closeButton = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('button', 'LevelsPanelCloseButton', viewersTitleDiv);
        closeButton.className = 'ButtonClass';
        closeButton.innerText = 'X';
        closeButton.onclick = function () {
            _this.visible = false;
        };
        _this.canvas = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('canvas', 'AfterCanvas', _this.div);
        new _GUI_Slider__WEBPACK_IMPORTED_MODULE_2__["Slider"](_this.div, {
            label: 'Levels',
            min: 2,
            max: 20,
            value: 20,
            oninput: function (slider) {
                if (slider.value === slider.max) {
                    _this.numLevels = NaN;
                }
                else {
                    _this.numLevels = slider.value;
                }
                _this.onChange();
            },
            onGetText: function (slider) {
                if (slider.value === slider.max) {
                    return '∞';
                }
                else {
                    return slider.value.toFixed(0);
                }
            }
        });
        new _GUI_Slider__WEBPACK_IMPORTED_MODULE_2__["Slider"](_this.div, {
            label: 'Chroma',
            min: 0,
            max: 200,
            value: 100,
            oninput: function (slider) {
                _this.chroma = slider.value;
                _this.onChange();
            },
            onGetText: function (slider) {
                return slider.value.toFixed(0) + '%';
            }
        });
        var handler = new _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_1__["PointerEventHandler"](_this.canvas);
        var hit;
        handler.onDown = function (pos) {
            hit = _this.getHit(pos);
        };
        handler.onMove = function (pos) {
            var hit = _this.getHit(pos);
            switch (hit.item) {
                case HitItem.Black:
                case HitItem.White:
                    _this.canvas.style.cursor = 'ew-resize';
                    break;
                case HitItem.Mid:
                    _this.canvas.style.cursor = 'move';
                    break;
                case HitItem.Both:
                    _this.canvas.style.cursor = 'default';
                    break;
            }
        };
        var minDelta = 0.01;
        handler.onDrag = function (pos, delta) {
            switch (hit.item) {
                case HitItem.Black:
                    _this.black = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_3__["clamp"])((pos.x + hit.offsetX) / _this.canvas.width, 0, 1 - minDelta);
                    _this.white = Math.max(_this.white, _this.black + minDelta);
                    _this.draw();
                    if (_this.onChange) {
                        _this.onChange();
                    }
                    break;
                case HitItem.White:
                    _this.white = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_3__["clamp"])((pos.x + hit.offsetX) / _this.canvas.width, minDelta, 1);
                    _this.black = Math.min(_this.black, _this.white - minDelta);
                    _this.draw();
                    if (_this.onChange) {
                        _this.onChange();
                    }
                    break;
                case HitItem.Mid:
                    var pts = _this.computePoints();
                    _this.midPoint = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_3__["clamp"])((pos.x + hit.offsetX - pts.black.x) / (pts.white.x - pts.black.x), 0, 1);
                    _this.midValue = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_3__["clamp"])(1 - (pos.y + hit.offsetY) / _this.canvas.height, 0, 1);
                    _this.draw();
                    if (_this.onChange) {
                        _this.onChange();
                    }
                    break;
                case HitItem.Both:
                    var delta_1 = _this.white - _this.black;
                    _this.black = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_3__["clamp"])((pos.x + hit.offsetX) / _this.canvas.width, 0, 1 - delta_1);
                    _this.white = _this.black + delta_1;
                    _this.draw();
                    if (_this.onChange) {
                        _this.onChange();
                    }
                    break;
            }
        };
        var em = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_3__["getEmPixels"])();
        _this.radius = 0.8 * em;
        _this.margin = 0.9 * em;
        _this.lineWidth = 0.1 * em;
        _this.draw();
        return _this;
    }
    LevelsPanel.prototype.getHit = function (pos) {
        var hit = new Hit();
        var epsilon = 3.0 * this.radius;
        var pts = this.computePoints();
        if (pos.distance(pts.mid) < epsilon) {
            hit.item = HitItem.Mid;
            hit.offsetX = pts.mid.x - pos.x;
            hit.offsetY = pts.mid.y - pos.y;
        }
        else if (pos.distance(pts.black) < epsilon) {
            hit.item = HitItem.Black;
            hit.offsetX = pts.black.x - pos.x;
        }
        else if (pos.distance(pts.white) < epsilon) {
            hit.item = HitItem.White;
            hit.offsetX = pts.white.x - pos.x;
        }
        else {
            hit.item = HitItem.Both;
            hit.offsetX = pts.black.x - pos.x;
        }
        return hit;
    };
    LevelsPanel.prototype.draw = function () {
        var _this = this;
        // work around for the canvas not being initialized yet when calling
        // this function from the constructor. Isn't there an event for this?
        if (this.canvas.clientWidth === 0) {
            setTimeout(function () {
                _this.draw();
            }, 10);
            return;
        }
        // sync sizes
        this.canvas.width = this.canvas.clientWidth;
        this.canvas.height = this.canvas.clientHeight;
        // short-hand var names
        var width = this.canvas.width - 2 * this.margin;
        var height = this.canvas.height - 2 * this.margin;
        var pts = this.computePoints();
        var ctx = this.canvas.getContext('2d');
        // draw the background
        var grd = ctx.createLinearGradient(this.margin, 0, this.margin + width, 0);
        grd.addColorStop(0, 'black');
        grd.addColorStop(this.black, 'black');
        var pos = this.black + this.midPoint * (this.white - this.black);
        var rgb = Math.round(255 * this.midValue);
        grd.addColorStop(pos, 'rgb(' + rgb + ',' + rgb + ',' + rgb + ')');
        grd.addColorStop(this.white, 'white');
        grd.addColorStop(1, 'white');
        ctx.fillStyle = grd;
        ctx.fillRect(this.margin, this.margin, width, height);
        // draw lines
        ctx.strokeStyle = 'lightgreen';
        ctx.lineWidth = 2 * this.lineWidth;
        ctx.beginPath();
        ctx.moveTo(this.margin + this.black * width, this.margin + height);
        ctx.lineTo(pts.mid.x, pts.mid.y);
        ctx.lineTo(this.margin + this.white * width, this.margin);
        ctx.stroke();
        // handles
        _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].drawHandle(ctx, pts.black.x, pts.black.y, this.radius);
        _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].drawHandle(ctx, pts.white.x, pts.white.y, this.radius);
        _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].drawHandle(ctx, pts.mid.x, pts.mid.y, this.radius);
    };
    LevelsPanel.prototype.computePoints = function () {
        // short-hand var names
        var m = this.margin;
        var width = this.canvas.width - 2 * m;
        var height = this.canvas.height - 2 * m;
        return {
            black: new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_4__["Vec2"]([m + this.black * width, m + height]),
            white: new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_4__["Vec2"]([m + this.white * width, m]),
            mid: new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_4__["Vec2"]([m + (this.black + this.midPoint * (this.white - this.black)) * width, m + (1 - this.midValue) * height]),
        };
    };
    return LevelsPanel;
}(_ResizeablePanel__WEBPACK_IMPORTED_MODULE_5__["ResizeablePanel"]));



/***/ }),

/***/ "./src/Apps/Squint/ModelTimer.ts":
/*!***************************************!*\
  !*** ./src/Apps/Squint/ModelTimer.ts ***!
  \***************************************/
/*! exports provided: TimeMs, ModelTimer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimeMs", function() { return TimeMs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ModelTimer", function() { return ModelTimer; });
/* harmony import */ var _Util_CountdownTimer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Util/CountdownTimer */ "./src/Util/CountdownTimer.ts");
/* harmony import */ var _SquintApp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SquintApp */ "./src/Apps/Squint/SquintApp.ts");
/* harmony import */ var _SquintEvents__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SquintEvents */ "./src/Apps/Squint/SquintEvents.ts");



var TimeMs;
(function (TimeMs) {
    TimeMs[TimeMs["Sec"] = 1000] = "Sec";
    TimeMs[TimeMs["Min"] = 60000] = "Min";
    TimeMs[TimeMs["StdPose"] = 1200000] = "StdPose";
    TimeMs[TimeMs["StdBreak"] = 420000] = "StdBreak";
})(TimeMs || (TimeMs = {}));
var ModelTimer = /** @class */ (function () {
    function ModelTimer(squint) {
        var _this = this;
        this.countdownTimer = new _Util_CountdownTimer__WEBPACK_IMPORTED_MODULE_0__["CountdownTimer"]();
        this.alarmDurationMs = 10 * TimeMs.Sec;
        this.alarmTimeoutHandle = NaN;
        this.onTick = null;
        this.onAlarm = null;
        this.onAlarmTimeout = null;
        this.squint = squint;
        this.countdownTimer.durationMs = TimeMs.StdPose;
        this.countdownTimer.onTick = function () {
            if (_this.countdownTimer.expired && !_this.alarmSounding) {
                _this.startAlarm();
            }
            _this.tick();
        };
        if (this.squint) {
            squint.on({
                event: _SquintEvents__WEBPACK_IMPORTED_MODULE_2__["SquintEvent"].SynchronizeTimer,
                handler: function (info) {
                    _this.countdownTimer.synchronize(info.running, info.durationMs, info.remainingMs);
                    if (info.alarmSounding !== _this.alarmSounding) {
                        if (info.alarmSounding) {
                            _this.startAlarm();
                        }
                        else {
                            _this.doStopAlarm(false);
                        }
                    }
                    _this.tick();
                }
            });
            squint.on({
                event: _SquintEvents__WEBPACK_IMPORTED_MODULE_2__["SquintEvent"].Close,
                handler: function () {
                    _this.doReset(false);
                }
            });
        }
    }
    Object.defineProperty(ModelTimer.prototype, "running", {
        get: function () {
            return this.countdownTimer.running;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ModelTimer.prototype, "durationMs", {
        get: function () {
            return this.countdownTimer.durationMs;
        },
        set: function (value) {
            this.countdownTimer.durationMs = value;
            if (this.alarmSounding) {
                this.doStopAlarm(false);
            }
            this.tick();
            this.synchronizeToServer();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ModelTimer.prototype, "remainingMs", {
        get: function () {
            return this.countdownTimer.remainingMs;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ModelTimer.prototype, "timeRemainingStr", {
        get: function () {
            return this.countdownTimer.timeRemainingStr;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ModelTimer.prototype, "alarmSounding", {
        get: function () {
            return !isNaN(this.alarmTimeoutHandle);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ModelTimer.prototype, "info", {
        get: function () {
            return {
                running: this.countdownTimer.running,
                durationMs: this.countdownTimer.durationMs,
                remainingMs: this.countdownTimer.remainingMs,
                alarmSounding: this.alarmSounding,
            };
        },
        enumerable: false,
        configurable: true
    });
    ModelTimer.prototype.synchronizeToServer = function () {
        if (this.squint) {
            this.squint.synchronizeTimer(this.info);
        }
    };
    ModelTimer.prototype.synchronizeFromServer = function () {
        if (this.squint) {
            this.squint.synchronizeTimer();
        }
    };
    ModelTimer.prototype.tick = function () {
        if (this.onTick) {
            this.onTick(this.info);
        }
    };
    ModelTimer.prototype.start = function () {
        if (this.countdownTimer.running === false) {
            this.countdownTimer.start();
            if (this.countdownTimer.expired && !this.alarmSounding) {
                this.startAlarm();
            }
            this.synchronizeToServer();
        }
    };
    ModelTimer.prototype.doStop = function (sync) {
        if (this.countdownTimer.running) {
            this.countdownTimer.stop();
            this.tick();
            if (sync) {
                this.synchronizeToServer();
            }
        }
    };
    ModelTimer.prototype.stop = function () {
        this.doStop(true);
    };
    ModelTimer.prototype.resetCountdownTimer = function () {
        this.countdownTimer.reset();
        if (this.countdownTimer.durationMs === TimeMs.StdBreak) {
            // prepare for next pose;
            this.countdownTimer.durationMs = TimeMs.StdPose;
        }
        else {
            // prepare for the break
            this.countdownTimer.durationMs = TimeMs.StdBreak;
        }
    };
    ModelTimer.prototype.doReset = function (sync) {
        if (this.alarmSounding) {
            this.doStopAlarm(false);
        }
        this.resetCountdownTimer();
        this.tick();
        if (sync) {
            this.synchronizeToServer();
        }
    };
    ModelTimer.prototype.reset = function () {
        this.doReset(true);
    };
    ModelTimer.prototype.startAlarm = function () {
        var _this = this;
        if (this.alarmSounding) {
            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('Starting alarm but it is already sounding');
            return;
        }
        this.alarmTimeoutHandle = window.setTimeout(function () {
            // if we time out, we just stop playing the sound. We don't synchronize with the server
            _this.resetCountdownTimer();
            _this.alarmTimeoutHandle = NaN;
            if (_this.onAlarm) {
                _this.onAlarm(false);
            }
            if (_this.onAlarmTimeout) {
                _this.onAlarmTimeout();
            }
        }, this.alarmDurationMs);
        // do this after setting a value for alarmTimeoutHandle so that alarmSounding = true
        if (this.onAlarm) {
            this.onAlarm(true);
        }
    };
    ModelTimer.prototype.doStopAlarm = function (sync) {
        if (this.alarmSounding) {
            window.clearTimeout(this.alarmTimeoutHandle);
            this.alarmTimeoutHandle = NaN;
            if (this.onAlarm) {
                this.onAlarm(false);
            }
            if (sync && this.squint.connected) {
                this.synchronizeToServer();
            }
        }
    };
    ModelTimer.prototype.stopAlarm = function () {
        this.doStopAlarm(true);
    };
    ModelTimer.prototype.addOne = function () {
        this.countdownTimer.addOne();
        this.synchronizeToServer();
    };
    ModelTimer.prototype.subtractOne = function () {
        if (this.countdownTimer.durationMs > 1 * TimeMs.Min) {
            this.countdownTimer.subtractOne();
            this.synchronizeToServer();
        }
    };
    return ModelTimer;
}());



/***/ }),

/***/ "./src/Apps/Squint/ModelTimerApp.ts":
/*!******************************************!*\
  !*** ./src/Apps/Squint/ModelTimerApp.ts ***!
  \******************************************/
/*! exports provided: ModelTimerApp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ModelTimerApp", function() { return ModelTimerApp; });
/* harmony import */ var webrtc_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! webrtc-adapter */ "./node_modules/webrtc-adapter/src/js/adapter_core.js");
/* harmony import */ var _Version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Version */ "./src/Apps/Squint/Version.ts");
/* harmony import */ var _ModelTimer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ModelTimer */ "./src/Apps/Squint/ModelTimer.ts");
/* harmony import */ var _ModelTimerPanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ModelTimerPanel */ "./src/Apps/Squint/ModelTimerPanel.ts");
/* harmony import */ var _Sounds__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Sounds */ "./src/Apps/Squint/Sounds.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _GUI_GUI__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../GUI/GUI */ "./src/GUI/GUI.ts");
/* harmony import */ var nosleep_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! nosleep.js */ "./node_modules/nosleep.js/src/index.js");
/* harmony import */ var nosleep_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(nosleep_js__WEBPACK_IMPORTED_MODULE_7__);








var ModelTimerApp = /** @class */ (function () {
    function ModelTimerApp() {
        this.noSleep = new nosleep_js__WEBPACK_IMPORTED_MODULE_7___default.a();
        document.title += (' ' + _Version__WEBPACK_IMPORTED_MODULE_1__["Version"].Build);
    }
    ModelTimerApp.prototype.create = function (div) {
        var _this = this;
        div.id = 'ModelTimerApp';
        var bodyDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_6__["GUI"].create('div', 'BodyDiv', div);
        var timer = new _ModelTimer__WEBPACK_IMPORTED_MODULE_2__["ModelTimer"]();
        this.timerPanel = new _ModelTimerPanel__WEBPACK_IMPORTED_MODULE_3__["ModelTimerPanel"](timer, bodyDiv);
        this.timerPanel.goFullScreenOnStart = _Util_Globals__WEBPACK_IMPORTED_MODULE_5__["isMobile"];
        this.timerPanel.autoStart = true;
        window.addEventListener('resize', function () {
            _this.timerPanel.draw();
        });
        document.body.addEventListener('mousedown', function () {
            _this.noSleep.enable();
        });
        document.body.addEventListener('touchstart', function () {
            _this.noSleep.enable();
        });
        this.timerPanel.draw();
    };
    ModelTimerApp.prototype.buildMenu = function (menubar) {
        var _this = this;
        var soundMenu = menubar.addSubMenu('Sounds');
        var _loop_1 = function (soundStr) {
            var sound = _Sounds__WEBPACK_IMPORTED_MODULE_4__["Sounds"][soundStr];
            soundMenu.addRadiobutton({
                label: soundStr.replace('_', ' '),
                group: 'Sounds',
                checked: this_1.timerPanel.sound === sound,
                oncheck: function () {
                    _this.timerPanel.sound = sound;
                    _this.timerPanel.testSound();
                }
            });
        };
        var this_1 = this;
        for (var soundStr in _Sounds__WEBPACK_IMPORTED_MODULE_4__["Sounds"]) {
            _loop_1(soundStr);
        }
        var spookySoundsMenu = soundMenu.addSubMenu('Spooky');
        var _loop_2 = function (soundStr) {
            var sound = _Sounds__WEBPACK_IMPORTED_MODULE_4__["SpookySounds"][soundStr];
            spookySoundsMenu.addRadiobutton({
                label: soundStr.replace('_', ' '),
                group: 'Sounds',
                checked: this_2.timerPanel.sound === sound,
                oncheck: function () {
                    _this.timerPanel.sound = sound;
                    _this.timerPanel.testSound();
                }
            });
        };
        var this_2 = this;
        for (var soundStr in _Sounds__WEBPACK_IMPORTED_MODULE_4__["SpookySounds"]) {
            _loop_2(soundStr);
        }
        /*
        const posesMenu = menubar.addSubMenu('Poses');
        posesMenu.addRadiobutton({
           label: '20 Min (default)',
           group: 'Poses',
           checked: true,
           oncheck: () => {
              this.timerPanel.poses = [];
           }
        });
        posesMenu.addRadiobutton({
           label: '10, 10',
           group: 'Poses',
           checked: false,
           oncheck: () => {
              this.timerPanel.poses = [10, 10];
           }
        });
        posesMenu.addRadiobutton({
           label: '5, 5, 10',
           group: 'Poses',
           checked: false,
           oncheck: () => {
              this.timerPanel.poses = [5, 5, 10];
           }
        });
        posesMenu.addRadiobutton({
           label: '5, 5, 5, 5',
           group: 'Poses',
           checked: false,
           oncheck: () => {
              this.timerPanel.poses = [5, 5, 5, 5];
           }
        });
        posesMenu.addRadiobutton({
           label: '10 x 2',
           group: 'Poses',
           checked: false,
           oncheck: () => {
              this.timerPanel.poses = [2, 2, 2, 2, 2, 2, 2, 2, 2, 2];
           }
        });
        posesMenu.addRadiobutton({
           label: '20 x 1',
           group: 'Poses',
           checked: false,
           oncheck: () => {
              this.timerPanel.poses = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];
           }
        });
     */
    };
    return ModelTimerApp;
}());



/***/ }),

/***/ "./src/Apps/Squint/ModelTimerPanel.ts":
/*!********************************************!*\
  !*** ./src/Apps/Squint/ModelTimerPanel.ts ***!
  \********************************************/
/*! exports provided: ModelTimerPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ModelTimerPanel", function() { return ModelTimerPanel; });
/* harmony import */ var screenfull__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! screenfull */ "./node_modules/screenfull/dist/screenfull.js");
/* harmony import */ var screenfull__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(screenfull__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _GUI_GUI__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../GUI/GUI */ "./src/GUI/GUI.ts");
/* harmony import */ var _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../GUI/PointerEventHandler */ "./src/GUI/PointerEventHandler.ts");
/* harmony import */ var _Util_CountdownTimer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../Util/CountdownTimer */ "./src/Util/CountdownTimer.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _ModelTimer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ModelTimer */ "./src/Apps/Squint/ModelTimer.ts");
/* harmony import */ var _Rect__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Rect */ "./src/Apps/Squint/Rect.ts");
/* harmony import */ var _Sounds__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Sounds */ "./src/Apps/Squint/Sounds.ts");
/* harmony import */ var _StorageWithEvents__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./StorageWithEvents */ "./src/Apps/Squint/StorageWithEvents.ts");









var HitArea;
(function (HitArea) {
    HitArea[HitArea["TimerText"] = 0] = "TimerText";
    HitArea[HitArea["StartStop"] = 1] = "StartStop";
    HitArea[HitArea["AutoStartCancel"] = 2] = "AutoStartCancel";
    HitArea[HitArea["None"] = 3] = "None";
})(HitArea || (HitArea = {}));
var ModelTimerPanel = /** @class */ (function () {
    function ModelTimerPanel(modelTimer, parent) {
        var _this = this;
        this.alarm = null;
        this.alertTimerStarted = null;
        this.alert10MinsRemaining = null;
        this.alert1MinRemaining = null;
        this.storage = new _StorageWithEvents__WEBPACK_IMPORTED_MODULE_8__["StorageWithEvents"];
        this.soundFile = _Sounds__WEBPACK_IMPORTED_MODULE_7__["Sounds"].Chime;
        this.autoStartTimer = null;
        this.alert10MinsSounded = false;
        this.alert1MinSounded = false;
        this.goFullScreenOnStart = false;
        this.leftMarginRatio = 0.25;
        this.startStopWidthRatio = 1.0;
        this.modelTimer = modelTimer;
        this.modelTimer.onAlarm = function (sound) {
            if (sound) {
                _this.startSound();
                if (_this.autoStart) {
                    _this.autoStartTimer.reset();
                    _this.autoStartTimer.start();
                }
                _this.draw();
            }
            else {
                _this.stopSound();
                _this.draw();
            }
        };
        /*
        this.modelTimer.onAlarmTimeout = () => {
           if (this.autoStart) {
              this.autoStartTimer.reset();
              this.autoStartTimer.start();
           }
        }
        */
        this.modelTimer.onTick = function () {
            _this.draw();
            // don't play alerts for breaks
            if (_this.modelTimer.durationMs >= 11 * 60 * 1000) {
                if (_this.modelTimer.remainingMs <= 10 * 60 * 1000 && _this.alert10MinsSounded === false) {
                    _this.alert10MinsSounded = true;
                    _this.playSound(_this.alert10MinsRemaining, false);
                }
                if (_this.modelTimer.remainingMs <= 1 * 60 * 1000 && _this.alert1MinSounded === false) {
                    _this.alert1MinSounded = true;
                    _this.playSound(_this.alert1MinRemaining, false);
                }
            }
        };
        this.canvas = _GUI_GUI__WEBPACK_IMPORTED_MODULE_1__["GUI"].create('canvas', 'ModelTimerCanvas', parent);
        var handler = new _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_2__["PointerEventHandler"](this.canvas);
        handler.onMove = function (pos, delta) {
            switch (_this.hitTest(pos)) {
                case HitArea.TimerText:
                    if (modelTimer.running === false) {
                        _this.canvas.style.cursor = 'ns-resize';
                    }
                    else {
                        _this.canvas.style.cursor = 'default';
                    }
                    break;
                case HitArea.StartStop:
                case HitArea.AutoStartCancel:
                    _this.canvas.style.cursor = 'pointer';
                    break;
                default:
                    _this.canvas.style.cursor = 'default';
                    break;
            }
            if (modelTimer.alarmSounding) {
                _this.stopAlarm();
            }
        };
        var dragging = false;
        handler.onUp = function (pos) {
            document.body.style.cursor = 'default';
            dragging = false;
        };
        var starting = false;
        handler.onDown = function (pos) {
            _this.initAudio();
            if (_this.modelTimer.alarmSounding) {
                _this.stopAlarm();
            }
            else {
                switch (_this.hitTest(pos)) {
                    case HitArea.StartStop:
                        {
                            if (_this.modelTimer.running) {
                                _this.modelTimer.stop();
                                starting = false;
                            }
                            else {
                                _this.modelTimer.start();
                                if (_this.autoStart) {
                                    _this.autoStartTimer.stop();
                                }
                                _this.alert10MinsSounded = false;
                                _this.alert1MinSounded = false;
                                _this.playSound(_this.alertTimerStarted, false);
                                starting = true;
                            }
                        }
                        dragging = false;
                        break;
                    case HitArea.AutoStartCancel:
                        if (_this.autoStart) {
                            _this.autoStartTimer.reset();
                        }
                        dragging = false;
                        break;
                    default:
                        // don't adjust the time if the timer is running. Force the user
                        // to stop the timer first
                        if (modelTimer.running === false) {
                            dragging = true;
                        }
                        break;
                }
            }
            _this.draw();
        };
        handler.onUp = function (pos) {
            if (starting) {
                if (_this.goFullScreenOnStart) {
                    // go fullscreen
                    if (screenfull__WEBPACK_IMPORTED_MODULE_0___default.a.isEnabled) {
                        screenfull__WEBPACK_IMPORTED_MODULE_0___default.a.request()
                            .catch(function (err) { console.log('Cannot go fullscreen: ' + err); });
                    }
                }
            }
        };
        var accumulatedDelta = 0;
        var step = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["getEmPixels"])() / 2;
        if (_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["isMobile"]) {
            step *= 2;
        }
        handler.onDrag = function (pos, delta) {
            if (dragging === true) {
                document.body.style.cursor = 'ns-resize';
                accumulatedDelta -= delta.y;
                while (accumulatedDelta > step) {
                    _this.modelTimer.addOne();
                    accumulatedDelta -= step;
                }
                while (accumulatedDelta < -step) {
                    _this.modelTimer.subtractOne();
                    accumulatedDelta += step;
                }
                if (_this.autoStart) {
                    _this.autoStartTimer.stop();
                }
                _this.draw();
            }
        };
        // for the mouse wheel
        handler.onScale = function (scale, change) {
            if (change < 1) {
                _this.modelTimer.addOne();
            }
            else {
                _this.modelTimer.subtractOne();
            }
            _this.draw();
        };
        // TODO: can these be removed? Double check if there needed for Squint or on Safari
        document.body.addEventListener('mousedown', function () {
            _this.stopAlarm();
            _this.initAudio();
        });
        document.body.addEventListener('touchstart', function () {
            _this.stopAlarm();
            _this.initAudio();
        });
        if (this.storage.has(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_8__["StorageItem"].Sound)) {
            this.sound = this.storage.get(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_8__["StorageItem"].Sound);
        }
        this.draw();
    }
    Object.defineProperty(ModelTimerPanel.prototype, "leftMarginWidth", {
        get: function () {
            return this.timerTextBox.height * this.leftMarginRatio;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ModelTimerPanel.prototype, "startStopWidth", {
        get: function () {
            return this.timerTextBox.height * this.startStopWidthRatio;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ModelTimerPanel.prototype, "info", {
        get: function () {
            return this.modelTimer.info;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ModelTimerPanel.prototype, "width", {
        get: function () {
            return this.canvas.width;
        },
        set: function (width) {
            this.canvas.style.width = width + 'px';
            this.canvas.width = width;
            this.draw();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ModelTimerPanel.prototype, "height", {
        get: function () {
            return this.canvas.height;
        },
        set: function (height) {
            this.canvas.style.height = height + 'px';
            this.canvas.height = height;
            this.draw();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ModelTimerPanel.prototype, "autoStart", {
        get: function () {
            return this.autoStartTimer !== null;
        },
        set: function (value) {
            var _this = this;
            if (value !== this.autoStart) {
                if (this.autoStartTimer) {
                    this.autoStartTimer = null;
                }
                else {
                    this.autoStartTimer = new _Util_CountdownTimer__WEBPACK_IMPORTED_MODULE_3__["CountdownTimer"](30 * 1000);
                    this.autoStartTimer.onTick = function () { return _this.onCountdownTick(); };
                }
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ModelTimerPanel.prototype, "sound", {
        get: function () {
            return this.soundFile;
        },
        set: function (sound) {
            this.soundFile = sound;
            this.storage.set(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_8__["StorageItem"].Sound, sound);
            if (this.alarm) {
                this.alarm.src = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["baseUrl"])() + sound;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ModelTimerPanel.prototype, "poses", {
        set: function (poses) {
        },
        enumerable: false,
        configurable: true
    });
    ModelTimerPanel.prototype.testSound = function () {
        this.playSound(this.alarm, false);
    };
    ModelTimerPanel.prototype.playSound = function (sound, loop) {
        sound.currentTime = 0;
        sound.loop = loop;
        sound.play().catch(function (err) { console.log('Cannot play sound: ' + err); });
    };
    ModelTimerPanel.prototype.hitTest = function (pos) {
        if (this.cancelBox && this.cancelBox.inside(pos)) {
            return HitArea.AutoStartCancel;
        }
        if (pos.x < this.timerTextBox.left || pos.x > this.timerTextBox.right || pos.y < this.timerTextBox.top || pos.y > this.timerTextBox.bottom) {
            return HitArea.None;
        }
        if (pos.x < this.timerTextBox.right - this.startStopWidth) {
            return HitArea.TimerText;
        }
        else {
            return HitArea.StartStop;
        }
    };
    ModelTimerPanel.prototype.initAudio = function () {
        // create via html instead of new Audio() which is blocked on portable ios
        if (this.alarm === null) {
            this.alarm = _GUI_GUI__WEBPACK_IMPORTED_MODULE_1__["GUI"].create('audio', 'AlarmAudio', document.body);
            this.alarm.src = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["baseUrl"])() + this.soundFile;
        }
        if (this.alertTimerStarted === null) {
            this.alertTimerStarted = _GUI_GUI__WEBPACK_IMPORTED_MODULE_1__["GUI"].create('audio', 'AlertTimerStarted', document.body);
            this.alertTimerStarted.src = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["baseUrl"])() + 'sounds/timer_started.mp3';
        }
        if (this.alert10MinsRemaining === null) {
            this.alert10MinsRemaining = _GUI_GUI__WEBPACK_IMPORTED_MODULE_1__["GUI"].create('audio', 'Alert10MinsRemaining', document.body);
            this.alert10MinsRemaining.src = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["baseUrl"])() + 'sounds/10_minutes_remaining.mp3';
        }
        if (this.alert1MinRemaining === null) {
            this.alert1MinRemaining = _GUI_GUI__WEBPACK_IMPORTED_MODULE_1__["GUI"].create('audio', 'Alert1MinRemaining', document.body);
            this.alert1MinRemaining.src = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["baseUrl"])() + 'sounds/1_minute_remaining.mp3';
        }
    };
    ModelTimerPanel.prototype.getOptimalSize = function () {
        var width = this.canvas.width;
        var height = this.canvas.height;
        var em = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["getEmPixels"])();
        var fontSize = (height - 0.5 * em);
        var ctx = this.canvas.getContext('2d');
        ctx.font = fontSize + 'px Arial';
        var size = ctx.measureText('00:00');
        var desiredHeight = height;
        var desiredWidth = size.width + (this.leftMarginRatio + this.startStopWidthRatio) * height;
        var AR = desiredWidth / desiredHeight;
        if (desiredWidth > width) {
            desiredWidth = width;
            desiredHeight = desiredWidth / AR;
        }
        var x = (width - desiredWidth) / 2;
        var y = (height - desiredHeight) / 2;
        return new _Rect__WEBPACK_IMPORTED_MODULE_6__["Rect"](x, y, desiredWidth, desiredHeight);
    };
    ModelTimerPanel.prototype.startSound = function () {
        if (this.alarm) {
            this.playSound(this.alarm, true);
        }
    };
    ModelTimerPanel.prototype.stopSound = function () {
        this.alarm.pause();
        this.alarm.currentTime = 0;
    };
    ModelTimerPanel.prototype.stopAlarm = function () {
        if (this.modelTimer.alarmSounding) {
            this.modelTimer.reset();
            if (this.autoStart) {
                this.autoStartTimer.reset();
                this.autoStartTimer.start();
            }
        }
    };
    ModelTimerPanel.prototype.draw = function () {
        var _a, _b;
        var style = getComputedStyle(this.canvas);
        var width = this.canvas.clientWidth;
        var height = this.canvas.clientHeight;
        this.canvas.width = width;
        this.canvas.height = height;
        this.timerTextBox = this.getOptimalSize();
        var x = this.timerTextBox.x;
        var y = this.timerTextBox.y;
        var ctx = this.canvas.getContext('2d');
        ctx.fillStyle = this.modelTimer.alarmSounding ? 'orange' : (_a = style.backgroundColor) !== null && _a !== void 0 ? _a : 'lightgray';
        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
        // draw the time text
        var em = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["getEmPixels"])();
        var fontSize = (this.timerTextBox.height - 0.5 * em);
        ctx.font = fontSize + 'px Arial';
        ctx.fillStyle = this.modelTimer.alarmSounding ? 'rgba(255, 255, 255, 0.8)' : (_b = style.color) !== null && _b !== void 0 ? _b : 'black';
        var size = ctx.measureText('00:00');
        x += this.leftMarginWidth;
        this.drawText(ctx, this.modelTimer.timeRemainingStr, x, y, size.width, this.timerTextBox.height);
        x += size.width;
        // draw the start/stop symbols
        var boxSize = this.timerTextBox.height;
        ctx.beginPath();
        if (this.modelTimer.alarmSounding || this.modelTimer.running) {
            // red square
            var size_1 = 0.25;
            ctx.fillStyle = 'rgba(255,128,128,0.3)';
            ctx.strokeStyle = 'rgba(255,0,0,0.8)';
            ctx.moveTo(x + size_1 * boxSize, y + size_1 * boxSize);
            ctx.lineTo(x + (1 - size_1) * boxSize, y + size_1 * boxSize);
            ctx.lineTo(x + (1 - size_1) * boxSize, y + (1 - size_1) * boxSize);
            ctx.lineTo(x + size_1 * boxSize, y + (1 - size_1) * boxSize);
            ctx.lineTo(x + size_1 * boxSize, y + size_1 * boxSize);
        }
        else {
            // green triangle
            ctx.fillStyle = 'rgba(128,255,128,0.4)';
            ctx.strokeStyle = 'rgba(0,200,0,0.9)';
            ctx.moveTo(x + 0.2 * boxSize, y + 0.2 * boxSize);
            ctx.lineTo(x + 0.8 * boxSize, y + 0.5 * boxSize);
            ctx.lineTo(x + 0.2 * boxSize, y + 0.8 * boxSize);
            ctx.lineTo(x + 0.2 * boxSize, y + 0.2 * boxSize);
        }
        //ctx.strokeStyle = 'black';
        ctx.fill();
        ctx.stroke();
        // if there is room above the text, draw the current time
        if (height > fontSize + 6 * em) {
            // display the current time
            ctx.font = '2em Arial';
            ctx.fillStyle = this.modelTimer.alarmSounding ? 'rgba(255,255,255, 0.8)' : 'rgba(255,255,255,0.5)';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'top';
            ctx.fillText(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["getTimeStr"])(), width / 2, 1 * em);
            // display a message
            if (this.autoStart && this.autoStartTimer.running) {
                ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
                ctx.fillRect(0, height - 4 * em, width, 4 * em);
                ctx.fillStyle = 'gray';
                ctx.textBaseline = 'bottom';
                ctx.textAlign = 'left';
                ctx.fillText('Auto-start in ' + this.autoStartTimer.timeRemainingStr, 1 * em, height - 1 * em);
                ctx.textAlign = 'right';
                ctx.fillText('Cancel', width - 1 * em, height - 1 * em);
                var size_2 = ctx.measureText('Cancel');
                this.cancelBox = new _Rect__WEBPACK_IMPORTED_MODULE_6__["Rect"](width - (size_2.width + 2 * em), height - 4 * em, size_2.width + 2 * em, 4 * em);
            }
            else {
                this.cancelBox = null;
            }
        }
    };
    ModelTimerPanel.prototype.drawText = function (ctx, str, x, y, width, height) {
        var size = ctx.measureText('y'); // something with a descent
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(str, x + width / 2, y + height / 2 + 0.5 * size.actualBoundingBoxDescent / 2);
    };
    ModelTimerPanel.prototype.onCountdownTick = function () {
        if (this.autoStartTimer.expired) {
            // TODO if the model is posing, subtract the time we forgot to start the timer.
            this.modelTimer.reset();
            this.modelTimer.start();
            this.alert10MinsSounded = false;
            this.alert1MinSounded = false;
            if (this.modelTimer.remainingMs !== _ModelTimer__WEBPACK_IMPORTED_MODULE_5__["TimeMs"].StdBreak) {
                this.playSound(this.alertTimerStarted, false);
            }
        }
        else {
            this.draw();
        }
    };
    return ModelTimerPanel;
}());



/***/ }),

/***/ "./src/Apps/Squint/ObjectWithSettings.ts":
/*!***********************************************!*\
  !*** ./src/Apps/Squint/ObjectWithSettings.ts ***!
  \***********************************************/
/*! exports provided: ObjectWithSettings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectWithSettings", function() { return ObjectWithSettings; });
/* harmony import */ var _SquintApp__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SquintApp */ "./src/Apps/Squint/SquintApp.ts");

var ObjectWithSettings = /** @class */ (function () {
    function ObjectWithSettings(settingsKey) {
        this.settingsKey = settingsKey;
    }
    Object.defineProperty(ObjectWithSettings.prototype, "hasSavedSettings", {
        get: function () {
            return (this.settingsKey !== undefined && localStorage.getItem(this.settingsKey) !== null);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectWithSettings.prototype, "settings", {
        get: function () {
            if (this.settingsKey === undefined) {
                return null;
            }
            else {
                var settings = localStorage.getItem(this.settingsKey);
                if (settings) {
                    try {
                        // eslint-disable-next-line @typescript-eslint/no-unsafe-return
                        return JSON.parse(settings);
                    }
                    catch (err) {
                        return null;
                    }
                }
            }
        },
        enumerable: false,
        configurable: true
    });
    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function
    ObjectWithSettings.prototype.onSaveSettings = function (_settings) {
    };
    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function
    ObjectWithSettings.prototype.onRestoreSettings = function (settings) {
    };
    ObjectWithSettings.prototype.saveSettings = function () {
        if (this.settingsKey) {
            var settings = {};
            this.onSaveSettings(settings);
            localStorage.setItem(this.settingsKey, JSON.stringify(settings));
        }
    };
    ObjectWithSettings.prototype.restoreSettings = function () {
        if (this.settingsKey) {
            var jsonStr = localStorage.getItem(this.settingsKey);
            if (jsonStr !== null) {
                try {
                    var settings = JSON.parse(jsonStr);
                    this.onRestoreSettings(settings);
                }
                catch (err) {
                    Object(_SquintApp__WEBPACK_IMPORTED_MODULE_0__["debug"])('Cannot restore settings for \' + key + \'.\nValue is not JSON: ' + jsonStr);
                }
            }
        }
    };
    return ObjectWithSettings;
}());



/***/ }),

/***/ "./src/Apps/Squint/Panel.ts":
/*!**********************************!*\
  !*** ./src/Apps/Squint/Panel.ts ***!
  \**********************************/
/*! exports provided: Panel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Panel", function() { return Panel; });
/* harmony import */ var _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../GUI/GUI */ "./src/GUI/GUI.ts");
/* harmony import */ var _ObjectWithSettings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ObjectWithSettings */ "./src/Apps/Squint/ObjectWithSettings.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


var Panel = /** @class */ (function (_super) {
    __extends(Panel, _super);
    function Panel(parent, id, displayStyleForShowing, settingsKey) {
        if (displayStyleForShowing === void 0) { displayStyleForShowing = 'block'; }
        var _this = _super.call(this, settingsKey) || this;
        _this.onVisible = null;
        _this.div = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('div', id, parent);
        _this.displayStyleForShowing = displayStyleForShowing;
        return _this;
    }
    Object.defineProperty(Panel.prototype, "visible", {
        get: function () {
            return (getComputedStyle(this.div).display !== 'none');
        },
        set: function (flag) {
            if (flag === this.visible) {
                return;
            }
            if (flag) {
                this.div.style.display = this.displayStyleForShowing;
            }
            else {
                this.div.style.display = 'none';
            }
            if (this.hasSavedSettings) {
                var savedSettings = this.settings;
                if (savedSettings.visible !== flag) {
                    this.saveSettings();
                }
            }
            if (this.onVisible) {
                this.onVisible(flag);
            }
        },
        enumerable: false,
        configurable: true
    });
    Panel.prototype.onSaveSettings = function (settings) {
        _super.prototype.onSaveSettings.call(this, settings);
        settings.visible = this.visible;
    };
    Panel.prototype.onRestoreSettings = function (settings) {
        _super.prototype.onRestoreSettings.call(this, settings);
        if (settings.visible !== undefined) {
            this.visible = settings.visible;
        }
    };
    return Panel;
}(_ObjectWithSettings__WEBPACK_IMPORTED_MODULE_1__["ObjectWithSettings"]));



/***/ }),

/***/ "./src/Apps/Squint/PasswordDialog.ts":
/*!*******************************************!*\
  !*** ./src/Apps/Squint/PasswordDialog.ts ***!
  \*******************************************/
/*! exports provided: PasswordDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PasswordDialog", function() { return PasswordDialog; });
/* harmony import */ var _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../GUI/GUI */ "./src/GUI/GUI.ts");
/* harmony import */ var _GUI_Dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../GUI/Dialog */ "./src/GUI/Dialog.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


var PasswordDialog = /** @class */ (function (_super) {
    __extends(PasswordDialog, _super);
    function PasswordDialog(parent, onOk, onCancel) {
        var _this = _super.call(this, parent, 'Password') || this;
        var passwordGroupDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('div', 'PasswordGroupDiv', _this.dialogDiv);
        var passwordLabel = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('label', 'PasswordLabel', passwordGroupDiv);
        passwordLabel.innerText = 'Password:';
        var passwordTextInput = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('input', 'PasswordTextInput', passwordGroupDiv);
        passwordLabel.htmlFor = passwordTextInput.id;
        passwordTextInput.type = 'text';
        passwordTextInput.placeholder = 'password';
        passwordTextInput.autocapitalize = 'none';
        passwordTextInput.onkeypress = function (event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                okButton.click();
            }
        };
        _this.onShow = function () {
            passwordTextInput.focus();
            passwordTextInput.select();
        };
        var buttonGroupDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('div', 'ButtonGroupDiv', _this.dialogDiv);
        var okButton = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('button', 'OkButton', buttonGroupDiv, 'ButtonClass');
        okButton.innerText = 'OK';
        okButton.onclick = function () {
            _this.visible = false;
            var password = passwordTextInput.value.trim();
            onOk(password);
        };
        var cancelButton = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('button', 'CancelButton', buttonGroupDiv, 'ButtonClass');
        cancelButton.innerText = 'Cancel';
        cancelButton.onclick = function () {
            _this.visible = false;
            onCancel();
        };
        _this.visible = true;
        return _this;
    }
    return PasswordDialog;
}(_GUI_Dialog__WEBPACK_IMPORTED_MODULE_1__["Dialog"]));



/***/ }),

/***/ "./src/Apps/Squint/PromiseMap.ts":
/*!***************************************!*\
  !*** ./src/Apps/Squint/PromiseMap.ts ***!
  \***************************************/
/*! exports provided: PromiseMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PromiseMap", function() { return PromiseMap; });
/* harmony import */ var _SquintApp__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SquintApp */ "./src/Apps/Squint/SquintApp.ts");

var PromiseData = /** @class */ (function () {
    function PromiseData(timeoutHandle, resolve, reject) {
        this.timeoutHandle = timeoutHandle;
        this.resolve = resolve;
        this.reject = reject;
    }
    return PromiseData;
}());
var PromiseMap = /** @class */ (function () {
    function PromiseMap() {
        this.map = new Map();
    }
    PromiseMap.prototype.put = function (id, timeoutMs, resolve, reject, rejectMessage) {
        var _this = this;
        var handle = window.setTimeout(function () {
            var req = _this.map.get(id);
            req.timeoutHandle = null;
            _this.reject(id, rejectMessage);
        }, timeoutMs);
        var req = new PromiseData(handle, resolve, reject);
        this.map.set(id, req);
    };
    PromiseMap.prototype.extract = function (id) {
        var req = this.map.get(id);
        if (req === undefined) {
            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_0__["debug"])('Internal Error: request not found');
            throw new Error('request not found');
        }
        this.map.delete(id);
        if (req.timeoutHandle !== null) {
            window.clearTimeout(req.timeoutHandle);
            req.timeoutHandle = null;
        }
        return req;
    };
    PromiseMap.prototype.reject = function (id, err) {
        if (this.map.has(id)) {
            this.extract(id).reject(err);
        }
    };
    PromiseMap.prototype.resolve = function (id, data) {
        if (this.map.has(id)) {
            this.extract(id).resolve(data);
        }
    };
    return PromiseMap;
}());



/***/ }),

/***/ "./src/Apps/Squint/Rect.ts":
/*!*********************************!*\
  !*** ./src/Apps/Squint/Rect.ts ***!
  \*********************************/
/*! exports provided: RectHit, Rect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RectHit", function() { return RectHit; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Rect", function() { return Rect; });
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Util3D/Vec */ "./src/Util3D/Vec.ts");

var RectHit;
(function (RectHit) {
    RectHit[RectHit["UL"] = 0] = "UL";
    RectHit[RectHit["UR"] = 1] = "UR";
    RectHit[RectHit["LL"] = 2] = "LL";
    RectHit[RectHit["LR"] = 3] = "LR";
    RectHit[RectHit["Inside"] = 4] = "Inside";
    RectHit[RectHit["None"] = 5] = "None";
})(RectHit || (RectHit = {}));
var Rect = /** @class */ (function () {
    function Rect(x, y, width, height) {
        if (x === void 0) { x = 0; }
        if (y === void 0) { y = 0; }
        if (width === void 0) { width = 0; }
        if (height === void 0) { height = 0; }
        this.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
    }
    Object.defineProperty(Rect.prototype, "left", {
        get: function () {
            return this.x;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Rect.prototype, "top", {
        get: function () {
            return this.y;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Rect.prototype, "right", {
        get: function () {
            return this.x + this.width;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Rect.prototype, "bottom", {
        get: function () {
            return this.y + this.height;
        },
        enumerable: false,
        configurable: true
    });
    Rect.prototype.getScaled = function (factor) {
        return new Rect(factor * this.x, factor * this.y, factor * this.width, factor * this.height);
    };
    Rect.prototype.inside = function (pos) {
        if (pos.x > this.x && pos.x < this.right && pos.y > this.y && pos.y < this.bottom) {
            return true;
        }
        else {
            return false;
        }
    };
    Rect.prototype.hit = function (pos, epsilon) {
        var ul = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec2"]([this.x, this.y]);
        var ur = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec2"]([this.right, this.y]);
        var ll = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec2"]([this.x, this.bottom]);
        var lr = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec2"]([this.right, this.bottom]);
        if (pos.distance(ul) < epsilon) {
            return RectHit.UL;
        }
        else if (pos.distance(ur) < epsilon) {
            return RectHit.UR;
        }
        else if (pos.distance(ll) < epsilon) {
            return RectHit.LL;
        }
        else if (pos.distance(lr) < epsilon) {
            return RectHit.LR;
        }
        else if (pos.x > this.x && pos.x < this.right && pos.y > this.y && pos.y < this.bottom) {
            return RectHit.Inside;
        }
        else {
            return RectHit.None;
        }
    };
    return Rect;
}());



/***/ }),

/***/ "./src/Apps/Squint/ResizeablePanel.ts":
/*!********************************************!*\
  !*** ./src/Apps/Squint/ResizeablePanel.ts ***!
  \********************************************/
/*! exports provided: ResizeablePanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResizeablePanel", function() { return ResizeablePanel; });
/* harmony import */ var _Panel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Panel */ "./src/Apps/Squint/Panel.ts");
/* harmony import */ var _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../GUI/PointerEventHandler */ "./src/GUI/PointerEventHandler.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


var ResizeablePanel = /** @class */ (function (_super) {
    __extends(ResizeablePanel, _super);
    function ResizeablePanel(parent, id, displayStyleForShow, settingsKey) {
        if (displayStyleForShow === void 0) { displayStyleForShow = 'block'; }
        var _this = _super.call(this, parent, id, displayStyleForShow, settingsKey) || this;
        var handler = new _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_1__["PointerEventHandler"](_this.div);
        handler.onDrag = function (pos, delta) {
            _this.onDrag(pos, delta);
        };
        return _this;
    }
    ResizeablePanel.prototype.onSaveSettings = function (settings) {
        _super.prototype.onSaveSettings.call(this, settings);
        var style = getComputedStyle(this.div);
        settings.left = style.left;
        settings.top = style.top;
    };
    ResizeablePanel.prototype.onRestoreSettings = function (settings) {
        _super.prototype.onRestoreSettings.call(this, settings);
        if (settings.left !== undefined && settings.top != undefined) {
            this.div.style.top = settings.top;
            this.div.style.left = settings.left;
        }
    };
    ResizeablePanel.prototype.onDrag = function (pos, delta) {
        var oldStyle = getComputedStyle(this.div);
        var oldX = this.pxToFloat(oldStyle.left);
        var oldY = this.pxToFloat(oldStyle.top);
        this.div.style.top = (oldY + delta.y) + 'px';
        this.div.style.left = (oldX + delta.x) + 'px';
        this.saveSettings();
    };
    ResizeablePanel.prototype.pxToFloat = function (value) {
        return Number.parseFloat(value.substr(0, value.length - 2));
    };
    return ResizeablePanel;
}(_Panel__WEBPACK_IMPORTED_MODULE_0__["Panel"]));



/***/ }),

/***/ "./src/Apps/Squint/Servers.ts":
/*!************************************!*\
  !*** ./src/Apps/Squint/Servers.ts ***!
  \************************************/
/*! exports provided: SquintWsUrl, SquintHttpUrl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SquintWsUrl", function() { return SquintWsUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SquintHttpUrl", function() { return SquintHttpUrl; });
var host;
var wsPre;
var httpPre;
if (location.hostname === 'localhost') {
    host = 'localhost:8080/V1/';
    wsPre = 'ws://';
    httpPre = 'http://';
}
else {
    host = 'squintserver-11278.nodechef.com/V1/';
    wsPre = 'wss://';
    httpPre = 'https://';
}
//export const SquintUrl = 'ws://192.168.86.23:8080/V1/'
var SquintWsUrl = wsPre + host;
var SquintHttpUrl = httpPre + host;
//static readonly url = 'ws://localhost:8080/V1/'
//static readonly url = 'wss://squintserver-11278.nodechef.com/V1/'
//private host = 'https://woyaktest.ue.r.appspot.com/';
//private host = 'http://192.168.86.23:8080/';
//private host = 'http://localhost:8080/';
//private host = 'http://' + location.hostname + ':8080/V1';
//private host = 'http://' + location.hostname + ':3000/';
//static readonly url = 'https://squintserver-11278.nodechef.com/V1';
//static readonly url = 'http://' + location.hostname + ':8080/V1'
//static readonly url = 'http://localhost:8080/V1'


/***/ }),

/***/ "./src/Apps/Squint/SessionSetupDialog.ts":
/*!***********************************************!*\
  !*** ./src/Apps/Squint/SessionSetupDialog.ts ***!
  \***********************************************/
/*! exports provided: SessionSetupDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SessionSetupDialog", function() { return SessionSetupDialog; });
/* harmony import */ var _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../GUI/GUI */ "./src/GUI/GUI.ts");
/* harmony import */ var _GUI_Dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../GUI/Dialog */ "./src/GUI/Dialog.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


var SessionSetupDialog = /** @class */ (function (_super) {
    __extends(SessionSetupDialog, _super);
    function SessionSetupDialog(parent, onOk) {
        var _this = _super.call(this, parent, 'SessionSetup') || this;
        var passwordGroupDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('div', 'PasswordGroupDiv', _this.dialogDiv);
        var passwordLabel = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('label', 'PasswordLabel', passwordGroupDiv);
        passwordLabel.innerText = 'Password:';
        var passwordTextInput = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('input', 'PasswordTextInput', passwordGroupDiv);
        passwordLabel.htmlFor = passwordTextInput.id;
        passwordTextInput.type = 'text';
        passwordTextInput.placeholder = 'leave blank for none';
        passwordTextInput.autocapitalize = 'none';
        passwordTextInput.onkeypress = function (event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                okButton.click();
            }
        };
        _this.onShow = function () {
            passwordTextInput.focus();
            passwordTextInput.select();
        };
        var okButton = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('button', 'OkButton', passwordGroupDiv, 'ButtonClass');
        okButton.innerText = 'OK';
        okButton.onclick = function () {
            _this.visible = false;
            var password = passwordTextInput.value.trim();
            onOk(password);
        };
        _this.visible = true;
        return _this;
    }
    return SessionSetupDialog;
}(_GUI_Dialog__WEBPACK_IMPORTED_MODULE_1__["Dialog"]));



/***/ }),

/***/ "./src/Apps/Squint/Sounds.ts":
/*!***********************************!*\
  !*** ./src/Apps/Squint/Sounds.ts ***!
  \***********************************/
/*! exports provided: Sounds, SpookySounds */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Sounds", function() { return Sounds; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SpookySounds", function() { return SpookySounds; });
var Sounds;
(function (Sounds) {
    Sounds["Beep"] = "sounds/beep.mp3";
    Sounds["Chime"] = "sounds/chime.mp3";
    Sounds["Cricket"] = "sounds/cricket.mp3";
    Sounds["Cukoo"] = "sounds/cukoo.mp3";
    Sounds["Ding"] = "sounds/ding.mp3";
    Sounds["Gong"] = "sounds/gong.mp3";
    Sounds["Loon"] = "sounds/loon.mp3";
    Sounds["Owl"] = "sounds/owl.mp3";
    Sounds["Ring"] = "sounds/ring.mp3";
    Sounds["Rubber_Ducky"] = "sounds/rubberDucky.mp3";
    Sounds["Tweet"] = "sounds/tweet.mp3";
})(Sounds || (Sounds = {}));
var SpookySounds;
(function (SpookySounds) {
    SpookySounds["Azghost"] = "sounds/spooky/azghost.mp3";
    SpookySounds["Cackle"] = "sounds/spooky/cackle.mp3";
    SpookySounds["Ghost"] = "sounds/spooky/ghost.mp3";
    SpookySounds["Jaws"] = "sounds/spooky/jaws.mp3";
    SpookySounds["Scream"] = "sounds/spooky/scream.mp3";
    SpookySounds["Wicked_Laugh"] = "sounds/spooky/wickedlaugh.mp3";
    SpookySounds["Witch"] = "sounds/spooky/witch.mp3";
    SpookySounds["Wolf"] = "sounds/spooky/wolf.mp3";
})(SpookySounds || (SpookySounds = {}));


/***/ }),

/***/ "./src/Apps/Squint/Squint.ts":
/*!***********************************!*\
  !*** ./src/Apps/Squint/Squint.ts ***!
  \***********************************/
/*! exports provided: Squint */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Squint", function() { return Squint; });
/* harmony import */ var _Servers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Servers */ "./src/Apps/Squint/Servers.ts");
/* harmony import */ var _SquintApp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SquintApp */ "./src/Apps/Squint/SquintApp.ts");
/* harmony import */ var _SquintSocket__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SquintSocket */ "./src/Apps/Squint/SquintSocket.ts");
/* harmony import */ var _SquintMessage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SquintMessage */ "./src/Apps/Squint/SquintMessage.ts");
/* harmony import */ var _EventManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./EventManager */ "./src/Apps/Squint/EventManager.ts");
/* harmony import */ var _SquintEvents__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SquintEvents */ "./src/Apps/Squint/SquintEvents.ts");
/* harmony import */ var _WebSocketFactory__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./WebSocketFactory */ "./src/Apps/Squint/WebSocketFactory.ts");
/* harmony import */ var _PromiseMap__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./PromiseMap */ "./src/Apps/Squint/PromiseMap.ts");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! uuid */ "./node_modules/uuid/dist/esm-browser/index.js");
/* harmony import */ var _SquintStrings__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./SquintStrings */ "./src/Apps/Squint/SquintStrings.ts");
/* harmony import */ var _Util_Stopwatch__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../Util/Stopwatch */ "./src/Util/Stopwatch.ts");
/* harmony import */ var _ModelTimer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./ModelTimer */ "./src/Apps/Squint/ModelTimer.ts");












var Squint = /** @class */ (function () {
    function Squint() {
        this.ReconnectTimeoutS = 600;
        this.ReconnectRetryDelayS = 1;
        this.ss = null;
        this._userName = null;
        this._remoteCameraPaused = false;
        this._remoteCameraConnected = true;
        this.requests = new _PromiseMap__WEBPACK_IMPORTED_MODULE_7__["PromiseMap"]();
        this.reconnectStopwatch = null;
        this.eventManager = new _EventManager__WEBPACK_IMPORTED_MODULE_4__["EventManager"]();
        this._modelTimer = new _ModelTimer__WEBPACK_IMPORTED_MODULE_11__["ModelTimer"](this);
    }
    Object.defineProperty(Squint.prototype, "ws", {
        /**
         * For debugging only
         */
        get: function () {
            return this.ss.ws;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Squint.prototype, "modelTimer", {
        get: function () {
            return this._modelTimer;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Squint.prototype, "userName", {
        get: function () {
            if (this._userName === null) {
                return 'Unknown';
            }
            else {
                return this._userName;
            }
        },
        set: function (userName) {
            if (this._userName !== userName) {
                this._userName = userName;
                if (this.connected) {
                    this.updateConnectionInfo(userName);
                }
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Squint.prototype, "connected", {
        get: function () {
            if (this.ss && this.ss.connected) {
                return true;
            }
            else {
                return false;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Squint.prototype, "reconnecting", {
        get: function () {
            return this.reconnectStopwatch !== null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Squint.prototype, "bufferReady", {
        get: function () {
            if (!this.connected) {
                Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('Squint.bufferReady() called after websocket was disconnected');
                return false;
            }
            // @ts-ignore: cannot be null - we check above
            return this.ss.bufferedAmount === 0;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Squint.prototype, "connectionInfo", {
        get: function () {
            return {
                connectionId: this.connectionId,
                userName: this.userName,
            };
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Squint.prototype, "connectionId", {
        get: function () {
            return (this.ss !== null) ? this.ss.connectionId : 'WebSocket not connected';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Squint.prototype, "remoteCameraPaused", {
        get: function () {
            return this._remoteCameraPaused;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Squint.prototype, "remoteCameraConnected", {
        get: function () {
            return this._remoteCameraConnected;
        },
        enumerable: false,
        configurable: true
    });
    Squint.prototype.on = function (handler) {
        this.eventManager.on(handler.event, handler.handler);
    };
    Squint.prototype.remove = function (handler) {
        this.eventManager.remove(handler.event, handler.handler);
    };
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    Squint.prototype.emit = function (name) {
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        this.eventManager.emit(name, args[0], args[1], args[2], args[3], args[4], args[5], args[6], args[8], args[9]);
    };
    Squint.prototype.processMessage = function (msg) {
        switch (msg.subject) {
            case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].CameraPaused:
                {
                    this._remoteCameraPaused = true;
                    this.eventManager.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].CameraPaused);
                }
                break;
            case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].CameraRequest:
                {
                    this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].CameraRequest, msg.resolution, msg.jpegQuality);
                }
                break;
            case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].ChatMessage:
                {
                    this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].ChatMessage, msg.connection, msg.message);
                }
                break;
            case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].ConnectionInfoUpdate:
                {
                    this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].ConnectionInfoUpdate, {
                        userName: msg.userName,
                        connectionId: msg.connectionId,
                    });
                }
                break;
            case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].HostChanged:
                {
                    this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].HostChanged, msg.newHostConnectionId);
                }
                break;
            case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].HostDisconnected:
                {
                    this._remoteCameraConnected = false;
                    this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].HostDisconnected);
                }
                break;
            case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].SessionCreated:
                {
                    switch (msg.status) {
                        case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["CreateSessionStatus"].Success:
                            this.requests.resolve(msg.requestId, msg.sessionId);
                            this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].SynchronizeTimer, msg.timerInfo);
                            break;
                        case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["CreateSessionStatus"].AlreadyInASession:
                            this.requests.reject(msg.requestId, _SquintStrings__WEBPACK_IMPORTED_MODULE_9__["SquintStrings"].CANNOT_CREATE_SESSION__IN_SESSION);
                            break;
                        default:
                            // @ts-ignore TS2339: Property 'XXX' does not exist on type 'never'
                            this.requests.reject(msg.requestId, _SquintStrings__WEBPACK_IMPORTED_MODULE_9__["SquintStrings"].CANNOT_CREATE_SESSION(msg.status));
                            break;
                    }
                }
                break;
            case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].SessionJoined:
                {
                    switch (msg.status) {
                        case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["JoinSessionStatus"].Success:
                            this.requests.resolve(msg.requestId);
                            this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].SynchronizeTimer, msg.timerInfo);
                            break;
                        case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["JoinSessionStatus"].AlreadyInASession:
                            this.requests.reject(msg.requestId, _SquintStrings__WEBPACK_IMPORTED_MODULE_9__["SquintStrings"].CANNOT_JOIN_SESSION__IN_SESSION);
                            break;
                        case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["JoinSessionStatus"].SessionNotFound:
                            this.requests.reject(msg.requestId, _SquintStrings__WEBPACK_IMPORTED_MODULE_9__["SquintStrings"].CANNOT_JOIN_SESSION__SESSION_NOT_FOUND);
                            break;
                        case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["JoinSessionStatus"].InvalidPassword:
                            this.requests.reject(msg.requestId, _SquintStrings__WEBPACK_IMPORTED_MODULE_9__["SquintStrings"].CANNOT_JOIN_SESSION__INVALID_PASSWORD);
                            break;
                        default:
                            // @ts-ignore TS2339: Property 'XXX' does not exist on type 'never'
                            this.requests.reject(msg.requestId, _SquintStrings__WEBPACK_IMPORTED_MODULE_9__["SquintStrings"].CANNOT_JOIN_SESSION(msg.status));
                            break;
                    }
                }
                break;
            case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].SessionList:
                {
                    this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].SessionList, msg.sessions);
                }
                break;
            case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].SessionInfo:
                {
                    this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].SessionInfo, msg.info);
                }
                break;
            case _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].SynchronizeTimer:
                {
                    this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].SynchronizeTimer, msg.info);
                }
                break;
            case undefined:
                console.error('Invalid Message: \'subject\' not found.\n' + JSON.stringify(msg, null, ' '));
                break;
            default:
                console.error('Invalid Message: unknown \'subject\'.\n' + JSON.stringify(msg, null, ' '));
                break;
        }
    };
    Squint.prototype.tryToReconnect = function (connectionId) {
        var _this = this;
        if (this.reconnectStopwatch === null) {
            this.reconnectStopwatch = new _Util_Stopwatch__WEBPACK_IMPORTED_MODULE_10__["Stopwatch"]();
            this.retryCount = 1;
            this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].Reconnecting);
        }
        else {
            this.retryCount++;
        }
        console.log(this + ' Reconnect try ' + this.retryCount);
        this.doConnect(connectionId)
            .then(function () {
            _this.reconnectStopwatch = null;
            _this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].Reconnected, true);
        })
            .catch(function (err) {
            console.log(_this + ' Reconnect try ' + _this.retryCount + ' failed: ' + err);
            if (typeof err === 'string' && err.endsWith('Server rejected the request.')) {
                console.log(_this + ' Unable to reconnect, server rejected the request.');
                _this.reconnectStopwatch = null;
                _this.ss = null;
                _this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].Reconnected, false);
                _this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].Close);
            }
            else if (_this.reconnectStopwatch.elapsedS < _this.ReconnectTimeoutS) {
                setTimeout(function () {
                    _this.tryToReconnect(connectionId);
                }, 1000 * _this.ReconnectRetryDelayS);
            }
            else {
                console.log(_this + ' Unable to reconnect.');
                _this.reconnectStopwatch = null;
                _this.ss = null;
                _this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].Reconnected, false);
                _this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].Close);
            }
        });
    };
    Squint.prototype.connect = function (url, userName) {
        this._userName = userName;
        this._url = url;
        this._remoteCameraConnected = true;
        this._remoteCameraPaused = false;
        return this.doConnect();
    };
    Squint.prototype.doConnect = function (reconnectId) {
        var _this = this;
        if (this.connected) {
            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('Connecting even though previous connection is still open');
            return Promise.reject('Cannot connect to server: previous connection is still open');
        }
        var onMessage = function (msg) {
            if (!_this.ss.connected) {
                Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('ws.onMessage() message received, but socket not open');
            }
            // process the image
            _this.processMessage(msg);
        };
        var onImage = function (blob) {
            if (!_this.ss.connected) {
                Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('ss.onImage() message received, but socket not open');
            }
            _this._remoteCameraPaused = false;
            _this._remoteCameraConnected = true;
            _this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].Image, blob);
        };
        var onClose = function (code) {
            var connectionId = _this.ss.connectionId;
            if (code === _SquintSocket__WEBPACK_IMPORTED_MODULE_2__["SquintSocket"].CLOSE_CODE_NORMAL) {
                _this.ss = null;
                _this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].Close);
            }
            else if (code === Squint.CLOSE_CODE_FAIL_NO_RECONNECT) {
                _this.ss = null;
                _this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].Close);
            }
            else {
                console.log(_this + ' WebSocket closed with code: ' + code + ', trying to reconnect');
                _this.tryToReconnect(connectionId);
            }
        };
        return _SquintSocket__WEBPACK_IMPORTED_MODULE_2__["SquintSocket"].connect(this._url, this.userName, onMessage, onImage, onClose, function (ss) { _this.ss = ss; }, reconnectId);
    };
    Squint.prototype.close = function () {
        if (!this.connected) {
            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('Squint.close() called but no connection exists');
            return;
        }
        // @ts-ignore: cannot be null - we check above
        this.ss.close();
        this.ss = null;
        this.emit(_SquintEvents__WEBPACK_IMPORTED_MODULE_5__["SquintEvent"].Close);
    };
    Squint.prototype.send = function (msg) {
        if (!this.connected) {
            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('Squint.send() called, but not connected: ' + JSON.stringify(msg));
            return;
        }
        // @ts-ignore: cannot be null - we check above
        this.ss.send(msg);
    };
    Squint.prototype.sendImage = function (blob) {
        if (!this.connected) {
            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('Squint.sendImage() called, but not connected');
            return;
        }
        if (this.bufferReady) {
            // @ts-ignore: cannot be null - we check above
            this.ss.sendImage(blob);
        }
        else {
            // @ts-ignore: cannot be null - we check above
            // TODO figure out what this happens
            // console.error('Skipping upload, buffer not empty: ' + this.ss.bufferedAmount);
        }
    };
    Squint.prototype.requestNextImage = function () {
        this.send({
            subject: _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].ReadyForNextImage,
        });
    };
    Squint.prototype.createSession = function (password, timeoutMs) {
        var _this = this;
        if (timeoutMs === void 0) { timeoutMs = 5000; }
        if (password && password.trim().length === 0) {
            password = undefined;
        }
        // eslint-disable-next-line @typescript-eslint/no-unsafe-call
        var id = Object(uuid__WEBPACK_IMPORTED_MODULE_8__["v4"])(); // ⇨ '9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d'
        this.send({
            subject: _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].CreateSession,
            requestId: id,
            password: password
        });
        return new Promise(function (resolve, reject) {
            _this.requests.put(id, timeoutMs, resolve, reject, _SquintStrings__WEBPACK_IMPORTED_MODULE_9__["SquintStrings"].CANNOT_CREATE_SESSION__TIMEOUT);
        });
    };
    Squint.prototype.joinSession = function (sessionId, password, timeoutMs) {
        var _this = this;
        if (timeoutMs === void 0) { timeoutMs = 5000; }
        // eslint-disable-next-line @typescript-eslint/no-unsafe-call
        var id = Object(uuid__WEBPACK_IMPORTED_MODULE_8__["v4"])(); // ⇨ '9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d'
        this.send({
            subject: _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].JoinSession,
            requestId: id,
            sessionId: sessionId,
            password: password,
        });
        return new Promise(function (resolve, reject) {
            _this.requests.put(id, timeoutMs, resolve, reject, _SquintStrings__WEBPACK_IMPORTED_MODULE_9__["SquintStrings"].CANNOT_JOIN_SESSION__TIMEOUT);
        });
    };
    Squint.prototype.updateConnectionInfo = function (userName) {
        this._userName = userName;
        this.send({
            subject: _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].ConnectionInfoUpdate,
            userName: this.connectionInfo.userName,
            connectionId: this.connectionInfo.connectionId,
        });
    };
    Squint.prototype.sendChatMessage = function (msg) {
        this.send({
            subject: _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].ChatMessage,
            message: msg,
            connection: this.connectionInfo,
        });
    };
    Squint.prototype.log = function (msg) {
        if (this.connected) {
            this.send({
                subject: _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].Log,
                message: msg,
            });
        }
    };
    Squint.prototype.sendCameraRequest = function (resolution, jpegQuality) {
        this.send({
            subject: _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].CameraRequest,
            resolution: resolution,
            jpegQuality: jpegQuality,
        });
    };
    Squint.prototype.cameraPaused = function () {
        this.send({
            subject: _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].CameraPaused,
        });
    };
    Squint.prototype.requestToBeHost = function () {
        this.send({
            subject: _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].HostChangeRequest
        });
        // reset flags
        this._remoteCameraConnected = true;
        this._remoteCameraPaused = false;
    };
    Squint.prototype.synchronizeTimer = function (info) {
        this.send({
            subject: _SquintMessage__WEBPACK_IMPORTED_MODULE_3__["SquintMessageSubject"].SynchronizeTimer,
            info: info,
        });
    };
    Squint.inspect = function (url) {
        return new Promise(function (resolve, reject) {
            var ws = _WebSocketFactory__WEBPACK_IMPORTED_MODULE_6__["WebSocketFactory"].create(url);
            ws.onopen = function () {
                ws.send('inspect');
            };
            ws.onmessage = function (msg) {
                ws.onopen = null;
                //ws.onclose = null;
                ws.onerror = null;
                ws.onmessage = null;
                try {
                    resolve(JSON.parse(msg.data));
                }
                catch (err) {
                    reject('Invalid inspect response: ' + err + '\n' +
                        'Message: ' + msg.data);
                }
            };
            ws.onclose = function (event) {
                reject('WebSocket closed with code ' + event.code);
            };
            ws.onerror = function () {
                reject('WebSocket error');
            };
        });
    };
    Squint.dump = function (url) {
        return new Promise(function (resolve, reject) {
            var ws = _WebSocketFactory__WEBPACK_IMPORTED_MODULE_6__["WebSocketFactory"].create(url);
            ws.onopen = function () {
                ws.send('dump');
            };
            ws.onmessage = function (msg) {
                ws.onopen = null;
                ws.onclose = null;
                ws.onerror = null;
                ws.onmessage = null;
                resolve(msg.data);
            };
            ws.onclose = function (event) {
                reject('WebSocket closed with code ' + event.code);
            };
            ws.onerror = function () {
                reject('WebSocket error');
            };
        });
    };
    Squint.log = function (url, msg) {
        var ws = _WebSocketFactory__WEBPACK_IMPORTED_MODULE_6__["WebSocketFactory"].create(url);
        ws.onopen = function () {
            ws.send('log ' + msg);
        };
    };
    Squint.prototype.toString = function () {
        if (this.ss) {
            return '[' + this.ss.readyStateStr + ']';
        }
        else {
            return '[websocket=null]';
        }
    };
    Squint.url = _Servers__WEBPACK_IMPORTED_MODULE_0__["SquintWsUrl"];
    // special code that close the socket with an error code thus causing the
    // server to go into zombie mode. One code also tells us, the client, to
    // not try to auto-reconnect. Use these for testing only
    Squint.CLOSE_CODE_FAIL_NO_RECONNECT = 3001;
    Squint.CLOSE_CODE_FAIL_RECONNECT = 3000;
    return Squint;
}());



/***/ }),

/***/ "./src/Apps/Squint/SquintApp.ts":
/*!**************************************!*\
  !*** ./src/Apps/Squint/SquintApp.ts ***!
  \**************************************/
/*! exports provided: debug, SquintApp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "debug", function() { return debug; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SquintApp", function() { return SquintApp; });
/* harmony import */ var webrtc_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! webrtc-adapter */ "./node_modules/webrtc-adapter/src/js/adapter_core.js");
/* harmony import */ var _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../GUI/PointerEventHandler */ "./src/GUI/PointerEventHandler.ts");
/* harmony import */ var _Camera__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Camera */ "./src/Apps/Squint/Camera.ts");
/* harmony import */ var _Uploader__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Uploader */ "./src/Apps/Squint/Uploader.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _Util_ConsoleCapture__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../Util/ConsoleCapture */ "./src/Util/ConsoleCapture.ts");
/* harmony import */ var _StartDialog__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./StartDialog */ "./src/Apps/Squint/StartDialog.ts");
/* harmony import */ var _Version__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Version */ "./src/Apps/Squint/Version.ts");
/* harmony import */ var _Squint__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Squint */ "./src/Apps/Squint/Squint.ts");
/* harmony import */ var _WelcomeDialog__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./WelcomeDialog */ "./src/Apps/Squint/WelcomeDialog.ts");
/* harmony import */ var _UserNameDialog__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./UserNameDialog */ "./src/Apps/Squint/UserNameDialog.ts");
/* harmony import */ var _GUI_GUI__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../GUI/GUI */ "./src/GUI/GUI.ts");
/* harmony import */ var _ChatPanel__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./ChatPanel */ "./src/Apps/Squint/ChatPanel.ts");
/* harmony import */ var _BandwidthTracker__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./BandwidthTracker */ "./src/Apps/Squint/BandwidthTracker.ts");
/* harmony import */ var _SquintEvents__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./SquintEvents */ "./src/Apps/Squint/SquintEvents.ts");
/* harmony import */ var nosleep_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! nosleep.js */ "./node_modules/nosleep.js/src/index.js");
/* harmony import */ var nosleep_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(nosleep_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _WebSocketFactory__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./WebSocketFactory */ "./src/Apps/Squint/WebSocketFactory.ts");
/* harmony import */ var _StorageWithEvents__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./StorageWithEvents */ "./src/Apps/Squint/StorageWithEvents.ts");
/* harmony import */ var _SquintStrings__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./SquintStrings */ "./src/Apps/Squint/SquintStrings.ts");
/* harmony import */ var _PasswordDialog__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./PasswordDialog */ "./src/Apps/Squint/PasswordDialog.ts");
/* harmony import */ var _ImageCanvas__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./ImageCanvas */ "./src/Apps/Squint/ImageCanvas.ts");
/* harmony import */ var _LevelsPanel__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./LevelsPanel */ "./src/Apps/Squint/LevelsPanel.ts");
/* harmony import */ var _ModelTimerPanel__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./ModelTimerPanel */ "./src/Apps/Squint/ModelTimerPanel.ts");
/* harmony import */ var _Sounds__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./Sounds */ "./src/Apps/Squint/Sounds.ts");
/* harmony import */ var _ZoomPanel__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./ZoomPanel */ "./src/Apps/Squint/ZoomPanel.ts");

























_WebSocketFactory__WEBPACK_IMPORTED_MODULE_16__["WebSocketFactory"].create = function (url) { return new WebSocket(url); };
function debug(msg) {
    console.error(msg);
    //alert('debug error: ' + msg);
}
var SquintApp = /** @class */ (function () {
    function SquintApp() {
        var _this = this;
        this.dirty = true;
        this.storage = new _StorageWithEvents__WEBPACK_IMPORTED_MODULE_17__["StorageWithEvents"]();
        this.desired = {
            label: '',
            width: 0,
            height: 0,
            frameRate: 0,
            facingMode: '',
            deviceId: '',
        };
        this.uploader = null;
        this.downloadTracker = new _BandwidthTracker__WEBPACK_IMPORTED_MODULE_13__["BandwidthTracker"]();
        this.cameraCtrls = [];
        this.advancedConstraints = [];
        this.squint = new _Squint__WEBPACK_IMPORTED_MODULE_8__["Squint"]();
        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-call
        this.noSleep = new nosleep_js__WEBPACK_IMPORTED_MODULE_15___default.a();
        // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access
        this.noSleep.enable();
        document.title += (' ' + _Version__WEBPACK_IMPORTED_MODULE_7__["Version"].Build);
        //localStorage.removeItem(StorageItem.UserName); // simulates starting up the first time
        this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_14__["SquintEvent"].Image,
            handler: (function (blob) { _this.onDownload(blob); })
        });
        this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_14__["SquintEvent"].Close,
            handler: (function () { _this.closeConnection(); })
        });
        this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_14__["SquintEvent"].ChatMessage,
            handler: (function (connection, msg) { _this.onChatMessage(connection, msg); })
        });
        this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_14__["SquintEvent"].Reconnecting,
            handler: function () {
                console.log('connection lost, reconnecting...');
                _this.showNotification('Connection lost, reconnecting');
                _this.dirty = true;
            }
        });
        this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_14__["SquintEvent"].Reconnected,
            handler: function (success) {
                console.log('reconnected: success=' + success);
                if (success === false) {
                    _this.showNotification('Could not reconnect');
                }
                else {
                    _this.showNotification('Reconnected');
                }
                _this.dirty = true;
            }
        });
        this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_14__["SquintEvent"].CameraRequest,
            handler: function (megaPixels, jpegQuality) {
                _this.megaPixels.value = megaPixels;
                _this.jpegQuality.value = jpegQuality;
            }
        });
        this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_14__["SquintEvent"].HostDisconnected,
            handler: function () {
                _this.dirty = true;
            }
        });
        this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_14__["SquintEvent"].HostChanged,
            handler: function (newHostConnectionId) {
                // TODO make sure we're not calling things twice
                if (newHostConnectionId === _this.squint.connectionId) {
                    _this.enableVideo(true);
                    _this.startUploader();
                }
                else {
                    _this.stopUploader();
                    _this.enableVideo(false);
                }
            }
        });
        this.storage.on(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_17__["StorageItem"].UserName, function (userName) {
            _this.userNameMenuItemDiv.innerText = 'Hi ' + userName;
            _this.squint.userName = userName;
        });
        document.addEventListener('visibilitychange', function () {
            if (document.visibilityState === 'visible') {
                if (_this.uploader) {
                    _this.uploader.resume();
                }
                _this.downloadTracker.resume();
                _this.squint.synchronizeTimer();
            }
            else {
                if (_this.uploader) {
                    _this.uploader.pause();
                }
                _this.downloadTracker.pause();
            }
        });
        // How do you know when to close the socket? pageHide on some browsers and beforeunload/unload on
        // others. Safari seems most problematic as the actual SocketClose only randomly makes it back to
        // the server so the server doesn't know it has been a gracefull exit.
        window.addEventListener('pagehide', function () {
            if (_this.squint.connected) {
                _this.squint.close();
            }
        });
        window.addEventListener('beforeunload', function () {
            if (_this.squint.connected) {
                _this.squint.close();
            }
        });
        window.addEventListener('pageshow', function () {
            if (_this.squint.connected === false) {
                _this.stopUploader();
                _this.enableVideo(false);
                _this.startDialog.visible = true;
            }
            // TODO remove
            console.log('pageshow');
        });
        document.addEventListener('resume', function () {
            if (_this.squint.connected === false) {
                _this.stopUploader();
                _this.enableVideo(false);
                _this.startDialog.visible = true;
            }
            console.log('resume');
        });
        /*
        window.addEventListener('pageshow', () => {
           console.log('pageshow');
        });
  
        document.addEventListener('freeze', () => {
           console.log('freeze');
        });
  
        document.addEventListener('resume', () => {
           console.log('resume');
        });
  
        window.addEventListener('beforeunload', () => {
           console.log('beforeunload');
        });
     
        window.addEventListener('pagehide', () => {
           console.log('pagehide');
        });
     
        window.addEventListener('unload', () => {
           console.log('unload');
        });
        */
    }
    SquintApp.prototype.create = function (div) {
        var _this = this;
        div.id = 'SquintApp';
        var onJoinSession = function (sessionId) {
            _this.join(sessionId);
        };
        var onStartSession = function (password) {
            _this.squint.createSession(password)
                .then(function () {
                _this.enableVideo(true);
            })
                .catch(function (err) {
                alert(err);
                _this.startDialog.visible = true;
            });
        };
        this.startDialog = new _StartDialog__WEBPACK_IMPORTED_MODULE_6__["StartDialog"](div, this.squint, onJoinSession, onStartSession, this.storage);
        this.div = _GUI_GUI__WEBPACK_IMPORTED_MODULE_11__["GUI"].create('div', 'BodyDiv', div);
        this.console = new _Util_ConsoleCapture__WEBPACK_IMPORTED_MODULE_5__["ConsoleCapture"](this.div);
        this.console.onMessage = function (msg) {
            _this.squint.log(msg);
        };
        this.canvas = new _ImageCanvas__WEBPACK_IMPORTED_MODULE_20__["ImageCanvas"](this.div, 'Canvas');
        this.overlayCanvas = _GUI_GUI__WEBPACK_IMPORTED_MODULE_11__["GUI"].create('canvas', 'OverlayCanvas', this.div, 'Overlay');
        this.camera = new _Camera__WEBPACK_IMPORTED_MODULE_2__["Camera"](this.div);
        this.camera.visible = false;
        this.camera.onPaused = function () {
            _this.squint.cameraPaused();
        };
        this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_14__["SquintEvent"].CameraPaused,
            handler: function () {
                _this.dirty = true;
            }
        });
        this.timerPanel = new _ModelTimerPanel__WEBPACK_IMPORTED_MODULE_22__["ModelTimerPanel"](this.squint.modelTimer, this.div);
        this.zoomPanel = new _ZoomPanel__WEBPACK_IMPORTED_MODULE_24__["ZoomPanel"](this.div);
        this.zoomPanel.onChange = function () {
            var change = _this.zoomPanel.zoom / _this.canvas.zoom;
            _this.canvas.zoom *= change;
            _this.canvas.xOffset *= change;
            _this.canvas.yOffset *= change;
            _this.dirty = true;
        };
        this.chatPanel = new _ChatPanel__WEBPACK_IMPORTED_MODULE_12__["ChatPanel"](this.squint, this.div);
        if (this.chatPanel.hasSavedSettings) {
            this.chatPanel.restoreSettings();
        }
        else {
            if (_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["isMobile"] === false) {
                this.chatPanel.visible = true;
            }
        }
        this.levelsPanel = new _LevelsPanel__WEBPACK_IMPORTED_MODULE_21__["LevelsPanel"](this.div);
        if (this.levelsPanel.hasSavedSettings) {
            this.levelsPanel.restoreSettings();
        }
        this.levelsPanel.onChange = function () {
            _this.canvas.white = _this.levelsPanel.white;
            _this.canvas.black = _this.levelsPanel.black;
            _this.canvas.midPt = _this.levelsPanel.midPoint;
            _this.canvas.midValue = _this.levelsPanel.midValue;
            _this.canvas.numLevels = _this.levelsPanel.numLevels;
            _this.canvas.chroma = _this.levelsPanel.chroma;
            _this.dirty = true;
        };
        this.notificationDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_11__["GUI"].create('div', 'NotificationDiv', this.div);
        var handler = new _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_1__["PointerEventHandler"](this.canvas.element);
        handler.onScale = function (scale, change) { return _this.onScale(scale, change); };
        handler.onTranslate = function (delta) { return _this.onTranslate(delta); };
        handler.onDrag = function (pos, delta) { return _this.onDrag(pos, delta); };
        window.addEventListener('resize', function () { return _this.updateSizes(); });
        this.updateSizes();
        if (this.storage.has(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_17__["StorageItem"].UserName) === false) {
            this.showWelcomeDialog();
        }
        else {
            this.startDialog.visible = false;
        }
        document.onkeydown = function (event) {
            if (_this.squint.connected && event.target instanceof HTMLInputElement === false) {
                switch (event.key) {
                    case 'x':
                        // simulate killing the connection
                        _this.squint.ws.close(3000);
                        break;
                    case '1':
                        if (event.altKey) {
                            _this.remoteCameraMenu.hidden = !_this.remoteCameraMenu.hidden;
                        }
                        break;
                }
            }
        };
        // kick off the rendering loop
        this.drawImg();
    };
    SquintApp.prototype.join = function (sessionId, password) {
        var _this = this;
        this.squint.joinSession(sessionId, password)
            .then(function () {
            _this.startDialog.visible = false;
        })
            .catch(function (err) {
            if (password !== undefined) {
                alert('Incorrect Password');
            }
            if (err === _SquintStrings__WEBPACK_IMPORTED_MODULE_18__["SquintStrings"].CANNOT_JOIN_SESSION__INVALID_PASSWORD) {
                var dlg_1;
                var okHandler = function (password) {
                    _this.join(sessionId, password);
                    // do this last as it stops execution of this handler when content 
                    // is removed from the DOM
                    dlg_1.dispose();
                };
                var cancelHandler = function () {
                    dlg_1.dispose();
                };
                dlg_1 = new _PasswordDialog__WEBPACK_IMPORTED_MODULE_19__["PasswordDialog"](_this.div, okHandler, cancelHandler);
            }
            else {
                alert(err);
            }
            _this.startDialog.visible = true;
        });
    };
    SquintApp.prototype.showWelcomeDialog = function () {
        var _this = this;
        var welcomeDialog = new _WelcomeDialog__WEBPACK_IMPORTED_MODULE_9__["WelcomeDialog"](this.div, function (userName) {
            _this.storage.set(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_17__["StorageItem"].UserName, userName);
            _this.startDialog.visible = true;
        });
        welcomeDialog.visible = true;
    };
    SquintApp.prototype.closeConnection = function () {
        if (this.squint.connected) {
            this.squint.close();
        }
        this.stopUploader();
        this.enableVideo(false);
        this.startDialog.visible = true;
        this.canvas.clear();
    };
    SquintApp.prototype.startSession = function () {
        this.startUploader();
    };
    SquintApp.prototype.startUploader = function () {
        var _this = this;
        if (this.uploader === null) {
            this.uploader = new _Uploader__WEBPACK_IMPORTED_MODULE_3__["Uploader"](this.squint, function () { return _this.takePicture(); });
        }
    };
    SquintApp.prototype.stopUploader = function () {
        if (this.uploader) {
            this.uploader.stop();
            this.uploader = null;
        }
    };
    SquintApp.prototype.enableCameraCtrls = function (flag) {
        this.cameraMenu.enabled = flag;
        for (var i = 0; i < this.cameraCtrls.length; i++) {
            this.cameraCtrls[i].enabled = flag;
        }
    };
    SquintApp.prototype.buildMenu = function (menubar) {
        var _this = this;
        var optionsMenu = menubar.addSubMenu('Options');
        this.cameraMenu = optionsMenu.addSubMenu('Camera');
        // TODO just fully disable all the menu items instead of the menu itself.
        this.cameraMenu.enabled = false;
        var preferredCamera = {
            deviceId: undefined,
        };
        if (this.storage.has(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_17__["StorageItem"].Camera)) {
            preferredCamera = JSON.parse(this.storage.get(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_17__["StorageItem"].Camera));
        }
        var preferredFound = false;
        _Camera__WEBPACK_IMPORTED_MODULE_2__["Camera"].getCameras(function (constraint, cameraIndex, numCameras) {
            var selected = preferredCamera.deviceId && constraint.deviceId === preferredCamera.deviceId;
            if (preferredFound === false) {
                if (selected) {
                    preferredFound = true;
                }
                else if (cameraIndex === (numCameras - 1)) {
                    // if a preferred camera was not found and this is the last entry, make it the preferred one
                    preferredFound = true;
                    selected = true;
                }
            }
            var radioButton = _this.cameraMenu.addRadiobutton({
                label: constraint.label,
                oncheck: function () {
                    _this.desired = constraint;
                    _this.enableVideo(true);
                },
                checked: selected,
                group: 'CamerasGroup',
            });
            if (selected) {
                _this.desired = constraint;
            }
            _this.cameraCtrls.push(radioButton);
        });
        this.jpegQuality = this.cameraMenu.addSlider({
            label: 'JPeg Photo Quality',
            min: 0.1,
            max: 1,
            value: 0.5,
            onGetText: function (slider) { return (100 * slider.value).toFixed() + '%'; },
        });
        this.cameraCtrls.push(this.jpegQuality);
        this.megaPixels = this.cameraMenu.addSlider({
            label: 'Camera Mega-Pixels',
            min: 0.25,
            max: 5,
            value: 1.25,
            onGetText: function (slider) { return slider.value.toFixed(2); },
        });
        this.cameraCtrls.push(this.megaPixels);
        var rotationSubMenu = this.cameraMenu.addSubMenu('Rotation');
        rotationSubMenu.addRadiobutton({
            label: '0°',
            group: 'rotation',
            checked: true,
            oncheck: function () {
                _this.camera.rotation = _Camera__WEBPACK_IMPORTED_MODULE_2__["CameraRotation"].DEG_0;
            }
        });
        rotationSubMenu.addRadiobutton({
            label: '90°',
            group: 'rotation',
            checked: false,
            oncheck: function () {
                _this.camera.rotation = _Camera__WEBPACK_IMPORTED_MODULE_2__["CameraRotation"].DEG_90;
            }
        });
        rotationSubMenu.addRadiobutton({
            label: '180°',
            group: 'rotation',
            checked: false,
            oncheck: function () {
                _this.camera.rotation = _Camera__WEBPACK_IMPORTED_MODULE_2__["CameraRotation"].DEG_180;
            }
        });
        rotationSubMenu.addRadiobutton({
            label: '270°',
            group: 'rotation',
            checked: false,
            oncheck: function () {
                _this.camera.rotation = _Camera__WEBPACK_IMPORTED_MODULE_2__["CameraRotation"].DEG_270;
            }
        });
        this.advancedSubMenu = this.cameraMenu.addSubMenu('Advanced');
        this.enableCameraCtrls(false);
        var sessionMenu = menubar.addSubMenu('Session');
        sessionMenu.addItem('Exit', function () {
            _this.closeConnection();
        });
        sessionMenu.addItem('Make me Host', function () {
            _this.squint.requestToBeHost();
        });
        sessionMenu.addCheckbox({
            label: 'Logs',
            oncheck: function (checkbox) { _this.console.visible = checkbox.checked; },
            checked: function () { return _this.console.visible; }
        });
        var soundMenu = optionsMenu.addSubMenu('Sounds');
        var _loop_1 = function (soundStr) {
            var sound = _Sounds__WEBPACK_IMPORTED_MODULE_23__["Sounds"][soundStr];
            soundMenu.addRadiobutton({
                label: soundStr.replace('_', ' '),
                group: 'Sounds',
                checked: this_1.timerPanel.sound === sound,
                oncheck: function () {
                    _this.timerPanel.sound = sound;
                    _this.timerPanel.testSound();
                }
            });
        };
        var this_1 = this;
        for (var soundStr in _Sounds__WEBPACK_IMPORTED_MODULE_23__["Sounds"]) {
            _loop_1(soundStr);
        }
        this.remoteCameraMenu = menubar.addSubMenu('Remote Camera');
        this.remoteCameraMenu.hidden = true;
        var remoteJpegQuality = this.remoteCameraMenu.addSlider({
            label: 'JPeg Photo Quality',
            min: 0.1,
            max: 1,
            value: 0.5,
            onGetText: function (slider) { return (100 * slider.value).toFixed() + '%'; },
            oninput: function () {
                _this.squint.sendCameraRequest(remoteMegaPixels.value, remoteJpegQuality.value);
            }
        });
        var remoteMegaPixels = this.remoteCameraMenu.addSlider({
            label: 'Camera Mega Pixels',
            min: this.megaPixels.min,
            max: this.megaPixels.max,
            value: this.megaPixels.value,
            onGetText: function (slider) { return slider.value.toFixed(2); },
            oninput: function () {
                _this.squint.sendCameraRequest(remoteMegaPixels.value, remoteJpegQuality.value);
            }
        });
        var transparentWhite = 'rgba(255,255,255,0.5)';
        var chatImg = menubar.addImage(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["baseUrl"])() + 'img/chat.svg', function () { _this.chatPanel.visible = !_this.chatPanel.visible; });
        chatImg.style.backgroundColor = this.chatPanel.visible ? transparentWhite : 'transparent';
        this.chatPanel.onVisible = function (visible) {
            chatImg.style.backgroundColor = visible ? transparentWhite : 'transparent';
        };
        var levelsImg = menubar.addImage(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["baseUrl"])() + 'img/levels.svg', function () { _this.levelsPanel.visible = !_this.levelsPanel.visible; });
        levelsImg.style.backgroundColor = this.levelsPanel.visible ? transparentWhite : 'transparent';
        this.levelsPanel.onVisible = function (visible) {
            levelsImg.style.backgroundColor = visible ? transparentWhite : 'transparent';
        };
        this.userNameMenuItemDiv = menubar.addItem('Hi ' + (this.storage.has(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_17__["StorageItem"].UserName) ? this.storage.get(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_17__["StorageItem"].UserName) : ''), function () {
            new _UserNameDialog__WEBPACK_IMPORTED_MODULE_10__["UserNameDialog"](_this.div, _this.storage);
        });
        this.userNameMenuItemDiv.id = 'UserNameItemDiv';
    };
    SquintApp.prototype.onDownload = function (blob) {
        if (!blob) {
            debug('onDownload() blob is null');
        }
        // let the server know we're ready for the next download
        this.squint.requestNextImage();
        this.drawBlob(blob);
    };
    SquintApp.prototype.drawBlob = function (blob) {
        var _this = this;
        var img = document.createElement('img');
        img.src = URL.createObjectURL(blob);
        img.onload = function () {
            // TODO how do we know that this connection is the same as the one that
            // initiated the request?
            if (_this.squint.connected) {
                _this.img = img;
                _this.downloadTracker.tick(blob.size);
                _this.dirty = true;
            }
            URL.revokeObjectURL(img.src);
        };
        img.onerror = function (reason) {
            alert('Cannot load image: ' + reason);
        };
    };
    SquintApp.prototype.buildAdvancedSubMenu = function (track) {
        var _this = this;
        this.advancedSubMenu.clear();
        this.advancedSubMenu.addItem('Camera Capabilities...', function () {
            var capabilities = _this.camera.getCapabilities();
            var msg = 'Camera Capabilities:\n';
            for (var key in capabilities) {
                if (key === 'deviceId' || key === 'groupId') {
                    continue;
                }
                msg += _Camera__WEBPACK_IMPORTED_MODULE_2__["Camera"].capabilityToString(capabilities, key) + '\n';
            }
            alert(msg);
        });
        this.advancedConstraints = [];
        // getCapabilities() not supported on Firefox
        if (track.getCapabilities) {
            var capabilities = track.getCapabilities();
            var settings = track.getSettings();
            var whiteBalanceMode = {
                constraint: 'whiteBalanceMode',
                label: 'Auto White Blance'
            };
            var colorTemperature = {
                constraint: 'colorTemperature',
                label: 'Temperature'
            };
            var exposureMode = {
                constraint: 'exposureMode',
                label: 'Auto Exposure'
            };
            var exposureCompensation = {
                constraint: 'exposureCompensation',
                label: 'F-Stop'
            };
            var exposureTime = {
                constraint: 'exposureTime',
                label: 'Exposure'
            };
            var iso = {
                constraint: 'iso',
                label: 'ISO'
            };
            var focusMode = {
                constraint: 'focusMode',
                label: 'Auto Focus'
            };
            var focusDistance = {
                constraint: 'focusDistance',
                label: 'Focus'
            };
            var zoom = {
                constraint: 'zoom',
                label: 'Zoom'
            };
            if (capabilities.whiteBalanceMode && capabilities.colorTemperature) {
                this.addAdvancedItems(settings, capabilities, whiteBalanceMode, [colorTemperature]);
            }
            if (capabilities.exposureMode &&
                (capabilities.exposureCompensation || capabilities.exposureTime || capabilities.iso)) {
                this.addAdvancedItems(settings, capabilities, exposureMode, [exposureCompensation, exposureTime, iso]);
            }
            if (capabilities.focusMode && capabilities.focusDistance) {
                this.addAdvancedItems(settings, capabilities, focusMode, [focusDistance]);
            }
            if (capabilities.zoom) {
                this.addAdvancedSlider(settings, capabilities, zoom);
            }
        }
    };
    SquintApp.prototype.addAdvancedItems = function (settings, capabilities, checkboxSetup, sliderSetups) {
        var _this = this;
        var sliders = [];
        var checkbox = this.advancedSubMenu.addCheckbox({
            label: checkboxSetup.label,
            oncheck: function (checkbox) {
                for (var _i = 0, sliders_1 = sliders; _i < sliders_1.length; _i++) {
                    var slider = sliders_1[_i];
                    slider.enabled = !checkbox.checked;
                }
                _this.camera.applyAdvancedConstraints(_this.advancedConstraints);
            },
            checked: settings[checkboxSetup.constraint] === 'continuous',
        });
        this.advancedConstraints.push({
            constraint: checkboxSetup.constraint,
            value: function () { return checkbox.checked ? 'continuous' : 'manual'; }
        });
        for (var _i = 0, sliderSetups_1 = sliderSetups; _i < sliderSetups_1.length; _i++) {
            var item = sliderSetups_1[_i];
            if (capabilities[item.constraint]) {
                var slider = this.addAdvancedSlider(settings, capabilities, item);
                slider.enabled = !checkbox.checked;
                sliders.push(slider);
            }
        }
    };
    SquintApp.prototype.addAdvancedSlider = function (settings, capabilities, item) {
        var _this = this;
        var range = capabilities[item.constraint];
        var slider = this.advancedSubMenu.addSlider({
            label: item.label,
            min: range.min,
            max: range.max,
            value: settings[item.constraint],
            onGetText: function (slider) { return slider.value.toFixed(); },
            oninput: function () { _this.camera.applyAdvancedConstraints(_this.advancedConstraints); }
        });
        this.advancedConstraints.push({
            constraint: item.constraint,
            value: function () { return slider.value; }
        });
        return slider;
    };
    SquintApp.prototype.enableVideo = function (enable) {
        var _this = this;
        // stop the last video
        this.camera.stop();
        this.enableCameraCtrls(enable);
        if (enable) {
            this.camera.visible = true;
            this.camera.start(this.desired)
                .then(function (track) {
                var settings = track.getSettings();
                var maxMP = settings.width * settings.height / 1000000;
                _this.megaPixels.max = maxMP;
                _this.updateVideoSize(settings.width, settings.height);
                _this.buildAdvancedSubMenu(track);
                _this.updateVideoSize(_this.camera.videoWidth, _this.camera.videoHeight);
                // save the selected camera
                var obj = {
                    deviceId: _this.camera.deviceId,
                };
                _this.storage.set(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_17__["StorageItem"].Camera, JSON.stringify(obj));
                if (!_this.uploader) {
                    _this.startSession();
                }
            })
                .catch(function (reason) {
                alert(reason);
            });
        }
        else {
            this.stopUploader();
            this.camera.visible = false;
            this.advancedSubMenu.clear();
        }
    };
    SquintApp.prototype.takePicture = function () {
        var _this = this;
        if (!this.squint.connected) {
            console.error('takePicture() after close');
        }
        return this.camera.takePicture(this.megaPixels.value, this.jpegQuality.value)
            .then(function (blob) {
            // draw what was uploaded, i.e. simulate a download
            _this.drawBlob(blob);
            return blob;
        });
    };
    SquintApp.prototype.updateVideoSize = function (videoWidth, videoHeight) {
        if (this.camera.visible) {
            var videoSize = Math.max(this.camera.clientWidth, this.camera.clientHeight);
            if (videoWidth > videoHeight) {
                this.camera.width = videoSize;
                this.camera.height = (videoSize * videoHeight / videoWidth);
            }
            else {
                this.camera.height = videoSize;
                this.camera.width = (videoSize * videoWidth / videoHeight);
            }
        }
    };
    SquintApp.prototype.updateSizes = function () {
        this.dirty = true;
    };
    SquintApp.prototype.drawImg = function () {
        var _this = this;
        requestAnimationFrame(function () { return _this.drawImg(); });
        if (this.dirty === false) {
            return;
        }
        if (!this.img) {
            return;
        }
        this.canvas.draw(this.img);
        this.overlayCanvas.width = this.canvas.width;
        this.overlayCanvas.height = this.canvas.height;
        var ctx = this.overlayCanvas.getContext('2d');
        var msg;
        var canvasWidth = this.canvas.width;
        var canvasHeight = this.canvas.height;
        var canvasAR = canvasWidth / canvasHeight;
        var imgWidth = this.img.width;
        var imgHeight = this.img.height;
        var imgAR = imgWidth / imgHeight;
        var width;
        var height;
        if (canvasAR > imgAR) {
            height = this.canvas.zoom * canvasHeight;
            width = height * imgAR;
        }
        else {
            width = this.canvas.zoom * canvasWidth;
            height = width / imgAR;
        }
        ctx.clearRect(0, 0, canvasWidth, canvasHeight);
        var fontSize = _Util_Globals__WEBPACK_IMPORTED_MODULE_4__["isMobile"] ? 30 : 15;
        ctx.fillStyle = 'black';
        ctx.font = fontSize + 'px sans-serif';
        /*
        // squint server url
        ctx.textAlign = 'left';
        ctx.textBaseline = 'top';
        ctx.fillText(Squint.url, 5, 5);
        */
        // listeners
        ctx.textAlign = 'left';
        ctx.textBaseline = 'bottom';
        var lineHeight = fontSize + 5;
        var y = canvasHeight - 5;
        this.chatPanel.viewers.forEach(function (viewer) {
            ctx.fillText(viewer, 5, y);
            y -= lineHeight;
        });
        ctx.fillText(this.chatPanel.viewers.length + ' viewer(s)', 5, y);
        // stats
        ctx.textAlign = 'right';
        ctx.textBaseline = 'bottom';
        // image size
        msg = imgWidth + 'x' + imgHeight;
        ctx.fillText(msg, canvasWidth - 5, canvasHeight - (4 * fontSize + 5));
        // image size
        var mp = (imgWidth * imgHeight / 1000000);
        if (mp < 1.5) {
            msg = mp.toFixed(2) + 'MP';
        }
        else {
            msg = mp.toFixed(1) + 'MP';
        }
        ctx.fillText(msg, canvasWidth - 5, canvasHeight - (3 * fontSize + 5));
        var fps;
        var bandwidth;
        if (this.uploader) {
            bandwidth = this.uploader.megaBitsPerSec;
            fps = this.uploader.fps;
        }
        else {
            bandwidth = this.downloadTracker.megaBitsPerSec;
            fps = this.downloadTracker.fps;
        }
        // FPS
        msg = fps.toFixed(1) + ' fps';
        ctx.fillText(msg, canvasWidth - 5, canvasHeight - (2 * fontSize + 5));
        // bandwidth
        if (bandwidth < 5) {
            msg = bandwidth.toFixed(2) + ' Mbsp';
        }
        else {
            msg = bandwidth.toFixed(1) + ' Mbsp';
        }
        ctx.fillText(msg, canvasWidth - 5, canvasHeight - (fontSize + 5));
        // bytes
        msg = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["toSizeStr"])(this.downloadTracker.lastTransferBytes);
        ctx.fillText(msg, canvasWidth - 5, canvasHeight - 5);
        // messages
        msg = '';
        if (this.squint.reconnecting) {
            msg = 'Reconnecting...';
        }
        if (this.squint.remoteCameraPaused || this.squint.remoteCameraConnected === false) {
            if (this.squint.remoteCameraConnected === false) {
                msg = 'Camera Disconnected';
            }
            else {
                msg = 'Camera Paused';
            }
        }
        if (msg.length > 0) {
            ctx.shadowBlur = 0;
            ctx.fillStyle = 'rgba(0,0,0,0.5)';
            ctx.fillRect(0, 0, canvasWidth, canvasHeight);
            var fontSize_1 = 10;
            ctx.font = fontSize_1 + 'px sans-serif';
            var textMetrics = ctx.measureText(msg);
            fontSize_1 *= (0.8 * Math.min(width, canvasWidth) / textMetrics.width);
            ctx.font = fontSize_1 + 'px sans-serif';
            ctx.fillStyle = 'rgba(255,255,255,0.5)';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(msg, canvasWidth / 2, canvasHeight / 2);
        }
        this.dirty = false;
    };
    SquintApp.prototype.onScale = function (scale, change) {
        // TODO: center scaling about your two fingers
        this.canvas.zoom *= change;
        this.canvas.xOffset *= change;
        this.canvas.yOffset *= change;
        this.zoomPanel.zoom = this.canvas.zoom;
        this.dirty = true;
    };
    SquintApp.prototype.onTranslate = function (delta) {
        this.canvas.xOffset += delta.x;
        this.canvas.yOffset += delta.y;
        this.dirty = true;
    };
    SquintApp.prototype.onDrag = function (pos, delta) {
        // TODO delta is opposite of translate in Y direction
        this.canvas.xOffset += delta.x;
        this.canvas.yOffset -= delta.y;
        this.dirty = true;
    };
    SquintApp.prototype.onChatMessage = function (connection, msg) {
        this.showNotification('<b>' + connection.userName + '</b>: ' + msg);
    };
    SquintApp.prototype.showNotification = function (html) {
        this.notificationDiv.innerHTML = html;
        // force the animation to run by removing and adding the element
        this.div.removeChild(this.notificationDiv);
        this.div.appendChild(this.notificationDiv);
    };
    return SquintApp;
}());



/***/ }),

/***/ "./src/Apps/Squint/SquintEvents.ts":
/*!*****************************************!*\
  !*** ./src/Apps/Squint/SquintEvents.ts ***!
  \*****************************************/
/*! exports provided: SquintEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SquintEvent", function() { return SquintEvent; });
var SquintEvent;
(function (SquintEvent) {
    SquintEvent["CameraPaused"] = "cameraPaused";
    SquintEvent["CameraRequest"] = "cameraRequest";
    SquintEvent["ChatMessage"] = "chatMessage";
    SquintEvent["Close"] = "close";
    SquintEvent["ConnectionInfoUpdate"] = "connectionInfoUpdate";
    SquintEvent["HostChanged"] = "hostChanged";
    SquintEvent["HostDisconnected"] = "hostDisconnected";
    SquintEvent["Image"] = "image";
    SquintEvent["Reconnecting"] = "reconnecting";
    SquintEvent["Reconnected"] = "reconnected";
    SquintEvent["SessionInfo"] = "sessionInfo";
    SquintEvent["SessionList"] = "sessionList";
    SquintEvent["SynchronizeTimer"] = "synchronizeTimer";
})(SquintEvent || (SquintEvent = {}));


/***/ }),

/***/ "./src/Apps/Squint/SquintMessage.ts":
/*!******************************************!*\
  !*** ./src/Apps/Squint/SquintMessage.ts ***!
  \******************************************/
/*! exports provided: ConnectionState, CreateSessionStatus, JoinSessionStatus, ReconnectedStatus, SquintMessageSubject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionState", function() { return ConnectionState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CreateSessionStatus", function() { return CreateSessionStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "JoinSessionStatus", function() { return JoinSessionStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReconnectedStatus", function() { return ReconnectedStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SquintMessageSubject", function() { return SquintMessageSubject; });
//
// This file should be the same in both the Squint and SquintServer projects
//
var ConnectionState;
(function (ConnectionState) {
    ConnectionState["Zombie"] = "ZOMBIE";
    ConnectionState["Open"] = "OPEN";
    ConnectionState["Closed"] = "CLOSED";
    ConnectionState["Connecting"] = "CONNECTING";
    ConnectionState["Closing"] = "CLOSING";
    ConnectionState["Unknown"] = "UNKNOWN";
})(ConnectionState || (ConnectionState = {}));
var CreateSessionStatus;
(function (CreateSessionStatus) {
    CreateSessionStatus[CreateSessionStatus["Success"] = 0] = "Success";
    CreateSessionStatus[CreateSessionStatus["AlreadyInASession"] = 1] = "AlreadyInASession";
})(CreateSessionStatus || (CreateSessionStatus = {}));
var JoinSessionStatus;
(function (JoinSessionStatus) {
    JoinSessionStatus[JoinSessionStatus["Success"] = 0] = "Success";
    JoinSessionStatus[JoinSessionStatus["AlreadyInASession"] = 1] = "AlreadyInASession";
    JoinSessionStatus[JoinSessionStatus["SessionNotFound"] = 2] = "SessionNotFound";
    JoinSessionStatus[JoinSessionStatus["InvalidPassword"] = 3] = "InvalidPassword";
})(JoinSessionStatus || (JoinSessionStatus = {}));
var ReconnectedStatus;
(function (ReconnectedStatus) {
    ReconnectedStatus["Success"] = "Success";
    ReconnectedStatus["Failed"] = "Failed";
})(ReconnectedStatus || (ReconnectedStatus = {}));
var SquintMessageSubject;
(function (SquintMessageSubject) {
    SquintMessageSubject["CameraPaused"] = "CameraPaused";
    SquintMessageSubject["CameraRequest"] = "CameraRequest";
    SquintMessageSubject["ChatMessage"] = "ChatMessage";
    SquintMessageSubject["ConnectionInfoUpdate"] = "ConnectionInfoUpdate";
    SquintMessageSubject["CreateSession"] = "CreateSession";
    SquintMessageSubject["Hello"] = "Hello";
    SquintMessageSubject["HostChanged"] = "HostChanged";
    SquintMessageSubject["HostChangeRequest"] = "HostChangeRequest";
    SquintMessageSubject["HostDisconnected"] = "HostDisconnected";
    SquintMessageSubject["JoinSession"] = "JoinSession";
    SquintMessageSubject["Log"] = "Log";
    SquintMessageSubject["ReadyForNextImage"] = "ReadyForNextImage";
    SquintMessageSubject["Reconnected"] = "Reconnected";
    SquintMessageSubject["SessionCreated"] = "SessionCreated";
    SquintMessageSubject["SessionInfo"] = "SessionInfo";
    SquintMessageSubject["SessionJoined"] = "SessionJoined";
    SquintMessageSubject["SessionList"] = "SessionList";
    SquintMessageSubject["SynchronizeTimer"] = "SynchronizeTimer";
})(SquintMessageSubject || (SquintMessageSubject = {}));


/***/ }),

/***/ "./src/Apps/Squint/SquintSocket.ts":
/*!*****************************************!*\
  !*** ./src/Apps/Squint/SquintSocket.ts ***!
  \*****************************************/
/*! exports provided: SquintSocket */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SquintSocket", function() { return SquintSocket; });
/* harmony import */ var _SquintMessage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SquintMessage */ "./src/Apps/Squint/SquintMessage.ts");
/* harmony import */ var _SquintApp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SquintApp */ "./src/Apps/Squint/SquintApp.ts");
/* harmony import */ var _WebSocketFactory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WebSocketFactory */ "./src/Apps/Squint/WebSocketFactory.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _Version__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Version */ "./src/Apps/Squint/Version.ts");





var SquintSocket = /** @class */ (function () {
    function SquintSocket(ws, connectionId, onMessage, onImage, onClose) {
        var _this = this;
        this._ws = null;
        this._ws = ws;
        this.connectionId = connectionId;
        this.onMessage = onMessage;
        this.onImage = onImage;
        this.onClose = onClose;
        ws.onopen = null;
        ws.onclose = function (event) {
            if (_this._ws) {
                _this._ws.onclose = null;
                _this._ws.onerror = null;
                _this._ws.onmessage = null;
                _this._ws.onopen = null;
            }
            _this._ws = null;
            _this.onClose(event.code);
        };
        ws.onerror = function (event) {
            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('SquintSocket.onError: ' + JSON.stringify(event, null, ' '));
        };
        ws.onmessage = function (message) {
            if (ws.readyState !== _WebSocketFactory__WEBPACK_IMPORTED_MODULE_2__["WebSocketReadyState"].OPEN) {
                Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('ws.onmessage() message received, but socket not open');
            }
            // process the image
            if (message.data instanceof Blob) {
                _this.onImage(message.data);
            }
            else if (typeof message.data === 'string') {
                try {
                    var msg = JSON.parse(message.data);
                    try {
                        _this.onMessage(msg);
                    }
                    catch (err) {
                        console.log('SquintSocket.onMessage() exception: ' + err);
                    }
                }
                catch (err) {
                    console.log('Invalid message received: Invalid JSON.\n' + err + '\n' + message.data);
                }
            }
            else {
                // Hate to modify our code to make it work with tests, but I don't know how else to
                // address this situation. We're testing using NodeJS which uses different types
                // than a browser. In particular it doesn't support Blobs so when we test sending
                // an image, it is not recognized as a Blob type. Ugh.
                if (_Util_Globals__WEBPACK_IMPORTED_MODULE_3__["env"].isTesting) {
                    _this.onImage(message.data);
                }
                else {
                    Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('SquintSocket: unknown message received: ' + JSON.stringify(message, null, ' ').substring(0, 10000));
                }
            }
        };
    }
    Object.defineProperty(SquintSocket.prototype, "ws", {
        /**
         * For debugging only
         */
        get: function () {
            return this._ws;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SquintSocket.prototype, "url", {
        get: function () {
            if (this._ws) {
                return this._ws.url;
            }
            else {
                return '';
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SquintSocket.prototype, "readyState", {
        get: function () {
            if (this._ws === null) {
                return _WebSocketFactory__WEBPACK_IMPORTED_MODULE_2__["WebSocketReadyState"].CLOSED;
            }
            else {
                return this._ws.readyState;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SquintSocket.prototype, "readyStateStr", {
        get: function () {
            if (this._ws === null) {
                return 'CLOSED';
            }
            switch (this._ws.readyState) {
                case _WebSocketFactory__WEBPACK_IMPORTED_MODULE_2__["WebSocketReadyState"].OPEN:
                    return 'OPEN';
                case _WebSocketFactory__WEBPACK_IMPORTED_MODULE_2__["WebSocketReadyState"].CLOSED:
                    return 'CLOSED';
                case _WebSocketFactory__WEBPACK_IMPORTED_MODULE_2__["WebSocketReadyState"].CONNECTING:
                    return 'CONNECTING';
                case _WebSocketFactory__WEBPACK_IMPORTED_MODULE_2__["WebSocketReadyState"].CLOSING:
                    return 'CLOSING';
                default:
                    return 'UNKNOWN';
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SquintSocket.prototype, "bufferedAmount", {
        get: function () {
            if (this._ws) {
                return this._ws.bufferedAmount;
            }
            else {
                Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('SquintSocket.bufferedAmount called, but not connected');
                return 0;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SquintSocket.prototype, "connected", {
        get: function () {
            return (this._ws !== null && this._ws.readyState === _WebSocketFactory__WEBPACK_IMPORTED_MODULE_2__["WebSocketReadyState"].OPEN);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SquintSocket.prototype, "bufferReady", {
        get: function () {
            if (!this.connected) {
                Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('SquintSocket.bufferReady() called after websocket was disconnected');
                return false;
            }
            return this.bufferedAmount === 0;
        },
        enumerable: false,
        configurable: true
    });
    SquintSocket.prototype.close = function (code) {
        if (code === void 0) { code = SquintSocket.CLOSE_CODE_NORMAL; }
        if (!this.connected) {
            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('SquintSocket.close() called but no connection exists');
            return;
        }
        if (this._ws) {
            this._ws.onclose = null;
            this._ws.onerror = null;
            this._ws.onmessage = null;
            this._ws.onopen = null;
            this._ws.close(code);
        }
        this._ws = null;
    };
    SquintSocket.prototype.send = function (msg) {
        if (!(this.connected)) {
            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('SquintSocket.send() called, but not connected');
            return;
        }
        // @ts-ignore: can't be null per above check
        this._ws.send(JSON.stringify(msg));
    };
    SquintSocket.prototype.sendImage = function (blob) {
        if (!this.connected) {
            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('SquintSocket.sendImage() called, but not connected');
            return;
        }
        // @ts-ignore: can't be null per above check
        this._ws.send(blob);
    };
    SquintSocket.connect = function (url, userName, onMessage, onImage, onClose, onInit, reconnectId) {
        return new Promise(function (resolve, reject) {
            // create temporary handlers that process the server handshake
            var ws = _WebSocketFactory__WEBPACK_IMPORTED_MODULE_2__["WebSocketFactory"].create(url);
            ws.onopen = function () {
                // send handshake message
                var msg = {
                    subject: _SquintMessage__WEBPACK_IMPORTED_MODULE_0__["SquintMessageSubject"].Hello,
                    userName: userName,
                    reconnectId: reconnectId,
                    userAgent: navigator.userAgent,
                    platform: navigator.platform,
                    version: _Version__WEBPACK_IMPORTED_MODULE_4__["Version"].toString(),
                };
                ws.send(JSON.stringify(msg));
            };
            ws.onclose = function (event) {
                ws.onopen = null;
                ws.onclose = null;
                ws.onmessage = null;
                reject('Cannot connect to server: ' + event.code);
            };
            ws.onerror = function (event) {
                Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('SquintSocket.onError() ' + JSON.stringify(event, null, ' '));
                ws.onopen = null;
                ws.onclose = null;
                ws.onmessage = null;
                reject('Cannot connect to ' + url);
            };
            ws.onmessage = function (messageEvent) {
                if (reconnectId) {
                    try {
                        var msg = JSON.parse(messageEvent.data);
                        if (msg.subject && msg.subject === 'Reconnected') {
                            if (msg.status === _SquintMessage__WEBPACK_IMPORTED_MODULE_0__["ReconnectedStatus"].Success) {
                                var ss = new SquintSocket(ws, reconnectId, onMessage, onImage, onClose);
                                onInit(ss);
                                resolve(ss);
                            }
                            else {
                                reject('Cannot reconnect to ' + url + '\n\nServer rejected the request.');
                            }
                        }
                        else {
                            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('Expected Reconnected response, got: ' + JSON.stringify(msg, null, ' '));
                            reject('Cannot reconnect to ' + url + '\n\nInvalid server handshake.');
                        }
                    }
                    catch (err) {
                        Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('Expected Reconnect response, got: ' + messageEvent.data);
                        reject('Cannot reconnect to ' + url + '\n\nInvalid server handshake.');
                    }
                }
                else {
                    try {
                        var msg = JSON.parse(messageEvent.data);
                        if (msg.subject && msg.subject === 'Hello') {
                            msg = msg;
                            console.log('Squint connection established. ID=' + msg.connectionId);
                            var ss = new SquintSocket(ws, msg.connectionId, onMessage, onImage, onClose);
                            // there is a very tricky potential bug here. After resolve() is called,
                            // but before the associated then() method is called, a message may be
                            // received on the socket. That's why we need the onInit() handler
                            onInit(ss);
                            resolve(ss);
                        }
                        else {
                            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('Expected Hello response, got: ' + JSON.stringify(msg, null, ' '));
                            reject('Cannot connect to ' + url + '\n\nInvalid server handshake.');
                        }
                    }
                    catch (err) {
                        Object(_SquintApp__WEBPACK_IMPORTED_MODULE_1__["debug"])('Expected Hello response, got: ' + messageEvent.data);
                        reject('Cannot connect to ' + url + '\n\nInvalid server handshake.');
                    }
                }
            };
        });
    };
    SquintSocket.CLOSE_CODE_NORMAL = 1000;
    return SquintSocket;
}());



/***/ }),

/***/ "./src/Apps/Squint/SquintStrings.ts":
/*!******************************************!*\
  !*** ./src/Apps/Squint/SquintStrings.ts ***!
  \******************************************/
/*! exports provided: SquintStrings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SquintStrings", function() { return SquintStrings; });
var SquintStrings = /** @class */ (function () {
    function SquintStrings() {
    }
    SquintStrings.CANNOT_JOIN_SESSION = function (code) {
        return ('Cannot join session: Error code: ' + code);
    };
    SquintStrings.CANNOT_CREATE_SESSION = function (code) {
        return ('Cannot create session: Error code: ' + code);
    };
    SquintStrings.CAMERA_NOT_READY = 'Camera not ready';
    SquintStrings.CANNOT_JOIN_SESSION__IN_SESSION = 'Cannot join session: currently in another session.';
    SquintStrings.CANNOT_JOIN_SESSION__SESSION_NOT_FOUND = 'Cannot join session: session not found.';
    SquintStrings.CANNOT_JOIN_SESSION__TIMEOUT = 'Cannot join session: request timed out.';
    SquintStrings.CANNOT_JOIN_SESSION__INVALID_PASSWORD = 'Cannot join session: invalid password.';
    SquintStrings.CANNOT_CREATE_SESSION__IN_SESSION = 'Cannot create session: currently in another session.';
    SquintStrings.CANNOT_CREATE_SESSION__TIMEOUT = 'Cannot create session: request timed out.';
    return SquintStrings;
}());



/***/ }),

/***/ "./src/Apps/Squint/StartDialog.ts":
/*!****************************************!*\
  !*** ./src/Apps/Squint/StartDialog.ts ***!
  \****************************************/
/*! exports provided: StartDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StartDialog", function() { return StartDialog; });
/* harmony import */ var _GUI_ListBox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../GUI/ListBox */ "./src/GUI/ListBox.ts");
/* harmony import */ var _Version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Version */ "./src/Apps/Squint/Version.ts");
/* harmony import */ var _Squint__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Squint */ "./src/Apps/Squint/Squint.ts");
/* harmony import */ var _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../GUI/GUI */ "./src/GUI/GUI.ts");
/* harmony import */ var _UserNameDialog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./UserNameDialog */ "./src/Apps/Squint/UserNameDialog.ts");
/* harmony import */ var _GUI_Dialog__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../GUI/Dialog */ "./src/GUI/Dialog.ts");
/* harmony import */ var _SquintEvents__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SquintEvents */ "./src/Apps/Squint/SquintEvents.ts");
/* harmony import */ var _StorageWithEvents__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./StorageWithEvents */ "./src/Apps/Squint/StorageWithEvents.ts");
/* harmony import */ var _SessionSetupDialog__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./SessionSetupDialog */ "./src/Apps/Squint/SessionSetupDialog.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();









var StartDialog = /** @class */ (function (_super) {
    __extends(StartDialog, _super);
    function StartDialog(parent, squint, onJoinSession, onStartSession, storage) {
        var _this = _super.call(this, parent, 'Start') || this;
        _this.squint = squint;
        _this.storage = storage;
        _this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_6__["SquintEvent"].SessionList,
            handler: function (sessions) {
                _this.onSessionList(sessions);
            }
        });
        var timeout;
        _this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_6__["SquintEvent"].Reconnecting,
            handler: function () {
                timeout = window.setTimeout(function () {
                    timeout = -1;
                    // give the system a little time to reconnect before showing a message
                    _this.showConnectingMsg = true;
                }, 500);
            }
        });
        _this.squint.on({
            event: _SquintEvents__WEBPACK_IMPORTED_MODULE_6__["SquintEvent"].Reconnected,
            handler: function (success) {
                if (timeout !== -1) {
                    window.clearTimeout(timeout);
                }
                if (success) {
                    _this.showConnectingMsg = false;
                }
                else {
                    _this.connect();
                }
            }
        });
        _this.onStartView = onJoinSession;
        _this.onStartSession = onStartSession;
        var dialogTitleDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('div', 'DialogTitleDiv', _this.dialogDiv);
        var titleDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('div', 'TitleDiv', dialogTitleDiv);
        titleDiv.className = 'DialogTitleClass';
        titleDiv.innerText = 'Squint v0.1.' + _Version__WEBPACK_IMPORTED_MODULE_1__["Version"].Build;
        _this.connectingDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('div', 'ConnectingTextDiv', dialogTitleDiv);
        _this.connectingDiv.innerText = 'connecting...';
        _this.connectingAnimationDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].createAnimation('ConnectingAnimationDiv', dialogTitleDiv);
        _this.userNameButton = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('button', 'UserNameButton', dialogTitleDiv);
        _this.userNameButton.className = 'ButtonClass';
        _this.userNameButton.style.display = 'none';
        _this.userNameButton.onclick = function () {
            new _UserNameDialog__WEBPACK_IMPORTED_MODULE_4__["UserNameDialog"](parent, storage);
        };
        _this.bodyDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('div', 'DialogBodyDiv', _this.dialogDiv);
        //
        // View a session panel
        //
        var viewPanelDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('div', 'ViewPanelDiv', _this.bodyDiv);
        _this.viewListBox = new _GUI_ListBox__WEBPACK_IMPORTED_MODULE_0__["ListBox"](viewPanelDiv, 'ViewListBox');
        _this.viewListBox.onSelectedChanged = function () {
            goViewButton.disabled = (_this.viewListBox.selected === null);
        };
        var buttonDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('div', 'ButtonDiv', viewPanelDiv);
        buttonDiv.className = 'ButtonDivClass';
        var goViewButton = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('button', 'ViewButton', buttonDiv);
        goViewButton.className = 'ButtonClass';
        goViewButton.innerText = 'View a camera...';
        goViewButton.disabled = true;
        goViewButton.onclick = function () {
            var connectionId = _this.viewListBox.selected;
            _this.onStartView(connectionId);
        };
        //
        // Or panel
        //
        var orPanelDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('div', 'OrPanelDiv', _this.bodyDiv);
        var orDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('div', 'OrDiv', orPanelDiv);
        orDiv.innerText = 'OR';
        //
        // Host a session panel
        //
        var hostPanelDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('div', 'HostPanelDiv', _this.bodyDiv);
        // camera icon css
        var iconDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('div', 'IconDiv', hostPanelDiv);
        iconDiv.className = 'icon';
        var cameraIconDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('div', 'CameraDiv', iconDiv);
        cameraIconDiv.className = 'camera-icon';
        var circleSmallDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('div', 'CircleSmallDiv', cameraIconDiv);
        circleSmallDiv.className = 'camera-circle';
        var circleBigDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('div', 'CircleBigDiv', cameraIconDiv);
        circleBigDiv.className = 'camera-btn';
        var buttonDiv2 = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('div', 'ButtonDiv', hostPanelDiv);
        buttonDiv2.className = 'ButtonDivClass';
        _this.goHostButton = _GUI_GUI__WEBPACK_IMPORTED_MODULE_3__["GUI"].create('button', 'HostButton', buttonDiv2);
        _this.goHostButton.className = 'ButtonClass';
        _this.goHostButton.innerText = 'Share your camera...';
        _this.goHostButton.onclick = function () {
            var dlg;
            var onOk = function (password) {
                dlg.dispose();
                _this.visible = false;
                _this.onStartSession(password);
            };
            dlg = new _SessionSetupDialog__WEBPACK_IMPORTED_MODULE_8__["SessionSetupDialog"](_this.bodyDiv, onOk);
        };
        storage.on(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_7__["StorageItem"].UserName, function (userName) {
            _this.userNameButton.innerText = 'Hi ' + userName;
        });
        _this.onShow = function () {
            _this.userNameButton.innerText = 'Hi ' + _this.storage.get(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_7__["StorageItem"].UserName);
            if (_this.squint.connected === false) {
                _this.connect();
            }
        };
        return _this;
    }
    Object.defineProperty(StartDialog.prototype, "showConnectingMsg", {
        set: function (flag) {
            this.bodyDiv.style.pointerEvents = flag ? 'none' : 'auto';
            this.bodyDiv.style.filter = flag ? 'grayscale(1) contrast(0.4)' : '';
            this.connectingDiv.style.display = flag ? 'block' : 'none';
            this.connectingAnimationDiv.style.display = flag ? 'block' : 'none';
            this.userNameButton.style.display = flag ? 'none' : 'block';
        },
        enumerable: false,
        configurable: true
    });
    StartDialog.prototype.connect = function () {
        var _this = this;
        if (this.squint.connected) {
            console.error('StartDialog.connect() called, but already connected');
            return;
        }
        this.showConnectingMsg = true;
        this.viewListBox.clear();
        this.squint.connect(_Squint__WEBPACK_IMPORTED_MODULE_2__["Squint"].url, this.storage.get(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_7__["StorageItem"].UserName))
            .then(function () {
            _this.showConnectingMsg = false;
        })
            .catch(function (err) {
            console.log('Cannot connect to server, trying again in 1 sec: ' + err);
            setTimeout(function () {
                _this.connect();
            }, 1000);
        });
    };
    StartDialog.prototype.onSessionList = function (sessions) {
        this.viewListBox.clear();
        for (var i = 0; i < sessions.length; i++) {
            this.viewListBox.addItem(sessions[i].title, sessions[i].sessionId);
        }
    };
    return StartDialog;
}(_GUI_Dialog__WEBPACK_IMPORTED_MODULE_5__["Dialog"]));



/***/ }),

/***/ "./src/Apps/Squint/StorageWithEvents.ts":
/*!**********************************************!*\
  !*** ./src/Apps/Squint/StorageWithEvents.ts ***!
  \**********************************************/
/*! exports provided: StorageItem, StorageWithEvents */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StorageItem", function() { return StorageItem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StorageWithEvents", function() { return StorageWithEvents; });
/* harmony import */ var _EventManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventManager */ "./src/Apps/Squint/EventManager.ts");

var StorageItem;
(function (StorageItem) {
    StorageItem["UserName"] = "UserName";
    StorageItem["Sound"] = "Sound";
    StorageItem["Camera"] = "Camera";
})(StorageItem || (StorageItem = {}));
var StorageWithEvents = /** @class */ (function () {
    function StorageWithEvents() {
        this.eventManager = new _EventManager__WEBPACK_IMPORTED_MODULE_0__["EventManager"]();
    }
    StorageWithEvents.prototype.on = function (item, handler) {
        this.eventManager.on(item, handler);
    };
    StorageWithEvents.prototype.set = function (item, value) {
        var oldValue = localStorage.getItem(item);
        localStorage.setItem(item, value);
        if (value !== oldValue) {
            this.eventManager.emit(item, value, oldValue);
        }
    };
    StorageWithEvents.prototype.get = function (item) {
        return localStorage.getItem(item);
    };
    StorageWithEvents.prototype.has = function (item) {
        return this.get(item) !== null;
    };
    return StorageWithEvents;
}());



/***/ }),

/***/ "./src/Apps/Squint/Uploader.ts":
/*!*************************************!*\
  !*** ./src/Apps/Squint/Uploader.ts ***!
  \*************************************/
/*! exports provided: Uploader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Uploader", function() { return Uploader; });
/* harmony import */ var _SquintApp__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SquintApp */ "./src/Apps/Squint/SquintApp.ts");
/* harmony import */ var _Util_Stopwatch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Util/Stopwatch */ "./src/Util/Stopwatch.ts");
/* harmony import */ var _BandwidthTracker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./BandwidthTracker */ "./src/Apps/Squint/BandwidthTracker.ts");
/* harmony import */ var _SquintStrings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SquintStrings */ "./src/Apps/Squint/SquintStrings.ts");




var MAX_FPS = 10;
var Uploader = /** @class */ (function () {
    function Uploader(squint, takePicture) {
        this.running = true;
        this.paused = false;
        this.busy = false;
        this.timer = new _Util_Stopwatch__WEBPACK_IMPORTED_MODULE_1__["Stopwatch"]();
        this.bandwidthTracker = new _BandwidthTracker__WEBPACK_IMPORTED_MODULE_2__["BandwidthTracker"]();
        this.boostFps = false;
        this.hadToWait = false;
        this.squint = squint;
        this.takePicture = takePicture;
        this.upload();
    }
    Object.defineProperty(Uploader.prototype, "fps", {
        get: function () {
            return this.bandwidthTracker.fps;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Uploader.prototype, "megaBitsPerSec", {
        get: function () {
            return this.bandwidthTracker.megaBitsPerSec;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Uploader.prototype, "recommendedMsPerFrame", {
        get: function () {
            // if we haven't computed a bandwidth yet, just go with 10 FPS
            if (this.bandwidthTracker.numSamples === 0) {
                return 1000 / MAX_FPS;
            }
            // convert bytes to bits to get Mbps
            var lastSizeBits = 8 * this.bandwidthTracker.lastTransferBytes;
            var bitsPerMs = (1000 * 1000) * this.bandwidthTracker.megaBitsPerSec / 1000;
            var calcMs = lastSizeBits / bitsPerMs;
            if (this.boostFps) {
                calcMs = 0.5 * calcMs;
            }
            calcMs = Math.min(calcMs, 300);
            // the actual rate, or a max FPS of 10
            return Math.max(1000 / MAX_FPS, calcMs);
        },
        enumerable: false,
        configurable: true
    });
    Uploader.prototype.stop = function () {
        if (this.running) {
            this.running = false;
        }
    };
    Uploader.prototype.pause = function () {
        this.paused = true;
        this.bandwidthTracker.pause();
    };
    Uploader.prototype.resume = function () {
        this.paused = false;
        this.bandwidthTracker.resume();
        this.upload();
    };
    Uploader.prototype.upload = function (delay) {
        var _this = this;
        if (delay === void 0) { delay = 0; }
        if (!this.running) {
            // this can happen for a number of reasons, e.g. while we were waiting for the
            // next animation frame the socket was closed.
            //debug('upload() this.running===false, returning');
            return;
        }
        if (this.paused) {
            return;
        }
        if (this.busy) {
            Object(_SquintApp__WEBPACK_IMPORTED_MODULE_0__["debug"])('upload() called before previous call returned');
            //requestAnimationFrame(() => { this.upload(1000) });
            return;
        }
        if (delay > 0) {
            setTimeout(function () {
                _this.upload(0);
            }, delay);
            return;
        }
        if (this.squint.connected === false) {
            this.upload(1000);
            return;
        }
        if (this.timer.elapsedMs < this.recommendedMsPerFrame) {
            this.upload(this.recommendedMsPerFrame - this.timer.elapsedMs);
            return;
        }
        else {
            this.timer.restart();
        }
        // if this is the first time we get here and buffer is ready, boost.
        if (this.hadToWait === false && this.squint.bufferReady) {
            this.boostFps = true;
        }
        if (!this.squint.bufferReady) {
            this.hadToWait = true;
            requestAnimationFrame(function () { _this.upload(); });
            return;
        }
        this.hadToWait = false;
        this.busy = true;
        try {
            var nextDelay_1 = 0;
            this.takePicture()
                .then(function (blob) {
                if (blob === null) {
                    nextDelay_1 = 1000;
                    Object(_SquintApp__WEBPACK_IMPORTED_MODULE_0__["debug"])('takePicture generated a null Blob');
                }
                else {
                    if (_this.squint.connected) {
                        _this.squint.sendImage(blob);
                        _this.bandwidthTracker.tick(blob.size);
                    }
                }
            }).catch(function (err) {
                if (err === _SquintStrings__WEBPACK_IMPORTED_MODULE_3__["SquintStrings"].CAMERA_NOT_READY) {
                    // this happens when the camera is being initialized. Just try
                    // again in a second
                }
                else {
                    Object(_SquintApp__WEBPACK_IMPORTED_MODULE_0__["debug"])('Cannot generate image from video: ' + err);
                }
                nextDelay_1 = 1000;
            })
                .finally(function () {
                _this.busy = false;
                requestAnimationFrame(function () { _this.upload(nextDelay_1); });
            });
        }
        catch (err) {
            console.error('Unexpected exception in Uploader.upload(): ' + err + '\n' + JSON.stringify(err, null, ' '));
            this.busy = false;
            requestAnimationFrame(function () { _this.upload(1000); });
        }
    };
    return Uploader;
}());



/***/ }),

/***/ "./src/Apps/Squint/UserNameDialog.ts":
/*!*******************************************!*\
  !*** ./src/Apps/Squint/UserNameDialog.ts ***!
  \*******************************************/
/*! exports provided: UserNameDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserNameDialog", function() { return UserNameDialog; });
/* harmony import */ var _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../GUI/GUI */ "./src/GUI/GUI.ts");
/* harmony import */ var _GUI_Dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../GUI/Dialog */ "./src/GUI/Dialog.ts");
/* harmony import */ var _StorageWithEvents__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StorageWithEvents */ "./src/Apps/Squint/StorageWithEvents.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();



var UserNameDialog = /** @class */ (function (_super) {
    __extends(UserNameDialog, _super);
    function UserNameDialog(parent, storage) {
        var _this = 
        // UserNameBackgroundDiv and UserNameDialogDiv
        _super.call(this, parent, 'UserName') || this;
        var userNameGroupDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('div', 'UserNameGroupDiv', _this.dialogDiv);
        var userNameLabel = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('label', 'UserNameLabel', userNameGroupDiv);
        userNameLabel.htmlFor = 'UserNameTextInput';
        userNameLabel.innerText = 'Name:';
        var userNameTextInput = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('input', 'UserNameTextInput', userNameGroupDiv);
        userNameTextInput.type = 'text';
        userNameTextInput.placeholder = 'Your Name';
        userNameTextInput.value = storage.get(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_2__["StorageItem"].UserName);
        userNameTextInput.oninput = function () {
            okButton.disabled = (userNameTextInput.value.trim().length === 0);
        };
        userNameTextInput.onkeypress = function (event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                okButton.click();
            }
        };
        _this.onShow = function () {
            userNameTextInput.focus();
            userNameTextInput.select();
        };
        var okButton = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('button', 'OkButton', userNameGroupDiv);
        okButton.className = 'ButtonClass';
        okButton.innerText = 'OK';
        okButton.onclick = function () {
            _this.visible = false;
            storage.set(_StorageWithEvents__WEBPACK_IMPORTED_MODULE_2__["StorageItem"].UserName, userNameTextInput.value.trim());
        };
        _this.visible = true;
        return _this;
    }
    return UserNameDialog;
}(_GUI_Dialog__WEBPACK_IMPORTED_MODULE_1__["Dialog"]));



/***/ }),

/***/ "./src/Apps/Squint/Version.ts":
/*!************************************!*\
  !*** ./src/Apps/Squint/Version.ts ***!
  \************************************/
/*! exports provided: Version */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Version", function() { return Version; });
var Version = /** @class */ (function () {
    function Version() {
    }
    Version.toString = function () {
        return this.Major + '.' + this.Minor + '.' + this.Build;
    };
    Version.Major = 0;
    Version.Minor = 0;
    Version.Build = '112b';
    return Version;
}());



/***/ }),

/***/ "./src/Apps/Squint/WebSocketFactory.ts":
/*!*********************************************!*\
  !*** ./src/Apps/Squint/WebSocketFactory.ts ***!
  \*********************************************/
/*! exports provided: WebSocketReadyState, WebSocketFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebSocketReadyState", function() { return WebSocketReadyState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebSocketFactory", function() { return WebSocketFactory; });
// WebSocket isn't defined for testing. Can we define a shim?
var WebSocketReadyState;
(function (WebSocketReadyState) {
    WebSocketReadyState[WebSocketReadyState["CONNECTING"] = 0] = "CONNECTING";
    WebSocketReadyState[WebSocketReadyState["OPEN"] = 1] = "OPEN";
    WebSocketReadyState[WebSocketReadyState["CLOSING"] = 2] = "CLOSING";
    WebSocketReadyState[WebSocketReadyState["CLOSED"] = 3] = "CLOSED";
})(WebSocketReadyState || (WebSocketReadyState = {}));
var WebSocketFactory = /** @class */ (function () {
    function WebSocketFactory() {
    }
    return WebSocketFactory;
}());



/***/ }),

/***/ "./src/Apps/Squint/WelcomeDialog.ts":
/*!******************************************!*\
  !*** ./src/Apps/Squint/WelcomeDialog.ts ***!
  \******************************************/
/*! exports provided: WelcomeDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WelcomeDialog", function() { return WelcomeDialog; });
/* harmony import */ var _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../GUI/GUI */ "./src/GUI/GUI.ts");
/* harmony import */ var _GUI_Dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../GUI/Dialog */ "./src/GUI/Dialog.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();



var WelcomeDialog = /** @class */ (function (_super) {
    __extends(WelcomeDialog, _super);
    function WelcomeDialog(parent, onOk) {
        var _this = _super.call(this, parent, 'Welcome') || this;
        var titleDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('div', 'TitleDiv', _this.dialogDiv);
        titleDiv.className = 'DialogTitleClass';
        titleDiv.innerText = 'Welcome to Squint!';
        //const bodyDiv = GUI.create('div', 'BodyDiv', this.dialogDiv);
        var img = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('img', 'SquintImg', _this.dialogDiv);
        img.src = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_2__["baseUrl"])() + 'img/squint.jpg';
        var userNameGroupDiv = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('div', 'UserNameGroupDiv', _this.dialogDiv);
        var userNameTextInput = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('input', 'UserNameTextInput', userNameGroupDiv);
        userNameTextInput.type = 'text';
        userNameTextInput.placeholder = 'Your Name';
        userNameTextInput.oninput = function () {
            okButton.disabled = (userNameTextInput.value.trim().length === 0);
        };
        userNameTextInput.onkeypress = function (event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                okButton.click();
            }
        };
        _this.onShow = function () {
            userNameTextInput.select();
            userNameTextInput.focus();
        };
        var okButton = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('button', 'OkButton', userNameGroupDiv);
        okButton.innerText = 'Start Squinting...';
        okButton.onclick = function () {
            var userName = userNameTextInput.value.trim();
            if (userName.length > 0) {
                _this.visible = false;
                onOk(userNameTextInput.value.trim());
            }
        };
        okButton.disabled = true;
        okButton.className = 'ButtonClass';
        return _this;
    }
    return WelcomeDialog;
}(_GUI_Dialog__WEBPACK_IMPORTED_MODULE_1__["Dialog"]));



/***/ }),

/***/ "./src/Apps/Squint/ZoomPanel.ts":
/*!**************************************!*\
  !*** ./src/Apps/Squint/ZoomPanel.ts ***!
  \**************************************/
/*! exports provided: ZoomPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ZoomPanel", function() { return ZoomPanel; });
/* harmony import */ var _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../GUI/GUI */ "./src/GUI/GUI.ts");
/* harmony import */ var _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../GUI/PointerEventHandler */ "./src/GUI/PointerEventHandler.ts");
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Util3D/Vec */ "./src/Util3D/Vec.ts");



var ZoomPanel = /** @class */ (function () {
    function ZoomPanel(parent) {
        var _this = this;
        this.onChange = null;
        this._zoom = 1;
        this.minZoom = 0.5;
        this.maxZoom = 5;
        this.canvas = _GUI_GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('canvas', 'ZoomCanvas', parent);
        var handler = new _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_1__["PointerEventHandler"](this.canvas);
        var dragging = false;
        var offset = -1;
        handler.onDown = function (pos) {
            dragging = true;
            offset = pos.y - _this.zoomToY(_this._zoom);
        };
        handler.onMove = function (pos) {
            var center = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec2"]([_this.canvas.width / 2, _this.zoomToY(_this._zoom)]);
            var radius = _this.canvas.width / 2;
            if (pos.distance(center) < radius) {
                _this.canvas.style.cursor = 'ns-resize';
            }
            else {
                _this.canvas.style.cursor = 'default';
            }
        };
        handler.onDrag = function (pos, delta) {
            if (dragging) {
                var y = pos.y - offset;
                _this.zoom = _this.yToZoom(y);
            }
        };
        handler.onUp = function (pos) {
            dragging = false;
            offset = 0;
        };
        window.addEventListener('resize', function () {
            _this.draw();
        });
        this.draw();
    }
    Object.defineProperty(ZoomPanel.prototype, "zoom", {
        get: function () {
            return this._zoom;
        },
        set: function (value) {
            if (this._zoom !== value) {
                this._zoom = value;
                this.draw();
                if (this.onChange) {
                    this.onChange();
                }
            }
        },
        enumerable: false,
        configurable: true
    });
    ZoomPanel.prototype.zoomToY = function (zoom) {
        zoom = Math.min(this.maxZoom, Math.max(this.minZoom, this.zoom));
        var height = this.canvas.height;
        var radius = this.canvas.width / 2;
        var zoomRange = this.maxZoom - this.minZoom;
        return radius + ((this.maxZoom - zoom) / (zoomRange)) * (height - 2 * radius);
    };
    ZoomPanel.prototype.yToZoom = function (y) {
        var height = this.canvas.height;
        var radius = this.canvas.width / 2;
        var zoomRange = this.maxZoom - this.minZoom;
        var zoom = this.maxZoom - (y - radius) / (height - 2 * radius) * (zoomRange);
        return Math.min(this.maxZoom, Math.max(this.minZoom, zoom));
    };
    ZoomPanel.prototype.draw = function () {
        var _a;
        this.canvas.width = this.canvas.clientWidth;
        this.canvas.height = this.canvas.clientHeight;
        var width = this.canvas.width;
        var style = getComputedStyle(this.canvas);
        // clear everything
        var ctx = this.canvas.getContext('2d');
        ctx.fillStyle = (_a = style.backgroundColor) !== null && _a !== void 0 ? _a : 'lightgray';
        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
        // draw magnifying glass
        var x = width / 2;
        var y = this.zoomToY(this._zoom);
        var radius = width / 2;
        ctx.beginPath();
        ctx.strokeStyle = 'black';
        ctx.fillStyle = 'white';
        ctx.moveTo(x, y);
        ctx.lineTo(x + 0.45 * radius, y + 0.45 * radius);
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(x - 0.2 * radius, y - 0.2 * radius, 0.4 * radius, 0, 2 * Math.PI);
        ctx.stroke();
        ctx.fill();
    };
    return ZoomPanel;
}());



/***/ }),

/***/ "./src/Apps/Viewer/Camera.ts":
/*!***********************************!*\
  !*** ./src/Apps/Viewer/Camera.ts ***!
  \***********************************/
/*! exports provided: ObjSizeProvider, FixedSizeProvider, Camera */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjSizeProvider", function() { return ObjSizeProvider; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FixedSizeProvider", function() { return FixedSizeProvider; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Camera", function() { return Camera; });
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Util3D/Vec */ "./src/Util3D/Vec.ts");
/* harmony import */ var _Renderer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Renderer */ "./src/Apps/Viewer/Renderer.ts");
/* harmony import */ var _Util3D_Mat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Util3D/Mat */ "./src/Util3D/Mat.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _gl_glSpace__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../gl/glSpace */ "./src/gl/glSpace.ts");





// When viewing an object, view this much more than the object
var BUFFER_FACTOR = 1.1;
var ObjSizeProvider = /** @class */ (function () {
    function ObjSizeProvider(obj) {
        this.obj = obj;
    }
    Object.defineProperty(ObjSizeProvider.prototype, "maxWidth", {
        get: function () {
            //let xBox = this.obj.getBoundingPts();
            var xBox = this.obj.getBoundingBox();
            return BUFFER_FACTOR * Math.sqrt(xBox.width * xBox.width + xBox.depth * xBox.depth);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjSizeProvider.prototype, "maxHeight", {
        get: function () {
            var xBox = this.obj.getBoundingBox();
            return BUFFER_FACTOR * Math.sqrt(xBox.height * xBox.height + xBox.depth * xBox.depth);
        },
        enumerable: false,
        configurable: true
    });
    return ObjSizeProvider;
}());

var FixedSizeProvider = /** @class */ (function () {
    function FixedSizeProvider(maxWidth, maxHeight) {
        this.maxWidth = maxWidth;
        this.maxHeight = maxHeight;
    }
    return FixedSizeProvider;
}());

var Camera = /** @class */ (function () {
    function Camera(settings) {
        var _a, _b, _c, _d, _e, _f;
        this.eye = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"](_Renderer__WEBPACK_IMPORTED_MODULE_1__["INITIAL_EYE"]);
        this.lookAt = _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"].origin;
        this.zoomFactor = 1;
        this.useOrthographic = false;
        if (settings) {
            this.sizeProvider = (_a = settings.sizeProvider) !== null && _a !== void 0 ? _a : this.sizeProvider;
            this.eye = (_b = settings.eye) !== null && _b !== void 0 ? _b : this.eye;
            this.lookAt = (_c = settings.lookAt) !== null && _c !== void 0 ? _c : this.lookAt;
            this.zoomFactor = (_d = settings.zoomFactor) !== null && _d !== void 0 ? _d : this.zoomFactor;
            this.useOrthographic = (_e = settings.useOrthographic) !== null && _e !== void 0 ? _e : this.useOrthographic;
            this.fov = (_f = settings.fov) !== null && _f !== void 0 ? _f : this.fov;
        }
    }
    Camera.prototype.getProjection = function (gl) {
        var projection;
        var space = this.getViewSpace(gl);
        if (this.useOrthographic) {
            projection = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_2__["Mat4"].makeOrtho(space.min.x, space.max.x, space.min.y, space.max.y, space.min.z, space.max.z);
        }
        else {
            var eye = this.eye;
            var up = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([0, 1, 0]);
            var mat = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_2__["Mat4"].makeLookAt(eye, this.lookAt, up);
            this.fov = 2 * Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_3__["toDeg"])(Math.atan2(space.height / 2, eye.z));
            var near = 0.1;
            var far = 20;
            var ar = space.width / space.height;
            projection = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_2__["Mat4"].makePerspective(this.fov, ar, near, far).multM(mat);
        }
        return projection;
    };
    //
    // The functions below change our view of the model
    //
    Camera.prototype.zoom = function (zoom) {
        this.zoomFactor *= zoom;
    };
    Camera.prototype.translate = function (delta) {
        this.eye.x -= delta.x / this.zoomFactor;
        this.eye.y -= delta.y / this.zoomFactor;
        this.lookAt.x -= delta.x / this.zoomFactor;
        this.lookAt.y -= delta.y / this.zoomFactor;
    };
    /**
     * Clipspace is defined as a range of [-1,1] in the smaller of the width and height.
     * The other dimensions is scaled to match the aspect ratio of the canvas
     */
    Camera.prototype.getClipSpace = function (gl) {
        var ar = gl.canvas.width / gl.canvas.height;
        if (ar > 1) {
            return new _gl_glSpace__WEBPACK_IMPORTED_MODULE_4__["glSpace"](new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([-ar, -1, 100]), new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([ar, 1, -100]));
        }
        else {
            return new _gl_glSpace__WEBPACK_IMPORTED_MODULE_4__["glSpace"](new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([-1, -(1 / ar), 100]), new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([1, (1 / ar), -100]));
        }
    };
    /**
     * View space is the world coordinate space of what can be currently viewed.
     */
    Camera.prototype.getViewSpace = function (gl) {
        var winAR = gl.canvas.width / gl.canvas.height;
        var objMaxWidth = this.sizeProvider.maxWidth;
        var objMaxHeight = this.sizeProvider.maxHeight;
        var objAR = objMaxWidth / objMaxHeight;
        var desiredWidth;
        var desiredHeight;
        if (objAR < winAR) {
            // make the object height fit
            desiredHeight = objMaxHeight;
            desiredWidth = objMaxHeight * winAR;
        }
        else {
            // make the object width fit
            desiredHeight = objMaxWidth / winAR;
            desiredWidth = objMaxWidth;
        }
        desiredHeight /= this.zoomFactor;
        desiredWidth /= this.zoomFactor;
        var clipSpace = this.getClipSpace(gl);
        var min = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([
            -desiredWidth / 2 - this.lookAt.x,
            -desiredHeight / 2 - this.lookAt.y,
            clipSpace.near + this.lookAt.z,
        ]);
        var max = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([
            desiredWidth / 2 - this.lookAt.x,
            desiredHeight / 2 - this.lookAt.y,
            clipSpace.far + this.lookAt.z,
        ]);
        return new _gl_glSpace__WEBPACK_IMPORTED_MODULE_4__["glSpace"](min, max);
    };
    return Camera;
}());



/***/ }),

/***/ "./src/Apps/Viewer/ModelLoader.ts":
/*!****************************************!*\
  !*** ./src/Apps/Viewer/ModelLoader.ts ***!
  \****************************************/
/*! exports provided: ModelLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ModelLoader", function() { return ModelLoader; });
/* harmony import */ var worker_loader_name_LoaderWorker_worker_js_LoaderWorker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! worker-loader?name=LoaderWorker.worker.js!./LoaderWorker */ "./node_modules/worker-loader/dist/cjs.js?name=LoaderWorker.worker.js!./src/Apps/Viewer/LoaderWorker.ts");
/* harmony import */ var worker_loader_name_LoaderWorker_worker_js_LoaderWorker__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(worker_loader_name_LoaderWorker_worker_js_LoaderWorker__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _Util3D_TriangleObj__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Util3D/TriangleObj */ "./src/Util3D/TriangleObj.ts");
// specify loader and options here. This value must match the
// contents of worker.d.ts



/**
 * Class for doing the work of loading a file into a glObject
 */
var ModelLoader = /** @class */ (function () {
    function ModelLoader() {
        this._loading = false;
    }
    Object.defineProperty(ModelLoader.prototype, "loading", {
        /**
         * Returns true if a file is currently being loaded
         */
        get: function () {
            return this._loading;
        },
        enumerable: false,
        configurable: true
    });
    /**
     * Loads a file
     *
     * @param file The file url to load
     * @param updateStatus Callback that is notified of progress
     * @returns TriangleObj promise
     */
    ModelLoader.prototype.loadModelFile = function (file, updateStatus) {
        var _this = this;
        this._loading = true;
        return new Promise(function (resolve, reject) {
            // if a previous worker exists, close it
            if (_this.worker) {
                _this.worker.terminate();
                _this.worker = undefined;
            }
            _this.worker = new worker_loader_name_LoaderWorker_worker_js_LoaderWorker__WEBPACK_IMPORTED_MODULE_0___default.a();
            var tStart = Date.now();
            _this.worker.onmessage = function (_a) {
                var data = _a.data;
                if (typeof data === 'string') {
                    // avoid flashing messages for things that happen very quickly.
                    if (Date.now() - tStart > 500) {
                        updateStatus(data);
                    }
                }
                else {
                    _this._loading = false;
                    var tObj = _Util3D_TriangleObj__WEBPACK_IMPORTED_MODULE_2__["TriangleObj"].fromData(data);
                    updateStatus('');
                    _this.worker.terminate();
                    _this.worker = undefined;
                    resolve(tObj);
                }
            };
            _this.worker.postMessage(file);
        });
    };
    ModelLoader.prototype.orient = function (model) {
        // orient each file so that it is facing forward
        var name = model.name.split('.')[0].toLowerCase();
        switch (name) {
            case 'wolf':
                model.normalize.rotY(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_1__["toRad"])(-140));
                model.normalize.rotX(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_1__["toRad"])(5));
                model.normalize.rotY(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_1__["toRad"])(180));
                break;
            case 'sheephead':
                model.normalize.rotY(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_1__["toRad"])(20));
                break;
            default:
                break;
        }
    };
    return ModelLoader;
}());



/***/ }),

/***/ "./src/Apps/Viewer/ModelsMenu.ts":
/*!***************************************!*\
  !*** ./src/Apps/Viewer/ModelsMenu.ts ***!
  \***************************************/
/*! exports provided: createModelsMenu */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createModelsMenu", function() { return createModelsMenu; });
var menuItems = [
    {
        label: 'Objects', id: 'ObjectsSubMenu', menuItems: [
            { label: 'Sphere', file: 'Sphere' },
            { label: 'Football', file: 'Football.blob' },
            { label: 'Pill', file: 'Pill.blob' },
            { label: 'Pill Bottle', file: 'PillBottle.blob' },
            { label: 'Soda Can', file: 'SodaCan.blob' },
            { label: 'Soccer Ball', file: 'SoccerBall.blob' },
            { label: 'Spoon', file: 'Spoon.blob' },
            { label: 'Teapot', file: 'Teapot.blob' },
            { label: 'Torus (Donut)', file: 'Torus.blob' },
            { label: 'Torus Knot', file: 'TorusKnot.blob' },
            { label: 'Vase', file: 'Vase.blob' },
            { label: 'Vitamin', file: 'Vitamin.blob' },
            { label: 'Wine Bottle', file: 'WineBottle.blob' },
        ]
    },
    {
        label: 'Sculptures', id: 'SculpturesSubMenu', menuItems: [
            { label: 'Belvedere Torso', file: 'BelvedereTorso.blob' },
            { label: 'David', file: 'David.blob' },
            { label: 'Head of David', file: 'HeadOfDavid.blob' },
            { label: 'Lacoon and His Sons', file: 'LaocoonAndHisSons.blob' },
            { label: 'Nefertiti', file: 'Nefertiti.blob' },
            { label: 'Thinker', file: 'Thinker.blob' },
            { label: 'Venus de Milo', file: 'VenusDeMilo.blob' },
            { label: 'Venus of Willendorf', file: 'VenusOfWillendorf.blob' },
            { label: 'Winged Victory of Samothrace', file: 'WingedVictory.blob' },
            { label: 'Winged Victory of Samothrace w/Base', file: 'WingedVictoryWithBase.blob' },
        ]
    },
    {
        label: 'Anatomy', id: 'AnatomySubMenu', menuItems: [
            { label: 'Skull 1', file: 'Skull1.blob' },
            { label: 'Skull 2', file: 'Skull2.blob' },
            { label: 'Skull 3', file: 'Skull3.blob' },
            { label: 'Skull 4', file: 'Skull4.blob' },
            { label: 'Pelvis', file: 'Pelvis.blob' },
            { label: 'Clavicle', file: 'Clavicle.blob' },
            { label: 'Scapula', file: 'Scapula.blob' },
            { label: 'Humerus', file: 'Humerus.blob' },
            { label: 'Head Ecorche', file: 'HeadEcorche.blob' },
            { label: 'Head Ecorche 2', file: 'HeadEcorche2.blob' },
            { label: 'Head Ecorche 3', file: 'HeadEcorche3.blob' },
            { label: 'Head Ecorche 4', file: 'HeadEcorche4.blob' },
        ]
    },
    {
        label: 'Poses', id: 'PosesSubMenu', menuItems: [
            { label: 'Pose 1', file: 'Pose_01.blob' },
            { label: 'Pose 2', file: 'Pose_02.blob' },
            { label: 'Pose 3', file: 'Pose_03.blob' },
            { label: 'Pose 4', file: 'Pose_04.blob' },
            { label: 'Pose 5', file: 'Pose_05.blob' },
            { label: 'Pose 6', file: 'Pose_06.blob' },
            { label: 'Pose 7', file: 'Pose_07.blob' },
            { label: 'Pose 8', file: 'Pose_08.blob' },
            { label: 'Pose 9', file: 'Pose_09.blob' },
            { label: 'Pose 10', file: 'Pose_010.blob' },
            { label: 'Pose 11', file: 'Pose_011.blob' },
            { label: 'Pose 12', file: 'Pose_012.blob' },
            { label: 'Pose 13', file: 'Pose_013.blob' },
            { label: 'Pose 14', file: 'Pose_014.blob' },
            { label: 'Pose 15', file: 'Pose_015.blob' },
            { label: 'Pose 16', file: 'Pose_016.blob' },
            { label: 'Female Pose', file: 'Pose1.blob' },
        ]
    },
    {
        label: 'Heads', id: 'HeadsSubMenu', menuItems: [
            { label: 'Head 1', file: 'Head1.blob' },
            { label: 'Head 2', file: 'Head2.blob' },
            { label: 'Head 3', file: 'Head3.blob' },
            { label: 'Head 4', file: 'Head4.blob' },
            { label: 'Head 5', file: 'Head5.blob' },
            { label: 'Head 6', file: 'Head6.blob' },
            { label: 'Head 7', file: 'Head7.blob' },
            { label: 'Head 8', file: 'Head8.blob' },
            { label: 'Head 9', file: 'Head9.blob' },
            { label: 'Head 10', file: 'Head10.blob' },
            { label: 'Head 11', file: 'Head.blob' },
            { label: 'Female Head', file: 'FemaleHead.blob' },
            { label: 'Arnold', file: 'Arnold.blob' },
        ]
    },
    {
        label: 'Expressions', id: 'ExpressionsSubMenu', menuItems: [
            {
                label: 'Neutral', id: 'NeutralSubMenu', menuItems: [
                    { label: 'Neutral', file: 'Male_02_01_Neutral.blob' },
                    { label: 'Neutral, Eyes Closed', file: 'Male_02_02_Neutral_Eyes_Closed.blob' },
                    { label: 'Neutral, Lips Parted', file: 'Male_02_038_Neutral_Lips_Parted.blob' },
                ]
            },
            {
                label: 'Eyes', id: 'EyesSubMenu', menuItems: [
                    { label: 'Look Up', file: 'Male_02_05_Look_Up.blob' },
                    { label: 'Look Down', file: 'Male_02_06_Look_Down.blob' },
                    { label: 'Look Left', file: 'Male_02_07_Look_Left.blob' },
                    { label: 'Look Right', file: 'Male_02_08_Look_Right.blob' },
                    { label: 'Brows Up', file: 'Male_02_016_Brows_Up.blob' },
                    { label: 'Brows Down', file: 'Male_02_017_Brows_Down.blob' },
                ]
            },
            {
                label: 'Jaw', id: 'JawSubMenu', menuItems: [
                    { label: 'Wide Open', file: 'Male_02_09_Jaw_Wide_Open.blob' },
                    { label: 'Side Right', file: 'Male_02_018_Jaw_Side_Right.blob' },
                    { label: 'Side Left', file: 'Male_02_019_Jaw_Side_Left.blob' },
                    { label: 'Thrust', file: 'Male_02_020_Jaw_Thrust.blob' },
                    { label: 'Clench', file: 'Male_02_021_Jaw_Clench.blob' },
                ]
            },
            {
                label: 'Cheeks', id: 'CheeksSubMenu', menuItems: [
                    { label: 'Puff', file: 'Male_02_022_Cheek_Puff.blob' },
                    { label: 'Suck', file: 'Male_02_023_Cheek_Suck.blob' },
                    { label: 'Dimple', file: 'Male_02_027_Dimple_Cheeks.blob' },
                ]
            },
            {
                label: 'Lips', id: 'LipsSubMenu', menuItems: [
                    { label: 'Tighten', file: 'Male_02_010_Tighten Lips.blob' },
                    { label: 'Pucker', file: 'Male_02_012_Pucker.blob' },
                    { label: 'Flare', file: 'Male_02_026_Flare_Lips.blob' },
                    { label: 'Sounds: "CH"', file: 'Male_02_024_Phoneme_CH.blob' },
                    { label: 'Sounds: "FV"', file: 'Male_02_025_Phoneme_FV.blob' },
                ]
            },
            {
                label: 'Emotions', id: 'EmotionsSubMenu', menuItems: [
                    { label: 'Smile, Mouth Closed', file: 'Male_02_03_Smile_Mouth_Closed.blob' },
                    { label: 'Smile, Mouth Open', file: 'Male_02_04_Smile_Mouth_Open.blob' },
                    { label: 'Snarl', file: 'Male_02_013_Snarl.blob' },
                    { label: 'Frown', file: 'Male_02_014_Frown.blob' },
                    { label: 'Happy', file: 'Male_02_028_Happy.blob' },
                    { label: 'Surprise', file: 'Male_02_029_Surprise.blob' },
                    { label: 'Sad', file: 'Male_02_030_Sad.blob' },
                    { label: 'Angry', file: 'Male_02_031_Angry.blob' },
                    { label: 'Pain', file: 'Male_02_032_Pain.blob' },
                    { label: 'Fear', file: 'Male_02_033_Fear.blob' },
                    { label: 'Disgust', file: 'Male_02_034_Disgust.blob' },
                    { label: 'Shock', file: 'Male_02_035_Shock.blob' },
                    { label: 'Rage', file: 'Male_02_036_Rage.blob' },
                ]
            },
            {
                label: 'Other', id: 'OtherSubMenu', menuItems: [
                    { label: 'Face Compression', file: 'Male_02_011_Face_Compression.blob' },
                    { label: 'Neck Tighten', file: 'Male_02_015_Neck_Tighten.blob' },
                    { label: 'Tongue', file: 'Male_02_037_Tongue.blob' },
                ]
            },
        ]
    },
];
function addItems(menu, items, loadModel) {
    items.forEach(function (item) {
        if ('menuItems' in item) {
            var subMenu = menu.addSubMenu(item.label, item.id);
            addItems(subMenu, item.menuItems, loadModel);
        }
        else {
            menu.addItem(item.label, function () { loadModel(item.file); });
        }
    });
}
function createModelsMenu(menubar, loadModel) {
    var menu = menubar.addSubMenu('Models', 'Models');
    addItems(menu, menuItems, loadModel);
}


/***/ }),

/***/ "./src/Apps/Viewer/PerspectiveCtrl.ts":
/*!********************************************!*\
  !*** ./src/Apps/Viewer/PerspectiveCtrl.ts ***!
  \********************************************/
/*! exports provided: PerspectiveCtrl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PerspectiveCtrl", function() { return PerspectiveCtrl; });
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Util3D/Vec */ "./src/Util3D/Vec.ts");
/* harmony import */ var _GUI_OverlayCanvas__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../GUI/OverlayCanvas */ "./src/GUI/OverlayCanvas.ts");
/* harmony import */ var _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../GUI/PointerEventHandler */ "./src/GUI/PointerEventHandler.ts");
/* harmony import */ var _Renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Renderer */ "./src/Apps/Viewer/Renderer.ts");
/* harmony import */ var _Camera__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Camera */ "./src/Apps/Viewer/Camera.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _gl_glSpace__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../gl/glSpace */ "./src/gl/glSpace.ts");







var PerspectiveCtrl = /** @class */ (function () {
    function PerspectiveCtrl(parent, provider) {
        var _this = this;
        this.provider = provider;
        var canvas = document.createElement('canvas');
        canvas.id = 'PerspectiveCanvas';
        parent.appendChild(canvas);
        // don't try to make the canvas transparent to the underlying html. This
        // seems to limit the alpha values we can use in our scene.
        var context = canvas.getContext('webgl', { alpha: false });
        if (!context) {
            // TODO display a message about not being able to create a WebGL context
            console.log("Unable to get WebGL context");
        }
        this.gl = context;
        this.renderer = new _Renderer__WEBPACK_IMPORTED_MODULE_3__["Renderer"](context);
        this.renderer.showMiniView = false;
        this.renderer.showBall = false;
        this.renderer.options.camera = new _Camera__WEBPACK_IMPORTED_MODULE_4__["Camera"]({
            sizeProvider: new _Camera__WEBPACK_IMPORTED_MODULE_4__["FixedSizeProvider"](2, 2)
        });
        this.renderer.options.camera.useOrthographic = true;
        this.renderer.showFloor = false;
        this.overlay = new _GUI_OverlayCanvas__WEBPACK_IMPORTED_MODULE_1__["OverlayCanvas"](parent, 'PerspectiveOverlayCanvas');
        this.handler = new _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_2__["PointerEventHandler"](canvas);
        this.handler.onDown = function (pos) { return _this.onDown(pos); };
        this.handler.onDrag = function (pos, delta) { return _this.onDrag(pos, delta); };
    }
    PerspectiveCtrl.prototype.dispose = function () {
        this.renderer.dispose();
    };
    PerspectiveCtrl.prototype.setEyePos = function (pos) {
        // convert to model space
        this.provider.eye = this.fromScreen(pos);
        if (this.onChange) {
            this.onChange();
        }
    };
    PerspectiveCtrl.prototype.onDown = function (pos) {
        this.setEyePos(pos);
    };
    PerspectiveCtrl.prototype.onDrag = function (pos, delta) {
        this.setEyePos(pos);
    };
    PerspectiveCtrl.prototype.setSize = function (width, height) {
        var gl = this.gl;
        gl.canvas.width = width;
        gl.canvas.height = height;
    };
    PerspectiveCtrl.prototype.render = function (modelMat) {
        // set the model matrix of the object to that of the primary
        // obj with an additional 90 deg rotation
        this.renderer.obj.model = modelMat.clone().rotY(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["toRad"])(90));
        // shift the view so that the object is on the far right. Far enough that there is
        // a square space on the end that contains the origin (center of object we're viewing)
        var viewSpace = this.renderer.options.camera.getViewSpace(this.gl);
        this.renderer.options.camera.lookAt = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([-viewSpace.width / 2 + viewSpace.height / 2, 0, 0]);
        this.renderer.render();
        this.drawEye();
    };
    PerspectiveCtrl.prototype.fromScreen = function (pt) {
        var canvas = this.gl.canvas;
        var ar = canvas.width / canvas.height;
        // the space we're viewing is a 2x2 box on the right
        var width = 2 * ar; // space.width * (2.0 / space.height);
        var height = 2.0;
        var space = new _gl_glSpace__WEBPACK_IMPORTED_MODULE_6__["glSpace"](new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([-width / 2, -height / 2, -100]), new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([width / 2, height / 2, 100]));
        var boxSize = space.height;
        var z = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["clamp"])((1 - pt.x / canvas.width) * space.width - boxSize / 2, boxSize / 2, 100);
        var y = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["clamp"])(space.bottom + (1 - pt.y / canvas.height) * space.height, -1, 1);
        return new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([this.provider.eye.x, y, z]);
    };
    PerspectiveCtrl.prototype.toScreen = function (pt) {
        var canvas = this.gl.canvas;
        var ar = canvas.width / canvas.height;
        // the space we're viewing is a 2x2 box on the right
        var width = 2 * ar; // space.width * (2.0 / space.height);
        var height = 2.0;
        var space = new _gl_glSpace__WEBPACK_IMPORTED_MODULE_6__["glSpace"](new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([-width / 2, -height / 2, -100]), new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([width / 2, height / 2, 100]));
        var boxSize = space.height;
        var x = (1 - (pt.z + boxSize / 2) / space.width) * canvas.width;
        var y = (1 - (pt.y - space.bottom) / space.height) * canvas.height;
        return new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec2"]([x, y]);
    };
    PerspectiveCtrl.prototype.drawLine = function (ctx, pt1, pt2) {
        var p1 = this.toScreen(pt1);
        var p2 = this.toScreen(pt2);
        ctx.beginPath();
        ctx.moveTo(p1.x, p1.y);
        ctx.lineTo(p2.x, p2.y);
        ctx.stroke();
    };
    PerspectiveCtrl.prototype.drawEye = function () {
        var gl = this.gl;
        var ctx = this.overlay.context;
        ctx.canvas.width = gl.canvas.width;
        ctx.canvas.height = gl.canvas.height;
        ctx.lineWidth = 2;
        if (_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["isMobile"]) {
            ctx.lineWidth = 2 * ctx.lineWidth;
        }
        ctx.clearRect(0, 0, this.gl.canvas.width, this.gl.canvas.height);
        var space = this.renderer.options.camera.getViewSpace(this.gl);
        // draw the front 'view' line
        ctx.strokeStyle = 'rgba(255,255,255,0.2)';
        this.drawLine(ctx, new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([0, space.top, space.height / 2]), new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([0, space.bottom, space.height / 2]));
        // draw line from the eye to the look at center
        this.drawLine(ctx, this.provider.eye, this.provider.lookAt);
        var p1 = this.toScreen(this.provider.eye);
        var p2 = this.toScreen(this.provider.lookAt);
        var angle = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["toDeg"])(Math.atan2(p2.y - p1.y, p2.x - p1.x));
        ctx.beginPath();
        ctx.moveTo(p1.x, p1.y);
        p2.x = p1.x + ctx.canvas.width * Math.cos(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["toRad"])(angle + this.provider.fov / 2));
        p2.y = p1.y + ctx.canvas.width * Math.sin(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["toRad"])(angle + this.provider.fov / 2));
        ctx.lineTo(p2.x, p2.y);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(p1.x, p1.y);
        p2.x = p1.x + ctx.canvas.width * Math.cos(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["toRad"])(angle - this.provider.fov / 2));
        p2.y = p1.y + ctx.canvas.width * Math.sin(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["toRad"])(angle - this.provider.fov / 2));
        ctx.lineTo(p2.x, p2.y);
        ctx.stroke();
        var center = this.toScreen(this.provider.eye);
        ctx.strokeStyle = 'white';
        ctx.fillStyle = 'rgba(255,255,255,0.6)';
        // draw the actual eye
        var openAngle = 70;
        var radius = 0.12 * ctx.canvas.height;
        var startAngle = angle + openAngle / 2;
        var endAngle = startAngle + (360 - openAngle);
        ctx.beginPath();
        ctx.moveTo(center.x, center.y);
        ctx.arc(center.x, center.y, radius, Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["toRad"])(startAngle), Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["toRad"])(endAngle));
        ctx.closePath();
        ctx.fill();
        ctx.stroke();
        ctx.strokeStyle = 'transparent';
        ctx.fillStyle = 'rgba(255,255,255,0.3)';
        ctx.beginPath();
        ctx.moveTo(center.x, center.y);
        ctx.arc(center.x, center.y, radius, Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["toRad"])(startAngle), Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["toRad"])(endAngle), true);
        ctx.closePath();
        ctx.fill();
        ctx.stroke();
        // draw the look at point (center of object)
        center = this.toScreen(this.provider.lookAt);
        radius = 2;
        ctx.fillStyle = 'white';
        ctx.beginPath();
        ctx.arc(center.x, center.y, radius, 0, Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["toRad"])(360));
        ctx.fill();
    };
    PerspectiveCtrl.prototype.setModel = function (tObj) {
        this.renderer.setModel(tObj);
    };
    return PerspectiveCtrl;
}());



/***/ }),

/***/ "./src/Apps/Viewer/PerspectivePanel.ts":
/*!*********************************************!*\
  !*** ./src/Apps/Viewer/PerspectivePanel.ts ***!
  \*********************************************/
/*! exports provided: PerspectivePanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PerspectivePanel", function() { return PerspectivePanel; });
/* harmony import */ var _GUI_Panel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../GUI/Panel */ "./src/GUI/Panel.ts");
/* harmony import */ var _PerspectiveCtrl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PerspectiveCtrl */ "./src/Apps/Viewer/PerspectiveCtrl.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


var PerspectivePanel = /** @class */ (function (_super) {
    __extends(PerspectivePanel, _super);
    function PerspectivePanel(parent, id, camera) {
        var _this = _super.call(this, parent, id) || this;
        _this.resizeListener = function () { return _this.onResize(); };
        _this.onChange = null;
        _this.perspectiveCtrl = new _PerspectiveCtrl__WEBPACK_IMPORTED_MODULE_1__["PerspectiveCtrl"](_this.div, camera);
        _this.perspectiveCtrl.onChange = function () {
            if (_this.onChange) {
                _this.onChange();
            }
        };
        window.addEventListener('resize', _this.resizeListener);
        return _this;
    }
    PerspectivePanel.prototype.dispose = function () {
        window.removeEventListener('resize', this.resizeListener);
        this.perspectiveCtrl.dispose();
    };
    PerspectivePanel.prototype.render = function (model) {
        this.perspectiveCtrl.render(model);
    };
    PerspectivePanel.prototype.setModel = function (tObj) {
        this.perspectiveCtrl.setModel(tObj);
    };
    PerspectivePanel.prototype.show = function (value) {
        if (value === true) {
            this.onResize();
        }
    };
    PerspectivePanel.prototype.onResize = function () {
        this.perspectiveCtrl.setSize(this.div.clientWidth, this.div.clientHeight);
    };
    return PerspectivePanel;
}(_GUI_Panel__WEBPACK_IMPORTED_MODULE_0__["Panel"]));



/***/ }),

/***/ "./src/Apps/Viewer/Plane.ts":
/*!**********************************!*\
  !*** ./src/Apps/Viewer/Plane.ts ***!
  \**********************************/
/*! exports provided: Plane */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Plane", function() { return Plane; });
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Util3D/Vec */ "./src/Util3D/Vec.ts");

/**
 * Represents a plane defined by a*x + b*y + c*z = d
 */
var Plane = /** @class */ (function () {
    /**
     * @param pt A point on the plane perpendicular to the origin
     * @param origin If the perpendicular point is not the origin, specify it here
     */
    function Plane(pt, origin) {
        if (!origin) {
            origin = _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"].origin;
        }
        this.origin = origin;
        this.a = origin.x - pt.x;
        this.b = origin.y - pt.y;
        this.c = origin.z - pt.z;
        this.d = this.a * this.a + this.b * this.b + this.c * this.c;
        this.distanceTerm = Math.sqrt(this.d);
    }
    /**
     * Computes the distance to a point.
     *
     * @param pt The point.
     * @returns the Distance.
     */
    Plane.prototype.distToPt = function (pt) {
        var x = pt.x - this.origin.x;
        var y = pt.y - this.origin.y;
        var z = pt.z - this.origin.z;
        return Math.abs(this.a * x + this.b * y + this.c * z + this.d) / this.distanceTerm;
    };
    return Plane;
}());



/***/ }),

/***/ "./src/Apps/Viewer/Renderer.ts":
/*!*************************************!*\
  !*** ./src/Apps/Viewer/Renderer.ts ***!
  \*************************************/
/*! exports provided: INITIAL_EYE, Contour, RenderMode, Reset, LightType, Renderer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "INITIAL_EYE", function() { return INITIAL_EYE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Contour", function() { return Contour; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RenderMode", function() { return RenderMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Reset", function() { return Reset; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LightType", function() { return LightType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Renderer", function() { return Renderer; });
/* harmony import */ var _shaders_ViewerVertex_glsl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shaders/ViewerVertex.glsl */ "./src/shaders/ViewerVertex.glsl");
/* harmony import */ var _shaders_ViewerFragment_glsl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shaders/ViewerFragment.glsl */ "./src/shaders/ViewerFragment.glsl");
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Util3D/Vec */ "./src/Util3D/Vec.ts");
/* harmony import */ var _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../Util3D/Mat */ "./src/Util3D/Mat.ts");
/* harmony import */ var _gl_glColor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../gl/glColor */ "./src/gl/glColor.ts");
/* harmony import */ var _ValueRange__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ValueRange */ "./src/Apps/Viewer/ValueRange.ts");
/* harmony import */ var _Camera__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Camera */ "./src/Apps/Viewer/Camera.ts");
/* harmony import */ var _gl_glProgram__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../gl/glProgram */ "./src/gl/glProgram.ts");
/* harmony import */ var _Util_htmlColor__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../Util/htmlColor */ "./src/Util/htmlColor.ts");
/* harmony import */ var _glObject__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./glObject */ "./src/Apps/Viewer/glObject.ts");
/* harmony import */ var _gl_glFrameBuffer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../gl/glFrameBuffer */ "./src/gl/glFrameBuffer.ts");
/* harmony import */ var _gl_glTexture__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../gl/glTexture */ "./src/gl/glTexture.ts");
/* harmony import */ var _Util3D_TriangleObjBuilder__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../Util3D/TriangleObjBuilder */ "./src/Util3D/TriangleObjBuilder.ts");
/* harmony import */ var _Util3D_TriangleObj__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../Util3D/TriangleObj */ "./src/Util3D/TriangleObj.ts");
/* harmony import */ var _gl_glUniform__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../gl/glUniform */ "./src/gl/glUniform.ts");
/* harmony import */ var _Plane__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./Plane */ "./src/Apps/Viewer/Plane.ts");
/* harmony import */ var _TextureRenderer__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./TextureRenderer */ "./src/Apps/Viewer/TextureRenderer.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");


















var BALL_RADIUS = 0.5;
var INITIAL_LIGHT_POS = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([-1.0, 1.0, 1.5]);
var INITIAL_VIEW = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__["Mat4"].identity;
var INITIAL_SHININESS = 15;
var INITIAL_LIGHT_INTENSITY = 1.0;
var INITIAL_FALLOFF = 0.5;
var INITIAL_EYE = [0, 0, 6]; // 3 times the max object dimension of 2. For a model, about 15 ft away
var Contour = /** @class */ (function () {
    function Contour(color, angle) {
        if (color instanceof _gl_glColor__WEBPACK_IMPORTED_MODULE_4__["glColor3"]) {
            this.color = color;
        }
        else {
            this.color = new _gl_glColor__WEBPACK_IMPORTED_MODULE_4__["glColor3"]([color, color, color]);
        }
        this.angle = angle;
    }
    return Contour;
}());

// Rendering modes. Must match values in ViewerFragment.glsl
var RenderMode;
(function (RenderMode) {
    RenderMode[RenderMode["Normal"] = 0] = "Normal";
    RenderMode[RenderMode["ContourPlanes"] = 1] = "ContourPlanes";
    RenderMode[RenderMode["ContourValues"] = 2] = "ContourValues";
    RenderMode[RenderMode["LightAndShadow"] = 3] = "LightAndShadow";
    RenderMode[RenderMode["HighlightTerminator"] = 4] = "HighlightTerminator";
    RenderMode[RenderMode["HighlightShadow"] = 5] = "HighlightShadow";
    RenderMode[RenderMode["EmphasizeHighlights"] = 6] = "EmphasizeHighlights";
})(RenderMode || (RenderMode = {}));
var Reset;
(function (Reset) {
    Reset[Reset["All"] = 0] = "All";
    Reset[Reset["View"] = 1] = "View";
    Reset[Reset["Lights"] = 2] = "Lights";
    Reset[Reset["Rendering"] = 3] = "Rendering";
})(Reset || (Reset = {}));
var LightType;
(function (LightType) {
    LightType[LightType["Point"] = 0] = "Point";
    LightType[LightType["Directional"] = 1] = "Directional";
})(LightType || (LightType = {}));
/**
 * Class that renders triangles and a light source
 */
var Renderer = /** @class */ (function () {
    function Renderer(glCtx) {
        this.gl = null;
        this.yellow = new _gl_glColor__WEBPACK_IMPORTED_MODULE_4__["glColor3"]([1.0, 0.9, 0.7]);
        this.options = {
            view: _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__["Mat4"].identity,
            valueRange: _ValueRange__WEBPACK_IMPORTED_MODULE_5__["ValueRange"].Standard,
            lightPos: INITIAL_LIGHT_POS.clone(),
            lightType: LightType.Point,
            falloff: INITIAL_FALLOFF,
            lightIntensity: INITIAL_LIGHT_INTENSITY,
            contours: [],
            useCulling: true,
            showHighlights: true,
            shininess: INITIAL_SHININESS,
            camera: new _Camera__WEBPACK_IMPORTED_MODULE_6__["Camera"](),
            whiteColor: _gl_glColor__WEBPACK_IMPORTED_MODULE_4__["glColor3"].modelWhite,
            blackColor: _gl_glColor__WEBPACK_IMPORTED_MODULE_4__["glColor3"].modelBlack,
            useShadows: true,
            renderMode: RenderMode.Normal,
        };
        this.arrowOptions = {
            view: _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__["Mat4"].identity,
            valueRange: new _ValueRange__WEBPACK_IMPORTED_MODULE_5__["ValueRange"](1.0, 0.4, 0.1),
            lightPos: new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([-1, 0.5, 0.5]),
            lightType: LightType.Directional,
            falloff: 0.0,
            lightIntensity: INITIAL_LIGHT_INTENSITY,
            contours: [],
            useCulling: true,
            showHighlights: false,
            shininess: INITIAL_SHININESS,
            camera: new _Camera__WEBPACK_IMPORTED_MODULE_6__["Camera"]({
                sizeProvider: new _Camera__WEBPACK_IMPORTED_MODULE_6__["FixedSizeProvider"](2, 2),
                useOrthographic: true,
            }),
            whiteColor: this.yellow,
            blackColor: _Util_htmlColor__WEBPACK_IMPORTED_MODULE_8__["htmlColor"].black.toGlColor(),
            useShadows: false,
            renderMode: RenderMode.Normal,
        };
        this.ballOptions = {
            view: _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__["Mat4"].identity,
            valueRange: _ValueRange__WEBPACK_IMPORTED_MODULE_5__["ValueRange"].Standard,
            lightPos: new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([-1, 0.5, 0.5]),
            lightType: LightType.Directional,
            falloff: 0.0,
            lightIntensity: INITIAL_LIGHT_INTENSITY,
            contours: [],
            useCulling: true,
            showHighlights: false,
            shininess: INITIAL_SHININESS,
            camera: new _Camera__WEBPACK_IMPORTED_MODULE_6__["Camera"]({
                sizeProvider: new _Camera__WEBPACK_IMPORTED_MODULE_6__["FixedSizeProvider"](2, 2),
                useOrthographic: true,
            }),
            whiteColor: _gl_glColor__WEBPACK_IMPORTED_MODULE_4__["glColor3"].modelWhite,
            blackColor: _gl_glColor__WEBPACK_IMPORTED_MODULE_4__["glColor3"].modelBlack,
            useShadows: false,
            renderMode: RenderMode.Normal,
        };
        // size of the smaller view
        this.miniSize = 0.2;
        this.showShadowMap = false;
        this.showMiniView = true;
        this.showBall = true;
        this.showFloor = true;
        this.showGrid = false;
        this.miniViewShowContours = false;
        this.lockFloor = false;
        this.gl = glCtx;
        var gl = this.gl;
        // enable z-buffer
        gl.enable(gl.DEPTH_TEST);
        // enable alpha values
        gl.enable(gl.BLEND);
        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
        this.program = new _gl_glProgram__WEBPACK_IMPORTED_MODULE_7__["glProgram"](gl, _shaders_ViewerVertex_glsl__WEBPACK_IMPORTED_MODULE_0__["default"], _shaders_ViewerFragment_glsl__WEBPACK_IMPORTED_MODULE_1__["default"]);
        var tBall = new _Util3D_TriangleObjBuilder__WEBPACK_IMPORTED_MODULE_12__["TriangleObjBuilder"]('Ball');
        tBall.addSphere(50, BALL_RADIUS, new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([0, 0, 0]));
        tBall.optimize(_Util3D_TriangleObj__WEBPACK_IMPORTED_MODULE_13__["NormalType"].Smooth);
        this.ball = new _glObject__WEBPACK_IMPORTED_MODULE_9__["glObject"](gl, tBall, this.program);
        var tArrow = new _Util3D_TriangleObjBuilder__WEBPACK_IMPORTED_MODULE_12__["TriangleObjBuilder"]('Light Arrow');
        tArrow.addArrow();
        this.arrow = new _glObject__WEBPACK_IMPORTED_MODULE_9__["glObject"](gl, tArrow, this.program);
        this.arrowOptions.camera.useOrthographic = true;
        var style = getComputedStyle(gl.canvas);
        var color = _Util_htmlColor__WEBPACK_IMPORTED_MODULE_8__["htmlColor"].fromCss(style.backgroundColor).toGlColor();
        gl.clearColor(color.r, color.g, color.b, 1);
        gl.clear(gl.DEPTH_BUFFER_BIT | gl.COLOR_BUFFER_BIT);
        // tests
        /*
        let light = new Vec3([0, 10, 0]);
        let pt = new Vec3([2, 0, 0]);
        let mat = new Mat4();
        mat.translate(new Vec3([0, -100, 0]));
        mat.scale(0.5);
        mat.rotZ(toRad(-90));
        mat.rotY(toRad(45));
        let xpt = mat.multVec3(pt);
        let xLight = mat.inverse().multVec3(light);
        let xOrigin = mat.inverse().multVec3(new Vec3([0, 0, 0]));
        let plane = new Plane(light);
        let plane2 = new Plane(xLight, xOrigin);
        console.log('\n\n----------------------');
        console.log('pt: ' + pt.toString(2) + '      xlight: ' + xLight.toString(2) + '   ' + (plane2.distToPt(pt) * mat.scaleFactors.x));
        console.log('xpt: ' + xpt.toString(2) + '    light: ' + light.toString(2) + '   ' + plane.distToPt(xpt));
        console.log('xOrigin: ' + xOrigin.toString(2));
        */
    }
    Object.defineProperty(Renderer.prototype, "ballColor", {
        set: function (color) {
            this.ballOptions.whiteColor = color;
        },
        enumerable: false,
        configurable: true
    });
    Renderer.prototype.dispose = function () {
        this.obj.dispose();
        this.floor.dispose();
        this.ball.dispose();
        this.arrow.dispose();
        if (this.shadowFrameBuffer) {
            this.shadowFrameBuffer.dispose();
            this.shadowColorTexture.dispose();
            this.shadowDepthTexture.dispose();
        }
        this.obj = null;
        this.floor = null;
        this.ball = null;
        this.arrow = null;
        this.shadowFrameBuffer = null;
        this.shadowColorTexture = null;
        this.shadowDepthTexture = null;
    };
    Renderer.prototype.renderModeCanToggleHighlights = function () {
        if (this.options.renderMode === RenderMode.EmphasizeHighlights || this.options.renderMode === RenderMode.LightAndShadow) {
            return false;
        }
        else {
            return true;
        }
    };
    Renderer.prototype.rotX = function (angle) {
        this.obj.rotX(angle);
        if (this.lockFloor == false) {
            this.floor.rotX(angle);
        }
    };
    Renderer.prototype.rotY = function (angle) {
        this.obj.rotY(angle);
        if (this.lockFloor == false) {
            this.floor.rotY(angle);
        }
    };
    Renderer.prototype.rotZ = function (angle) {
        this.obj.rotZ(angle);
        if (this.lockFloor == false) {
            this.floor.rotZ(angle);
        }
    };
    Renderer.prototype.preRotX = function (angle) {
        this.obj.preRotX(angle);
        if (this.lockFloor == false) {
            this.floor.preRotX(angle);
        }
    };
    Renderer.prototype.preRotY = function (angle) {
        this.obj.preRotY(angle);
        if (this.lockFloor == false) {
            this.floor.preRotY(angle);
        }
    };
    Renderer.prototype.preRotZ = function (angle) {
        this.obj.preRotZ(angle);
        if (this.lockFloor == false) {
            this.floor.preRotZ(angle);
        }
    };
    Renderer.prototype.scale = function (scale) {
        this.obj.scale(scale);
        if (this.lockFloor == false) {
            this.floor.scale(scale);
        }
    };
    Renderer.prototype.translate = function (offset) {
        this.obj.translate(offset);
        if (this.lockFloor == false) {
            this.floor.translate(offset);
        }
    };
    Renderer.prototype.rotateLight = function (xRad, yRad) {
        var matX = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__["Mat4"].fromRotX(yRad);
        var matY = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__["Mat4"].fromRotY(xRad);
        var vec = _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec4"].fromVec3(this.options.lightPos, 1);
        vec = matX.multV(vec);
        vec = matY.multV(vec);
        this.options.lightPos = vec.xyz;
    };
    Object.defineProperty(Renderer.prototype, "tObj", {
        get: function () {
            return this.obj.tObj;
        },
        enumerable: false,
        configurable: true
    });
    Renderer.prototype.setModel = function (tObj) {
        if (this.obj) {
            this.obj.dispose();
        }
        this.obj = new _glObject__WEBPACK_IMPORTED_MODULE_9__["glObject"](this.gl, tObj, this.program);
        this.options.camera.sizeProvider = new _Camera__WEBPACK_IMPORTED_MODULE_6__["ObjSizeProvider"](this.obj);
        // move the object so that the center is at [0,0,0] and it is scaled
        // so that it's diagonal is 2 units across
        var objScale = 2.0 / tObj.diagonal;
        this.obj.autoSize(new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([0, 0, 0]), 2);
        if (this.floor) {
            this.floor.dispose;
        }
        var tFloor = new _Util3D_TriangleObjBuilder__WEBPACK_IMPORTED_MODULE_12__["TriangleObjBuilder"]('Floor');
        // make the floor size slightly larger than the object, centered at the bottom
        var radius = 4;
        var pos = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([0, -objScale * tObj.height / 2, 0]);
        tFloor.addDisk(50, radius, pos);
        this.floor = new _glObject__WEBPACK_IMPORTED_MODULE_9__["glObject"](this.gl, tFloor, this.program);
        var uni = new _gl_glUniform__WEBPACK_IMPORTED_MODULE_14__["glUniform"](this.gl, this.program);
        uni.set('uFloorCenter', tFloor.center);
        uni.set('uFloorRadius', radius);
        // reset the view and the light
        this.reset(Reset.All);
    };
    Renderer.prototype.reset = function (what) {
        switch (what) {
            case Reset.All:
                this.reset(Reset.Lights);
                this.reset(Reset.Rendering);
                this.reset(Reset.View);
                break;
            case Reset.Lights:
                this.options.lightPos = INITIAL_LIGHT_POS.clone();
                this.options.falloff = INITIAL_FALLOFF;
                this.options.lightIntensity = INITIAL_LIGHT_INTENSITY;
                this.options.valueRange.ambientIntensity = _ValueRange__WEBPACK_IMPORTED_MODULE_5__["ValueRange"].Standard.ambientIntensity;
                break;
            case Reset.View:
                this.options.view = INITIAL_VIEW.clone();
                this.obj.clearTransforms();
                this.floor.clearTransforms();
                this.options.camera.eye = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"](INITIAL_EYE);
                this.options.camera.lookAt = _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"].origin;
                this.options.camera.zoomFactor = 1;
                break;
            case Reset.Rendering:
                this.options.renderMode = RenderMode.Normal;
                this.options.showHighlights = true;
                this.options.shininess = INITIAL_SHININESS;
                this.options.valueRange = _ValueRange__WEBPACK_IMPORTED_MODULE_5__["ValueRange"].Standard;
                break;
        }
    };
    Renderer.prototype.render = function () {
        this.program.use();
        this.renderToShadowMap();
        this.renderToScreen();
    };
    Renderer.prototype.setValueRangeUniforms = function (valueRange) {
        var uni = new _gl_glUniform__WEBPACK_IMPORTED_MODULE_14__["glUniform"](this.gl, this.program);
        uni.set('uDiffuseIntensity', valueRange.diffuseIntensity);
        uni.set('uAmbientIntensity', valueRange.shadow);
        uni.set('uSpecularIntensity', valueRange.specularIntensity);
    };
    Renderer.prototype.setOptions = function (options) {
        var gl = this.gl;
        options.useCulling ? gl.enable(gl.CULL_FACE) : gl.disable(gl.CULL_FACE);
        gl.cullFace(gl.BACK);
        var uni = new _gl_glUniform__WEBPACK_IMPORTED_MODULE_14__["glUniform"](this.gl, this.program);
        uni.set('view', options.view);
        uni.set('lightView', this.lightView);
        uni.set('projection', options.camera.getProjection(this.gl));
        uni.set('uEye', options.camera.eye);
        uni.set('uOrthographic', options.camera.useOrthographic);
        uni.set('uUseShadows', options.useShadows);
        uni.seti('uRenderMode', options.renderMode);
        uni.set('uShowHighlights', options.showHighlights || options.renderMode === RenderMode.EmphasizeHighlights);
        uni.set('uShininess', options.shininess);
        var valueRange;
        if (options.renderMode === RenderMode.EmphasizeHighlights) {
            valueRange = _ValueRange__WEBPACK_IMPORTED_MODULE_5__["ValueRange"].EmphasizeHighlights;
        }
        else {
            valueRange = options.valueRange;
        }
        this.setValueRangeUniforms(valueRange);
        uni.set('uWhiteColor', options.whiteColor);
        uni.set('uBlackColor', options.blackColor);
        uni.seti('uNumContours', options.contours.length);
        for (var i = 0; i < options.contours.length; i++) {
            uni.set('uContourColors[' + i + ']', options.contours[i].color);
            uni.set('uContourAngles[' + i + ']', options.contours[i].angle);
        }
        uni.set('uPointLight', options.lightType === LightType.Point);
        uni.set('uFalloff', options.falloff);
        uni.set('uLightIntensity', options.lightIntensity);
        if (options.falloff === 0) {
            uni.set('uLightPos', options.lightPos);
        }
        else {
            // compute the minimum distance to the light. We'll use this value to auto-adjust
            // the light
            var dist = void 0;
            // We can get the distance in two ways. 1: transform all the points by the model
            // matrix and compute distances. This is expensive since we have to transform each
            // point so we instead, 2: do the inverse transform to the light and compute the
            // distance to the untransformed points.
            var boundingPts = this.obj.tObj.getBoundingPts();
            // get the inverse transform of the light position
            var obj = this.obj;
            var mat = obj.model.multM(obj.normalize);
            var inverse = mat.inverse();
            var xLightPos = inverse.multVec3(options.lightPos);
            if (options.lightType === LightType.Point) {
                dist = boundingPts.distToPoint(xLightPos);
            }
            else {
                // figure out the light plane for the inverse light
                var xOrigin = inverse.multVec3(_Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"].origin);
                var xPlane = new _Plane__WEBPACK_IMPORTED_MODULE_15__["Plane"](xLightPos, xOrigin);
                // distance to the raw object points
                dist = boundingPts.distToPlane(xPlane);
            }
            // to get the actual distance, we now need to reapply the scale factor to
            // get the true distance. The scale factor is the same in all directions
            // so just use the x value
            var s = obj.model.multM(obj.normalize).scaleFactors.x;
            dist = {
                min: dist.min * s,
                max: dist.max * s,
            };
            // we need to compute the distance to the light and the light intensity such that
            // the closest point gets lit with value 1 and the furthest point matches the
            // target falloff.
            //
            // - d is the distance the light needs to be from the closest point. Light falls off
            // with the square of distance.
            // - falloffDistance is the size of the object
            var falloffDistance = dist.max - dist.min;
            var d = (falloffDistance * Math.sqrt(1.0 - options.falloff)) / (1.0 - Math.sqrt(1.0 - options.falloff));
            // intensity = d^2 so that intensity at d (1/d^2) = 1.0
            var lightIntensityAtSource = d * d;
            uni.set('uLightIntensityAtSource', lightIntensityAtSource);
            // actual light position is measured from the object, not the origin. Shift 
            // it back
            var objToOrigin = options.lightPos.magnitude() - dist.min;
            options.lightPos = options.lightPos.normalize().mult(d + objToOrigin);
            uni.set('uLightPos', options.lightPos);
        }
        return uni;
    };
    Renderer.prototype.renderToShadowMap = function () {
        var gl = this.gl;
        var maxTextureSize = Math.min(gl.getParameter(gl.MAX_TEXTURE_SIZE));
        var desiredSize = this.options.camera.zoomFactor * Math.min(gl.canvas.width, gl.canvas.height);
        var size = 256;
        while (size < desiredSize && size * 2 <= maxTextureSize) {
            size *= 2;
        }
        if (!this.shadowFrameBuffer || size !== this.shadowFrameBuffer.size) {
            if (this.shadowFrameBuffer) {
                this.shadowFrameBuffer.dispose();
                this.shadowColorTexture.dispose();
                this.shadowDepthTexture.dispose();
            }
            this.shadowFrameBuffer = new _gl_glFrameBuffer__WEBPACK_IMPORTED_MODULE_10__["glFrameBuffer"](gl, size, size);
            this.shadowColorTexture = this.shadowFrameBuffer.createTexture(_gl_glTexture__WEBPACK_IMPORTED_MODULE_11__["glTextureStyle"].Color);
            this.shadowDepthTexture = this.shadowFrameBuffer.createTexture(_gl_glTexture__WEBPACK_IMPORTED_MODULE_11__["glTextureStyle"].Depth);
            this.shadowFrameBuffer.attachTexture(gl.COLOR_ATTACHMENT0, this.shadowColorTexture);
            this.shadowFrameBuffer.attachTexture(gl.DEPTH_ATTACHMENT, this.shadowDepthTexture);
            this.shadowFrameBuffer.check();
            gl.bindTexture(gl.TEXTURE_2D, null);
        }
        gl.viewport(0, 0, this.shadowFrameBuffer.width, this.shadowFrameBuffer.height);
        this.shadowFrameBuffer.bind();
        gl.clear(gl.DEPTH_BUFFER_BIT | gl.COLOR_BUFFER_BIT);
        var center = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([0, 0, 0]);
        var up = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([0, 1, 0]);
        var eye = this.options.lightPos;
        var mat = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__["Mat4"].makeLookAt(eye, center, up);
        mat.set(0, 3, 0);
        mat.set(1, 3, 0);
        mat.set(2, 3, 0);
        if (this.options.lightType === LightType.Directional) {
            // to avoid clipping, expand the z range to allow full rotation of
            // anything in a 3-3-3 cube.
            var maxSize = Math.sqrt(27);
            mat = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__["Mat4"].makeOrtho(-1, 1, -1, 1, maxSize, -maxSize).multM(mat);
            this.lightView = mat;
        }
        else {
            // TODO make point light sources work for shadow maps
            /*
            let fov = 2 * toDeg(Math.atan2(3 / 2, eye.z));
            console.log('fov=' + fov);
            mat = Mat4.makePerspective(fov, 1, 0.1, 20).multM(mat);
            this.lightView = mat;
            */
            var maxSize = Math.sqrt(27);
            mat = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__["Mat4"].makeOrtho(-1, 1, -1, 1, maxSize, -maxSize).multM(mat);
            this.lightView = mat;
        }
        var uni = this.setOptions(this.options);
        // change the view matrix so that our view is from the light
        uni.set('view', this.lightView);
        uni.set('projection', _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__["Mat4"].identity);
        // don't try to use the shadow texture while we're creating it
        uni.set('uUseShadows', false);
        uni.seti('uRenderMode', RenderMode.Normal);
        gl.disable(gl.CULL_FACE);
        this.obj.draw();
        gl.bindTexture(gl.TEXTURE_2D, null);
        gl.bindFramebuffer(gl.FRAMEBUFFER, null);
    };
    Renderer.prototype.renderToScreen = function () {
        var gl = this.gl;
        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
        // display the depth buffer for testing purposes
        if (this.showShadowMap) {
            gl.disable(gl.CULL_FACE);
            var tr = new _TextureRenderer__WEBPACK_IMPORTED_MODULE_16__["TextureRenderer"](gl);
            tr.render(this.shadowDepthTexture, this.shadowFrameBuffer.width, this.shadowFrameBuffer.height);
            gl.bindTexture(gl.TEXTURE_2D, null);
        }
        else {
            this.shadowDepthTexture.bind();
            var style = getComputedStyle(gl.canvas);
            var color = _Util_htmlColor__WEBPACK_IMPORTED_MODULE_8__["htmlColor"].fromCss(style.backgroundColor).toGlColor();
            gl.clearColor(color.r, color.g, color.b, 1);
            gl.clear(gl.DEPTH_BUFFER_BIT | gl.COLOR_BUFFER_BIT);
            this.drawFloor();
            // draw the main object
            this.setOptions(this.options);
            this.obj.draw();
            gl.clear(gl.DEPTH_BUFFER_BIT);
            this.drawMiniView();
            this.drawBall();
            gl.bindTexture(gl.TEXTURE_2D, null);
            gl.bindFramebuffer(gl.FRAMEBUFFER, null);
        }
    };
    Renderer.prototype.drawFloor = function () {
        if (this.showFloor) {
            var gl = this.gl;
            var uni = this.setOptions(this.options);
            // set the special mode for the floor
            uni.set('uRenderingFloor', true);
            uni.set('uShowGrid', this.showGrid);
            // cull polygons so we don't see the floor from below
            gl.enable(gl.CULL_FACE);
            gl.cullFace(gl.BACK);
            uni.seti('uRenderMode', RenderMode.Normal);
            //this.setValueRangeUniforms(ValueRange.Standard);
            this.floor.draw();
            uni.set('uRenderingFloor', false);
        }
    };
    Renderer.prototype.drawMiniView = function () {
        if (this.showMiniView) {
            var gl = this.gl;
            gl.enable(gl.CULL_FACE);
            var uni = this.setOptions(this.options);
            var clipSpace = this.options.camera.getClipSpace(gl);
            var projection = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__["Mat4"].makeOrtho(clipSpace.left, clipSpace.right, clipSpace.bottom, clipSpace.top, clipSpace.near, clipSpace.far);
            uni.set('projection', projection);
            uni.set('uOthrographic', true);
            // draw the object in the upper right at a reduced size
            var view = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__["Mat4"].identity;
            view.scale(this.miniSize);
            view.translate(new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([clipSpace.max.x - this.miniSize, clipSpace.max.y - this.miniSize, 0]));
            uni.set('view', view);
            uni.seti('uRenderMode', this.miniViewShowContours ? RenderMode.ContourPlanes : RenderMode.Normal);
            this.obj.draw();
        }
    };
    Renderer.prototype.drawBall = function () {
        if (this.showBall === false) {
            return;
        }
        var gl = this.gl;
        // create a view matrix that renders in the upper left
        var clipSpace = this.options.camera.getClipSpace(gl);
        var view = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__["Mat4"].identity;
        view.scale(this.miniSize);
        view.translate(new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([clipSpace.min.x + this.miniSize, clipSpace.max.y - this.miniSize, 0]));
        this.ballOptions.view = view.clone();
        this.ballOptions.valueRange = this.options.valueRange.clone();
        this.ballOptions.lightPos = this.options.lightPos.clone();
        this.ballOptions.lightType = this.options.lightType;
        this.ballOptions.falloff = this.options.falloff;
        // TODO compute distance and intensity for light for the ball
        this.ballOptions.lightIntensity = this.options.lightIntensity;
        this.ballOptions.showHighlights = this.options.showHighlights;
        this.ballOptions.shininess = this.options.shininess;
        this.ballOptions.renderMode = this.options.renderMode;
        this.ballOptions.contours = this.options.contours;
        var uni = this.setOptions(this.ballOptions);
        if (this.ballOptions.falloff > 0) {
            // TODO this code is similar to the code in setOptions. Combine it.
            var falloffDistance = 1.0; // ball diameter
            var d = (falloffDistance * Math.sqrt(1.0 - this.ballOptions.falloff)) / (1.0 - Math.sqrt(1.0 - this.ballOptions.falloff));
            // intensity = d^2 so that intensity at d (1/d^2) = 1.0
            var lightIntensityAtSource = d * d;
            uni.set('uLightIntensityAtSource', lightIntensityAtSource);
            // actual light position is measured from the object, not the origin. Shift 
            // it back
            var objToOrigin = 0.5;
            this.ballOptions.lightPos = this.ballOptions.lightPos.normalize().mult(d + objToOrigin);
            uni.set('uLightPos', this.ballOptions.lightPos);
        }
        this.ball.draw();
        // back out angles as if looking down the z-axis
        var x = -this.options.lightPos.x;
        var y = -this.options.lightPos.y;
        var z = -this.options.lightPos.z;
        // start by looking down from the Z direction
        var radius = Math.sqrt(x * x + y * y + z * z);
        var elevationAngle = Math.acos(z / radius);
        var rotationAngle = Math.atan2(y, x);
        // first reset things so that we're looking down the z-axis
        this.arrow.clearTransforms();
        this.arrow.translate(new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([0.0, 0.55, 0.0]));
        this.arrow.rotX(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_17__["toRad"])(90));
        // rotate to match the light source
        this.arrow.rotY(-elevationAngle);
        this.arrow.rotZ(-rotationAngle);
        this.arrowOptions.view = view.clone();
        this.setOptions(this.arrowOptions);
        this.arrow.draw();
    };
    return Renderer;
}());



/***/ }),

/***/ "./src/Apps/Viewer/TextureRenderer.ts":
/*!********************************************!*\
  !*** ./src/Apps/Viewer/TextureRenderer.ts ***!
  \********************************************/
/*! exports provided: TextureRenderer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextureRenderer", function() { return TextureRenderer; });
/* harmony import */ var _shaders_TextureRendererVertex_glsl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shaders/TextureRendererVertex.glsl */ "./src/shaders/TextureRendererVertex.glsl");
/* harmony import */ var _shaders_TextureRendererFragment_glsl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shaders/TextureRendererFragment.glsl */ "./src/shaders/TextureRendererFragment.glsl");
/* harmony import */ var _gl_glProgram__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../gl/glProgram */ "./src/gl/glProgram.ts");
/* harmony import */ var _gl_glBuffer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../gl/glBuffer */ "./src/gl/glBuffer.ts");




/**
 * Class that does the work of building the Path Traced texture
 */
var TextureRenderer = /** @class */ (function () {
    function TextureRenderer(glCtx) {
        this.vertices = [
            -1, -1,
            -1, +1,
            +1, -1,
            +1, +1
        ];
        this.gl = glCtx;
        var gl = this.gl;
        // create shader
        this.program = new _gl_glProgram__WEBPACK_IMPORTED_MODULE_2__["glProgram"](gl, _shaders_TextureRendererVertex_glsl__WEBPACK_IMPORTED_MODULE_0__["default"], _shaders_TextureRendererFragment_glsl__WEBPACK_IMPORTED_MODULE_1__["default"]);
        // create vertex buffer - the block we'll draw our rendered texture on
        this.vertexBuffer = new _gl_glBuffer__WEBPACK_IMPORTED_MODULE_3__["glBuffer"](gl, this.program, 'vertex');
        this.vertexBuffer.upload(this.vertices);
    }
    TextureRenderer.prototype.render = function (texture, width, height) {
        var gl = this.gl;
        gl.viewport((gl.canvas.width - width) / 2, (gl.canvas.height - height) / 2, width, height);
        this.program.use();
        texture.bind();
        this.vertexBuffer.bind(2);
        // display the main screen
        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
    };
    return TextureRenderer;
}());



/***/ }),

/***/ "./src/Apps/Viewer/ValuePlanes.ts":
/*!****************************************!*\
  !*** ./src/Apps/Viewer/ValuePlanes.ts ***!
  \****************************************/
/*! exports provided: DEFAULT_THRESHOLD1, DEFAULT_THRESHOLD2, ValuePlanes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_THRESHOLD1", function() { return DEFAULT_THRESHOLD1; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_THRESHOLD2", function() { return DEFAULT_THRESHOLD2; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ValuePlanes", function() { return ValuePlanes; });
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");

var DEFAULT_THRESHOLD1 = 40;
var DEFAULT_THRESHOLD2 = 70;
/**
 * Keeps track of 3 values in the light based on threshold angles
 * for the planes (stored in degrees) and the light range (highlight
 * to shadow colors).
 */
var ValuePlanes = /** @class */ (function () {
    function ValuePlanes(valueRange) {
        this._threshold1 = DEFAULT_THRESHOLD1;
        this._threshold2 = DEFAULT_THRESHOLD2;
        this.valueRange = valueRange;
        this.computeColors();
    }
    Object.defineProperty(ValuePlanes.prototype, "threshold1", {
        get: function () {
            return this._threshold1;
        },
        set: function (angleInDeg) {
            this._threshold1 = angleInDeg;
            this._threshold2 = Math.max(this._threshold2, angleInDeg);
            this.computeColors();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ValuePlanes.prototype, "threshold2", {
        get: function () {
            return this._threshold2;
        },
        set: function (angleInDeg) {
            this._threshold2 = angleInDeg;
            this._threshold1 = Math.min(this._threshold1, angleInDeg);
            this.computeColors();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ValuePlanes.prototype, "highlight", {
        get: function () {
            return this.valueRange.maxIntensity;
        },
        set: function (val) {
            this.valueRange.maxIntensity = val;
            this.computeColors();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ValuePlanes.prototype, "shadow", {
        get: function () {
            return this.valueRange.ambientIntensity;
        },
        set: function (val) {
            this.valueRange.ambientIntensity = val;
            this.computeColors();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ValuePlanes.prototype, "lightLight", {
        get: function () {
            return this._lightLight;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ValuePlanes.prototype, "midLight", {
        get: function () {
            return this._midLight;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ValuePlanes.prototype, "darkLight", {
        get: function () {
            return this._darkLight;
        },
        enumerable: false,
        configurable: true
    });
    ValuePlanes.prototype.colorAt = function (deg) {
        deg = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_0__["clamp"])(deg, 0, 90);
        return Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_0__["mix"])(this.shadow, this.highlight - this.valueRange.specularIntensity, Math.cos(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_0__["toRad"])(deg)));
    };
    ValuePlanes.prototype.computeColors = function () {
        this._lightLight = this.colorAt(0.5 * this.threshold1);
        this._midLight = this.colorAt(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_0__["mix"])(this.threshold1, this.threshold2, 0.5));
        this._darkLight = this.colorAt((this.threshold2 + 90) / 2);
    };
    return ValuePlanes;
}());



/***/ }),

/***/ "./src/Apps/Viewer/ValuePlanesCtrl.ts":
/*!********************************************!*\
  !*** ./src/Apps/Viewer/ValuePlanesCtrl.ts ***!
  \********************************************/
/*! exports provided: ValuePlanesCtrl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ValuePlanesCtrl", function() { return ValuePlanesCtrl; });
/* harmony import */ var _shaders_ViewerVertex_glsl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shaders/ViewerVertex.glsl */ "./src/shaders/ViewerVertex.glsl");
/* harmony import */ var _shaders_ViewerFragment_glsl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shaders/ViewerFragment.glsl */ "./src/shaders/ViewerFragment.glsl");
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Util3D/Vec */ "./src/Util3D/Vec.ts");
/* harmony import */ var _gl_glProgram__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../gl/glProgram */ "./src/gl/glProgram.ts");
/* harmony import */ var _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../GUI/PointerEventHandler */ "./src/GUI/PointerEventHandler.ts");
/* harmony import */ var _glObject__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./glObject */ "./src/Apps/Viewer/glObject.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _Util3D_TriangleObjBuilder__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../Util3D/TriangleObjBuilder */ "./src/Util3D/TriangleObjBuilder.ts");
/* harmony import */ var _Util3D_TriangleObj__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../Util3D/TriangleObj */ "./src/Util3D/TriangleObj.ts");
/* harmony import */ var _gl_glColor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../gl/glColor */ "./src/gl/glColor.ts");
/* harmony import */ var _gl_glUniform__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../gl/glUniform */ "./src/gl/glUniform.ts");
/* harmony import */ var _Util3D_Mat__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../Util3D/Mat */ "./src/Util3D/Mat.ts");
/* harmony import */ var _ValueRange__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./ValueRange */ "./src/Apps/Viewer/ValueRange.ts");
/* harmony import */ var _Renderer__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./Renderer */ "./src/Apps/Viewer/Renderer.ts");
/* harmony import */ var _Util_htmlColor__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../Util/htmlColor */ "./src/Util/htmlColor.ts");















var BALL_RADIUS = 0.875;
var BALL_CENTER = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([-0.6, -0.6, 0]);
var CTRL_SIZE = 150;
var NOMINAL_DISPLAY_SIZE = 150;
var NOMINAL_KNOB_LENGTH = 25;
var NOMINAL_KNOB_RADIUS = 10;
var ValuePlanesCtrl = /** @class */ (function () {
    function ValuePlanesCtrl(parent, provider, onThreshold1Change, onThreshold2Change) {
        var _this = this;
        this.mouseOffset = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec2"]();
        this.hit = 0;
        if (_Util_Globals__WEBPACK_IMPORTED_MODULE_6__["isMobile"]) {
            CTRL_SIZE = 300;
        }
        this.provider = provider;
        this.onThreshold1Change = onThreshold1Change;
        this.onThreshold2Change = onThreshold2Change;
        var canvas = document.createElement('canvas');
        canvas.id = 'ValuePlanesCanvas';
        canvas.width = CTRL_SIZE;
        canvas.height = CTRL_SIZE;
        parent.appendChild(canvas);
        // don't try to make the canvas transparent to the underlying html. This
        // seems to limit the alpha values we can use in our scene.
        var context = canvas.getContext('webgl');
        if (!context) {
            // TODO display a message about not being able to create a WebGL context
            console.log("Unable to get WebGL context");
        }
        this.gl = context;
        this.overlay = document.createElement('canvas');
        this.overlay.id = 'ValuePlanesOverlayCanvas';
        this.overlay.width = CTRL_SIZE;
        this.overlay.height = CTRL_SIZE;
        parent.appendChild(this.overlay);
        this.handler = new _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_4__["PointerEventHandler"](this.overlay);
        this.handler.onDown = function (pos) { return _this.onDown(pos); };
        this.handler.onDrag = function (pos, delta) { return _this.onDrag(pos, delta); };
        var gl = this.gl;
        gl.enable(gl.DEPTH_TEST);
        this.program = new _gl_glProgram__WEBPACK_IMPORTED_MODULE_3__["glProgram"](gl, _shaders_ViewerVertex_glsl__WEBPACK_IMPORTED_MODULE_0__["default"], _shaders_ViewerFragment_glsl__WEBPACK_IMPORTED_MODULE_1__["default"]);
        var tBall = new _Util3D_TriangleObjBuilder__WEBPACK_IMPORTED_MODULE_7__["TriangleObjBuilder"]('Ball');
        tBall.addSphere(50, BALL_RADIUS, BALL_CENTER);
        tBall.optimize(_Util3D_TriangleObj__WEBPACK_IMPORTED_MODULE_8__["NormalType"].Smooth);
        this.ball = new _glObject__WEBPACK_IMPORTED_MODULE_5__["glObject"](gl, tBall, this.program);
        var tArrow = new _Util3D_TriangleObjBuilder__WEBPACK_IMPORTED_MODULE_7__["TriangleObjBuilder"]('Light Arrow');
        tArrow.addArrow();
        this.arrow = new _glObject__WEBPACK_IMPORTED_MODULE_5__["glObject"](gl, tArrow, this.program);
        this.draw();
    }
    ValuePlanesCtrl.prototype.onDown = function (pos) {
        this.hitTest(pos);
    };
    ValuePlanesCtrl.prototype.hitTest = function (pos) {
        var d1 = this.p1.distance(pos);
        var d2 = this.p2.distance(pos);
        var HIT_RADIUS = NOMINAL_KNOB_RADIUS * (CTRL_SIZE / NOMINAL_DISPLAY_SIZE);
        if (d1 < HIT_RADIUS && d1 <= d2) {
            this.hit = 1;
            this.mouseOffset = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec2"]([this.p1.x - pos.x, this.p1.y - pos.y]);
        }
        else if (d2 < HIT_RADIUS && d2 <= d1) {
            this.hit = 2;
            this.mouseOffset = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec2"]([this.p2.x - pos.x, this.p2.y - pos.y]);
        }
        else {
            this.hit = 0;
        }
    };
    ValuePlanesCtrl.prototype.onDrag = function (pos, delta) {
        if (this.hit > 0) {
            var hitPt = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec2"]([pos.x + this.mouseOffset.x, pos.y + this.mouseOffset.y]);
            hitPt.x = Math.max(hitPt.x, this.ballCenter.x);
            hitPt.y = Math.min(hitPt.y, this.ballCenter.y);
            var radius = this.ballCenter.distance(hitPt);
            var angle = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_6__["clamp"])(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_6__["toDeg"])(Math.asin((hitPt.x - this.ballCenter.x) / radius)), 0, 90);
            if (this.hit == 1) {
                this.provider.threshold1 = angle;
                this.onThreshold1Change(angle);
            }
            else {
                this.provider.threshold2 = angle;
                this.onThreshold2Change(angle);
            }
            this.draw();
        }
    };
    ValuePlanesCtrl.prototype.toGLColor = function (val) {
        return new _gl_glColor__WEBPACK_IMPORTED_MODULE_9__["glColor3"]([val, val, val]);
    };
    ValuePlanesCtrl.prototype.setStdUniforms = function () {
        var uni = new _gl_glUniform__WEBPACK_IMPORTED_MODULE_10__["glUniform"](this.gl, this.program);
        uni.set('view', _Util3D_Mat__WEBPACK_IMPORTED_MODULE_11__["Mat4"].identity);
        uni.set('projection', _Util3D_Mat__WEBPACK_IMPORTED_MODULE_11__["Mat4"].ortho);
        uni.set('uEye', new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([0, 0, 1]));
        uni.set('uOrthographic', true);
        uni.set('uDiffuseIntensity', _ValueRange__WEBPACK_IMPORTED_MODULE_12__["ValueRange"].Standard.diffuseIntensity);
        uni.set('uAmbientIntensity', _ValueRange__WEBPACK_IMPORTED_MODULE_12__["ValueRange"].Standard.shadow);
        uni.set('uSpecularIntensity', _ValueRange__WEBPACK_IMPORTED_MODULE_12__["ValueRange"].Standard.specularIntensity);
        uni.set('uLightIntensity', 1.0);
        uni.set('uFalloff', 0);
        uni.set('uWhiteColor', _gl_glColor__WEBPACK_IMPORTED_MODULE_9__["glColor3"].modelWhite);
        uni.set('uBlackColor', _gl_glColor__WEBPACK_IMPORTED_MODULE_9__["glColor3"].modelBlack);
        var contourColors = [
            this.toGLColor(this.provider.lightLight),
            this.toGLColor(this.provider.midLight),
            this.toGLColor(this.provider.darkLight),
        ];
        uni.seti('uNumContours', contourColors.length);
        for (var i = 0; i < contourColors.length; i++) {
            uni.set('uContourColors[' + i + ']', contourColors[i]);
        }
        uni.set('uContourAngles[0]', this.provider.threshold1);
        uni.set('uContourAngles[1]', this.provider.threshold2);
        uni.set('uContourAngles[2]', 90);
        return uni;
    };
    ValuePlanesCtrl.prototype.draw = function () {
        this.drawBall();
        this.drawOverlay();
    };
    ValuePlanesCtrl.prototype.drawBall = function () {
        var gl = this.gl;
        gl.clear(gl.COLOR_BUFFER_BIT);
        var uni = this.setStdUniforms();
        // always render with bands
        uni.seti('uRenderMode', _Renderer__WEBPACK_IMPORTED_MODULE_13__["RenderMode"].ContourPlanes);
        // shoot the light straight down
        uni.set('uLightPos', new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([0, 1, 0]));
        // don't cast shadows
        uni.set('uUseShadows', false);
        // render the ball
        this.ball.draw();
        // draw the arrow
        uni.set('uLightPos', new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([-1, -0.5, 0.5]));
        uni.seti('uRenderMode', _Renderer__WEBPACK_IMPORTED_MODULE_13__["RenderMode"].Normal);
        // first reset things so that we're looking down the z-axis
        this.arrow.clearTransforms();
        this.arrow.scale(1.25);
        this.arrow.translate(new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec3"]([BALL_CENTER.x, BALL_CENTER.y + BALL_RADIUS + 0.1, 0.0]));
        uni.set('uWhiteColor', new _gl_glColor__WEBPACK_IMPORTED_MODULE_9__["glColor3"]([1.0, 1.0, 0.5]));
        uni.set('uBlackColor', _Util_htmlColor__WEBPACK_IMPORTED_MODULE_14__["htmlColor"].black.toGlColor());
        uni.set('uAmbientIntensity', 0.4);
        uni.set('uDiffuseIntensity', 0.6);
        this.arrow.draw();
    };
    ValuePlanesCtrl.prototype.drawOverlay = function () {
        var ctx = this.overlay.getContext('2d');
        this.ballCenter = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec2"]([
            CTRL_SIZE * (1 + BALL_CENTER.x) / 2,
            CTRL_SIZE * (1 - BALL_CENTER.y) / 2
        ]);
        ctx.clearRect(0, 0, CTRL_SIZE, CTRL_SIZE);
        ctx.fillStyle = 'limegreen';
        ctx.strokeStyle = 'black';
        var KNOB_LENGTH = NOMINAL_KNOB_LENGTH * (CTRL_SIZE / NOMINAL_DISPLAY_SIZE);
        var KNOB_RADIUS = NOMINAL_KNOB_RADIUS * (CTRL_SIZE / NOMINAL_DISPLAY_SIZE);
        var r = CTRL_SIZE * BALL_RADIUS / 2;
        var s1 = this.getPt(this.ballCenter, this.provider.threshold1, r);
        this.p1 = this.getPt(this.ballCenter, this.provider.threshold1, r + KNOB_LENGTH);
        var s2 = this.getPt(this.ballCenter, this.provider.threshold2, r);
        this.p2 = this.getPt(this.ballCenter, this.provider.threshold2, r + KNOB_LENGTH);
        ctx.lineWidth = (1 / 150) * CTRL_SIZE;
        ctx.beginPath();
        ctx.moveTo(s1.x, s1.y);
        ctx.lineTo(this.p1.x, this.p1.y);
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(this.p1.x, this.p1.y, KNOB_RADIUS, 0, Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_6__["toRad"])(360));
        ctx.fill();
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(s2.x, s2.y);
        ctx.lineTo(this.p2.x, this.p2.y);
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(this.p2.x, this.p2.y, KNOB_RADIUS, 0, Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_6__["toRad"])(360));
        ctx.fill();
        ctx.stroke();
    };
    ValuePlanesCtrl.prototype.getPt = function (center, threshold, radius) {
        var oy = radius * Math.sin(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_6__["toRad"])(90 - threshold));
        var ox = radius * Math.cos(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_6__["toRad"])(90 - threshold));
        return new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_2__["Vec2"]([center.x + ox, center.y - oy]);
    };
    return ValuePlanesCtrl;
}());



/***/ }),

/***/ "./src/Apps/Viewer/ValuePlanesPanel.ts":
/*!*********************************************!*\
  !*** ./src/Apps/Viewer/ValuePlanesPanel.ts ***!
  \*********************************************/
/*! exports provided: ValuePlanesPanel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ValuePlanesPanel", function() { return ValuePlanesPanel; });
/* harmony import */ var _GUI_Panel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../GUI/Panel */ "./src/GUI/Panel.ts");
/* harmony import */ var _ValuePlanes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ValuePlanes */ "./src/Apps/Viewer/ValuePlanes.ts");
/* harmony import */ var _GUI_Slider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../GUI/Slider */ "./src/GUI/Slider.ts");
/* harmony import */ var _ValuePlanesCtrl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ValuePlanesCtrl */ "./src/Apps/Viewer/ValuePlanesCtrl.ts");
/* harmony import */ var _ValueRange__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ValueRange */ "./src/Apps/Viewer/ValueRange.ts");
/* harmony import */ var _gl_glColor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../gl/glColor */ "./src/gl/glColor.ts");
/* harmony import */ var _Renderer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Renderer */ "./src/Apps/Viewer/Renderer.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();







var ValuePlanesPanel = /** @class */ (function (_super) {
    __extends(ValuePlanesPanel, _super);
    function ValuePlanesPanel(parent, id, valueRange) {
        var _this = _super.call(this, parent, id) || this;
        _this.valuePlanes = new _ValuePlanes__WEBPACK_IMPORTED_MODULE_1__["ValuePlanes"](valueRange);
        var div = document.createElement('div');
        div.className = 'SlidersDiv';
        _this.div.appendChild(div);
        _this.createCtrlsElements(div);
        _this.valuePlanesCtrl = new _ValuePlanesCtrl__WEBPACK_IMPORTED_MODULE_3__["ValuePlanesCtrl"](_this.div, _this.valuePlanes, function (value) {
            _this.updateSliders();
            if (_this.onChange) {
                _this.onChange(_this);
            }
        }, function (value) {
            _this.updateSliders();
            if (_this.onChange) {
                _this.onChange(_this);
            }
        });
        return _this;
    }
    ValuePlanesPanel.prototype.createCtrlsElements = function (parent) {
        var _this = this;
        this.highlightSlider = new _GUI_Slider__WEBPACK_IMPORTED_MODULE_2__["Slider"](parent, {
            id: 'Highlight',
            label: 'Highlight',
            min: 0,
            max: 1,
            value: this.valuePlanes.highlight,
            colors: [_gl_glColor__WEBPACK_IMPORTED_MODULE_5__["glColor3"].modelBlack.toHtmlColor(), _gl_glColor__WEBPACK_IMPORTED_MODULE_5__["glColor3"].modelWhite.toHtmlColor()],
            oninput: function () {
                _this.valuePlanes.highlight = _this.highlightSlider.value;
                _this.updateSliders();
                _this.valuePlanesCtrl.draw();
                if (_this.onChange) {
                    _this.onChange(_this);
                }
            },
            onGetText: function (slider) { return (100 * slider.value).toFixed(0) + '%'; }
        });
        this.lightLightSlider = new _GUI_Slider__WEBPACK_IMPORTED_MODULE_2__["Slider"](parent, {
            id: 'LightLight',
            label: 'Light Light',
            min: 0,
            max: 1,
            value: this.valuePlanes.lightLight,
            colors: [_gl_glColor__WEBPACK_IMPORTED_MODULE_5__["glColor3"].modelBlack.toHtmlColor(), _gl_glColor__WEBPACK_IMPORTED_MODULE_5__["glColor3"].modelWhite.toHtmlColor()],
            onGetText: function (slider) { return (100 * slider.value).toFixed(0) + '%'; }
        });
        this.lightLightSlider.range.disabled = true;
        this.midLightSlider = new _GUI_Slider__WEBPACK_IMPORTED_MODULE_2__["Slider"](parent, {
            id: 'MidLight',
            label: 'Mid Light',
            min: 0,
            max: 1,
            value: this.valuePlanes.midLight,
            colors: [_gl_glColor__WEBPACK_IMPORTED_MODULE_5__["glColor3"].modelBlack.toHtmlColor(), _gl_glColor__WEBPACK_IMPORTED_MODULE_5__["glColor3"].modelWhite.toHtmlColor()],
            onGetText: function (slider) { return (100 * slider.value).toFixed(0) + '%'; }
        });
        this.midLightSlider.range.disabled = true;
        this.darkLightSlider = new _GUI_Slider__WEBPACK_IMPORTED_MODULE_2__["Slider"](parent, {
            id: 'DarkLight',
            label: 'Dark Light',
            min: 0,
            max: 1,
            value: this.valuePlanes.darkLight,
            colors: [_gl_glColor__WEBPACK_IMPORTED_MODULE_5__["glColor3"].modelBlack.toHtmlColor(), _gl_glColor__WEBPACK_IMPORTED_MODULE_5__["glColor3"].modelWhite.toHtmlColor()],
            onGetText: function (slider) { return (100 * slider.value).toFixed(0) + '%'; }
        });
        this.darkLightSlider.range.disabled = true;
        this.shadowSlider = new _GUI_Slider__WEBPACK_IMPORTED_MODULE_2__["Slider"](parent, {
            id: 'Shadow',
            label: 'Shadow',
            min: 0,
            max: 1,
            value: this.valuePlanes.shadow,
            colors: [_gl_glColor__WEBPACK_IMPORTED_MODULE_5__["glColor3"].modelBlack.toHtmlColor(), _gl_glColor__WEBPACK_IMPORTED_MODULE_5__["glColor3"].modelWhite.toHtmlColor()],
            oninput: function () {
                _this.valuePlanes.shadow = _this.shadowSlider.value;
                _this.updateSliders();
                _this.valuePlanesCtrl.draw();
                if (_this.onChange) {
                    _this.onChange(_this);
                }
            },
            onGetText: function (slider) { return (100 * slider.value).toFixed(0) + '%'; }
        });
    };
    ValuePlanesPanel.prototype.updateSliders = function () {
        this.highlightSlider.value = this.valuePlanes.highlight;
        this.lightLightSlider.value = this.valuePlanes.lightLight;
        this.midLightSlider.value = this.valuePlanes.midLight;
        this.darkLightSlider.value = this.valuePlanes.darkLight;
        this.shadowSlider.value = this.valuePlanes.shadow;
    };
    ValuePlanesPanel.prototype.toRenderer = function (renderer) {
        renderer.options.contours = [
            new _Renderer__WEBPACK_IMPORTED_MODULE_6__["Contour"](this.valuePlanes.lightLight, this.valuePlanes.threshold1),
            new _Renderer__WEBPACK_IMPORTED_MODULE_6__["Contour"](this.valuePlanes.midLight, this.valuePlanes.threshold2),
            new _Renderer__WEBPACK_IMPORTED_MODULE_6__["Contour"](this.valuePlanes.darkLight, 90)
        ];
        renderer.options.valueRange = new _ValueRange__WEBPACK_IMPORTED_MODULE_4__["ValueRange"](this.valuePlanes.highlight, this.valuePlanes.shadow, this.valuePlanes.highlight - this.valuePlanes.lightLight);
    };
    return ValuePlanesPanel;
}(_GUI_Panel__WEBPACK_IMPORTED_MODULE_0__["Panel"]));



/***/ }),

/***/ "./src/Apps/Viewer/ValueRange.ts":
/*!***************************************!*\
  !*** ./src/Apps/Viewer/ValueRange.ts ***!
  \***************************************/
/*! exports provided: ValueRange */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ValueRange", function() { return ValueRange; });
/**
 * Keeps track of a value range - highlight to shadow color. A minimum
 * differential is kept between the two when one is changed
 */
var ValueRange = /** @class */ (function () {
    function ValueRange(maxIntensity, ambientIntensity, specularIntensity) {
        this._maxIntensity = maxIntensity;
        this._ambientIntensity = ambientIntensity;
        this._specularIntensity = specularIntensity;
    }
    Object.defineProperty(ValueRange, "Standard", {
        get: function () {
            return new ValueRange(1.0, 0.2, 0.1);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ValueRange, "EmphasizeHighlights", {
        get: function () {
            return new ValueRange(1.0, 0.2, 0.75);
        },
        enumerable: false,
        configurable: true
    });
    ValueRange.prototype.clone = function () {
        return new ValueRange(this.maxIntensity, this.ambientIntensity, this.specularIntensity);
    };
    Object.defineProperty(ValueRange.prototype, "specularIntensity", {
        get: function () {
            return this._specularIntensity;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ValueRange.prototype, "maxIntensity", {
        get: function () {
            return this._maxIntensity;
        },
        set: function (val) {
            this._maxIntensity = Math.min(Math.max(val, this._specularIntensity), 1.0);
            this._ambientIntensity = Math.min(this._ambientIntensity, this._maxIntensity - this._specularIntensity);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ValueRange.prototype, "ambientIntensity", {
        get: function () {
            return this._ambientIntensity;
        },
        set: function (val) {
            this.shadow = val;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ValueRange.prototype, "shadow", {
        get: function () {
            return this._ambientIntensity;
        },
        set: function (val) {
            this._ambientIntensity = Math.max(Math.min(val, 1 - this._specularIntensity), 0);
            this._maxIntensity = Math.max(this._maxIntensity, this._ambientIntensity + this._specularIntensity);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ValueRange.prototype, "diffuseIntensity", {
        get: function () {
            return this.maxIntensity - this._ambientIntensity - this._specularIntensity;
        },
        enumerable: false,
        configurable: true
    });
    return ValueRange;
}());



/***/ }),

/***/ "./src/Apps/Viewer/ViewerApp.ts":
/*!**************************************!*\
  !*** ./src/Apps/Viewer/ViewerApp.ts ***!
  \**************************************/
/*! exports provided: ViewerApp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewerApp", function() { return ViewerApp; });
/* harmony import */ var _Renderer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Renderer */ "./src/Apps/Viewer/Renderer.ts");
/* harmony import */ var _gl_glColor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../gl/glColor */ "./src/gl/glColor.ts");
/* harmony import */ var _GUI_OverlayCanvas__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../GUI/OverlayCanvas */ "./src/GUI/OverlayCanvas.ts");
/* harmony import */ var _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../GUI/PointerEventHandler */ "./src/GUI/PointerEventHandler.ts");
/* harmony import */ var _PerspectivePanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PerspectivePanel */ "./src/Apps/Viewer/PerspectivePanel.ts");
/* harmony import */ var _ValuePlanesPanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ValuePlanesPanel */ "./src/Apps/Viewer/ValuePlanesPanel.ts");
/* harmony import */ var _Util_hsvColor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../Util/hsvColor */ "./src/Util/hsvColor.ts");
/* harmony import */ var _Util_FPS__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../Util/FPS */ "./src/Util/FPS.ts");
/* harmony import */ var _ModelLoader__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ModelLoader */ "./src/Apps/Viewer/ModelLoader.ts");
/* harmony import */ var _Util_htmlColor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../Util/htmlColor */ "./src/Util/htmlColor.ts");
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../Util3D/Vec */ "./src/Util3D/Vec.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _Util3D_TriangleObj__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../Util3D/TriangleObj */ "./src/Util3D/TriangleObj.ts");
/* harmony import */ var _ValueRange__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./ValueRange */ "./src/Apps/Viewer/ValueRange.ts");
/* harmony import */ var _ModelsMenu__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./ModelsMenu */ "./src/Apps/Viewer/ModelsMenu.ts");
/* harmony import */ var _Util3D_TriangleObjBuilder__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../Util3D/TriangleObjBuilder */ "./src/Util3D/TriangleObjBuilder.ts");
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! file-saver */ "./node_modules/file-saver/dist/FileSaver.min.js");
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_16__);

















var PointerMode;
(function (PointerMode) {
    PointerMode[PointerMode["View"] = 0] = "View";
    PointerMode[PointerMode["Light"] = 1] = "Light";
})(PointerMode || (PointerMode = {}));
var COLOR_CONTOURS = [
    new _Renderer__WEBPACK_IMPORTED_MODULE_0__["Contour"](new _gl_glColor__WEBPACK_IMPORTED_MODULE_1__["glColor3"]([1.00, 0.20, 0.20]), 10),
    new _Renderer__WEBPACK_IMPORTED_MODULE_0__["Contour"](new _gl_glColor__WEBPACK_IMPORTED_MODULE_1__["glColor3"]([1.00, 0.55, 0.25]), 20),
    new _Renderer__WEBPACK_IMPORTED_MODULE_0__["Contour"](new _gl_glColor__WEBPACK_IMPORTED_MODULE_1__["glColor3"]([1.00, 0.81, 0.25]), 30),
    new _Renderer__WEBPACK_IMPORTED_MODULE_0__["Contour"](new _gl_glColor__WEBPACK_IMPORTED_MODULE_1__["glColor3"]([1.00, 1.00, 0.00]), 40),
    new _Renderer__WEBPACK_IMPORTED_MODULE_0__["Contour"](new _gl_glColor__WEBPACK_IMPORTED_MODULE_1__["glColor3"]([0.30, 1.00, 0.10]), 50),
    new _Renderer__WEBPACK_IMPORTED_MODULE_0__["Contour"](new _gl_glColor__WEBPACK_IMPORTED_MODULE_1__["glColor3"]([0.25, 0.90, 0.90]), 60),
    new _Renderer__WEBPACK_IMPORTED_MODULE_0__["Contour"](new _gl_glColor__WEBPACK_IMPORTED_MODULE_1__["glColor3"]([0.50, 0.50, 1.00]), 70),
    new _Renderer__WEBPACK_IMPORTED_MODULE_0__["Contour"](new _gl_glColor__WEBPACK_IMPORTED_MODULE_1__["glColor3"]([0.20, 0.20, 1.00]), 80),
    new _Renderer__WEBPACK_IMPORTED_MODULE_0__["Contour"](new _gl_glColor__WEBPACK_IMPORTED_MODULE_1__["glColor3"]([0.30, 0.11, 0.40]), 90), // purple
];
var ViewerApp = /** @class */ (function () {
    function ViewerApp(file) {
        this.gl = null;
        this.pointerMode = PointerMode.View;
        this.rotateLightWithObject = false;
        this.dirty = true;
        this.animate = false;
        this.fps = new _Util_FPS__WEBPACK_IMPORTED_MODULE_7__["FPS"]();
        this.loader = new _ModelLoader__WEBPACK_IMPORTED_MODULE_8__["ModelLoader"]();
        if (!file) {
            var num = Math.round(0.5 + 16 * Math.random());
            file = 'Pose_0' + num + '.blob';
        }
        this.initialFile = file;
    }
    ViewerApp.prototype.create = function (div) {
        div.id = 'ViewerApp';
        var viewContainer = document.createElement('div');
        viewContainer.id = 'ViewContainer';
        viewContainer.className = 'Container';
        div.appendChild(viewContainer);
        this.createViewElements(viewContainer);
        this.createPerspectivePanel(div);
        this.createValuePlanesPanel(div);
        this.updateSize();
        this.loadModel(this.initialFile);
    };
    ViewerApp.prototype.createViewElements = function (parent) {
        var _this = this;
        var canvas = document.createElement('canvas');
        canvas.id = 'MainCanvas';
        parent.appendChild(canvas);
        var style = getComputedStyle(canvas);
        this.baseBackgroundColor = _Util_hsvColor__WEBPACK_IMPORTED_MODULE_6__["hsvColor"].fromHtmlColor(_Util_htmlColor__WEBPACK_IMPORTED_MODULE_9__["htmlColor"].fromCss(style.backgroundColor));
        this.overlay = new _GUI_OverlayCanvas__WEBPACK_IMPORTED_MODULE_2__["OverlayCanvas"](parent);
        // don't try to make the canvas transparent to the underlying html. This
        // seems to limit the alpha values we can use in our scene.
        var context = canvas.getContext('webgl', { alpha: false });
        if (!context) {
            // TODO display a message about not being able to create a WebGL context
            console.log('Unable to get WebGL context');
        }
        this.gl = context;
        this.renderer = new _Renderer__WEBPACK_IMPORTED_MODULE_0__["Renderer"](this.gl);
        this.renderer.showMiniView = false;
        this.handler = new _GUI_PointerEventHandler__WEBPACK_IMPORTED_MODULE_3__["PointerEventHandler"](canvas);
        this.handler.onDrag = function (pos, delta) { return _this.onDrag(pos, delta); };
        this.handler.onDown = function () {
            _this.animate = false;
            _this.overlay.clear();
        };
        this.handler.onClick = function (pos) { return _this.onClick(pos); };
        this.handler.onDblClick = function () {
            _this.animate = true;
            _this.fps = new _Util_FPS__WEBPACK_IMPORTED_MODULE_7__["FPS"]();
            return false;
        };
        this.handler.onScale = function (scale, change) { return _this.onScale(scale, change); };
        this.handler.onRotate = function (angle, delta) { return _this.onRotate(angle, delta); };
        this.handler.onTranslate = function (delta) { return _this.onTranslate(delta); };
        document.onkeydown = function (event) {
            var angle = 90;
            if (event.ctrlKey) {
                angle = 1;
            }
            switch (event.keyCode) {
                case 37: // left
                    _this.rotateObjects(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_11__["toRad"])(angle), 0);
                    _this.dirty = true;
                    break;
                case 38: // up
                    _this.rotateObjects(0, Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_11__["toRad"])(angle));
                    _this.dirty = true;
                    break;
                case 39: // right
                    _this.rotateObjects(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_11__["toRad"])(-angle), 0);
                    _this.dirty = true;
                    break;
                case 40: // down
                    _this.rotateObjects(0, Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_11__["toRad"])(-angle));
                    _this.dirty = true;
                    break;
            }
        };
        document.onkeypress = function (event) {
            switch (event.key) {
                case 'a':
                    _this.renderer.obj.applyXForm();
                    _this.dirty = true;
                    break;
                case 'd':
                    _this.renderer.showShadowMap = !_this.renderer.showShadowMap;
                    _this.dirty = true;
                    break;
                case 'g':
                    _this.renderer.showGrid = !_this.renderer.showGrid;
                    _this.dirty = true;
                    break;
                case 'h':
                    _this.renderer.options.showHighlights = !_this.renderer.options.showHighlights;
                    _this.dirty = true;
                    break;
                case 'i':
                    alert(_this.renderer.tObj.name + '\n' +
                        'Num Triangles: ' + _this.renderer.tObj.numTriangles.toLocaleString() + '\n' +
                        'Num Vertices: ' + _this.renderer.tObj.numVertices.toLocaleString() + '\n');
                    break;
                case 'l':
                    if (_this.renderer.options.lightType === _Renderer__WEBPACK_IMPORTED_MODULE_0__["LightType"].Point) {
                        _this.renderer.options.lightType = _Renderer__WEBPACK_IMPORTED_MODULE_0__["LightType"].Directional;
                    }
                    else {
                        _this.renderer.options.lightType = _Renderer__WEBPACK_IMPORTED_MODULE_0__["LightType"].Point;
                    }
                    _this.dirty = true;
                    break;
                case 'o':
                    _this.optimize(_Util3D_TriangleObj__WEBPACK_IMPORTED_MODULE_12__["NormalType"].Smooth);
                    break;
                case 'p':
                    _this.optimize(_Util3D_TriangleObj__WEBPACK_IMPORTED_MODULE_12__["NormalType"].Flat);
                    break;
                case 'r':
                    _this.renderer.tObj.reverse();
                    _this.renderer.obj.uploadTriangles();
                    _this.dirty = true;
                    break;
                case 's':
                    _this.save();
                    break;
                case 't':
                    _this.dirty = true;
                    break;
                case 'v':
                    _this.renderer.options.camera.useOrthographic = !_this.renderer.options.camera.useOrthographic;
                    _this.dirty = true;
                    break;
            }
        };
        window.addEventListener('resize', function () {
            _this.updateSize();
            _this.dirty = true;
        });
    };
    ViewerApp.prototype.createPerspectivePanel = function (div) {
        var _this = this;
        this.perspectivePanel = new _PerspectivePanel__WEBPACK_IMPORTED_MODULE_4__["PerspectivePanel"](div, 'PerspectivePanel', this.renderer.options.camera);
        this.perspectivePanel.onShow = function (panel) {
            _this.valuePlanesPanel.visible = false;
            _this.updateSize();
            _this.dirty = true;
        };
        this.perspectivePanel.onHide = function () {
            _this.updateSize();
            _this.pointerMode = PointerMode.View;
            _this.dirty = true;
        };
        this.perspectivePanel.onChange = function () {
            _this.dirty = true;
        };
    };
    ViewerApp.prototype.createValuePlanesPanel = function (div) {
        var _this = this;
        this.valuePlanesPanel = new _ValuePlanesPanel__WEBPACK_IMPORTED_MODULE_5__["ValuePlanesPanel"](div, 'ValuePlanesPanel', this.renderer.options.valueRange);
        this.valuePlanesPanel.onShow = function (panel) {
            _this.perspectivePanel.visible = false;
            _this.updateSize();
            _this.renderer.options.renderMode = _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].ContourPlanes;
            _this.valuePlanesPanel.toRenderer(_this.renderer);
            _this.dirty = true;
        };
        this.valuePlanesPanel.onHide = function () {
            _this.updateSize();
            _this.renderer.options.renderMode = _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].Normal;
            _this.renderer.options.valueRange = _ValueRange__WEBPACK_IMPORTED_MODULE_13__["ValueRange"].Standard;
            _this.dirty = true;
        };
        this.valuePlanesPanel.onChange = function () {
            _this.valuePlanesPanel.toRenderer(_this.renderer);
            _this.dirty = true;
        };
    };
    ViewerApp.prototype.buildMenu = function (menubar) {
        var _this = this;
        Object(_ModelsMenu__WEBPACK_IMPORTED_MODULE_14__["createModelsMenu"])(menubar, function (file) { return _this.loadModel(file); });
        var subMenu;
        subMenu = menubar.addSubMenu('Tools', 'Tools');
        var contoursSubMenu = subMenu.addSubMenu('Color Contours');
        contoursSubMenu.addRadiobutton({
            label: 'None',
            group: 'ContourGroup',
            checked: function () {
                if (_this.renderer.options.renderMode === _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].ContourPlanes ||
                    _this.renderer.options.renderMode === _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].ContourValues) {
                    return false;
                }
                else {
                    return true;
                }
            },
            oncheck: function (button) {
                _this.valuePlanesPanel.visible = false;
                _this.renderer.options.renderMode = _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].Normal;
                _this.dirty = true;
            }
        });
        contoursSubMenu.addRadiobutton({
            label: 'Planes',
            group: 'ContourGroup',
            checked: function () {
                return (_this.renderer.options.renderMode === _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].ContourPlanes && _this.valuePlanesPanel.visible === false);
            },
            oncheck: function (button) {
                _this.valuePlanesPanel.visible = false;
                _this.renderer.options.contours = COLOR_CONTOURS;
                _this.renderer.options.renderMode = button.checked ? _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].ContourPlanes : _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].Normal;
                _this.dirty = true;
            }
        });
        contoursSubMenu.addRadiobutton({
            label: 'Values',
            group: 'ContourGroup',
            checked: function () {
                return (_this.renderer.options.renderMode === _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].ContourValues && _this.valuePlanesPanel.visible === false);
            },
            oncheck: function (button) {
                _this.valuePlanesPanel.visible = false;
                _this.renderer.options.contours = COLOR_CONTOURS;
                _this.renderer.options.renderMode = button.checked ? _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].ContourValues : _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].Normal;
                _this.dirty = true;
            }
        });
        var highlightSubMenu = subMenu.addSubMenu('Highlights');
        highlightSubMenu.addRadiobutton({
            label: 'Show',
            group: 'HighlightsGroup',
            checked: function () { return _this.renderer.options.showHighlights && _this.renderer.renderModeCanToggleHighlights(); },
            oncheck: function (button) {
                _this.renderer.options.showHighlights = true;
                if (_this.renderer.options.renderMode === _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].EmphasizeHighlights) {
                    _this.renderer.options.renderMode = _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].Normal;
                }
                _this.dirty = true;
            }
        });
        highlightSubMenu.addRadiobutton({
            label: 'Hide',
            group: 'HighlightsGroup',
            checked: function () { return !_this.renderer.options.showHighlights && _this.renderer.renderModeCanToggleHighlights(); },
            oncheck: function (button) {
                _this.renderer.options.showHighlights = false;
                if (_this.renderer.options.renderMode === _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].EmphasizeHighlights) {
                    _this.renderer.options.renderMode = _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].Normal;
                }
                _this.dirty = true;
            }
        });
        highlightSubMenu.addRadiobutton({
            label: 'Emphasize',
            group: 'HighlightsGroup',
            checked: function () { return _this.renderer.options.renderMode === _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].EmphasizeHighlights; },
            oncheck: function (button) {
                _this.renderer.options.showHighlights = true;
                _this.renderer.options.renderMode = _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].EmphasizeHighlights;
                _this.dirty = true;
            }
        });
        highlightSubMenu.addSlider({
            label: 'Shininess',
            min: 1,
            max: 50,
            value: this.renderer.options.shininess,
            oninput: function (slider) {
                _this.renderer.options.shininess = slider.value;
                _this.dirty = true;
            },
        });
        var shadowsSubMenu = subMenu.addSubMenu('Shadows');
        shadowsSubMenu.addRadiobutton({
            label: 'Normal',
            group: 'ShadowGroup',
            checked: function () { return _this.renderer.options.renderMode == _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].Normal; },
            oncheck: function (button) {
                _this.renderer.options.renderMode = _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].Normal;
                _this.dirty = true;
            }
        });
        shadowsSubMenu.addRadiobutton({
            label: 'Highlight Terminator',
            group: 'ShadowGroup',
            checked: function () { return _this.renderer.options.renderMode == _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].HighlightTerminator; },
            oncheck: function (button) {
                _this.renderer.options.renderMode = _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].HighlightTerminator;
                _this.dirty = true;
            }
        });
        shadowsSubMenu.addRadiobutton({
            label: 'Highlight Shadow',
            group: 'ShadowGroup',
            checked: function () { return _this.renderer.options.renderMode == _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].HighlightShadow; },
            oncheck: function (button) {
                _this.renderer.options.renderMode = _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].HighlightShadow;
                _this.dirty = true;
            }
        });
        shadowsSubMenu.addRadiobutton({
            label: 'Light and Shadow Only',
            group: 'ShadowGroup',
            checked: function () { return _this.renderer.options.renderMode == _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].LightAndShadow; },
            oncheck: function (button) {
                _this.renderer.options.renderMode = _Renderer__WEBPACK_IMPORTED_MODULE_0__["RenderMode"].LightAndShadow;
                _this.dirty = true;
            }
        });
        subMenu.addItem('Perspective...', function () {
            _this.perspectivePanel.visible = true;
        });
        subMenu.addItem('Value Planes...', function () {
            _this.valuePlanesPanel.visible = true;
        });
        var lightSubMenu = subMenu.addSubMenu('Light');
        lightSubMenu.addRadiobutton({
            label: 'Directional Light',
            group: 'LightTypeGroup',
            checked: function () { return _this.renderer.options.lightType === _Renderer__WEBPACK_IMPORTED_MODULE_0__["LightType"].Directional; },
            oncheck: function (button) {
                _this.renderer.options.lightType = _Renderer__WEBPACK_IMPORTED_MODULE_0__["LightType"].Directional;
                _this.dirty = true;
            }
        });
        lightSubMenu.addRadiobutton({
            label: 'Point Light',
            group: 'LightTypeGroup',
            checked: function () { return _this.renderer.options.lightType === _Renderer__WEBPACK_IMPORTED_MODULE_0__["LightType"].Point; },
            oncheck: function (button) {
                _this.renderer.options.lightType = _Renderer__WEBPACK_IMPORTED_MODULE_0__["LightType"].Point;
                _this.dirty = true;
            }
        });
        lightSubMenu.addSlider({
            label: 'Falloff',
            min: 0,
            max: 0.9,
            value: this.renderer.options.falloff,
            oninput: function (slider) {
                _this.renderer.options.falloff = slider.value;
                _this.dirty = true;
            },
        });
        lightSubMenu.addSlider({
            label: 'Intensity',
            min: 0.5,
            max: 1.5,
            value: this.renderer.options.lightIntensity,
            oninput: function (slider) {
                _this.renderer.options.lightIntensity = slider.value;
                _this.dirty = true;
            },
        });
        lightSubMenu.addSlider({
            label: 'Ambient Intensity',
            min: 0.0,
            max: 0.4,
            value: this.renderer.options.valueRange.ambientIntensity,
            oninput: function (slider) {
                _this.renderer.options.valueRange.ambientIntensity = slider.value;
                var range = 0.6;
                var baseVal = _this.baseBackgroundColor.v;
                var newVal = (baseVal - range / 2) + range * slider.valueAsPercent;
                var newColor = new _Util_hsvColor__WEBPACK_IMPORTED_MODULE_6__["hsvColor"]([_this.baseBackgroundColor.h, _this.baseBackgroundColor.s, newVal]);
                _this.gl.canvas.style.backgroundColor = newColor.toHtmlColor().toCss();
                _this.dirty = true;
            },
        });
        subMenu = menubar.addSubMenu('Options', 'Options');
        var resetSubMenu = subMenu.addSubMenu('Reset');
        resetSubMenu.addItem('All', function () {
            _this.renderer.reset(_Renderer__WEBPACK_IMPORTED_MODULE_0__["Reset"].All);
            _this.dirty = true;
        });
        resetSubMenu.addItem('Lights', function () {
            _this.renderer.reset(_Renderer__WEBPACK_IMPORTED_MODULE_0__["Reset"].Lights);
            _this.dirty = true;
        });
        resetSubMenu.addItem('View', function () {
            _this.renderer.reset(_Renderer__WEBPACK_IMPORTED_MODULE_0__["Reset"].View);
            _this.dirty = true;
        });
        resetSubMenu.addItem('Rendering', function () {
            _this.renderer.reset(_Renderer__WEBPACK_IMPORTED_MODULE_0__["Reset"].Rendering);
            _this.dirty = true;
        });
        var floorSubMenu = subMenu.addSubMenu('Floor');
        floorSubMenu.addCheckbox({
            label: 'Show Floor',
            checked: function () { return _this.renderer.showFloor; },
            oncheck: function (checkbox) {
                _this.renderer.showFloor = checkbox.checked;
                _this.dirty = true;
            }
        });
        floorSubMenu.addCheckbox({
            label: 'Show Grid',
            checked: function () { return _this.renderer.showGrid; },
            oncheck: function (checkbox) {
                _this.renderer.showGrid = checkbox.checked;
                _this.dirty = true;
            }
        });
        subMenu.addItem('Reverse Object', function () {
            _this.renderer.tObj.reverse();
            _this.renderer.obj.uploadTriangles();
            _this.dirty = true;
        });
        var rotateSubMenu = subMenu.addSubMenu('Rotation');
        rotateSubMenu.addCheckbox({
            label: 'Keep the light pointing at the same spot on the model',
            checked: function () { return _this.rotateLightWithObject; },
            oncheck: function (checkbox) {
                _this.rotateLightWithObject = checkbox.checked;
            }
        });
        rotateSubMenu.addCheckbox({
            label: 'Rotate model independent of the floor',
            checked: function () { return _this.renderer.lockFloor; },
            oncheck: function (checkbox) {
                _this.renderer.lockFloor = checkbox.checked;
            }
        });
    };
    ViewerApp.prototype.optimize = function (normalType) {
        var obj = this.renderer.obj;
        var oldNumVertices = obj.tObj.numVertices;
        obj.optimize(normalType);
        var newNumVertices = obj.tObj.numVertices;
        //let msg = 'Optimized .OBJ content copied to clipboard\n\n';
        var msg = 'Optimized .OBJ content\n\n';
        msg += 'Num Triangles: ' + obj.tObj.numTriangles + '\n';
        msg += 'Num Vertices: ' + oldNumVertices + ' to ' + newNumVertices + ', ' + (100 * newNumVertices / oldNumVertices).toFixed() + ' %\n';
        alert(msg);
        //let str = obj.tObj.toObjString(6);
        //navigator.clipboard.writeText(str).then(() => { alert(msg) });
        this.dirty = true;
    };
    ViewerApp.prototype.updateSize = function () {
        var gl = this.gl;
        var width = window.innerWidth;
        var height = window.innerHeight;
        var menubarHeight = document.getElementById('Menubar').clientHeight;
        var panelHeight = 0;
        if (this.perspectivePanel.visible) {
            panelHeight = this.perspectivePanel.div.clientHeight;
        }
        else if (this.valuePlanesPanel.visible) {
            panelHeight = this.valuePlanesPanel.div.clientHeight;
        }
        gl.canvas.width = width;
        gl.canvas.height = height - menubarHeight - panelHeight;
        this.overlay.width = gl.canvas.width;
        this.overlay.height = gl.canvas.height;
    };
    ViewerApp.prototype.loadModel = function (file) {
        var _this = this;
        var lc = file.toLowerCase();
        if (lc.endsWith('.obj') || lc.endsWith('.blob')) {
            var statusFunc = function (status) {
                _this.overlay.clear();
                _this.overlay.fillText(status);
            };
            this.loader.loadModelFile(file, statusFunc)
                .then(function (tObj) {
                _this.perspectivePanel.visible = false;
                _this.valuePlanesPanel.visible = false;
                _this.renderer.setModel(tObj);
                _this.perspectivePanel.setModel(tObj);
                _this.loader.orient(_this.renderer.obj);
                if (file.startsWith('Head') || file.startsWith('Teapot') || file.startsWith('Male_02')) {
                    _this.renderer.options.useCulling = false;
                }
                _this.animate = false;
                _this.dirty = true;
                _this.pointerMode = PointerMode.View;
                if (!_this.animationFrame) {
                    _this.animationFrame = requestAnimationFrame(function () { return _this.tick(); });
                }
                /*
                let box = BoundingBox.infinite;
                box.max.x = 62.1;
                this.trim(tObj, box);
 
                this.loader.loadModelFile('SubTool3.blob', statusFunc).then((tObj2) => {
                   tObj.combine(tObj2);
                   return tObj;
                }).then(() => {
                   this.renderer.setModel(tObj);
 
                   this.dirty = true;
                   requestAnimationFrame(() => this.tick());
                });
                */
            });
        }
        else if (lc === 'sphere') {
            var tObj = new _Util3D_TriangleObjBuilder__WEBPACK_IMPORTED_MODULE_15__["TriangleObjBuilder"]();
            tObj.addSphere(100, 1, new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_10__["Vec3"]([0, 0, 0]));
            tObj.optimize(_Util3D_TriangleObj__WEBPACK_IMPORTED_MODULE_12__["NormalType"].Smooth);
            this.renderer.setModel(tObj);
            this.perspectivePanel.setModel(tObj);
            this.animate = false;
            this.dirty = true;
            this.pointerMode = PointerMode.View;
            if (!this.animationFrame) {
                this.animationFrame = requestAnimationFrame(function () { return _this.tick(); });
            }
        }
        else {
            // TODO multi line error messages not supported
            this.overlay.clear();
            this.overlay.fillText('Unknown Model:' + file);
        }
    };
    ViewerApp.prototype.toggleMode = function () {
        switch (this.pointerMode) {
            case PointerMode.View:
                this.pointerMode = PointerMode.Light;
                this.renderer.ballColor = this.renderer.yellow;
                break;
            case PointerMode.Light:
                this.pointerMode = PointerMode.View;
                this.renderer.ballColor = _gl_glColor__WEBPACK_IMPORTED_MODULE_1__["glColor3"].modelWhite;
                break;
        }
        this.dirty = true;
    };
    ViewerApp.prototype.rotateLight = function (xRad, yRad) {
        this.renderer.rotateLight(xRad, yRad);
        this.dirty = true;
    };
    ViewerApp.prototype.rotateObjects = function (xRad, yRad) {
        // get the light vector with model transformation undone
        var vec = _Util3D_Vec__WEBPACK_IMPORTED_MODULE_10__["Vec4"].fromVec3(this.renderer.options.lightPos, 1);
        vec = this.renderer.obj.model.inverse().multV(vec);
        if (this.renderer.lockFloor) {
            // rotate in all directions if we're just rotating the object in space
            this.renderer.rotX(yRad);
            this.renderer.rotY(xRad);
            if (this.rotateLightWithObject) {
                // apply the changes to the light
                vec = this.renderer.obj.model.multV(vec);
                this.renderer.options.lightPos = vec.xyz;
            }
        }
        else {
            // if the floor moves with the object, then up-down movement tilts the
            // whole scene while left-right movement only spins the model
            this.renderer.rotX(yRad);
            if (this.rotateLightWithObject) {
                this.renderer.preRotY(xRad);
                vec = this.renderer.obj.model.multV(vec);
            }
            else {
                vec = this.renderer.obj.model.multV(vec);
                this.renderer.preRotY(xRad);
            }
            // apply the changes to the light
            this.renderer.options.lightPos = vec.xyz;
        }
    };
    ViewerApp.prototype.onDrag = function (pos, delta) {
        this.dirty = true;
        if (this.pointerMode === PointerMode.View) {
            this.rotateObjects(-delta.x * 0.01, -delta.y * 0.01);
        }
        else if (this.pointerMode === PointerMode.Light) {
            this.rotateLight(-delta.x * 0.01, -delta.y * 0.01);
        }
    };
    /**
     * Processes a click/touch event at the designated coordinates.
     *
     * @param x The x coordinate.
     * @param y The y coordinate.
     * @returns true if a hit on one of the views occurs.
     */
    ViewerApp.prototype.onClick = function (pos) {
        var canvasWidth = this.gl.canvas.width;
        var canvasHeight = this.gl.canvas.height;
        var clipSpace = this.renderer.options.camera.getClipSpace(this.gl);
        var miniWidth = this.renderer.miniSize * (2 / clipSpace.width) * canvasWidth;
        var miniHeight = this.renderer.miniSize * (2 / clipSpace.height) * canvasHeight;
        if (pos.x < miniWidth && pos.y < miniHeight) {
            this.toggleMode();
            return true;
        }
        // not handled
        return false;
    };
    ViewerApp.prototype.onScale = function (scale, change) {
        this.renderer.options.camera.zoom(change);
        this.dirty = true;
    };
    ViewerApp.prototype.onRotate = function (angle, delta) {
        // get the light vector with model transformation undone
        var vec = _Util3D_Vec__WEBPACK_IMPORTED_MODULE_10__["Vec4"].fromVec3(this.renderer.options.lightPos, 1);
        vec = this.renderer.obj.model.inverse().multV(vec);
        this.renderer.rotZ(delta);
        // apply the updated transform 
        if (this.rotateLightWithObject) {
            vec = this.renderer.obj.model.multV(vec);
            this.renderer.options.lightPos = vec.xyz;
        }
        this.dirty = true;
    };
    ViewerApp.prototype.onTranslate = function (delta) {
        // TODO how can this scaling be detected from javascript?
        var factor = 1;
        if (_Util_Globals__WEBPACK_IMPORTED_MODULE_11__["isMobile"]) {
            factor = 2;
        }
        var clipSpace = this.renderer.options.camera.getClipSpace(this.gl);
        this.renderer.options.camera.translate(new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_10__["Vec2"]([
            factor * clipSpace.width * delta.x / this.gl.canvas.width,
            factor * clipSpace.height * delta.y / this.gl.canvas.height
        ]));
        this.dirty = true;
    };
    ViewerApp.prototype.tick = function () {
        var _this = this;
        this.fps.tick();
        if (this.dirty) {
            this.renderer.render();
            if (this.perspectivePanel.visible) {
                // synchronize the rotation matrices
                this.perspectivePanel.render(this.renderer.obj.model.clone());
            }
            this.dirty = false;
        }
        if (this.animate) {
            if (this.loader.loading === false) {
                this.overlay.clear();
                this.overlay.fillText(this.fps.rate.toFixed() + ' fps ' + this.fps.ms.toFixed(1) + ' ms', _GUI_OverlayCanvas__WEBPACK_IMPORTED_MODULE_2__["TextLocation"].BottomLeft);
            }
            // get the light vector with model transformation undone
            var vec = _Util3D_Vec__WEBPACK_IMPORTED_MODULE_10__["Vec4"].fromVec3(this.renderer.options.lightPos, 1);
            vec = this.renderer.obj.model.inverse().multV(vec);
            // animate
            this.renderer.preRotY(Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_11__["toRad"])(-1));
            // apply the updated transform 
            if (this.rotateLightWithObject) {
                vec = this.renderer.obj.model.multV(vec);
                this.renderer.options.lightPos = vec.xyz;
            }
            this.dirty = true;
        }
        requestAnimationFrame(function () { return _this.tick(); });
    };
    ViewerApp.prototype.save = function () {
        var tObj = this.renderer.tObj;
        var name = tObj.name.split('.')[0] + '.blob';
        tObj.name = name;
        file_saver__WEBPACK_IMPORTED_MODULE_16___default()(tObj.toBlob(), name);
    };
    return ViewerApp;
}());



/***/ }),

/***/ "./src/Apps/Viewer/glObject.ts":
/*!*************************************!*\
  !*** ./src/Apps/Viewer/glObject.ts ***!
  \*************************************/
/*! exports provided: glObject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glObject", function() { return glObject; });
/* harmony import */ var _gl_glAttributeBuffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../gl/glAttributeBuffer */ "./src/gl/glAttributeBuffer.ts");
/* harmony import */ var _gl_glIndexBuffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../gl/glIndexBuffer */ "./src/gl/glIndexBuffer.ts");
/* harmony import */ var _Util3D_Mat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Util3D/Mat */ "./src/Util3D/Mat.ts");
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../Util3D/Vec */ "./src/Util3D/Vec.ts");
/* harmony import */ var _gl_glUniform__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../gl/glUniform */ "./src/gl/glUniform.ts");





var glObject = /** @class */ (function () {
    function glObject(glCtx, tObj, program) {
        // this matrix normals the object so that all object are centered
        // about the origin with diagonal length of 2 units
        this.normalize = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_2__["Mat4"].identity;
        // this is the standard "model" matrix
        this.model = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_2__["Mat4"].identity;
        this.gl = glCtx;
        var gl = this.gl;
        var ext = gl.getExtension('OES_element_index_uint');
        this.tObj = tObj;
        this.program = program;
        this.createBuffers();
        this.uploadTriangles();
    }
    Object.defineProperty(glObject.prototype, "name", {
        get: function () {
            return this.tObj.name;
        },
        enumerable: false,
        configurable: true
    });
    /*
    public getBoundingPts(): BoundingPts {
       //return this.tObj.getBoundingPts();
       let pts = this.tObj.getBoundingPts();
       let p = new Profiler();
       //let bp = pts.multM(this.normalize.multM(this.model));
       //let bp = pts.multM(this.model.multM(this.normalize));
       let bp = pts.multM(this.normalize).multM(this.model);
       //p.log('mult');
       return bp;
    }
    */
    glObject.prototype.getBoundingBox = function () {
        return this.tObj.box.multM(this.normalize);
    };
    glObject.prototype.autoSize = function (center, size) {
        var objCenter = this.tObj.center;
        this.normalize = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_2__["Mat4"].identity;
        this.normalize.translate(new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_3__["Vec3"]([center.x - objCenter.x, center.y - objCenter.y, center.z - objCenter.z]));
        this.normalize.scale(size / this.tObj.diagonal);
    };
    glObject.prototype.createBuffers = function () {
        var gl = this.gl;
        // create buffers (and associated attributes)
        this.vertexBuffer = new _gl_glAttributeBuffer__WEBPACK_IMPORTED_MODULE_0__["glAttributeBuffer"](gl, this.program, 'aVertex');
        this.normalBuffer = new _gl_glAttributeBuffer__WEBPACK_IMPORTED_MODULE_0__["glAttributeBuffer"](gl, this.program, 'aNormal');
        this.indexBuffer = new _gl_glIndexBuffer__WEBPACK_IMPORTED_MODULE_1__["glIndexBuffer"](gl);
    };
    glObject.prototype.dispose = function () {
        this.vertexBuffer.dispose();
        this.normalBuffer.dispose();
        this.indexBuffer.dispose();
    };
    glObject.prototype.rebuildBuffers = function () {
        this.dispose();
        this.createBuffers();
        this.uploadTriangles();
    };
    glObject.prototype.rotX = function (angle) {
        this.model.rotX(angle);
    };
    glObject.prototype.rotY = function (angle) {
        this.model.rotY(angle);
    };
    glObject.prototype.rotZ = function (angle) {
        this.model.rotZ(angle);
    };
    glObject.prototype.preRotX = function (angle) {
        this.model.preRotX(angle);
    };
    glObject.prototype.preRotY = function (angle) {
        this.model.preRotY(angle);
    };
    glObject.prototype.preRotZ = function (angle) {
        this.model.preRotZ(angle);
    };
    glObject.prototype.scale = function (scale) {
        this.model.scale(scale);
    };
    glObject.prototype.translate = function (offset) {
        this.model.translate(offset);
    };
    glObject.prototype.clearTransforms = function () {
        this.model = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_2__["Mat4"].identity;
    };
    glObject.prototype.uploadTriangles = function () {
        this.vertexBuffer.upload(this.tObj.vertices);
        this.normalBuffer.upload(this.tObj.normals);
        this.indexBuffer.upload(this.tObj.indices);
    };
    glObject.prototype.draw = function () {
        var gl = this.gl;
        var uni = new _gl_glUniform__WEBPACK_IMPORTED_MODULE_4__["glUniform"](gl, this.program);
        uni.set('model', this.model.multM(this.normalize));
        this.vertexBuffer.bind();
        this.indexBuffer.bind();
        this.normalBuffer.bind();
        gl.drawElements(gl.TRIANGLES, 3 * this.tObj.numTriangles, gl.UNSIGNED_INT, 0);
    };
    glObject.prototype.optimize = function (normalType) {
        this.tObj.optimize(normalType);
        this.rebuildBuffers();
    };
    glObject.prototype.applyToVecs = function (normals) {
        var vecs = normals ? this.tObj.normals : this.tObj.vertices;
        // if we're updating normals, ignore translation by setting w=0
        var vec = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_3__["Vec4"]([0, 0, 0, normals ? 0 : 1]);
        var xForm = this.model.multM(this.normalize);
        for (var i = 0; i < vecs.length / 3; i++) {
            vec.x = vecs[3 * i + 0];
            vec.y = vecs[3 * i + 1];
            vec.z = vecs[3 * i + 2];
            vec = xForm.multV(vec);
            if (normals) {
                vec = vec.normalize();
            }
            vecs[3 * i + 0] = vec.x;
            vecs[3 * i + 1] = vec.y;
            vecs[3 * i + 2] = vec.z;
        }
    };
    glObject.prototype.applyXForm = function () {
        this.applyToVecs(false);
        this.applyToVecs(true);
        this.normalize = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_2__["Mat4"].identity;
        this.model = _Util3D_Mat__WEBPACK_IMPORTED_MODULE_2__["Mat4"].identity;
        this.tObj.findBounds();
        this.rebuildBuffers();
    };
    return glObject;
}());



/***/ }),

/***/ "./src/GUI/Checkbox.ts":
/*!*****************************!*\
  !*** ./src/GUI/Checkbox.ts ***!
  \*****************************/
/*! exports provided: Checkbox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Checkbox", function() { return Checkbox; });
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Util/Globals */ "./src/Util/Globals.ts");

var Checkbox = /** @class */ (function () {
    /**
     * @param parent The parent html object.
     * @param setup The setup data object
     */
    function Checkbox(parent, setup) {
        var _this = this;
        var _a;
        if (typeof setup.checked === 'function') {
            this.getState = setup.checked;
        }
        var div = document.createElement('div');
        if (setup.id) {
            div.id = setup.id;
        }
        div.className = 'CheckboxDiv';
        parent.appendChild(div);
        var label = document.createElement('label');
        label.id = setup.id + 'Label';
        label.className = 'CheckboxLabel';
        label.innerText = (_a = setup.label) !== null && _a !== void 0 ? _a : '';
        div.appendChild(label);
        this.box = document.createElement('input');
        this.box.className = 'Checkbox';
        this.box.type = 'checkbox';
        this.box.id = setup.id + 'Checkbox';
        this.box.checked = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_0__["getBooleanValue"])(setup.checked);
        this.box.onchange = function () {
            if (setup.oncheck) {
                setup.oncheck(_this);
            }
        };
        label.appendChild(this.box);
        var mark = document.createElement('span');
        mark.className = 'Checkmark';
        mark.id = setup.id + 'Checkmark';
        label.appendChild(mark);
    }
    Object.defineProperty(Checkbox.prototype, "checked", {
        get: function () {
            return this.box.checked;
        },
        set: function (value) {
            this.box.checked = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Checkbox.prototype, "enabled", {
        get: function () {
            return !this.box.disabled;
        },
        set: function (value) {
            this.box.disabled = !value;
        },
        enumerable: false,
        configurable: true
    });
    Checkbox.prototype.refresh = function () {
        if (this.getState) {
            this.box.checked = this.getState();
        }
    };
    return Checkbox;
}());



/***/ }),

/***/ "./src/GUI/ColorRange.ts":
/*!*******************************!*\
  !*** ./src/GUI/ColorRange.ts ***!
  \*******************************/
/*! exports provided: ColorRange */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ColorRange", function() { return ColorRange; });
/* harmony import */ var _Util_htmlColor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Util/htmlColor */ "./src/Util/htmlColor.ts");

/**
 * Interpolates and array of colors
 */
var ColorRange = /** @class */ (function () {
    /**
     * Constructor
     *
     * @param colors The colors to interpolate
     */
    function ColorRange(colors) {
        this.colors = colors;
    }
    /**
     * Gets an interpolated color.
     *
     * @param value A value between 0 and 1.
     */
    ColorRange.prototype.get = function (value) {
        if (value < 0) {
            return this.colors[0];
        }
        else if (value >= 1) {
            return this.colors[this.colors.length - 1];
        }
        else {
            var index = Math.floor((this.colors.length - 1) * value);
            var partial = (this.colors.length - 1) * value - index;
            var r = Math.round(this.colors[index].r + partial * (this.colors[index + 1].r - this.colors[index].r));
            var g = Math.round(this.colors[index].g + partial * (this.colors[index + 1].g - this.colors[index].g));
            var b = Math.round(this.colors[index].b + partial * (this.colors[index + 1].b - this.colors[index].b));
            return new _Util_htmlColor__WEBPACK_IMPORTED_MODULE_0__["htmlColor"]([r, g, b]);
        }
    };
    return ColorRange;
}());



/***/ }),

/***/ "./src/GUI/Dialog.ts":
/*!***************************!*\
  !*** ./src/GUI/Dialog.ts ***!
  \***************************/
/*! exports provided: Dialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Dialog", function() { return Dialog; });
/* harmony import */ var _GUI__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GUI */ "./src/GUI/GUI.ts");

var Dialog = /** @class */ (function () {
    function Dialog(parent, baseName) {
        this.onShow = null;
        this.onHide = null;
        this.backgroundDiv = _GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('div', baseName + 'DialogBackgroundDiv', parent);
        this.backgroundDiv.className = 'DialogBackgroundClass';
        this.dialogDiv = _GUI__WEBPACK_IMPORTED_MODULE_0__["GUI"].create('div', baseName + 'DialogDiv', this.backgroundDiv);
    }
    Object.defineProperty(Dialog.prototype, "visible", {
        get: function () {
            return (getComputedStyle(this.backgroundDiv).display !== 'none');
        },
        set: function (flag) {
            if (flag === this.visible) {
                return;
            }
            if (flag) {
                this.backgroundDiv.style.display = 'flex';
                if (this.onShow) {
                    this.onShow();
                }
            }
            else {
                this.backgroundDiv.style.display = 'none';
                if (this.onHide) {
                    this.onHide();
                }
            }
        },
        enumerable: false,
        configurable: true
    });
    Dialog.prototype.dispose = function () {
        var parent = this.backgroundDiv.parentElement;
        parent.removeChild(this.backgroundDiv);
    };
    return Dialog;
}());



/***/ }),

/***/ "./src/GUI/GUI.ts":
/*!************************!*\
  !*** ./src/GUI/GUI.ts ***!
  \************************/
/*! exports provided: GUI */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GUI", function() { return GUI; });
var GUI = /** @class */ (function () {
    function GUI() {
    }
    GUI.create = function (type, id, parent, className) {
        var elem = document.createElement(type);
        elem.id = id;
        parent.appendChild(elem);
        if (className) {
            elem.className = className;
        }
        return elem;
    };
    GUI.createAnimation = function (id, parent) {
        var div = document.createElement('div');
        div.id = id;
        div.className = 'lds-ring';
        div.appendChild(document.createElement('div'));
        div.appendChild(document.createElement('div'));
        div.appendChild(document.createElement('div'));
        div.appendChild(document.createElement('div'));
        parent.appendChild(div);
        return div;
    };
    GUI.drawHandle = function (ctx, x, y, outerRadius) {
        ctx.fillStyle = 'lightgreen';
        ctx.strokeStyle = 'darkgreen';
        ctx.beginPath();
        var lineWidth = outerRadius / 10;
        ctx.lineWidth = lineWidth;
        ctx.arc(x, y, outerRadius - lineWidth / 2, 0, 2 * Math.PI);
        ctx.fill();
        ctx.stroke();
    };
    return GUI;
}());



/***/ }),

/***/ "./src/GUI/ListBox.ts":
/*!****************************!*\
  !*** ./src/GUI/ListBox.ts ***!
  \****************************/
/*! exports provided: ListBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListBox", function() { return ListBox; });
var StyleClasses;
(function (StyleClasses) {
    StyleClasses["ListBoxClass"] = "ListBoxClass";
    StyleClasses["ListBoxItemClass"] = "ListBoxItemClass";
    StyleClasses["ListBoxItemSelectedClass"] = "ListBoxItemSelectedClass";
})(StyleClasses || (StyleClasses = {}));
var ListBox = /** @class */ (function () {
    /**
     * @param parent The parent html object.
     * @param setup The setup data object
     */
    function ListBox(parent, id) {
        this._items = [];
        this.onSelectedChanged = null;
        this.box = document.createElement('div');
        if (id) {
            this.box.id = id;
        }
        this.box.className = StyleClasses.ListBoxClass;
        parent.appendChild(this.box);
    }
    Object.defineProperty(ListBox.prototype, "selected", {
        get: function () {
            for (var i = 0; i < this._items.length; i++) {
                var item = this._items[i];
                if (item.div.classList.contains(StyleClasses.ListBoxItemSelectedClass)) {
                    return item.userData;
                }
            }
            return null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ListBox.prototype, "items", {
        get: function () {
            return this._items;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ListBox.prototype, "enabled", {
        get: function () {
            alert('Not Implemented Yet: ListBox.enabled');
            return false;
        },
        set: function (value) {
            alert('Not Implemented Yet: ListBox.enabled');
        },
        enumerable: false,
        configurable: true
    });
    ListBox.prototype.addItem = function (text, userData, id) {
        var _this = this;
        var oldSelected = this.selected;
        var item = document.createElement('div');
        if (id) {
            item.id = id;
        }
        item.className = StyleClasses.ListBoxItemClass;
        if (text) {
            item.innerText = text;
        }
        this.box.appendChild(item);
        item.onclick = function () {
            var oldSelected = _this.selected;
            for (var i = 0; i < _this._items.length; i++) {
                _this._items[i].div.classList.remove(StyleClasses.ListBoxItemSelectedClass);
            }
            item.classList.toggle(StyleClasses.ListBoxItemSelectedClass);
            if (oldSelected !== _this.selected) {
                if (_this.onSelectedChanged) {
                    _this.onSelectedChanged();
                }
            }
        };
        this._items.push({
            div: item,
            userData: userData,
        });
        if (this.selected === null) {
            item.classList.add(StyleClasses.ListBoxItemSelectedClass);
        }
        if (oldSelected !== this.selected) {
            if (this.onSelectedChanged) {
                this.onSelectedChanged();
            }
        }
        return item;
    };
    ListBox.prototype.clear = function () {
        var oldSelected = this.selected;
        this.box.innerHTML = '';
        this._items = [];
        if (oldSelected !== this.selected) {
            if (this.onSelectedChanged) {
                this.onSelectedChanged();
            }
        }
    };
    ListBox.prototype.refresh = function () {
        // nothing to do
    };
    return ListBox;
}());



/***/ }),

/***/ "./src/GUI/Menu.ts":
/*!*************************!*\
  !*** ./src/GUI/Menu.ts ***!
  \*************************/
/*! exports provided: Menubar, SubMenu */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Menubar", function() { return Menubar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SubMenu", function() { return SubMenu; });
/* harmony import */ var _Slider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Slider */ "./src/GUI/Slider.ts");
/* harmony import */ var _Checkbox__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Checkbox */ "./src/GUI/Checkbox.ts");
/* harmony import */ var _Radiobutton__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Radiobutton */ "./src/GUI/Radiobutton.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _GUI__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./GUI */ "./src/GUI/GUI.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();





var MenuLocation;
(function (MenuLocation) {
    MenuLocation[MenuLocation["Below"] = 0] = "Below";
    MenuLocation[MenuLocation["Right"] = 1] = "Right";
})(MenuLocation || (MenuLocation = {}));
/**
 * Common base classes for things that are menus - menubar, pulldown menu, etc
 */
var Menu = /** @class */ (function () {
    function Menu(parent, parentItem, id, className) {
        var _this = this;
        this.parent = null;
        this.children = [];
        this.ctrls = [];
        // the item that launches us
        this.parentItem = null;
        this.parent = parent;
        this.parentItem = parentItem;
        this.div = document.createElement('div');
        this.div.id = id;
        this.div.className = className;
        if (parent) {
            parent.div.appendChild(this.div);
        }
        if (!parent) {
            // if this is the root menu, add a global click handler for closing menus
            window.addEventListener('mousedown', function (event) {
                if (!_this.isMenuItem(event.target)) {
                    _this.hideDown();
                }
            });
            window.addEventListener('touchstart', function (event) {
                if (!_this.isMenuItem(event.target)) {
                    _this.hideDown();
                }
            });
        }
    }
    Object.defineProperty(Menu.prototype, "hidden", {
        get: function () {
            if (this.parentItem) {
                return this.parentItem.classList.contains('MenuItemHiddenClass');
            }
            else {
                return false;
            }
        },
        set: function (flag) {
            if (this.parentItem) {
                if (flag) {
                    this.parentItem.classList.add('MenuItemHiddenClass');
                }
                else {
                    this.parentItem.classList.remove('MenuItemHiddenClass');
                }
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Menu.prototype, "enabled", {
        get: function () {
            if (this.parentItem) {
                return !this.parentItem.classList.contains('MenuItemDisabledClass');
            }
            else {
                return true;
            }
        },
        set: function (flag) {
            if (this.parentItem) {
                if (flag) {
                    this.parentItem.classList.remove('MenuItemDisabledClass');
                }
                else {
                    this.parentItem.classList.add('MenuItemDisabledClass');
                }
            }
        },
        enumerable: false,
        configurable: true
    });
    Menu.prototype.isMenuItem = function (element) {
        while (element) {
            if (element.className === 'MenuItem') {
                return true;
            }
            element = element.parentElement;
        }
        return false;
    };
    Menu.prototype.show = function () {
        this.ctrls.forEach(function (ctrl) { return ctrl.refresh(); });
        if (this.div.classList.contains('MenuShow') === false) {
            this.div.classList.add('MenuShow');
        }
    };
    Menu.prototype.hide = function () {
        if (this.div.classList.contains('MenuShow')) {
            this.div.classList.remove('MenuShow');
        }
    };
    Menu.prototype.hideUp = function () {
        var menu = this;
        while (menu.parent) {
            menu.hide();
            menu = menu.parent;
        }
    };
    Menu.prototype.hideDown = function () {
        this.children.forEach(function (child) {
            child.hide();
            child.hideDown();
        });
    };
    Menu.prototype.clear = function () {
        this.children = [];
        this.ctrls = [];
        this.div.innerHTML = '';
    };
    Menu.prototype.internalAddSubMenu = function (innerHtml, id, location) {
        var _this = this;
        var item = document.createElement('div');
        item.id = id + 'MenuItem';
        item.className = 'MenuItem';
        item.innerHTML = innerHtml;
        item.onclick = function () {
            _this.showSubMenu(item, subMenu, location);
        };
        this.div.appendChild(item);
        var subMenu = new SubMenu(this, item, id);
        this.children.push(subMenu);
        return subMenu;
    };
    Menu.prototype.showSubMenu = function (menuItem, subMenu, location) {
        if (subMenu.enabled === false) {
            return;
        }
        // position the menu off screen so that we can query it's height when
        // we make it visible. Then position it properly
        subMenu.div.style.left = -500 + 'px';
        subMenu.div.style.top = 0 + 'px';
        // hide sibling menus that are open
        this.hideDown();
        // show the desired submenu
        subMenu.show();
        // position the new menu
        var browserWidth = document.documentElement.clientWidth;
        var browserHeight = document.documentElement.clientHeight;
        var menuItemRect = menuItem.getBoundingClientRect();
        var subMenuRect = subMenu.div.getBoundingClientRect();
        if (location === MenuLocation.Below) {
            subMenu.div.style.left = menuItemRect.left + 'px';
            subMenu.div.style.top = menuItemRect.bottom + 'px';
        }
        else if (location === MenuLocation.Right) {
            var left = menuItemRect.left + 0.5 * menuItemRect.width;
            if (left + subMenuRect.width > browserWidth) {
                left = menuItemRect.left - subMenuRect.width;
            }
            subMenu.div.style.left = left + 'px';
            var top_1 = menuItemRect.top;
            if (top_1 + subMenuRect.height > browserHeight) {
                top_1 = browserHeight - subMenuRect.height;
            }
            subMenu.div.style.top = top_1 + 'px';
        }
    };
    Menu.prototype.addItem = function (text, callback, options) {
        var _this = this;
        // create a div for this item
        var item = document.createElement('div');
        item.className = 'MenuItem';
        item.innerText = text;
        item.onclick = function (event) {
            // hide open menus in our hierarchy
            if (!(options && options.closeOnClick == false)) {
                _this.hideUp();
            }
            // fire the event
            callback(item);
        };
        this.div.appendChild(item);
        item.onmouseenter = function () {
            _this.hideDown();
        };
        return item;
    };
    Menu.prototype.addSlider = function (setup) {
        var div = this.addItem(setup.label, function () { return; }, // do nothing on click
        { closeOnClick: false });
        var ctrl = new _Slider__WEBPACK_IMPORTED_MODULE_0__["Slider"](div, setup);
        this.ctrls.push(ctrl);
        return ctrl;
    };
    Menu.prototype.addCheckbox = function (setup) {
        var div = this.addItem('', function () { return; }, // do nothing on click
        { closeOnClick: false });
        var ctrl = new _Checkbox__WEBPACK_IMPORTED_MODULE_1__["Checkbox"](div, setup);
        this.ctrls.push(ctrl);
        return ctrl;
    };
    Menu.prototype.addRadiobutton = function (setup) {
        var div = this.addItem('', function () { return; }, // do nothing on click
        { closeOnClick: false });
        var ctrl = new _Radiobutton__WEBPACK_IMPORTED_MODULE_2__["Radiobutton"](div, setup);
        this.ctrls.push(ctrl);
        return ctrl;
    };
    Menu.prototype.addImage = function (src, callback) {
        var div = this.addItem('', callback);
        div.classList.add('ImageMenuItem');
        var img = _GUI__WEBPACK_IMPORTED_MODULE_4__["GUI"].create('img', '', div);
        img.className = 'MenuItemImage';
        img.src = src;
        return img;
    };
    return Menu;
}());
/**
 * Horizontal menubar across the top of the screen
 */
var Menubar = /** @class */ (function (_super) {
    __extends(Menubar, _super);
    function Menubar(parent) {
        var _this = _super.call(this, null, null, 'Menubar', 'Menubar') || this;
        parent.appendChild(_this.div);
        return _this;
    }
    Menubar.prototype.addSubMenu = function (text, id) {
        return this.internalAddSubMenu(text, id !== null && id !== void 0 ? id : (text + 'Menu'), MenuLocation.Below);
    };
    return Menubar;
}(Menu));

/**
 * A child menu of a menu, i.e. the item that appears when you click on something in the menubar
 */
var SubMenu = /** @class */ (function (_super) {
    __extends(SubMenu, _super);
    function SubMenu(parent, parentItem, id) {
        return _super.call(this, parent, parentItem, id + 'Menu', 'Menu') || this;
    }
    SubMenu.prototype.addSubMenu = function (text, id) {
        var _this = this;
        if (!id) {
            id = text.replace(/\s+/g, '');
        }
        var spanId = id + 'Span';
        var subMenu = this.internalAddSubMenu(text + '<span id="' + spanId + '" style="float:right">></span>', id, MenuLocation.Right);
        var span = document.getElementById(spanId);
        var div = span.parentElement;
        div.onmouseenter = function () {
            if (_Util_Globals__WEBPACK_IMPORTED_MODULE_3__["isMobile"] === false) {
                // TODO this event is triggering on a touchscreen laptop when we don't want it to.
                _this.hideDown();
                _this.showSubMenu(div, subMenu, MenuLocation.Right);
            }
        };
        return subMenu;
    };
    return SubMenu;
}(Menu));



/***/ }),

/***/ "./src/GUI/OverlayCanvas.ts":
/*!**********************************!*\
  !*** ./src/GUI/OverlayCanvas.ts ***!
  \**********************************/
/*! exports provided: TextLocation, OverlayCanvas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextLocation", function() { return TextLocation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OverlayCanvas", function() { return OverlayCanvas; });
var TextLocation;
(function (TextLocation) {
    TextLocation[TextLocation["Center"] = 0] = "Center";
    TextLocation[TextLocation["TopLeft"] = 1] = "TopLeft";
    TextLocation[TextLocation["TopRight"] = 2] = "TopRight";
    TextLocation[TextLocation["BottomLeft"] = 3] = "BottomLeft";
    TextLocation[TextLocation["BottomRight"] = 4] = "BottomRight";
})(TextLocation || (TextLocation = {}));
var OverlayCanvas = /** @class */ (function () {
    function OverlayCanvas(parent, id) {
        this.canvas = document.createElement('canvas');
        if (id) {
            this.canvas.id = id;
        }
        this.canvas.className = 'Overlay';
        parent.appendChild(this.canvas);
        var dummy = document.createElement('div');
        parent.appendChild(dummy);
        dummy.className = 'Overlay';
        this.largeFont = getComputedStyle(dummy).font;
        dummy.className = 'OverlayAnnotation';
        this.smallFont = getComputedStyle(dummy).font;
        parent.removeChild(dummy);
    }
    Object.defineProperty(OverlayCanvas.prototype, "height", {
        get: function () {
            return this.canvas.height;
        },
        set: function (value) {
            this.canvas.height = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverlayCanvas.prototype, "width", {
        get: function () {
            return this.canvas.width;
        },
        set: function (value) {
            this.canvas.width = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverlayCanvas.prototype, "context", {
        get: function () {
            var context = this.canvas.getContext('2d');
            if (context === null) {
                throw new Error('Internal Error: context=null');
            }
            return context;
        },
        enumerable: false,
        configurable: true
    });
    OverlayCanvas.prototype.clear = function () {
        this.context.clearRect(0, 0, this.width, this.height);
    };
    OverlayCanvas.prototype.fillText = function (msg, location) {
        if (location === void 0) { location = TextLocation.Center; }
        var ctx = this.context;
        var style = getComputedStyle(this.canvas);
        ctx.fillStyle = style.color;
        var x;
        var y;
        switch (location) {
            case TextLocation.Center:
                ctx.font = this.largeFont;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                x = this.width / 2;
                y = this.height / 2;
                break;
            case TextLocation.BottomLeft:
                ctx.font = this.smallFont;
                ctx.textAlign = 'left';
                ctx.textBaseline = 'bottom';
                x = 0;
                y = this.height;
                break;
            case TextLocation.BottomRight:
                ctx.font = this.smallFont;
                ctx.textAlign = 'right';
                ctx.textBaseline = 'bottom';
                x = this.width;
                y = this.height;
                break;
            case TextLocation.TopLeft:
                ctx.font = this.smallFont;
                ctx.textAlign = 'left';
                ctx.textBaseline = 'top';
                x = 0;
                y = 0;
                break;
            case TextLocation.TopRight:
                ctx.font = this.smallFont;
                ctx.textAlign = 'right';
                ctx.textBaseline = 'top';
                x = this.width;
                y = 0;
                break;
        }
        ctx.fillText(msg, x, y);
    };
    return OverlayCanvas;
}());



/***/ }),

/***/ "./src/GUI/Panel.ts":
/*!**************************!*\
  !*** ./src/GUI/Panel.ts ***!
  \**************************/
/*! exports provided: Panel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Panel", function() { return Panel; });
var Panel = /** @class */ (function () {
    function Panel(parent, id) {
        var _this = this;
        this.onShow = null;
        this.onHide = null;
        this.div = document.createElement('div');
        this.div.id = id;
        this.div.className = 'Panel';
        this.div.classList.add('Container');
        parent.appendChild(this.div);
        var exitButton = document.createElement('div');
        exitButton.id = 'ExitButton';
        exitButton.className = 'DivButton';
        exitButton.innerText = 'X';
        exitButton.onclick = function () {
            _this.visible = false;
        };
        this.div.appendChild(exitButton);
    }
    Panel.prototype.show = function (value) {
        // virtual function
    };
    Object.defineProperty(Panel.prototype, "visible", {
        get: function () {
            return getComputedStyle(this.div).display === 'block';
        },
        set: function (value) {
            if (value !== this.visible) {
                this.div.style.display = value ? 'block' : 'none';
                // let derived classes know
                this.show(value);
                if (value) {
                    if (this.onShow) {
                        this.onShow(this);
                    }
                }
                else {
                    if (this.onHide) {
                        this.onHide(this);
                    }
                }
            }
        },
        enumerable: false,
        configurable: true
    });
    Panel.prototype.dispose = function () {
        // override this function in derived classes if needed
    };
    return Panel;
}());



/***/ }),

/***/ "./src/GUI/PointerEventHandler.ts":
/*!****************************************!*\
  !*** ./src/GUI/PointerEventHandler.ts ***!
  \****************************************/
/*! exports provided: PointerEventHandler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PointerEventHandler", function() { return PointerEventHandler; });
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Util3D/Vec */ "./src/Util3D/Vec.ts");

var DBL_CLICK_TIME = 300; // ms
/**
 * Utility class for managing touch/mouse events over a html element
 */
var PointerEventHandler = /** @class */ (function () {
    function PointerEventHandler(element) {
        var _this = this;
        this.mouseDown = false;
        this.onUp = null;
        this.onDown = null;
        this.onScale = null;
        this.onRotate = null;
        this.onTranslate = null;
        this.onClick = null;
        this.onDblClick = null;
        this.onDrag = null;
        this.onMove = null;
        this.ctrlKey = false;
        this.lastPos = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec2"]([0, 0]);
        this.lastTouchTime = Date.now();
        this.primaryTouchId = null;
        this.secondaryTouchId = null;
        this.initialTouchDistance = -1;
        this.lastTouchDistance = -1;
        this.lastTouchAngle = -1;
        this.lastTouchCenter = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec2"]([-1, -1]);
        this.dblclick = function (event) {
            _this.ctrlKey = event.ctrlKey;
            var pos = _this.getPos(event);
            _this.ourDblClick(pos);
        };
        this.mousedown = function (event) {
            _this.ctrlKey = event.ctrlKey;
            // if this value is set, it means another handler already did something
            // with the event and we should not continue to process it.
            //
            // Some use cases:
            //   1) Levels Panel. Dragging the panel should move it around unless the
            //      user clicks on one of the items to drag it within the panel
            //   2) Menus closing. When clicking outside of a menu, the menu should close
            //
            if (event.defaultPrevented) {
                return;
            }
            if (event.target instanceof HTMLInputElement === false &&
                event.target instanceof HTMLButtonElement === false) {
                var pos = _this.getPos(event);
                _this.ourOnDown(pos);
                window.addEventListener('mouseup', _this.mouseup);
                // disable selection because we're doing something else with dragging
                event.preventDefault();
            }
        };
        this.mousemove = function (event) {
            _this.ctrlKey = event.ctrlKey;
            var pos = _this.getPos(event);
            if (_this.mouseDown) {
                _this.ourOnDrag(pos);
                _this.lastPos = _this.getPos(event);
            }
            else {
                _this.ourOnMove(pos);
                _this.lastPos = _this.getPos(event);
            }
        };
        this.mouseup = function (event) {
            _this.ctrlKey = event.ctrlKey;
            _this.ourOnUp(_this.getPos(event));
            window.removeEventListener('mouseup', _this.mouseup);
        };
        this.touchstart = function (event) {
            _this.ctrlKey = event.ctrlKey;
            // see mousedown for comments
            if (event.defaultPrevented) {
                return;
            }
            if (event.target instanceof HTMLInputElement === false &&
                event.target instanceof HTMLButtonElement === false) {
                // prevent the browser from using the event
                event.preventDefault();
                // if this is the first touch
                if (event.touches.length === 1) {
                    // record the primary touch id
                    _this.primaryTouchId = event.touches[0].identifier;
                    // send out onDown() and potentially onDblClick() events
                    var pos = _this.getPos(event.touches[0]);
                    var time = Date.now();
                    if (time - _this.lastTouchTime < DBL_CLICK_TIME) {
                        _this.ourDblClick(pos);
                    }
                    else {
                        _this.element.addEventListener('touchmove', _this.touchmove);
                        _this.element.addEventListener('touchend', _this.touchend);
                        _this.ourOnDown(pos);
                    }
                    _this.lastTouchTime = time;
                }
                // if this is the second touch
                else if (event.touches.length === 2 && _this.primaryTouchId !== null) {
                    // record the secondary touch id. It will always be the second element when
                    // there are only two elements
                    _this.secondaryTouchId = event.touches[1].identifier;
                    // set values for gestures
                    var distance = _this.computeTouchDistance(event);
                    _this.initialTouchDistance = distance;
                    _this.lastTouchDistance = distance;
                    _this.lastTouchAngle = _this.computeTouchAngle(event);
                    _this.lastTouchCenter = _this.computeTouchCenter(event);
                }
            }
        };
        this.touchmove = function (event) {
            _this.ctrlKey = event.ctrlKey;
            // prevent the browser from using the event
            event.preventDefault();
            // if the initial two touches are active
            if (_this.primaryTouchId !== null && _this.secondaryTouchId !== null) {
                // send out gesture events
                var distance = _this.computeTouchDistance(event);
                var scale = distance / _this.initialTouchDistance;
                var change = distance / _this.lastTouchDistance;
                _this.ourOnScale(scale, change);
                _this.lastTouchDistance = distance;
                var angle = _this.computeTouchAngle(event);
                _this.ourOnRotate(angle, angle - _this.lastTouchAngle);
                _this.lastTouchAngle = angle;
                var center = _this.computeTouchCenter(event);
                // reverse Y values so the bottom is zero instead of the top
                var delta = [center.x - _this.lastTouchCenter.x, _this.lastTouchCenter.y - center.y];
                _this.ourOnTranslate(new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec2"](delta));
                _this.lastTouchCenter = center;
            }
            // if only the initial touch is active
            else if (_this.primaryTouchId !== null) {
                // send out the drag event
                if (_this.mouseDown) {
                    var touch = _this.getTouch(event, _this.primaryTouchId);
                    if (touch === null) {
                        throw new Error('Internal Error: touch=null');
                    }
                    var pos = _this.getPos(touch);
                    _this.ourOnDrag(pos);
                    _this.lastPos = _this.getPos(touch);
                }
            }
        };
        this.touchend = function (event) {
            _this.ctrlKey = event.ctrlKey;
            // prevent the browser from using the event
            // needed to select an input element
            //event.preventDefault();
            if (_this.secondaryTouchId !== null) {
                if (_this.getTouch(event, _this.secondaryTouchId) === null) {
                    _this.secondaryTouchId = null;
                    // if we lifted the second finger, but not the first, go back
                    // to the drag gesture, but adjust the rememberd position to
                    // be the current one so that things don't jump
                    var touch = _this.getTouch(event, _this.primaryTouchId);
                    if (touch) {
                        _this.lastPos = _this.getPos(touch);
                    }
                }
            }
            if (_this.primaryTouchId !== null) {
                if (_this.getTouch(event, _this.primaryTouchId) === null) {
                    _this.primaryTouchId = null;
                    _this.ourOnUp(_this.lastPos);
                }
            }
            if (_this.secondaryTouchId === null || _this.primaryTouchId === null) {
                _this.initialTouchDistance = -1;
                _this.lastTouchDistance = -1;
                _this.lastTouchAngle = -1;
                _this.lastTouchCenter = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec2"]([-1, -1]);
            }
            if (_this.secondaryTouchId === null && _this.primaryTouchId === null) {
                _this.element.removeEventListener('touchmove', _this.touchmove);
                _this.element.removeEventListener('touchend', _this.touchend);
            }
        };
        this.onWheel = function (event) {
            if (event.deltaY > 0) {
                _this.ourOnScale(1, 1.03);
            }
            else {
                _this.ourOnScale(1, 0.97);
            }
        };
        this.element = element;
        this.element.addEventListener('touchstart', this.touchstart);
        this.element.addEventListener('mousedown', this.mousedown);
        window.addEventListener('mousemove', this.mousemove);
        this.element.addEventListener('dblclick', this.dblclick);
        this.element.addEventListener('wheel', this.onWheel);
    }
    PointerEventHandler.prototype.dispose = function () {
        this.element.removeEventListener('touchstart', this.touchstart);
        this.element.removeEventListener('mousedown', this.mousedown);
        window.removeEventListener('mousemove', this.mousemove);
        this.element.removeEventListener('dblclick', this.dblclick);
        this.element.removeEventListener('wheel', this.onWheel);
    };
    PointerEventHandler.prototype.getTouch = function (event, id) {
        for (var i = 0; i < event.touches.length; i++) {
            var touch = event.touches[i];
            if (touch.identifier === id) {
                return touch;
            }
        }
        // no match was found
        return null;
    };
    PointerEventHandler.prototype.getPos = function (touchOrEvent) {
        var rect = this.element.getBoundingClientRect();
        return new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec2"]([touchOrEvent.clientX - rect.x, touchOrEvent.clientY - rect.y]);
    };
    PointerEventHandler.prototype.getTouches = function (event) {
        if (this.primaryTouchId === null || this.secondaryTouchId === null) {
            throw Error('Two touches expected');
        }
        return {
            primaryTouch: this.getTouch(event, this.primaryTouchId),
            secondaryTouch: this.getTouch(event, this.secondaryTouchId),
        };
    };
    PointerEventHandler.prototype.computeTouchDistance = function (event) {
        var touches = this.getTouches(event);
        if (touches.primaryTouch === null) {
            throw new Error('Internal Error: computeTouchDistance() primaryTouch=null');
        }
        if (touches.secondaryTouch === null) {
            throw new Error('Internal Error: computeTouchDistance() secondaryTouch=null');
        }
        var x1 = touches.primaryTouch.screenX;
        var y1 = touches.primaryTouch.screenY;
        var x2 = touches.secondaryTouch.screenX;
        var y2 = touches.secondaryTouch.screenY;
        return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));
    };
    PointerEventHandler.prototype.computeTouchAngle = function (event) {
        var touches = this.getTouches(event);
        if (touches.primaryTouch === null) {
            throw new Error('Internal Error: computeTouchAngle() primaryTouch=null');
        }
        if (touches.secondaryTouch === null) {
            throw new Error('Internal Error: computeTouchAngle() secondaryTouch=null');
        }
        var x1 = touches.primaryTouch.screenX;
        var y1 = touches.primaryTouch.screenY;
        var x2 = touches.secondaryTouch.screenX;
        var y2 = touches.secondaryTouch.screenY;
        return Math.atan2(y2 - y1, x2 - x1);
    };
    PointerEventHandler.prototype.computeTouchCenter = function (event) {
        var touches = this.getTouches(event);
        if (touches.primaryTouch === null) {
            throw new Error('Internal Error: computeTouchCenter() primaryTouch=null');
        }
        if (touches.secondaryTouch === null) {
            throw new Error('Internal Error: computeTouchCenter() secondaryTouch=null');
        }
        var x1 = touches.primaryTouch.screenX;
        var y1 = touches.primaryTouch.screenY;
        var x2 = touches.secondaryTouch.screenX;
        var y2 = touches.secondaryTouch.screenY;
        return new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec2"]([(x1 + x2) / 2, (y1 + y2) / 2]);
    };
    PointerEventHandler.prototype.ourOnDown = function (pos) {
        // check for a click handler
        if (this.onClick && this.onClick(pos.clone())) {
            return;
        }
        // if not handled by a click hander, send the onDown event
        else {
            this.mouseDown = true;
            this.lastPos = pos.clone();
            if (this.onDown) {
                this.onDown(pos.clone());
            }
        }
    };
    PointerEventHandler.prototype.ourOnUp = function (pos) {
        this.mouseDown = false;
        if (this.onUp) {
            this.onUp(pos.clone());
        }
    };
    PointerEventHandler.prototype.ourOnDrag = function (pos) {
        if (this.onDrag) {
            var delta = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec2"]([pos.x - this.lastPos.x, pos.y - this.lastPos.y]);
            this.onDrag(pos.clone(), delta);
        }
    };
    PointerEventHandler.prototype.ourOnMove = function (pos) {
        if (this.onMove) {
            var delta = new _Util3D_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec2"]([pos.x - this.lastPos.x, pos.y - this.lastPos.y]);
            this.onMove(pos.clone(), delta);
        }
    };
    PointerEventHandler.prototype.ourDblClick = function (pos) {
        if (this.onDblClick) {
            this.onDblClick(pos);
        }
    };
    PointerEventHandler.prototype.ourOnScale = function (scale, change) {
        if (this.onScale) {
            this.onScale(scale, change);
        }
    };
    PointerEventHandler.prototype.ourOnRotate = function (angle, delta) {
        if (this.onRotate) {
            this.onRotate(angle, delta);
        }
    };
    PointerEventHandler.prototype.ourOnTranslate = function (delta) {
        if (this.onTranslate) {
            this.onTranslate(delta);
        }
    };
    return PointerEventHandler;
}());



/***/ }),

/***/ "./src/GUI/Radiobutton.ts":
/*!********************************!*\
  !*** ./src/GUI/Radiobutton.ts ***!
  \********************************/
/*! exports provided: Radiobutton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Radiobutton", function() { return Radiobutton; });
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Util/Globals */ "./src/Util/Globals.ts");

var Radiobutton = /** @class */ (function () {
    /**
     * @param parent The parent html object.
     * @param setup The setup data object
     */
    function Radiobutton(parent, setup) {
        var _this = this;
        var _a, _b;
        this.getState = null;
        var id = (_a = setup.id) !== null && _a !== void 0 ? _a : 'Radiobutton';
        if (typeof setup.checked === 'function') {
            this.getState = setup.checked;
        }
        var div = document.createElement('div');
        div.id = id;
        div.className = 'RadiobuttonDiv';
        parent.appendChild(div);
        var label = document.createElement('label');
        label.id = id + 'Label';
        label.className = 'RadiobuttonLabel';
        label.innerText = (_b = setup.label) !== null && _b !== void 0 ? _b : '';
        div.appendChild(label);
        this.box = document.createElement('input');
        this.box.className = 'Radiobutton';
        this.box.type = 'radio';
        this.box.name = setup.group;
        this.box.id = id + 'Radiobutton';
        this.box.checked = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_0__["getBooleanValue"])(setup.checked);
        this.box.onchange = function () {
            if (_this.box.checked) {
                if (setup.oncheck) {
                    setup.oncheck(_this);
                }
            }
            else {
                if (setup.onuncheck) {
                    setup.onuncheck(_this);
                }
            }
        };
        label.appendChild(this.box);
        var mark = document.createElement('span');
        mark.className = 'RadioCheckmark';
        mark.id = id + 'RadioCheckmark';
        label.appendChild(mark);
    }
    Object.defineProperty(Radiobutton.prototype, "checked", {
        get: function () {
            return this.box.checked;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Radiobutton.prototype, "enabled", {
        get: function () {
            return !this.box.disabled;
        },
        set: function (value) {
            this.box.disabled = !value;
        },
        enumerable: false,
        configurable: true
    });
    Radiobutton.prototype.check = function (value) {
        if (value === void 0) { value = true; }
        this.box.checked = value;
    };
    Radiobutton.prototype.refresh = function () {
        if (this.getState) {
            this.box.checked = this.getState();
        }
    };
    return Radiobutton;
}());



/***/ }),

/***/ "./src/GUI/Slider.ts":
/*!***************************!*\
  !*** ./src/GUI/Slider.ts ***!
  \***************************/
/*! exports provided: Slider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Slider", function() { return Slider; });
/* harmony import */ var _Util_htmlColor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Util/htmlColor */ "./src/Util/htmlColor.ts");
/* harmony import */ var _ColorRange__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ColorRange */ "./src/GUI/ColorRange.ts");
/* harmony import */ var _Util_htmlColorWithAlpha__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Util/htmlColorWithAlpha */ "./src/Util/htmlColorWithAlpha.ts");
/* harmony import */ var _gl_glColor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../gl/glColor */ "./src/gl/glColor.ts");




var RangeMapper = /** @class */ (function () {
    function RangeMapper(realMin, realMax) {
        this.sliderMin = 0;
        this.sliderMax = 1000;
        this.realMin = realMin;
        this.realMax = realMax;
    }
    Object.defineProperty(RangeMapper.prototype, "realRange", {
        get: function () {
            return this.realMax - this.realMin;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RangeMapper.prototype, "sliderRange", {
        get: function () {
            return this.sliderMax - this.sliderMin;
        },
        enumerable: false,
        configurable: true
    });
    RangeMapper.prototype.sliderToReal = function (sliderValue) {
        return this.realMin + ((sliderValue - this.sliderMin) / this.sliderRange) * this.realRange;
    };
    RangeMapper.prototype.realToSlider = function (realValue) {
        return this.sliderMin + ((realValue - this.realMin) / this.realRange) * this.sliderRange;
    };
    return RangeMapper;
}());
/**
 * Class representing a slider composed of a label, input range, color span and value span
 */
var Slider = /** @class */ (function () {
    /**
     * @param parent The parent html object.
     * @param setup The setup data object
     */
    function Slider(parent, setup) {
        var _this = this;
        var _a, _b;
        var id = (_a = setup.id) !== null && _a !== void 0 ? _a : 'Slider';
        this._getText = setup.onGetText;
        this.div = document.createElement('div');
        this.div.id = id;
        this.div.className = 'SliderDiv';
        parent.appendChild(this.div);
        this._label = document.createElement('label');
        this._label.id = id + 'Label';
        this._label.className = 'SliderLabel';
        this._label.innerText = (_b = setup.label) !== null && _b !== void 0 ? _b : '';
        this.div.appendChild(this._label);
        this._rangeMapper = new RangeMapper(setup.min, setup.max);
        this._range = document.createElement('input');
        this._range.type = 'range';
        this._range.id = id + 'Range';
        this._range.className = 'SliderRange';
        this._range.min = this._rangeMapper.sliderMin.toString();
        this._range.max = this._rangeMapper.sliderMax.toString();
        this._range.value = this._rangeMapper.realToSlider(setup.value).toString();
        this._range.addEventListener('input', function () {
            _this.updateSpanColor();
            _this.updateSpanText();
        });
        this._label.htmlFor = this._range.id;
        this.div.appendChild(this._range);
        if (setup.colors) {
            this._colorSpan = document.createElement('span');
            this._colorSpan.id = id + 'ColorSpan';
            this._colorSpan.className = 'SliderColorSpan';
            this.div.appendChild(this._colorSpan);
            // set the initial color.
            this.colors = setup.colors;
        }
        this._valueSpan = document.createElement('span');
        this._valueSpan.id = id + 'ValueSpan';
        this._valueSpan.className = 'SliderValueSpan';
        //      this._valueSpan.innerText = setup.value.toString();
        this.div.appendChild(this._valueSpan);
        // set the initial span text
        this.updateSpanText();
        if (setup.oninput) {
            this._range.oninput = function () { return setup.oninput(_this); };
        }
    }
    Object.defineProperty(Slider.prototype, "enabled", {
        get: function () {
            return !this._range.disabled;
        },
        set: function (value) {
            this._range.disabled = !value;
            if (value) {
                this._label.classList.remove('disabled');
                this._valueSpan.classList.remove('disabled');
                this._range.classList.remove('disabled');
            }
            else {
                this._label.classList.add('disabled');
                this._valueSpan.classList.add('disabled');
                this._range.classList.add('disabled');
            }
        },
        enumerable: false,
        configurable: true
    });
    /**
     * Sets the span color to the currently selected color.
     */
    Slider.prototype.updateSpanColor = function () {
        if (this._colors) {
            var val = (this.value - this.min) / (this.max - this.min);
            var color = _Util_htmlColor__WEBPACK_IMPORTED_MODULE_0__["htmlColor"].fromColor(this._colors.get(val));
            this._colorSpan.style.backgroundColor = color.toHex();
        }
    };
    /**
     * Sets the span color to the currently selected color.
     */
    Slider.prototype.updateSpanText = function () {
        if (this._getText) {
            this._valueSpan.innerText = this._getText(this);
        }
    };
    Object.defineProperty(Slider.prototype, "range", {
        /**
         * Gets the html range object
         *
         * @returns The html range object.
         */
        get: function () {
            return this._range;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Slider.prototype, "value", {
        /**
         * Gets the current slider value
         *
         * @returns the current slider value
         */
        get: function () {
            return this._rangeMapper.sliderToReal(this._range.valueAsNumber);
        },
        /**
         * Sets the value of the slider (and associated content)
         *
         * @param val the desired slider value
         */
        set: function (val) {
            this._range.valueAsNumber = this._rangeMapper.realToSlider(val);
            this.updateSpanColor();
            this.updateSpanText();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Slider.prototype, "valueAsPercent", {
        /**
         * Gets the value of the slider as a percent [0-1] of the range
         *
         * @returns the value of the slider as a percent
         */
        get: function () {
            return this.value / (this.max - this.min);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Slider.prototype, "min", {
        /**
         * Gets the min slider value.
         *
         * @returns The min slider value.
         */
        get: function () {
            return this._rangeMapper.realMin;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Slider.prototype, "max", {
        /**
         * Gets the max slider value.
         *
         * @returns The max slider value.
         */
        get: function () {
            return this._rangeMapper.realMax;
        },
        /**
         * Sets the max slider value.
         *
         * @param value The max slider value.
         */
        set: function (value) {
            // get the value before we change range values
            var currentValue = Math.min(this.value, value);
            // change the range
            this._rangeMapper.realMax = value;
            this._range.valueAsNumber = this._rangeMapper.realToSlider(currentValue);
            // update GUI
            this.updateSpanColor();
            this.updateSpanText();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Slider.prototype, "colors", {
        /**
         * Sets the color for the slider
         */
        set: function (colors) {
            // store the colors
            this._colors = new _ColorRange__WEBPACK_IMPORTED_MODULE_1__["ColorRange"](colors);
            // build the gradient style for the range object
            var gradientStr = '90deg';
            for (var i = 0; i < colors.length; i++) {
                gradientStr += ', ' + colors[i].toCss();
            }
            this._range.style.background = 'linear-gradient(' + gradientStr + ')';
            // update the span color too
            this.updateSpanColor();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Slider.prototype, "htmlColor", {
        /**
         * Gets the current color as an htmlColor object.
         *
         * @returns The current color.
         */
        get: function () {
            if (this._colors) {
                var val = (this.value - this.min) / (this.max - this.min);
                return this._colors.get(val);
            }
            else {
                return _Util_htmlColorWithAlpha__WEBPACK_IMPORTED_MODULE_2__["htmlColorWithAlpha"].transparent;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Slider.prototype, "glColor", {
        /**
         * Gets the current color as a glColor object.
         *
         * @returns The current color.
         */
        get: function () {
            if (this._colors) {
                var val = (this.value - this.min) / (this.max - this.min);
                return this._colors.get(val).toGlColor();
            }
            else {
                return new _gl_glColor__WEBPACK_IMPORTED_MODULE_3__["glColor3"]([0, 0, 0]);
            }
        },
        enumerable: false,
        configurable: true
    });
    Slider.prototype.refresh = function () {
        // TODO implement
    };
    return Slider;
}());



/***/ }),

/***/ "./src/Launcher.ts":
/*!*************************!*\
  !*** ./src/Launcher.ts ***!
  \*************************/
/*! exports provided: Launcher */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Launcher", function() { return Launcher; });
/* harmony import */ var _GUI_Menu__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GUI/Menu */ "./src/GUI/Menu.ts");
/* harmony import */ var _Apps_PathTracer_PathTracerApp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Apps/PathTracer/PathTracerApp */ "./src/Apps/PathTracer/PathTracerApp.ts");
/* harmony import */ var _Apps_Viewer_ViewerApp__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Apps/Viewer/ViewerApp */ "./src/Apps/Viewer/ViewerApp.ts");
/* harmony import */ var _Apps_Squint_SquintApp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Apps/Squint/SquintApp */ "./src/Apps/Squint/SquintApp.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _Apps_Squint_ArtSeeApp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Apps/Squint/ArtSeeApp */ "./src/Apps/Squint/ArtSeeApp.ts");
/* harmony import */ var _Util_Device__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Util/Device */ "./src/Util/Device.ts");
/* harmony import */ var _Apps_Squint_ModelTimerApp__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Apps/Squint/ModelTimerApp */ "./src/Apps/Squint/ModelTimerApp.ts");








var AppType;
(function (AppType) {
    AppType["ArtistsBall"] = "ArtistsBall";
    AppType["Viewer"] = "Viewer";
    AppType["Squint"] = "Squint";
    AppType["ArtSee"] = "Art-See";
    AppType["ModelTimer"] = "ModelTimer";
})(AppType || (AppType = {}));
var Launcher = /** @class */ (function () {
    function Launcher() {
        var _this = this;
        this.app = null;
        this.setFontSize();
        window.addEventListener('orientationchange', function () { return _this.setFontSize(); });
        document.addEventListener('fullscreenchange', function () { return _this.setFontSize(); });
        // default app type if one isn't specified via a URL parameter
        var type = AppType.Squint;
        // create the main div
        this.div = document.createElement('div');
        document.body.appendChild(this.div);
        this.menubar = new _GUI_Menu__WEBPACK_IMPORTED_MODULE_0__["Menubar"](this.div);
        var html = '<img style="width: 1em" src="' + Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_4__["baseUrl"])() + 'img/apps.svg' + '" />';
        var subMenu = this.menubar.addSubMenu(html, 'Apps');
        subMenu.addItem('3D Viewer', function () { return location.href = _this.getUrl(AppType.Viewer); });
        subMenu.addItem('Squint', function () { return location.href = _this.getUrl(AppType.Squint); });
        subMenu.addItem('Artist\'s Ball', function () { return location.href = _this.getUrl(AppType.ArtistsBall); });
        subMenu.addItem('Art-See', function () { return location.href = _this.getUrl(AppType.ArtSee); });
        subMenu.addItem('ModelTimer', function () { return location.href = _this.getUrl(AppType.ModelTimer); });
        var paramString = location.href.split('?')[1];
        var query = new URLSearchParams(paramString);
        // TODO this can be done without a switch statement, but I
        // don't have time right now to figure out how to make it
        // work with strict TypeScript and ESLint
        var appTypeStr = query.get('App');
        switch (appTypeStr) {
            case AppType.ArtistsBall:
                type = AppType.ArtistsBall;
                break;
            case AppType.Squint:
                type = AppType.Squint;
                break;
            case AppType.Viewer:
                type = AppType.Viewer;
                break;
            case AppType.ArtSee:
                type = AppType.ArtSee;
                break;
            case AppType.ModelTimer:
                type = AppType.ModelTimer;
                break;
        }
        query.delete('App');
        var file = this.getFileFromQuery(query);
        switch (type) {
            case AppType.ArtistsBall:
                document.title = 'Artist\'s Tools: Artist\'s Ball';
                this.app = new _Apps_PathTracer_PathTracerApp__WEBPACK_IMPORTED_MODULE_1__["PathTracerApp"](file);
                break;
            case AppType.Viewer:
                document.title = 'Artist\'s Tools: Viewer';
                this.app = new _Apps_Viewer_ViewerApp__WEBPACK_IMPORTED_MODULE_2__["ViewerApp"](file);
                break;
            case AppType.Squint:
                document.title = 'Squint';
                this.app = new _Apps_Squint_SquintApp__WEBPACK_IMPORTED_MODULE_3__["SquintApp"]();
                break;
            case AppType.ArtSee:
                document.title = 'Art-See';
                this.app = new _Apps_Squint_ArtSeeApp__WEBPACK_IMPORTED_MODULE_5__["SeeApp"]();
                break;
            case AppType.ModelTimer:
                document.title = 'Model Timer';
                this.app = new _Apps_Squint_ModelTimerApp__WEBPACK_IMPORTED_MODULE_7__["ModelTimerApp"]();
                break;
        }
        this.app.create(this.div);
        this.app.buildMenu(this.menubar);
    }
    Launcher.prototype.getFileFromQuery = function (query) {
        var params = [];
        query.forEach(function (value, key) {
            params.push({
                name: key,
                value: value,
            });
        });
        if (params.length === 1) {
            return params[0].name; // unnamed parameter
        }
        else {
            return '';
        }
    };
    Launcher.prototype.getUrl = function (type) {
        var base = location.href.split('?')[0];
        switch (type) {
            case AppType.ArtistsBall:
                return base + '?App=ArtistsBall';
                break;
            case AppType.Squint:
                return base + '?App=Squint';
                break;
            case AppType.Viewer:
                return base + '?App=Viewer';
                break;
            case AppType.ArtSee:
                return base + '?App=Art-See';
                break;
            case AppType.ModelTimer:
                return base + '?App=ModelTimer';
                break;
            default:
                return base;
        }
    };
    Launcher.prototype.setFontSize = function () {
        // supposed to be able to do this stuff with media queries, but I give up! Browsers
        // behave differently on mobile devices and some alter scaling for portrait and
        // landscape too!
        var device = new _Util_Device__WEBPACK_IMPORTED_MODULE_6__["Device"]();
        var fontSize = 14;
        if (device.isFirefox) {
            fontSize = 14;
        }
        else {
            if (device.isMobile && device.isPortrait) {
                if (device.isIPhone) {
                    fontSize = 30;
                }
                else {
                    fontSize = 24;
                }
            }
            else {
                if (device.isIPhone) {
                    fontSize = 16;
                }
                else {
                    fontSize = 14;
                }
            }
        }
        if (document.fullscreenElement && device.isPortrait && device.isMobile && device.isSafari === false) {
            fontSize /= 2;
        }
        // set the variable into the CSS code
        document.documentElement.style.setProperty('--fontSize', fontSize + 'pt');
        //alert('setting font size to ' + fontSize + 'pt');
    };
    return Launcher;
}());



/***/ }),

/***/ "./src/Util/BlobFile.ts":
/*!******************************!*\
  !*** ./src/Util/BlobFile.ts ***!
  \******************************/
/*! exports provided: BlobFile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BlobFile", function() { return BlobFile; });
/* harmony import */ var _BlobShim__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BlobShim */ "./src/Util/BlobShim.ts");
/* harmony import */ var _BlobShim__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_BlobShim__WEBPACK_IMPORTED_MODULE_0__);
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};

/**
 * Internal class for slicing up Blobs
 */
var BlobSlicer = /** @class */ (function () {
    /**
     * @param blob The Blob to be sliced
     */
    function BlobSlicer(blob) {
        // The start byte value for the next slice
        this.start = 0;
        this.blob = blob;
    }
    /**
     * Gets the next slice.
     *
     * @param len The length of the slice.
     * @returns The sliced Blob.
     */
    BlobSlicer.prototype.next = function (len) {
        var b = this.blob.slice(this.start, this.start + len);
        this.start += len;
        return b;
    };
    /**
     * Slices the Blob and returns it as an ArrayBuffer.
     *
     * @param len The length of the slice.
     * @returns An ArrayBuffer promise.
     */
    BlobSlicer.prototype.nextArrayBuffer = function (len) {
        return this.next(len).arrayBuffer();
    };
    /**
     * Slices the Blob and returns it as an Int32Array
     *
     * @param len The length of the slice.
     * @returns An Int32Array promise.
     */
    BlobSlicer.prototype.nextInt32Array = function (len) {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = Int32Array.bind;
                        return [4 /*yield*/, this.nextArrayBuffer(len)];
                    case 1: return [2 /*return*/, new (_a.apply(Int32Array, [void 0, _b.sent()]))()];
                }
            });
        });
    };
    /**
     * Slices the Blob and returns it as a string
     *
     * @param len The length of the slice.
     * @returns A string promise.
     */
    BlobSlicer.prototype.nextString = function (len) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2 /*return*/, this.next(len).text()];
            });
        });
    };
    return BlobSlicer;
}());
/**
 * Manages creation and extraction of a self describing Blob. Data
 * is stored as:
 *
 * [numEntries] - The number entries in the file. 4 byte Int32
 * [sizes] - Sizes of all the entries, including the info object
 * [info] - User supplied data as a JSON string
 * [entry 1] - First user entry
 * [entry 2] - Second user entry
 * [...]
 */
var BlobFile = /** @class */ (function () {
    /**
     * @param info The information header to be stored with the Blob
     * @param parts The data contents of the Blob
     */
    function BlobFile(info, parts) {
        this.parts = [];
        this.info = info;
        this.parts = parts;
    }
    /**
     * Converts a raw Blob object into a BlobFile
     *
     * @param blob The Blob to process.
     * @return A BlobFile promise.
     */
    BlobFile.extract = function (blob) {
        return __awaiter(this, void 0, void 0, function () {
            var blobSlicer, numEntries, sizes, jsonInfo, parts, i, size;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        blobSlicer = new BlobSlicer(blob);
                        return [4 /*yield*/, blobSlicer.nextInt32Array(4)];
                    case 1:
                        numEntries = (_a.sent())[0];
                        return [4 /*yield*/, blobSlicer.nextInt32Array(4 * (numEntries + 1))];
                    case 2:
                        sizes = _a.sent();
                        return [4 /*yield*/, blobSlicer.nextString(sizes[0])];
                    case 3:
                        jsonInfo = _a.sent();
                        parts = [];
                        for (i = 0; i < numEntries; i++) {
                            size = sizes[i + 1];
                            parts.push(blobSlicer.next(size));
                        }
                        return [2 /*return*/, new BlobFile(JSON.parse(jsonInfo), parts)];
                }
            });
        });
    };
    /**
     * Create a BlobFile Blob
     *
     * @param info The information header to be stored with the Blob
     * @param parts The data contents of the Blob
     */
    BlobFile.createBlob = function (info, parts) {
        var jsonInfo = JSON.stringify(info);
        // Build the array of sizes
        var sizes = [jsonInfo.length];
        for (var i = 0; i < parts.length; i++) {
            var part = parts[i];
            if (part instanceof Int32Array) {
                sizes.push(4 * part.length);
            }
            else if (part instanceof Float32Array) {
                sizes.push(4 * part.length);
            }
            else if (part instanceof String) {
                sizes.push(part.length);
            }
            else {
                var msg = 'Unsupported Blob Part Type: ' + typeof part;
                console.error(msg);
                throw new Error(msg);
            }
        }
        // assemble the blob parts
        var allParts = [];
        allParts.push(new Int32Array([parts.length]));
        allParts.push(new Int32Array(sizes));
        allParts.push(jsonInfo);
        allParts.push.apply(allParts, parts);
        // create the blob
        return new Blob(allParts);
    };
    return BlobFile;
}());



/***/ }),

/***/ "./src/Util/BlobShim.ts":
/*!******************************!*\
  !*** ./src/Util/BlobShim.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

// needed for Safari
if (!Blob.prototype.arrayBuffer) {
    Blob.prototype.arrayBuffer = function () {
        var _this = this;
        // read the Blob the old fashioned way
        return new Promise(function (resolve, reject) {
            var reader = new FileReader();
            // register event handlers
            reader.onloadend = function () {
                resolve(reader.result);
            };
            reader.onerror = function () {
                reject(reader.error);
            };
            // start the read
            reader.readAsArrayBuffer(_this);
        });
    };
}
// needed for Safari
if (!Blob.prototype.text) {
    // read the Blob the old fashioned way
    Blob.prototype.text = function () {
        var _this = this;
        // read the Blob the old fashioned way
        return new Promise(function (resolve, reject) {
            var reader = new FileReader();
            // register event handlers
            reader.onloadend = function () {
                // decode into a string
                var txt = new TextDecoder('utf-8').decode(reader.result);
                resolve(txt);
            };
            reader.onerror = function () {
                reject(reader.error);
            };
            // start the read
            reader.readAsArrayBuffer(_this);
        });
    };
}


/***/ }),

/***/ "./src/Util/Color.ts":
/*!***************************!*\
  !*** ./src/Util/Color.ts ***!
  \***************************/
/*! exports provided: Color */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Color", function() { return Color; });
/**
 * Class for representing color values. Values may be on a 0-1 or 0-255 scale.
 */
var Color = /** @class */ (function () {
    /**
     * @param color RGB values to store in this object
     */
    function Color(color) {
        this.r = color[0];
        this.g = color[1];
        this.b = color[2];
        if (color.length === 4) {
            this.a = color[3];
        }
        else {
            this.a = 0;
        }
    }
    return Color;
}());



/***/ }),

/***/ "./src/Util/ConsoleCapture.ts":
/*!************************************!*\
  !*** ./src/Util/ConsoleCapture.ts ***!
  \************************************/
/*! exports provided: ConsoleCapture */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConsoleCapture", function() { return ConsoleCapture; });
var NUM_COLS = 150;
var ConsoleCapture = /** @class */ (function () {
    function ConsoleCapture(parent, id, numCols) {
        var _this = this;
        if (id === void 0) { id = 'Console'; }
        if (numCols === void 0) { numCols = NUM_COLS; }
        this.textArea = document.createElement('textarea');
        this.textArea.id = id;
        this.textArea.cols = numCols;
        parent.appendChild(this.textArea);
        // TODO update these all to take the correct arguments for console functions
        var oldLog = console.log;
        console.log = function (msg) {
            _this.append(msg);
            oldLog(msg);
        };
        var oldTrace = console.trace;
        console.trace = function (msg) {
            _this.append('TRACE ' + msg);
            oldTrace(msg);
        };
        var oldInfo = console.info;
        console.info = function (msg) {
            _this.append('INFO ' + msg);
            oldInfo(msg);
        };
        var oldWarn = console.warn;
        console.warn = function (msg) {
            _this.append('WARN ' + msg);
            oldWarn(msg);
        };
        var oldError = console.error;
        console.error = function (msg) {
            _this.append('ERROR ' + msg);
            oldError(msg);
        };
        var oldClear = console.clear;
        console.clear = function () {
            _this.textArea.textContent = '';
            oldClear();
        };
        window.onerror = function (event, source, lineno, colno, error) {
            var stackTrace = error && error instanceof Error ? '\n' + error.stack : '';
            var msg = event + '\n' + source + ' line:' + lineno + ', col:' + colno + stackTrace;
            //alert(msg);
            _this.append(msg);
        };
    }
    Object.defineProperty(ConsoleCapture.prototype, "visible", {
        get: function () {
            return getComputedStyle(this.textArea).display === 'block';
        },
        set: function (flag) {
            this.textArea.style.display = flag ? 'block' : 'none';
        },
        enumerable: false,
        configurable: true
    });
    ConsoleCapture.prototype.append = function (msg) {
        var fullmsg = this.textArea.value;
        if (msg === null || msg === undefined) {
            msg = '' + msg;
        }
        if (typeof msg !== 'string') {
            msg = '' + msg;
        }
        msg = msg.substr(0, 100 * NUM_COLS);
        fullmsg = msg + '\n\n' + fullmsg;
        fullmsg = fullmsg.substr(0, 10 * 1000 * NUM_COLS);
        this.textArea.value = fullmsg;
        if (this.onMessage) {
            this.onMessage(msg);
        }
    };
    return ConsoleCapture;
}());



/***/ }),

/***/ "./src/Util/CountdownTimer.ts":
/*!************************************!*\
  !*** ./src/Util/CountdownTimer.ts ***!
  \************************************/
/*! exports provided: CountdownTimer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CountdownTimer", function() { return CountdownTimer; });
/* harmony import */ var _Stopwatch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Stopwatch */ "./src/Util/Stopwatch.ts");

var SEC = 1000;
var MIN = 60 * SEC;
var CountdownTimer = /** @class */ (function () {
    function CountdownTimer(durationMs) {
        if (durationMs === void 0) { durationMs = 20 * MIN; }
        this.sw = new _Stopwatch__WEBPACK_IMPORTED_MODULE_0__["Stopwatch"](false);
        this.tickTimeoutHandle = NaN;
        this.onTick = null;
        this._durationMs = durationMs;
    }
    Object.defineProperty(CountdownTimer.prototype, "durationMs", {
        get: function () {
            return this._durationMs;
        },
        set: function (value) {
            this.stop();
            this._durationMs = value;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CountdownTimer.prototype, "running", {
        get: function () {
            if (this.sw.elapsedMs > this._durationMs) {
                this.sw.stop();
                this.sw.elapsedMs = this._durationMs;
            }
            return this.sw.running;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CountdownTimer.prototype, "durationMin", {
        get: function () {
            return this.durationMs / MIN;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CountdownTimer.prototype, "remainingMs", {
        get: function () {
            return Math.max(0, this.durationMs - this.sw.elapsedMs);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CountdownTimer.prototype, "timeRemainingStr", {
        get: function () {
            var remaining = this.remainingMs;
            var min = Math.floor(remaining / MIN);
            var sec = Math.floor((remaining - min * MIN) / SEC);
            var minStr = min < 10 ? '0' + min : min;
            var secStr = sec < 10 ? '0' + sec : sec;
            return minStr + ':' + secStr;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CountdownTimer.prototype, "expired", {
        get: function () {
            return (this.sw.elapsedMs >= this.durationMs);
        },
        enumerable: false,
        configurable: true
    });
    CountdownTimer.prototype.start = function () {
        if (this.sw.running === false && this.expired === false) {
            this.sw.start();
            this.tick();
        }
    };
    CountdownTimer.prototype.stop = function () {
        this.sw.stop();
        if (isNaN(this.tickTimeoutHandle) === false) {
            window.clearTimeout(this.tickTimeoutHandle);
            this.tickTimeoutHandle = NaN;
        }
        if (this.sw.elapsedMs > this._durationMs) {
            this.sw.elapsedMs = this._durationMs;
        }
    };
    CountdownTimer.prototype.reset = function () {
        this.sw.reset(false);
    };
    CountdownTimer.prototype.addOne = function () {
        this.stop();
        this._durationMs = this.remainingMs;
        this.sw.elapsedMs = 0;
        // the next highest minute value
        this._durationMs = MIN * Math.floor(this.durationMin) + MIN;
    };
    CountdownTimer.prototype.subtractOne = function () {
        this.stop();
        this._durationMs = this.remainingMs;
        this.sw.elapsedMs = 0;
        // the next lowest minute value
        this._durationMs = MIN * Math.floor(0.9999 + this.durationMin) - MIN;
        this._durationMs = Math.max(this._durationMs, 0);
    };
    CountdownTimer.prototype.synchronize = function (running, durationMs, remainingMs) {
        durationMs = Math.max(0, durationMs);
        remainingMs = Math.min(remainingMs, durationMs);
        remainingMs = Math.max(0, remainingMs);
        this.sw.reset(false);
        this.sw.elapsedMs = durationMs - remainingMs;
        this._durationMs = durationMs;
        if (durationMs >= 0 && remainingMs >= 0 && durationMs > remainingMs && running) {
            this.sw.start();
            this.tick();
        }
    };
    CountdownTimer.prototype.tick = function () {
        if (this.onTick) {
            this.onTick(this);
        }
        // if the timer is running request the next timeout
        if (this.running) {
            this.registerNextTick();
        }
    };
    CountdownTimer.prototype.registerNextTick = function () {
        var _this = this;
        this.tickTimeoutHandle = window.setTimeout(function () {
            // reset the timeout handle
            _this.tickTimeoutHandle = NaN;
            // call the callback
            _this.tick();
        }, this.remainingMs % 1000 + 1);
    };
    return CountdownTimer;
}());



/***/ }),

/***/ "./src/Util/Device.ts":
/*!****************************!*\
  !*** ./src/Util/Device.ts ***!
  \****************************/
/*! exports provided: Device */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Device", function() { return Device; });
/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ua-parser-js */ "./node_modules/ua-parser-js/src/ua-parser.js");
/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ua_parser_js__WEBPACK_IMPORTED_MODULE_0__);

var Device = /** @class */ (function () {
    function Device() {
        this.parser = new ua_parser_js__WEBPACK_IMPORTED_MODULE_0__["UAParser"](navigator.userAgent);
        //alert(JSON.stringify(this.parser.getResult(), null, ' '));
    }
    Object.defineProperty(Device.prototype, "isMobile", {
        get: function () {
            return this.parser.getDevice().type === 'mobile';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Device.prototype, "isFirefox", {
        get: function () {
            return this.parser.getBrowser().name === 'Firefox';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Device.prototype, "isSafari", {
        get: function () {
            return this.parser.getBrowser().name === 'Safari';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Device.prototype, "isPortrait", {
        get: function () {
            return (window.orientation !== undefined && window.orientation === 0 || window.orientation === 180);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Device.prototype, "isIPhone", {
        get: function () {
            return this.parser.getDevice().model === 'iPhone';
        },
        enumerable: false,
        configurable: true
    });
    return Device;
}());



/***/ }),

/***/ "./src/Util/FPS.ts":
/*!*************************!*\
  !*** ./src/Util/FPS.ts ***!
  \*************************/
/*! exports provided: FPS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FPS", function() { return FPS; });
var FPS = /** @class */ (function () {
    function FPS() {
        this.ticks = [];
    }
    Object.defineProperty(FPS.prototype, "spanMs", {
        get: function () {
            if (this.ticks.length < 2) {
                return 0;
            }
            else {
                return (this.ticks[this.ticks.length - 1] - this.ticks[0]);
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(FPS.prototype, "ms", {
        get: function () {
            if (this.ticks.length < 2) {
                return 0;
            }
            else {
                return this.spanMs / this.ticks.length;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(FPS.prototype, "rate", {
        get: function () {
            if (this.ticks.length < 2) {
                return 0;
            }
            else {
                return 1000 / this.ms;
            }
        },
        enumerable: false,
        configurable: true
    });
    FPS.prototype.tick = function () {
        this.ticks.push(window.performance.now());
        // trim off the size as long as there are at least 20 entries and the
        // time span between all entries is at least 1 second
        while (this.ticks.length > 20 && this.spanMs > 2000) {
            this.ticks.shift();
        }
    };
    return FPS;
}());



/***/ }),

/***/ "./src/Util/Globals.ts":
/*!*****************************!*\
  !*** ./src/Util/Globals.ts ***!
  \*****************************/
/*! exports provided: isMobile, env, baseUrl, getTimeStr, getEmPixels, pxToNumber, clamp, toDeg, toRad, mix, toCss, toSizeStr, getBooleanValue, iOS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isMobile", function() { return isMobile; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "env", function() { return env; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "baseUrl", function() { return baseUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTimeStr", function() { return getTimeStr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEmPixels", function() { return getEmPixels; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pxToNumber", function() { return pxToNumber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clamp", function() { return clamp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toDeg", function() { return toDeg; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toRad", function() { return toRad; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mix", function() { return mix; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toCss", function() { return toCss; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toSizeStr", function() { return toSizeStr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getBooleanValue", function() { return getBooleanValue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "iOS", function() { return iOS; });
var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
var env = {
    isTesting: false
};
function baseUrl() {
    var url = location.origin + location.pathname;
    if (url.endsWith('index.html')) {
        url = url.substr(0, url.length - 10);
    }
    if (url.endsWith('/') === false) {
        url += '/';
    }
    return url;
}
function getTimeStr() {
    var d = new Date();
    var hours = d.getHours();
    var hoursStr = '';
    if (hours === 0) {
        hoursStr = '12';
    }
    else if (hours > 12) {
        hoursStr = (hours - 12).toString();
    }
    else {
        hoursStr = hours.toString();
    }
    var mins = d.getMinutes();
    var minsStr = '';
    if (mins < 10) {
        minsStr = '0' + mins;
    }
    else {
        minsStr = mins.toString();
    }
    return hoursStr + ':' + minsStr + ' ' + (hours > 12 ? 'PM' : 'AM');
}
function getEmPixels() {
    var style = getComputedStyle(document.body);
    return Number.parseFloat(style.fontSize.substr(0, style.fontSize.length - 2));
}
function pxToNumber(pxValue) {
    if (pxValue.endsWith('px')) {
        return Number.parseFloat(pxValue.substr(0, pxValue.length - 2));
    }
    else {
        return Number.NaN;
    }
}
function clamp(value, min, max) {
    if (value < min) {
        return min;
    }
    else if (value > max) {
        return max;
    }
    else {
        return value;
    }
}
function toDeg(rad) {
    return (180 / Math.PI) * rad;
}
function toRad(deg) {
    return (Math.PI / 180) * deg;
}
function mix(v1, v2, mix) {
    return v1 + clamp(mix, 0, 1) * (v2 - v1);
}
function toCss(r, g, b, a) {
    return 'rgb(' + r + ',' + g + ',' + b + (a === undefined ? '' : ',' + a) + ')';
}
function toSizeStr(val) {
    if (val < 1024) {
        return val + ' bytes';
    }
    else if (val < 1024 * 1024) {
        return (val / 1024).toFixed(1) + ' kb';
    }
    else {
        return (val / (1024 * 1024)).toFixed(1) + ' mb';
    }
}
function getBooleanValue(value) {
    if (value === undefined || value === null) {
        return false;
    }
    else if (typeof value === 'boolean') {
        return value;
    }
    else if (typeof value === 'function') {
        return value();
    }
    else {
        return false;
    }
}
function iOS() {
    return [
        'iPad Simulator',
        'iPhone Simulator',
        'iPod Simulator',
        'iPad',
        'iPhone',
        'iPod'
    ].includes(navigator.platform)
        // iPad on iOS 13 detection
        || (navigator.userAgent.includes('Mac') && 'ontouchend' in document);
}


/***/ }),

/***/ "./src/Util/Profiler.ts":
/*!******************************!*\
  !*** ./src/Util/Profiler.ts ***!
  \******************************/
/*! exports provided: Profiler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Profiler", function() { return Profiler; });
/* harmony import */ var _Stopwatch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Stopwatch */ "./src/Util/Stopwatch.ts");

/**
 * Utility class for logging timing messages for profile code
 */
var Profiler = /** @class */ (function () {
    function Profiler() {
        this.sw = new _Stopwatch__WEBPACK_IMPORTED_MODULE_0__["Stopwatch"]();
    }
    Object.defineProperty(Profiler.prototype, "elapsedMs", {
        /**
         * The elapsed time in milliseconds
         */
        get: function () {
            return this.sw.elapsedMs;
        },
        enumerable: false,
        configurable: true
    });
    /**
     * Prints a message to console of the elapsed time
     *
     * @param msg The message to print with the time
     */
    Profiler.prototype.log = function (msg) {
        console.log(msg + ' ' + this.elapsedMs.toFixed(1) + ' ms');
        this.sw.restart();
    };
    return Profiler;
}());



/***/ }),

/***/ "./src/Util/Stopwatch.ts":
/*!*******************************!*\
  !*** ./src/Util/Stopwatch.ts ***!
  \*******************************/
/*! exports provided: Stopwatch */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Stopwatch", function() { return Stopwatch; });
/**
 * Utility class for tracking time
 */
var Stopwatch = /** @class */ (function () {
    function Stopwatch(start) {
        if (start === void 0) { start = true; }
        this.accumulatedMs = 0;
        this.startTime = NaN;
        this._paused = false;
        this.reset(start);
    }
    Object.defineProperty(Stopwatch.prototype, "paused", {
        get: function () {
            return this._paused;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Stopwatch.prototype, "running", {
        get: function () {
            return !this.paused;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Stopwatch.prototype, "elapsedMs", {
        /**
         * The elapsed time in milliseconds
         */
        get: function () {
            if (isNaN(this.startTime)) {
                return this.accumulatedMs;
            }
            else {
                return this.accumulatedMs + (this.getTimeMs() - this.startTime);
            }
        },
        set: function (value) {
            this.accumulatedMs = value;
            if (this.running) {
                this.startTime = this.getTimeMs();
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Stopwatch.prototype, "elapsedS", {
        /**
         * The elapsed time in milliseconds
         */
        get: function () {
            return this.elapsedMs / 1000;
        },
        enumerable: false,
        configurable: true
    });
    Stopwatch.prototype.getTimeMs = function () {
        // window.performance is not defined for nodejs so our test need
        // this to compile
        if (typeof window !== 'undefined' && typeof window.performance != 'undefined') {
            return window.performance.now();
        }
        else {
            return Date.now();
        }
    };
    Stopwatch.prototype.reset = function (start) {
        this.accumulatedMs = 0;
        if (start) {
            this._paused = false;
            this.startTime = this.getTimeMs();
        }
        else {
            this._paused = true;
            this.startTime = NaN;
        }
    };
    Stopwatch.prototype.restart = function () {
        this.reset(true);
    };
    Stopwatch.prototype.stop = function () {
        if (this._paused === false) {
            this._paused = true;
            this.accumulatedMs = this.elapsedMs;
            this.startTime = NaN;
        }
    };
    Stopwatch.prototype.start = function () {
        if (this._paused === true) {
            this._paused = false;
            this.startTime = this.getTimeMs();
        }
    };
    return Stopwatch;
}());



/***/ }),

/***/ "./src/Util/hsvColor.ts":
/*!******************************!*\
  !*** ./src/Util/hsvColor.ts ***!
  \******************************/
/*! exports provided: hsvColor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hsvColor", function() { return hsvColor; });
/* harmony import */ var _gl_glColor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../gl/glColor */ "./src/gl/glColor.ts");

/**
 * Class for representing color values. Values are on a 0-1 scale.
 */
var hsvColor = /** @class */ (function () {
    /**
     * @param color HSV values to store in this object
     */
    function hsvColor(color) {
        this.h = color[0];
        this.s = color[1];
        this.v = color[2];
    }
    /**
     * Sets the HSV values from html (0-255) RGB values
     *
     * @param r Red value
     * @param g Green value
     * @param b Blue value
     */
    hsvColor.prototype.fromHtmlValues = function (r, g, b) {
        var max = Math.max(r, g, b);
        var min = Math.min(r, g, b);
        var d = max - min;
        var h = 0;
        var s = (max === 0 ? 0 : d / max);
        var v = max / 255;
        switch (max) {
            case min:
                h = 0;
                break;
            case r:
                h = (g - b) + d * (g < b ? 6 : 0);
                h /= 6 * d;
                break;
            case g:
                h = (b - r) + d * 2;
                h /= 6 * d;
                break;
            case b:
                h = (r - g) + d * 4;
                h /= 6 * d;
                break;
        }
        this.h = h;
        this.s = s;
        this.v = v;
    };
    /**
     * Creates RGB values
     *
     * @param range Max RGB value
     * @returns The RGB values as an array
     */
    hsvColor.prototype.toRGBValues = function (range) {
        if (range === void 0) { range = 255; }
        var r, g, b;
        var i = Math.floor(this.h * 6);
        var f = this.h * 6 - i;
        var p = this.v * (1 - this.s);
        var q = this.v * (1 - f * this.s);
        var t = this.v * (1 - (1 - f) * this.s);
        switch (i % 6) {
            case 0:
                r = this.v, g = t, b = p;
                break;
            case 1:
                r = q, g = this.v, b = p;
                break;
            case 2:
                r = p, g = this.v, b = t;
                break;
            case 3:
                r = p, g = q, b = this.v;
                break;
            case 4:
                r = t, g = p, b = this.v;
                break;
            case 5:
                r = this.v, g = p, b = q;
                break;
            default:
                r = 0;
                g = 0;
                b = 0;
        }
        return [range * r, range * g, range * b];
    };
    /**
     * Creates an hsvColor object from an htmlColor object.
     *
     * @param color The htmlColor object.
     * @returns The hsvColor object.
     */
    hsvColor.fromHtmlColor = function (color) {
        var r = color.r;
        var g = color.g;
        var b = color.b;
        var max = Math.max(r, g, b);
        var min = Math.min(r, g, b);
        var d = max - min;
        var h = 0;
        var s = (max === 0 ? 0 : d / max);
        var v = max / 255;
        switch (max) {
            case min:
                h = 0;
                break;
            case r:
                h = (g - b) + d * (g < b ? 6 : 0);
                h /= 6 * d;
                break;
            case g:
                h = (b - r) + d * 2;
                h /= 6 * d;
                break;
            case b:
                h = (r - g) + d * 4;
                h /= 6 * d;
                break;
        }
        return new hsvColor([h, s, v]);
    };
    /**
     * Creates an hsvColor object from a glColor object.
     *
     * @param color The glColor object.
     * @returns The hsvColor object.
     */
    hsvColor.fromGlColor = function (color) {
        return hsvColor.fromHtmlColor(color.toHtmlColor());
    };
    /**
     * Creates a glColor object from this object.
     *
     * @returns The glColor object.
     */
    hsvColor.prototype.toGlColor = function () {
        return new _gl_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"](this.toRGBValues(1));
    };
    /**
     * Creates an htmlColor object from this object.
     *
     * @returns The glColor object.
     */
    hsvColor.prototype.toHtmlColor = function () {
        return this.toGlColor().toHtmlColor();
    };
    return hsvColor;
}());



/***/ }),

/***/ "./src/Util/htmlColor.ts":
/*!*******************************!*\
  !*** ./src/Util/htmlColor.ts ***!
  \*******************************/
/*! exports provided: htmlColor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "htmlColor", function() { return htmlColor; });
/* harmony import */ var _Color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Color */ "./src/Util/Color.ts");
/* harmony import */ var _Globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _gl_glColor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../gl/glColor */ "./src/gl/glColor.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();



/**
 * Color class that requires RGB values to be between 0 and 255
 */
var htmlColor = /** @class */ (function (_super) {
    __extends(htmlColor, _super);
    /**
     * @param color An RGB color array
     */
    function htmlColor(color) {
        var _this = this;
        if (color.length != 3) {
            throw new Error('Invalid color array length (expected 3 elements)');
        }
        if (color[0] < 0 || color[0] > 255) {
            throw new Error('Invalid color \'r\' value (expected [0-255])');
        }
        if (color[1] < 0 || color[1] > 255) {
            throw new Error('Invalid color \'g\' value (expected [0-255])');
        }
        if (color[2] < 0 || color[2] > 255) {
            throw new Error('Invalid color \'b\' value (expected [0-255])');
        }
        _this = _super.call(this, color) || this;
        return _this;
    }
    Object.defineProperty(htmlColor.prototype, "luminosity", {
        get: function () {
            // adobe Y'204 luminosity
            return (0.3086 * this.r + 0.6094 * this.g + 0.0820 * this.b) / 255;
        },
        set: function (value) {
            var oldLuminosity = this.luminosity;
            /*
            this.r += 255 * 0.3086 * (value - oldLuminosity);
            this.g += 255 * 0.6094 * (value - oldLuminosity);
            this.b += 255 * 0.0820 * (value - oldLuminosity);
            */
            /*
            this.r += 255 * (value - oldLuminosity) / 0.3086;
            this.g += 255 * (value - oldLuminosity) / 0.6094;
            this.b += 255 * (value - oldLuminosity) / 0.0820;
            */
            var f = value / oldLuminosity;
            this.r *= f;
            this.g += f;
            this.b += f;
        },
        enumerable: false,
        configurable: true
    });
    /**
     * Converts a value to a hex string
     *
     * @param c The numeric value
     * @returns The hex string
     */
    htmlColor.prototype.componentToHex = function (c) {
        var hex = c.toString(16);
        return hex.length == 1 ? '0' + hex : hex;
    };
    /**
     * Converts this object to a hex string (e.g. #0f0f0f).
     *
     * @returns A hex string.
     */
    htmlColor.prototype.toHex = function () {
        var rHex = this.componentToHex(this.r);
        var gHex = this.componentToHex(this.g);
        var bHex = this.componentToHex(this.b);
        return '#' + rHex + gHex + bHex;
    };
    /**
     * Converts this object to a css string (e.g. 'rgb(128,228,32)').
     *
     * @returns A css string.
     */
    htmlColor.prototype.toCss = function () {
        return Object(_Globals__WEBPACK_IMPORTED_MODULE_1__["toCss"])(this.r, this.g, this.b);
    };
    /**
     * Converts a css style string (e.g. 'rgb(24,36,83)') to a color
     *
     * @param css The css string.
     * @returns The color.
     */
    htmlColor.fromCss = function (css) {
        var regex = /\d+/g;
        var vals = css.match(regex).slice(0, 3);
        return new htmlColor([parseInt(vals[0]), parseInt(vals[1]), parseInt(vals[2])]);
    };
    /**
     * Creates an htmlColor object from a hex string
     *
     * @param hex The hex string
     * @returns The htmlColor object
     */
    htmlColor.fromHex = function (hex) {
        var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
        if (result) {
            var r = parseInt(result[1], 16);
            var g = parseInt(result[2], 16);
            var b = parseInt(result[3], 16);
            return new htmlColor([r, g, b]);
        }
        else {
            return new htmlColor([0, 0, 0]);
        }
    };
    /**
     * Creates an htmlColor object using values in a Color object.
     *
     * @param color A generic Color object.
     */
    htmlColor.fromColor = function (color) {
        var r = htmlColor.clamp(color.r);
        var g = htmlColor.clamp(color.g);
        var b = htmlColor.clamp(color.b);
        return new htmlColor([r, g, b]);
    };
    /**
     * Rounds a number to a whole number and clamps it between 0 and 255.
     *
     * @param val The value.
     * @returns The rounded & clamped value
     */
    htmlColor.clamp = function (val) {
        val = Math.round(val);
        if (val < 0) {
            return 0;
        }
        else if (val > 255) {
            return 255;
        }
        else {
            return val;
        }
    };
    /**
     * Converts this color to an equivalent gray-scale color
     *
     * @returns The gray-scale color.
     */
    htmlColor.prototype.toGray = function () {
        var rgb = Math.round((this.r + this.g + this.b) / 3);
        return new htmlColor([rgb, rgb, rgb]);
    };
    /**
     * Converts this object to a WebGL color object (0-1 based)
     *
     * @returns A glColor object.
     */
    htmlColor.prototype.toGlColor = function () {
        return new _gl_glColor__WEBPACK_IMPORTED_MODULE_2__["glColor3"]([this.r / 255, this.g / 255, this.b / 255]);
    };
    htmlColor.white = new htmlColor([255, 255, 255]);
    htmlColor.black = new htmlColor([0, 0, 0]);
    htmlColor.red = new htmlColor([255, 0, 0]);
    htmlColor.green = new htmlColor([0, 255, 0]);
    htmlColor.blue = new htmlColor([0, 0, 255]);
    htmlColor.orange = new htmlColor([255, 165, 0]);
    return htmlColor;
}(_Color__WEBPACK_IMPORTED_MODULE_0__["Color"]));



/***/ }),

/***/ "./src/Util/htmlColorWithAlpha.ts":
/*!****************************************!*\
  !*** ./src/Util/htmlColorWithAlpha.ts ***!
  \****************************************/
/*! exports provided: htmlColorWithAlpha */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "htmlColorWithAlpha", function() { return htmlColorWithAlpha; });
/* harmony import */ var _htmlColor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./htmlColor */ "./src/Util/htmlColor.ts");
/* harmony import */ var _Globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Globals */ "./src/Util/Globals.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * An html color with a transparency value
 */
var htmlColorWithAlpha = /** @class */ (function (_super) {
    __extends(htmlColorWithAlpha, _super);
    /**
     * @param color An RGBA color array
     */
    function htmlColorWithAlpha(color) {
        var _this = _super.call(this, [color[0], color[1], color[2]]) || this;
        /** The transparency (alpha) value */
        _this.a = 255;
        if (color.length != 4) {
            throw new Error('Invalid color array length (expected 4 elements)');
        }
        if (color[4] < 0 || color[4] > 255) {
            throw new Error('Invalid color \'a\' value (expected [0-255])');
        }
        _this.a = color[3];
        return _this;
    }
    /**
     * Converts this object to a css string (e.g. 'rgb(128,228,32,255)').
     *
     * @returns A css string.
     */
    htmlColorWithAlpha.prototype.toCss = function () {
        return Object(_Globals__WEBPACK_IMPORTED_MODULE_1__["toCss"])(this.r, this.g, this.b, this.a);
    };
    htmlColorWithAlpha.transparent = new htmlColorWithAlpha([0, 0, 0, 0]);
    return htmlColorWithAlpha;
}(_htmlColor__WEBPACK_IMPORTED_MODULE_0__["htmlColor"]));



/***/ }),

/***/ "./src/Util3D/BoundingBox.ts":
/*!***********************************!*\
  !*** ./src/Util3D/BoundingBox.ts ***!
  \***********************************/
/*! exports provided: BoundingBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BoundingBox", function() { return BoundingBox; });
/* harmony import */ var _Vec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vec */ "./src/Util3D/Vec.ts");

var BoundingBox = /** @class */ (function () {
    function BoundingBox(min, max) {
        if (min === void 0) { min = new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE]); }
        if (max === void 0) { max = new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE]); }
        this.min = min;
        this.max = max;
    }
    Object.defineProperty(BoundingBox.prototype, "width", {
        get: function () {
            return this.max.x - this.min.x;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BoundingBox.prototype, "height", {
        get: function () {
            return this.max.y - this.min.y;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BoundingBox.prototype, "depth", {
        get: function () {
            return this.max.z - this.min.z;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BoundingBox.prototype, "diagonal", {
        get: function () {
            var w = this.width;
            var h = this.height;
            var d = this.depth;
            return Math.sqrt(w * w + h * h + d * d);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BoundingBox.prototype, "center", {
        get: function () {
            return new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([
                (this.min.x + this.max.x) / 2,
                (this.min.y + this.max.y) / 2,
                (this.min.z + this.max.z) / 2,
            ]);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BoundingBox.prototype, "corners", {
        get: function () {
            var corners = [];
            corners.push(new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([this.min.x, this.min.y, this.min.z]));
            corners.push(new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([this.min.x, this.min.y, this.max.z]));
            corners.push(new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([this.min.x, this.max.y, this.min.z]));
            corners.push(new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([this.min.x, this.max.y, this.max.z]));
            corners.push(new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([this.max.x, this.min.y, this.min.z]));
            corners.push(new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([this.max.x, this.min.y, this.max.z]));
            corners.push(new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([this.max.x, this.max.y, this.min.z]));
            corners.push(new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([this.max.x, this.max.y, this.max.z]));
            return corners;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BoundingBox, "infinite", {
        get: function () {
            var MAX = Number.POSITIVE_INFINITY;
            var MIN = Number.NEGATIVE_INFINITY;
            return new BoundingBox(new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([MIN, MIN, MIN]), new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([MAX, MAX, MAX]));
        },
        enumerable: false,
        configurable: true
    });
    BoundingBox.prototype.inside = function (vec) {
        if (vec.x >= this.min.x && vec.x <= this.max.x &&
            vec.y >= this.min.y && vec.y <= this.max.y &&
            vec.z >= this.min.z && vec.z <= this.max.z) {
            return true;
        }
        else {
            return false;
        }
    };
    BoundingBox.prototype.toString = function (digits) {
        return '[' + this.min.toString(digits) + ']' +
            '[' + this.max.toString(digits) + ']';
    };
    BoundingBox.prototype.update = function (v) {
        if (isNaN(v.x) || isNaN(v.y) || isNaN(v.z)) {
            //console.log('----------------------------------------------NaN');
            return;
        }
        this.min.x = Math.min(this.min.x, v.x);
        this.min.y = Math.min(this.min.y, v.y);
        this.min.z = Math.min(this.min.z, v.z);
        this.max.x = Math.max(this.max.x, v.x);
        this.max.y = Math.max(this.max.y, v.y);
        this.max.z = Math.max(this.max.z, v.z);
    };
    BoundingBox.prototype.merge = function (other) {
        this.min.x = Math.min(this.min.x, other.min.x);
        this.min.y = Math.min(this.min.y, other.min.y);
        this.min.z = Math.min(this.min.z, other.min.z);
        this.max.x = Math.max(this.max.x, other.max.x);
        this.max.y = Math.max(this.max.y, other.max.y);
        this.max.z = Math.max(this.max.z, other.max.z);
    };
    BoundingBox.prototype.multM = function (mat) {
        var ret = new BoundingBox();
        var v1 = mat.multV(new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec4"]([this.min.x, this.min.y, this.min.z, 1]));
        var v2 = mat.multV(new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec4"]([this.max.x, this.max.y, this.max.z, 1]));
        ret.min.x = Math.min(v1.x, v2.x);
        ret.min.y = Math.min(v1.y, v2.y);
        ret.min.z = Math.min(v1.z, v2.z);
        ret.max.x = Math.max(v1.x, v2.x);
        ret.max.y = Math.max(v1.y, v2.y);
        ret.max.z = Math.max(v1.z, v2.z);
        return ret;
    };
    return BoundingBox;
}());



/***/ }),

/***/ "./src/Util3D/BoundingPts.ts":
/*!***********************************!*\
  !*** ./src/Util3D/BoundingPts.ts ***!
  \***********************************/
/*! exports provided: BoundingPts */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BoundingPts", function() { return BoundingPts; });
/**
 * A set of points used to define the bounding edges of an object. All points are
 * enclosed in the object
 */
var BoundingPts = /** @class */ (function () {
    function BoundingPts(pts) {
        this.pts = pts;
    }
    BoundingPts.prototype.get = function (i) {
        return this.pts[i];
    };
    BoundingPts.prototype.distToPoint = function (pt) {
        var ret = {
            min: Number.MAX_VALUE,
            max: -Number.MAX_VALUE,
        };
        this.pts.forEach(function (pt2) {
            var x = pt2.x - pt.x;
            var y = pt2.y - pt.y;
            var z = pt2.z - pt.z;
            var d = x * x + y * y + z * z;
            ret.min = Math.min(d, ret.min);
            ret.max = Math.max(d, ret.max);
        });
        // don't bother getting the square root of every calculation, just the min and max
        ret.min = Math.sqrt(ret.min);
        ret.max = Math.sqrt(ret.max);
        return ret;
    };
    BoundingPts.prototype.distToPlane = function (plane) {
        var ret = {
            min: Number.MAX_VALUE,
            max: -Number.MAX_VALUE,
        };
        this.pts.forEach(function (pt) {
            var d = plane.distToPt(pt);
            ret.min = Math.min(d, ret.min);
            ret.max = Math.max(d, ret.max);
        });
        return ret;
    };
    return BoundingPts;
}());



/***/ }),

/***/ "./src/Util3D/IndexedTriangle.ts":
/*!***************************************!*\
  !*** ./src/Util3D/IndexedTriangle.ts ***!
  \***************************************/
/*! exports provided: IndexedTriangle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IndexedTriangle", function() { return IndexedTriangle; });
/* harmony import */ var _IndexedVec3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./IndexedVec3 */ "./src/Util3D/IndexedVec3.ts");

/**
 * Minimalist wrapper around a WebGL triangle element
 */
var IndexedTriangle = /** @class */ (function () {
    function IndexedTriangle(vertices, normals, i1, i2, i3) {
        this.v1 = new _IndexedVec3__WEBPACK_IMPORTED_MODULE_0__["IndexedVec3"](vertices, i1);
        this.v2 = new _IndexedVec3__WEBPACK_IMPORTED_MODULE_0__["IndexedVec3"](vertices, i2);
        this.v3 = new _IndexedVec3__WEBPACK_IMPORTED_MODULE_0__["IndexedVec3"](vertices, i3);
        this.n1 = new _IndexedVec3__WEBPACK_IMPORTED_MODULE_0__["IndexedVec3"](normals, i1);
        this.n2 = new _IndexedVec3__WEBPACK_IMPORTED_MODULE_0__["IndexedVec3"](normals, i2);
        this.n3 = new _IndexedVec3__WEBPACK_IMPORTED_MODULE_0__["IndexedVec3"](normals, i3);
        this.i1 = i1;
        this.i2 = i2;
        this.i3 = i3;
    }
    Object.defineProperty(IndexedTriangle.prototype, "minX", {
        get: function () {
            return Math.min(this.v1.x, this.v2.x, this.v3.x);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IndexedTriangle.prototype, "minY", {
        get: function () {
            return Math.min(this.v1.y, this.v2.y, this.v3.y);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IndexedTriangle.prototype, "minZ", {
        get: function () {
            return Math.min(this.v1.z, this.v2.z, this.v3.z);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IndexedTriangle.prototype, "maxX", {
        get: function () {
            return Math.max(this.v1.x, this.v2.x, this.v3.x);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IndexedTriangle.prototype, "maxY", {
        get: function () {
            return Math.max(this.v1.y, this.v2.y, this.v3.y);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IndexedTriangle.prototype, "maxZ", {
        get: function () {
            return Math.max(this.v1.z, this.v2.z, this.v3.z);
        },
        enumerable: false,
        configurable: true
    });
    IndexedTriangle.prototype.computeNormal = function () {
        var v1 = this.v1.toVec3();
        var v2 = this.v2.toVec3();
        var v3 = this.v3.toVec3();
        var a = v2.subtract(v1);
        var b = v3.subtract(v2);
        return a.cross(b).normalize();
    };
    return IndexedTriangle;
}());



/***/ }),

/***/ "./src/Util3D/IndexedVec3.ts":
/*!***********************************!*\
  !*** ./src/Util3D/IndexedVec3.ts ***!
  \***********************************/
/*! exports provided: IndexedVec3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IndexedVec3", function() { return IndexedVec3; });
/* harmony import */ var _Vec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vec */ "./src/Util3D/Vec.ts");

var IndexedVec3 = /** @class */ (function () {
    function IndexedVec3(values, index) {
        this.values = values;
        this.index = index;
    }
    Object.defineProperty(IndexedVec3.prototype, "x", {
        get: function () {
            return this.values[3 * this.index + 0];
        },
        set: function (val) {
            this.values[3 * this.index + 0] = val;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IndexedVec3.prototype, "y", {
        get: function () {
            return this.values[3 * this.index + 1];
        },
        set: function (val) {
            this.values[3 * this.index + 1] = val;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(IndexedVec3.prototype, "z", {
        get: function () {
            return this.values[3 * this.index + 2];
        },
        set: function (val) {
            this.values[3 * this.index + 2] = val;
        },
        enumerable: false,
        configurable: true
    });
    IndexedVec3.prototype.toVec3 = function () {
        return new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([this.x, this.y, this.z]);
    };
    return IndexedVec3;
}());



/***/ }),

/***/ "./src/Util3D/Mat.ts":
/*!***************************!*\
  !*** ./src/Util3D/Mat.ts ***!
  \***************************/
/*! exports provided: Mat4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Mat4", function() { return Mat4; });
/* harmony import */ var _Vec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vec */ "./src/Util3D/Vec.ts");
var __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};

/**
 * An x-y-z-w matrix for use in WebGL applications.
 */
var Mat4 = /** @class */ (function () {
    /**
     * @param values If supplied, the initial matrix values. If not supplied, the matrix is
     * initialized as an identity matrix.
     */
    function Mat4(values) {
        if (values) {
            this.values = __spreadArray([], values, true);
        }
        else {
            this.values = [
                1, 0, 0, 0,
                0, 1, 0, 0,
                0, 0, 1, 0,
                0, 0, 0, 1
            ];
        }
    }
    Object.defineProperty(Mat4.prototype, "scaleFactors", {
        get: function () {
            var sX = (new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([this.get(0, 0), this.get(1, 0), this.get(2, 0)])).magnitude();
            var sY = (new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([this.get(0, 0), this.get(1, 0), this.get(2, 0)])).magnitude();
            var sZ = (new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([this.get(0, 0), this.get(1, 0), this.get(2, 0)])).magnitude();
            return new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]([sX, sY, sZ]);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Mat4, "identity", {
        /**
         * Get's an identity matrix. Same as creating a new matrix, but syntactically
         * shows what is happening.
         *
         * @returns A new idenity matrix.
         */
        get: function () {
            return new Mat4();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Mat4, "ortho", {
        /**
         * Creates an orthographic matrix in the WebGL coordinate system (positive z towards you)
         *
         * @return A new orthographic matrix
         */
        get: function () {
            return Mat4.makeOrtho(-1, 1, -1, 1, 1, -1);
        },
        enumerable: false,
        configurable: true
    });
    /**
     * Creates a copy of the matrix.
     *
     * @returns A copy of the matrix.
     */
    Mat4.prototype.clone = function () {
        return new Mat4(this.values);
    };
    /**
     * Gets a value in the matrix.
     *
     * @param row The row index.
     * @param col The column index.
     * @returns The matrix value.
     */
    Mat4.prototype.get = function (row, col) {
        return this.values[4 * row + col];
    };
    /**
     * Sets a value in the matrix.
     *
     * @param row The row index.
     * @param col The column index.
     * @param val The value.
     */
    Mat4.prototype.set = function (row, col, val) {
        this.values[4 * row + col] = val;
    };
    /**
     * Multiplies this matrix against a vector and returns the result.
     *
     * @param vec The vector.
     * @return The result of the multiplication.
     */
    Mat4.prototype.multV = function (vec) {
        var vals = [];
        for (var row = 0; row < 4; row++) {
            var sum = 0;
            for (var col = 0; col < 4; col++) {
                sum += this.values[row * 4 + col] * vec.values[col];
            }
            vals.push(sum);
        }
        return new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec4"](vals);
    };
    /**
     * Transforms a 3d vec by this matrix.
     *
     * @param vec A 3d vec.
     * @param w The value to use for w. 0 = ignore translation. 1 = include.
     * @returns The new 3d vec.
     */
    Mat4.prototype.multVec3 = function (vec, w) {
        if (w === void 0) { w = 1; }
        return this.multV(vec.toVec4(w)).xyz;
    };
    /**
     * Multiplies this matrix against another matrix and returns the result.
     *
     * @param other The matrix.
     * @return The result of the multiplication.
     */
    Mat4.prototype.multM = function (other) {
        var result = new Mat4();
        for (var row = 0; row < 4; row++) {
            for (var col = 0; col < 4; col++) {
                var sum = 0;
                for (var i = 0; i < 4; i++) {
                    sum += this.get(row, i) * other.get(i, col);
                }
                result.set(row, col, sum);
            }
        }
        return result;
    };
    /**
     * Inverts this matrix and returns the result.
     *
     * @returns The inverse of this.
     */
    Mat4.prototype.inverse = function () {
        var result = new Mat4();
        var a00 = this.values[0], a01 = this.values[1], a02 = this.values[2], a03 = this.values[3];
        var a10 = this.values[4], a11 = this.values[5], a12 = this.values[6], a13 = this.values[7];
        var a20 = this.values[8], a21 = this.values[9], a22 = this.values[10], a23 = this.values[11];
        var a30 = this.values[12], a31 = this.values[13], a32 = this.values[14], a33 = this.values[15];
        var b00 = a00 * a11 - a01 * a10;
        var b01 = a00 * a12 - a02 * a10;
        var b02 = a00 * a13 - a03 * a10;
        var b03 = a01 * a12 - a02 * a11;
        var b04 = a01 * a13 - a03 * a11;
        var b05 = a02 * a13 - a03 * a12;
        var b06 = a20 * a31 - a21 * a30;
        var b07 = a20 * a32 - a22 * a30;
        var b08 = a20 * a33 - a23 * a30;
        var b09 = a21 * a32 - a22 * a31;
        var b10 = a21 * a33 - a23 * a31;
        var b11 = a22 * a33 - a23 * a32;
        // Calculate the determinant
        var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
        if (!det) {
            return null;
        }
        det = 1.0 / det;
        result.values[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;
        result.values[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;
        result.values[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;
        result.values[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;
        result.values[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;
        result.values[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;
        result.values[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;
        result.values[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;
        result.values[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;
        result.values[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;
        result.values[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;
        result.values[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;
        result.values[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;
        result.values[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;
        result.values[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;
        result.values[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;
        return result;
    };
    /**
     * Transposes this matrix and returns the result as a new matrix.
     *
     * @returns The transposed matrix.
     */
    Mat4.prototype.transpose = function () {
        var result = new Mat4();
        for (var row = 0; row < 4; row++) {
            for (var col = 0; col < 4; col++) {
                result.set(row, col, this.get(col, row));
            }
        }
        return result;
    };
    /**
     * Creates a matrix that contains a scale operation.
     *
     * @param scale The scale factor
     * @returns The transformation matrix.
     */
    Mat4.fromScale = function (scale) {
        return new Mat4([
            scale, 0, 0, 0,
            0, scale, 0, 0,
            0, 0, scale, 0,
            0, 0, 0, 1
        ]);
    };
    /**
     * Creates a matrix that contains a translation operation.
     *
     * @param vec The translations.
     * @returns The transformation matrix.
     */
    Mat4.fromTranslation = function (v) {
        return new Mat4([
            1, 0, 0, v.x,
            0, 1, 0, v.y,
            0, 0, 1, v.z,
            0, 0, 0, 1
        ]);
    };
    Mat4.fromRotX = function (angle) {
        var c = Math.cos(angle);
        var s = Math.sin(angle);
        return new Mat4([
            1, 0, 0, 0,
            0, c, s, 0,
            0, -s, c, 0,
            0, 0, 0, 1
        ]);
    };
    Mat4.fromRotY = function (angle) {
        var c = Math.cos(angle);
        var s = Math.sin(angle);
        return new Mat4([
            c, 0, -s, 0,
            0, 1, 0, 0,
            s, 0, c, 0,
            0, 0, 0, 1
        ]);
    };
    Mat4.fromRotZ = function (angle) {
        var c = Math.cos(angle);
        var s = Math.sin(angle);
        return new Mat4([
            c, s, 0, 0,
            -s, c, 0, 0,
            0, 0, 1, 0,
            0, 0, 0, 1
        ]);
    };
    Mat4.prototype.rotX = function (angle) {
        this.values = Mat4.fromRotX(angle).multM(this).values;
        return this;
    };
    Mat4.prototype.rotY = function (angle) {
        this.values = Mat4.fromRotY(angle).multM(this).values;
        return this;
    };
    Mat4.prototype.rotZ = function (angle) {
        this.values = Mat4.fromRotZ(angle).multM(this).values;
        return this;
    };
    Mat4.prototype.preRotX = function (angle) {
        this.values = this.multM(Mat4.fromRotX(angle)).values;
        return this;
    };
    Mat4.prototype.preRotY = function (angle) {
        this.values = this.multM(Mat4.fromRotY(angle)).values;
        return this;
    };
    Mat4.prototype.preRotZ = function (angle) {
        this.values = this.multM(Mat4.fromRotZ(angle)).values;
        return this;
    };
    Mat4.prototype.translate = function (offset) {
        this.values = Mat4.fromTranslation(offset).multM(this).values;
        return this;
    };
    Mat4.prototype.scale = function (scale) {
        this.values = Mat4.fromScale(scale).multM(this).values;
        return this;
    };
    /**
     * Creates a viewing matrix. See gluLookAt.
     *
     * @param eye The eye position.
     * @param center The point of interest.
     * @param up The up vector.
     * @returns The viewing matrix.
     */
    Mat4.makeLookAt = function (eye, center, up) {
        var a = eye.subtract(center).normalize();
        var b = up.cross(a).normalize();
        var c = a.cross(b).normalize();
        var m = new Mat4([
            b.x, b.y, b.z, 0,
            c.x, c.y, c.z, 0,
            a.x, a.y, a.z, 0,
            0, 0, 0, 1
        ]);
        var t = new Mat4([
            1, 0, 0, -eye.x,
            0, 1, 0, -eye.y,
            0, 0, 1, -eye.z,
            0, 0, 0, 1
        ]);
        var result = m.multM(t);
        return result;
    };
    /**
     * Creates a perspective matrix. See gluPerspective.
     *
     * @param fovy Field of view (in degrees).
     * @param aspect View aspect ratio.
     * @param znear Near clipping plane.
     * @param zfar Far clipping plane.
     */
    Mat4.makePerspective = function (fovy, aspect, znear, zfar) {
        var ymax = znear * Math.tan(fovy * Math.PI / 360.0);
        var ymin = -ymax;
        var xmin = ymin * aspect;
        var xmax = ymax * aspect;
        return Mat4.makeFrustum(xmin, xmax, ymin, ymax, znear, zfar);
    };
    /**
     * Creates a perspective matrix. See gluFrustum.
     *
     * @param left The left clipping plane.
     * @param right The right clipping plane.
     * @param bottom The bottom clipping plane.
     * @param top The top clipping plane.
     * @param znear The near clipping plane.
     * @param zfar The far clipping plane.
     * @returns the perspective matrix.
     */
    Mat4.makeFrustum = function (left, right, bottom, top, znear, zfar) {
        var X = 2 * znear / (right - left);
        var Y = 2 * znear / (top - bottom);
        var A = (right + left) / (right - left);
        var B = (top + bottom) / (top - bottom);
        var C = -(zfar + znear) / (zfar - znear);
        var D = -2 * zfar * znear / (zfar - znear);
        return new Mat4([
            X, 0, A, 0,
            0, Y, B, 0,
            0, 0, C, D,
            0, 0, -1, 0
        ]);
    };
    /**
     * Creates a perspective matrix. See gluOrtho.
     *
     * @param left The left clipping plane.
     * @param right The right clipping plane.
     * @param bottom The bottom clipping plane.
     * @param top The top clipping plane.
     * @param znear The near clipping plane.
     * @param zfar The far clipping plane.
     * @returns the perspective matrix.
     */
    Mat4.makeOrtho = function (left, right, bottom, top, near, far) {
        return new Mat4([
            2 / (right - left), 0, 0, (right + left) / (right - left),
            0, 2 / (top - bottom), 0, (top + bottom) / (top - bottom),
            0, 0, 2 / (far - near), (far + near) / (far - near),
            0, 0, 0, 1
        ]);
    };
    Mat4.prototype.log = function (msg, digits) {
        if (digits === void 0) { digits = 2; }
        console.log(msg);
        for (var r = 0; r < 4; r++) {
            var line = '';
            for (var c = 0; c < 4; c++) {
                line += this.get(r, c).toFixed(digits) + ' ';
            }
            console.log(line);
        }
        console.log();
    };
    return Mat4;
}());



/***/ }),

/***/ "./src/Util3D/SphericalCoord.ts":
/*!**************************************!*\
  !*** ./src/Util3D/SphericalCoord.ts ***!
  \**************************************/
/*! exports provided: SphericalCoord */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SphericalCoord", function() { return SphericalCoord; });
/**
 * Spherical coordinates based on the WebGL viewing system: x=left-right, y=up-down, z=near-far
 */
var SphericalCoord = /** @class */ (function () {
    /**
     * @param radius
     * @param elevationAngle
     * @param rotationAngle
     */
    function SphericalCoord(radius, elevationAngle, rotationAngle) {
        /**
         * The distance from the origin to the point
         */
        this.radius = 0;
        /**
         * The elevation from the floor to the point. 0 and 180 are on the
         * floor. 90 points up.
         */
        this.elevationAngle = 0;
        /**
         * The angle, when looking down from the top, to the point. 0 points right.
         */
        this.rotationAngle = 0;
        this.radius = radius;
        this.elevationAngle = elevationAngle;
        this.rotationAngle = rotationAngle;
    }
    /**
     * Creates a spherical coordinate from a cartesian point
     *
     * @param pos The cartesian point.
     * @returns The spherical coordinate.
     */
    SphericalCoord.fromXYZ = function (pos) {
        var x = pos[0];
        var y = pos[1];
        var z = pos[2];
        var radius = Math.sqrt(x * x + y * y + z * z);
        var rotationAngle = (180 / Math.PI) * Math.atan2(z, x);
        var elevationAngle = (180 / Math.PI) * Math.asin(y / radius);
        return new SphericalCoord(radius, elevationAngle, rotationAngle);
    };
    /**
     * Converts this spherical coordinate to a cartesian coordinate.
     *
     * @returns The cartesian coordinate.
     */
    SphericalCoord.prototype.toXYZ = function () {
        var floorRadius = this.radius * Math.cos((Math.PI / 180) * this.elevationAngle);
        var x = floorRadius * Math.cos((Math.PI / 180) * this.rotationAngle);
        var y = this.radius * Math.sin((Math.PI / 180) * this.elevationAngle);
        var z = floorRadius * Math.sin((Math.PI / 180) * this.rotationAngle);
        return [x, y, z];
    };
    return SphericalCoord;
}());



/***/ }),

/***/ "./src/Util3D/TriangleObj.ts":
/*!***********************************!*\
  !*** ./src/Util3D/TriangleObj.ts ***!
  \***********************************/
/*! exports provided: NormalType, TriangleObj */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NormalType", function() { return NormalType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TriangleObj", function() { return TriangleObj; });
/* harmony import */ var _Vec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Vec */ "./src/Util3D/Vec.ts");
/* harmony import */ var _BoundingBox__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BoundingBox */ "./src/Util3D/BoundingBox.ts");
/* harmony import */ var _BoundingPts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./BoundingPts */ "./src/Util3D/BoundingPts.ts");
/* harmony import */ var _IndexedTriangle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./IndexedTriangle */ "./src/Util3D/IndexedTriangle.ts");
/* harmony import */ var _IndexedVec3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./IndexedVec3 */ "./src/Util3D/IndexedVec3.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _Util_Profiler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Util/Profiler */ "./src/Util/Profiler.ts");
/* harmony import */ var _Util_BlobFile__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Util/BlobFile */ "./src/Util/BlobFile.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
/* eslint-disable @typescript-eslint/no-unsafe-member-access */
/* eslint-disable @typescript-eslint/no-unsafe-assignment */








var NormalType;
(function (NormalType) {
    NormalType[NormalType["Smooth"] = 0] = "Smooth";
    NormalType[NormalType["Flat"] = 1] = "Flat";
})(NormalType || (NormalType = {}));
/**
 * Base class for representing an object from a bunch of triangles.
 */
var TriangleObj = /** @class */ (function () {
    function TriangleObj(name) {
        this.vertices = [];
        this.normals = [];
        this.indices = [];
        this.box = new _BoundingBox__WEBPACK_IMPORTED_MODULE_1__["BoundingBox"]();
        this.name = name;
    }
    Object.defineProperty(TriangleObj.prototype, "numVertices", {
        get: function () {
            return this.vertices.length / 3;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TriangleObj.prototype, "numTriangles", {
        get: function () {
            return this.indices.length / 3;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TriangleObj.prototype, "width", {
        get: function () {
            return this.box.width;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TriangleObj.prototype, "height", {
        get: function () {
            return this.box.height;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TriangleObj.prototype, "depth", {
        get: function () {
            return this.box.depth;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TriangleObj.prototype, "diagonal", {
        get: function () {
            return this.box.diagonal;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TriangleObj.prototype, "center", {
        get: function () {
            return this.box.center;
        },
        enumerable: false,
        configurable: true
    });
    TriangleObj.prototype.getTriangle = function (index) {
        var i1 = this.indices[3 * index + 0];
        var i2 = this.indices[3 * index + 1];
        var i3 = this.indices[3 * index + 2];
        return new _IndexedTriangle__WEBPACK_IMPORTED_MODULE_3__["IndexedTriangle"](this.vertices, this.normals, i1, i2, i3);
    };
    TriangleObj.prototype.pushQuad = function (v1, v2, v3, v4) {
        this.pushTriangle(v1, v2, v3);
        this.pushTriangle(v2, v4, v3);
    };
    TriangleObj.prototype.pushTriangle = function (v1, v2, v3) {
        var _a, _b, _c;
        // add indices
        var i1 = this.numVertices;
        var i2 = i1 + 1;
        var i3 = i1 + 2;
        this.indices.push(i1, i2, i3);
        // add vertices
        this.vertices.push(v1.x, v1.y, v1.z, v2.x, v2.y, v2.z, v3.x, v3.y, v3.z);
        this.box.update(v1);
        this.box.update(v2);
        this.box.update(v3);
        // add normals
        var tri = new _IndexedTriangle__WEBPACK_IMPORTED_MODULE_3__["IndexedTriangle"](this.vertices, this.normals, i1, i2, i3);
        var normal = tri.computeNormal();
        (_a = this.normals).push.apply(_a, normal.values);
        (_b = this.normals).push.apply(_b, normal.values);
        (_c = this.normals).push.apply(_c, normal.values);
    };
    TriangleObj.prototype.computeNormals = function (type) {
        var _a;
        if (type === NormalType.Smooth) {
            var multiNormVertices = [];
            for (var i = 0; i < this.numVertices; i++) {
                multiNormVertices.push(new MultiNormVertex());
            }
            // store the normals with each vertex - we'll later average these
            for (var i = 0; i < this.numTriangles; i++) {
                var tri = this.getTriangle(i);
                var n = tri.computeNormal();
                multiNormVertices[tri.i1].push(n);
                multiNormVertices[tri.i2].push(n);
                multiNormVertices[tri.i3].push(n);
            }
            // populate the normals array
            this.normals = [];
            for (var i = 0; i < multiNormVertices.length; i++) {
                (_a = this.normals).push.apply(_a, multiNormVertices[i].normal.values);
            }
        }
        else {
            // to go this way we need to have a unique vector and normal for each triangle
            // corner. Blow away the old stuff and rebuild
            var oldIndices = this.indices;
            var oldVertices = this.vertices;
            // reset everything
            this.vertices = [];
            this.normals = [];
            this.indices = [];
            // rebuild
            for (var i = 0; i < oldIndices.length / 3; i++) {
                var v1 = new _IndexedVec3__WEBPACK_IMPORTED_MODULE_4__["IndexedVec3"](oldVertices, oldIndices[3 * i + 0]);
                var v2 = new _IndexedVec3__WEBPACK_IMPORTED_MODULE_4__["IndexedVec3"](oldVertices, oldIndices[3 * i + 1]);
                var v3 = new _IndexedVec3__WEBPACK_IMPORTED_MODULE_4__["IndexedVec3"](oldVertices, oldIndices[3 * i + 2]);
                this.pushTriangle(v1, v2, v3);
            }
        }
    };
    TriangleObj.prototype.x = function (i) {
        return this.vertices[3 * i + 0];
    };
    TriangleObj.prototype.y = function (i) {
        return this.vertices[3 * i + 1];
    };
    TriangleObj.prototype.z = function (i) {
        return this.vertices[3 * i + 2];
    };
    TriangleObj.prototype.findBounds = function () {
        console.log('finding bounds');
        var box = new _BoundingBox__WEBPACK_IMPORTED_MODULE_1__["BoundingBox"]();
        for (var i = 0; i < this.numTriangles; i++) {
            var tri = this.getTriangle(i);
            box.update(tri.v1);
            box.update(tri.v2);
            box.update(tri.v3);
        }
        this.box = box;
    };
    /**
     * Breaks the object into evenly spaced volumes. The number of volumes is automatically
     * determined based on the number of triangles.
     */
    TriangleObj.prototype.getBoundingPts = function () {
        if (this.boundingPts) {
            return this.boundingPts;
        }
        var numSteps = 15;
        var boxes = [];
        for (var i = 0; i < Math.pow(numSteps, 3); i++) {
            boxes.push(new _BoundingBox__WEBPACK_IMPORTED_MODULE_1__["BoundingBox"]());
        }
        var v = new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]();
        for (var i = 0; i < this.numVertices; i++) {
            v.x = this.vertices[3 * i + 0];
            v.y = this.vertices[3 * i + 1];
            v.z = this.vertices[3 * i + 2];
            var x = Math.floor(numSteps * (v.x - this.box.min.x) / (this.box.width));
            var y = Math.floor(numSteps * (v.y - this.box.min.y) / (this.box.height));
            var z = Math.floor(numSteps * (v.z - this.box.min.z) / (this.box.depth));
            x = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["clamp"])(x, 0, numSteps - 1);
            y = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["clamp"])(y, 0, numSteps - 1);
            z = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_5__["clamp"])(z, 0, numSteps - 1);
            var index = x + y * numSteps + z * numSteps * numSteps;
            boxes[index].update(v);
        }
        var boxMap = new Map();
        var boxCount = 0;
        for (var x = 0; x < numSteps; x++) {
            for (var y = 0; y < numSteps; y++) {
                var first = void 0;
                var last = void 0;
                for (var z = 0; z < numSteps; z++) {
                    var index = x + y * numSteps + z * numSteps * numSteps;
                    var box = boxes[index];
                    if (box.min.x === Number.MAX_VALUE) {
                        continue;
                    }
                    boxCount++;
                    if (!first) {
                        first = { index: index, box: box };
                    }
                    last = { index: index, box: box };
                }
                if (first && boxMap.has(first.index) === false) {
                    boxMap.set(first.index, first.box);
                }
                if (last && boxMap.has(last.index) === false) {
                    boxMap.set(last.index, last.box);
                }
            }
        }
        var pts = [];
        boxes.forEach(function (box) {
            if (box.min.x !== Number.MAX_VALUE) {
                pts.push.apply(pts, box.corners);
            }
        });
        this.boundingPts = new _BoundingPts__WEBPACK_IMPORTED_MODULE_2__["BoundingPts"](pts);
        return this.boundingPts;
    };
    /**
     * Creates a string in the for .OBJ file format
     *
     * @returns the string
     */
    TriangleObj.prototype.toObjString = function (digits) {
        if (digits === void 0) { digits = 8; }
        var str = '';
        str += '# Vertices: ' + this.vertices.length + '\n';
        str += '# Triangles: ' + this.numTriangles + '\n';
        str += '\n';
        for (var i = 0; i < this.numVertices; i++) {
            var v = this.vertices;
            str += 'v ' + v[3 * i + 0].toPrecision(digits) + ' ' + v[3 * i + 1].toPrecision(digits) + ' ' + v[3 * i + 2].toPrecision(digits) + '\n';
        }
        for (var i = 0; i < this.numVertices; i++) {
            var n = this.normals;
            str += 'vn ' + n[3 * i + 0].toPrecision(digits) + ' ' + n[3 * i + 1].toPrecision(digits) + ' ' + n[3 * i + 2].toPrecision(digits) + '\n';
        }
        for (var i = 0; i < this.numTriangles; i++) {
            var t = this.getTriangle(i);
            str += 'f ' +
                (t.i1 + 1) + '//' + (t.i1 + 1) + ' ' +
                (t.i2 + 1) + '//' + (t.i2 + 1) + ' ' +
                (t.i3 + 1) + '//' + (t.i3 + 1) + '\n';
        }
        return str;
    };
    TriangleObj.prototype.optimize = function (normalType) {
        if (normalType === NormalType.Smooth) {
            var vertexToIndexMap = new Map();
            var indexToIndexMap = new Map();
            // first generate a unique set of vertices
            var uniqueVertices = [];
            for (var i = 0; i < this.numVertices; i++) {
                var oldVertex = new _IndexedVec3__WEBPACK_IMPORTED_MODULE_4__["IndexedVec3"](this.vertices, i);
                var key = this.vertices[3 * i + 0].toFixed(4) + ' ' + this.vertices[3 * i + 1].toFixed(4) + ' ' + this.vertices[3 * i + 2].toFixed(4);
                var oldIndex = i + 1;
                var newIndex = void 0;
                if (vertexToIndexMap.has(key)) {
                    // just map the old index to the existing entry
                    newIndex = vertexToIndexMap.get(key);
                }
                else {
                    // create a new entry
                    newIndex = uniqueVertices.length + 1;
                    vertexToIndexMap.set(key, newIndex);
                    uniqueVertices.push(oldVertex);
                }
                // store the translation
                indexToIndexMap.set(oldIndex, newIndex);
            }
            // reset all the vertices
            this.vertices = [];
            for (var i = 0; i < uniqueVertices.length; i++) {
                this.vertices.push(uniqueVertices[i].x);
                this.vertices.push(uniqueVertices[i].y);
                this.vertices.push(uniqueVertices[i].z);
            }
            // remap all indices
            for (var i = 0; i < this.indices.length; i++) {
                var oldIndex = this.indices[i];
                this.indices[i] = indexToIndexMap.get(oldIndex + 1) - 1;
            }
        }
        else {
            // nothing to do for flat normals. New vertices and normals are created in 
            // computeNormals() below if needed
        }
        this.computeNormals(normalType);
    };
    TriangleObj.prototype.trim = function (box) {
        var p = new _Util_Profiler__WEBPACK_IMPORTED_MODULE_6__["Profiler"]();
        var indices = [];
        for (var i = 0; i < this.numTriangles; i++) {
            var tri = this.getTriangle(i);
            if (box.inside(tri.v1) && box.inside(tri.v2) && box.inside(tri.v3)) {
                indices.push(tri.i1);
                indices.push(tri.i2);
                indices.push(tri.i3);
            }
        }
        console.log('trimmed ' + (this.indices.length - indices.length) + ' triangles');
        this.indices = indices;
        this.findBounds();
        p.log('Trim Complete');
    };
    TriangleObj.prototype.mirror = function (x, add) {
        var p = new _Util_Profiler__WEBPACK_IMPORTED_MODULE_6__["Profiler"]();
        if (add) {
            // duplicate vertices
            var numVertices = this.numVertices;
            for (var i = 0; i < numVertices; i++) {
                this.vertices[3 * i + 0] -= x;
                this.vertices.push(-this.vertices[3 * i + 0]);
                this.vertices.push(this.vertices[3 * i + 1]);
                this.vertices.push(this.vertices[3 * i + 2]);
                this.normals.push(-this.normals[3 * i + 0]);
                this.normals.push(this.normals[3 * i + 1]);
                this.normals.push(this.normals[3 * i + 2]);
            }
            var numIndices = this.indices.length;
            var startIndex = numVertices;
            for (var i = 0; i < numIndices; i++) {
                this.indices.push(startIndex + this.indices[i]);
            }
        }
        else {
            // reflect vertices
            var numVertices = this.numVertices;
            for (var i = 0; i < numVertices; i++) {
                this.vertices[3 * i + 0] = x + (x - this.vertices[3 * i + 0]);
                this.normals[3 * i + 0] = -this.normals[3 * i + 0];
            }
        }
        this.findBounds();
        p.log('Mirror Complete');
    };
    TriangleObj.prototype.reverse = function () {
        var p = new _Util_Profiler__WEBPACK_IMPORTED_MODULE_6__["Profiler"]();
        // reflect vertices
        var x = this.center.x;
        for (var i = 0; i < this.numVertices; i++) {
            this.vertices[3 * i + 0] = x + (x - this.vertices[3 * i + 0]);
            this.normals[3 * i + 0] = -this.normals[3 * i + 0];
        }
        // reorder triangles to preserve front-back facing
        for (var i = 0; i < this.numTriangles; i++) {
            var i1 = this.indices[3 * i + 0];
            var i2 = this.indices[3 * i + 1];
            this.indices[3 * i + 0] = i2;
            this.indices[3 * i + 1] = i1;
        }
        p.log('Reverse Complete');
    };
    TriangleObj.prototype.combine = function (tObj) {
        // save the value for the first index of the combined objects
        var startIndex = this.numVertices;
        // add the other vertices and normals to ours
        for (var i = 0; i < tObj.vertices.length; i++) {
            this.vertices.push(tObj.vertices[i]);
            this.normals.push(tObj.normals[i]);
        }
        // add the other indices, but offset them properly
        for (var i = 0; i < tObj.indices.length; i++) {
            this.indices.push(startIndex + tObj.indices[i]);
        }
        // merge the bounding boxes
        this.box.merge(tObj.box);
    };
    TriangleObj.prototype.toData = function () {
        return {
            source: this.source,
            name: this.name,
            vertices: new Float32Array(this.vertices),
            normals: new Float32Array(this.normals),
            indices: new Int32Array(this.indices),
            boxMin: this.box.min.clone(),
            boxMax: this.box.max.clone(),
        };
    };
    TriangleObj.fromData = function (data) {
        var tObj = new TriangleObj();
        tObj.name = data.name;
        tObj.vertices = Array.from(data.vertices);
        tObj.normals = Array.from(data.normals);
        tObj.indices = Array.from(data.indices);
        tObj.box = new _BoundingBox__WEBPACK_IMPORTED_MODULE_1__["BoundingBox"](new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"](data.boxMin.values), new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"](data.boxMax.values));
        return tObj;
    };
    TriangleObj.prototype.toBlob = function () {
        // create a description
        var info = {
            FileType: 'Binary OBJ',
            Version: '1.0',
            Name: this.name,
            Source: this.source,
        };
        // get the raw data
        var data = this.toData();
        // break it into parts
        var parts = [];
        parts.push(data.vertices);
        parts.push(data.normals);
        parts.push(data.indices);
        parts.push(new Float32Array(data.boxMin.values));
        parts.push(new Float32Array(data.boxMax.values));
        // create the Blob
        return _Util_BlobFile__WEBPACK_IMPORTED_MODULE_7__["BlobFile"].createBlob(info, parts);
    };
    TriangleObj.fromBlob = function (blob) {
        return __awaiter(this, void 0, void 0, function () {
            var data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, TriangleObj.blobToData(blob)];
                    case 1:
                        data = _a.sent();
                        return [2 /*return*/, TriangleObj.fromData(data)];
                }
            });
        });
    };
    TriangleObj.blobToData = function (blob) {
        return __awaiter(this, void 0, void 0, function () {
            var bFile, _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
            var _m;
            return __generator(this, function (_o) {
                switch (_o.label) {
                    case 0: return [4 /*yield*/, _Util_BlobFile__WEBPACK_IMPORTED_MODULE_7__["BlobFile"].extract(blob)];
                    case 1:
                        bFile = _o.sent();
                        _m = {
                            name: bFile.info.Name,
                            source: bFile.info.Source
                        };
                        _a = Float32Array.bind;
                        return [4 /*yield*/, bFile.parts[0].arrayBuffer()];
                    case 2:
                        _m.vertices = new (_a.apply(Float32Array, [void 0, _o.sent()]))();
                        _b = Float32Array.bind;
                        return [4 /*yield*/, bFile.parts[1].arrayBuffer()];
                    case 3:
                        _m.normals = new (_b.apply(Float32Array, [void 0, _o.sent()]))();
                        _c = Int32Array.bind;
                        return [4 /*yield*/, bFile.parts[2].arrayBuffer()];
                    case 4:
                        _m.indices = new (_c.apply(Int32Array, [void 0, _o.sent()]))();
                        _d = _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"].bind;
                        _f = (_e = Array).from;
                        _g = Float32Array.bind;
                        return [4 /*yield*/, bFile.parts[3].arrayBuffer()];
                    case 5:
                        _m.boxMin = new (_d.apply(_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"], [void 0, _f.apply(_e, [new (_g.apply(Float32Array, [void 0, _o.sent()]))()])]))();
                        _h = _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"].bind;
                        _k = (_j = Array).from;
                        _l = Float32Array.bind;
                        return [4 /*yield*/, bFile.parts[4].arrayBuffer()];
                    case 6: return [2 /*return*/, (_m.boxMax = new (_h.apply(_Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"], [void 0, _k.apply(_j, [new (_l.apply(Float32Array, [void 0, _o.sent()]))()])]))(),
                            _m)];
                }
            });
        });
    };
    return TriangleObj;
}());

/**
 * Class used to compute normals for vertices that join multiple faces
 */
var MultiNormVertex = /** @class */ (function () {
    function MultiNormVertex() {
        this.normals = [];
    }
    /**
     * Stores a normal for this vertex
     *
     * @param normal Stores a normal for the vertex
     */
    MultiNormVertex.prototype.push = function (normal) {
        this.normals.push(normal);
    };
    Object.defineProperty(MultiNormVertex.prototype, "normal", {
        /**
         * Computes the normal by averaging all the individual normals associated with the vertex
         */
        get: function () {
            var n = new _Vec__WEBPACK_IMPORTED_MODULE_0__["Vec3"]();
            for (var i = 0; i < this.normals.length; i++) {
                n.x += this.normals[i].x;
                n.y += this.normals[i].y;
                n.z += this.normals[i].z;
            }
            n.x /= this.normals.length;
            n.y /= this.normals.length;
            n.z /= this.normals.length;
            return n;
        },
        enumerable: false,
        configurable: true
    });
    return MultiNormVertex;
}());


/***/ }),

/***/ "./src/Util3D/TriangleObjBuilder.ts":
/*!******************************************!*\
  !*** ./src/Util3D/TriangleObjBuilder.ts ***!
  \******************************************/
/*! exports provided: TriangleObjBuilder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TriangleObjBuilder", function() { return TriangleObjBuilder; });
/* harmony import */ var _TriangleObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TriangleObj */ "./src/Util3D/TriangleObj.ts");
/* harmony import */ var _Vec__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Vec */ "./src/Util3D/Vec.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


var TriangleObjBuilder = /** @class */ (function (_super) {
    __extends(TriangleObjBuilder, _super);
    function TriangleObjBuilder(name) {
        return _super.call(this, name) || this;
    }
    // TODO pass in args for construction
    TriangleObjBuilder.prototype.addArrow = function () {
        var NUM_STEPS = 30;
        var TOTAL_LENGTH = 0.4;
        var ARROW_RADIUS = 0.15;
        var ARROW_LENGTH = 1.5 * ARROW_RADIUS;
        var SHAFT_RADIUS = 0.5 * ARROW_RADIUS;
        var TIP = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([0, 0, 0]);
        var TIP_BASE = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([0, ARROW_LENGTH, 0]);
        // build the arrow head
        for (var i = 0; i < NUM_STEPS; i++) {
            var x1 = ARROW_RADIUS * Math.sin(i / (NUM_STEPS - 1) * 2 * Math.PI);
            var y1 = ARROW_LENGTH;
            var z1 = ARROW_RADIUS * Math.cos(i / (NUM_STEPS - 1) * 2 * Math.PI);
            var x2 = ARROW_RADIUS * Math.sin((i + 1) / (NUM_STEPS - 1) * 2 * Math.PI);
            var y2 = ARROW_LENGTH;
            var z2 = ARROW_RADIUS * Math.cos((i + 1) / (NUM_STEPS - 1) * 2 * Math.PI);
            var p1 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([x1, y1, z1]);
            var p2 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([x2, y2, z2]);
            this.pushTriangle(TIP, p2, p1);
            this.pushTriangle(TIP_BASE, p1, p2);
        }
        // build the arrow shaft
        var END = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([0, TOTAL_LENGTH, 0]);
        for (var i = 0; i < NUM_STEPS; i++) {
            var x1 = SHAFT_RADIUS * Math.sin(i / (NUM_STEPS - 1) * 2 * Math.PI);
            var z1 = SHAFT_RADIUS * Math.cos(i / (NUM_STEPS - 1) * 2 * Math.PI);
            var x2 = SHAFT_RADIUS * Math.sin((i + 1) / (NUM_STEPS - 1) * 2 * Math.PI);
            var z2 = SHAFT_RADIUS * Math.cos((i + 1) / (NUM_STEPS - 1) * 2 * Math.PI);
            var p1 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([x1, ARROW_LENGTH, z1]);
            var p2 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([x2, ARROW_LENGTH, z2]);
            var p3 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([x1, TOTAL_LENGTH, z1]);
            var p4 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([x2, TOTAL_LENGTH, z2]);
            this.pushTriangle(p1, p2, p4);
            this.pushTriangle(p1, p4, p3);
            this.pushTriangle(END, p3, p4);
        }
    };
    TriangleObjBuilder.prototype.addSphere = function (numSteps, radius, center) {
        // create an array of vertices
        var vertices = [];
        for (var i = 0; i < numSteps; i++) {
            if (i === 0) {
                vertices.push(new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([center.x, center.y + radius, center.z]));
            }
            else if (i === numSteps - 1) {
                vertices.push(new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([center.x, center.y - radius, center.z]));
            }
            else {
                var y = radius * Math.cos(i / (numSteps - 1) * Math.PI);
                var r = radius * Math.sin(i / (numSteps - 1) * Math.PI);
                var offset = i % 2 ? 0 : ((2 * Math.PI) / numSteps) * 0.5;
                for (var j = 0; j < numSteps; j++) {
                    vertices.push(new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([
                        center.x + r * Math.sin((j / numSteps) * 2 * Math.PI - offset),
                        center.y + y,
                        center.z + r * Math.cos((j / numSteps) * 2 * Math.PI - offset),
                    ]));
                }
            }
        }
        // connect the vertices
        var first = 0;
        var last = vertices.length - 1;
        for (var i = 0; i < numSteps - 1; i++) {
            for (var j = 0; j < numSteps; j++) {
                if (i === 0) {
                    var i1 = first;
                    var i2 = j + 1;
                    var i3 = j === (numSteps - 1) ? 1 : i2 + 1;
                    this.pushTriangle(vertices[i1], vertices[i2], vertices[i3]);
                }
                else if (i === numSteps - 2) {
                    var startIndex = last - numSteps;
                    var i1 = last;
                    var i2 = startIndex + j;
                    var i3 = j === (numSteps - 1) ? startIndex : i2 + 1;
                    this.pushTriangle(vertices[i1], vertices[i3], vertices[i2]);
                }
                else {
                    var startA = 1 + (i - 1) * numSteps;
                    var startB = 1 + i * numSteps;
                    var i1 = startA + j;
                    var i2 = (j === (numSteps - 1)) ? startA : i1 + 1;
                    var i3 = startB + j;
                    var i4 = (j === (numSteps - 1)) ? startB : i3 + 1;
                    if (i % 2) {
                        this.pushTriangle(vertices[i1], vertices[i4], vertices[i2]);
                        this.pushTriangle(vertices[i1], vertices[i3], vertices[i4]);
                    }
                    else {
                        this.pushTriangle(vertices[i1], vertices[i3], vertices[i2]);
                        this.pushTriangle(vertices[i2], vertices[i3], vertices[i4]);
                    }
                }
            }
        }
    };
    TriangleObjBuilder.prototype.addCube = function (size, center) {
        var v1 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([center.x - size / 2, center.y - size / 2, center.z - size / 2]);
        var v2 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([center.x - size / 2, center.y - size / 2, center.z + size / 2]);
        var v3 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([center.x - size / 2, center.y + size / 2, center.z - size / 2]);
        var v4 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([center.x - size / 2, center.y + size / 2, center.z + size / 2]);
        var v5 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([center.x + size / 2, center.y - size / 2, center.z - size / 2]);
        var v6 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([center.x + size / 2, center.y - size / 2, center.z + size / 2]);
        var v7 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([center.x + size / 2, center.y + size / 2, center.z - size / 2]);
        var v8 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([center.x + size / 2, center.y + size / 2, center.z + size / 2]);
        this.pushQuad(v1, v2, v3, v4);
        this.pushQuad(v5, v7, v6, v8);
        this.pushQuad(v1, v5, v2, v6);
        this.pushQuad(v3, v4, v7, v8);
        this.pushQuad(v1, v3, v5, v7);
        this.pushQuad(v2, v6, v4, v8);
    };
    TriangleObjBuilder.prototype.addDisk = function (numSteps, radius, center) {
        for (var i = 0; i <= numSteps; i++) {
            var x1 = center.x + radius * Math.sin((i / numSteps) * 2 * Math.PI);
            var y1 = center.y;
            var z1 = center.z + radius * Math.cos((i / numSteps) * 2 * Math.PI);
            var x2 = center.x + radius * Math.sin(((i + 1) / numSteps) * 2 * Math.PI);
            var y2 = center.y;
            var z2 = center.z + radius * Math.cos(((i + 1) / numSteps) * 2 * Math.PI);
            var p1 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([x1, y1, z1]);
            var p2 = new _Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]([x2, y2, z2]);
            this.pushTriangle(center, p1, p2);
        }
    };
    return TriangleObjBuilder;
}(_TriangleObj__WEBPACK_IMPORTED_MODULE_0__["TriangleObj"]));



/***/ }),

/***/ "./src/Util3D/TriangleObjFile.ts":
/*!***************************************!*\
  !*** ./src/Util3D/TriangleObjFile.ts ***!
  \***************************************/
/*! exports provided: TriangleObjFile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TriangleObjFile", function() { return TriangleObjFile; });
/* harmony import */ var _TriangleObj__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TriangleObj */ "./src/Util3D/TriangleObj.ts");
/* harmony import */ var _Util_Profiler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Util/Profiler */ "./src/Util/Profiler.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * Class that loads a .obj file and creates triangles for it
 */
var TriangleObjFile = /** @class */ (function (_super) {
    __extends(TriangleObjFile, _super);
    function TriangleObjFile(name, src, updateStatus) {
        var _this = _super.call(this, name) || this;
        // record the status function. If one is not supplied, create one that does nothing
        if (!updateStatus) {
            updateStatus = function (status) { return; };
        }
        _this.parse(src, updateStatus);
        return _this;
    }
    TriangleObjFile.prototype.parseFace = function (line) {
        var ret = {
            iV: [],
            iN: [],
        };
        var tokens = line.match(/\S+/g);
        var numVals = tokens.length - 1;
        for (var i = 0; i < numVals; i++) {
            var vals = tokens[i + 1].split('/');
            ret.iV.push(parseInt(vals[0]) - 1);
            if (vals.length === 3) {
                ret.iN.push(parseInt(vals[2]) - 1);
            }
        }
        return ret;
    };
    TriangleObjFile.prototype.parse = function (src, updateStatus) {
        updateStatus('Processing');
        var t = Date.now();
        var p2 = new _Util_Profiler__WEBPACK_IMPORTED_MODULE_1__["Profiler"]();
        var p = new _Util_Profiler__WEBPACK_IMPORTED_MODULE_1__["Profiler"]();
        var lines = src.split('\n');
        p.log('split');
        var vertices = [];
        var normals = [];
        var vIndices = [];
        var nIndices = [];
        var match = true;
        var containsNormals = true;
        for (var i = 0; i < lines.length; i++) {
            // report progress every 50 ms
            if (Date.now() - t > 50) {
                updateStatus('Processing: ' + (100 * i / lines.length).toFixed() + '%');
                t = Date.now();
            }
            var line = lines[i];
            if (line.startsWith('v ')) {
                var tokens = line.match(/\S+/g);
                vertices.push(parseFloat(tokens[1]));
                vertices.push(parseFloat(tokens[2]));
                vertices.push(parseFloat(tokens[3]));
            }
            else if (line.startsWith('vn ')) {
                var tokens = line.match(/\S+/g);
                normals.push(parseFloat(tokens[1]));
                normals.push(parseFloat(tokens[2]));
                normals.push(parseFloat(tokens[3]));
            }
            else if (line.startsWith('f ')) {
                var ret = this.parseFace(line);
                if (containsNormals) {
                    if (ret.iV.length !== ret.iN.length) {
                        containsNormals = false;
                        console.warn('Normals not specified in file. Flat normals will be computed.');
                    }
                    else if (match) {
                        for (var i_1 = 0; i_1 < ret.iV.length; i_1++) {
                            if (ret.iV[i_1] != ret.iN[i_1]) {
                                console.warn('Vertices and normals don\'t match. Content will be re-indexed');
                                match = false;
                                break;
                            }
                        }
                    }
                }
                if (ret.iV.length === 4) {
                    vIndices.push(ret.iV[0], ret.iV[1], ret.iV[2]);
                    vIndices.push(ret.iV[0], ret.iV[2], ret.iV[3]);
                    if (containsNormals) {
                        nIndices.push(ret.iN[0], ret.iN[1], ret.iN[2]);
                        nIndices.push(ret.iN[0], ret.iN[2], ret.iN[3]);
                    }
                }
                else {
                    vIndices.push(ret.iV[0], ret.iV[1], ret.iV[2]);
                    if (containsNormals) {
                        nIndices.push(ret.iN[0], ret.iN[1], ret.iN[2]);
                    }
                }
            }
        }
        p.log('parse');
        if (match) {
            this.vertices = vertices;
            this.indices = vIndices;
            if (containsNormals) {
                this.normals = normals;
            }
        }
        else {
            this.vertices = [];
            this.normals = [];
            this.indices = [];
            for (var i = 0; i < vIndices.length; i++) {
                this.vertices.push(vertices[3 * vIndices[i] + 0]);
                this.vertices.push(vertices[3 * vIndices[i] + 1]);
                this.vertices.push(vertices[3 * vIndices[i] + 2]);
                this.normals.push(normals[3 * nIndices[i] + 0]);
                this.normals.push(normals[3 * nIndices[i] + 1]);
                this.normals.push(normals[3 * nIndices[i] + 2]);
                this.indices.push(i);
            }
            p.log('reindex');
        }
        if (containsNormals === false) {
            this.computeNormals(_TriangleObj__WEBPACK_IMPORTED_MODULE_0__["NormalType"].Flat);
            p.log('compute normals');
        }
        this.findBounds();
        p.log('findBounds');
        p2.log('Total');
        updateStatus('Processing: 100%');
        console.log('Vertices: ' + this.vertices.length);
        console.log('Normals: ' + this.normals.length);
        console.log('Triangles: ' + this.numTriangles);
    };
    return TriangleObjFile;
}(_TriangleObj__WEBPACK_IMPORTED_MODULE_0__["TriangleObj"]));



/***/ }),

/***/ "./src/Util3D/Vec.ts":
/*!***************************!*\
  !*** ./src/Util3D/Vec.ts ***!
  \***************************/
/*! exports provided: Vec2, Vec3, Vec4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Vec2", function() { return Vec2; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Vec3", function() { return Vec3; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Vec4", function() { return Vec4; });
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};
/**
 * Vector class for use with WebGL applications.
 */
var Vec = /** @class */ (function () {
    /**
     * @param valuesOrSize If a array, the values for the vector. If a number, the size of the vector.
     */
    function Vec(valuesOrSize) {
        if (valuesOrSize instanceof Array) {
            this.values = __spreadArray([], valuesOrSize, true);
        }
        else {
            this.values = new Array(valuesOrSize);
            for (var i = 0; i < valuesOrSize; i++) {
                this.values[i] = 0;
            }
        }
    }
    /**
     * Computes the magnitude of the vector.
     *
     * @return The vector magnitude.
     */
    Vec.prototype.magnitude = function () {
        var sum = 0;
        for (var i = 0; i < this.values.length; i++) {
            sum += this.values[i] * this.values[i];
        }
        return Math.sqrt(sum);
    };
    return Vec;
}());
/**
 * An x-y vector.
 */
var Vec2 = /** @class */ (function (_super) {
    __extends(Vec2, _super);
    /**
     * @param vals If supplied, the initial values for the vector
     */
    function Vec2(vals) {
        var _this = this;
        if (vals) {
            _this = _super.call(this, vals) || this;
        }
        else {
            _this = _super.call(this, 2) || this;
        }
        return _this;
    }
    /**
     * Creates a copy of the vector.
     *
     * @returns A copy of the vector.
     */
    Vec2.prototype.clone = function () {
        return new Vec2(this.values);
    };
    Object.defineProperty(Vec2.prototype, "x", {
        /**
         * Gets the X component of the vector
         *
         * @returns The value
         */
        get: function () {
            return this.values[0];
        },
        /**
         * Sets the X component of the vector
         *
         * @param val The value
         */
        set: function (val) {
            this.values[0] = val;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vec2.prototype, "y", {
        /**
         * Gets the Y component of the vector
         *
         * @returns The value
         */
        get: function () {
            return this.values[1];
        },
        /**
         * Sets the Y component of the vector
         *
         * @param val The value
         */
        set: function (val) {
            this.values[1] = val;
        },
        enumerable: false,
        configurable: true
    });
    /**
     * Computes the distance to another point
     *
     * @param other The other point
     * @returns The distance between this point and the other point
     */
    Vec2.prototype.distance = function (other) {
        return Math.sqrt(Math.pow(this.x - other.x, 2) + Math.pow(this.y - other.y, 2));
    };
    /**
     * Creates a string representation of the vector
     *
     * @param digits The number of decimal places to display. This value is passed to toFixed().
     * @param divider The string to separate each number.
     * @returns A string representation.
     */
    Vec2.prototype.toString = function (digits, divider) {
        if (digits === void 0) { digits = 2; }
        if (divider === void 0) { divider = ','; }
        return this.x.toFixed(digits) + divider + this.y.toFixed(digits);
    };
    return Vec2;
}(Vec));

/**
 * An x-y-z vector.
 */
var Vec3 = /** @class */ (function (_super) {
    __extends(Vec3, _super);
    /**
     * @param vals If supplied, the initial values for the vector
     */
    function Vec3(vals) {
        var _this = this;
        if (vals) {
            _this = _super.call(this, vals) || this;
        }
        else {
            _this = _super.call(this, 3) || this;
        }
        return _this;
    }
    Object.defineProperty(Vec3, "origin", {
        get: function () {
            return new Vec3([0, 0, 0]);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vec3.prototype, "x", {
        /**
         * Gets the X component of the vector
         *
         * @returns The value
         */
        get: function () {
            return this.values[0];
        },
        /**
         * Sets the X component of the vector
         *
         * @param val The value
         */
        set: function (val) {
            this.values[0] = val;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vec3.prototype, "y", {
        /**
         * Gets the Y component of the vector
         *
         * @returns The value
         */
        get: function () {
            return this.values[1];
        },
        /**
         * Sets the Y component of the vector
         *
         * @param val The value
         */
        set: function (val) {
            this.values[1] = val;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vec3.prototype, "z", {
        /**
         * Gets the Z component of the vector
         *
         * @returns The value
         */
        get: function () {
            return this.values[2];
        },
        /**
         * Sets the Z component of the vector
         *
         * @param val The value
         */
        set: function (val) {
            this.values[2] = val;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vec3.prototype, "xy", {
        /**
         * Gets the x-y components as a 2d vec
         *
         * @return the Vec3
         */
        get: function () {
            return new Vec2([this.x, this.y]);
        },
        enumerable: false,
        configurable: true
    });
    /**
     * Creates a copy of the vector.
     *
     * @returns A copy of the vector.
     */
    Vec3.prototype.clone = function () {
        return new Vec3(this.values);
    };
    /**
     * Creates a string representation of the vector
     *
     * @param digits The number of decimal places to display. This value is passed to toFixed().
     * @param divider The string to separate each number.
     * @returns A string representation.
     */
    Vec3.prototype.toString = function (digits, divider) {
        if (digits === void 0) { digits = 2; }
        if (divider === void 0) { divider = ','; }
        return this.x.toFixed(digits) + divider + this.y.toFixed(digits) + divider + this.z.toFixed(digits);
    };
    /**
     * Returns a normalized version of this vector.
     *
     * @returns The resulting normalized vector.
     */
    Vec3.prototype.normalize = function () {
        var mag = this.magnitude();
        if (mag === 0) {
            return new Vec3();
        }
        else {
            return this.mult(1 / mag);
        }
    };
    /**
     * Multiplies members by a value and returns the new vector
     *
     * @param value The multiplication value.
     */
    Vec3.prototype.mult = function (value) {
        return new Vec3([
            this.x * value,
            this.y * value,
            this.z * value,
        ]);
    };
    /**
     * Returns the vector pointing in the opposite direction.
     *
     * @returns The negated vector.
     */
    Vec3.prototype.negate = function () {
        return new Vec3([-this.x, -this.y, -this.z]);
    };
    /**
     * Subtracts values from this vector.
     *
     * @param vec The vector to subtract.
     * @returns The computed vector.
     */
    Vec3.prototype.subtract = function (vec) {
        return new Vec3([
            this.values[0] - vec.values[0],
            this.values[1] - vec.values[1],
            this.values[2] - vec.values[2]
        ]);
    };
    /**
     * Adds values from this vector.
     *
     * @param vec The vector to add.
     * @returns The computed vector.
     */
    Vec3.prototype.add = function (vec) {
        return new Vec3([
            this.values[0] + vec.values[0],
            this.values[1] + vec.values[1],
            this.values[2] + vec.values[2]
        ]);
    };
    /**
     * Computes the cross product of this vector and another vector.
     *
     * @param other The other vector.
     */
    Vec3.prototype.cross = function (other) {
        var A = this.values;
        var B = other.values;
        return new Vec3([
            A[1] * B[2] - A[2] * B[1],
            A[2] * B[0] - A[0] * B[2],
            A[0] * B[1] - A[1] * B[0]
        ]);
    };
    /**
     * Computes the distance from this point to a specified point.
     *
     * @param pt The point.
     * @returns The distance to the point.
     */
    Vec3.prototype.distToPoint = function (pt) {
        return this.subtract(pt).magnitude();
    };
    /**
     * Builds a Vec4 from this Vec3
     *
     * @param w The w component of the new vector.
     * @returns The new vector.
     */
    Vec3.prototype.toVec4 = function (w) {
        return new Vec4([this.x, this.y, this.z, w]);
    };
    return Vec3;
}(Vec));

/**
 * An x-y-z-w vector.
 */
var Vec4 = /** @class */ (function (_super) {
    __extends(Vec4, _super);
    /**
     * @param vals If supplied, the initial values for the vector.
     */
    function Vec4(vals) {
        var _this = this;
        if (vals) {
            _this = _super.call(this, vals) || this;
        }
        else {
            _this = _super.call(this, 4) || this;
        }
        return _this;
    }
    Object.defineProperty(Vec4.prototype, "x", {
        /**
         * Gets the X component of the vector
         *
         * @returns The value
         */
        get: function () {
            return this.values[0];
        },
        /**
         * Sets the X component of the vector
         *
         * @param val The value
         */
        set: function (val) {
            this.values[0] = val;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vec4.prototype, "y", {
        /**
         * Gets the Y component of the vector
         *
         * @returns The value
         */
        get: function () {
            return this.values[1];
        },
        /**
         * Sets the Y component of the vector
         *
         * @param val The value
         */
        set: function (val) {
            this.values[1] = val;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vec4.prototype, "z", {
        /**
         * Gets the Z component of the vector
         *
         * @returns The value
         */
        get: function () {
            return this.values[2];
        },
        /**
         * Sets the Z component of the vector
         *
         * @param val The value
         */
        set: function (val) {
            this.values[2] = val;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vec4.prototype, "w", {
        /**
         * Gets the Z component of the vector
         *
         * @returns The value
         */
        get: function () {
            return this.values[3];
        },
        /**
         * Sets the Z component of the vector
         *
         * @param val The value
         */
        set: function (val) {
            this.values[3] = val;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vec4.prototype, "xyz", {
        /**
         * Gets the x-y-z components as a 3d vec
         *
         * @return the Vec3
         */
        get: function () {
            return new Vec3([this.x, this.y, this.z]);
        },
        enumerable: false,
        configurable: true
    });
    /**
     * Creates a copy of the vector.
     *
     * @returns A copy of the vector.
     */
    Vec4.prototype.clone = function () {
        return new Vec4(this.values);
    };
    /**
     * Returns an x-y-z vector where each element is computed by dividing this vectors
     * elements by the w value.
     *
     * @returns An x-y-z vector.
     */
    Vec4.prototype.divideByW = function () {
        var w = this.values[3];
        return new Vec3([
            this.values[0] / w,
            this.values[1] / w,
            this.values[2] / w
        ]);
    };
    /**
     * Normalizes this vector, and stores and returns the result.
     *
     * @returns The resulting normalized vector.
     */
    Vec4.prototype.normalize = function () {
        var mag = this.magnitude();
        var ret = this.clone();
        if (mag !== 0) {
            for (var i = 0; i < this.values.length; i++) {
                ret.values[i] /= mag;
            }
        }
        return ret;
    };
    /**
     * Creates a Vec4 from a Vec3 object
     *
     * @param vec The Vec3 object
     * @param w The w value for the Vec4
     */
    Vec4.fromVec3 = function (vec, w) {
        if (w === void 0) { w = 1; }
        return new Vec4([vec.x, vec.y, vec.z, w]);
    };
    return Vec4;
}(Vec));



/***/ }),

/***/ "./src/gl/glAttributeBuffer.ts":
/*!*************************************!*\
  !*** ./src/gl/glAttributeBuffer.ts ***!
  \*************************************/
/*! exports provided: glAttributeBuffer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glAttributeBuffer", function() { return glAttributeBuffer; });
/* harmony import */ var _glProgram__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./glProgram */ "./src/gl/glProgram.ts");

/**
 * Wrapper for a WebGl Buffer and Attribute
 */
var glAttributeBuffer = /** @class */ (function () {
    function glAttributeBuffer(glCtx, program, attributeName) {
        this.gl = glCtx;
        var gl = this.gl;
        if (program instanceof _glProgram__WEBPACK_IMPORTED_MODULE_0__["glProgram"]) {
            program = program.get();
        }
        this.buffer = gl.createBuffer();
        this.attributeLocation = gl.getAttribLocation(program, attributeName);
    }
    glAttributeBuffer.prototype.dispose = function () {
        if (this.buffer) {
            this.gl.deleteBuffer(this.buffer);
            this.buffer = null;
        }
        this.attributeLocation = -1;
    };
    glAttributeBuffer.prototype.upload = function (values) {
        var gl = this.gl;
        this.bind();
        if (values instanceof Float32Array) {
            gl.bufferData(gl.ARRAY_BUFFER, values, gl.STATIC_DRAW);
        }
        else {
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(values), gl.STATIC_DRAW);
        }
    };
    glAttributeBuffer.prototype.bind = function (size) {
        if (size === void 0) { size = 3; }
        var gl = this.gl;
        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);
        gl.enableVertexAttribArray(this.attributeLocation);
        gl.vertexAttribPointer(this.attributeLocation, size, // size
        gl.FLOAT, // type
        false, // normalized
        0, // stride
        0 // offset
        );
    };
    return glAttributeBuffer;
}());



/***/ }),

/***/ "./src/gl/glBuffer.ts":
/*!****************************!*\
  !*** ./src/gl/glBuffer.ts ***!
  \****************************/
/*! exports provided: glBuffer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glBuffer", function() { return glBuffer; });
/* harmony import */ var _glProgram__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./glProgram */ "./src/gl/glProgram.ts");

/**
 * Wrapper for a WebGl Buffer and Attribute
 */
var glBuffer = /** @class */ (function () {
    function glBuffer(glCtx, program, attributeName) {
        this.gl = glCtx;
        var gl = this.gl;
        if (program instanceof _glProgram__WEBPACK_IMPORTED_MODULE_0__["glProgram"]) {
            program = program.get();
        }
        this.buffer = gl.createBuffer();
        this.attributeLocation = gl.getAttribLocation(program, attributeName);
    }
    glBuffer.prototype.dispose = function () {
        this.gl.deleteBuffer(this.buffer);
        this.buffer = null;
        this.attributeLocation = -1;
    };
    glBuffer.prototype.upload = function (vertices) {
        var gl = this.gl;
        this.bind();
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
    };
    glBuffer.prototype.bind = function (size) {
        if (size === void 0) { size = 3; }
        var gl = this.gl;
        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);
        gl.enableVertexAttribArray(this.attributeLocation);
        gl.vertexAttribPointer(this.attributeLocation, size, // size - 2,3 or 4 values per vertex
        gl.FLOAT, // type
        false, // normalized
        0, // stride
        0 // offset
        );
    };
    return glBuffer;
}());



/***/ }),

/***/ "./src/gl/glColor.ts":
/*!***************************!*\
  !*** ./src/gl/glColor.ts ***!
  \***************************/
/*! exports provided: glColor3, glColor4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glColor3", function() { return glColor3; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glColor4", function() { return glColor4; });
/* harmony import */ var _Util_Color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Util/Color */ "./src/Util/Color.ts");
/* harmony import */ var _Util_Globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Util/Globals */ "./src/Util/Globals.ts");
/* harmony import */ var _Util_htmlColor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Util/htmlColor */ "./src/Util/htmlColor.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();



/**
 * Color class that requires RGB values to be between 0 and 1
 */
var glColor3 = /** @class */ (function (_super) {
    __extends(glColor3, _super);
    /**
     * @param color An RGB color array
     */
    function glColor3(color) {
        var _this = this;
        if (color.length != 3) {
            throw new Error('Invalid color array length (expected 3 elements)');
        }
        if (color[0] < 0 || color[0] > 1) {
            throw new Error('Invalid color \'r\' value (expected [0-1])');
        }
        if (color[1] < 0 || color[1] > 1) {
            throw new Error('Invalid color \'g\' value (expected [0-1])');
        }
        if (color[2] < 0 || color[2] > 1) {
            throw new Error('Invalid color \'b\' value (expected [0-1])');
        }
        _this = _super.call(this, color) || this;
        return _this;
    }
    /**
     * Creates an glColor object using values in a Color object.
     *
     * @param color A generic Color object.
     */
    glColor3.fromColor = function (color) {
        var r = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_1__["clamp"])(color.r, 0, 1);
        var g = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_1__["clamp"])(color.g, 0, 1);
        var b = Object(_Util_Globals__WEBPACK_IMPORTED_MODULE_1__["clamp"])(color.b, 0, 1);
        return new glColor3([r, g, b]);
    };
    /**
     * Returns the lighter of two colors
     *
     * @param c1 The first color.
     * @param c2 The second color.
     * @returns The lightest color.
     */
    glColor3.lightest = function (c1, c2) {
        // TODO: use luminosity instead?
        if (c1.r + c1.g + c1.b > c2.r + c2.g + c2.b) {
            return c1;
        }
        else {
            return c2;
        }
    };
    /**
     * Returns the darker of two colors
     *
     * @param c1 The first color.
     * @param c2 The second color.
     * @returns The darkest color.
     */
    glColor3.darkest = function (c1, c2) {
        // TODO: use luminosity instead?
        if (c1.r + c1.g + c1.b < c2.r + c2.g + c2.b) {
            return c1;
        }
        else {
            return c2;
        }
    };
    /**
     * Converts this object to an html color object (0-255 based).
     *
     * @returns An htmlColor object.
     */
    glColor3.prototype.toHtmlColor = function () {
        var r = Math.round(255 * this.r);
        var g = Math.round(255 * this.g);
        var b = Math.round(255 * this.b);
        return new _Util_htmlColor__WEBPACK_IMPORTED_MODULE_2__["htmlColor"]([r, g, b]);
    };
    glColor3.modelWhite = new glColor3([255 / 255, 250 / 255, 242 / 255]);
    glColor3.modelBlack = new glColor3([0, 0, 0]);
    return glColor3;
}(_Util_Color__WEBPACK_IMPORTED_MODULE_0__["Color"]));

/**
 * Color class that requires RGBA values to be between 0 and 1
 */
var glColor4 = /** @class */ (function (_super) {
    __extends(glColor4, _super);
    /**
     * @param color An RGB color array
     */
    function glColor4(color) {
        var _this = this;
        if (color.length != 4) {
            throw new Error('Invalid color array length (expected 4 elements)');
        }
        if (color[0] < 0 || color[0] > 1) {
            throw new Error('Invalid color \'r\' value (expected [0-1])');
        }
        if (color[1] < 0 || color[1] > 1) {
            throw new Error('Invalid color \'g\' value (expected [0-1])');
        }
        if (color[2] < 0 || color[2] > 1) {
            throw new Error('Invalid color \'b\' value (expected [0-1])');
        }
        if (color[3] < 0 || color[3] > 1) {
            throw new Error('Invalid color \'a\' value (expected [0-1])');
        }
        _this = _super.call(this, color) || this;
        return _this;
    }
    return glColor4;
}(_Util_Color__WEBPACK_IMPORTED_MODULE_0__["Color"]));



/***/ }),

/***/ "./src/gl/glColorWithTemperature.ts":
/*!******************************************!*\
  !*** ./src/gl/glColorWithTemperature.ts ***!
  \******************************************/
/*! exports provided: glColorWithTemperature */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glColorWithTemperature", function() { return glColorWithTemperature; });
/* harmony import */ var _glColor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./glColor */ "./src/gl/glColor.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

/**
 * Class that adds temperature to a Color object
 */
var glColorWithTemperature = /** @class */ (function (_super) {
    __extends(glColorWithTemperature, _super);
    /**
     * @param color An RGB color array
     * @param temperature Temperature in Kelvin
     */
    function glColorWithTemperature(color, temperature) {
        var _this = _super.call(this, color) || this;
        _this._temperature = temperature;
        return _this;
    }
    Object.defineProperty(glColorWithTemperature.prototype, "temperature", {
        /**
         * Gets the temperature in Kelvin
         */
        get: function () {
            return this._temperature;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(glColorWithTemperature, "daylight", {
        get: function () {
            return this.create(6000);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(glColorWithTemperature, "minTemperature", {
        /**
         * Gets the minimum supported temperature.
         *
         * @returns temperature value in Kelvin.
         */
        get: function () {
            return this.colors[0].temperature;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(glColorWithTemperature, "maxTemperature", {
        /**
         * Gets the maximum supported temperature.
         *
         * @returns temperature value in Kelvin.
         */
        get: function () {
            return this.colors[this.colors.length - 1].temperature;
        },
        enumerable: false,
        configurable: true
    });
    /**
     * Gets a Color matching the specified temperature.
     *
     * @returns temperature value in Kelvin.
     */
    glColorWithTemperature.create = function (temperature) {
        if (temperature <= this.minTemperature) {
            return this.colors[0];
        }
        else if (temperature >= this.maxTemperature) {
            return this.colors[this.colors.length - 1];
        }
        else {
            for (var i = 0; i < this.colors.length - 1; i++) {
                var color1 = this.colors[i];
                var color2 = this.colors[i + 1];
                if (temperature >= color1.temperature && temperature <= color2.temperature) {
                    var ratio = (temperature - color1.temperature) / (color2.temperature - color1.temperature);
                    var r = color1.r + ratio * (color2.r - color1.r);
                    var g = color1.g + ratio * (color2.g - color1.g);
                    var b = color1.b + ratio * (color2.b - color1.b);
                    return new glColorWithTemperature([r, g, b], temperature);
                }
            }
            // shouldn't get here, but if we do, return the last color
            return this.colors[this.colors.length - 1];
        }
    };
    /**
     * Known color values. For other requests the class will return interpolated values
     */
    glColorWithTemperature.colors = [
        new glColorWithTemperature([255 / 255, 147 / 255, 41 / 255], 1900),
        new glColorWithTemperature([255 / 255, 197 / 255, 143 / 255], 2600),
        new glColorWithTemperature([255 / 255, 214 / 255, 170 / 255], 2850),
        new glColorWithTemperature([255 / 255, 241 / 255, 224 / 255], 3200),
        new glColorWithTemperature([255 / 255, 250 / 255, 244 / 255], 5200),
        new glColorWithTemperature([255 / 255, 255 / 255, 251 / 255], 5400),
        new glColorWithTemperature([255 / 255, 255 / 255, 255 / 255], 6000),
        new glColorWithTemperature([201 / 255, 226 / 255, 255 / 255], 7000),
        new glColorWithTemperature([64 / 255, 156 / 255, 255 / 255], 20000),
    ];
    return glColorWithTemperature;
}(_glColor__WEBPACK_IMPORTED_MODULE_0__["glColor3"]));



/***/ }),

/***/ "./src/gl/glFrameBuffer.ts":
/*!*********************************!*\
  !*** ./src/gl/glFrameBuffer.ts ***!
  \*********************************/
/*! exports provided: glFrameBuffer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glFrameBuffer", function() { return glFrameBuffer; });
/* harmony import */ var _glTexture__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./glTexture */ "./src/gl/glTexture.ts");

/**
 * Lightweight WebGL wrapper for a framebuffer
 */
var glFrameBuffer = /** @class */ (function () {
    /**
     * Create a frame buffer
     *
     * @param glCtx The WebGL context
     * @param width The width (in pixels) of the rendering (must be power of 2)
     * @param height The height (in pixels) of the rendering (must be power of 2)
     */
    function glFrameBuffer(glCtx, width, height) {
        this.gl = glCtx;
        this.width = width;
        this.height = height;
        var gl = this.gl;
        this.frameBuffer = gl.createFramebuffer();
    }
    Object.defineProperty(glFrameBuffer.prototype, "size", {
        /**
         * Gets the larger of the width or height
         */
        get: function () {
            return Math.max(this.width, this.height);
        },
        enumerable: false,
        configurable: true
    });
    glFrameBuffer.prototype.dispose = function () {
        var gl = this.gl;
        if (this.frameBuffer) {
            gl.deleteFramebuffer(this.frameBuffer);
            this.frameBuffer = null;
        }
    };
    glFrameBuffer.prototype.get = function () {
        return this.frameBuffer;
    };
    glFrameBuffer.prototype.bind = function () {
        var gl = this.gl;
        gl.bindFramebuffer(gl.FRAMEBUFFER, this.frameBuffer);
    };
    glFrameBuffer.prototype.createTexture = function (style) {
        return new _glTexture__WEBPACK_IMPORTED_MODULE_0__["glTexture"](this.gl, this.width, this.height, style);
    };
    glFrameBuffer.prototype.attachTexture = function (attachment, texture) {
        if (texture instanceof _glTexture__WEBPACK_IMPORTED_MODULE_0__["glTexture"]) {
            texture = texture.get();
        }
        var gl = this.gl;
        gl.bindFramebuffer(gl.FRAMEBUFFER, this.frameBuffer);
        gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_2D, texture, 0);
    };
    glFrameBuffer.prototype.check = function () {
        var gl = this.gl;
        var status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);
        if (status !== gl.FRAMEBUFFER_COMPLETE) {
            var msg = 'The created frame buffer is invalid: ' + status.toString();
            alert(msg);
            console.log(msg);
        }
    };
    return glFrameBuffer;
}());



/***/ }),

/***/ "./src/gl/glIndexBuffer.ts":
/*!*********************************!*\
  !*** ./src/gl/glIndexBuffer.ts ***!
  \*********************************/
/*! exports provided: glIndexBuffer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glIndexBuffer", function() { return glIndexBuffer; });
/**
 * Wrapper for a WebGl Buffer and Attribute
 */
var glIndexBuffer = /** @class */ (function () {
    function glIndexBuffer(glCtx) {
        this.gl = glCtx;
        var gl = this.gl;
        this.buffer = gl.createBuffer();
    }
    glIndexBuffer.prototype.dispose = function () {
        this.gl.deleteBuffer(this.buffer);
        this.buffer = null;
    };
    glIndexBuffer.prototype.upload = function (values) {
        var gl = this.gl;
        this.bind();
        if (values instanceof Int32Array) {
            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, values, gl.STATIC_DRAW);
        }
        else {
            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Int32Array(values), gl.STATIC_DRAW);
        }
    };
    glIndexBuffer.prototype.bind = function () {
        var gl = this.gl;
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);
    };
    return glIndexBuffer;
}());



/***/ }),

/***/ "./src/gl/glProgram.ts":
/*!*****************************!*\
  !*** ./src/gl/glProgram.ts ***!
  \*****************************/
/*! exports provided: glProgram */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glProgram", function() { return glProgram; });
/**
 * Utility wrapper for compiling WebGL shader programs
 */
var glProgram = /** @class */ (function () {
    /**
     * Compiles and links vertex and fragment shaders into a program
     *
     * @param gl The WebGL context
     * @param vertexSource Vertex shader source
     * @param fragmentSource Fragment shader source
     * @returns the program id
     * @throws if the compilation fails
     */
    function glProgram(gl, vertexSource, fragmentSource) {
        this.gl = gl;
        this.compile(vertexSource, fragmentSource);
    }
    /**
     * Gets the underlying WebGLProgram
     *
     * @return the WebGLProgram
     */
    glProgram.prototype.get = function () {
        return this.program;
    };
    /**
     * Calls useProgram() for this program
     */
    glProgram.prototype.use = function () {
        var gl = this.gl;
        gl.useProgram(this.program);
    };
    /**
     * Compiles a shader program
     *
     * @param gl The WebGL context
     * @param source The source code
     * @param type The shader type
     * @throws if the compilation fails
     */
    glProgram.prototype.compileShader = function (source, type) {
        var gl = this.gl;
        var shader = gl.createShader(type);
        gl.shaderSource(shader, source);
        gl.compileShader(shader);
        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
            console.log(source);
            var err = gl.getShaderInfoLog(shader);
            console.error(err);
            throw 'compile error: ' + err;
        }
        return shader;
    };
    glProgram.prototype.dispose = function () {
        var gl = this.gl;
        gl.deleteProgram(this.program);
        this.program = null;
    };
    /**
     * Compiles and links vertex and fragment shaders into a program
     *
     * @param vertexSource Vertex shader source
     * @param fragmentSource Fragment shader source
     * @returns the program id
     * @throws if the compilation fails
     */
    glProgram.prototype.compile = function (vertexSource, fragmentSource) {
        var gl = this.gl;
        this.program = gl.createProgram();
        gl.attachShader(this.program, this.compileShader(vertexSource, gl.VERTEX_SHADER));
        gl.attachShader(this.program, this.compileShader(fragmentSource, gl.FRAGMENT_SHADER));
        gl.linkProgram(this.program);
        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {
            var err = gl.getProgramInfoLog(this.program);
            console.error(err);
            throw 'link error: ' + err;
        }
    };
    return glProgram;
}());



/***/ }),

/***/ "./src/gl/glSpace.ts":
/*!***************************!*\
  !*** ./src/gl/glSpace.ts ***!
  \***************************/
/*! exports provided: glSpace */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glSpace", function() { return glSpace; });
/**
 * Utility for holding a clip space. Can be used to hold the viewing space
 * or clip space.
 */
var glSpace = /** @class */ (function () {
    function glSpace(min, max) {
        this.min = min;
        this.max = max;
    }
    Object.defineProperty(glSpace.prototype, "left", {
        get: function () {
            return this.min.x;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(glSpace.prototype, "right", {
        get: function () {
            return this.max.x;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(glSpace.prototype, "top", {
        get: function () {
            return this.max.y;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(glSpace.prototype, "bottom", {
        get: function () {
            return this.min.y;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(glSpace.prototype, "near", {
        get: function () {
            return this.min.z;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(glSpace.prototype, "far", {
        get: function () {
            return this.max.z;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(glSpace.prototype, "width", {
        get: function () {
            return Math.abs(this.max.x - this.min.x);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(glSpace.prototype, "height", {
        get: function () {
            return Math.abs(this.max.y - this.min.y);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(glSpace.prototype, "depth", {
        get: function () {
            return Math.abs(this.max.z - this.min.z);
        },
        enumerable: false,
        configurable: true
    });
    return glSpace;
}());



/***/ }),

/***/ "./src/gl/glTexture.ts":
/*!*****************************!*\
  !*** ./src/gl/glTexture.ts ***!
  \*****************************/
/*! exports provided: glTextureStyle, glTexture */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glTextureStyle", function() { return glTextureStyle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glTexture", function() { return glTexture; });
var glTextureStyle;
(function (glTextureStyle) {
    glTextureStyle[glTextureStyle["Color"] = 0] = "Color";
    glTextureStyle[glTextureStyle["Depth"] = 1] = "Depth";
    glTextureStyle[glTextureStyle["Float"] = 2] = "Float";
})(glTextureStyle || (glTextureStyle = {}));
/**
 * Lightweight WebGL wrapper for a texture
 */
var glTexture = /** @class */ (function () {
    /**
     * Create a frame buffer for rendering into texture objects.
     *
     * @param glCtx The WebGL context
     * @param width The width (in pixels) of the rendering (must be power of 2)
     * @param height The height (in pixels) of the rendering (must be power of 2)
     */
    function glTexture(glCtx, width, height, style) {
        this.gl = glCtx;
        this.width = width;
        this.height = height;
        switch (style) {
            case glTextureStyle.Color:
                this.createColor(width, height);
                break;
            case glTextureStyle.Depth:
                this.createDepth(width, height);
                break;
            case glTextureStyle.Float:
                this.createFloat(width, height);
                break;
        }
    }
    glTexture.prototype.dispose = function () {
        var gl = this.gl;
        if (this.texture) {
            gl.deleteTexture(this.texture);
            this.texture = null;
        }
    };
    glTexture.prototype.createColor = function (width, height) {
        var gl = this.gl;
        this.texture = gl.createTexture();
        gl.bindTexture(gl.TEXTURE_2D, this.texture);
        gl.texImage2D(gl.TEXTURE_2D, // target
        0, // level
        gl.RGBA, // internal format
        width, // width
        height, // height
        0, // border
        gl.RGBA, // format
        gl.UNSIGNED_BYTE, // type
        null // pixels
        );
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    };
    glTexture.prototype.createDepth = function (width, height) {
        var gl = this.gl;
        var depth_texture_extension = gl.getExtension('WEBGL_depth_texture');
        if (!depth_texture_extension) {
            alert('This WebGL program requires the use of the WEBGL_depth_texture extension.');
            return;
        }
        this.texture = gl.createTexture();
        gl.bindTexture(gl.TEXTURE_2D, this.texture);
        gl.texImage2D(gl.TEXTURE_2D, // target
        0, // level
        gl.DEPTH_COMPONENT, // internal format
        width, // width
        height, // height
        0, // border
        gl.DEPTH_COMPONENT, // format
        gl.UNSIGNED_INT, // type
        null // pixels
        );
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    };
    glTexture.prototype.createFloat = function (width, height) {
        var gl = this.gl;
        var internalFormat;
        var format;
        var type;
        // create textures
        if (gl instanceof WebGLRenderingContext) {
            var ext = gl.getExtension('OES_texture_half_float');
            if (ext) {
                // Thanks Apple. Always got to do things a little differently
                internalFormat = gl.RGBA;
                format = gl.RGBA;
                type = ext.HALF_FLOAT_OES;
            }
            else {
                // No floating point textures? really fall back to unsigned bytes
                internalFormat = gl.RGBA;
                format = gl.RGBA;
                type = gl.UNSIGNED_BYTE;
            }
        }
        // Typescript doesn't let you do an 'else if' here and when WebGL2 is
        // not supported, we get an exception, so thus the try-catch
        // see: https://stackoverflow.com/questions/45381122/typescript-type-narrowed-to-never-with-instanceof-in-an-if-else-statement
        try {
            if (gl instanceof WebGL2RenderingContext) {
                gl.getExtension('EXT_color_buffer_float');
                internalFormat = gl.RGBA32F;
                format = gl.RGBA;
                type = gl.FLOAT;
            }
        }
        catch (error) {
        }
        // create two textures. One we display and one we draw to
        this.texture = gl.createTexture();
        gl.bindTexture(gl.TEXTURE_2D, this.texture);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
        gl.texImage2D(gl.TEXTURE_2D, // target
        0, // level
        internalFormat, // internal format
        width, // width
        height, // height
        0, // border
        format, // format
        type, // type
        null // pixels
        );
        gl.bindTexture(gl.TEXTURE_2D, null);
    };
    glTexture.prototype.get = function () {
        return this.texture;
    };
    glTexture.prototype.bind = function () {
        var gl = this.gl;
        gl.bindTexture(gl.TEXTURE_2D, this.texture);
    };
    return glTexture;
}());



/***/ }),

/***/ "./src/gl/glUniform.ts":
/*!*****************************!*\
  !*** ./src/gl/glUniform.ts ***!
  \*****************************/
/*! exports provided: glUniform */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glUniform", function() { return glUniform; });
/* harmony import */ var _glProgram__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./glProgram */ "./src/gl/glProgram.ts");
/* harmony import */ var _Util3D_Vec__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Util3D/Vec */ "./src/Util3D/Vec.ts");
/* harmony import */ var _glColor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./glColor */ "./src/gl/glColor.ts");
/* harmony import */ var _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Util3D/Mat */ "./src/Util3D/Mat.ts");




/**
 * Utility class for setting uniform values in a shader
 */
var glUniform = /** @class */ (function () {
    /**
     * Creates an object for setting values and calls gl.useProgram
     *
     * @param glCtx The WebGL context
     * @param program The program associated with the uniform values
     */
    function glUniform(glCtx, program) {
        this.gl = null;
        this.gl = glCtx;
        var gl = this.gl;
        if (program instanceof _glProgram__WEBPACK_IMPORTED_MODULE_0__["glProgram"]) {
            program = program.get();
        }
        this.program = program;
        gl.useProgram(program);
    }
    /**
     * Sets a uniform value
     *
     * @param name The variable name
     * @param value The value
     * @param int If true and the value is a number, it is treated as an integer
     */
    glUniform.prototype.set = function (name, value, int) {
        if (int === void 0) { int = false; }
        var gl = this.gl;
        var loc = gl.getUniformLocation(this.program, name);
        if (loc) {
            if (value instanceof _Util3D_Vec__WEBPACK_IMPORTED_MODULE_1__["Vec3"]) {
                gl.uniform3fv(loc, new Float32Array(value.values));
            }
            else if (value instanceof _glColor__WEBPACK_IMPORTED_MODULE_2__["glColor3"]) {
                gl.uniform3fv(loc, new Float32Array([value.r, value.g, value.b]));
            }
            else if (value instanceof _glColor__WEBPACK_IMPORTED_MODULE_2__["glColor4"]) {
                gl.uniform4fv(loc, new Float32Array([value.r, value.g, value.b, value.a]));
            }
            else if (value instanceof _Util3D_Mat__WEBPACK_IMPORTED_MODULE_3__["Mat4"]) {
                gl.uniformMatrix4fv(loc, false, new Float32Array(value.transpose().values));
            }
            else if (typeof (value) === 'boolean') {
                gl.uniform1i(loc, value ? 1.0 : 0.0);
            }
            else if (name === 'uMode') {
                gl.uniform1i(loc, value);
            }
            else {
                if (int) {
                    gl.uniform1i(loc, value);
                }
                else {
                    gl.uniform1f(loc, value);
                }
            }
        }
    };
    /**
     * Sets an integer uniform value (same as set(name, value, true))
     *
     * @param name The variable name
     * @param value The value
     */
    glUniform.prototype.seti = function (name, value) {
        this.set(name, value, true);
    };
    /**
     * Sets all values for variables stored as members of an object
     *
     * @param uniforms The object with member values
     */
    glUniform.prototype.setAll = function (uniforms) {
        for (var name_1 in uniforms) {
            var value = uniforms[name_1];
            this.set(name_1, value);
        }
    };
    return glUniform;
}());



/***/ }),

/***/ "./src/gl/glUniformBlock.ts":
/*!**********************************!*\
  !*** ./src/gl/glUniformBlock.ts ***!
  \**********************************/
/*! exports provided: glUniformBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glUniformBlock", function() { return glUniformBlock; });
/* harmony import */ var _glProgram__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./glProgram */ "./src/gl/glProgram.ts");

var glUniformBlock = /** @class */ (function () {
    function glUniformBlock(glCtx, program, blockName, blockBinding) {
        this.gl2 = glCtx;
        var gl2 = this.gl2;
        if (program instanceof _glProgram__WEBPACK_IMPORTED_MODULE_0__["glProgram"]) {
            program = program.get();
        }
        this.blockLocation = gl2.getUniformBlockIndex(program, blockName);
        gl2.uniformBlockBinding(program, this.blockLocation, blockBinding);
        this.blockBuffer = gl2.createBuffer();
        gl2.bindBufferBase(gl2.UNIFORM_BUFFER, blockBinding, this.blockBuffer);
    }
    glUniformBlock.prototype.dispose = function () {
        var gl2 = this.gl2;
        gl2.deleteBuffer(this.blockBuffer);
    };
    glUniformBlock.prototype.upload = function (data) {
        var gl2 = this.gl2;
        gl2.bindBuffer(gl2.UNIFORM_BUFFER, this.blockBuffer);
        gl2.bufferData(gl2.UNIFORM_BUFFER, data, gl2.STATIC_DRAW);
        gl2.bindBuffer(gl2.UNIFORM_BUFFER, null);
    };
    return glUniformBlock;
}());



/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _styles_styles_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./styles/styles.css */ "./src/styles/styles.css");
/* harmony import */ var _styles_styles_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_styles_styles_css__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Launcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Launcher */ "./src/Launcher.ts");


window.onload = function () {
    var app = new _Launcher__WEBPACK_IMPORTED_MODULE_1__["Launcher"]();
};


/***/ }),

/***/ "./src/shaders/PathTracerToScreenFragment.glsl":
/*!*****************************************************!*\
  !*** ./src/shaders/PathTracerToScreenFragment.glsl ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("precision highp float;\r\nvarying vec2 texCoord;\r\nuniform sampler2D uTexture;\r\nuniform int uMode;\r\nuniform float uMaxChroma;\r\n\r\nuniform vec3 uHighlightColor;\r\nuniform vec3 uLightLightColor;\r\nuniform vec3 uMidLightColor;\r\nuniform vec3 uDarkLightColor;\r\n\r\nuniform vec3 uShadowColor;\r\nuniform vec3 uReflectedLightColor;\r\nuniform vec3 uDarkAccentColor;\r\n\r\nuniform float uShadowAlpha;\r\nuniform float uLightAlpha;\r\n\r\n#define MODE_SCIENCE 0\r\n#define MODE_VALUE 1\r\n#define MODE_CHROMA 2\r\n#define MODE_BANDS 3\r\n\r\nvec4 white = vec4(1.0, 1.0, 1.0, 1.0);\r\nvec4 red = vec4(1.0, 0.0, 0.0, 1.0);\r\nvec4 orange = vec4(1.0, 0.65, 0.0, 1.0);\r\nvec4 yellow = vec4(1.0, 1.0, 0.0, 1.0);\r\nvec4 green = vec4(0.0, 1.0, 0.0, 1.0);\r\nvec4 cyan = vec4(0.0, 1.0, 1.0, 1.0);\r\nvec4 blue = vec4(0.0, 0.0, 1.0, 1.0);\r\nvec4 black = vec4(0.0, 0.0, 0.0, 1.0);\r\n#define NUM_COLORS 6\r\nvec4 colors[NUM_COLORS];\r\n\r\nvec4 value2Color(float value)\r\n{\r\n   float span = 1.0 / float(NUM_COLORS - 1);\r\n   value *= float(NUM_COLORS - 1);\r\n   if (value < 0.0)\r\n   {\r\n      return colors[0];\r\n   }\r\n   else if (value < 1.0)\r\n   {\r\n      return colors[0] + value * (colors[1] - colors[0]);\r\n   }\r\n   else if (value < 2.0)\r\n   {\r\n      return colors[1] + (value - 1.0) * (colors[2] - colors[1]);\r\n   }\r\n   else if (value < 3.0)\r\n   {\r\n      return colors[2] + (value - 2.0) * (colors[3] - colors[2]);\r\n   }\r\n   else if (value < 4.0)\r\n   {\r\n      return colors[3] + (value - 3.0) * (colors[4] - colors[3]);\r\n   }\r\n   else if (value < 5.0)\r\n   {\r\n      return colors[4] + (value - 4.0) * (colors[5] - colors[4]);\r\n   }\r\n   /*\r\n   else if (value < 6.0)\r\n   {\r\n      return colors[5] + (value - 5.0) * (colors[6] - colors[5]);\r\n   }\r\n   */\r\n   else\r\n   {\r\n      return colors[NUM_COLORS - 1];\r\n   }\r\n}\r\n\r\nfloat toGray(vec4 c)\r\n{\r\n   // lots of ways to convert RGB to gray scale.\r\n\r\n   // simple averaging method\r\n   // return (c.r + c.g + c.b) / 3.0;\r\n\r\n   // relative perceptual values\r\n   // return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;\r\n\r\n   // luminosity measure\r\n   float gamma = 2.2;\r\n   float y = 0.2126 * pow(c.r, gamma) + 0.7152 * pow(c.g, gamma) + .0722 * pow(c.b, gamma);\r\n   float l = 116.0 * pow(y, 1.0 / 3.0) - 16.0;\r\n   return l / 100.0;\r\n}\r\n\r\nvec4 renderAsValue()\r\n{\r\n   vec4 color = texture2D(uTexture, texCoord);\r\n   float rgb = toGray(color);\r\n   return vec4(rgb, rgb, rgb, 1.0);\r\n}\r\n\r\nvec4 renderAsChroma()\r\n{\r\n   vec4 color = texture2D(uTexture, texCoord);\r\n\r\n   // render the scale as a bar on the left\r\n   if (texCoord.x < 0.03)\r\n   {\r\n      return value2Color((texCoord.y - 0.1) / 0.9);\r\n   }\r\n   else\r\n   {\r\n      if (color.a >= uShadowAlpha)\r\n      {\r\n         float avg = (color.r + color.g + color.b) / 3.0;\r\n         float rgb = (abs(avg - color.r) + abs(avg - color.g) + abs(avg - color.b)) / (4.0 / 3.0);\r\n         return value2Color(rgb / uMaxChroma);\r\n      }\r\n      else\r\n      {\r\n         return vec4(0.0, 0.0, 0.0, 1.0);\r\n      }\r\n   }\r\n}\r\n\r\nfloat d2(vec3 c1, vec3 c2)\r\n{\r\n   // sum the squares of the differences\r\n   return pow(c1.r - c2.r, 2.0) + pow(c1.g - c2.g, 2.0) + pow(c1.b - c2.b, 2.0);\r\n}\r\n\r\nvec3 closest(vec3 color, vec3 light, vec3 mid, vec3 dark)\r\n{\r\n   float dlight = d2(color, light);\r\n   float dmid = d2(color, mid);\r\n   float ddark = d2(color, dark);\r\n\r\n   float dmin = min(dlight, min(dmid, ddark));\r\n   if (dmin == dlight)\r\n   {\r\n      return light;\r\n   }\r\n   else if (dmin == dmid)\r\n   {\r\n      return mid;\r\n   }\r\n   else\r\n   {\r\n      return dark;\r\n   }\r\n}\r\n\r\nvec4 renderAsBands()\r\n{\r\n   float size = 0.07;\r\n   float margin = (1.0 - 6.0 * size) / 2.0;\r\n   if (texCoord.x < size && texCoord.y > margin && texCoord.y < (1.0 - margin))\r\n   {\r\n      if (texCoord.y < (margin + 1.0 * size))\r\n      {\r\n         return vec4(uDarkAccentColor, 1.0);\r\n      }\r\n      else if (texCoord.y < (margin + 2.0 * size))\r\n      {\r\n         return vec4(uShadowColor, 1.0);\r\n      }\r\n      else if (texCoord.y < (margin + 3.0 * size))\r\n      {\r\n         return vec4(uDarkLightColor, 1.0);\r\n      }\r\n      else if (texCoord.y < (margin + 4.0 * size))\r\n      {\r\n         return vec4(uMidLightColor, 1.0);\r\n      }\r\n      else if (texCoord.y < (margin + 5.0 * size))\r\n      {\r\n         return vec4(uLightLightColor, 1.0);\r\n      }\r\n      else // if (texCoord.y < (margin + 7.0 * size))\r\n      {\r\n         return vec4(uHighlightColor, 1.0);\r\n      }\r\n   }\r\n   else\r\n   {\r\n      vec4 color = texture2D(uTexture, texCoord);\r\n\r\n      // define the terminator as the point where things are 50% in shadow\r\n      float terminator = ((uShadowAlpha + uLightAlpha) / 2.0);\r\n      if (color.a > 1.0 && color.a <= terminator)\r\n      {\r\n         vec3 c = closest(color.rgb, uShadowColor, uReflectedLightColor, uDarkAccentColor);\r\n         return vec4(c, 1.0);\r\n      }\r\n      else if (color.a > terminator)\r\n      {\r\n         // only render the highlight where it's contribution is significant, i.e. greater\r\n         // than some threshold\r\n         const float SPECULAR_THRESHOLD = 0.1;\r\n         if (color.a > (uLightAlpha + SPECULAR_THRESHOLD))\r\n         {\r\n            return vec4(uHighlightColor, 1.0);\r\n         }\r\n         else\r\n         {\r\n            vec3 c = closest(color.rgb, uLightLightColor, uMidLightColor, uDarkLightColor);\r\n            return vec4(c, 1.0);\r\n         }\r\n      }\r\n      else\r\n      {\r\n         return color;\r\n      }\r\n   }\r\n}\r\n\r\nvec4 renderAsScience()\r\n{\r\n   // just return the texture\r\n   return texture2D(uTexture, texCoord);\r\n}\r\n\r\nvoid main()\r\n{\r\n   colors[0] = black;\r\n   colors[1] = blue;\r\n   colors[2] = green;\r\n   colors[3] = yellow;\r\n   colors[4] = orange;\r\n   colors[5] = red;\r\n\r\n   if (uMode == MODE_VALUE)\r\n   {\r\n      gl_FragColor = renderAsValue();\r\n   }\r\n   else if (uMode == MODE_CHROMA)\r\n   {\r\n      gl_FragColor = renderAsChroma();\r\n   }\r\n   else if (uMode == MODE_BANDS)\r\n   {\r\n      gl_FragColor = renderAsBands();\r\n   }\r\n   else\r\n   {\r\n      gl_FragColor = renderAsScience();\r\n   }\r\n}\r\n");

/***/ }),

/***/ "./src/shaders/PathTracerToScreenVertex.glsl":
/*!***************************************************!*\
  !*** ./src/shaders/PathTracerToScreenVertex.glsl ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("attribute vec3 vertex;\r\nvarying vec2 texCoord;\r\nuniform float uScale;\r\nuniform float uXOffset;\r\nuniform float uYOffset;\r\n\r\nvoid main()\r\n{\r\n   texCoord = vertex.xy * 0.5 + 0.5;\r\n\r\n   gl_Position = vec4(uScale * vertex.x + uXOffset, uScale * vertex.y + uYOffset, 0.0, 1.0);\r\n}\r\n");

/***/ }),

/***/ "./src/shaders/PathTracerToTextureFragment.glsl":
/*!******************************************************!*\
  !*** ./src/shaders/PathTracerToTextureFragment.glsl ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<VERSION>\r\n\r\n#define NOTHING\r\n\r\n#ifdef USE_TRIANGLES\r\n#define ES300\r\n#endif\r\n\r\nprecision highp float;\r\n\r\n#ifdef ES300\r\nin vec3 initialRay;\r\n#else\r\nvarying vec3 initialRay;\r\n#endif\r\n\r\nuniform vec3 uEye;\r\nuniform float uTextureSize;\r\nuniform float uRandom;\r\nuniform sampler2D uTexture;\r\nuniform vec3 uLightPos;\r\nuniform float uLightIntensity;\r\nuniform vec3 uLightColor;\r\nuniform float uAmbientLightIntensity;\r\nuniform vec3 uObjColor;\r\nuniform float uBallRadius;\r\nuniform float uSample;\r\nuniform float uLightAlpha;\r\nuniform float uShadowAlpha;\r\n\r\n#ifdef ES300\r\nout vec4 fragColor;\r\n#else\r\n#define fragColor gl_FragColor\r\n#define texture texture2D\r\n#endif\r\n\r\nconst int MAX_BOUNCES = 10;\r\nconst float EPSILON = 0.000001;\r\nconst float OFFSET = 0.0001;\r\nconst float INFINITY = 10000.0;\r\nconst float LIGHT_SIZE = 0.1;\r\n#define BALL_CENTER vec3(0, uBallRadius, 0)\r\nconst vec3 DOME_CENTER = vec3(0, 0, 0);\r\nconst float DOME_RADIUS = 8.0;\r\nconst float VAL = 0.8;\r\nconst vec3 DOME_COLOR = vec3(VAL, VAL, VAL);\r\nconst vec3 FLOOR_COLOR = vec3(VAL, VAL, VAL);\r\nconst vec3 AMBIENT_COLOR = vec3(1.0, 1.0, 1.0);\r\nconst int NUM_LIGHTS = 6;\r\nconst float HEIGHT = 5.0;\r\nconst float RADIUS = 4.0;\r\nconst float PI = 3.14159265;\r\n\r\nstruct Light\r\n{\r\n   float intensity;\r\n   float size;\r\n   vec3 pos;\r\n   vec3 color;\r\n};\r\n\r\n Light Lights[NUM_LIGHTS];\r\n\r\n#ifdef USE_TRIANGLES\r\nstruct Triangle\r\n{\r\n   vec3 p0;\r\n   vec3 p1;\r\n   vec3 p2;\r\n};\r\n\r\nstruct Volume\r\n{\r\n   int startIndex;\r\n   int numTriangles;\r\n   vec3 boxMin;\r\n   vec3 boxMax;\r\n};\r\n\r\n// The following line is replaced with code generated in JavaScript\r\nconst int NUM_VERTICES = <NUM_VERTICES>;\r\nconst int NUM_VOLUMES = <NUM_VOLUMES>;\r\nconst int NUM_TRIANGLES = <NUM_TRIANGLES>;\r\n\r\nlayout(std140) uniform MyVerticesBlock { vec3 vertices[NUM_VERTICES]; };\r\n\r\nstruct ITriangle\r\n{\r\n   int i0;\r\n   int i1;\r\n   int i2;\r\n};\r\n\r\nlayout(std140) uniform MyTrianglesBlock { ITriangle triangles[NUM_TRIANGLES]; };\r\nTriangle getTriangle(int index)\r\n{\r\n   ITriangle tri = triangles[index];\r\n   vec3 p0 = vertices[tri.i0];\r\n   vec3 p1 = vertices[tri.i1];\r\n   vec3 p2 = vertices[tri.i2];\r\n   return Triangle(p0, p1, p2);\r\n}\r\n\r\n// The central object being rendered\r\nstruct Object\r\n{\r\n   Volume volumes[NUM_VOLUMES];\r\n   vec3 boxMin;\r\n   vec3 boxMax;\r\n};\r\n\r\nuniform Object object;\r\n\r\nbool intersectBox(const vec3 origin, const vec3 ray, const vec3 boxMin, const vec3 boxMax)\r\n{\r\n   vec3 rayInv = 1.0 / ray;\r\n   vec3 tbot = rayInv * (boxMin - origin);\r\n   vec3 ttop = rayInv * (boxMax - origin);\r\n   vec3 tmin = min(ttop, tbot);\r\n   vec3 tmax = max(ttop, tbot);\r\n   vec2 t = max(tmin.xx, tmin.yz);\r\n   float t0 = max(t.x, t.y);\r\n   t = min(tmax.xx, tmax.yz);\r\n   float t1 = min(t.x, t.y);\r\n   return t1 > max(t0, 0.0);\r\n}\r\n\r\nbool intersectVol(const vec3 origin, const vec3 ray, Volume vol)\r\n{\r\n   if (vol.numTriangles == 0)\r\n   {\r\n      return false;\r\n   }\r\n\r\n   return intersectBox(origin, ray, vol.boxMin, vol.boxMax);\r\n}\r\n\r\nbool intersectObj(const vec3 origin, const vec3 ray, Object object)\r\n{\r\n   return intersectBox(origin, ray, object.boxMin, object.boxMax);\r\n}\r\n\r\n// Möller–Trumbore ray-triangle intersection algorithm\r\n// source: http://bit.ly/2MxnPMG\r\nfloat intersectTriangle(vec3 origin, vec3 ray, Triangle tri)\r\n{\r\n   vec3 edge1, edge2, h, s, q;\r\n   float a, f, u, v;\r\n   edge1 = tri.p1 - tri.p0;\r\n   edge2 = tri.p2 - tri.p0;\r\n\r\n   h = cross(ray, edge2);\r\n   a = dot(edge1, h);\r\n   if (abs(a) < EPSILON)\r\n      return INFINITY;\r\n\r\n   f = 1.0 / a;\r\n   s = origin - tri.p0;\r\n   u = f * dot(s, h);\r\n   if (u < 0.0 || u > 1.0)\r\n      return INFINITY;\r\n\r\n   q = cross(s, edge1);\r\n   v = f * dot(ray, q);\r\n   if (v < 0.0 || (u + v) > 1.0)\r\n      return INFINITY;\r\n\r\n   // At this stage we can compute t to find out where the intersection point is on the line.\r\n   float t = f * dot(edge2, q);\r\n   if (t <= EPSILON) // this means that there is a line intersection but not a ray intersection.\r\n      return INFINITY;\r\n\r\n   return t; // ray intersection\r\n}\r\n\r\nvec3 normalForTriangle(vec3 origin, vec3 hit, int tIndex)\r\n{\r\n   Triangle tri = getTriangle(tIndex);\r\n   vec3 normal = cross(tri.p1 - tri.p0, tri.p2 - tri.p0);\r\n   normal = normalize(normal);\r\n   if (dot(normal, origin - hit) > 0.0)\r\n   {\r\n      return normal;\r\n   }\r\n   else\r\n   {\r\n      return -normal;\r\n   }\r\n}\r\n#endif\r\n\r\nfloat intersectSphere(vec3 origin, vec3 ray, vec3 sphereCenter, float sphereRadius)\r\n{\r\n   vec3 toSphere = origin - sphereCenter;\r\n   float a = dot(ray, ray);\r\n   float b = 2.0 * dot(toSphere, ray);\r\n   float c = dot(toSphere, toSphere) - sphereRadius * sphereRadius;\r\n   float discriminant = b * b - 4.0 * a * c;\r\n   if (discriminant > 0.0)\r\n   {\r\n      float t1 = (-b - sqrt(discriminant)) / (2.0 * a);\r\n      float t2 = (-b + sqrt(discriminant)) / (2.0 * a);\r\n      if (t1 > 0.0)\r\n      {\r\n         return t1;\r\n      }\r\n      else if (t2 > 0.0)\r\n      {\r\n         return t2;\r\n      }\r\n   }\r\n   return INFINITY;\r\n}\r\n\r\nvec3 normalForSphere(vec3 hit, vec3 sphereCenter, float sphereRadius)\r\n{\r\n   return (hit - sphereCenter) / sphereRadius;\r\n}\r\n\r\nfloat random(vec3 scale, float seed)\r\n{\r\n   return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\r\n}\r\n\r\nvec3 cosineWeightedDirection(float seed, vec3 normal)\r\n{\r\n   float u = random(vec3(12.9898, 78.233, 151.7182), seed);\r\n   float v = random(vec3(63.7264, 10.873, 623.6736), seed);\r\n   float r = sqrt(u);\r\n   float angle = 6.283185307179586 * v;\r\n   // compute basis from normal\r\n   vec3 sdir, tdir;\r\n   if (abs(normal.x) < .5)\r\n   {\r\n      sdir = cross(normal, vec3(1, 0, 0));\r\n   }\r\n   else\r\n   {\r\n      sdir = cross(normal, vec3(0, 1, 0));\r\n   }\r\n   tdir = cross(normal, sdir);\r\n   return r * cos(angle) * sdir + r * sin(angle) * tdir + sqrt(1. - u) * normal;\r\n}\r\n\r\nvec3 uniformlyRandomDirection(float seed)\r\n{\r\n   float u = random(vec3(12.9898, 78.233, 151.7182), seed);\r\n   float v = random(vec3(63.7264, 10.873, 623.6736), seed);\r\n   float z = 1.0 - 2.0 * u;\r\n   float r = sqrt(1.0 - z * z);\r\n   float angle = 6.283185307179586 * v;\r\n   return vec3(r * cos(angle), r * sin(angle), z);\r\n}\r\n\r\nvec3 uniformlyRandomVector(float seed)\r\n{\r\n   return uniformlyRandomDirection(seed) * sqrt(random(vec3(36.7539, 50.3658, 306.2759), seed));\r\n}\r\n\r\nbool inShadow(vec3 origin, vec3 ray, float tLight)\r\n{\r\n   float tBall = intersectSphere(origin, ray, BALL_CENTER, uBallRadius);\r\n   if (tBall < tLight)\r\n   {\r\n      return true;\r\n   }\r\n\r\n#ifdef USE_TRIANGLES\r\n   if (intersectObj(origin, ray, object))\r\n   {\r\n      for (int i = 0; i < NUM_VOLUMES; i++)\r\n      {\r\n         Volume vol = object.volumes[i];\r\n         if (intersectVol(origin, ray, vol))\r\n         {\r\n            for (int i = vol.startIndex; i < (vol.startIndex + vol.numTriangles); i++)\r\n            {\r\n               Triangle tri = getTriangle(i);\r\n               if (intersectTriangle(origin, ray, tri) < tLight)\r\n               {\r\n                  return true;\r\n               }\r\n            }\r\n         }\r\n      }\r\n   }\r\n#endif\r\n\r\n   return false;\r\n}\r\n\r\n// All components are in the range [0…1], including hue.\r\nvec4 rgb2hsv(vec4 c)\r\n{\r\n   vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\r\n   vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\r\n   vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\r\n\r\n   float d = q.x - min(q.w, q.y);\r\n   float e = 1.0e-10;\r\n   return vec4(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x, c.a);\r\n}\r\n\r\n// All components are in the range[0…1], including hue.\r\nvec4 hsv2rgb(vec4 c)\r\n{\r\n   vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\r\n   vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\r\n   return vec4(c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y), c.a);\r\n}\r\n\r\nvec4 shiftTemperature(vec4 rgb, float deg, float tintStrength)\r\n{\r\n   vec4 hsv = rgb2hsv(rgb);\r\n   hsv.x += deg / 360.0;\r\n   vec4 fullTintRgb = hsv2rgb(hsv);\r\n\r\n   return mix(rgb, fullTintRgb, tintStrength);\r\n}\r\n\r\n// TODO move to a common file\r\nfloat toGray(vec4 c)\r\n{\r\n   // lots of ways to convert RGB to gray scale.\r\n\r\n   // simple averaging method\r\n   // return (c.r + c.g + c.b) / 3.0;\r\n\r\n   // relative perceptual values\r\n   // return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;\r\n\r\n   // luminosity measure\r\n   float gamma = 2.2;\r\n   float y = 0.2126 * pow(c.r, gamma) + 0.7152 * pow(c.g, gamma) + .0722 * pow(c.b, gamma);\r\n   float l = 116.0 * pow(y, 1.0 / 3.0) - 16.0;\r\n   return l / 100.0;\r\n}\r\n\r\nvec4 calculateColor(vec3 origin, vec3 ray)\r\n{\r\n   vec3 accumulatedColor = vec3(0.0);\r\n   vec3 colorMask = vec3(1.0);\r\n   vec3 eye = origin;\r\n   bool objHit = false;\r\n   bool objShadow = false;\r\n   float specularContribution = 0.0;\r\n\r\n   // main raytracing loop\r\n   for (int bounce = 0; bounce < MAX_BOUNCES; bounce++)\r\n   {\r\n      // compute the intersection with everything\r\n      float tBall = intersectSphere(origin, ray, BALL_CENTER, uBallRadius);\r\n      vec3 surfaceColor = vec3(0.5, 0.5, 0.5);\r\n\r\n      float tObj = INFINITY;\r\n      int tIndex;\r\n#ifdef USE_TRIANGLES\r\n      if (intersectObj(origin, ray, object))\r\n      {\r\n         for (int i = 0; i < NUM_VOLUMES; i++)\r\n         {\r\n            Volume vol = object.volumes[i];\r\n            if (intersectVol(origin, ray, vol))\r\n            {\r\n               for (int i = vol.startIndex; i < (vol.startIndex + vol.numTriangles); i++)\r\n               {\r\n                  Triangle tri = getTriangle(i);\r\n                  float tTri = min(tObj, intersectTriangle(origin, ray, tri));\r\n                  if (tTri < tObj)\r\n                  {\r\n                     tObj = tTri;\r\n                     tIndex = i;\r\n                  }\r\n               }\r\n            }\r\n         }\r\n      }\r\n#endif\r\n\r\n      // if the first ray hits the light, return the light color. This\r\n      // simulates displaying the light\r\n      if (bounce == 0)\r\n      {\r\n         for (int i = 0; i < NUM_LIGHTS; i++)\r\n         {\r\n            float tLight = intersectSphere(origin, ray, Lights[i].pos, Lights[i].size);\r\n            if (tLight < tBall && tLight < tObj)\r\n            {\r\n               return vec4(Lights[i].intensity * Lights[i].color, 1.0);\r\n            }\r\n         }\r\n      }\r\n\r\n      // find the closest intersection\r\n      float tDome = intersectSphere(origin, ray, DOME_CENTER, DOME_RADIUS);\r\n      float tFloor = INFINITY;\r\n\r\n      // check for intersection with the ground\r\n      if (ray.y < 0.0)\r\n      {\r\n         // distance to floor = num unit vectors required to reach the floor\r\n         tFloor = -origin.y / ray.y;\r\n      }\r\n\r\n      // find the closest hit\r\n      float t = min(min(tDome, tFloor), min(tBall, tObj));\r\n\r\n      // info about hit\r\n      vec3 hit = origin + ray * t;\r\n      vec3 normal;\r\n\r\n      // calculate the normal\r\n      if (t == tFloor)\r\n      {\r\n         surfaceColor = FLOOR_COLOR;\r\n         normal = vec3(0.0, 1.0, 0.0);\r\n      }\r\n      else if (t == tBall)\r\n      {\r\n         surfaceColor = vec3(uObjColor);\r\n         normal = normalForSphere(hit, BALL_CENTER, uBallRadius);\r\n\r\n         if (bounce == 0)\r\n         {\r\n            objHit = true;\r\n         }\r\n      }\r\n#ifdef USE_TRIANGLES\r\n      else if (t == tObj)\r\n      {\r\n         surfaceColor = uObjColor;\r\n         normal = normalForTriangle(origin, hit, tIndex);\r\n\r\n         if (bounce == 0)\r\n         {\r\n            objHit = true;\r\n         }\r\n      }\r\n#endif\r\n      else if (t == tDome)\r\n      {\r\n         surfaceColor = DOME_COLOR;\r\n         normal = -normalForSphere(hit, DOME_CENTER, DOME_RADIUS);\r\n      }\r\n      else\r\n      {\r\n         break;\r\n      }\r\n\r\n      colorMask *= surfaceColor;\r\n\r\n      if (length(colorMask) < 0.01)\r\n      {\r\n         break;\r\n      }\r\n\r\n      for (int i = 0; i < NUM_LIGHTS; i++)\r\n      {\r\n         // compute diffuse lighting contribution\r\n         vec3 toLight = Lights[i].pos - hit;\r\n         vec3 toLightN = normalize(toLight);\r\n\r\n         // trace a shadow ray to the light\r\n         if (inShadow(hit + normal * OFFSET, toLightN, length(toLight)) == false)\r\n         {\r\n            // diffuse component\r\n            float diffuse = max(0.0, dot(toLightN, normal));\r\n\r\n            // specular component\r\n            vec3 toEye = eye - hit;\r\n            vec3 n2l = toLightN;\r\n            vec3 n2e = normalize(toEye);\r\n            vec3 bisector = (n2l + n2e) / length(n2l + n2e);\r\n            float specularCoefficient = 0.5;\r\n            float shininess = 100.0;\r\n            float specular = specularCoefficient * pow(max(0.0, dot(bisector, normal)), shininess);\r\n\r\n            // apply light fall off as distance squares. Use a min value for the\r\n            // light size otherwise falloff is too rapid\r\n            float radius = max(0.75, Lights[i].size);\r\n            float dist = max(1.0, (length(toLight) - radius) / radius);\r\n            float lightIntensity = Lights[i].intensity / (dist * dist);\r\n\r\n            accumulatedColor += colorMask * Lights[i].color * lightIntensity * diffuse;\r\n\r\n            // TODO define a color mask for specular reflection\r\n            //            accumulatedColor += mix(surfaceColor, Lights[i].color, 0.8) *\r\n            //            lightIntensity * specular;\r\n            accumulatedColor +=\r\n                (length(surfaceColor) * Lights[i].color) * lightIntensity * specular;\r\n\r\n            if (bounce == 0 && i == 0)\r\n            {\r\n               specularContribution += lightIntensity * specular;\r\n            }\r\n         }\r\n         else if (bounce == 0 && i == 0)\r\n         {\r\n            objShadow = true;\r\n         }\r\n      }\r\n\r\n      // calculate next origin\r\n      ray = cosineWeightedDirection(uRandom + float(bounce), normal);\r\n\r\n      origin = hit;\r\n   }\r\n\r\n   float alpha = 1.0;\r\n   if (objHit)\r\n   {\r\n      if (objShadow)\r\n      {\r\n         alpha = uShadowAlpha;\r\n      }\r\n      else\r\n      {\r\n         alpha = uLightAlpha;\r\n      }\r\n      alpha += clamp(specularContribution, 0.0, 1.0);\r\n   }\r\n\r\n   vec4 scienceColor = vec4(clamp(accumulatedColor, 0.0, 1.0), alpha);\r\n   return scienceColor;\r\n   /*\r\n   if (objHit)\r\n   {\r\n      return vec4(toArtist(scienceColor).rgb, alpha);\r\n   }\r\n   else\r\n   {\r\n      return scienceColor;\r\n   }\r\n   */\r\n}\r\n\r\nvoid main()\r\n{\r\n   vec3 rand = uniformlyRandomVector(uRandom) * LIGHT_SIZE;\r\n\r\n   Lights[0].intensity = uLightIntensity;\r\n   Lights[0].size = LIGHT_SIZE;\r\n   Lights[0].pos = uLightPos + rand;\r\n   Lights[0].color = uLightColor;\r\n\r\n   for (int i = 1; i < NUM_LIGHTS; i++)\r\n   {\r\n      float x = RADIUS * sin(2.0 * PI * float(i) / (float(NUM_LIGHTS) - 1.0)) + rand.x;\r\n      float y = HEIGHT + rand.y;\r\n      float z = RADIUS * cos(2.0 * PI * float(i) / (float(NUM_LIGHTS) - 1.0)) + rand.z;\r\n\r\n      Lights[i].intensity = uAmbientLightIntensity;\r\n      Lights[i].size = 2.0 * LIGHT_SIZE;\r\n      Lights[i].pos = vec3(x, y, z);\r\n      Lights[i].color = AMBIENT_COLOR;\r\n   }\r\n\r\n   // merge the new color into the existing texture\r\n   vec4 textureColor = texture(uTexture, gl_FragCoord.xy / uTextureSize);\r\n   vec4 newColor = calculateColor(uEye, initialRay);\r\n   float weight = (uSample / (1.0 + uSample));\r\n   fragColor = mix(newColor, textureColor, weight);\r\n}");

/***/ }),

/***/ "./src/shaders/PathTracerToTextureVertex.glsl":
/*!****************************************************!*\
  !*** ./src/shaders/PathTracerToTextureVertex.glsl ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<VERSION>\r\n\r\n#define NOTHING\r\n#ifdef USE_TRIANGLES\r\n#define ES300\r\n#endif\r\n\r\nprecision highp float;\r\nuniform vec3 uEye, uRay00, uRay01, uRay10, uRay11;\r\n\r\n#ifdef ES300\r\nin vec3 vertex;\r\nout vec3 initialRay;\r\n#else\r\nattribute vec3 vertex;\r\nvarying vec3 initialRay;\r\n#endif \r\n\r\nvoid main()\r\n{\r\n   vec2 percent = vertex.xy * 0.5 + 0.5;\r\n   initialRay = mix(mix(uRay00, uRay01, percent.y), mix(uRay10, uRay11, percent.y), percent.x);\r\n   gl_Position = vec4(vertex, 1.0);\r\n}\r\n");

/***/ }),

/***/ "./src/shaders/TextureRendererFragment.glsl":
/*!**************************************************!*\
  !*** ./src/shaders/TextureRendererFragment.glsl ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\r\nprecision highp float;\r\nvarying vec2 texCoord;\r\nuniform sampler2D uTexture;\r\n\r\nvoid main() { gl_FragColor = texture2D(uTexture, texCoord); }\r\n");

/***/ }),

/***/ "./src/shaders/TextureRendererVertex.glsl":
/*!************************************************!*\
  !*** ./src/shaders/TextureRendererVertex.glsl ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\r\nattribute vec2 vertex;\r\nvarying vec2 texCoord;\r\n\r\nvoid main()\r\n{\r\n   texCoord = vertex.xy * 0.5 + 0.5;\r\n\r\n   gl_Position = vec4(vertex.xy, 0.0, 1.0);\r\n}\r\n");

/***/ }),

/***/ "./src/shaders/ViewerFragment.glsl":
/*!*****************************************!*\
  !*** ./src/shaders/ViewerFragment.glsl ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("precision highp float;\r\n\r\n// interpolated values from the vertex shader\r\nvarying vec3 vNormal;\r\nvarying vec3 vVertex;\r\nvarying vec3 vShadowVertex;\r\nvarying vec3 vModelVertex;\r\n\r\nuniform mat4 model;\r\nuniform vec3 uEye;\r\nuniform bool uOrthographic;\r\n\r\n#define NORMAL 0\r\n#define CONTOUR_PLANES 1\r\n#define CONTOUR_VALUES 2\r\n#define LIGHT_AND_SHADOW 3\r\n#define HIGHLIGHT_TERMINATOR 4\r\n#define HIGHLIGHT_SHADOW 5\r\n#define EMPHASIZE_HIGHLIGHTS 6\r\n\r\nuniform int uRenderMode;\r\n\r\n// these are value between 0-1\r\nuniform float uDiffuseIntensity;\r\nuniform float uAmbientIntensity;\r\nuniform float uSpecularIntensity;\r\n\r\n// the colors we use to represent our lightest and darkest values\r\nuniform vec3 uWhiteColor;\r\nuniform vec3 uBlackColor;\r\n\r\nuniform vec3 uLightPos;\r\nuniform bool uPointLight;\r\nuniform float uFalloff;\r\nuniform float uLightIntensity;\r\nuniform float uLightIntensityAtSource;\r\n\r\nuniform bool uUseShadows;\r\nuniform sampler2D uShadowTexture;\r\n\r\nuniform vec3 uFloorCenter;\r\nuniform float uFloorRadius;\r\nuniform bool uRenderingFloor;\r\nuniform bool uShowGrid;\r\n#define MAX_CONTOURS 9\r\nuniform int uNumContours;\r\nuniform vec3 uContourColors[9];\r\nuniform float uContourAngles[9];\r\nuniform bool uShowHighlights;\r\nuniform float uShininess;\r\n\r\n// For contour shading, the minimum specular contribution required to\r\n// show something as a highlight\r\nconst float SPECULAR_THRESHOLD = 0.06;\r\n\r\nbool uShowTerminator = true;\r\n\r\nbool in_shadow()\r\n{\r\n   if (uUseShadows == false)\r\n   {\r\n      return false;\r\n   }\r\n\r\n   // The vertex location rendered from the light source is almost in Normalized\r\n   // Device Coordinates (NDC), but the perspective division has not been\r\n   // performed yet. Perform the perspective divide. The (x,y,z) vertex location\r\n   // components are now each in the range [-1.0,+1.0].\r\n   // vec3 vertex_relative_to_light = v_Vertex_relative_to_light.xyz / v_Vertex_relative_to_light.w;\r\n   vec3 vertex = vShadowVertex;\r\n\r\n   // Convert the the values from Normalized Device Coordinates (range [-1.0,+1.0])\r\n   // to the range [0.0,1.0]. This mapping is done by scaling\r\n   // the values by 0.5, which gives values in the range [-0.5,+0.5] and then\r\n   // shifting the values by +0.5.\r\n   vertex = vertex * 0.5 + 0.5;\r\n\r\n   // Get the z value of this fragment in relationship to the light source.\r\n   // This value was stored in the shadow map (depth buffer of the frame buffer)\r\n   // which was passed to the shader as a texture map.\r\n   // vec4 textureValue = texture2D(uShadowSampler, vertex.xy);\r\n\r\n   // The texture map contains a single depth value for each pixel. However,\r\n   // the texture2D sampler always returns a color from a texture. For a\r\n   // gl.DEPTH_COMPONENT texture, the color contains the depth value in\r\n   // each of the color components. If the value was d, then the color returned\r\n   // is (d,d,d,1). This is a \"color\" (depth) value between [0.0,+1.0].\r\n   float shadowmap_distance = texture2D(uShadowTexture, vertex.xy).r;\r\n\r\n   // Test the distance between this fragment and the light source as\r\n   // calculated using the shadowmap transformation (vertex_relative_to_light.z) and\r\n   // the smallest distance between the closest fragment to the light source\r\n   // for this location, as stored in the shadowmap. When the closest\r\n   // distance to the light source was saved in the shadowmap, some\r\n   // precision was lost. Therefore we need a small tolerance factor to\r\n   // compensate for the lost precision.\r\n   float tol = 0.001;\r\n   if (vertex.z <= shadowmap_distance + tol)\r\n   {\r\n      // This surface receives full light because it is the closest surface\r\n      // to the light.\r\n      return false;\r\n   }\r\n   else\r\n   {\r\n      // This surface is in a shadow because there is a closer surface to\r\n      // the light source.\r\n      return true;\r\n   }\r\n}\r\n\r\nvec4 val2Color(float val) { return vec4(mix(uBlackColor, uWhiteColor, val), 1.0); }\r\n\r\nvec4 val2ContourColor(float val)\r\n{\r\n   val = clamp(val, 0.0, 1.0);\r\n   for (int i = 0; i < MAX_CONTOURS; i++)\r\n   {\r\n      float max = (float(i) + 1.0) / float(uNumContours);\r\n      if (val <= max)\r\n      {\r\n         return vec4(uContourColors[(MAX_CONTOURS - 1) - i], 1.0);\r\n      }\r\n   }\r\n}\r\n\r\nfloat getDiffuse(vec3 normal, vec3 toLight)\r\n{\r\n   float vDot = clamp(dot(normal, toLight), 0.0, 1.0);\r\n   float diffuse = uDiffuseIntensity * vDot;\r\n   return diffuse;\r\n}\r\n\r\nfloat getSpecular(vec3 normal, vec3 toLight, vec3 toEye)\r\n{\r\n   float specular = 0.0;\r\n\r\n   if (uShowHighlights)\r\n   {\r\n      vec3 reflection = normalize(2.0 * dot(normal, toLight) * normal - toLight);\r\n      float cosAngle = clamp(dot(reflection, toEye), 0.0, 1.0); // clamp to avoid values > 90 deg\r\n      specular = uSpecularIntensity * (uShininess / 15.0) * pow(cosAngle, uShininess);\r\n   }\r\n\r\n   return specular;\r\n}\r\n\r\nfloat getDistancePtToPlane(vec3 pt, vec3 plane)\r\n{\r\n   float a = plane.x;\r\n   float b = plane.y;\r\n   float c = plane.z;\r\n   float d = -(a * a + b * b + c * c);\r\n\r\n   return -(a * pt.x + b * pt.y + c * pt.z + d) / sqrt(a * a + b * b + c * c);\r\n}\r\n\r\nfloat getLightDistance(vec3 lightPos)\r\n{\r\n   if (uPointLight)\r\n   {\r\n      return length(lightPos - vVertex);\r\n   }\r\n   else\r\n   {\r\n      return getDistancePtToPlane(vVertex, lightPos);\r\n   }\r\n}\r\n\r\nfloat getValueFromLight(vec3 normal, vec3 toLight, vec3 toEye)\r\n{\r\n   float diffuse = getDiffuse(normal, toLight);\r\n   float specular = getSpecular(normal, toLight, toEye);\r\n\r\n   float falloff = 1.0;\r\n   if (uFalloff > 0.0)\r\n   {\r\n      float vDot = dot(normal, toLight);\r\n\r\n      float vDistance = getLightDistance(uLightPos);\r\n      falloff = uLightIntensityAtSource / (vDistance * vDistance);\r\n\r\n      // the light only shines one way\r\n      if (vDistance < 0.0)\r\n      {\r\n         diffuse = 0.0;\r\n         specular = 0.0;\r\n      }\r\n   }\r\n\r\n   return uAmbientIntensity + uLightIntensity * falloff * (diffuse + specular);\r\n}\r\n\r\nvec4 getContourPlaneColor(float vDot, vec3 normal, vec3 toLight, vec3 toEye)\r\n{\r\n   float specular = getSpecular(normal, toLight, toEye);\r\n   if (specular > SPECULAR_THRESHOLD)\r\n   {\r\n      return val2Color(uAmbientIntensity + uDiffuseIntensity + uSpecularIntensity);\r\n   }\r\n\r\n   float angle = (180.0 / 3.1415926) * acos(vDot);\r\n   if (angle > 90.0)\r\n   {\r\n      return val2Color(uAmbientIntensity);\r\n   }\r\n   else\r\n   {\r\n      for (int i = 0; i < MAX_CONTOURS; i++)\r\n      {\r\n         if (i < uNumContours)\r\n         {\r\n            if (angle < uContourAngles[i])\r\n            {\r\n               return vec4(uContourColors[i], 1.0);\r\n            }\r\n         }\r\n      }\r\n   }\r\n}\r\n\r\nvec4 getContourValueColor(float vDot, vec3 normal, vec3 toLight, vec3 toEye)\r\n{\r\n   float specular = getSpecular(normal, toLight, toEye);\r\n   if (specular > SPECULAR_THRESHOLD)\r\n   {\r\n      return vec4(1.0, 1.0, 1.0, 1.0);\r\n   }\r\n\r\n   float val = getValueFromLight(normal, toLight, toEye);\r\n   return val2ContourColor(val);\r\n}\r\n\r\nfloat round(float val) { return floor(val + 0.5); }\r\n\r\nfloat getFloorGridAdjustment(float dist)\r\n{\r\n   float thickness = 0.001;\r\n   float alias = 0.005;\r\n\r\n   if (dist < (thickness + alias))\r\n   {\r\n      if (dist < thickness)\r\n      {\r\n         return 0.5;\r\n      }\r\n      else\r\n      {\r\n         return 0.5 * (1.0 + (dist - thickness) / alias);\r\n      }\r\n   }\r\n   else\r\n   {\r\n      return 1.0;\r\n   }\r\n}\r\n\r\nvec4 getFloorColor(bool inShadow, vec3 normal, vec3 toLight, vec3 toEye)\r\n{\r\n   vec4 fragColor;\r\n\r\n   // gradiate out the background from half transparent to full transparency\r\n   vec3 center = (model * vec4(uFloorCenter, 1.0)).xyz;\r\n   float dist = length(center - vVertex);\r\n   float a = 0.5 * (1.0 - dist / uFloorRadius);\r\n\r\n   float gridFactor = 1.0;\r\n   if (uShowGrid)\r\n   {\r\n      float circle = getFloorGridAdjustment(abs(dist - round(dist)));\r\n      float x = getFloorGridAdjustment(abs(vModelVertex.x - round(vModelVertex.x)));\r\n      float z = getFloorGridAdjustment(abs(vModelVertex.z - round(vModelVertex.z)));\r\n\r\n      gridFactor = min(circle, min(x, z));\r\n   }\r\n\r\n   float val = 0.0;\r\n   if (inShadow)\r\n   {\r\n      val = uAmbientIntensity;\r\n   }\r\n   else\r\n   {\r\n      val = getValueFromLight(normal, toLight, toEye);\r\n   }\r\n\r\n   fragColor = val2Color(gridFactor * val);\r\n   fragColor.a = a;\r\n\r\n   return fragColor;\r\n}\r\n\r\nvoid main()\r\n{\r\n   vec3 toLight;\r\n   if (uPointLight)\r\n   {\r\n      toLight = normalize(uLightPos - vVertex);\r\n   }\r\n   else\r\n   {\r\n      toLight = normalize(uLightPos);\r\n   }\r\n\r\n   bool inShadow = in_shadow();\r\n\r\n   vec3 toEye;\r\n   if (uOrthographic)\r\n   {\r\n      toEye = vec3(0.0, 0.0, 1.0);\r\n   }\r\n   else\r\n   {\r\n      toEye = normalize(uEye - vVertex);\r\n   }\r\n\r\n   vec3 normal = normalize(vNormal); // vNormal is interpolated and nolonger normal\r\n\r\n   // swap normals for back facing triangles\r\n   if (dot(normal, toEye) < 0.0)\r\n   {\r\n      normal = -normal;\r\n   }\r\n\r\n   // compute diffuse contribution = cos of angle between the vectors (dot product)\r\n   float vDot = dot(normal, toLight);\r\n\r\n   vec4 fragColor;\r\n   if (uRenderingFloor)\r\n   {\r\n      fragColor = getFloorColor(inShadow, normal, toLight, toEye);\r\n   }\r\n   else\r\n   {\r\n      if (uRenderMode == CONTOUR_PLANES)\r\n      {\r\n         if (inShadow)\r\n         {\r\n            fragColor = val2Color(uAmbientIntensity);\r\n         }\r\n         else\r\n         {\r\n            fragColor = getContourPlaneColor(vDot, normal, toLight, toEye);\r\n         }\r\n      }\r\n      else if (uRenderMode == CONTOUR_VALUES)\r\n      {\r\n         if (inShadow)\r\n         {\r\n            fragColor = val2ContourColor(uAmbientIntensity);\r\n         }\r\n         else\r\n         {\r\n            fragColor = getContourValueColor(vDot, normal, toLight, toEye);\r\n         }\r\n      }\r\n      else\r\n      {\r\n         vec4 highlightColor = vec4(0.0, 0.7, 0.7, 1.0);\r\n\r\n         if (inShadow)\r\n         {\r\n            if (uRenderMode == HIGHLIGHT_SHADOW)\r\n            {\r\n               fragColor = highlightColor;\r\n            }\r\n            else if (uRenderMode == LIGHT_AND_SHADOW)\r\n            {\r\n               fragColor = val2Color(uAmbientIntensity);\r\n            }\r\n            else\r\n            {\r\n               // when in shadow, apply slight shading as if the light\r\n               // were coming from the eye.\r\n               vec3 toShadowLight = vec3(0.0, 0.0, 1.0);\r\n               float val = getValueFromLight(normal, toShadowLight, toEye) / 20.0;\r\n               fragColor = val2Color(uAmbientIntensity + val);\r\n            }\r\n         }\r\n         else\r\n         {\r\n            if (uRenderMode == LIGHT_AND_SHADOW)\r\n            {\r\n               fragColor = val2Color(uAmbientIntensity + 0.75 * uDiffuseIntensity);\r\n               vec4 shadowColor = val2Color(uAmbientIntensity);\r\n\r\n               float vDot = dot(normal, toLight);\r\n               float angle = (180.0 / 3.1415926) * acos(vDot);\r\n               float range = 8.0; // degrees\r\n               float percentTerminator = clamp((angle - (90.0 - range)) / (range / 2.0), 0.0, 1.0);\r\n               fragColor = mix(fragColor, shadowColor, percentTerminator);\r\n            }\r\n            else if (uRenderMode == HIGHLIGHT_SHADOW || uRenderMode == HIGHLIGHT_TERMINATOR)\r\n            {\r\n               // fade highlighting from terminator through the shadow\r\n               float val = getValueFromLight(normal, toLight, toEye);\r\n               fragColor = val2Color(val);\r\n\r\n               float vDot = dot(normal, toLight);\r\n               float angle = (180.0 / 3.1415926) * acos(vDot);\r\n               float range = 8.0; // degrees\r\n               float percentTerminator;\r\n\r\n               if (uRenderMode == HIGHLIGHT_SHADOW)\r\n               {\r\n                  percentTerminator = clamp((angle - (90.0 - range)) / (range), 0.0, 1.0);\r\n               }\r\n               else\r\n               {\r\n                  if (angle > 90.0)\r\n                  {\r\n                     range = 2.0;\r\n                     percentTerminator = clamp(1.0 - (angle - 90.0) / range, 0.0, 1.0);\r\n                  }\r\n                  else\r\n                  {\r\n                     percentTerminator = clamp((angle - (90.0 - range)) / (range), 0.0, 1.0);\r\n                  }\r\n               }\r\n               fragColor = mix(fragColor, highlightColor, percentTerminator);\r\n            }\r\n            else\r\n            {\r\n               float val = getValueFromLight(normal, toLight, toEye);\r\n               fragColor = val2Color(val);\r\n            }\r\n         }\r\n      }\r\n   }\r\n\r\n   gl_FragColor = fragColor;\r\n}");

/***/ }),

/***/ "./src/shaders/ViewerVertex.glsl":
/*!***************************************!*\
  !*** ./src/shaders/ViewerVertex.glsl ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("attribute vec3 aVertex;\r\nattribute vec3 aNormal;\r\n\r\nuniform mat4 model;\r\nuniform mat4 view;\r\nuniform mat4 lightView;\r\nuniform mat4 projection;\r\n\r\nvarying vec3 vNormal;\r\nvarying vec3 vVertex;\r\nvarying vec3 vShadowVertex;\r\nvarying vec3 vModelVertex;\r\n\r\nvoid main()\r\n{\r\n   gl_Position = projection * view * model * vec4(aVertex, 1.0);\r\n   vNormal = (model * vec4(aNormal, 0.0)).xyz;\r\n   vVertex = (model * vec4(aVertex, 1.0)).xyz;\r\n   vShadowVertex = (lightView * model * vec4(aVertex, 1.0)).xyz;\r\n   vModelVertex = aVertex;\r\n}");

/***/ }),

/***/ "./src/styles/styles.css":
/*!*******************************!*\
  !*** ./src/styles/styles.css ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var api = __webpack_require__(/*! ../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !../../node_modules/css-loader/dist/cjs.js!./styles.css */ "./node_modules/css-loader/dist/cjs.js!./src/styles/styles.css");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.i, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlcy9BcnRTZWVBcHAuY3NzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZXMvQnV0dG9uLmNzcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGVzL0NoZWNrYm94LmNzcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGVzL0xpc3RCb3guY3NzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZXMvTWVudS5jc3MiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlcy9Nb2RlbFRpbWVyQXBwLmNzcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGVzL1BhdGhUcmFjZXJBcHAuY3NzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZXMvUmFkaW9idXR0b24uY3NzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZXMvU2xpZGVyLmNzcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGVzL1NxdWludEFwcC5jc3MiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlcy9UYWJzLmNzcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGVzL1ZpZXdlckFwcC5jc3MiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlcy9zdHlsZXMuY3NzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2ZpbGUtc2F2ZXIvZGlzdC9GaWxlU2F2ZXIubWluLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9ub3NsZWVwLmpzL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbm9zbGVlcC5qcy9zcmMvbWVkaWEuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J0Y3BlZXJjb25uZWN0aW9uLXNoaW0vcnRjcGVlcmNvbm5lY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3NjcmVlbmZ1bGwvZGlzdC9zY3JlZW5mdWxsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zZHAvc2RwLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdWEtcGFyc2VyLWpzL3NyYy91YS1wYXJzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL21kNS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL25pbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3BhcnNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvcmVnZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9ybmcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9zaGExLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvc3RyaW5naWZ5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdjEuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92My5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3YzNS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3Y0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdjUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92YWxpZGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3ZlcnNpb24uanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2FtZC1vcHRpb25zLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9hZGFwdGVyX2NvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9hZGFwdGVyX2ZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9jaHJvbWUvY2hyb21lX3NoaW0uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9jaHJvbWUvZ2V0ZGlzcGxheW1lZGlhLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY2hyb21lL2dldHVzZXJtZWRpYS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2NvbW1vbl9zaGltLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZWRnZS9lZGdlX3NoaW0uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9lZGdlL2ZpbHRlcmljZXNlcnZlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9lZGdlL2dldGRpc3BsYXltZWRpYS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2VkZ2UvZ2V0dXNlcm1lZGlhLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZmlyZWZveC9maXJlZm94X3NoaW0uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9maXJlZm94L2dldGRpc3BsYXltZWRpYS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2ZpcmVmb3gvZ2V0dXNlcm1lZGlhLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvc2FmYXJpL3NhZmFyaV9zaGltLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvVmlld2VyL0xvYWRlcldvcmtlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQXBwcy9QYXRoVHJhY2VyL0NvbG9yQW5hbHl6ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvUGF0aFRyYWNlci9QYXRoVHJhY2VyQXBwLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1BhdGhUcmFjZXIvUGF0aFRyYWNlck9iai50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQXBwcy9QYXRoVHJhY2VyL1BhdGhUcmFjZXJSZW5kZXJlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQXBwcy9QYXRoVHJhY2VyL1ZvbHVtZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQXBwcy9TcXVpbnQvQXJ0U2VlQXBwLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9CYW5kd2lkdGhUcmFja2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9DYW1lcmEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvU3F1aW50L0NoYXRQYW5lbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQXBwcy9TcXVpbnQvRXZlbnRNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9JbWFnZUNhbnZhcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQXBwcy9TcXVpbnQvSW1hZ2VGaWx0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvU3F1aW50L0xldmVsc1BhbmVsLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9Nb2RlbFRpbWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9Nb2RlbFRpbWVyQXBwLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9Nb2RlbFRpbWVyUGFuZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvU3F1aW50L09iamVjdFdpdGhTZXR0aW5ncy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQXBwcy9TcXVpbnQvUGFuZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvU3F1aW50L1Bhc3N3b3JkRGlhbG9nLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9Qcm9taXNlTWFwLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9SZWN0LnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9SZXNpemVhYmxlUGFuZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvU3F1aW50L1NlcnZlcnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvU3F1aW50L1Nlc3Npb25TZXR1cERpYWxvZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQXBwcy9TcXVpbnQvU291bmRzLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9TcXVpbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvU3F1aW50L1NxdWludEFwcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQXBwcy9TcXVpbnQvU3F1aW50RXZlbnRzLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9TcXVpbnRNZXNzYWdlLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9TcXVpbnRTb2NrZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvU3F1aW50L1NxdWludFN0cmluZ3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvU3F1aW50L1N0YXJ0RGlhbG9nLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9TdG9yYWdlV2l0aEV2ZW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQXBwcy9TcXVpbnQvVXBsb2FkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvU3F1aW50L1VzZXJOYW1lRGlhbG9nLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9WZXJzaW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9XZWJTb2NrZXRGYWN0b3J5LnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9XZWxjb21lRGlhbG9nLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1NxdWludC9ab29tUGFuZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvVmlld2VyL0NhbWVyYS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQXBwcy9WaWV3ZXIvTW9kZWxMb2FkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvVmlld2VyL01vZGVsc01lbnUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvVmlld2VyL1BlcnNwZWN0aXZlQ3RybC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQXBwcy9WaWV3ZXIvUGVyc3BlY3RpdmVQYW5lbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQXBwcy9WaWV3ZXIvUGxhbmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvVmlld2VyL1JlbmRlcmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1ZpZXdlci9UZXh0dXJlUmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvVmlld2VyL1ZhbHVlUGxhbmVzLnRzIiwid2VicGFjazovLy8uL3NyYy9BcHBzL1ZpZXdlci9WYWx1ZVBsYW5lc0N0cmwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvVmlld2VyL1ZhbHVlUGxhbmVzUGFuZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvVmlld2VyL1ZhbHVlUmFuZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcHMvVmlld2VyL1ZpZXdlckFwcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQXBwcy9WaWV3ZXIvZ2xPYmplY3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dVSS9DaGVja2JveC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvR1VJL0NvbG9yUmFuZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dVSS9EaWFsb2cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dVSS9HVUkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dVSS9MaXN0Qm94LnRzIiwid2VicGFjazovLy8uL3NyYy9HVUkvTWVudS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvR1VJL092ZXJsYXlDYW52YXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dVSS9QYW5lbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvR1VJL1BvaW50ZXJFdmVudEhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dVSS9SYWRpb2J1dHRvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvR1VJL1NsaWRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTGF1bmNoZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1V0aWwvQmxvYkZpbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1V0aWwvQmxvYlNoaW0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1V0aWwvQ29sb3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1V0aWwvQ29uc29sZUNhcHR1cmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1V0aWwvQ291bnRkb3duVGltZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1V0aWwvRGV2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9VdGlsL0ZQUy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbC9HbG9iYWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9VdGlsL1Byb2ZpbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9VdGlsL1N0b3B3YXRjaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbC9oc3ZDb2xvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbC9odG1sQ29sb3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1V0aWwvaHRtbENvbG9yV2l0aEFscGhhLnRzIiwid2VicGFjazovLy8uL3NyYy9VdGlsM0QvQm91bmRpbmdCb3gudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1V0aWwzRC9Cb3VuZGluZ1B0cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbDNEL0luZGV4ZWRUcmlhbmdsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbDNEL0luZGV4ZWRWZWMzLnRzIiwid2VicGFjazovLy8uL3NyYy9VdGlsM0QvTWF0LnRzIiwid2VicGFjazovLy8uL3NyYy9VdGlsM0QvU3BoZXJpY2FsQ29vcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1V0aWwzRC9UcmlhbmdsZU9iai50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbDNEL1RyaWFuZ2xlT2JqQnVpbGRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbDNEL1RyaWFuZ2xlT2JqRmlsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbDNEL1ZlYy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2wvZ2xBdHRyaWJ1dGVCdWZmZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dsL2dsQnVmZmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9nbC9nbENvbG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9nbC9nbENvbG9yV2l0aFRlbXBlcmF0dXJlLnRzIiwid2VicGFjazovLy8uL3NyYy9nbC9nbEZyYW1lQnVmZmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9nbC9nbEluZGV4QnVmZmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9nbC9nbFByb2dyYW0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dsL2dsU3BhY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dsL2dsVGV4dHVyZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2wvZ2xVbmlmb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9nbC9nbFVuaWZvcm1CbG9jay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYWRlcnMvUGF0aFRyYWNlclRvU2NyZWVuRnJhZ21lbnQuZ2xzbCIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhZGVycy9QYXRoVHJhY2VyVG9TY3JlZW5WZXJ0ZXguZ2xzbCIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhZGVycy9QYXRoVHJhY2VyVG9UZXh0dXJlRnJhZ21lbnQuZ2xzbCIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhZGVycy9QYXRoVHJhY2VyVG9UZXh0dXJlVmVydGV4Lmdsc2wiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYWRlcnMvVGV4dHVyZVJlbmRlcmVyRnJhZ21lbnQuZ2xzbCIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhZGVycy9UZXh0dXJlUmVuZGVyZXJWZXJ0ZXguZ2xzbCIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhZGVycy9WaWV3ZXJGcmFnbWVudC5nbHNsIiwid2VicGFjazovLy8uL3NyYy9zaGFkZXJzL1ZpZXdlclZlcnRleC5nbHNsIiwid2VicGFjazovLy8uL3NyYy9zdHlsZXMvc3R5bGVzLmNzcz9lNDViIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7UUFBQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTs7O1FBR0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLDBDQUEwQyxnQ0FBZ0M7UUFDMUU7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSx3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O0FBQ0E7O0FBRUEsK0JBQStCOztBQUUvQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1CQUFtQiw4QkFBOEI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7O0FBRXpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdDQUFnQztBQUMzQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsV0FBVzs7QUFFWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7O0FBRUE7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUwsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0Q7QUFDeEQ7QUFDQSxPQUFPO0FBQ1AsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQ7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsdUJBQXVCLDRCQUE0QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQSwrREFBK0Q7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSx5QkFBeUIsNEJBQTRCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGtCQUFrQixPQUFPO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlC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O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTzs7QUFFUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxREFBaUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxpRUFBNkI7QUFDakM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFEQUFpQjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7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QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDhEQUE2QjtBQUMvQjtBQUNBO0FBQ0EsR0FBRztBQUNIOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQSxpQ0FBaUMsbUJBQW1CO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBLGdFQUFnRTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ3ZTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhOztBQUVOO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDbkNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDYTs7QUFFcUI7O0FBRTNCO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSSxpREFBZ0I7QUFDcEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNsRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2E7QUFDcUI7O0FBRTNCO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDO1FBQ3BDLElBQU0sS0FBSyxHQUFHLElBQUksZ0RBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFakYsSUFBTSxLQUFLLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBRXJDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUM3QyxJQUFNLENBQUMsR0FBRyxJQUFJLCtEQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFFakQsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQztZQUM5QixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDO1lBQzlCLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7U0FDaEM7UUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDO1FBQzlELElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7UUFDOUQsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQztRQUM5RCxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDO1FBQzlELElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7UUFDOUQsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQztRQUU5RCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDM0MsSUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMxQixDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7WUFDNUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDO1lBQzVDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQztZQUM1QyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7WUFDNUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDO1lBQzVDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQztTQUM5QztJQUNKLENBQUM7SUFFRDs7O09BR0c7SUFDSSx3Q0FBZ0IsR0FBdkI7UUFDRyxJQUFJLFFBQVEsQ0FBQztRQUNiLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxFQUFFO1lBQzlCLFFBQVEsR0FBRyxDQUFDLENBQUM7U0FDZjthQUFNLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxFQUFFO1lBQ3ZDLFFBQVEsR0FBRyxDQUFDLENBQUM7U0FDZjthQUNJO1lBQ0YsUUFBUSxHQUFHLENBQUMsQ0FBQztTQUNmO1FBQ0QsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFDbEIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzdDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksOENBQU0sRUFBRSxDQUFDLENBQUM7U0FDbEM7UUFFRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDOUMsSUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbkMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDdEYsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDdkYsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDdEYsQ0FBQyxHQUFHLDJEQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxR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dUJBQXVCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXJDLDBCQUEwQjtRQUMxQixJQUFJLEdBQUcsR0FBRyxJQUFJLHdEQUFTLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNsRCxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7UUFDM0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDO1FBQzdCLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQztRQUM3QixJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ3BDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzFCLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLGNBQWMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFdkMsNEJBQTRCO1FBQzVCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztRQUMzQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDOUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDL0YsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDO1lBQ3BELElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDekMsR0FB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LEVBQUUsbUJBQW1CLEVBQUU7WUFDdEQsRUFBRSxLQUFLLEVBQUUsZ0JBQWdCLEVBQUUsSUFBSSxFQUFFLG1CQUFtQixFQUFFO1NBQ3hEO0tBQ0g7SUFDRDtRQUNHLEtBQUssRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLGNBQWMsRUFBRSxTQUFTLEVBQUU7WUFDNUMsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUU7WUFDekMsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUU7WUFDekMsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUU7WUFDekMsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUU7WUFDekMsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUU7WUFDekMsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUU7WUFDekMsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUU7WUFDekMsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUU7WUFDekMsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUU7WUFDekMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxlQUFlLEVBQUU7WUFDM0MsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxlQUFlLEVBQUU7WUFDM0MsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxlQUFlLEVBQUU7WUFDM0MsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxlQUFlLEVBQUU7WUFDM0MsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxlQUFlLEVBQUU7WUFDM0MsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxlQUFlLEVBQUU7WUFDM0MsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxlQUFlLEVBQUU7WUFDM0MsRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUU7U0FDOUM7S0FDSDtJQUNEO1FBQ0csS0FBSyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsY0FBYyxFQUFFLFNBQVMsRUFBRTtZQUM1QyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRTtZQUN2QyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRTtZQUN2QyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRTtZQUN2QyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRTtZQUN2QyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRTtZQUN2QyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRTtZQUN2QyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRTtZQUN2QyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRTtZQUN2QyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRTtZQUN2QyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLGFBQWEsRUFBRTtZQUN6QyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRTtZQUN2QyxFQUFFLEtBQUssRUFBRSxhQUFhLEVBQUUsSUFBSSxFQUFFLGlCQUFpQixFQUFFO1lBQ2pELEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFO1NBQzFDO0tBQ0g7SUFDRDtRQUNHLEtBQUssRUFBRSxhQUFhLEVBQUUsRUFBRSxFQUFFLG9CQUFvQixFQUFFLFNBQVMsRUFBRTtZQUN4RDtnQkFDRyxLQUFLLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxnQkFBZ0IsRUFBRSxTQUFTLEVBQUU7b0JBQ2hELEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUseUJBQXlCLEVBQUU7b0JBQ3JELEVBQUUsS0FBSyxFQUFFLHNCQUFzQixFQUFFLElBQUksRUFBRSxxQ0FBcUMsRUFBRTtvQkFDOUUsRUFBRSxLQUFLLEVBQUUsc0JBQXNCLEVBQUUsSUFBSSxFQUFFLHNDQUFzQyxFQUFFO2lCQUNqRjthQUNIO1lBQ0Q7Z0JBQ0csS0FBSyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsYUFBYSxFQUFFLFNBQVMsRUFBRTtvQkFDMUMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSx5QkFBeUIsRUFBRTtvQkFDckQsRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSwyQkFBMkIsRUFBRTtvQkFDekQsRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSwyQkFBMkIsRUFBRTtvQkFDekQsRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSw0QkFBNEIsRUFBRTtvQkFDM0QsRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSwyQkFBMkIsRUFBRTtvQkFDeEQsRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSw2QkFBNkIsRUFBRTtpQkFDOUQ7YUFDSDtZQUNEO2dCQUNHLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUU7b0JBQ3hDLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsK0JBQStCLEVBQUU7b0JBQzdELEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsaUNBQWlDLEVBQUU7b0JBQ2hFLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsZ0NBQWdDLEVBQUU7b0JBQzlELEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsNkJBQTZCLEVBQUU7b0JBQ3hELEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsNkJBQTZCLEVBQUU7aUJBQzFEO2FBQ0g7WUFDRDtnQkFDRyxLQUFLLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxlQUFlLEVBQUUsU0FBUyxFQUFFO29CQUM5QyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLDZCQUE2QixFQUFFO29CQUN0RCxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLDZCQUE2QixFQUFFO29CQUN0RCxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLGdDQUFnQyxFQUFFO2lCQUM3RDthQUNIO1lBQ0Q7Z0JBQ0csS0FBSyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsYUFBYSxFQUFFLFNBQVMsRUFBRTtvQkFDMUMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSwrQkFBK0IsRUFBRTtvQkFDM0QsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSx5QkFBeUIsRUFBRTtvQkFDcEQsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSw2QkFBNkIsRUFBRTtvQkFDdkQsRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFFLElBQUksRUFBRSw2QkFBNkIsRUFBRTtvQkFDOUQsRUFBRSxLQUFLLEVBQUUsY0FBYyxFQUFFLElBQUksRUFBRSw2QkFBNkIsRUFBRTtpQkFDaEU7YUFDSDtZQUNEO2dCQUNHLEtBQUssRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLGlCQUFpQixFQUFFLFNBQVMsRUFBRTtvQkFDbEQsRUFBRSxLQUFLLEVBQUUscUJBQXFCLEVBQUUsSUFBSSxFQUFFLG9DQUFvQyxFQUFFO29CQUM1RSxFQUFFLEtBQUssRUFBRSxtQkFBbUIsRUFBRSxJQUFJLEVBQUUsa0NBQWtDLEVBQUU7b0JBQ3hFLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsd0JBQXdCLEVBQUU7b0JBQ2xELEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsd0JBQXdCLEVBQUU7b0JBQ2xELEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsd0JBQXdCLEVBQUU7b0JBQ2xELEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsMkJBQTJCLEVBQUU7b0JBQ3hELEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsc0JBQXNCLEVBQUU7b0JBQzlDLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsd0JBQXdCLEVBQUU7b0JBQ2xELEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsdUJBQXVCLEVBQUU7b0JBQ2hELEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsdUJBQXVCLEVBQUU7b0JBQ2hELEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsMEJBQTBCLEVBQUU7b0JBQ3RELEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsd0JBQXdCLEVBQUU7b0JBQ2xELEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsdUJBQXVCLEVBQUU7aUJBQ2xEO2FBQ0g7WUFDRDtnQkFDRyxLQUFLLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxjQUFjLEVBQUUsU0FBUyxFQUFFO29CQUM1QyxFQUFFLEtBQUssRUFBRSxrQkFBa0IsRUFBRSxJQUFJLEVBQUUsbUNBQW1DLEVBQUU7b0JBQ3hFLEVBQUUsS0FBSyxFQUFFLGNBQWMsRUFBRSxJQUFJLEVBQUUsK0JBQStCLEVBQUU7b0JBQ2hFLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUseUJBQXlCLEVBQUU7aUJBQ3REO2FBQ0g7U0FDSDtLQUNIO0NBRUgsQ0FBQztBQUVGLFNBQVMsUUFBUSxDQUFDLElBQWEsRUFBRSxLQUFvQyxFQUFFLFNBQTRCO0lBQ2hHLEtBQUssQ0FBQyxPQUFPLENBQUMsVUFBQyxJQUFJO1FBQ2hCLElBQUksV0FBVyxJQUFJLElBQUksRUFBRTtZQUN0QixJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ25ELFFBQVEsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztTQUMvQzthQUNJO1lBQ0YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLGNBQVEsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztTQUMzRDtJQUNKLENBQUMsQ0FBQyxDQUFDO0FBQ04sQ0FBQztBQUVNLFNBQVMsZ0JBQWdCLENBQUMsT0FBZ0IsRUFBRSxTQUE0QjtJQUU1RSxJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUVsRCxRQUFRLENBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztBQUN4QyxDQUFDOzs7Ozs7Ozs7Ozs7O0FDOUxEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUE4QztBQUNVO0FBQ1k7QUFDOUI7QUFDZTtBQUVjO0FBQ3hCO0FBVzNDO0lBU0cseUJBQ0csTUFBbUIsRUFDbkIsUUFBOEI7UUFGakMsaUJBa0NDO1FBN0JFLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBRXpCLElBQUksTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDOUMsTUFBTSxDQUFDLEVBQUUsR0FBRyxtQkFBbUIsQ0FBQztRQUNoQyxNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRTNCLHdFQUF3RTtRQUN4RSwyREFBMkQ7UUFDM0QsSUFBSSxPQUFPLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQTBCLENBQUM7UUFFcEYsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNYLHdFQUF3RTtZQUN4RSxPQUFPLENBQUMsR0FBRyxDQUFDLDZCQUE2QixDQUFDLENBQUM7U0FDN0M7UUFDRCxJQUFJLENBQUMsRUFBRSxHQUFHLE9BQU8sQ0FBQztRQUNsQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksa0RBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7UUFDbkMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQy9CLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLDhDQUFNLENBQUM7WUFDdkMsWUFBWSxFQUFFLElBQUkseURBQWlCLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUMzQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztRQUNwRCxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7UUFFaEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLGdFQUFhLENBQUMsTUFBTSxFQUFFLDBCQUEwQixDQUFDLENBQUM7UUFFckUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLDRFQUFtQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLFVBQUMsR0FBUyxJQUFLLFlBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQWhCLENBQWdCLENBQUM7UUFDdEQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsVUFBQyxHQUFTLEVBQUUsS0FBVyxJQUFLLFlBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxFQUF2QixDQUF1QixDQUFDO0lBQzdFLENBQUM7SUFFTSxpQ0FBTyxHQUFkO1FBQ0csSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBRU8sbUNBQVMsR0FBakIsVUFBa0IsR0FBUztRQUV4Qix5QkFBeUI7UUFDekIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUV6QyxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDaEIsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1NBQ2xCO0lBQ0osQ0FBQztJQUVPLGdDQUFNLEdBQWQsVUFBZSxHQUFTO1FBQ3JCLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDdkIsQ0FBQztJQUVPLGdDQUFNLEdBQWQsVUFBZSxHQUFTLEVBQUUsS0FBVztRQUNsQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7SUFFTSxpQ0FBTyxHQUFkLFVBQWUsS0FBYSxFQUFFLE1BQWM7UUFDekMsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUNqQixFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDeEIsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0lBQzdCLENBQUM7SUFFTSxnQ0FBTSxHQUFiLFVBQWMsUUFBYztRQUN6Qiw0REFBNEQ7UUFDNUQseUNBQXlDO1FBQ3pDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxDQUFDLDJEQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUUzRCxrRkFBa0Y7UUFDbEYsc0ZBQXNGO1FBQ3RGLElBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ25FLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsSUFBSSxnREFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVwRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBRXZCLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNsQixDQUFDO0lBRU8sb0NBQVUsR0FBbEIsVUFBbUIsRUFBUTtRQUN4QixJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQztRQUM1QixJQUFJLEVBQUUsR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFFdEMsb0RBQW9EO1FBQ3BELElBQUksS0FBSyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxzQ0FBc0M7UUFDMUQsSUFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDO1FBQ2pCLElBQUksS0FBSyxHQUFHLElBQUksbURBQU8sQ0FBQyxJQUFJLGdEQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQUUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLGdEQUFJLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTNHLElBQUksT0FBTyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7UUFDM0IsSUFBSSxDQUFDLEdBQUcsMkRBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxHQUFHLE9BQU8sR0FBRyxDQUFDLEVBQUUsT0FBTyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUN2RixJQUFJLENBQUMsR0FBRywyREFBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUUvRSxPQUFPLElBQUksZ0RBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNoRCxDQUFDO0lBRU8sa0NBQVEsR0FBaEIsVUFBaUIsRUFBUTtRQUN0QixJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQztRQUM1QixJQUFJLEVBQUUsR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFFdEMsb0RBQW9EO1FBQ3BELElBQUksS0FBSyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxzQ0FBc0M7UUFDMUQsSUFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDO1FBQ2pCLElBQUksS0FBSyxHQUFHLElBQUksbURBQU8sQ0FBQyxJQUFJLGdEQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQUUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLGdEQUFJLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTNHLElBQUksT0FBTyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7UUFDM0IsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLE9BQU8sR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztRQUNoRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO1FBQ25FLE9BQU8sSUFBSSxnREFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUVPLGtDQUFRLEdBQWhCLFVBQWlCLEdBQTZCLEVBQUUsR0FBUyxFQUFFLEdBQVM7UUFDakUsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM1QixJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzVCLEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNoQixHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkIsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2hCLENBQUM7SUFFTyxpQ0FBTyxHQUFmO1FBQ0csSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUNqQixJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztRQUMvQixHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztRQUNuQyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUNyQyxHQUFHLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQztRQUVsQixJQUFJLHNEQUFRLEVBQUU7WUFDWCxHQUFHLENBQUMsU0FBUyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsU0FBUyxDQUFDO1NBQ3BDO1FBRUQsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUVqRSxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUMvRCw2QkFBNkI7UUFDN0IsR0FBRyxDQUFDLFdBQVcsR0FBRyx1QkFBdUIsQ0FBQztRQUMxQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxJQUFJLGdEQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxnREFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFOUcsK0NBQStDO1FBQy9DLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFNUQsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzFDLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUU3QyxJQUFJLEtBQUssR0FBRywyREFBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFeEQsR0FBRyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ2hCLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkIsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsMkRBQUssQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoRixFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQywyREFBSyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hGLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkIsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2IsR0FBRyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ2hCLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkIsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsMkRBQUssQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoRixFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsR0FB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RCxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRU0sMkJBQUssR0FBWixVQUFhLEtBQWtCO1FBQzVCLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FB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RSxDQUFDO1FBQ2IsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7UUFDYixJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztJQUNoQixDQUFDO0lBRUQsc0JBQUksaUNBQUk7YUFBUjtZQUNHLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3BELENBQUM7OztPQUFBO0lBQ0Qsc0JBQUksaUNBQUk7YUFBUjtZQUNHLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3BELENBQUM7OztPQUFBO0lBQ0Qsc0JBQUksaUNBQUk7YUFBUjtZQUNHLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3BELENBQUM7OztPQUFBO0lBRUQsc0JBQUksaUNBQUk7YUFBUjtZQUNHLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3BELENBQUM7OztPQUFBO0lBQ0Qsc0JBQUksaUNBQUk7YUFBUjtZQUNHLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3BE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RyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdGLElBQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDN0YsSUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUMvRixJQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRWpHLElBQU0sR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNsQyxJQUFNLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDbEMsSUFBTSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2xDLElBQU0sR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNsQyxJQUFNLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDbEMsSUFBTSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2xDLElBQU0sR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNsQyxJQUFNLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDbEMsSUFBTSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2xDLElBQU0sR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNsQyxJQUFNLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDbEMsSUFBTSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBRWxDLDRCQUE0QjtRQUM1QixJQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUVoRixJQUFJLENBQUMsR0FBRyxFQUFFO1lBQ1AsT0FBTyxJQUFJLENBQUM7U0FDZDtRQUNELEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBRWhCLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQztRQUM3RCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDN0QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO1FBQzdELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQztRQUM3RCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDN0QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO1FBQzdELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQztRQUM3RCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDN0QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO1FBQzdELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQztRQUM3RCxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDOUQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO1FBQzlELE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQztRQUM5RCxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDOUQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO1FBQzlELE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdB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SUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDekUsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQzFFLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUN6RSxDQUFDLEdBQUcsMkRBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM5QixDQUFDLEdBQUcsMkRBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM5QixDQUFDLEdBQUcsMkRBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM5QixJQUFNLEtBQUssR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFFBQVEsR0FBRyxDQUFDLEdBQUcsUUFBUSxHQUFHLFFBQVEsQ0FBQztZQUN6RCxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3pCO1FBRUQsSUFBTSxNQUFNLEdBQUcsSUFBSSxHQUFHLEVBQXVCLENBQUM7UUFDOUMsSUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDO1FBQ2pCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxR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R0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQztTQUMxSTtRQUNELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3hDLElBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDdkIsR0FBRyxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQztTQUMzSTtRQUNELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3pDLElBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDOUIsR0FBRyxJQUFJLElBQUk7Z0JBQ1IsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRztnQkFDcEMsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRztnQkFDcEMsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFF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QUcsWUFBWSxDQUFDO1lBQ3hCLElBQU0sRUFBRSxHQUFHLFlBQVksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3RFLElBQU0sRUFBRSxHQUFHLFlBQVksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDNUUsSUFBTSxFQUFFLEdBQUcsWUFBWSxDQUFDO1lBQ3hCLElBQU0sRUFBRSxHQUFHLFlBQVksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFNUUsSUFBTSxFQUFFLEdBQUcsSUFBSSx5Q0FBSSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQU0sRUFBRSxHQUFHLElBQUkseUNBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDL0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1NBQ3RDO1FBRUQsd0JBQXdCO1FBQ3hCLElBQU0sR0FBRyxHQUFHLElBQUkseUNBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2pDLElBQU0sRUFBRSxHQUFHLFlBQVksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3RFLElBQU0sRUFBRSxHQUFHLFlBQVksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3RFLElBQU0sRUFBRSxHQUFHLFlBQVksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDNUUsSUFBTSxFQUFFLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUU1RSxJQUFNLEVBQUUsR0FBRyxJQUFJLHlDQUFJLENBQUMsQ0FBQyxFQUFFLEVBQUUsWUFBWSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDNUMsSUFBTSxFQUFFLEdBQUcsSUFBSSx5Q0FBSSxDQUFDLENBQUMsRUFBRSxFQUFFLFlBQVksRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQzVDLElBQU0sRUFBRSxHQUFHLElBQUkseUNBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxZQUFZLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUM1QyxJQUFNLEVBQUUsR0FBRyxJQUFJLHlDQUFJLENBQUMsQ0FBQyxFQUFFLEVBQUUsWUFBWSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDNUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQzlCLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUM5QixJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7U0FDakM7SUFDSixDQUFDO0lBRU0sc0NBQVMsR0FBaEIsVUFBaUIsUUFBZ0IsRUFBRSxNQUFjLEVBQUUsTUFBWTtRQUU1RCw4QkFBOEI7UUFDOUIsSUFBTSxRQUFRLEdBQVcsRUFBRSxDQUFDO1FBQzVCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDaEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUNWLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSx5Q0FBSSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ25FO2lCQUNJLElBQUksQ0FBQyxLQUFLLFFBQVEsR0FBRyxDQUFDLEVBQUU7Z0JBQzFCLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSx5Q0FBSSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ25FO2lCQUNJO2dCQUNGLElBQU0sQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQzFELElBQU0sQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQzFELElBQU0sTUFBTSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsR0FBRyxDQUFDO2dCQUU1RCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFO29CQUVoQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUkseUNBQUksQ0FBQzt3QkFDcEIsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsR0FBRyxNQUFNLENBQUM7d0JBQzlELE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQzt3QkFDWixNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxHQUFHLE1BQU0sQ0FBQztxQkFDaEUsQ0FBQyxDQUFDLENBQUM7aUJBQ047YUFDSDtTQUNIO1FBRUQsdUJBQXVCO1FBQ3ZCLElBQU0sS0FBSyxHQUFHLENBQUMsQ0FBQztRQUNoQixJQUFNLElBQUksR0FBRyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUNqQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsUUFBUSxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNwQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUNoQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7b0JBQ1YsSUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDO29CQUNqQixJQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUNqQixJQUFNLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztvQkFDN0MsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2lCQUM5RDtxQkFDSSxJQUFJLENBQUMsS0FBSyxRQUFRLEdBQUcsQ0FBQyxFQUFFO29CQUMxQixJQUFNLFVBQVUsR0FBRyxJQUFJLEdBQUcsUUFBUSxDQUFDO29CQUNuQyxJQUFNLEVBQUUsR0FBRyxJQUFJLENBQUM7b0JBQ2hCLElBQU0sRUFBRSxHQUFHLFVBQVUsR0FBRyxDQUFDLENBQUM7b0JBQzFCLElBQU0sRUFBRSxHQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO29CQUN0RCxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxRQUFRLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7aUJBQzlEO3FCQUNJO29CQUNGLElBQU0sTUFBTSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUM7b0JBQ3RDLElBQU0sTUFBTSxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsUUFBUSxDQUFDO29CQUNoQyxJQUFNLEVBQUUsR0FBRyxNQUFNLEdBQUcsQ0FBQyxDQUFDO29CQUN0QixJQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7b0JBQ3BELElBQU0sRUFBRSxHQUFHLE1BQU0sR0FBRyxDQUFDLENBQUM7b0JBQ3RCLElBQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztvQkFDcEQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFO3dCQUNSLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQzt3QkFDNUQsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO3FCQUM5RDt5QkFDSTt3QkFDRixJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxRQUFRLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7d0JBQzVELElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztxQkFDOUQ7aUJBQ0g7YUFDSDtTQUNIO0lBQ0osQ0FBQztJQUVELG9DQUFPLEdBQVAsVUFBUSxJQUFZLEVBQUUsTUFBWTtRQUUvQixJQUFNLEVBQUUsR0FBRyxJQUFJLHlDQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckYsSUFBTSxFQUFFLEdBQUcsSUFBSSx5Q0FBSSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JGLElBQU0sRUFBRSxHQUFHLElBQUkseUNBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyRixJQUFNLEVBQUUsR0FBRyxJQUFJLHlDQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckYsSUFBTSxFQUFFLEdBQUcsSUFBSSx5Q0FBSSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JGLElBQU0sRUFBRSxHQUFHLElBQUkseUNBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyRixJQUFNLEVBQUUsR0FBRyxJQUFJLHlDQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckYsSUFBTSxFQUFFLEdBQUcsSUFBSSx5Q0FBSSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXJGLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDOUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUU5QixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQzlCLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFOUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUM5QixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRCxvQ0FBTyxHQUFQLFVBQVEsUUFBZ0IsRUFBRSxNQUFjLEVBQUUsTUFBWTtRQUVuRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2pDLElBQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN0RSxJQUFNLEVBQUUsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ3BCLElBQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN0RSxJQUFNLEVBQUUsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUM1RSxJQUFNLEVBQUUsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ3BCLElBQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRTVFLElBQU0sRUFBRSxHQUFHLElBQUkseUNBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNsQyxJQUFNLEVBQUUsR0FBRyxJQUFJLHlDQUFJLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDbEMsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFD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LyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL3NyYy9pbmRleC50c1wiKTtcbiIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIjQXJ0U2VlQXBwICNWaWRlbyB7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICBsZWZ0OiAtMTAwZW07XFxyXFxuICB0b3A6IDJlbTtcXHJcXG4gIHdpZHRoOiAyZW07XFxyXFxuICBib3JkZXI6IHNvbGlkIDAuMWVtO1xcclxcbiAgYm9yZGVyLWNvbG9yOiB3aGl0ZTtcXHJcXG4gIG1hcmdpbjogMC45ZW07XFxyXFxufVxcclxcblxcclxcbiNBcnRTZWVBcHAgI1ZpZGVvT3ZlcmxheSB7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICBsZWZ0OiAtMTAwZW07XFxyXFxuICB0b3A6IDJlbTtcXHJcXG59XFxyXFxuXCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuQnV0dG9uQ2xhc3Mge1xcclxcbiAgYm9yZGVyOiBub25lO1xcclxcbiAgY3Vyc29yOiBwb2ludGVyO1xcclxcbiAgYm9yZGVyLXJhZGl1czogMC40ZW07XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGdyYXk7XFxyXFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXHJcXG4gIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XFxyXFxuICBwYWRkaW5nLWxlZnQ6IDAuNWVtO1xcclxcbiAgcGFkZGluZy1yaWdodDogMC41ZW07XFxyXFxuICBwYWRkaW5nLXRvcDogMC4yZW07XFxyXFxuICBwYWRkaW5nLWJvdHRvbTogMC4yZW07XFxyXFxufVxcclxcblxcclxcbi5CdXR0b25DbGFzczpob3ZlcjplbmFibGVkIHtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigyMzEsIDIzMSwgMjMxKTtcXHJcXG59XFxyXFxuXCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIvKiBDdXN0b21pemUgdGhlIGxhYmVsICh0aGUgQ2hlY2tib3hMYWJlbCkgKi9cXHJcXG4uQ2hlY2tib3hMYWJlbCB7XFxyXFxuICBkaXNwbGF5OiBibG9jaztcXHJcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gIHBhZGRpbmctbGVmdDogMS41ZW07XFxyXFxuICBjdXJzb3I6IHBvaW50ZXI7XFxyXFxuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xcclxcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcXHJcXG4gIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcXHJcXG4gIHVzZXItc2VsZWN0OiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBIaWRlIHRoZSBicm93c2VyJ3MgZGVmYXVsdCBjaGVja2JveCAqL1xcclxcbi5DaGVja2JveExhYmVsIGlucHV0IHtcXHJcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gIG9wYWNpdHk6IDA7XFxyXFxuICBjdXJzb3I6IHBvaW50ZXI7XFxyXFxuICBoZWlnaHQ6IDA7XFxyXFxuICB3aWR0aDogMDtcXHJcXG59XFxyXFxuXFxyXFxuLyogQ3JlYXRlIGEgY3VzdG9tIGNoZWNrYm94ICovXFxyXFxuLkNoZWNrbWFyayB7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICB0b3A6IDA7XFxyXFxuICBsZWZ0OiAwO1xcclxcbiAgaGVpZ2h0OiAxLjFlbTtcXHJcXG4gIHdpZHRoOiAxLjFlbTtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7XFxyXFxufVxcclxcblxcclxcbi8qIFdoZW4gdGhlIGNoZWNrYm94IGlzIGNoZWNrZWQsIGFkZCBhIGJsdWUgYmFja2dyb3VuZCAqL1xcclxcbi5DaGVja2JveExhYmVsIGlucHV0OmNoZWNrZWQgfiAuQ2hlY2ttYXJrIHtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6ICMyMTk2ZjM7XFxyXFxufVxcclxcblxcclxcbi8qIENyZWF0ZSB0aGUgY2hlY2ttYXJrL2luZGljYXRvciAoaGlkZGVuIHdoZW4gbm90IGNoZWNrZWQpICovXFxyXFxuLkNoZWNrbWFyazphZnRlciB7XFxyXFxuICBjb250ZW50OiBcXFwiXFxcIjtcXHJcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gIGRpc3BsYXk6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbi8qIFNob3cgdGhlIGNoZWNrbWFyayB3aGVuIGNoZWNrZWQgKi9cXHJcXG4uQ2hlY2tib3hMYWJlbCBpbnB1dDpjaGVja2VkIH4gLkNoZWNrbWFyazphZnRlciB7XFxyXFxuICBkaXNwbGF5OiBibG9jaztcXHJcXG59XFxyXFxuXFxyXFxuLyogU3R5bGUgdGhlIGNoZWNrbWFyay9pbmRpY2F0b3IgKi9cXHJcXG4uQ2hlY2tib3hMYWJlbCAuQ2hlY2ttYXJrOmFmdGVyIHtcXHJcXG4gIGxlZnQ6IDAuM2VtO1xcclxcbiAgdG9wOiAwLjA1ZW07XFxyXFxuICB3aWR0aDogMC4zZW07XFxyXFxuICBoZWlnaHQ6IDAuNmVtO1xcclxcbiAgYm9yZGVyOiBzb2xpZCB3aGl0ZTtcXHJcXG4gIGJvcmRlci13aWR0aDogMCAwLjI1ZW0gMC4yNWVtIDA7XFxyXFxuICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTtcXHJcXG4gIC1tcy10cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7XFxyXFxuICB0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7XFxyXFxufVxcclxcblwiLCBcIlwiXSk7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG4iLCIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIik7XG5leHBvcnRzID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLkxpc3RCb3hDbGFzcyB7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcXHJcXG4gIG92ZXJmbG93LXk6IHNjcm9sbDtcXHJcXG4gIGN1cnNvcjogcG9pbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuLkxpc3RCb3hJdGVtQ2xhc3Mge1xcclxcbiAgcGFkZGluZzogMC4yNWVtO1xcclxcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbi5MaXN0Qm94SXRlbUNsYXNzOmhvdmVyIHtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6IHBvd2RlcmJsdWU7XFxyXFxufVxcclxcblxcclxcbi5MaXN0Qm94SXRlbVNlbGVjdGVkQ2xhc3MsXFxyXFxuLkxpc3RCb3hJdGVtU2VsZWN0ZWRDbGFzczpob3ZlciB7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiBzdGVlbGJsdWU7XFxyXFxuICBjb2xvcjogd2hpdGU7XFxyXFxufVxcclxcblwiLCBcIlwiXSk7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG4iLCIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIik7XG5leHBvcnRzID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLk1lbnViYXIge1xcclxcbiAgbGVmdDogMGVtO1xcclxcbiAgdG9wOiAwZW07XFxyXFxuICByaWdodDogMGVtO1xcclxcbiAgY29sb3I6IGJsYWNrO1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSh2YXIoLS1tYWluLWNvbG9yKSwgMC4yNSk7XFxyXFxuICBib3JkZXI6IG5vbmU7XFxyXFxuICBjdXJzb3I6IHBvaW50ZXI7XFxyXFxuICBoZWlnaHQ6IDIuMWVtO1xcclxcbn1cXHJcXG5cXHJcXG4uTWVudWJhciA+IC5NZW51SXRlbSB7XFxyXFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICBwYWRkaW5nLXJpZ2h0OiAwLjVlbTtcXHJcXG4gIHBhZGRpbmctbGVmdDogMC41ZW07XFxyXFxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xcclxcbn1cXHJcXG5cXHJcXG4uTWVudSB7XFxyXFxuICBkaXNwbGF5OiBub25lO1xcclxcbiAgcG9zaXRpb246IGZpeGVkO1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyMzAsIDIzMCwgMjMwLCAwLjkpO1xcclxcbiAgd2lkdGg6IDE1ZW07XFxyXFxuICBib3gtc2hhZG93OiAwcHggMC41ZW0gMWVtIDBweCByZ2JhKDAsIDAsIDAsIDAuMik7XFxyXFxuICB6LWluZGV4OiAxO1xcclxcbn1cXHJcXG5cXHJcXG4uTWVudUl0ZW0ge1xcclxcbiAgY29sb3I6IGJsYWNrO1xcclxcbiAgcGFkZGluZzogMC41ZW07XFxyXFxuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XFxyXFxuICBkaXNwbGF5OiBibG9jaztcXHJcXG4gIGN1cnNvcjogcG9pbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuLk1lbnViYXIgPiAuTWVudUl0ZW1EaXNhYmxlZENsYXNzIHtcXHJcXG4gIGNvbG9yOiBncmF5O1xcclxcbn1cXHJcXG5cXHJcXG4uTWVudUl0ZW1EaXNhYmxlZENsYXNzIHtcXHJcXG4gIGNvbG9yOiBncmF5O1xcclxcbn1cXHJcXG5cXHJcXG4uTWVudWJhciA+IC5NZW51SXRlbUhpZGRlbkNsYXNzIHtcXHJcXG4gIGRpc3BsYXk6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbi5NZW51SXRlbURpc2FibGVkQ2xhc3Mge1xcclxcbiAgZGlzcGxheTogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuLk1lbnVJdGVtIC5TbGlkZXJSYW5nZSB7XFxyXFxuICB3aWR0aDogMTJlbTtcXHJcXG59XFxyXFxuXFxyXFxuLk1lbnVJdGVtOmhvdmVyIHtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjAwLCAyMDAsIDI1NSwgMC43NSk7XFxyXFxufVxcclxcblxcclxcbi8qIFN0eWxlIHdlIGFkZCBvciByZW1vdmUgYXMgbWVudXMgYXJlIGRpc3BsYXllZCBvciBoaWRkZW4gKi9cXHJcXG4uTWVudVNob3cge1xcclxcbiAgZGlzcGxheTogYmxvY2s7XFxyXFxufVxcclxcblxcclxcbi5NZW51SXRlbSAuU2xpZGVyTGFiZWwsXFxyXFxuLk1lbnVJdGVtIC5TbGlkZXJDb2xvclNwYW4sXFxyXFxuLk1lbnVJdGVtIC5TbGlkZXJWYWx1ZVNwYW4ge1xcclxcbiAgZGlzcGxheTogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuLk1lbnVJdGVtIC5DaGVja2JveCB7XFxyXFxuICBmbG9hdDogbGVmdDtcXHJcXG59XFxyXFxuXFxyXFxuLk1lbnViYXIgLkltYWdlTWVudUl0ZW0ge1xcclxcbiAgcGFkZGluZy10b3A6IDAuMmVtO1xcclxcbiAgcGFkZGluZy1ib3R0b206IDBlbTtcXHJcXG4gIHBhZGRpbmctbGVmdDogMC4xZW07XFxyXFxuICBwYWRkaW5nLXJpZ2h0OiAwLjFlbTtcXHJcXG59XFxyXFxuXFxyXFxuLk1lbnViYXIgLk1lbnVJdGVtSW1hZ2Uge1xcclxcbiAgd2lkdGg6IDFlbTtcXHJcXG4gIGhlaWdodDogMWVtO1xcclxcbiAgcGFkZGluZzogMC4zZW07XFxyXFxufVxcclxcblwiLCBcIlwiXSk7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG4iLCIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIik7XG5leHBvcnRzID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiI01vZGVsVGltZXJBcHAgLk1lbnViYXIge1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDExMCwgMTEwLCAxMTApO1xcclxcbn1cXHJcXG5cXHJcXG4jTW9kZWxUaW1lckFwcCAjQm9keURpdiB7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICAvKiBtYXRjaGVzIHRoZSBzaXplIG9mIHRoZSBtZW51YmFyIGhpZ2h0ICovXFxyXFxuICB0b3A6IDIuMWVtO1xcclxcbiAgYm90dG9tOiAwcHg7XFxyXFxuICBsZWZ0OiAwcHg7XFxyXFxuICByaWdodDogMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4jTW9kZWxUaW1lckFwcCAjTW9kZWxUaW1lckNhbnZhcyB7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcXHJcXG4gIGNvbG9yOiBsaWdodGdyYXk7XFxyXFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICB3aWR0aDogMTAwJTtcXHJcXG4gIGhlaWdodDogMTAwJTtcXHJcXG59XFxyXFxuXFxyXFxuI01vZGVsVGltZXJBcHAgI092ZXJsYXlDYW52YXMge1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICBsZWZ0OiAwO1xcclxcbiAgdG9wOiAwO1xcclxcbiAgcmlnaHQ6IDA7XFxyXFxuICBib3R0b206IDA7XFxyXFxuICB6LWluZGV4OiAxO1xcclxcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxyXFxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcXHJcXG59XFxyXFxuXCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIjUGF0aFRyYWNlckFwcCAjZGVzY3JpcHRpb24ge1xcclxcbiAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgYm90dG9tOiA1cHg7XFxyXFxuICBsZWZ0OiAycHg7XFxyXFxuICBwYWRkaW5nOiAycHg7XFxyXFxuICBwYWRkaW5nLXJpZ2h0OiA1cHg7XFxyXFxuICBwYWRkaW5nLWxlZnQ6IDVweDtcXHJcXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcXHJcXG4gIGZvbnQtc2l6ZTogMTBwdDtcXHJcXG4gIGZvbnQtZmFtaWx5OiBhcmlhbDtcXHJcXG4gIGNvbG9yOiB3aGl0ZTtcXHJcXG4gIHRleHQtc2hhZG93OiAwcHggMHB4IDZweCByZ2JhKDAsIDAsIDAsIDEpO1xcclxcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbiNQYXRoVHJhY2VyQXBwICNkcmF3VGltZSB7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICB0b3A6IDVweDtcXHJcXG4gIGxlZnQ6IDJweDtcXHJcXG4gIHBhZGRpbmc6IDJweDtcXHJcXG4gIHBhZGRpbmctcmlnaHQ6IDVweDtcXHJcXG4gIHBhZGRpbmctbGVmdDogNXB4O1xcclxcbiAgZm9udC1zaXplOiA4cHQ7XFxyXFxuICBmb250LWZhbWlseTogYXJpYWw7XFxyXFxuICBjb2xvcjogd2hpdGU7XFxyXFxuICB0ZXh0LXNoYWRvdzogMHB4IDBweCA2cHggcmdiYSgwLCAwLCAwLCAxKTtcXHJcXG4gIHVzZXItc2VsZWN0OiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4jUGF0aFRyYWNlckFwcCAjcHJvZ3Jlc3NCYXIge1xcclxcbiAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgYm90dG9tOiAwcHg7XFxyXFxuICBsZWZ0OiAwcHg7XFxyXFxuICByaWdodDogMHB4O1xcclxcbiAgaGVpZ2h0OiA1cHg7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDUwLCAyMDUsIDUwLCAwLjc1KTtcXHJcXG59XFxyXFxuXFxyXFxuI1BhdGhUcmFjZXJBcHAgI21vZGVCdXR0b24ge1xcclxcbiAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgYm90dG9tOiA1cHg7XFxyXFxuICByaWdodDogNXB4O1xcclxcbiAgcGFkZGluZzogMnB4O1xcclxcbiAgcGFkZGluZy1yaWdodDogNXB4O1xcclxcbiAgcGFkZGluZy1sZWZ0OiA1cHg7XFxyXFxuICBib3JkZXItcmFkaXVzOiA1cHg7XFxyXFxuICBmb250LXNpemU6IDEwcHQ7XFxyXFxuICBmb250LWZhbWlseTogYXJpYWw7XFxyXFxuICBjb2xvcjogeWVsbG93O1xcclxcbiAgdGV4dC1zaGFkb3c6IDBweCAwcHggNnB4IHJnYmEoMCwgMCwgMCwgMSk7XFxyXFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXHJcXG4gIGN1cnNvcjogcG9pbnRlcjtcXHJcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG59XFxyXFxuXFxyXFxuI1BhdGhUcmFjZXJBcHAgLlNsaWRlckxhYmVsIHtcXHJcXG4gIGZsZXg6IDAgMCAxNTBweDtcXHJcXG59XFxyXFxuXFxyXFxuI1BhdGhUcmFjZXJBcHAgLlNsaWRlclZhbHVlU3BhbiB7XFxyXFxuICBmbGV4OiAwIDAgODBweDtcXHJcXG59XFxyXFxuXFxyXFxuQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LWRldmljZS13aWR0aDogODAwcHgpIHtcXHJcXG4gICNQYXRoVHJhY2VyQXBwICNkcmF3VGltZSB7XFxyXFxuICAgIGxlZnQ6IDRweDtcXHJcXG4gICAgdG9wOiAxMHB4O1xcclxcbiAgICBmb250LXNpemU6IDE2cHQ7XFxyXFxuICAgIGZvbnQtd2VpZ2h0OiBkYXJrZXI7XFxyXFxuICB9XFxyXFxuXFxyXFxuICAjUGF0aFRyYWNlckFwcCAjbW9kZUJ1dHRvbiB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMjBwdDtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IGRhcmtlcjtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gICNQYXRoVHJhY2VyQXBwICNkZXNjcmlwdGlvbiB7XFxyXFxuICAgIGZvbnQtc2l6ZTogMjBwdDtcXHJcXG4gICAgZm9udC13ZWlnaHQ6IGRhcmtlcjtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gICNQYXRoVHJhY2VyQXBwIC5TbGlkZXJMYWJlbCB7XFxyXFxuICAgIGZsZXg6IDAgMCAzMDBweDtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gICNQYXRoVHJhY2VyQXBwIC5TbGlkZXJWYWx1ZVNwYW4ge1xcclxcbiAgICBmbGV4OiAwIDAgMTYwcHg7XFxyXFxuICB9XFxyXFxufVxcclxcblwiLCBcIlwiXSk7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG4iLCIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIik7XG5leHBvcnRzID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLyogQ3VzdG9taXplIHRoZSBsYWJlbCAodGhlIFJhZGlvYnV0dG9uTGFiZWwpICovXFxyXFxuLlJhZGlvYnV0dG9uTGFiZWwge1xcclxcbiAgZGlzcGxheTogYmxvY2s7XFxyXFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICBwYWRkaW5nLWxlZnQ6IDEuNGVtO1xcclxcbiAgY3Vyc29yOiBwb2ludGVyO1xcclxcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcXHJcXG4gIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XFxyXFxuICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XFxyXFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuLyogSGlkZSB0aGUgYnJvd3NlcidzIGRlZmF1bHQgUmFkaW9idXR0b24gKi9cXHJcXG4uUmFkaW9idXR0b25MYWJlbCBpbnB1dCB7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICBvcGFjaXR5OiAwO1xcclxcbiAgY3Vyc29yOiBwb2ludGVyO1xcclxcbiAgaGVpZ2h0OiAwO1xcclxcbiAgd2lkdGg6IDA7XFxyXFxufVxcclxcblxcclxcbi8qIENyZWF0ZSBhIGN1c3RvbSBSYWRpb2J1dHRvbiAqL1xcclxcbi5SYWRpb0NoZWNrbWFyayB7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICB0b3A6IDAuMTVlbTtcXHJcXG4gIGxlZnQ6IDA7XFxyXFxuICBoZWlnaHQ6IDFlbTtcXHJcXG4gIHdpZHRoOiAxZW07XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1O1xcclxcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBXaGVuIHRoZSBSYWRpb2J1dHRvbiBpcyBjaGVja2VkLCBhZGQgYSBibHVlIGJhY2tncm91bmQgKi9cXHJcXG4uUmFkaW9idXR0b25MYWJlbCBpbnB1dDpjaGVja2VkIH4gLlJhZGlvQ2hlY2ttYXJrIHtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6ICMyMTk2ZjM7XFxyXFxufVxcclxcblxcclxcbi8qIENyZWF0ZSB0aGUgY2hlY2ttYXJrL2luZGljYXRvciAoaGlkZGVuIHdoZW4gbm90IGNoZWNrZWQpICovXFxyXFxuLlJhZGlvQ2hlY2ttYXJrOmFmdGVyIHtcXHJcXG4gIGNvbnRlbnQ6IFxcXCJcXFwiO1xcclxcbiAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgZGlzcGxheTogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuLyogU2hvdyB0aGUgY2hlY2ttYXJrIHdoZW4gY2hlY2tlZCAqL1xcclxcbi5SYWRpb2J1dHRvbkxhYmVsIGlucHV0OmNoZWNrZWQgfiAuUmFkaW9DaGVja21hcms6YWZ0ZXIge1xcclxcbiAgZGlzcGxheTogYmxvY2s7XFxyXFxufVxcclxcblxcclxcbi8qIFN0eWxlIHRoZSBjaGVja21hcmsvaW5kaWNhdG9yICovXFxyXFxuLlJhZGlvYnV0dG9uTGFiZWwgLlJhZGlvQ2hlY2ttYXJrOmFmdGVyIHtcXHJcXG4gIGJhY2tncm91bmQ6IHdoaXRlO1xcclxcbiAgdG9wOiAwLjI1ZW07XFxyXFxuICBsZWZ0OiAwLjI1ZW07XFxyXFxuICB3aWR0aDogMC41ZW07XFxyXFxuICBoZWlnaHQ6IDAuNWVtO1xcclxcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xcclxcbn1cXHJcXG5cIiwgXCJcIl0pO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzO1xuIiwiLy8gSW1wb3J0c1xudmFyIF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpO1xuZXhwb3J0cyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhmYWxzZSk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5TbGlkZXJEaXYge1xcclxcbiAgZGlzcGxheTogZmxleDtcXHJcXG4gIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xcclxcbiAgbWFyZ2luLXRvcDogMC41ZW07XFxyXFxuICBtYXJnaW4tYm90dG9tOiAwLjVlbTtcXHJcXG59XFxyXFxuXFxyXFxuLlNsaWRlckxhYmVsIHtcXHJcXG4gIGZsZXg6IDAgMCA4ZW07XFxyXFxuICB0ZXh0LWFsaWduOiByaWdodDtcXHJcXG59XFxyXFxuXFxyXFxuLlNsaWRlclJhbmdlIHtcXHJcXG4gIGZsZXg6IDEgMSAxM2VtO1xcclxcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xcclxcbiAgb3V0bGluZTogbm9uZTtcXHJcXG4gIGJvcmRlci1yYWRpdXM6IDFlbTtcXHJcXG4gIGhlaWdodDogMC44ZW07XFxyXFxuICBtYXJnaW4tdG9wOiAwLjJlbTtcXHJcXG4gIG1hcmdpbi1sZWZ0OiAwLjNlbTtcXHJcXG4gIG1hcmdpbi1yaWdodDogMC4zZW07XFxyXFxuICBib3JkZXI6IGdyYXk7XFxyXFxuICBib3JkZXItc3R5bGU6IHNvbGlkO1xcclxcbiAgYm9yZGVyLXdpZHRoOiAwLjA3NWVtO1xcclxcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcXHJcXG59XFxyXFxuXFxyXFxuLlNsaWRlclJhbmdlOjotd2Via2l0LXNsaWRlci10aHVtYiB7XFxyXFxuICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XFxyXFxuICBhcHBlYXJhbmNlOiBub25lO1xcclxcbiAgd2lkdGg6IDEuM2VtO1xcclxcbiAgaGVpZ2h0OiAxLjNlbTtcXHJcXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcXHJcXG4gIGJvcmRlci13aWR0aDogMC4xZW07XFxyXFxuICBib3JkZXItc3R5bGU6IHNvbGlkO1xcclxcbiAgYm9yZGVyLWNvbG9yOiBkYXJrZ3JlZW47XFxyXFxuICBiYWNrZ3JvdW5kOiBsaWdodGdyZWVuO1xcclxcbn1cXHJcXG5cXHJcXG4uU2xpZGVyUmFuZ2U6Oi1tb3otcmFuZ2UtdGh1bWIge1xcclxcbiAgYm94LXNoYWRvdzogMXB4IDFweCAxcHggIzAwMDAwMCwgMHB4IDBweCAxcHggIzBkMGQwZDtcXHJcXG4gIHdpZHRoOiAxLjNlbTtcXHJcXG4gIGhlaWdodDogMS4zZW07XFxyXFxuICBib3JkZXItcmFkaXVzOiA1MCU7XFxyXFxuICBib3JkZXItd2lkdGg6IDAuMWVtO1xcclxcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcXHJcXG4gIGJvcmRlci1jb2xvcjogZGFya2dyZWVuO1xcclxcbiAgYmFja2dyb3VuZDogbGlnaHRncmVlbjtcXHJcXG4gIGN1cnNvcjogcG9pbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuLlNsaWRlckNvbG9yU3BhbiB7XFxyXFxuICB2ZXJ0aWNhbC1hbGlnbjogdGV4dC1ib3R0b207XFxyXFxuICBmbGV4OiAwIDAgMWVtO1xcclxcbiAgd2lkdGg6IDFlbTtcXHJcXG4gIGhlaWdodDogMWVtO1xcclxcbiAgbWFyZ2luLXJpZ2h0OiAwLjNlbTtcXHJcXG4gIG1hcmdpbi10b3A6IDAuMWVtO1xcclxcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xcclxcbiAgYm9yZGVyOiBncmF5O1xcclxcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcXHJcXG4gIGJvcmRlci13aWR0aDogMXB4O1xcclxcbn1cXHJcXG5cXHJcXG4uU2xpZGVyVmFsdWVTcGFuIHtcXHJcXG4gIGZsZXg6IDAgMCAzZW07XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuI1NsaWRlciAuZGlzYWJsZWQge1xcclxcbiAgY29sb3I6IGdyYXk7XFxyXFxufVxcclxcblxcclxcbiNTbGlkZXIgLmRpc2FibGVkOjotd2Via2l0LXNsaWRlci10aHVtYiB7XFxyXFxuICBiYWNrZ3JvdW5kOiBsaWdodGdyYXk7XFxyXFxuICBib3JkZXItY29sb3I6IGdyYXk7XFxyXFxufVxcclxcblxcclxcbiNTbGlkZXIgLmRpc2FibGVkOjotbW96LXJhbmdlLXRodW1iIHtcXHJcXG4gIGJhY2tncm91bmQ6IGxpZ2h0Z3JheTtcXHJcXG4gIGJvcmRlci1jb2xvcjogZ3JheTtcXHJcXG59XFxyXFxuXCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIjU3F1aW50QXBwIHtcXHJcXG4gIC8qIGdlbmVyYXRlZCBhdCBodHRwczovL3d3dy53M3NjaG9vbHMuY29tL3czY3NzL3czY3NzX2NvbG9yX2dlbmVyYXRvci5hc3AgKi9cXHJcXG4gIC0tYmx1ZTE6ICNmYWZkZmQ7XFxyXFxuICAtLWJsdWUyOiAjZWZmN2ZhO1xcclxcbiAgLS1ibHVlMzogI2RlZWZmNTtcXHJcXG4gIC0tYmx1ZTQ6ICNjZWU3ZjA7XFxyXFxuICAtLWJsdWU1OiAjYmRlMGViO1xcclxcbiAgLS1ibHVlNjogI2FkZDhlNjtcXHJcXG4gIC0tYmx1ZTc6ICM4ZWM5ZGM7XFxyXFxuICAtLWJsdWU4OiAjNmZiYWQzO1xcclxcbiAgLS1ibHVlOTogIzUxYWJjOTtcXHJcXG4gIC0tYmx1ZTEwOiAjMzk5OWI5O1xcclxcbiAgLS1ibHVlMTE6ICMyZjdmOWE7XFxyXFxuXFxyXFxuICAtLXBpbmsxOiAjZmZmYmZiO1xcclxcbiAgLS1waW5rMjogI2ZmZjFmMztcXHJcXG4gIC0tcGluazM6ICNmZmUyZTc7XFxyXFxuICAtLXBpbms0OiAjZmZkNGRiO1xcclxcbiAgLS1waW5rNTogI2ZmYzZjZTtcXHJcXG4gIC0tcGluazY6ICNmZmI2YzE7XFxyXFxuICAtLXBpbms3OiAjZmY4YzlkO1xcclxcbiAgLS1waW5rODogI2ZmNjA3ODtcXHJcXG4gIC0tcGluazk6ICNmZjM0NTI7XFxyXFxuICAtLXBpbmsxMDogI2ZmMDgyZDtcXHJcXG4gIC0tcGluazExOiAjZGIwMDIxO1xcclxcblxcclxcbiAgLS12aWV3LWJnLWNvbG9yOiB2YXIoLS1ibHVlNik7XFxyXFxuICAtLXZpZXctYnV0dG9uLWNvbG9yOiB2YXIoLS1ibHVlNCk7XFxyXFxuICAtLXZpZXctYnV0dG9uLWNvbG9yLWhvdmVyOiB2YXIoLS1ibHVlMyk7XFxyXFxuICAtLXZpZXctYnV0dG9uLWNvbG9yLWRpc2FibGVkOiB2YXIoLS1ibHVlNCk7XFxyXFxuICAtLXZpZXctYnV0dG9uLXRleHRjb2xvci1kaXNhYmxlZDogcmdiKDE4MCwgMTgwLCAxODApO1xcclxcbiAgLS1ob3N0LWJnLWNvbG9yOiB2YXIoLS1waW5rNik7XFxyXFxuICAtLWhvc3QtYnV0dG9uLWNvbG9yOiB2YXIoLS1waW5rNCk7XFxyXFxuICAtLWhvc3QtYnV0dG9uLWNvbG9yLWhvdmVyOiB2YXIoLS1waW5rMyk7XFxyXFxuXFxyXFxuICAtLWNvcm5lci1yYWRpdXMtbGFyZ2U6IDAuOGVtO1xcclxcbiAgLS1jb3JuZXItcmFkaXVzLW1lZGl1bTogMC42ZW07XFxyXFxuICAtLWNvcm5lci1yYWRpdXMtc21hbGw6IDAuNGVtO1xcclxcblxcclxcbiAgLS1tYXJnaW46IDAuNWVtO1xcclxcblxcclxcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxyXFxuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBwcmV2ZW50IHNjYWxpbmcgb24gQXBwbGUgKi9cXHJcXG5ib2R5IHtcXHJcXG4gIHRvdWNoLWFjdGlvbjogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuI1NxdWludEFwcCAjQm9keURpdiB7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICAvKiBtYXRjaGVzIHRoZSBzaXplIG9mIHRoZSBtZW51YmFyIGhpZ2h0ICovXFxyXFxuICB0b3A6IDIuMWVtO1xcclxcbiAgYm90dG9tOiAwcHg7XFxyXFxuICBsZWZ0OiAwcHg7XFxyXFxuICByaWdodDogMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNQYW5lbCB7XFxyXFxuICBmbGV4OiAwIDAgMzAwcHg7XFxyXFxuICBkaXNwbGF5OiBibG9jaztcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwIC5TbGlkZXJMYWJlbCAuZGlzYWJsZWQge1xcclxcbiAgY29sb3I6IGdyYXk7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI1NsaWRlciAuZGlzYWJsZWQ6Oi13ZWJraXQtc2xpZGVyLXRodW1iIHtcXHJcXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIGxpZ2h0Z3JheSwgbGlnaHRncmF5KTtcXHJcXG59XFxyXFxuXFxyXFxuLyogbWVudSBpdGVtICovXFxyXFxuI1NxdWludEFwcCAjVXNlck5hbWVJdGVtRGl2IHtcXHJcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gIHJpZ2h0OiAwcHg7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI1ZpZGVvIHtcXHJcXG4gIGRpc3BsYXk6IFxcXCJub25lXFxcIjtcXHJcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gIGxlZnQ6IDBlbTtcXHJcXG4gIHRvcDogMmVtO1xcclxcbiAgd2lkdGg6IDIwJTtcXHJcXG4gIGJvcmRlcjogc29saWQgMC4xZW07XFxyXFxuICBib3JkZXItY29sb3I6IHdoaXRlO1xcclxcbiAgbWFyZ2luOiAwLjllbTtcXHJcXG59XFxyXFxuXFxyXFxuI1NxdWludEFwcCAjVmlkZW9PdmVybGF5IHtcXHJcXG4gIGRpc3BsYXk6IFxcXCJub25lXFxcIjtcXHJcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gIGxlZnQ6IDBlbTtcXHJcXG4gIHRvcDogMmVtO1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNDYW52YXMge1xcclxcbiAgZm9udC1zaXplOiAxZW07XFxyXFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICB3aWR0aDogMTAwJTtcXHJcXG4gIGhlaWdodDogMTAwJTtcXHJcXG59XFxyXFxuXFxyXFxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXFxyXFxuICpcXHJcXG4gKiBMZXZlbHMgUGFuZWxcXHJcXG4gKlxcclxcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cXHJcXG4jU3F1aW50QXBwICNMZXZlbHNQYW5lbERpdiB7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICBsZWZ0OiAxZW07XFxyXFxuICBib3R0b206IDFlbTtcXHJcXG4gIHdpZHRoOiAyMGVtO1xcclxcbiAgaGVpZ2h0OiAyMmVtO1xcclxcbiAgYm9yZGVyOiBzb2xpZDtcXHJcXG4gIGJvcmRlci1jb2xvcjogbGlnaHRncmF5O1xcclxcbiAgYm9yZGVyLXdpZHRoOiB2YXIoLS1tYXJnaW4pO1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogbGlnaHRncmF5O1xcclxcbiAgbWFyZ2luOiAwcHg7XFxyXFxuICBkaXNwbGF5OiBub25lO1xcclxcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXHJcXG4gIGZvbnQtc2l6ZTogc21hbGxlcjtcXHJcXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWNvcm5lci1yYWRpdXMtc21hbGwpO1xcclxcbiAgY3Vyc29yOiBtb3ZlO1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNMZXZlbHNQYW5lbERpdiAuVGl0bGVDbGFzcyB7XFxyXFxuICBjb2xvcjogd2hpdGU7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodHNreWJsdWU7XFxyXFxuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiB2YXIoLS1jb3JuZXItcmFkaXVzLXNtYWxsKTtcXHJcXG4gIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiB2YXIoLS1jb3JuZXItcmFkaXVzLXNtYWxsKTtcXHJcXG4gIHBhZGRpbmc6IHZhcigtLW1hcmdpbik7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI0xldmVsc1BhbmVsRGl2ICNMZXZlbHNQYW5lbENsb3NlQnV0dG9uIHtcXHJcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gIHJpZ2h0OiB2YXIoLS1tYXJnaW4pO1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XFxyXFxuICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpO1xcclxcbiAgcGFkZGluZzogMHB4O1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNMZXZlbHNQYW5lbERpdiAjTGV2ZWxzUGFuZWxDbG9zZUJ1dHRvbjpob3ZlciB7XFxyXFxuICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAxKTtcXHJcXG59XFxyXFxuXFxyXFxuI1NxdWludEFwcCAjTGV2ZWxzUGFuZWxEaXYgI0FmdGVyQ2FudmFzIHtcXHJcXG4gIGhlaWdodDogMDtcXHJcXG4gIGZsZXg6IDEgMSBhdXRvO1xcclxcbiAgcGFkZGluZy10b3A6IHZhcigtLW1hcmdpbik7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI0xldmVsc1BhbmVsRGl2ICNTbGlkZXJMYWJlbCB7XFxyXFxuICBmbGV4OiAwIDAgNC41ZW07XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI0xldmVsc1BhbmVsRGl2ICNTbGlkZXJWYWx1ZVNwYW4ge1xcclxcbiAgZmxleDogMCAwIDIuNWVtO1xcclxcbn1cXHJcXG5cXHJcXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcXHJcXG4gKlxcclxcbiAqIENoYXQgUGFuZWxcXHJcXG4gKlxcclxcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cXHJcXG4jU3F1aW50QXBwICNDaGF0UGFuZWxEaXYge1xcclxcbiAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgcmlnaHQ6IDFlbTtcXHJcXG4gIHRvcDogM2VtO1xcclxcbiAgd2lkdGg6IDMwZW07XFxyXFxuICBib3JkZXI6IHNvbGlkO1xcclxcbiAgYm9yZGVyLWNvbG9yOiBsaWdodGdyYXk7XFxyXFxuICBib3JkZXItd2lkdGg6IHZhcigtLW1hcmdpbik7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGdyYXk7XFxyXFxuICBtYXJnaW46IDBweDtcXHJcXG4gIGRpc3BsYXk6IG5vbmU7XFxyXFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcclxcbiAgZm9udC1zaXplOiBzbWFsbGVyO1xcclxcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tY29ybmVyLXJhZGl1cy1zbWFsbCk7XFxyXFxuICBjdXJzb3I6IG1vdmU7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI0NoYXRQYW5lbERpdiAuVGl0bGVDbGFzcyB7XFxyXFxuICBjb2xvcjogd2hpdGU7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodHNreWJsdWU7XFxyXFxuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiB2YXIoLS1jb3JuZXItcmFkaXVzLXNtYWxsKTtcXHJcXG4gIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiB2YXIoLS1jb3JuZXItcmFkaXVzLXNtYWxsKTtcXHJcXG4gIHBhZGRpbmc6IHZhcigtLW1hcmdpbik7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI0NoYXRQYW5lbERpdiAjQ2hhdFBhbmVsQ2xvc2VCdXR0b24ge1xcclxcbiAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgcmlnaHQ6IHZhcigtLW1hcmdpbik7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcXHJcXG4gIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7XFxyXFxuICBwYWRkaW5nOiAwcHg7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI0NoYXRQYW5lbERpdiAjQ2hhdFBhbmVsQ2xvc2VCdXR0b246aG92ZXIge1xcclxcbiAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMSk7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI0NoYXRQYW5lbERpdiAjVmlld2Vyc0xpc3RCb3gge1xcclxcbiAgY3Vyc29yOiBtb3ZlO1xcclxcbiAgZmxleDogMCAwIDEwZW07XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI0NoYXRQYW5lbERpdiAjQ2hhdExpc3RCb3gge1xcclxcbiAgY3Vyc29yOiBtb3ZlO1xcclxcbiAgZmxleDogMCAwIDE1ZW07XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI0NoYXRQYW5lbERpdiAuTGlzdEJveENsYXNzIHtcXHJcXG4gIG1hcmdpbi1ib3R0b206IHZhcigtLW1hcmdpbik7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI0NoYXRQYW5lbERpdiAuTGlzdEJveEl0ZW1DbGFzcyxcXHJcXG4jU3F1aW50QXBwICNDaGF0UGFuZWxEaXYgLkxpc3RCb3hJdGVtU2VsZWN0ZWRDbGFzcyxcXHJcXG4jU3F1aW50QXBwICNDaGF0UGFuZWxEaXYgLkxpc3RCb3hJdGVtU2VsZWN0ZWRDbGFzczpob3ZlciB7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcXHJcXG4gIGNvbG9yOiBibGFjaztcXHJcXG59XFxyXFxuXFxyXFxuI1NxdWludEFwcCAjTm90aWZpY2F0aW9uRGl2IHtcXHJcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gIHJpZ2h0OiAxZW07XFxyXFxuICBib3R0b206IDAuNWVtO1xcclxcbiAgbGVmdDogNTAlO1xcclxcbiAgaGVpZ2h0OiAyIGVtO1xcclxcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XFxyXFxuICBhbmltYXRpb246IGZhZGVPdXQgM3MgZWFzZSAxcyBmb3J3YXJkcztcXHJcXG4gIHRleHQtc2hhZG93OiAwIDAgM3B4ICNmZmZmZmY7IC8qIHdoaXRlIGdsb3cgKi9cXHJcXG59XFxyXFxuXFxyXFxuQGtleWZyYW1lcyBmYWRlT3V0IHtcXHJcXG4gIDAlIHtcXHJcXG4gICAgb3BhY2l0eTogMTtcXHJcXG4gIH1cXHJcXG4gIDEwMCUge1xcclxcbiAgICBvcGFjaXR5OiAwO1xcclxcbiAgfVxcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwIC5EaWFsb2dCYWNrZ3JvdW5kQ2xhc3Mge1xcclxcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxyXFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcclxcbiAgcG9zaXRpb246IGZpeGVkOyAvKiBTdGF5IGluIHBsYWNlICovXFxyXFxuICB6LWluZGV4OiAxOyAvKiBTaXQgb24gdG9wICovXFxyXFxuICBsZWZ0OiAwO1xcclxcbiAgdG9wOiAwO1xcclxcbiAgd2lkdGg6IDEwMCU7IC8qIEZ1bGwgd2lkdGggKi9cXHJcXG4gIGhlaWdodDogMTAwJTsgLyogRnVsbCBoZWlnaHQgKi9cXHJcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigwLCAwLCAwLCAwLjQpO1xcclxcbiAgZGlzcGxheTogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXFxyXFxuICpcXHJcXG4gKiBXZWxjb21lIERpYWxvZ1xcclxcbiAqXFxyXFxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xcclxcbiNTcXVpbnRBcHAgI1dlbGNvbWVEaWFsb2dEaXYge1xcclxcbiAgd2lkdGg6IDI1ZW07XFxyXFxuICBoZWlnaHQ6IDI1ZW07XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcXHJcXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWNvcm5lci1yYWRpdXMtbWVkaXVtKTtcXHJcXG59XFxyXFxuXFxyXFxuI1NxdWludEFwcCAjV2VsY29tZURpYWxvZ0JhY2tncm91bmREaXYge1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDE2MCwgMTYwLCAxNjApO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBub24tcGhvbmUgZGlzcGxheXMgKi9cXHJcXG5AbWVkaWEgKG1heC1yZXNvbHV0aW9uOiAxOTJkcGkpIHtcXHJcXG4gICNTcXVpbnRBcHAgI1dlbGNvbWVEaWFsb2dEaXYge1xcclxcbiAgICB3aWR0aDogMzBlbTtcXHJcXG4gICAgaGVpZ2h0OiAzMGVtO1xcclxcbiAgfVxcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNXZWxjb21lRGlhbG9nRGl2ICNUaXRsZURpdiB7XFxyXFxuICBmb250LXdlaWdodDogYm9sZDtcXHJcXG4gIGZvbnQtc2l6ZTogMS43NWVtO1xcclxcbiAgZmxleDogMSAwIGF1dG87XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxyXFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcclxcbiAgbWFyZ2luLXRvcDogMC41ZW07XFxyXFxuICBtYXJnaW4tYm90dG9tOiAwLjVlbTtcXHJcXG59XFxyXFxuXFxyXFxuI1NxdWludEFwcCAjV2VsY29tZURpYWxvZ0RpdiAjU3F1aW50SW1nIHtcXHJcXG4gIHdpZHRoOiAyNWVtO1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNXZWxjb21lRGlhbG9nRGl2ICNVc2VyTmFtZUdyb3VwRGl2IHtcXHJcXG4gIGhlaWdodDogNGVtO1xcclxcbiAgZGlzcGxheTogZmxleDtcXHJcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcclxcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuI1NxdWludEFwcCAjV2VsY29tZURpYWxvZ0RpdiAjVXNlck5hbWVUZXh0SW5wdXQge1xcclxcbiAgbWFyZ2luLXJpZ2h0OiAxZW07XFxyXFxuICBtYXJnaW4tbGVmdDogMWVtO1xcclxcbn1cXHJcXG5cXHJcXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcXHJcXG4gKlxcclxcbiAqIFN0YXJ0IERpYWxvZ1xcclxcbiAqXFxyXFxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xcclxcbiNTcXVpbnRBcHAgI1N0YXJ0RGlhbG9nQmFja2dyb3VuZERpdiB7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTYwLCAxNjAsIDE2MCk7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI1N0YXJ0RGlhbG9nRGl2IHtcXHJcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgd2lkdGg6IDYwJTtcXHJcXG4gIGhlaWdodDogNjAlO1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XFxyXFxuICBib3JkZXItcmFkaXVzOiB2YXIoLS1jb3JuZXItcmFkaXVzLWxhcmdlKTtcXHJcXG59XFxyXFxuXFxyXFxuQG1lZGlhIChvcmllbnRhdGlvbjogcG9ydHJhaXQpIHtcXHJcXG4gICNTcXVpbnRBcHAgI1N0YXJ0RGlhbG9nRGl2IHtcXHJcXG4gICAgd2lkdGg6IDcwJTtcXHJcXG4gICAgaGVpZ2h0OiA3MCU7XFxyXFxuICB9XFxyXFxuXFxyXFxuICAjU3F1aW50QXBwICNTdGFydERpYWxvZ0RpdiAjRGlhbG9nQm9keURpdiB7XFxyXFxuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XFxyXFxuICB9XFxyXFxufVxcclxcbkBtZWRpYSAob3JpZW50YXRpb246IHBvcnRyYWl0KSB7XFxyXFxuICAjU3F1aW50QXBwICNTdGFydERpYWxvZ0RpdiAjRGlhbG9nQm9keURpdiB7XFxyXFxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxyXFxuICB9XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI1N0YXJ0RGlhbG9nRGl2ICNEaWFsb2dUaXRsZURpdiB7XFxyXFxuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiB2YXIoLS1jb3JuZXItcmFkaXVzLWxhcmdlKTtcXHJcXG4gIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiB2YXIoLS1jb3JuZXItcmFkaXVzLWxhcmdlKTtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6IGxpZ2h0Z3JheTtcXHJcXG4gIHBhZGRpbmctbGVmdDogMC43ZW07XFxyXFxuICBwYWRkaW5nLXJpZ2h0OiAwLjdlbTtcXHJcXG4gIHBhZGRpbmctdG9wOiB2YXIoLS1tYXJnaW4pO1xcclxcbiAgcGFkZGluZy1ib3R0b206IHZhcigtLW1hcmdpbik7XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNTdGFydERpYWxvZ0RpdiAjVGl0bGVEaXYge1xcclxcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxyXFxuICBmbGV4OiAxIDEgYXV0bztcXHJcXG4gIGRpc3BsYXk6IGZsZXg7XFxyXFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcclxcbiAganVzdGlmeS1jb250ZW50OiBsZWZ0O1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNTdGFydERpYWxvZ0RpdiAjQ29ubmVjdGluZ1RleHREaXYge1xcclxcbiAgY29sb3I6IHdoaXRlO1xcclxcbiAgcGFkZGluZy1yaWdodDogMWVtO1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNTdGFydERpYWxvZ0RpdiAjQ29ubmVjdGluZ0FuaW1hdGlvbkRpdiB7XFxyXFxuICB6b29tOiAwLjI7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI1N0YXJ0RGlhbG9nRGl2ICNEaWFsb2dCb2R5RGl2IHtcXHJcXG4gIGRpc3BsYXk6IGZsZXg7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcXHJcXG4gIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiB2YXIoLS1jb3JuZXItcmFkaXVzLW1lZGl1bSk7XFxyXFxuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiB2YXIoLS1jb3JuZXItcmFkaXVzLW1lZGl1bSk7XFxyXFxuICBmbGV4OiAxIDE7XFxyXFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI1N0YXJ0RGlhbG9nRGl2IC5CdXR0b25EaXZDbGFzcyB7XFxyXFxuICB0ZXh0LWFsaWduOiByaWdodDtcXHJcXG59XFxyXFxuXFxyXFxuI1NxdWludEFwcCAjU3RhcnREaWFsb2dEaXYgI1ZpZXdQYW5lbERpdiB7XFxyXFxuICBmbGV4OiBhdXRvO1xcclxcbiAgcGFkZGluZzogdmFyKC0tbWFyZ2luKTtcXHJcXG4gIG1hcmdpbjogdmFyKC0tbWFyZ2luKTtcXHJcXG4gIGRpc3BsYXk6IGZsZXg7XFxyXFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdmlldy1iZy1jb2xvcik7XFxyXFxuICBib3JkZXItcmFkaXVzOiB2YXIoLS1jb3JuZXItcmFkaXVzLW1lZGl1bSk7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI1N0YXJ0RGlhbG9nRGl2ICNWaWV3QnV0dG9uIHtcXHJcXG4gIGZsZXg6IDAgMSBhdXRvO1xcclxcbiAgbWFyZ2luLXRvcDogMC4yNWVtO1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdmlldy1idXR0b24tY29sb3IpO1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNTdGFydERpYWxvZ0RpdiAjVmlld0J1dHRvbjpob3ZlciB7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS12aWV3LWJ1dHRvbi1jb2xvci1ob3Zlcik7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI1N0YXJ0RGlhbG9nRGl2ICNWaWV3QnV0dG9uOmRpc2FibGVkIHtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXZpZXctYnV0dG9uLWNvbG9yLWRpc2FibGVkKTtcXHJcXG4gIGNvbG9yOiB2YXIoLS12aWV3LWJ1dHRvbi10ZXh0Y29sb3ItZGlzYWJsZWQpO1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNTdGFydERpYWxvZ0RpdiAjVmlld0xpc3RCb3gge1xcclxcbiAgbWFyZ2luLXRvcDogMC4yNWVtO1xcclxcbiAgbWFyZ2luLWJvdHRvbTogMC4yNWVtO1xcclxcbiAgZmxleDogMSAxIGF1dG87XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI1N0YXJ0RGlhbG9nRGl2ICNPclBhbmVsRGl2IHtcXHJcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxyXFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXHJcXG4gIGRpc3BsYXk6IGZsZXg7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI1N0YXJ0RGlhbG9nRGl2ICNPckRpdiB7XFxyXFxuICBwYWRkaW5nOiAxZW07XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI1N0YXJ0RGlhbG9nRGl2ICNIb3N0UGFuZWxEaXYge1xcclxcbiAgZmxleDogYXV0bztcXHJcXG4gIHBhZGRpbmc6IHZhcigtLW1hcmdpbik7XFxyXFxuICBtYXJnaW46IHZhcigtLW1hcmdpbik7XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWhvc3QtYmctY29sb3IpO1xcclxcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tY29ybmVyLXJhZGl1cy1tZWRpdW0pO1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNTdGFydERpYWxvZ0RpdiAjSG9zdEltYWdlRGl2IHtcXHJcXG4gIGZsZXg6IDEgMCBhdXRvOyAvKiBzdHJldGNoICovXFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI1N0YXJ0RGlhbG9nRGl2ICNIb3N0QnV0dG9uIHtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWhvc3QtYnV0dG9uLWNvbG9yKTtcXHJcXG59XFxyXFxuXFxyXFxuI1NxdWludEFwcCAjU3RhcnREaWFsb2dEaXYgI0hvc3RCdXR0b246aG92ZXIge1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taG9zdC1idXR0b24tY29sb3ItaG92ZXIpO1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNTdGFydERpYWxvZ0RpdiAjTmFtZUlucHV0VGV4dCB7XFxyXFxuICBmbGV4OiAxIDEgYXV0bztcXHJcXG4gIHdpZHRoOiAwO1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNTdGFydERpYWxvZ0RpdiAuaWNvbiB7XFxyXFxuICBmbGV4OiAxIDAgYXV0bzsgLyogc3RyZXRjaCAqL1xcclxcbiAgZGlzcGxheTogZmxleDtcXHJcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcclxcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXHJcXG4gIHpvb206IDEuNTtcXHJcXG59XFxyXFxuXFxyXFxuI1NxdWludEFwcCAjU3RhcnREaWFsb2dEaXYgLmljb24gLmNhbWVyYS1pY29uIHtcXHJcXG4gIGJhY2tncm91bmQ6ICM2MjYyNjI7XFxyXFxuICBoZWlnaHQ6IDRlbTtcXHJcXG4gIHdpZHRoOiA2ZW07XFxyXFxuICBib3JkZXItcmFkaXVzOiB2YXIoLS1jb3JuZXItcmFkaXVzLW1lZGl1bSk7XFxyXFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxyXFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcclxcbn1cXHJcXG4jU3F1aW50QXBwICNTdGFydERpYWxvZ0RpdiAuaWNvbiAuY2FtZXJhLWljb24gLmNhbWVyYS1jaXJjbGUge1xcclxcbiAgd2lkdGg6IDJlbTtcXHJcXG4gIGhlaWdodDogMmVtO1xcclxcbiAgYm9yZGVyOiAwLjVlbSBzb2xpZCAjZmZmO1xcclxcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xcclxcbn1cXHJcXG4jU3F1aW50QXBwICNTdGFydERpYWxvZ0RpdiAuaWNvbiAuY2FtZXJhLWljb24gLmNhbWVyYS1idG4ge1xcclxcbiAgd2lkdGg6IDAuNWVtO1xcclxcbiAgaGVpZ2h0OiAwLjVlbTtcXHJcXG4gIGJhY2tncm91bmQ6ICNmZmY7XFxyXFxuICBib3JkZXItcmFkaXVzOiA1MCU7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICByaWdodDogMC41ZW07XFxyXFxuICB0b3A6IDAuNWVtO1xcclxcbn1cXHJcXG4jU3F1aW50QXBwICNTdGFydERpYWxvZ0RpdiAuaWNvbiAuY2FtZXJhLWljb246YWZ0ZXIge1xcclxcbiAgY29udGVudDogXFxcIlxcXCI7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICB0b3A6IC0wLjRlbTtcXHJcXG4gIGJhY2tncm91bmQ6ICM2MjYyNjI7XFxyXFxuICB3aWR0aDogM2VtO1xcclxcbiAgaGVpZ2h0OiAwLjdlbTtcXHJcXG4gIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAxLjVlbTtcXHJcXG4gIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDEuNWVtO1xcclxcbn1cXHJcXG5cXHJcXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcXHJcXG4gKlxcclxcbiAqIFVzZXIgTmFtZSBEaWFsb2dcXHJcXG4gKlxcclxcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cXHJcXG4jU3F1aW50QXBwICNVc2VyTmFtZURpYWxvZ0RpdiB7XFxyXFxuICB3aWR0aDogMjVlbTtcXHJcXG4gIGhlaWdodDogN2VtO1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XFxyXFxuICBib3JkZXItcmFkaXVzOiB2YXIoLS1jb3JuZXItcmFkaXVzLW1lZGl1bSk7XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxyXFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcclxcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXHJcXG59XFxyXFxuXFxyXFxuI1NxdWludEFwcCAjVXNlck5hbWVEaWFsb2dEaXYgI1VzZXJOYW1lR3JvdXBEaXYge1xcclxcbiAgZmxleDogMSAwIGF1dG87IC8qIHN0cmV0Y2ggKi9cXHJcXG4gIGRpc3BsYXk6IGZsZXg7XFxyXFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXHJcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgI1VzZXJOYW1lRGlhbG9nRGl2ICNVc2VyTmFtZVRleHRJbnB1dCB7XFxyXFxuICBtYXJnaW4tcmlnaHQ6IHZhcigtLW1hcmdpbik7XFxyXFxuICBtYXJnaW4tbGVmdDogdmFyKC0tbWFyZ2luKTtcXHJcXG59XFxyXFxuXFxyXFxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXFxyXFxuICpcXHJcXG4gKiBTZXNzaW9uIFNldHVwIERpYWxvZ1xcclxcbiAqXFxyXFxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xcclxcbiNTcXVpbnRBcHAgI1Nlc3Npb25TZXR1cERpYWxvZ0RpdiB7XFxyXFxuICB3aWR0aDogMjVlbTtcXHJcXG4gIGhlaWdodDogN2VtO1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XFxyXFxuICBib3JkZXItcmFkaXVzOiB2YXIoLS1jb3JuZXItcmFkaXVzLW1lZGl1bSk7XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxyXFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcclxcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXHJcXG59XFxyXFxuXFxyXFxuI1NxdWludEFwcCAjU2Vzc2lvblNldHVwRGlhbG9nRGl2ICNQYXNzd29yZEdyb3VwRGl2IHtcXHJcXG4gIGZsZXg6IDEgMCBhdXRvOyAvKiBzdHJldGNoICovXFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxyXFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNTZXNzaW9uU2V0dXBEaWFsb2dEaXYgI1Bhc3N3b3JkVGV4dElucHV0IHtcXHJcXG4gIG1hcmdpbi1yaWdodDogdmFyKC0tbWFyZ2luKTtcXHJcXG4gIG1hcmdpbi1sZWZ0OiB2YXIoLS1tYXJnaW4pO1xcclxcbn1cXHJcXG5cXHJcXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcXHJcXG4gKlxcclxcbiAqIFBhc3N3b3JkIERpYWxvZ1xcclxcbiAqXFxyXFxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xcclxcbiNTcXVpbnRBcHAgI1Bhc3N3b3JkRGlhbG9nRGl2IHtcXHJcXG4gIHdpZHRoOiAyNWVtO1xcclxcbiAgaGVpZ2h0OiA3ZW07XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcXHJcXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWNvcm5lci1yYWRpdXMtbWVkaXVtKTtcXHJcXG4gIGRpc3BsYXk6IGZsZXg7XFxyXFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXHJcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxyXFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNQYXNzd29yZERpYWxvZ0RpdiAjUGFzc3dvcmRHcm91cERpdiB7XFxyXFxuICBmbGV4OiAxIDAgYXV0bzsgLyogc3RyZXRjaCAqL1xcclxcbiAgZGlzcGxheTogZmxleDtcXHJcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcclxcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuI1NxdWludEFwcCAjUGFzc3dvcmREaWFsb2dEaXYgI1Bhc3N3b3JkVGV4dElucHV0IHtcXHJcXG4gIG1hcmdpbi1yaWdodDogdmFyKC0tbWFyZ2luKTtcXHJcXG4gIG1hcmdpbi1sZWZ0OiB2YXIoLS1tYXJnaW4pO1xcclxcbn1cXHJcXG5cXHJcXG4jU3F1aW50QXBwICNQYXNzd29yZERpYWxvZ0RpdiAjQnV0dG9uR3JvdXBEaXYge1xcclxcbiAgd2lkdGg6IDEwMCU7XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcXHJcXG4gIG1hcmdpbjogdmFyKC0tbWFyZ2luKTtcXHJcXG59XFxyXFxuXFxyXFxuI1NxdWludEFwcCAjUGFzc3dvcmREaWFsb2dEaXYgI0J1dHRvbkdyb3VwRGl2IC5CdXR0b25DbGFzcyB7XFxyXFxuICBtYXJnaW4tcmlnaHQ6IHZhcigtLW1hcmdpbik7XFxyXFxufVxcclxcblxcclxcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxcclxcbiAqXFxyXFxuICogVGltZXIgUGFuZWxcXHJcXG4gKlxcclxcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cXHJcXG4jU3F1aW50QXBwICNNb2RlbFRpbWVyQ2FudmFzIHtcXHJcXG4gIG9wYWNpdHk6IDAuNTtcXHJcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gIHJpZ2h0OiAwLjVlbTtcXHJcXG4gIHRvcDogM2VtO1xcclxcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tY29ybmVyLXJhZGl1cy1zbWFsbCk7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGdyYXk7XFxyXFxuICBib3JkZXItcmFkaXVzOiAwLjZlbTtcXHJcXG4gIHdpZHRoOiAxMGVtO1xcclxcbiAgaGVpZ2h0OiAzZW07XFxyXFxuICBjb2xvcjogYmxhY2s7XFxyXFxufVxcclxcblxcclxcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxcclxcbiAqXFxyXFxuICogWm9vbSBQYW5lbFxcclxcbiAqXFxyXFxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xcclxcbiNTcXVpbnRBcHAgI1pvb21DYW52YXMge1xcclxcbiAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgcmlnaHQ6IDAuNWVtO1xcclxcbiAgdG9wOiAyNSU7XFxyXFxuICBvcGFjaXR5OiAwLjY7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGdyYXk7XFxyXFxuICBib3JkZXItcmFkaXVzOiAxZW07XFxyXFxuICB3aWR0aDogMmVtO1xcclxcbiAgaGVpZ2h0OiA2MCU7XFxyXFxufVxcclxcblxcclxcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxcclxcbiAqXFxyXFxuICogV29ya2luZyBBbmltYXRpb25cXHJcXG4gKlxcclxcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cXHJcXG4vKiBjb29sIGFuaW1hdGlvbiBmcm9tIGh0dHBzOi8vbG9hZGluZy5pby9jc3MvICovXFxyXFxuLmxkcy1yaW5nIHtcXHJcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG4gIHdpZHRoOiA4MHB4O1xcclxcbiAgaGVpZ2h0OiA4MHB4O1xcclxcbn1cXHJcXG4ubGRzLXJpbmcgZGl2IHtcXHJcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxyXFxuICBkaXNwbGF5OiBibG9jaztcXHJcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gIHdpZHRoOiA2NHB4O1xcclxcbiAgaGVpZ2h0OiA2NHB4O1xcclxcbiAgbWFyZ2luOiA4cHg7XFxyXFxuICBib3JkZXI6IDhweCBzb2xpZCAjZmZmO1xcclxcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xcclxcbiAgYW5pbWF0aW9uOiBsZHMtcmluZyAxLjJzIGN1YmljLWJlemllcigwLjUsIDAsIDAuNSwgMSkgaW5maW5pdGU7XFxyXFxuICBib3JkZXItY29sb3I6ICNmZmYgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQ7XFxyXFxufVxcclxcbi5sZHMtcmluZyBkaXY6bnRoLWNoaWxkKDEpIHtcXHJcXG4gIGFuaW1hdGlvbi1kZWxheTogLTAuNDVzO1xcclxcbn1cXHJcXG4ubGRzLXJpbmcgZGl2Om50aC1jaGlsZCgyKSB7XFxyXFxuICBhbmltYXRpb24tZGVsYXk6IC0wLjNzO1xcclxcbn1cXHJcXG4ubGRzLXJpbmcgZGl2Om50aC1jaGlsZCgzKSB7XFxyXFxuICBhbmltYXRpb24tZGVsYXk6IC0wLjE1cztcXHJcXG59XFxyXFxuQGtleWZyYW1lcyBsZHMtcmluZyB7XFxyXFxuICAwJSB7XFxyXFxuICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xcclxcbiAgfVxcclxcbiAgMTAwJSB7XFxyXFxuICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7XFxyXFxuICB9XFxyXFxufVxcclxcblxcclxcbiNTcXVpbnRBcHAgLk1lbnVJdGVtIC5TbGlkZXJWYWx1ZVNwYW4ge1xcclxcbiAgZGlzcGxheTogZmxleDtcXHJcXG59XFxyXFxuXCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIvKiBTdHlsZSB0aGUgdGFiICovXFxyXFxuLlRhYnMge1xcclxcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcXHJcXG59XFxyXFxuXFxyXFxuLyogU3R5bGUgdGhlIGJ1dHRvbnMgdGhhdCBhcmUgdXNlZCB0byBvcGVuIHRoZSB0YWIgY29udGVudCAqL1xcclxcbi5UYWJzIGJ1dHRvbiB7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xcclxcbiAgZmxvYXQ6IGxlZnQ7XFxyXFxuICBib3JkZXI6IG5vbmU7XFxyXFxuICBvdXRsaW5lOiBub25lO1xcclxcbiAgY3Vyc29yOiBwb2ludGVyO1xcclxcbiAgcGFkZGluZzogMTBweCAyMHB4O1xcclxcbiAgY29sb3I6ICMzMzM7XFxyXFxufVxcclxcblxcclxcbi8qIENoYW5nZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIGJ1dHRvbnMgb24gaG92ZXIgKi9cXHJcXG4uVGFicyBidXR0b246aG92ZXIge1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogI2RkZDtcXHJcXG4gIGNvbG9yOiAjMDAwO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBDcmVhdGUgYW4gYWN0aXZlL2N1cnJlbnQgdGFibGluayBjbGFzcyAqL1xcclxcbi5UYWJzIGJ1dHRvbi5hY3RpdmUge1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcXHJcXG4gIGNvbG9yOiAjMDAwO1xcclxcbn1cXHJcXG5cXHJcXG4vKiBTdHlsZSB0aGUgdGFiIGNvbnRlbnQgKi9cXHJcXG4uVGFiQ29udGVudCB7XFxyXFxuICBkaXNwbGF5OiBub25lO1xcclxcbiAgcGFkZGluZzogMjBweCAxMnB4O1xcclxcbiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcXHJcXG59XFxyXFxuXFxyXFxuQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LWRldmljZS13aWR0aDogODAwcHgpIHtcXHJcXG4gIC5UYWJzIGJ1dHRvbiB7XFxyXFxuICAgIHBhZGRpbmc6IDIwcHggNDBweDtcXHJcXG4gIH1cXHJcXG59XFxyXFxuXCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIjVmlld2VyQXBwICNQZXJzcGVjdGl2ZUNhbnZhcyB7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTE0LCAxMTcsIDEzNCk7XFxyXFxuICBoZWlnaHQ6IDEwMHB4O1xcclxcbiAgd2lkdGg6IDEwMCU7XFxyXFxufVxcclxcblxcclxcbiNWaWV3ZXJBcHAgI1ZhbHVlUGxhbmVzUGFuZWwge1xcclxcbiAgaGVpZ2h0OiAxNTRweDtcXHJcXG4gIHdpZHRoOiAxMDAlO1xcclxcbn1cXHJcXG5cXHJcXG4jVmFsdWVQbGFuZXNQYW5lbCAuU2xpZGVyc0RpdiB7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICBsZWZ0OiAwcHg7XFxyXFxuICByaWdodDogMTU0cHg7XFxyXFxufVxcclxcblxcclxcbiNWYWx1ZVBsYW5lc1BhbmVsICNMaWdodExpZ2h0UmFuZ2U6Oi13ZWJraXQtc2xpZGVyLXRodW1iIHtcXHJcXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIGxpZ2h0Z3JheSwgZGFya2dyYXkpO1xcclxcbn1cXHJcXG4jVmFsdWVQbGFuZXNQYW5lbCAjTGlnaHRMaWdodFNsaWRlclJhbmdlOjotbW96LXJhbmdlLXRodW1iIHtcXHJcXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIGxpZ2h0Z3JheSwgZGFya2dyYXkpO1xcclxcbn1cXHJcXG5cXHJcXG4jVmFsdWVQbGFuZXNQYW5lbCAjTWlkTGlnaHRSYW5nZTo6LXdlYmtpdC1zbGlkZXItdGh1bWIge1xcclxcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgbGlnaHRncmF5LCBkYXJrZ3JheSk7XFxyXFxufVxcclxcbiNWYWx1ZVBsYW5lc1BhbmVsICNNaWRMaWdodFNsaWRlclJhbmdlOjotbW96LXJhbmdlLXRodW1iIHtcXHJcXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIGxpZ2h0Z3JheSwgZGFya2dyYXkpO1xcclxcbn1cXHJcXG5cXHJcXG4jVmFsdWVQbGFuZXNQYW5lbCAjRGFya0xpZ2h0UmFuZ2U6Oi13ZWJraXQtc2xpZGVyLXRodW1iIHtcXHJcXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIGxpZ2h0Z3JheSwgZGFya2dyYXkpO1xcclxcbn1cXHJcXG4jVmFsdWVQbGFuZXNQYW5lbCAjRGFya0xpZ2h0U2xpZGVyUmFuZ2U6Oi1tb3otcmFuZ2UtdGh1bWIge1xcclxcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgbGlnaHRncmF5LCBkYXJrZ3JheSk7XFxyXFxufVxcclxcblxcclxcbiNWYWx1ZVBsYW5lc1BhbmVsICNWYWx1ZVBsYW5lc0NhbnZhcyB7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICByaWdodDogMHB4O1xcclxcbiAgd2lkdGg6IDE1MHB4O1xcclxcbiAgaGVpZ2h0OiAxNTBweDtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigxMjgsIDEyOCwgMTUwKTtcXHJcXG59XFxyXFxuXFxyXFxuI1ZhbHVlUGxhbmVzUGFuZWwgI1ZhbHVlUGxhbmVzT3ZlcmxheUNhbnZhcyB7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICByaWdodDogMHB4O1xcclxcbiAgd2lkdGg6IDE1MHB4O1xcclxcbiAgaGVpZ2h0OiAxNTBweDtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xcclxcbn1cXHJcXG5cXHJcXG5AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtZGV2aWNlLXdpZHRoOiA4MDBweCkge1xcclxcbiAgI1ZpZXdlckFwcCAjUGVyc3BlY3RpdmVDYW52YXMge1xcclxcbiAgICBoZWlnaHQ6IDIwMHB4O1xcclxcbiAgfVxcclxcblxcclxcbiAgI1ZpZXdlckFwcCAjVmFsdWVQbGFuZXNQYW5lbCB7XFxyXFxuICAgIGhlaWdodDogMzA4cHg7XFxyXFxuICB9XFxyXFxuXFxyXFxuICAjVmFsdWVQbGFuZXNQYW5lbCAuU2xpZGVyc0RpdiB7XFxyXFxuICAgIHJpZ2h0OiAzMDhweDtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gICNWYWx1ZVBsYW5lc1BhbmVsICNWYWx1ZVBsYW5lc0NhbnZhcyB7XFxyXFxuICAgIHdpZHRoOiAzMDBweDtcXHJcXG4gICAgaGVpZ2h0OiAzMDBweDtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gICNWYWx1ZVBsYW5lc1BhbmVsICNWYWx1ZVBsYW5lc092ZXJsYXlDYW52YXMge1xcclxcbiAgICB3aWR0aDogMzAwcHg7XFxyXFxuICAgIGhlaWdodDogMzAwcHg7XFxyXFxuICB9XFxyXFxufVxcclxcblwiLCBcIlwiXSk7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG4iLCIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIik7XG52YXIgX19fQ1NTX0xPQURFUl9BVF9SVUxFX0lNUE9SVF8wX19fID0gcmVxdWlyZShcIi0hLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9NZW51LmNzc1wiKTtcbnZhciBfX19DU1NfTE9BREVSX0FUX1JVTEVfSU1QT1JUXzFfX18gPSByZXF1aXJlKFwiLSEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL1NsaWRlci5jc3NcIik7XG52YXIgX19fQ1NTX0xPQURFUl9BVF9SVUxFX0lNUE9SVF8yX19fID0gcmVxdWlyZShcIi0hLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9UYWJzLmNzc1wiKTtcbnZhciBfX19DU1NfTE9BREVSX0FUX1JVTEVfSU1QT1JUXzNfX18gPSByZXF1aXJlKFwiLSEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL0NoZWNrYm94LmNzc1wiKTtcbnZhciBfX19DU1NfTE9BREVSX0FUX1JVTEVfSU1QT1JUXzRfX18gPSByZXF1aXJlKFwiLSEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL1JhZGlvYnV0dG9uLmNzc1wiKTtcbnZhciBfX19DU1NfTE9BREVSX0FUX1JVTEVfSU1QT1JUXzVfX18gPSByZXF1aXJlKFwiLSEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL0xpc3RCb3guY3NzXCIpO1xudmFyIF9fX0NTU19MT0FERVJfQVRfUlVMRV9JTVBPUlRfNl9fXyA9IHJlcXVpcmUoXCItIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vQnV0dG9uLmNzc1wiKTtcbnZhciBfX19DU1NfTE9BREVSX0FUX1JVTEVfSU1QT1JUXzdfX18gPSByZXF1aXJlKFwiLSEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL0FydFNlZUFwcC5jc3NcIik7XG52YXIgX19fQ1NTX0xPQURFUl9BVF9SVUxFX0lNUE9SVF84X19fID0gcmVxdWlyZShcIi0hLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9QYXRoVHJhY2VyQXBwLmNzc1wiKTtcbnZhciBfX19DU1NfTE9BREVSX0FUX1JVTEVfSU1QT1JUXzlfX18gPSByZXF1aXJlKFwiLSEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL1ZpZXdlckFwcC5jc3NcIik7XG52YXIgX19fQ1NTX0xPQURFUl9BVF9SVUxFX0lNUE9SVF8xMF9fXyA9IHJlcXVpcmUoXCItIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vU3F1aW50QXBwLmNzc1wiKTtcbnZhciBfX19DU1NfTE9BREVSX0FUX1JVTEVfSU1QT1JUXzExX19fID0gcmVxdWlyZShcIi0hLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9Nb2RlbFRpbWVyQXBwLmNzc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuZXhwb3J0cy5pKF9fX0NTU19MT0FERVJfQVRfUlVMRV9JTVBPUlRfMF9fXyk7XG5leHBvcnRzLmkoX19fQ1NTX0xPQURFUl9BVF9SVUxFX0lNUE9SVF8xX19fKTtcbmV4cG9ydHMuaShfX19DU1NfTE9BREVSX0FUX1JVTEVfSU1QT1JUXzJfX18pO1xuZXhwb3J0cy5pKF9fX0NTU19MT0FERVJfQVRfUlVMRV9JTVBPUlRfM19fXyk7XG5leHBvcnRzLmkoX19fQ1NTX0xPQURFUl9BVF9SVUxFX0lNUE9SVF80X19fKTtcbmV4cG9ydHMuaShfX19DU1NfTE9BREVSX0FUX1JVTEVfSU1QT1JUXzVfX18pO1xuZXhwb3J0cy5pKF9fX0NTU19MT0FERVJfQVRfUlVMRV9JTVBPUlRfNl9fXyk7XG5leHBvcnRzLmkoX19fQ1NTX0xPQURFUl9BVF9SVUxFX0lNUE9SVF83X19fKTtcbmV4cG9ydHMuaShfX19DU1NfTE9BREVSX0FUX1JVTEVfSU1QT1JUXzhfX18pO1xuZXhwb3J0cy5pKF9fX0NTU19MT0FERVJfQVRfUlVMRV9JTVBPUlRfOV9fXyk7XG5leHBvcnRzLmkoX19fQ1NTX0xPQURFUl9BVF9SVUxFX0lNUE9SVF8xMF9fXyk7XG5leHBvcnRzLmkoX19fQ1NTX0xPQURFUl9BVF9SVUxFX0lNUE9SVF8xMV9fXyk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIioge1xcclxcbiAgZm9udC1mYW1pbHk6IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7XFxyXFxufVxcclxcblxcclxcbi8qXFxyXFxuICogT3VyIHN0cmF0ZWd5IGZvciBoYW5kbGluZyBtdWx0aXBsZSBkZXZpY2VzIGlzIHRvIHNldCB0aGUgZm9udCBzaXplIGFuZCBcXHJcXG4gKiB0aGVuIHNjYWxlIGV2ZXJ5dGhpbmcgZWxzZSBiYXNlZCBvbiBlbSdzLiBUaGUgdmFyaWFibGVzIGJlbG93IGFyZSBzZXRcXHJcXG4gKiB3aXRoaW4gdGhlIEphdmFzY3JpcHQgY29kZSBiYXNlZCBvbiB0aGUgcGxhdGZvcm0sIGJyb3dzZXIsIGFuZCBvcmllbnRhdGlvblxcclxcbiAqL1xcclxcbioge1xcclxcbiAgZm9udC1zaXplOiB2YXIoLS1mb250U2l6ZSk7XFxyXFxufVxcclxcblxcclxcbi8qIGZvciBzb21lIHJlYXNvbiBpbnB1dHMgZG9uJ3QgcmVzcG9uZCB0byBvdXIgZ2xvYmFsIGZvbnQgc2l6ZSwgc28gbWFudWFsbHkgc2V0IHRoZW0gKi9cXHJcXG5pbnB1dCB7XFxyXFxuICBmb250LXNpemU6IDFlbTtcXHJcXG59XFxyXFxuYnV0dG9uIHtcXHJcXG4gIGZvbnQtc2l6ZTogMWVtO1xcclxcbn1cXHJcXG5cXHJcXG46cm9vdCB7XFxyXFxuICAtLW1haW4tY29sb3I6IDExNCwgMTE3LCAxMzQ7XFxyXFxufVxcclxcblxcclxcbmJvZHkge1xcclxcbiAgbWFyZ2luOiAwcHg7XFxyXFxuICBzY3JvbGxiYXItd2lkdGg6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbmJvZHk6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcXHJcXG4gIGRpc3BsYXk6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbi5Db250YWluZXIge1xcclxcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbn1cXHJcXG5cXHJcXG4uRmxleENvbnRhaW5lciB7XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbn1cXHJcXG5cXHJcXG4jTWFpbkNhbnZhcyB7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTE0LCAxMTcsIDEzNCk7XFxyXFxufVxcclxcblxcclxcbi5PdmVybGF5IHtcXHJcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gIGxlZnQ6IDA7XFxyXFxuICB0b3A6IDA7XFxyXFxuICByaWdodDogMDtcXHJcXG4gIGJvdHRvbTogMDtcXHJcXG4gIGZvbnQtc2l6ZTogNDBweDtcXHJcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG4gIGNvbG9yOiB3aGl0ZTtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xcclxcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxyXFxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuLyogaGlkZSBwYW5lbHMgYnkgZGVmYXVsdCAtIHVzZXJzIHNob3cgdGhlbSB2aWEgbWVudXMgKi9cXHJcXG4uUGFuZWwge1xcclxcbiAgZGlzcGxheTogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuLlBhbmVsICNFeGl0QnV0dG9uIHtcXHJcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gIHdpZHRoOiAyMHB4O1xcclxcbiAgcmlnaHQ6IDA7XFxyXFxuICB0b3A6IDA7XFxyXFxuICBjdXJzb3I6IHBvaW50ZXI7XFxyXFxuICBjb2xvcjogbGlnaHRncmF5O1xcclxcbiAgei1pbmRleDogMTtcXHJcXG59XFxyXFxuXFxyXFxuLlZpZXdlckFwcCAjRXhpdEJ1dHRvbjpob3ZlciB7XFxyXFxuICBjb2xvcjogcmVkO1xcclxcbn1cXHJcXG5cXHJcXG4jQ29uc29sZSB7XFxyXFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxuICB3aWR0aDogMTAwJTtcXHJcXG4gIGhlaWdodDogMTAwJTtcXHJcXG4gIGJhY2tncm91bmQtY29sb3I6IGRhcmtibHVlO1xcclxcbiAgY29sb3I6IHdoaXRlO1xcclxcbiAgZm9udC1zaXplOiBzbWFsbGVyO1xcclxcbiAgZGlzcGxheTogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LWRldmljZS13aWR0aDogODAwcHgpIHtcXHJcXG4gIC5QYW5lbCAjRXhpdEJ1dHRvbiB7XFxyXFxuICAgIHdpZHRoOiA0MHB4O1xcclxcbiAgfVxcclxcblxcclxcbiAgLk92ZXJsYXlBbm5vdGF0aW9uIHtcXHJcXG4gICAgZm9udC1zaXplOiAyMHB0O1xcclxcbiAgfVxcclxcbn1cXHJcXG5cIiwgXCJcIl0pO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVzZVNvdXJjZU1hcCkge1xuICB2YXIgbGlzdCA9IFtdOyAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIHJldHVybiBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoY29udGVudCwgXCJ9XCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKCcnKTtcbiAgfTsgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcblxuXG4gIGxpc3QuaSA9IGZ1bmN0aW9uIChtb2R1bGVzLCBtZWRpYVF1ZXJ5LCBkZWR1cGUpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsICcnXV07XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblxuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcbiAgICAgICAgdmFyIGlkID0gdGhpc1tpXVswXTtcblxuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtb2R1bGVzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfaV0pO1xuXG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRpbnVlXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAobWVkaWFRdWVyeSkge1xuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWFRdWVyeTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzJdID0gXCJcIi5jb25jYXQobWVkaWFRdWVyeSwgXCIgYW5kIFwiKS5jb25jYXQoaXRlbVsyXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJzsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG5cbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgaWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gXCIvKiMgc291cmNlVVJMPVwiLmNvbmNhdChjc3NNYXBwaW5nLnNvdXJjZVJvb3QgfHwgJycpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn0gLy8gQWRhcHRlZCBmcm9tIGNvbnZlcnQtc291cmNlLW1hcCAoTUlUKVxuXG5cbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gIHJldHVybiBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG59IiwiKGZ1bmN0aW9uKGEsYil7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxiKTtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBleHBvcnRzKWIoKTtlbHNle2IoKSxhLkZpbGVTYXZlcj17ZXhwb3J0czp7fX0uZXhwb3J0c319KSh0aGlzLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihhLGIpe3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiBiP2I9e2F1dG9Cb206ITF9Olwib2JqZWN0XCIhPXR5cGVvZiBiJiYoY29uc29sZS53YXJuKFwiRGVwcmVjYXRlZDogRXhwZWN0ZWQgdGhpcmQgYXJndW1lbnQgdG8gYmUgYSBvYmplY3RcIiksYj17YXV0b0JvbTohYn0pLGIuYXV0b0JvbSYmL15cXHMqKD86dGV4dFxcL1xcUyp8YXBwbGljYXRpb25cXC94bWx8XFxTKlxcL1xcUypcXCt4bWwpXFxzKjsuKmNoYXJzZXRcXHMqPVxccyp1dGYtOC9pLnRlc3QoYS50eXBlKT9uZXcgQmxvYihbXCJcXHVGRUZGXCIsYV0se3R5cGU6YS50eXBlfSk6YX1mdW5jdGlvbiBjKGEsYixjKXt2YXIgZD1uZXcgWE1MSHR0cFJlcXVlc3Q7ZC5vcGVuKFwiR0VUXCIsYSksZC5yZXNwb25zZVR5cGU9XCJibG9iXCIsZC5vbmxvYWQ9ZnVuY3Rpb24oKXtnKGQucmVzcG9uc2UsYixjKX0sZC5vbmVycm9yPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcihcImNvdWxkIG5vdCBkb3dubG9hZCBmaWxlXCIpfSxkLnNlbmQoKX1mdW5jdGlvbiBkKGEpe3ZhciBiPW5ldyBYTUxIdHRwUmVxdWVzdDtiLm9wZW4oXCJIRUFEXCIsYSwhMSk7dHJ5e2Iuc2VuZCgpfWNhdGNoKGEpe31yZXR1cm4gMjAwPD1iLnN0YXR1cyYmMjk5Pj1iLnN0YXR1c31mdW5jdGlvbiBlKGEpe3RyeXthLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiKSl9Y2F0Y2goYyl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKTtiLmluaXRNb3VzZUV2ZW50KFwiY2xpY2tcIiwhMCwhMCx3aW5kb3csMCwwLDAsODAsMjAsITEsITEsITEsITEsMCxudWxsKSxhLmRpc3BhdGNoRXZlbnQoYil9fXZhciBmPVwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdy53aW5kb3c9PT13aW5kb3c/d2luZG93Olwib2JqZWN0XCI9PXR5cGVvZiBzZWxmJiZzZWxmLnNlbGY9PT1zZWxmP3NlbGY6XCJvYmplY3RcIj09dHlwZW9mIGdsb2JhbCYmZ2xvYmFsLmdsb2JhbD09PWdsb2JhbD9nbG9iYWw6dm9pZCAwLGE9Zi5uYXZpZ2F0b3ImJi9NYWNpbnRvc2gvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJi9BcHBsZVdlYktpdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSYmIS9TYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksZz1mLnNhdmVBc3x8KFwib2JqZWN0XCIhPXR5cGVvZiB3aW5kb3d8fHdpbmRvdyE9PWY/ZnVuY3Rpb24oKXt9OlwiZG93bmxvYWRcImluIEhUTUxBbmNob3JFbGVtZW50LnByb3RvdHlwZSYmIWE/ZnVuY3Rpb24oYixnLGgpe3ZhciBpPWYuVVJMfHxmLndlYmtpdFVSTCxqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO2c9Z3x8Yi5uYW1lfHxcImRvd25sb2FkXCIsai5kb3dubG9hZD1nLGoucmVsPVwibm9vcGVuZXJcIixcInN0cmluZ1wiPT10eXBlb2YgYj8oai5ocmVmPWIsai5vcmlnaW49PT1sb2NhdGlvbi5vcmlnaW4/ZShqKTpkKGouaHJlZik/YyhiLGcsaCk6ZShqLGoudGFyZ2V0PVwiX2JsYW5rXCIpKTooai5ocmVmPWkuY3JlYXRlT2JqZWN0VVJMKGIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLnJldm9rZU9iamVjdFVSTChqLmhyZWYpfSw0RTQpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlKGopfSwwKSl9OlwibXNTYXZlT3JPcGVuQmxvYlwiaW4gbmF2aWdhdG9yP2Z1bmN0aW9uKGYsZyxoKXtpZihnPWd8fGYubmFtZXx8XCJkb3dubG9hZFwiLFwic3RyaW5nXCIhPXR5cGVvZiBmKW5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGIoZixoKSxnKTtlbHNlIGlmKGQoZikpYyhmLGcsaCk7ZWxzZXt2YXIgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtpLmhyZWY9ZixpLnRhcmdldD1cIl9ibGFua1wiLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlKGkpfSl9fTpmdW5jdGlvbihiLGQsZSxnKXtpZihnPWd8fG9wZW4oXCJcIixcIl9ibGFua1wiKSxnJiYoZy5kb2N1bWVudC50aXRsZT1nLmRvY3VtZW50LmJvZHkuaW5uZXJUZXh0PVwiZG93bmxvYWRpbmcuLi5cIiksXCJzdHJpbmdcIj09dHlwZW9mIGIpcmV0dXJuIGMoYixkLGUpO3ZhciBoPVwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCI9PT1iLnR5cGUsaT0vY29uc3RydWN0b3IvaS50ZXN0KGYuSFRNTEVsZW1lbnQpfHxmLnNhZmFyaSxqPS9DcmlPU1xcL1tcXGRdKy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtpZigoanx8aCYmaXx8YSkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBGaWxlUmVhZGVyKXt2YXIgaz1uZXcgRmlsZVJlYWRlcjtrLm9ubG9hZGVuZD1mdW5jdGlvbigpe3ZhciBhPWsucmVzdWx0O2E9aj9hOmEucmVwbGFjZSgvXmRhdGE6W147XSo7LyxcImRhdGE6YXR0YWNobWVudC9maWxlO1wiKSxnP2cubG9jYXRpb24uaHJlZj1hOmxvY2F0aW9uPWEsZz1udWxsfSxrLnJlYWRBc0RhdGFVUkwoYil9ZWxzZXt2YXIgbD1mLlVSTHx8Zi53ZWJraXRVUkwsbT1sLmNyZWF0ZU9iamVjdFVSTChiKTtnP2cubG9jYXRpb249bTpsb2NhdGlvbi5ocmVmPW0sZz1udWxsLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtsLnJldm9rZU9iamVjdFVSTChtKX0sNEU0KX19KTtmLnNhdmVBcz1nLnNhdmVBcz1nLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJihtb2R1bGUuZXhwb3J0cz1nKX0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1GaWxlU2F2ZXIubWluLmpzLm1hcCIsImNvbnN0IHsgd2VibSwgbXA0IH0gPSByZXF1aXJlKFwiLi9tZWRpYS5qc1wiKTtcblxuLy8gRGV0ZWN0IGlPUyBicm93c2VycyA8IHZlcnNpb24gMTBcbmNvbnN0IG9sZElPUyA9XG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgcGFyc2VGbG9hdChcbiAgICAoXG4gICAgICBcIlwiICtcbiAgICAgICgvQ1BVLipPUyAoWzAtOV9dezMsNH0pWzAtOV9dezAsMX18KENQVSBsaWtlKS4qQXBwbGVXZWJLaXQuKk1vYmlsZS9pLmV4ZWMoXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnRcbiAgICAgICkgfHwgWzAsIFwiXCJdKVsxXVxuICAgIClcbiAgICAgIC5yZXBsYWNlKFwidW5kZWZpbmVkXCIsIFwiM18yXCIpXG4gICAgICAucmVwbGFjZShcIl9cIiwgXCIuXCIpXG4gICAgICAucmVwbGFjZShcIl9cIiwgXCJcIilcbiAgKSA8IDEwICYmXG4gICF3aW5kb3cuTVNTdHJlYW07XG5cbi8vIERldGVjdCBuYXRpdmUgV2FrZSBMb2NrIEFQSSBzdXBwb3J0XG5jb25zdCBuYXRpdmVXYWtlTG9jayA9IFwid2FrZUxvY2tcIiBpbiBuYXZpZ2F0b3I7XG5cbmNsYXNzIE5vU2xlZXAge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAobmF0aXZlV2FrZUxvY2spIHtcbiAgICAgIHRoaXMuX3dha2VMb2NrID0gbnVsbDtcbiAgICAgIGNvbnN0IGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLl93YWtlTG9jayAhPT0gbnVsbCAmJiBkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09IFwidmlzaWJsZVwiKSB7XG4gICAgICAgICAgdGhpcy5lbmFibGUoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImZ1bGxzY3JlZW5jaGFuZ2VcIiwgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSk7XG4gICAgfSBlbHNlIGlmIChvbGRJT1MpIHtcbiAgICAgIHRoaXMubm9TbGVlcFRpbWVyID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2V0IHVwIG5vIHNsZWVwIHZpZGVvIGVsZW1lbnRcbiAgICAgIHRoaXMubm9TbGVlcFZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpO1xuXG4gICAgICB0aGlzLm5vU2xlZXBWaWRlby5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBcIk5vIFNsZWVwXCIpO1xuICAgICAgdGhpcy5ub1NsZWVwVmlkZW8uc2V0QXR0cmlidXRlKFwicGxheXNpbmxpbmVcIiwgXCJcIik7XG5cbiAgICAgIHRoaXMuX2FkZFNvdXJjZVRvVmlkZW8odGhpcy5ub1NsZWVwVmlkZW8sIFwid2VibVwiLCB3ZWJtKTtcbiAgICAgIHRoaXMuX2FkZFNvdXJjZVRvVmlkZW8odGhpcy5ub1NsZWVwVmlkZW8sIFwibXA0XCIsIG1wNCk7XG5cbiAgICAgIHRoaXMubm9TbGVlcFZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRtZXRhZGF0YVwiLCAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLm5vU2xlZXBWaWRlby5kdXJhdGlvbiA8PSAxKSB7XG4gICAgICAgICAgLy8gd2VibSBzb3VyY2VcbiAgICAgICAgICB0aGlzLm5vU2xlZXBWaWRlby5zZXRBdHRyaWJ1dGUoXCJsb29wXCIsIFwiXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG1wNCBzb3VyY2VcbiAgICAgICAgICB0aGlzLm5vU2xlZXBWaWRlby5hZGRFdmVudExpc3RlbmVyKFwidGltZXVwZGF0ZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5ub1NsZWVwVmlkZW8uY3VycmVudFRpbWUgPiAwLjUpIHtcbiAgICAgICAgICAgICAgdGhpcy5ub1NsZWVwVmlkZW8uY3VycmVudFRpbWUgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBfYWRkU291cmNlVG9WaWRlbyhlbGVtZW50LCB0eXBlLCBkYXRhVVJJKSB7XG4gICAgdmFyIHNvdXJjZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzb3VyY2VcIik7XG4gICAgc291cmNlLnNyYyA9IGRhdGFVUkk7XG4gICAgc291cmNlLnR5cGUgPSBgdmlkZW8vJHt0eXBlfWA7XG4gICAgZWxlbWVudC5hcHBlbmRDaGlsZChzb3VyY2UpO1xuICB9XG5cbiAgZW5hYmxlKCkge1xuICAgIGlmIChuYXRpdmVXYWtlTG9jaykge1xuICAgICAgbmF2aWdhdG9yLndha2VMb2NrXG4gICAgICAgIC5yZXF1ZXN0KFwic2NyZWVuXCIpXG4gICAgICAgIC50aGVuKCh3YWtlTG9jaykgPT4ge1xuICAgICAgICAgIHRoaXMuX3dha2VMb2NrID0gd2FrZUxvY2s7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJXYWtlIExvY2sgYWN0aXZlLlwiKTtcbiAgICAgICAgICB0aGlzLl93YWtlTG9jay5hZGRFdmVudExpc3RlbmVyKFwicmVsZWFzZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBUb0RvOiBQb3RlbnRpYWxseSBlbWl0IGFuIGV2ZW50IGZvciB0aGUgcGFnZSB0byBvYnNlcnZlIHNpbmNlXG4gICAgICAgICAgICAvLyBXYWtlIExvY2sgcmVsZWFzZXMgaGFwcGVuIHdoZW4gcGFnZSB2aXNpYmlsaXR5IGNoYW5nZXMuXG4gICAgICAgICAgICAvLyAoaHR0cHM6Ly93ZWIuZGV2L3dha2Vsb2NrLyN3YWtlLWxvY2stbGlmZWN5Y2xlKVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJXYWtlIExvY2sgcmVsZWFzZWQuXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYCR7ZXJyLm5hbWV9LCAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKG9sZElPUykge1xuICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgICBjb25zb2xlLndhcm4oYFxuICAgICAgICBOb1NsZWVwIGVuYWJsZWQgZm9yIG9sZGVyIGlPUyBkZXZpY2VzLiBUaGlzIGNhbiBpbnRlcnJ1cHRcbiAgICAgICAgYWN0aXZlIG9yIGxvbmctcnVubmluZyBuZXR3b3JrIHJlcXVlc3RzIGZyb20gY29tcGxldGluZyBzdWNjZXNzZnVsbHkuXG4gICAgICAgIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcmljaHRyL05vU2xlZXAuanMvaXNzdWVzLzE1IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICBgKTtcbiAgICAgIHRoaXMubm9TbGVlcFRpbWVyID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKCFkb2N1bWVudC5oaWRkZW4pIHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KFwiI1wiKVswXTtcbiAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh3aW5kb3cuc3RvcCwgMCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDE1MDAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ub1NsZWVwVmlkZW8ucGxheSgpO1xuICAgIH1cbiAgfVxuXG4gIGRpc2FibGUoKSB7XG4gICAgaWYgKG5hdGl2ZVdha2VMb2NrKSB7XG4gICAgICB0aGlzLl93YWtlTG9jay5yZWxlYXNlKCk7XG4gICAgICB0aGlzLl93YWtlTG9jayA9IG51bGw7XG4gICAgfSBlbHNlIGlmIChvbGRJT1MpIHtcbiAgICAgIGlmICh0aGlzLm5vU2xlZXBUaW1lcikge1xuICAgICAgICBjb25zb2xlLndhcm4oYFxuICAgICAgICAgIE5vU2xlZXAgbm93IGRpc2FibGVkIGZvciBvbGRlciBpT1MgZGV2aWNlcy5cbiAgICAgICAgYCk7XG4gICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMubm9TbGVlcFRpbWVyKTtcbiAgICAgICAgdGhpcy5ub1NsZWVwVGltZXIgPSBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm5vU2xlZXBWaWRlby5wYXVzZSgpO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE5vU2xlZXA7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgd2VibTpcbiAgICBcImRhdGE6dmlkZW8vd2VibTtiYXNlNjQsR2tYZm8wQWdRb2FCQVVMM2dRRkM4b0VFUXZPQkNFS0NRQVIzWldKdFFvZUJBa0tGZ1FJWVU0Qm5RSTBWU2FsbVFDZ3ExN0ZBQXc5Q1FFMkFRQVozYUdGdGJYbFhRVUFHZDJoaGJXMTVSSWxBQ0VDUFFBQUFBQUFBRmxTdWEwQXhya0F1MTRFQlk4V0JBWnlCQUNLMW5FQURkVzVraGtBRlZsOVdVRGdsaG9oQUExWlFPSU9CQWVCQUJyQ0JDTHFCQ0I5RHRuVkFJdWVCQUtOQUhJRUFBSUF3QVFDZEFTb0lBQWdBQVVBbUphUUFBM0FBL3Z6MEFBQT1cIixcbiAgbXA0OlxuICAgIFwiZGF0YTp2aWRlby9tcDQ7YmFzZTY0LEFBQUFJR1owZVhCdGNEUXlBQUFDQUdsemIyMXBjMjh5WVhaak1XMXdOREVBQUFBSVpuSmxaUUFBQ0tCdFpHRjBBQUFDOHdZRi8vL3YzRVhwdmViWlNMZVdMTmdnMlNQdTczZ3lOalFnTFNCamIzSmxJREUwTWlCeU1qUTNPU0JrWkRjNVlUWXhJQzBnU0M0eU5qUXZUVkJGUnkwMElFRldReUJqYjJSbFl5QXRJRU52Y0hsc1pXWjBJREl3TURNdE1qQXhOQ0F0SUdoMGRIQTZMeTkzZDNjdWRtbGtaVzlzWVc0dWIzSm5MM2d5TmpRdWFIUnRiQ0F0SUc5d2RHbHZibk02SUdOaFltRmpQVEVnY21WbVBURWdaR1ZpYkc5amF6MHhPakE2TUNCaGJtRnNlWE5sUFRCNE1Ub3dlREV4TVNCdFpUMW9aWGdnYzNWaWJXVTlNaUJ3YzNrOU1TQndjM2xmY21ROU1TNHdNRG93TGpBd0lHMXBlR1ZrWDNKbFpqMHdJRzFsWDNKaGJtZGxQVEUySUdOb2NtOXRZVjl0WlQweElIUnlaV3hzYVhNOU1DQTRlRGhrWTNROU1DQmpjVzA5TUNCa1pXRmtlbTl1WlQweU1Td3hNU0JtWVhOMFgzQnphMmx3UFRFZ1kyaHliMjFoWDNGd1gyOW1abk5sZEQwd0lIUm9jbVZoWkhNOU5pQnNiMjlyWVdobFlXUmZkR2h5WldGa2N6MHhJSE5zYVdObFpGOTBhSEpsWVdSelBUQWdibkk5TUNCa1pXTnBiV0YwWlQweElHbHVkR1Z5YkdGalpXUTlNQ0JpYkhWeVlYbGZZMjl0Y0dGMFBUQWdZMjl1YzNSeVlXbHVaV1JmYVc1MGNtRTlNQ0JpWm5KaGJXVnpQVE1nWWw5d2VYSmhiV2xrUFRJZ1lsOWhaR0Z3ZEQweElHSmZZbWxoY3owd0lHUnBjbVZqZEQweElIZGxhV2RvZEdJOU1TQnZjR1Z1WDJkdmNEMHdJSGRsYVdkb2RIQTlNU0JyWlhscGJuUTlNekF3SUd0bGVXbHVkRjl0YVc0OU16QWdjMk5sYm1WamRYUTlOREFnYVc1MGNtRmZjbVZtY21WemFEMHdJSEpqWDJ4dmIydGhhR1ZoWkQweE1DQnlZejFqY21ZZ2JXSjBjbVZsUFRFZ1kzSm1QVEl3TGpBZ2NXTnZiWEE5TUM0Mk1DQnhjRzFwYmowd0lIRndiV0Y0UFRZNUlIRndjM1JsY0QwMElIWmlkbDl0WVhoeVlYUmxQVEl3TURBd0lIWmlkbDlpZFdaemFYcGxQVEkxTURBd0lHTnlabDl0WVhnOU1DNHdJRzVoYkY5b2NtUTlibTl1WlNCbWFXeHNaWEk5TUNCcGNGOXlZWFJwYnoweExqUXdJR0Z4UFRFNk1TNHdNQUNBQUFBQU9XV0loQUEzLy9wK0M3djh0RERTVGpmOTd3NTVpM1NiUlBPNFpZK2hrakQ1aGJrQWtMM3pwSjZoL0xSMUNBQUJ6Z0Ixa3FxelVvcmxoUUFBQUF4Qm1pUVlobi8rcVpZQURMZ0FBQUFKUVo1Q1FoWC9BQWo1SVFBRFFHZ2NJUUFEUUdnY0FBQUFDUUdlWVVRbi93QUxLQ0VBQTBCb0hBQUFBQWtCbm1ORUovOEFDeWtoQUFOQWFCd2hBQU5BYUJ3QUFBQU5RWnBvTkV4RFAvNnBsZ0FNdVNFQUEwQm9IQUFBQUF0Qm5vWkZFU3dyL3dBSStTRUFBMEJvSENFQUEwQm9IQUFBQUFrQm5xVkVKLzhBQ3lraEFBTkFhQndBQUFBSkFaNm5SQ2YvQUFzb0lRQURRR2djSVFBRFFHZ2NBQUFBRFVHYXJEUk1Rei8rcVpZQURMZ2hBQU5BYUJ3QUFBQUxRWjdLUlJVc0svOEFDUGtoQUFOQWFCd0FBQUFKQVo3cFJDZi9BQXNvSVFBRFFHZ2NJUUFEUUdnY0FBQUFDUUdlNjBRbi93QUxLQ0VBQTBCb0hBQUFBQTFCbXZBMFRFTS8vcW1XQUF5NUlRQURRR2djSVFBRFFHZ2NBQUFBQzBHZkRrVVZMQ3YvQUFqNUlRQURRR2djQUFBQUNRR2ZMVVFuL3dBTEtTRUFBMEJvSENFQUEwQm9IQUFBQUFrQm55OUVKLzhBQ3lnaEFBTkFhQndBQUFBTlFaczBORXhEUC82cGxnQU11Q0VBQTBCb0hBQUFBQXRCbjFKRkZTd3Ivd0FJK1NFQUEwQm9IQ0VBQTBCb0hBQUFBQWtCbjNGRUovOEFDeWdoQUFOQWFCd0FBQUFKQVo5elJDZi9BQXNvSVFBRFFHZ2NJUUFEUUdnY0FBQUFEVUdiZURSTVF6LytxWllBRExraEFBTkFhQndBQUFBTFFaK1dSUlVzSy84QUNQZ2hBQU5BYUJ3aEFBTkFhQndBQUFBSkFaKzFSQ2YvQUFzcElRQURRR2djQUFBQUNRR2Z0MFFuL3dBTEtTRUFBMEJvSENFQUEwQm9IQUFBQUExQm03dzBURU0vL3FtV0FBeTRJUUFEUUdnY0FBQUFDMEdmMmtVVkxDdi9BQWo1SVFBRFFHZ2NBQUFBQ1FHZitVUW4vd0FMS0NFQUEwQm9IQ0VBQTBCb0hBQUFBQWtCbi90RUovOEFDeWtoQUFOQWFCd0FBQUFOUVp2Z05FeERQLzZwbGdBTXVTRUFBMEJvSENFQUEwQm9IQUFBQUF0Qm5oNUZGU3dyL3dBSStDRUFBMEJvSEFBQUFBa0JuajFFSi84QUN5Z2hBQU5BYUJ3aEFBTkFhQndBQUFBSkFaNC9SQ2YvQUFzcElRQURRR2djQUFBQURVR2FKRFJNUXovK3FaWUFETGdoQUFOQWFCd0FBQUFMUVo1Q1JSVXNLLzhBQ1BraEFBTkFhQndoQUFOQWFCd0FBQUFKQVo1aFJDZi9BQXNvSVFBRFFHZ2NBQUFBQ1FHZVkwUW4vd0FMS1NFQUEwQm9IQ0VBQTBCb0hBQUFBQTFCbW1nMFRFTS8vcW1XQUF5NUlRQURRR2djQUFBQUMwR2Voa1VWTEN2L0FBajVJUUFEUUdnY0lRQURRR2djQUFBQUNRR2VwVVFuL3dBTEtTRUFBMEJvSEFBQUFBa0JucWRFSi84QUN5Z2hBQU5BYUJ3QUFBQU5RWnFzTkV4RFAvNnBsZ0FNdUNFQUEwQm9IQ0VBQTBCb0hBQUFBQXRCbnNwRkZTd3Ivd0FJK1NFQUEwQm9IQUFBQUFrQm51bEVKLzhBQ3lnaEFBTkFhQndoQUFOQWFCd0FBQUFKQVo3clJDZi9BQXNvSVFBRFFHZ2NBQUFBRFVHYThEUk1Rei8rcVpZQURMa2hBQU5BYUJ3aEFBTkFhQndBQUFBTFFaOE9SUlVzSy84QUNQa2hBQU5BYUJ3QUFBQUpBWjh0UkNmL0FBc3BJUUFEUUdnY0lRQURRR2djQUFBQUNRR2ZMMFFuL3dBTEtDRUFBMEJvSEFBQUFBMUJtelEwVEVNLy9xbVdBQXk0SVFBRFFHZ2NBQUFBQzBHZlVrVVZMQ3YvQUFqNUlRQURRR2djSVFBRFFHZ2NBQUFBQ1FHZmNVUW4vd0FMS0NFQUEwQm9IQUFBQUFrQm4zTkVKLzhBQ3lnaEFBTkFhQndoQUFOQWFCd0FBQUFOUVp0NE5FeEMvLzZwbGdBTXVTRUFBMEJvSEFBQUFBdEJuNVpGRlN3ci93QUkrQ0VBQTBCb0hDRUFBMEJvSEFBQUFBa0JuN1ZFSi84QUN5a2hBQU5BYUJ3QUFBQUpBWiszUkNmL0FBc3BJUUFEUUdnY0FBQUFEVUdidXpSTVFuLytuaEFBWXNBaEFBTkFhQndoQUFOQWFCd0FBQUFKUVovYVFoUC9BQXNwSVFBRFFHZ2NBQUFBQ1FHZitVUW4vd0FMS0NFQUEwQm9IQ0VBQTBCb0hDRUFBMEJvSENFQUEwQm9IQ0VBQTBCb0hDRUFBMEJvSEFBQUNpRnRiMjkyQUFBQWJHMTJhR1FBQUFBQTFZQ0NYOVdBZ2w4QUFBUG9BQUFIL0FBQkFBQUJBQUFBQUFBQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUVBQUFBQUFBQUFBQUFBQUFBQUFFQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFEQUFBQUdHbHZaSE1BQUFBQUVJQ0FnQWNBVC8vLy92Ny9BQUFGK1hSeVlXc0FBQUJjZEd0b1pBQUFBQVBWZ0lKZjFZQ0NYd0FBQUFFQUFBQUFBQUFIMEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUVBQUFBQUFBQUFBQUFBQUFBQUFFQUFBQUFBeWdBQUFNb0FBQUFBQUNSbFpIUnpBQUFBSEdWc2MzUUFBQUFBQUFBQUFRQUFCOUFBQUJkd0FBRUFBQUFBQlhGdFpHbGhBQUFBSUcxa2FHUUFBQUFBMVlDQ1g5V0FnbDhBQVYrUUFBSy9JRlhFQUFBQUFBQXRhR1JzY2dBQUFBQUFBQUFBZG1sa1pRQUFBQUFBQUFBQUFBQUFBRlpwWkdWdlNHRnVaR3hsY2dBQUFBVWNiV2x1WmdBQUFCUjJiV2hrQUFBQUFRQUFBQUFBQUFBQUFBQUFKR1JwYm1ZQUFBQWNaSEpsWmdBQUFBQUFBQUFCQUFBQURIVnliQ0FBQUFBQkFBQUUzSE4wWW13QUFBQ1ljM1J6WkFBQUFBQUFBQUFCQUFBQWlHRjJZekVBQUFBQUFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUF5Z0RLQUVnQUFBQklBQUFBQUFBQUFBRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBWS8vOEFBQUF5WVhaalF3Rk5RQ2ovNFFBYlowMUFLT3lobzN5U1RVQkFRRkFBQUFNQUVBQXI4Z0R4Z3hsZ0FRQUVhTytHOGdBQUFCaHpkSFJ6QUFBQUFBQUFBQUVBQUFBOEFBQUx1QUFBQUJSemRITnpBQUFBQUFBQUFBRUFBQUFCQUFBQjhHTjBkSE1BQUFBQUFBQUFQQUFBQUFFQUFCZHdBQUFBQVFBQU9wZ0FBQUFCQUFBWGNBQUFBQUVBQUFBQUFBQUFBUUFBQzdnQUFBQUJBQUE2bUFBQUFBRUFBQmR3QUFBQUFRQUFBQUFBQUFBQkFBQUx1QUFBQUFFQUFEcVlBQUFBQVFBQUYzQUFBQUFCQUFBQUFBQUFBQUVBQUF1NEFBQUFBUUFBT3BnQUFBQUJBQUFYY0FBQUFBRUFBQUFBQUFBQUFRQUFDN2dBQUFBQkFBQTZtQUFBQUFFQUFCZHdBQUFBQVFBQUFBQUFBQUFCQUFBTHVBQUFBQUVBQURxWUFBQUFBUUFBRjNBQUFBQUJBQUFBQUFBQUFBRUFBQXU0QUFBQUFRQUFPcGdBQUFBQkFBQVhjQUFBQUFFQUFBQUFBQUFBQVFBQUM3Z0FBQUFCQUFBNm1BQUFBQUVBQUJkd0FBQUFBUUFBQUFBQUFBQUJBQUFMdUFBQUFBRUFBRHFZQUFBQUFRQUFGM0FBQUFBQkFBQUFBQUFBQUFFQUFBdTRBQUFBQVFBQU9wZ0FBQUFCQUFBWGNBQUFBQUVBQUFBQUFBQUFBUUFBQzdnQUFBQUJBQUE2bUFBQUFBRUFBQmR3QUFBQUFRQUFBQUFBQUFBQkFBQUx1QUFBQUFFQUFEcVlBQUFBQVFBQUYzQUFBQUFCQUFBQUFBQUFBQUVBQUF1NEFBQUFBUUFBT3BnQUFBQUJBQUFYY0FBQUFBRUFBQUFBQUFBQUFRQUFDN2dBQUFBQkFBQTZtQUFBQUFFQUFCZHdBQUFBQVFBQUFBQUFBQUFCQUFBTHVBQUFBQUVBQUM3Z0FBQUFBUUFBRjNBQUFBQUJBQUFBQUFBQUFCeHpkSE5qQUFBQUFBQUFBQUVBQUFBQkFBQUFBUUFBQUFFQUFBRUVjM1J6ZWdBQUFBQUFBQUFBQUFBQVBBQUFBelFBQUFBUUFBQUFEUUFBQUEwQUFBQU5BQUFBRVFBQUFBOEFBQUFOQUFBQURRQUFBQkVBQUFBUEFBQUFEUUFBQUEwQUFBQVJBQUFBRHdBQUFBMEFBQUFOQUFBQUVRQUFBQThBQUFBTkFBQUFEUUFBQUJFQUFBQVBBQUFBRFFBQUFBMEFBQUFSQUFBQUR3QUFBQTBBQUFBTkFBQUFFUUFBQUE4QUFBQU5BQUFBRFFBQUFCRUFBQUFQQUFBQURRQUFBQTBBQUFBUkFBQUFEd0FBQUEwQUFBQU5BQUFBRVFBQUFBOEFBQUFOQUFBQURRQUFBQkVBQUFBUEFBQUFEUUFBQUEwQUFBQVJBQUFBRHdBQUFBMEFBQUFOQUFBQUVRQUFBQThBQUFBTkFBQUFEUUFBQUJFQUFBQU5BQUFBRFFBQUFRQnpkR052QUFBQUFBQUFBRHdBQUFBd0FBQURaQUFBQTNRQUFBT05BQUFEb0FBQUE3a0FBQVBRQUFBRDZ3QUFBLzRBQUFRWEFBQUVMZ0FBQkVNQUFBUmNBQUFFYndBQUJJd0FBQVNoQUFBRXVnQUFCTTBBQUFUa0FBQUUvd0FBQlJJQUFBVXJBQUFGUWdBQUJWMEFBQVZ3QUFBRmlRQUFCYUFBQUFXMUFBQUZ6Z0FBQmVFQUFBWCtBQUFHRXdBQUJpd0FBQVkvQUFBR1ZnQUFCbkVBQUFhRUFBQUduUUFBQnJRQUFBYlBBQUFHNGdBQUJ2VUFBQWNTQUFBSEp3QUFCMEFBQUFkVEFBQUhjQUFBQjRVQUFBZWVBQUFIc1FBQUI4Z0FBQWZqQUFBSDlnQUFDQThBQUFnbUFBQUlRUUFBQ0ZRQUFBaG5BQUFJaEFBQUNKY0FBQU1zZEhKaGF3QUFBRngwYTJoa0FBQUFBOVdBZ2wvVmdJSmZBQUFBQWdBQUFBQUFBQWY4QUFBQUFBQUFBQUFBQUFBQkFRQUFBQUFCQUFBQUFBQUFBQUFBQUFBQUFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFDc20xa2FXRUFBQUFnYldSb1pBQUFBQURWZ0lKZjFZQ0NYd0FBckVRQUFXQUFWY1FBQUFBQUFDZG9aR3h5QUFBQUFBQUFBQUJ6YjNWdUFBQUFBQUFBQUFBQUFBQUFVM1JsY21WdkFBQUFBbU50YVc1bUFBQUFFSE50YUdRQUFBQUFBQUFBQUFBQUFDUmthVzVtQUFBQUhHUnlaV1lBQUFBQUFBQUFBUUFBQUF4MWNtd2dBQUFBQVFBQUFpZHpkR0pzQUFBQVozTjBjMlFBQUFBQUFBQUFBUUFBQUZkdGNEUmhBQUFBQUFBQUFBRUFBQUFBQUFBQUFBQUNBQkFBQUFBQXJFUUFBQUFBQURObGMyUnpBQUFBQUFPQWdJQWlBQUlBQklDQWdCUkFGUUFBQUFBRERVQUFBQUFBQllDQWdBSVNFQWFBZ0lBQkFnQUFBQmh6ZEhSekFBQUFBQUFBQUFFQUFBQllBQUFFQUFBQUFCeHpkSE5qQUFBQUFBQUFBQUVBQUFBQkFBQUFBUUFBQUFFQUFBQVVjM1J6ZWdBQUFBQUFBQUFHQUFBQVdBQUFBWEJ6ZEdOdkFBQUFBQUFBQUZnQUFBT0JBQUFEaHdBQUE1b0FBQU90QUFBRHN3QUFBOG9BQUFQZkFBQUQ1UUFBQS9nQUFBUUxBQUFFRVFBQUJDZ0FBQVE5QUFBRVVBQUFCRllBQUFScEFBQUVnQUFBQklZQUFBU2JBQUFFcmdBQUJMUUFBQVRIQUFBRTNnQUFCUE1BQUFUNUFBQUZEQUFBQlI4QUFBVWxBQUFGUEFBQUJWRUFBQVZYQUFBRmFnQUFCWDBBQUFXREFBQUZtZ0FBQmE4QUFBWENBQUFGeUFBQUJkc0FBQVh5QUFBRitBQUFCZzBBQUFZZ0FBQUdKZ0FBQmprQUFBWlFBQUFHWlFBQUJtc0FBQVorQUFBR2tRQUFCcGNBQUFhdUFBQUd3d0FBQnNrQUFBYmNBQUFHN3dBQUJ3WUFBQWNNQUFBSElRQUFCelFBQUFjNkFBQUhUUUFBQjJRQUFBZHFBQUFIZndBQUI1SUFBQWVZQUFBSHF3QUFCOElBQUFmWEFBQUgzUUFBQi9BQUFBZ0RBQUFJQ1FBQUNDQUFBQWcxQUFBSU93QUFDRTRBQUFoaEFBQUllQUFBQ0g0QUFBaVJBQUFJcEFBQUNLb0FBQWl3QUFBSXRnQUFDTHdBQUFqQ0FBQUFGblZrZEdFQUFBQU9ibUZ0WlZOMFpYSmxid0FBQUhCMVpIUmhBQUFBYUcxbGRHRUFBQUFBQUFBQUlXaGtiSElBQUFBQUFBQUFBRzFrYVhKaGNIQnNBQUFBQUFBQUFBQUFBQUFBTzJsc2MzUUFBQUF6cVhSdmJ3QUFBQ3RrWVhSaEFBQUFBUUFBQUFCSVlXNWtRbkpoYTJVZ01DNHhNQzR5SURJd01UVXdOakV4TURBPVwiLFxufTtcbiIsIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuIC8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU0RQVXRpbHMgPSByZXF1aXJlKCdzZHAnKTtcblxuZnVuY3Rpb24gZml4U3RhdHNUeXBlKHN0YXQpIHtcbiAgcmV0dXJuIHtcbiAgICBpbmJvdW5kcnRwOiAnaW5ib3VuZC1ydHAnLFxuICAgIG91dGJvdW5kcnRwOiAnb3V0Ym91bmQtcnRwJyxcbiAgICBjYW5kaWRhdGVwYWlyOiAnY2FuZGlkYXRlLXBhaXInLFxuICAgIGxvY2FsY2FuZGlkYXRlOiAnbG9jYWwtY2FuZGlkYXRlJyxcbiAgICByZW1vdGVjYW5kaWRhdGU6ICdyZW1vdGUtY2FuZGlkYXRlJ1xuICB9W3N0YXQudHlwZV0gfHwgc3RhdC50eXBlO1xufVxuXG5mdW5jdGlvbiB3cml0ZU1lZGlhU2VjdGlvbih0cmFuc2NlaXZlciwgY2FwcywgdHlwZSwgc3RyZWFtLCBkdGxzUm9sZSkge1xuICB2YXIgc2RwID0gU0RQVXRpbHMud3JpdGVSdHBEZXNjcmlwdGlvbih0cmFuc2NlaXZlci5raW5kLCBjYXBzKTtcblxuICAvLyBNYXAgSUNFIHBhcmFtZXRlcnMgKHVmcmFnLCBwd2QpIHRvIFNEUC5cbiAgc2RwICs9IFNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycyhcbiAgICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLmdldExvY2FsUGFyYW1ldGVycygpKTtcblxuICAvLyBNYXAgRFRMUyBwYXJhbWV0ZXJzIHRvIFNEUC5cbiAgc2RwICs9IFNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnMoXG4gICAgICB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0LmdldExvY2FsUGFyYW1ldGVycygpLFxuICAgICAgdHlwZSA9PT0gJ29mZmVyJyA/ICdhY3RwYXNzJyA6IGR0bHNSb2xlIHx8ICdhY3RpdmUnKTtcblxuICBzZHAgKz0gJ2E9bWlkOicgKyB0cmFuc2NlaXZlci5taWQgKyAnXFxyXFxuJztcblxuICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyICYmIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7XG4gICAgc2RwICs9ICdhPXNlbmRyZWN2XFxyXFxuJztcbiAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHtcbiAgICBzZHAgKz0gJ2E9c2VuZG9ubHlcXHJcXG4nO1xuICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7XG4gICAgc2RwICs9ICdhPXJlY3Zvbmx5XFxyXFxuJztcbiAgfSBlbHNlIHtcbiAgICBzZHAgKz0gJ2E9aW5hY3RpdmVcXHJcXG4nO1xuICB9XG5cbiAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikge1xuICAgIHZhciB0cmFja0lkID0gdHJhbnNjZWl2ZXIucnRwU2VuZGVyLl9pbml0aWFsVHJhY2tJZCB8fFxuICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIudHJhY2suaWQ7XG4gICAgdHJhbnNjZWl2ZXIucnRwU2VuZGVyLl9pbml0aWFsVHJhY2tJZCA9IHRyYWNrSWQ7XG4gICAgLy8gc3BlYy5cbiAgICB2YXIgbXNpZCA9ICdtc2lkOicgKyAoc3RyZWFtID8gc3RyZWFtLmlkIDogJy0nKSArICcgJyArXG4gICAgICAgIHRyYWNrSWQgKyAnXFxyXFxuJztcbiAgICBzZHAgKz0gJ2E9JyArIG1zaWQ7XG4gICAgLy8gZm9yIENocm9tZS4gTGVnYWN5IHNob3VsZCBubyBsb25nZXIgYmUgcmVxdWlyZWQuXG4gICAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArXG4gICAgICAgICcgJyArIG1zaWQ7XG5cbiAgICAvLyBSVFhcbiAgICBpZiAodHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgpIHtcbiAgICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjICtcbiAgICAgICAgICAnICcgKyBtc2lkO1xuICAgICAgc2RwICs9ICdhPXNzcmMtZ3JvdXA6RklEICcgK1xuICAgICAgICAgIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArICcgJyArXG4gICAgICAgICAgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYyArXG4gICAgICAgICAgJ1xcclxcbic7XG4gICAgfVxuICB9XG4gIC8vIEZJWE1FOiB0aGlzIHNob3VsZCBiZSB3cml0dGVuIGJ5IHdyaXRlUnRwRGVzY3JpcHRpb24uXG4gIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgK1xuICAgICAgJyBjbmFtZTonICsgU0RQVXRpbHMubG9jYWxDTmFtZSArICdcXHJcXG4nO1xuICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyICYmIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4KSB7XG4gICAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMgK1xuICAgICAgICAnIGNuYW1lOicgKyBTRFBVdGlscy5sb2NhbENOYW1lICsgJ1xcclxcbic7XG4gIH1cbiAgcmV0dXJuIHNkcDtcbn1cblxuLy8gRWRnZSBkb2VzIG5vdCBsaWtlXG4vLyAxKSBzdHVuOiBmaWx0ZXJlZCBhZnRlciAxNDM5MyB1bmxlc3MgP3RyYW5zcG9ydD11ZHAgaXMgcHJlc2VudFxuLy8gMikgdHVybjogdGhhdCBkb2VzIG5vdCBoYXZlIGFsbCBvZiB0dXJuOmhvc3Q6cG9ydD90cmFuc3BvcnQ9dWRwXG4vLyAzKSB0dXJuOiB3aXRoIGlwdjYgYWRkcmVzc2VzXG4vLyA0KSB0dXJuOiBvY2N1cnJpbmcgbXVsaXBsZSB0aW1lc1xuZnVuY3Rpb24gZmlsdGVySWNlU2VydmVycyhpY2VTZXJ2ZXJzLCBlZGdlVmVyc2lvbikge1xuICB2YXIgaGFzVHVybiA9IGZhbHNlO1xuICBpY2VTZXJ2ZXJzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShpY2VTZXJ2ZXJzKSk7XG4gIHJldHVybiBpY2VTZXJ2ZXJzLmZpbHRlcihmdW5jdGlvbihzZXJ2ZXIpIHtcbiAgICBpZiAoc2VydmVyICYmIChzZXJ2ZXIudXJscyB8fCBzZXJ2ZXIudXJsKSkge1xuICAgICAgdmFyIHVybHMgPSBzZXJ2ZXIudXJscyB8fCBzZXJ2ZXIudXJsO1xuICAgICAgaWYgKHNlcnZlci51cmwgJiYgIXNlcnZlci51cmxzKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignUlRDSWNlU2VydmVyLnVybCBpcyBkZXByZWNhdGVkISBVc2UgdXJscyBpbnN0ZWFkLicpO1xuICAgICAgfVxuICAgICAgdmFyIGlzU3RyaW5nID0gdHlwZW9mIHVybHMgPT09ICdzdHJpbmcnO1xuICAgICAgaWYgKGlzU3RyaW5nKSB7XG4gICAgICAgIHVybHMgPSBbdXJsc107XG4gICAgICB9XG4gICAgICB1cmxzID0gdXJscy5maWx0ZXIoZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIHZhciB2YWxpZFR1cm4gPSB1cmwuaW5kZXhPZigndHVybjonKSA9PT0gMCAmJlxuICAgICAgICAgICAgdXJsLmluZGV4T2YoJ3RyYW5zcG9ydD11ZHAnKSAhPT0gLTEgJiZcbiAgICAgICAgICAgIHVybC5pbmRleE9mKCd0dXJuOlsnKSA9PT0gLTEgJiZcbiAgICAgICAgICAgICFoYXNUdXJuO1xuXG4gICAgICAgIGlmICh2YWxpZFR1cm4pIHtcbiAgICAgICAgICBoYXNUdXJuID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJsLmluZGV4T2YoJ3N0dW46JykgPT09IDAgJiYgZWRnZVZlcnNpb24gPj0gMTQzOTMgJiZcbiAgICAgICAgICAgIHVybC5pbmRleE9mKCc/dHJhbnNwb3J0PXVkcCcpID09PSAtMTtcbiAgICAgIH0pO1xuXG4gICAgICBkZWxldGUgc2VydmVyLnVybDtcbiAgICAgIHNlcnZlci51cmxzID0gaXNTdHJpbmcgPyB1cmxzWzBdIDogdXJscztcbiAgICAgIHJldHVybiAhIXVybHMubGVuZ3RoO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIERldGVybWluZXMgdGhlIGludGVyc2VjdGlvbiBvZiBsb2NhbCBhbmQgcmVtb3RlIGNhcGFiaWxpdGllcy5cbmZ1bmN0aW9uIGdldENvbW1vbkNhcGFiaWxpdGllcyhsb2NhbENhcGFiaWxpdGllcywgcmVtb3RlQ2FwYWJpbGl0aWVzKSB7XG4gIHZhciBjb21tb25DYXBhYmlsaXRpZXMgPSB7XG4gICAgY29kZWNzOiBbXSxcbiAgICBoZWFkZXJFeHRlbnNpb25zOiBbXSxcbiAgICBmZWNNZWNoYW5pc21zOiBbXVxuICB9O1xuXG4gIHZhciBmaW5kQ29kZWNCeVBheWxvYWRUeXBlID0gZnVuY3Rpb24ocHQsIGNvZGVjcykge1xuICAgIHB0ID0gcGFyc2VJbnQocHQsIDEwKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvZGVjcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGNvZGVjc1tpXS5wYXlsb2FkVHlwZSA9PT0gcHQgfHxcbiAgICAgICAgICBjb2RlY3NbaV0ucHJlZmVycmVkUGF5bG9hZFR5cGUgPT09IHB0KSB7XG4gICAgICAgIHJldHVybiBjb2RlY3NbaV07XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhciBydHhDYXBhYmlsaXR5TWF0Y2hlcyA9IGZ1bmN0aW9uKGxSdHgsIHJSdHgsIGxDb2RlY3MsIHJDb2RlY3MpIHtcbiAgICB2YXIgbENvZGVjID0gZmluZENvZGVjQnlQYXlsb2FkVHlwZShsUnR4LnBhcmFtZXRlcnMuYXB0LCBsQ29kZWNzKTtcbiAgICB2YXIgckNvZGVjID0gZmluZENvZGVjQnlQYXlsb2FkVHlwZShyUnR4LnBhcmFtZXRlcnMuYXB0LCByQ29kZWNzKTtcbiAgICByZXR1cm4gbENvZGVjICYmIHJDb2RlYyAmJlxuICAgICAgICBsQ29kZWMubmFtZS50b0xvd2VyQ2FzZSgpID09PSByQ29kZWMubmFtZS50b0xvd2VyQ2FzZSgpO1xuICB9O1xuXG4gIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGxDb2RlYykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVtb3RlQ2FwYWJpbGl0aWVzLmNvZGVjcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHJDb2RlYyA9IHJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3NbaV07XG4gICAgICBpZiAobENvZGVjLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gckNvZGVjLm5hbWUudG9Mb3dlckNhc2UoKSAmJlxuICAgICAgICAgIGxDb2RlYy5jbG9ja1JhdGUgPT09IHJDb2RlYy5jbG9ja1JhdGUpIHtcbiAgICAgICAgaWYgKGxDb2RlYy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdydHgnICYmXG4gICAgICAgICAgICBsQ29kZWMucGFyYW1ldGVycyAmJiByQ29kZWMucGFyYW1ldGVycy5hcHQpIHtcbiAgICAgICAgICAvLyBmb3IgUlRYIHdlIG5lZWQgdG8gZmluZCB0aGUgbG9jYWwgcnR4IHRoYXQgaGFzIGEgYXB0XG4gICAgICAgICAgLy8gd2hpY2ggcG9pbnRzIHRvIHRoZSBzYW1lIGxvY2FsIGNvZGVjIGFzIHRoZSByZW1vdGUgb25lLlxuICAgICAgICAgIGlmICghcnR4Q2FwYWJpbGl0eU1hdGNoZXMobENvZGVjLCByQ29kZWMsXG4gICAgICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcywgcmVtb3RlQ2FwYWJpbGl0aWVzLmNvZGVjcykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByQ29kZWMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJDb2RlYykpOyAvLyBkZWVwY29weVxuICAgICAgICAvLyBudW1iZXIgb2YgY2hhbm5lbHMgaXMgdGhlIGhpZ2hlc3QgY29tbW9uIG51bWJlciBvZiBjaGFubmVsc1xuICAgICAgICByQ29kZWMubnVtQ2hhbm5lbHMgPSBNYXRoLm1pbihsQ29kZWMubnVtQ2hhbm5lbHMsXG4gICAgICAgICAgICByQ29kZWMubnVtQ2hhbm5lbHMpO1xuICAgICAgICAvLyBwdXNoIHJDb2RlYyBzbyB3ZSByZXBseSB3aXRoIG9mZmVyZXIgcGF5bG9hZCB0eXBlXG4gICAgICAgIGNvbW1vbkNhcGFiaWxpdGllcy5jb2RlY3MucHVzaChyQ29kZWMpO1xuXG4gICAgICAgIC8vIGRldGVybWluZSBjb21tb24gZmVlZGJhY2sgbWVjaGFuaXNtc1xuICAgICAgICByQ29kZWMucnRjcEZlZWRiYWNrID0gckNvZGVjLnJ0Y3BGZWVkYmFjay5maWx0ZXIoZnVuY3Rpb24oZmIpIHtcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxDb2RlYy5ydGNwRmVlZGJhY2subGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGlmIChsQ29kZWMucnRjcEZlZWRiYWNrW2pdLnR5cGUgPT09IGZiLnR5cGUgJiZcbiAgICAgICAgICAgICAgICBsQ29kZWMucnRjcEZlZWRiYWNrW2pdLnBhcmFtZXRlciA9PT0gZmIucGFyYW1ldGVyKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBGSVhNRTogYWxzbyBuZWVkIHRvIGRldGVybWluZSAucGFyYW1ldGVyc1xuICAgICAgICAvLyAgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVucGVlci9vcnRjL2lzc3Vlcy81NjlcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBsb2NhbENhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24obEhlYWRlckV4dGVuc2lvbikge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVtb3RlQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMubGVuZ3RoO1xuICAgICAgICAgaSsrKSB7XG4gICAgICB2YXIgckhlYWRlckV4dGVuc2lvbiA9IHJlbW90ZUNhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zW2ldO1xuICAgICAgaWYgKGxIZWFkZXJFeHRlbnNpb24udXJpID09PSBySGVhZGVyRXh0ZW5zaW9uLnVyaSkge1xuICAgICAgICBjb21tb25DYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9ucy5wdXNoKHJIZWFkZXJFeHRlbnNpb24pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8vIEZJWE1FOiBmZWNNZWNoYW5pc21zXG4gIHJldHVybiBjb21tb25DYXBhYmlsaXRpZXM7XG59XG5cbi8vIGlzIGFjdGlvbj1zZXRMb2NhbERlc2NyaXB0aW9uIHdpdGggdHlwZSBhbGxvd2VkIGluIHNpZ25hbGluZ1N0YXRlXG5mdW5jdGlvbiBpc0FjdGlvbkFsbG93ZWRJblNpZ25hbGluZ1N0YXRlKGFjdGlvbiwgdHlwZSwgc2lnbmFsaW5nU3RhdGUpIHtcbiAgcmV0dXJuIHtcbiAgICBvZmZlcjoge1xuICAgICAgc2V0TG9jYWxEZXNjcmlwdGlvbjogWydzdGFibGUnLCAnaGF2ZS1sb2NhbC1vZmZlciddLFxuICAgICAgc2V0UmVtb3RlRGVzY3JpcHRpb246IFsnc3RhYmxlJywgJ2hhdmUtcmVtb3RlLW9mZmVyJ11cbiAgICB9LFxuICAgIGFuc3dlcjoge1xuICAgICAgc2V0TG9jYWxEZXNjcmlwdGlvbjogWydoYXZlLXJlbW90ZS1vZmZlcicsICdoYXZlLWxvY2FsLXByYW5zd2VyJ10sXG4gICAgICBzZXRSZW1vdGVEZXNjcmlwdGlvbjogWydoYXZlLWxvY2FsLW9mZmVyJywgJ2hhdmUtcmVtb3RlLXByYW5zd2VyJ11cbiAgICB9XG4gIH1bdHlwZV1bYWN0aW9uXS5pbmRleE9mKHNpZ25hbGluZ1N0YXRlKSAhPT0gLTE7XG59XG5cbmZ1bmN0aW9uIG1heWJlQWRkQ2FuZGlkYXRlKGljZVRyYW5zcG9ydCwgY2FuZGlkYXRlKSB7XG4gIC8vIEVkZ2UncyBpbnRlcm5hbCByZXByZXNlbnRhdGlvbiBhZGRzIHNvbWUgZmllbGRzIHRoZXJlZm9yZVxuICAvLyBub3QgYWxsIGZpZWxk0ZUgYXJlIHRha2VuIGludG8gYWNjb3VudC5cbiAgdmFyIGFscmVhZHlBZGRlZCA9IGljZVRyYW5zcG9ydC5nZXRSZW1vdGVDYW5kaWRhdGVzKClcbiAgICAgIC5maW5kKGZ1bmN0aW9uKHJlbW90ZUNhbmRpZGF0ZSkge1xuICAgICAgICByZXR1cm4gY2FuZGlkYXRlLmZvdW5kYXRpb24gPT09IHJlbW90ZUNhbmRpZGF0ZS5mb3VuZGF0aW9uICYmXG4gICAgICAgICAgICBjYW5kaWRhdGUuaXAgPT09IHJlbW90ZUNhbmRpZGF0ZS5pcCAmJlxuICAgICAgICAgICAgY2FuZGlkYXRlLnBvcnQgPT09IHJlbW90ZUNhbmRpZGF0ZS5wb3J0ICYmXG4gICAgICAgICAgICBjYW5kaWRhdGUucHJpb3JpdHkgPT09IHJlbW90ZUNhbmRpZGF0ZS5wcmlvcml0eSAmJlxuICAgICAgICAgICAgY2FuZGlkYXRlLnByb3RvY29sID09PSByZW1vdGVDYW5kaWRhdGUucHJvdG9jb2wgJiZcbiAgICAgICAgICAgIGNhbmRpZGF0ZS50eXBlID09PSByZW1vdGVDYW5kaWRhdGUudHlwZTtcbiAgICAgIH0pO1xuICBpZiAoIWFscmVhZHlBZGRlZCkge1xuICAgIGljZVRyYW5zcG9ydC5hZGRSZW1vdGVDYW5kaWRhdGUoY2FuZGlkYXRlKTtcbiAgfVxuICByZXR1cm4gIWFscmVhZHlBZGRlZDtcbn1cblxuXG5mdW5jdGlvbiBtYWtlRXJyb3IobmFtZSwgZGVzY3JpcHRpb24pIHtcbiAgdmFyIGUgPSBuZXcgRXJyb3IoZGVzY3JpcHRpb24pO1xuICBlLm5hbWUgPSBuYW1lO1xuICAvLyBsZWdhY3kgZXJyb3IgY29kZXMgZnJvbSBodHRwczovL2hleWNhbS5naXRodWIuaW8vd2ViaWRsLyNpZGwtRE9NRXhjZXB0aW9uLWVycm9yLW5hbWVzXG4gIGUuY29kZSA9IHtcbiAgICBOb3RTdXBwb3J0ZWRFcnJvcjogOSxcbiAgICBJbnZhbGlkU3RhdGVFcnJvcjogMTEsXG4gICAgSW52YWxpZEFjY2Vzc0Vycm9yOiAxNSxcbiAgICBUeXBlRXJyb3I6IHVuZGVmaW5lZCxcbiAgICBPcGVyYXRpb25FcnJvcjogdW5kZWZpbmVkXG4gIH1bbmFtZV07XG4gIHJldHVybiBlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHdpbmRvdywgZWRnZVZlcnNpb24pIHtcbiAgLy8gaHR0cHM6Ly93M2MuZ2l0aHViLmlvL21lZGlhY2FwdHVyZS1tYWluLyNtZWRpYXN0cmVhbVxuICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gYWRkIHRoZSB0cmFjayB0byB0aGUgc3RyZWFtIGFuZFxuICAvLyBkaXNwYXRjaCB0aGUgZXZlbnQgb3Vyc2VsdmVzLlxuICBmdW5jdGlvbiBhZGRUcmFja1RvU3RyZWFtQW5kRmlyZUV2ZW50KHRyYWNrLCBzdHJlYW0pIHtcbiAgICBzdHJlYW0uYWRkVHJhY2sodHJhY2spO1xuICAgIHN0cmVhbS5kaXNwYXRjaEV2ZW50KG5ldyB3aW5kb3cuTWVkaWFTdHJlYW1UcmFja0V2ZW50KCdhZGR0cmFjaycsXG4gICAgICAgIHt0cmFjazogdHJhY2t9KSk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVUcmFja0Zyb21TdHJlYW1BbmRGaXJlRXZlbnQodHJhY2ssIHN0cmVhbSkge1xuICAgIHN0cmVhbS5yZW1vdmVUcmFjayh0cmFjayk7XG4gICAgc3RyZWFtLmRpc3BhdGNoRXZlbnQobmV3IHdpbmRvdy5NZWRpYVN0cmVhbVRyYWNrRXZlbnQoJ3JlbW92ZXRyYWNrJyxcbiAgICAgICAge3RyYWNrOiB0cmFja30pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpcmVBZGRUcmFjayhwYywgdHJhY2ssIHJlY2VpdmVyLCBzdHJlYW1zKSB7XG4gICAgdmFyIHRyYWNrRXZlbnQgPSBuZXcgRXZlbnQoJ3RyYWNrJyk7XG4gICAgdHJhY2tFdmVudC50cmFjayA9IHRyYWNrO1xuICAgIHRyYWNrRXZlbnQucmVjZWl2ZXIgPSByZWNlaXZlcjtcbiAgICB0cmFja0V2ZW50LnRyYW5zY2VpdmVyID0ge3JlY2VpdmVyOiByZWNlaXZlcn07XG4gICAgdHJhY2tFdmVudC5zdHJlYW1zID0gc3RyZWFtcztcbiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHBjLl9kaXNwYXRjaEV2ZW50KCd0cmFjaycsIHRyYWNrRXZlbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIFJUQ1BlZXJDb25uZWN0aW9uID0gZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgdmFyIHBjID0gdGhpcztcblxuICAgIHZhciBfZXZlbnRUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgWydhZGRFdmVudExpc3RlbmVyJywgJ3JlbW92ZUV2ZW50TGlzdGVuZXInLCAnZGlzcGF0Y2hFdmVudCddXG4gICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgICAgIHBjW21ldGhvZF0gPSBfZXZlbnRUYXJnZXRbbWV0aG9kXS5iaW5kKF9ldmVudFRhcmdldCk7XG4gICAgICAgIH0pO1xuXG4gICAgdGhpcy5jYW5Ucmlja2xlSWNlQ2FuZGlkYXRlcyA9IG51bGw7XG5cbiAgICB0aGlzLm5lZWROZWdvdGlhdGlvbiA9IGZhbHNlO1xuXG4gICAgdGhpcy5sb2NhbFN0cmVhbXMgPSBbXTtcbiAgICB0aGlzLnJlbW90ZVN0cmVhbXMgPSBbXTtcblxuICAgIHRoaXMuX2xvY2FsRGVzY3JpcHRpb24gPSBudWxsO1xuICAgIHRoaXMuX3JlbW90ZURlc2NyaXB0aW9uID0gbnVsbDtcblxuICAgIHRoaXMuc2lnbmFsaW5nU3RhdGUgPSAnc3RhYmxlJztcbiAgICB0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSA9ICduZXcnO1xuICAgIHRoaXMuY29ubmVjdGlvblN0YXRlID0gJ25ldyc7XG4gICAgdGhpcy5pY2VHYXRoZXJpbmdTdGF0ZSA9ICduZXcnO1xuXG4gICAgY29uZmlnID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25maWcgfHwge30pKTtcblxuICAgIHRoaXMudXNpbmdCdW5kbGUgPSBjb25maWcuYnVuZGxlUG9saWN5ID09PSAnbWF4LWJ1bmRsZSc7XG4gICAgaWYgKGNvbmZpZy5ydGNwTXV4UG9saWN5ID09PSAnbmVnb3RpYXRlJykge1xuICAgICAgdGhyb3cobWFrZUVycm9yKCdOb3RTdXBwb3J0ZWRFcnJvcicsXG4gICAgICAgICAgJ3J0Y3BNdXhQb2xpY3kgXFwnbmVnb3RpYXRlXFwnIGlzIG5vdCBzdXBwb3J0ZWQnKSk7XG4gICAgfSBlbHNlIGlmICghY29uZmlnLnJ0Y3BNdXhQb2xpY3kpIHtcbiAgICAgIGNvbmZpZy5ydGNwTXV4UG9saWN5ID0gJ3JlcXVpcmUnO1xuICAgIH1cblxuICAgIHN3aXRjaCAoY29uZmlnLmljZVRyYW5zcG9ydFBvbGljeSkge1xuICAgICAgY2FzZSAnYWxsJzpcbiAgICAgIGNhc2UgJ3JlbGF5JzpcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb25maWcuaWNlVHJhbnNwb3J0UG9saWN5ID0gJ2FsbCc7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHN3aXRjaCAoY29uZmlnLmJ1bmRsZVBvbGljeSkge1xuICAgICAgY2FzZSAnYmFsYW5jZWQnOlxuICAgICAgY2FzZSAnbWF4LWNvbXBhdCc6XG4gICAgICBjYXNlICdtYXgtYnVuZGxlJzpcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb25maWcuYnVuZGxlUG9saWN5ID0gJ2JhbGFuY2VkJztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY29uZmlnLmljZVNlcnZlcnMgPSBmaWx0ZXJJY2VTZXJ2ZXJzKGNvbmZpZy5pY2VTZXJ2ZXJzIHx8IFtdLCBlZGdlVmVyc2lvbik7XG5cbiAgICB0aGlzLl9pY2VHYXRoZXJlcnMgPSBbXTtcbiAgICBpZiAoY29uZmlnLmljZUNhbmRpZGF0ZVBvb2xTaXplKSB7XG4gICAgICBmb3IgKHZhciBpID0gY29uZmlnLmljZUNhbmRpZGF0ZVBvb2xTaXplOyBpID4gMDsgaS0tKSB7XG4gICAgICAgIHRoaXMuX2ljZUdhdGhlcmVycy5wdXNoKG5ldyB3aW5kb3cuUlRDSWNlR2F0aGVyZXIoe1xuICAgICAgICAgIGljZVNlcnZlcnM6IGNvbmZpZy5pY2VTZXJ2ZXJzLFxuICAgICAgICAgIGdhdGhlclBvbGljeTogY29uZmlnLmljZVRyYW5zcG9ydFBvbGljeVxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbmZpZy5pY2VDYW5kaWRhdGVQb29sU2l6ZSA9IDA7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuXG4gICAgLy8gcGVyLXRyYWNrIGljZUdhdGhlcnMsIGljZVRyYW5zcG9ydHMsIGR0bHNUcmFuc3BvcnRzLCBydHBTZW5kZXJzLCAuLi5cbiAgICAvLyBldmVyeXRoaW5nIHRoYXQgaXMgbmVlZGVkIHRvIGRlc2NyaWJlIGEgU0RQIG0tbGluZS5cbiAgICB0aGlzLnRyYW5zY2VpdmVycyA9IFtdO1xuXG4gICAgdGhpcy5fc2RwU2Vzc2lvbklkID0gU0RQVXRpbHMuZ2VuZXJhdGVTZXNzaW9uSWQoKTtcbiAgICB0aGlzLl9zZHBTZXNzaW9uVmVyc2lvbiA9IDA7XG5cbiAgICB0aGlzLl9kdGxzUm9sZSA9IHVuZGVmaW5lZDsgLy8gcm9sZSBmb3IgYT1zZXR1cCB0byB1c2UgaW4gYW5zd2Vycy5cblxuICAgIHRoaXMuX2lzQ2xvc2VkID0gZmFsc2U7XG4gIH07XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSwgJ2xvY2FsRGVzY3JpcHRpb24nLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbG9jYWxEZXNjcmlwdGlvbjtcbiAgICB9XG4gIH0pO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLCAncmVtb3RlRGVzY3JpcHRpb24nLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVtb3RlRGVzY3JpcHRpb247XG4gICAgfVxuICB9KTtcblxuICAvLyBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgb24gcHJvdG90eXBlXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbmljZWNhbmRpZGF0ZSA9IG51bGw7XG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbmFkZHN0cmVhbSA9IG51bGw7XG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbnRyYWNrID0gbnVsbDtcbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLm9ucmVtb3Zlc3RyZWFtID0gbnVsbDtcbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UgPSBudWxsO1xuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBudWxsO1xuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUub25jb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBudWxsO1xuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZSA9IG51bGw7XG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbm5lZ290aWF0aW9ubmVlZGVkID0gbnVsbDtcbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLm9uZGF0YWNoYW5uZWwgPSBudWxsO1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uKG5hbWUsIGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuX2lzQ2xvc2VkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgaWYgKHR5cGVvZiB0aGlzWydvbicgKyBuYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpc1snb24nICsgbmFtZV0oZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2VtaXRHYXRoZXJpbmdTdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2UnKTtcbiAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KCdpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZScsIGV2ZW50KTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9jb25maWc7XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmxvY2FsU3RyZWFtcztcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVtb3RlU3RyZWFtcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJlbW90ZVN0cmVhbXM7XG4gIH07XG5cbiAgLy8gaW50ZXJuYWwgaGVscGVyIHRvIGNyZWF0ZSBhIHRyYW5zY2VpdmVyIG9iamVjdC5cbiAgLy8gKHdoaWNoIGlzIG5vdCB5ZXQgdGhlIHNhbWUgYXMgdGhlIFdlYlJUQyAxLjAgdHJhbnNjZWl2ZXIpXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fY3JlYXRlVHJhbnNjZWl2ZXIgPSBmdW5jdGlvbihraW5kLCBkb05vdEFkZCkge1xuICAgIHZhciBoYXNCdW5kbGVUcmFuc3BvcnQgPSB0aGlzLnRyYW5zY2VpdmVycy5sZW5ndGggPiAwO1xuICAgIHZhciB0cmFuc2NlaXZlciA9IHtcbiAgICAgIHRyYWNrOiBudWxsLFxuICAgICAgaWNlR2F0aGVyZXI6IG51bGwsXG4gICAgICBpY2VUcmFuc3BvcnQ6IG51bGwsXG4gICAgICBkdGxzVHJhbnNwb3J0OiBudWxsLFxuICAgICAgbG9jYWxDYXBhYmlsaXRpZXM6IG51bGwsXG4gICAgICByZW1vdGVDYXBhYmlsaXRpZXM6IG51bGwsXG4gICAgICBydHBTZW5kZXI6IG51bGwsXG4gICAgICBydHBSZWNlaXZlcjogbnVsbCxcbiAgICAgIGtpbmQ6IGtpbmQsXG4gICAgICBtaWQ6IG51bGwsXG4gICAgICBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzOiBudWxsLFxuICAgICAgcmVjdkVuY29kaW5nUGFyYW1ldGVyczogbnVsbCxcbiAgICAgIHN0cmVhbTogbnVsbCxcbiAgICAgIGFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXM6IFtdLFxuICAgICAgd2FudFJlY2VpdmU6IHRydWVcbiAgICB9O1xuICAgIGlmICh0aGlzLnVzaW5nQnVuZGxlICYmIGhhc0J1bmRsZVRyYW5zcG9ydCkge1xuICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0ID0gdGhpcy50cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0O1xuICAgICAgdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydCA9IHRoaXMudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB0cmFuc3BvcnRzID0gdGhpcy5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHMoKTtcbiAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCA9IHRyYW5zcG9ydHMuaWNlVHJhbnNwb3J0O1xuICAgICAgdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydCA9IHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydDtcbiAgICB9XG4gICAgaWYgKCFkb05vdEFkZCkge1xuICAgICAgdGhpcy50cmFuc2NlaXZlcnMucHVzaCh0cmFuc2NlaXZlcik7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2NlaXZlcjtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPSBmdW5jdGlvbih0cmFjaywgc3RyZWFtKSB7XG4gICAgaWYgKHRoaXMuX2lzQ2xvc2VkKSB7XG4gICAgICB0aHJvdyBtYWtlRXJyb3IoJ0ludmFsaWRTdGF0ZUVycm9yJyxcbiAgICAgICAgICAnQXR0ZW1wdGVkIHRvIGNhbGwgYWRkVHJhY2sgb24gYSBjbG9zZWQgcGVlcmNvbm5lY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlFeGlzdHMgPSB0aGlzLnRyYW5zY2VpdmVycy5maW5kKGZ1bmN0aW9uKHMpIHtcbiAgICAgIHJldHVybiBzLnRyYWNrID09PSB0cmFjaztcbiAgICB9KTtcblxuICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7XG4gICAgICB0aHJvdyBtYWtlRXJyb3IoJ0ludmFsaWRBY2Nlc3NFcnJvcicsICdUcmFjayBhbHJlYWR5IGV4aXN0cy4nKTtcbiAgICB9XG5cbiAgICB2YXIgdHJhbnNjZWl2ZXI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYW5zY2VpdmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCF0aGlzLnRyYW5zY2VpdmVyc1tpXS50cmFjayAmJlxuICAgICAgICAgIHRoaXMudHJhbnNjZWl2ZXJzW2ldLmtpbmQgPT09IHRyYWNrLmtpbmQpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIgPSB0aGlzLnRyYW5zY2VpdmVyc1tpXTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0cmFuc2NlaXZlcikge1xuICAgICAgdHJhbnNjZWl2ZXIgPSB0aGlzLl9jcmVhdGVUcmFuc2NlaXZlcih0cmFjay5raW5kKTtcbiAgICB9XG5cbiAgICB0aGlzLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCgpO1xuXG4gICAgaWYgKHRoaXMubG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKSA9PT0gLTEpIHtcbiAgICAgIHRoaXMubG9jYWxTdHJlYW1zLnB1c2goc3RyZWFtKTtcbiAgICB9XG5cbiAgICB0cmFuc2NlaXZlci50cmFjayA9IHRyYWNrO1xuICAgIHRyYW5zY2VpdmVyLnN0cmVhbSA9IHN0cmVhbTtcbiAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIgPSBuZXcgd2luZG93LlJUQ1J0cFNlbmRlcih0cmFjayxcbiAgICAgICAgdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydCk7XG4gICAgcmV0dXJuIHRyYW5zY2VpdmVyLnJ0cFNlbmRlcjtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgdmFyIHBjID0gdGhpcztcbiAgICBpZiAoZWRnZVZlcnNpb24gPj0gMTUwMjUpIHtcbiAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgIHBjLmFkZFRyYWNrKHRyYWNrLCBzdHJlYW0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENsb25lIGlzIG5lY2Vzc2FyeSBmb3IgbG9jYWwgZGVtb3MgbW9zdGx5LCBhdHRhY2hpbmcgZGlyZWN0bHlcbiAgICAgIC8vIHRvIHR3byBkaWZmZXJlbnQgc2VuZGVycyBkb2VzIG5vdCB3b3JrIChidWlsZCAxMDU0NykuXG4gICAgICAvLyBGaXhlZCBpbiAxNTAyNSAob3IgZWFybGllcilcbiAgICAgIHZhciBjbG9uZWRTdHJlYW0gPSBzdHJlYW0uY2xvbmUoKTtcbiAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrLCBpZHgpIHtcbiAgICAgICAgdmFyIGNsb25lZFRyYWNrID0gY2xvbmVkU3RyZWFtLmdldFRyYWNrcygpW2lkeF07XG4gICAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2VuYWJsZWQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIGNsb25lZFRyYWNrLmVuYWJsZWQgPSBldmVudC5lbmFibGVkO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgY2xvbmVkU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHtcbiAgICAgICAgcGMuYWRkVHJhY2sodHJhY2ssIGNsb25lZFN0cmVhbSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrID0gZnVuY3Rpb24oc2VuZGVyKSB7XG4gICAgaWYgKHRoaXMuX2lzQ2xvc2VkKSB7XG4gICAgICB0aHJvdyBtYWtlRXJyb3IoJ0ludmFsaWRTdGF0ZUVycm9yJyxcbiAgICAgICAgICAnQXR0ZW1wdGVkIHRvIGNhbGwgcmVtb3ZlVHJhY2sgb24gYSBjbG9zZWQgcGVlcmNvbm5lY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgaWYgKCEoc2VuZGVyIGluc3RhbmNlb2Ygd2luZG93LlJUQ1J0cFNlbmRlcikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IDEgb2YgUlRDUGVlckNvbm5lY3Rpb24ucmVtb3ZlVHJhY2sgJyArXG4gICAgICAgICAgJ2RvZXMgbm90IGltcGxlbWVudCBpbnRlcmZhY2UgUlRDUnRwU2VuZGVyLicpO1xuICAgIH1cblxuICAgIHZhciB0cmFuc2NlaXZlciA9IHRoaXMudHJhbnNjZWl2ZXJzLmZpbmQoZnVuY3Rpb24odCkge1xuICAgICAgcmV0dXJuIHQucnRwU2VuZGVyID09PSBzZW5kZXI7XG4gICAgfSk7XG5cbiAgICBpZiAoIXRyYW5zY2VpdmVyKSB7XG4gICAgICB0aHJvdyBtYWtlRXJyb3IoJ0ludmFsaWRBY2Nlc3NFcnJvcicsXG4gICAgICAgICAgJ1NlbmRlciB3YXMgbm90IGNyZWF0ZWQgYnkgdGhpcyBjb25uZWN0aW9uLicpO1xuICAgIH1cbiAgICB2YXIgc3RyZWFtID0gdHJhbnNjZWl2ZXIuc3RyZWFtO1xuXG4gICAgdHJhbnNjZWl2ZXIucnRwU2VuZGVyLnN0b3AoKTtcbiAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIgPSBudWxsO1xuICAgIHRyYW5zY2VpdmVyLnRyYWNrID0gbnVsbDtcbiAgICB0cmFuc2NlaXZlci5zdHJlYW0gPSBudWxsO1xuXG4gICAgLy8gcmVtb3ZlIHRoZSBzdHJlYW0gZnJvbSB0aGUgc2V0IG9mIGxvY2FsIHN0cmVhbXNcbiAgICB2YXIgbG9jYWxTdHJlYW1zID0gdGhpcy50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKHQpIHtcbiAgICAgIHJldHVybiB0LnN0cmVhbTtcbiAgICB9KTtcbiAgICBpZiAobG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKSA9PT0gLTEgJiZcbiAgICAgICAgdGhpcy5sb2NhbFN0cmVhbXMuaW5kZXhPZihzdHJlYW0pID4gLTEpIHtcbiAgICAgIHRoaXMubG9jYWxTdHJlYW1zLnNwbGljZSh0aGlzLmxvY2FsU3RyZWFtcy5pbmRleE9mKHN0cmVhbSksIDEpO1xuICAgIH1cblxuICAgIHRoaXMuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkKCk7XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbSA9IGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgIHZhciBwYyA9IHRoaXM7XG4gICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHtcbiAgICAgIHZhciBzZW5kZXIgPSBwYy5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbihzKSB7XG4gICAgICAgIHJldHVybiBzLnRyYWNrID09PSB0cmFjaztcbiAgICAgIH0pO1xuICAgICAgaWYgKHNlbmRlcikge1xuICAgICAgICBwYy5yZW1vdmVUcmFjayhzZW5kZXIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgcmV0dXJuICEhdHJhbnNjZWl2ZXIucnRwU2VuZGVyO1xuICAgIH0pXG4gICAgLm1hcChmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLnJ0cFNlbmRlcjtcbiAgICB9KTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgcmV0dXJuICEhdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7XG4gICAgfSlcbiAgICAubWFwKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICByZXR1cm4gdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7XG4gICAgfSk7XG4gIH07XG5cblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2NyZWF0ZUljZUdhdGhlcmVyID0gZnVuY3Rpb24oc2RwTUxpbmVJbmRleCxcbiAgICAgIHVzaW5nQnVuZGxlKSB7XG4gICAgdmFyIHBjID0gdGhpcztcbiAgICBpZiAodXNpbmdCdW5kbGUgJiYgc2RwTUxpbmVJbmRleCA+IDApIHtcbiAgICAgIHJldHVybiB0aGlzLnRyYW5zY2VpdmVyc1swXS5pY2VHYXRoZXJlcjtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2ljZUdhdGhlcmVycy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pY2VHYXRoZXJlcnMuc2hpZnQoKTtcbiAgICB9XG4gICAgdmFyIGljZUdhdGhlcmVyID0gbmV3IHdpbmRvdy5SVENJY2VHYXRoZXJlcih7XG4gICAgICBpY2VTZXJ2ZXJzOiB0aGlzLl9jb25maWcuaWNlU2VydmVycyxcbiAgICAgIGdhdGhlclBvbGljeTogdGhpcy5fY29uZmlnLmljZVRyYW5zcG9ydFBvbGljeVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpY2VHYXRoZXJlciwgJ3N0YXRlJyxcbiAgICAgICAge3ZhbHVlOiAnbmV3Jywgd3JpdGFibGU6IHRydWV9XG4gICAgKTtcblxuICAgIHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzID0gW107XG4gICAgdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uYnVmZmVyQ2FuZGlkYXRlcyA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIgZW5kID0gIWV2ZW50LmNhbmRpZGF0ZSB8fCBPYmplY3Qua2V5cyhldmVudC5jYW5kaWRhdGUpLmxlbmd0aCA9PT0gMDtcbiAgICAgIC8vIHBvbHlmaWxsIHNpbmNlIFJUQ0ljZUdhdGhlcmVyLnN0YXRlIGlzIG5vdCBpbXBsZW1lbnRlZCBpblxuICAgICAgLy8gRWRnZSAxMDU0NyB5ZXQuXG4gICAgICBpY2VHYXRoZXJlci5zdGF0ZSA9IGVuZCA/ICdjb21wbGV0ZWQnIDogJ2dhdGhlcmluZyc7XG4gICAgICBpZiAocGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzICE9PSBudWxsKSB7XG4gICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cy5wdXNoKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGljZUdhdGhlcmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvY2FsY2FuZGlkYXRlJyxcbiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmJ1ZmZlckNhbmRpZGF0ZXMpO1xuICAgIHJldHVybiBpY2VHYXRoZXJlcjtcbiAgfTtcblxuICAvLyBzdGFydCBnYXRoZXJpbmcgZnJvbSBhbiBSVENJY2VHYXRoZXJlci5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9nYXRoZXIgPSBmdW5jdGlvbihtaWQsIHNkcE1MaW5lSW5kZXgpIHtcbiAgICB2YXIgcGMgPSB0aGlzO1xuICAgIHZhciBpY2VHYXRoZXJlciA9IHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmljZUdhdGhlcmVyO1xuICAgIGlmIChpY2VHYXRoZXJlci5vbmxvY2FsY2FuZGlkYXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBidWZmZXJlZENhbmRpZGF0ZUV2ZW50cyA9XG4gICAgICB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cztcbiAgICB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cyA9IG51bGw7XG4gICAgaWNlR2F0aGVyZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9jYWxjYW5kaWRhdGUnLFxuICAgICAgdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uYnVmZmVyQ2FuZGlkYXRlcyk7XG4gICAgaWNlR2F0aGVyZXIub25sb2NhbGNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgaWYgKHBjLnVzaW5nQnVuZGxlICYmIHNkcE1MaW5lSW5kZXggPiAwKSB7XG4gICAgICAgIC8vIGlmIHdlIGtub3cgdGhhdCB3ZSB1c2UgYnVuZGxlIHdlIGNhbiBkcm9wIGNhbmRpZGF0ZXMgd2l0aFxuICAgICAgICAvLyDRlWRwTUxpbmVJbmRleCA+IDAuIElmIHdlIGRvbid0IGRvIHRoaXMgdGhlbiBvdXIgc3RhdGUgZ2V0c1xuICAgICAgICAvLyBjb25mdXNlZCBzaW5jZSB3ZSBkaXNwb3NlIHRoZSBleHRyYSBpY2UgZ2F0aGVyZXIuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaWNlY2FuZGlkYXRlJyk7XG4gICAgICBldmVudC5jYW5kaWRhdGUgPSB7c2RwTWlkOiBtaWQsIHNkcE1MaW5lSW5kZXg6IHNkcE1MaW5lSW5kZXh9O1xuXG4gICAgICB2YXIgY2FuZCA9IGV2dC5jYW5kaWRhdGU7XG4gICAgICAvLyBFZGdlIGVtaXRzIGFuIGVtcHR5IG9iamVjdCBmb3IgUlRDSWNlQ2FuZGlkYXRlQ29tcGxldGXigKVcbiAgICAgIHZhciBlbmQgPSAhY2FuZCB8fCBPYmplY3Qua2V5cyhjYW5kKS5sZW5ndGggPT09IDA7XG4gICAgICBpZiAoZW5kKSB7XG4gICAgICAgIC8vIHBvbHlmaWxsIHNpbmNlIFJUQ0ljZUdhdGhlcmVyLnN0YXRlIGlzIG5vdCBpbXBsZW1lbnRlZCBpblxuICAgICAgICAvLyBFZGdlIDEwNTQ3IHlldC5cbiAgICAgICAgaWYgKGljZUdhdGhlcmVyLnN0YXRlID09PSAnbmV3JyB8fCBpY2VHYXRoZXJlci5zdGF0ZSA9PT0gJ2dhdGhlcmluZycpIHtcbiAgICAgICAgICBpY2VHYXRoZXJlci5zdGF0ZSA9ICdjb21wbGV0ZWQnO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaWNlR2F0aGVyZXIuc3RhdGUgPT09ICduZXcnKSB7XG4gICAgICAgICAgaWNlR2F0aGVyZXIuc3RhdGUgPSAnZ2F0aGVyaW5nJztcbiAgICAgICAgfVxuICAgICAgICAvLyBSVENJY2VDYW5kaWRhdGUgZG9lc24ndCBoYXZlIGEgY29tcG9uZW50LCBuZWVkcyB0byBiZSBhZGRlZFxuICAgICAgICBjYW5kLmNvbXBvbmVudCA9IDE7XG4gICAgICAgIC8vIGFsc28gdGhlIHVzZXJuYW1lRnJhZ21lbnQuIFRPRE86IHVwZGF0ZSBTRFAgdG8gdGFrZSBib3RoIHZhcmlhbnRzLlxuICAgICAgICBjYW5kLnVmcmFnID0gaWNlR2F0aGVyZXIuZ2V0TG9jYWxQYXJhbWV0ZXJzKCkudXNlcm5hbWVGcmFnbWVudDtcblxuICAgICAgICB2YXIgc2VyaWFsaXplZENhbmRpZGF0ZSA9IFNEUFV0aWxzLndyaXRlQ2FuZGlkYXRlKGNhbmQpO1xuICAgICAgICBldmVudC5jYW5kaWRhdGUgPSBPYmplY3QuYXNzaWduKGV2ZW50LmNhbmRpZGF0ZSxcbiAgICAgICAgICAgIFNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlKHNlcmlhbGl6ZWRDYW5kaWRhdGUpKTtcblxuICAgICAgICBldmVudC5jYW5kaWRhdGUuY2FuZGlkYXRlID0gc2VyaWFsaXplZENhbmRpZGF0ZTtcbiAgICAgICAgZXZlbnQuY2FuZGlkYXRlLnRvSlNPTiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjYW5kaWRhdGU6IGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUsXG4gICAgICAgICAgICBzZHBNaWQ6IGV2ZW50LmNhbmRpZGF0ZS5zZHBNaWQsXG4gICAgICAgICAgICBzZHBNTGluZUluZGV4OiBldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleCxcbiAgICAgICAgICAgIHVzZXJuYW1lRnJhZ21lbnQ6IGV2ZW50LmNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gdXBkYXRlIGxvY2FsIGRlc2NyaXB0aW9uLlxuICAgICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuZ2V0TWVkaWFTZWN0aW9ucyhwYy5fbG9jYWxEZXNjcmlwdGlvbi5zZHApO1xuICAgICAgaWYgKCFlbmQpIHtcbiAgICAgICAgc2VjdGlvbnNbZXZlbnQuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXhdICs9XG4gICAgICAgICAgICAnYT0nICsgZXZlbnQuY2FuZGlkYXRlLmNhbmRpZGF0ZSArICdcXHJcXG4nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VjdGlvbnNbZXZlbnQuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXhdICs9XG4gICAgICAgICAgICAnYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcbic7XG4gICAgICB9XG4gICAgICBwYy5fbG9jYWxEZXNjcmlwdGlvbi5zZHAgPVxuICAgICAgICAgIFNEUFV0aWxzLmdldERlc2NyaXB0aW9uKHBjLl9sb2NhbERlc2NyaXB0aW9uLnNkcCkgK1xuICAgICAgICAgIHNlY3Rpb25zLmpvaW4oJycpO1xuICAgICAgdmFyIGNvbXBsZXRlID0gcGMudHJhbnNjZWl2ZXJzLmV2ZXJ5KGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICAgIHJldHVybiB0cmFuc2NlaXZlci5pY2VHYXRoZXJlciAmJlxuICAgICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuc3RhdGUgPT09ICdjb21wbGV0ZWQnO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChwYy5pY2VHYXRoZXJpbmdTdGF0ZSAhPT0gJ2dhdGhlcmluZycpIHtcbiAgICAgICAgcGMuaWNlR2F0aGVyaW5nU3RhdGUgPSAnZ2F0aGVyaW5nJztcbiAgICAgICAgcGMuX2VtaXRHYXRoZXJpbmdTdGF0ZUNoYW5nZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBFbWl0IGNhbmRpZGF0ZS4gQWxzbyBlbWl0IG51bGwgY2FuZGlkYXRlIHdoZW4gYWxsIGdhdGhlcmVycyBhcmVcbiAgICAgIC8vIGNvbXBsZXRlLlxuICAgICAgaWYgKCFlbmQpIHtcbiAgICAgICAgcGMuX2Rpc3BhdGNoRXZlbnQoJ2ljZWNhbmRpZGF0ZScsIGV2ZW50KTtcbiAgICAgIH1cbiAgICAgIGlmIChjb21wbGV0ZSkge1xuICAgICAgICBwYy5fZGlzcGF0Y2hFdmVudCgnaWNlY2FuZGlkYXRlJywgbmV3IEV2ZW50KCdpY2VjYW5kaWRhdGUnKSk7XG4gICAgICAgIHBjLmljZUdhdGhlcmluZ1N0YXRlID0gJ2NvbXBsZXRlJztcbiAgICAgICAgcGMuX2VtaXRHYXRoZXJpbmdTdGF0ZUNoYW5nZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBlbWl0IGFscmVhZHkgZ2F0aGVyZWQgY2FuZGlkYXRlcy5cbiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZSkge1xuICAgICAgICBpY2VHYXRoZXJlci5vbmxvY2FsY2FuZGlkYXRlKGUpO1xuICAgICAgfSk7XG4gICAgfSwgMCk7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIElDRSB0cmFuc3BvcnQgYW5kIERUTFMgdHJhbnNwb3J0LlxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2NyZWF0ZUljZUFuZER0bHNUcmFuc3BvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBjID0gdGhpcztcbiAgICB2YXIgaWNlVHJhbnNwb3J0ID0gbmV3IHdpbmRvdy5SVENJY2VUcmFuc3BvcnQobnVsbCk7XG4gICAgaWNlVHJhbnNwb3J0Lm9uaWNlc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHBjLl91cGRhdGVJY2VDb25uZWN0aW9uU3RhdGUoKTtcbiAgICAgIHBjLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKTtcbiAgICB9O1xuXG4gICAgdmFyIGR0bHNUcmFuc3BvcnQgPSBuZXcgd2luZG93LlJUQ0R0bHNUcmFuc3BvcnQoaWNlVHJhbnNwb3J0KTtcbiAgICBkdGxzVHJhbnNwb3J0Lm9uZHRsc3N0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICBwYy5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCk7XG4gICAgfTtcbiAgICBkdGxzVHJhbnNwb3J0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIG9uZXJyb3IgZG9lcyBub3Qgc2V0IHN0YXRlIHRvIGZhaWxlZCBieSBpdHNlbGYuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZHRsc1RyYW5zcG9ydCwgJ3N0YXRlJyxcbiAgICAgICAgICB7dmFsdWU6ICdmYWlsZWQnLCB3cml0YWJsZTogdHJ1ZX0pO1xuICAgICAgcGMuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSgpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWNlVHJhbnNwb3J0OiBpY2VUcmFuc3BvcnQsXG4gICAgICBkdGxzVHJhbnNwb3J0OiBkdGxzVHJhbnNwb3J0XG4gICAgfTtcbiAgfTtcblxuICAvLyBEZXN0cm95IElDRSBnYXRoZXJlciwgSUNFIHRyYW5zcG9ydCBhbmQgRFRMUyB0cmFuc3BvcnQuXG4gIC8vIFdpdGhvdXQgdHJpZ2dlcmluZyB0aGUgY2FsbGJhY2tzLlxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2Rpc3Bvc2VJY2VBbmREdGxzVHJhbnNwb3J0cyA9IGZ1bmN0aW9uKFxuICAgICAgc2RwTUxpbmVJbmRleCkge1xuICAgIHZhciBpY2VHYXRoZXJlciA9IHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmljZUdhdGhlcmVyO1xuICAgIGlmIChpY2VHYXRoZXJlcikge1xuICAgICAgZGVsZXRlIGljZUdhdGhlcmVyLm9ubG9jYWxjYW5kaWRhdGU7XG4gICAgICBkZWxldGUgdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uaWNlR2F0aGVyZXI7XG4gICAgfVxuICAgIHZhciBpY2VUcmFuc3BvcnQgPSB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5pY2VUcmFuc3BvcnQ7XG4gICAgaWYgKGljZVRyYW5zcG9ydCkge1xuICAgICAgZGVsZXRlIGljZVRyYW5zcG9ydC5vbmljZXN0YXRlY2hhbmdlO1xuICAgICAgZGVsZXRlIHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmljZVRyYW5zcG9ydDtcbiAgICB9XG4gICAgdmFyIGR0bHNUcmFuc3BvcnQgPSB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5kdGxzVHJhbnNwb3J0O1xuICAgIGlmIChkdGxzVHJhbnNwb3J0KSB7XG4gICAgICBkZWxldGUgZHRsc1RyYW5zcG9ydC5vbmR0bHNzdGF0ZWNoYW5nZTtcbiAgICAgIGRlbGV0ZSBkdGxzVHJhbnNwb3J0Lm9uZXJyb3I7XG4gICAgICBkZWxldGUgdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uZHRsc1RyYW5zcG9ydDtcbiAgICB9XG4gIH07XG5cbiAgLy8gU3RhcnQgdGhlIFJUUCBTZW5kZXIgYW5kIFJlY2VpdmVyIGZvciBhIHRyYW5zY2VpdmVyLlxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX3RyYW5zY2VpdmUgPSBmdW5jdGlvbih0cmFuc2NlaXZlcixcbiAgICAgIHNlbmQsIHJlY3YpIHtcbiAgICB2YXIgcGFyYW1zID0gZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzKHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzLFxuICAgICAgICB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXMpO1xuICAgIGlmIChzZW5kICYmIHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikge1xuICAgICAgcGFyYW1zLmVuY29kaW5ncyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7XG4gICAgICBwYXJhbXMucnRjcCA9IHtcbiAgICAgICAgY25hbWU6IFNEUFV0aWxzLmxvY2FsQ05hbWUsXG4gICAgICAgIGNvbXBvdW5kOiB0cmFuc2NlaXZlci5ydGNwUGFyYW1ldGVycy5jb21wb3VuZFxuICAgICAgfTtcbiAgICAgIGlmICh0cmFuc2NlaXZlci5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzLmxlbmd0aCkge1xuICAgICAgICBwYXJhbXMucnRjcC5zc3JjID0gdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjO1xuICAgICAgfVxuICAgICAgdHJhbnNjZWl2ZXIucnRwU2VuZGVyLnNlbmQocGFyYW1zKTtcbiAgICB9XG4gICAgaWYgKHJlY3YgJiYgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIgJiYgcGFyYW1zLmNvZGVjcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyByZW1vdmUgUlRYIGZpZWxkIGluIEVkZ2UgMTQ5NDJcbiAgICAgIGlmICh0cmFuc2NlaXZlci5raW5kID09PSAndmlkZW8nXG4gICAgICAgICAgJiYgdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVyc1xuICAgICAgICAgICYmIGVkZ2VWZXJzaW9uIDwgMTUwMTkpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVycy5mb3JFYWNoKGZ1bmN0aW9uKHApIHtcbiAgICAgICAgICBkZWxldGUgcC5ydHg7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoKSB7XG4gICAgICAgIHBhcmFtcy5lbmNvZGluZ3MgPSB0cmFuc2NlaXZlci5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyYW1zLmVuY29kaW5ncyA9IFt7fV07XG4gICAgICB9XG4gICAgICBwYXJhbXMucnRjcCA9IHtcbiAgICAgICAgY29tcG91bmQ6IHRyYW5zY2VpdmVyLnJ0Y3BQYXJhbWV0ZXJzLmNvbXBvdW5kXG4gICAgICB9O1xuICAgICAgaWYgKHRyYW5zY2VpdmVyLnJ0Y3BQYXJhbWV0ZXJzLmNuYW1lKSB7XG4gICAgICAgIHBhcmFtcy5ydGNwLmNuYW1lID0gdHJhbnNjZWl2ZXIucnRjcFBhcmFtZXRlcnMuY25hbWU7XG4gICAgICB9XG4gICAgICBpZiAodHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGgpIHtcbiAgICAgICAgcGFyYW1zLnJ0Y3Auc3NyYyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYztcbiAgICAgIH1cbiAgICAgIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyLnJlY2VpdmUocGFyYW1zKTtcbiAgICB9XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb24gPSBmdW5jdGlvbihkZXNjcmlwdGlvbikge1xuICAgIHZhciBwYyA9IHRoaXM7XG5cbiAgICAvLyBOb3RlOiBwcmFuc3dlciBpcyBub3Qgc3VwcG9ydGVkLlxuICAgIGlmIChbJ29mZmVyJywgJ2Fuc3dlciddLmluZGV4T2YoZGVzY3JpcHRpb24udHlwZSkgPT09IC0xKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobWFrZUVycm9yKCdUeXBlRXJyb3InLFxuICAgICAgICAgICdVbnN1cHBvcnRlZCB0eXBlIFwiJyArIGRlc2NyaXB0aW9uLnR5cGUgKyAnXCInKSk7XG4gICAgfVxuXG4gICAgaWYgKCFpc0FjdGlvbkFsbG93ZWRJblNpZ25hbGluZ1N0YXRlKCdzZXRMb2NhbERlc2NyaXB0aW9uJyxcbiAgICAgICAgZGVzY3JpcHRpb24udHlwZSwgcGMuc2lnbmFsaW5nU3RhdGUpIHx8IHBjLl9pc0Nsb3NlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG1ha2VFcnJvcignSW52YWxpZFN0YXRlRXJyb3InLFxuICAgICAgICAgICdDYW4gbm90IHNldCBsb2NhbCAnICsgZGVzY3JpcHRpb24udHlwZSArXG4gICAgICAgICAgJyBpbiBzdGF0ZSAnICsgcGMuc2lnbmFsaW5nU3RhdGUpKTtcbiAgICB9XG5cbiAgICB2YXIgc2VjdGlvbnM7XG4gICAgdmFyIHNlc3Npb25wYXJ0O1xuICAgIGlmIChkZXNjcmlwdGlvbi50eXBlID09PSAnb2ZmZXInKSB7XG4gICAgICAvLyBWRVJZIGxpbWl0ZWQgc3VwcG9ydCBmb3IgU0RQIG11bmdpbmcuIExpbWl0ZWQgdG86XG4gICAgICAvLyAqIGNoYW5naW5nIHRoZSBvcmRlciBvZiBjb2RlY3NcbiAgICAgIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhkZXNjcmlwdGlvbi5zZHApO1xuICAgICAgc2Vzc2lvbnBhcnQgPSBzZWN0aW9ucy5zaGlmdCgpO1xuICAgICAgc2VjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNkcE1MaW5lSW5kZXgpIHtcbiAgICAgICAgdmFyIGNhcHMgPSBTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTtcbiAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmxvY2FsQ2FwYWJpbGl0aWVzID0gY2FwcztcbiAgICAgIH0pO1xuXG4gICAgICBwYy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlciwgc2RwTUxpbmVJbmRleCkge1xuICAgICAgICBwYy5fZ2F0aGVyKHRyYW5zY2VpdmVyLm1pZCwgc2RwTUxpbmVJbmRleCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdhbnN3ZXInKSB7XG4gICAgICBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMocGMuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCk7XG4gICAgICBzZXNzaW9ucGFydCA9IHNlY3Rpb25zLnNoaWZ0KCk7XG4gICAgICB2YXIgaXNJY2VMaXRlID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoc2Vzc2lvbnBhcnQsXG4gICAgICAgICAgJ2E9aWNlLWxpdGUnKS5sZW5ndGggPiAwO1xuICAgICAgc2VjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNkcE1MaW5lSW5kZXgpIHtcbiAgICAgICAgdmFyIHRyYW5zY2VpdmVyID0gcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdO1xuICAgICAgICB2YXIgaWNlR2F0aGVyZXIgPSB0cmFuc2NlaXZlci5pY2VHYXRoZXJlcjtcbiAgICAgICAgdmFyIGljZVRyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydDtcbiAgICAgICAgdmFyIGR0bHNUcmFuc3BvcnQgPSB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0O1xuICAgICAgICB2YXIgbG9jYWxDYXBhYmlsaXRpZXMgPSB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcztcbiAgICAgICAgdmFyIHJlbW90ZUNhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcztcblxuICAgICAgICAvLyB0cmVhdCBidW5kbGUtb25seSBhcyBub3QtcmVqZWN0ZWQuXG4gICAgICAgIHZhciByZWplY3RlZCA9IFNEUFV0aWxzLmlzUmVqZWN0ZWQobWVkaWFTZWN0aW9uKSAmJlxuICAgICAgICAgICAgU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1idW5kbGUtb25seScpLmxlbmd0aCA9PT0gMDtcblxuICAgICAgICBpZiAoIXJlamVjdGVkICYmICF0cmFuc2NlaXZlci5yZWplY3RlZCkge1xuICAgICAgICAgIHZhciByZW1vdGVJY2VQYXJhbWV0ZXJzID0gU0RQVXRpbHMuZ2V0SWNlUGFyYW1ldGVycyhcbiAgICAgICAgICAgICAgbWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCk7XG4gICAgICAgICAgdmFyIHJlbW90ZUR0bHNQYXJhbWV0ZXJzID0gU0RQVXRpbHMuZ2V0RHRsc1BhcmFtZXRlcnMoXG4gICAgICAgICAgICAgIG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpO1xuICAgICAgICAgIGlmIChpc0ljZUxpdGUpIHtcbiAgICAgICAgICAgIHJlbW90ZUR0bHNQYXJhbWV0ZXJzLnJvbGUgPSAnc2VydmVyJztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXBjLnVzaW5nQnVuZGxlIHx8IHNkcE1MaW5lSW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHBjLl9nYXRoZXIodHJhbnNjZWl2ZXIubWlkLCBzZHBNTGluZUluZGV4KTtcbiAgICAgICAgICAgIGlmIChpY2VUcmFuc3BvcnQuc3RhdGUgPT09ICduZXcnKSB7XG4gICAgICAgICAgICAgIGljZVRyYW5zcG9ydC5zdGFydChpY2VHYXRoZXJlciwgcmVtb3RlSWNlUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgIGlzSWNlTGl0ZSA/ICdjb250cm9sbGluZycgOiAnY29udHJvbGxlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGR0bHNUcmFuc3BvcnQuc3RhdGUgPT09ICduZXcnKSB7XG4gICAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQuc3RhcnQocmVtb3RlRHRsc1BhcmFtZXRlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENhbGN1bGF0ZSBpbnRlcnNlY3Rpb24gb2YgY2FwYWJpbGl0aWVzLlxuICAgICAgICAgIHZhciBwYXJhbXMgPSBnZXRDb21tb25DYXBhYmlsaXRpZXMobG9jYWxDYXBhYmlsaXRpZXMsXG4gICAgICAgICAgICAgIHJlbW90ZUNhcGFiaWxpdGllcyk7XG5cbiAgICAgICAgICAvLyBTdGFydCB0aGUgUlRDUnRwU2VuZGVyLiBUaGUgUlRDUnRwUmVjZWl2ZXIgZm9yIHRoaXNcbiAgICAgICAgICAvLyB0cmFuc2NlaXZlciBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgaW4gc2V0UmVtb3RlRGVzY3JpcHRpb24uXG4gICAgICAgICAgcGMuX3RyYW5zY2VpdmUodHJhbnNjZWl2ZXIsXG4gICAgICAgICAgICAgIHBhcmFtcy5jb2RlY3MubGVuZ3RoID4gMCxcbiAgICAgICAgICAgICAgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBwYy5fbG9jYWxEZXNjcmlwdGlvbiA9IHtcbiAgICAgIHR5cGU6IGRlc2NyaXB0aW9uLnR5cGUsXG4gICAgICBzZHA6IGRlc2NyaXB0aW9uLnNkcFxuICAgIH07XG4gICAgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdvZmZlcicpIHtcbiAgICAgIHBjLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnaGF2ZS1sb2NhbC1vZmZlcicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoJ3N0YWJsZScpO1xuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb24gPSBmdW5jdGlvbihkZXNjcmlwdGlvbikge1xuICAgIHZhciBwYyA9IHRoaXM7XG5cbiAgICAvLyBOb3RlOiBwcmFuc3dlciBpcyBub3Qgc3VwcG9ydGVkLlxuICAgIGlmIChbJ29mZmVyJywgJ2Fuc3dlciddLmluZGV4T2YoZGVzY3JpcHRpb24udHlwZSkgPT09IC0xKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobWFrZUVycm9yKCdUeXBlRXJyb3InLFxuICAgICAgICAgICdVbnN1cHBvcnRlZCB0eXBlIFwiJyArIGRlc2NyaXB0aW9uLnR5cGUgKyAnXCInKSk7XG4gICAgfVxuXG4gICAgaWYgKCFpc0FjdGlvbkFsbG93ZWRJblNpZ25hbGluZ1N0YXRlKCdzZXRSZW1vdGVEZXNjcmlwdGlvbicsXG4gICAgICAgIGRlc2NyaXB0aW9uLnR5cGUsIHBjLnNpZ25hbGluZ1N0YXRlKSB8fCBwYy5faXNDbG9zZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChtYWtlRXJyb3IoJ0ludmFsaWRTdGF0ZUVycm9yJyxcbiAgICAgICAgICAnQ2FuIG5vdCBzZXQgcmVtb3RlICcgKyBkZXNjcmlwdGlvbi50eXBlICtcbiAgICAgICAgICAnIGluIHN0YXRlICcgKyBwYy5zaWduYWxpbmdTdGF0ZSkpO1xuICAgIH1cblxuICAgIHZhciBzdHJlYW1zID0ge307XG4gICAgcGMucmVtb3RlU3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgc3RyZWFtc1tzdHJlYW0uaWRdID0gc3RyZWFtO1xuICAgIH0pO1xuICAgIHZhciByZWNlaXZlckxpc3QgPSBbXTtcbiAgICB2YXIgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKGRlc2NyaXB0aW9uLnNkcCk7XG4gICAgdmFyIHNlc3Npb25wYXJ0ID0gc2VjdGlvbnMuc2hpZnQoKTtcbiAgICB2YXIgaXNJY2VMaXRlID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoc2Vzc2lvbnBhcnQsXG4gICAgICAgICdhPWljZS1saXRlJykubGVuZ3RoID4gMDtcbiAgICB2YXIgdXNpbmdCdW5kbGUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChzZXNzaW9ucGFydCxcbiAgICAgICAgJ2E9Z3JvdXA6QlVORExFICcpLmxlbmd0aCA+IDA7XG4gICAgcGMudXNpbmdCdW5kbGUgPSB1c2luZ0J1bmRsZTtcbiAgICB2YXIgaWNlT3B0aW9ucyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KHNlc3Npb25wYXJ0LFxuICAgICAgICAnYT1pY2Utb3B0aW9uczonKVswXTtcbiAgICBpZiAoaWNlT3B0aW9ucykge1xuICAgICAgcGMuY2FuVHJpY2tsZUljZUNhbmRpZGF0ZXMgPSBpY2VPcHRpb25zLnN1YnN0cigxNCkuc3BsaXQoJyAnKVxuICAgICAgICAgIC5pbmRleE9mKCd0cmlja2xlJykgPj0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcGMuY2FuVHJpY2tsZUljZUNhbmRpZGF0ZXMgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBzZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2RwTUxpbmVJbmRleCkge1xuICAgICAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pO1xuICAgICAgdmFyIGtpbmQgPSBTRFBVdGlscy5nZXRLaW5kKG1lZGlhU2VjdGlvbik7XG4gICAgICAvLyB0cmVhdCBidW5kbGUtb25seSBhcyBub3QtcmVqZWN0ZWQuXG4gICAgICB2YXIgcmVqZWN0ZWQgPSBTRFBVdGlscy5pc1JlamVjdGVkKG1lZGlhU2VjdGlvbikgJiZcbiAgICAgICAgICBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWJ1bmRsZS1vbmx5JykubGVuZ3RoID09PSAwO1xuICAgICAgdmFyIHByb3RvY29sID0gbGluZXNbMF0uc3Vic3RyKDIpLnNwbGl0KCcgJylbMl07XG5cbiAgICAgIHZhciBkaXJlY3Rpb24gPSBTRFBVdGlscy5nZXREaXJlY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCk7XG4gICAgICB2YXIgcmVtb3RlTXNpZCA9IFNEUFV0aWxzLnBhcnNlTXNpZChtZWRpYVNlY3Rpb24pO1xuXG4gICAgICB2YXIgbWlkID0gU0RQVXRpbHMuZ2V0TWlkKG1lZGlhU2VjdGlvbikgfHwgU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyKCk7XG5cbiAgICAgIC8vIFJlamVjdCBkYXRhY2hhbm5lbHMgd2hpY2ggYXJlIG5vdCBpbXBsZW1lbnRlZCB5ZXQuXG4gICAgICBpZiAocmVqZWN0ZWQgfHwgKGtpbmQgPT09ICdhcHBsaWNhdGlvbicgJiYgKHByb3RvY29sID09PSAnRFRMUy9TQ1RQJyB8fFxuICAgICAgICAgIHByb3RvY29sID09PSAnVURQL0RUTFMvU0NUUCcpKSkge1xuICAgICAgICAvLyBUT0RPOiB0aGlzIGlzIGRhbmdlcm91cyBpbiB0aGUgY2FzZSB3aGVyZSBhIG5vbi1yZWplY3RlZCBtLWxpbmVcbiAgICAgICAgLy8gICAgIGJlY29tZXMgcmVqZWN0ZWQuXG4gICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XSA9IHtcbiAgICAgICAgICBtaWQ6IG1pZCxcbiAgICAgICAgICBraW5kOiBraW5kLFxuICAgICAgICAgIHByb3RvY29sOiBwcm90b2NvbCxcbiAgICAgICAgICByZWplY3RlZDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVqZWN0ZWQgJiYgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdICYmXG4gICAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLnJlamVjdGVkKSB7XG4gICAgICAgIC8vIHJlY3ljbGUgYSByZWplY3RlZCB0cmFuc2NlaXZlci5cbiAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdID0gcGMuX2NyZWF0ZVRyYW5zY2VpdmVyKGtpbmQsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdHJhbnNjZWl2ZXI7XG4gICAgICB2YXIgaWNlR2F0aGVyZXI7XG4gICAgICB2YXIgaWNlVHJhbnNwb3J0O1xuICAgICAgdmFyIGR0bHNUcmFuc3BvcnQ7XG4gICAgICB2YXIgcnRwUmVjZWl2ZXI7XG4gICAgICB2YXIgc2VuZEVuY29kaW5nUGFyYW1ldGVycztcbiAgICAgIHZhciByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzO1xuICAgICAgdmFyIGxvY2FsQ2FwYWJpbGl0aWVzO1xuXG4gICAgICB2YXIgdHJhY2s7XG4gICAgICAvLyBGSVhNRTogZW5zdXJlIHRoZSBtZWRpYVNlY3Rpb24gaGFzIHJ0Y3AtbXV4IHNldC5cbiAgICAgIHZhciByZW1vdGVDYXBhYmlsaXRpZXMgPSBTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTtcbiAgICAgIHZhciByZW1vdGVJY2VQYXJhbWV0ZXJzO1xuICAgICAgdmFyIHJlbW90ZUR0bHNQYXJhbWV0ZXJzO1xuICAgICAgaWYgKCFyZWplY3RlZCkge1xuICAgICAgICByZW1vdGVJY2VQYXJhbWV0ZXJzID0gU0RQVXRpbHMuZ2V0SWNlUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24sXG4gICAgICAgICAgICBzZXNzaW9ucGFydCk7XG4gICAgICAgIHJlbW90ZUR0bHNQYXJhbWV0ZXJzID0gU0RQVXRpbHMuZ2V0RHRsc1BhcmFtZXRlcnMobWVkaWFTZWN0aW9uLFxuICAgICAgICAgICAgc2Vzc2lvbnBhcnQpO1xuICAgICAgICByZW1vdGVEdGxzUGFyYW1ldGVycy5yb2xlID0gJ2NsaWVudCc7XG4gICAgICB9XG4gICAgICByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzID1cbiAgICAgICAgICBTRFBVdGlscy5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pO1xuXG4gICAgICB2YXIgcnRjcFBhcmFtZXRlcnMgPSBTRFBVdGlscy5wYXJzZVJ0Y3BQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbik7XG5cbiAgICAgIHZhciBpc0NvbXBsZXRlID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLFxuICAgICAgICAgICdhPWVuZC1vZi1jYW5kaWRhdGVzJywgc2Vzc2lvbnBhcnQpLmxlbmd0aCA+IDA7XG4gICAgICB2YXIgY2FuZHMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWNhbmRpZGF0ZTonKVxuICAgICAgICAgIC5tYXAoZnVuY3Rpb24oY2FuZCkge1xuICAgICAgICAgICAgcmV0dXJuIFNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlKGNhbmQpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihjYW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FuZC5jb21wb25lbnQgPT09IDE7XG4gICAgICAgICAgfSk7XG5cbiAgICAgIC8vIENoZWNrIGlmIHdlIGNhbiB1c2UgQlVORExFIGFuZCBkaXNwb3NlIHRyYW5zcG9ydHMuXG4gICAgICBpZiAoKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdvZmZlcicgfHwgZGVzY3JpcHRpb24udHlwZSA9PT0gJ2Fuc3dlcicpICYmXG4gICAgICAgICAgIXJlamVjdGVkICYmIHVzaW5nQnVuZGxlICYmIHNkcE1MaW5lSW5kZXggPiAwICYmXG4gICAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdKSB7XG4gICAgICAgIHBjLl9kaXNwb3NlSWNlQW5kRHRsc1RyYW5zcG9ydHMoc2RwTUxpbmVJbmRleCk7XG4gICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5pY2VHYXRoZXJlciA9XG4gICAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbMF0uaWNlR2F0aGVyZXI7XG4gICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5pY2VUcmFuc3BvcnQgPVxuICAgICAgICAgICAgcGMudHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydDtcbiAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmR0bHNUcmFuc3BvcnQgPVxuICAgICAgICAgICAgcGMudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQ7XG4gICAgICAgIGlmIChwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucnRwU2VuZGVyKSB7XG4gICAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLnJ0cFNlbmRlci5zZXRUcmFuc3BvcnQoXG4gICAgICAgICAgICAgIHBjLnRyYW5zY2VpdmVyc1swXS5kdGxzVHJhbnNwb3J0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLnJ0cFJlY2VpdmVyKSB7XG4gICAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLnJ0cFJlY2VpdmVyLnNldFRyYW5zcG9ydChcbiAgICAgICAgICAgICAgcGMudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJyAmJiAhcmVqZWN0ZWQpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIgPSBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gfHxcbiAgICAgICAgICAgIHBjLl9jcmVhdGVUcmFuc2NlaXZlcihraW5kKTtcbiAgICAgICAgdHJhbnNjZWl2ZXIubWlkID0gbWlkO1xuXG4gICAgICAgIGlmICghdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIpIHtcbiAgICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlciA9IHBjLl9jcmVhdGVJY2VHYXRoZXJlcihzZHBNTGluZUluZGV4LFxuICAgICAgICAgICAgICB1c2luZ0J1bmRsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2FuZHMubGVuZ3RoICYmIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgICAgICBpZiAoaXNDb21wbGV0ZSAmJiAoIXVzaW5nQnVuZGxlIHx8IHNkcE1MaW5lSW5kZXggPT09IDApKSB7XG4gICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQuc2V0UmVtb3RlQ2FuZGlkYXRlcyhjYW5kcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbmRzLmZvckVhY2goZnVuY3Rpb24oY2FuZGlkYXRlKSB7XG4gICAgICAgICAgICAgIG1heWJlQWRkQ2FuZGlkYXRlKHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCwgY2FuZGlkYXRlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzID0gd2luZG93LlJUQ1J0cFJlY2VpdmVyLmdldENhcGFiaWxpdGllcyhraW5kKTtcblxuICAgICAgICAvLyBmaWx0ZXIgUlRYIHVudGlsIGFkZGl0aW9uYWwgc3R1ZmYgbmVlZGVkIGZvciBSVFggaXMgaW1wbGVtZW50ZWRcbiAgICAgICAgLy8gaW4gYWRhcHRlci5qc1xuICAgICAgICBpZiAoZWRnZVZlcnNpb24gPCAxNTAxOSkge1xuICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcyA9IGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcy5maWx0ZXIoXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGNvZGVjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvZGVjLm5hbWUgIT09ICdydHgnO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnMgPSB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzIHx8IFt7XG4gICAgICAgICAgc3NyYzogKDIgKiBzZHBNTGluZUluZGV4ICsgMikgKiAxMDAxXG4gICAgICAgIH1dO1xuXG4gICAgICAgIC8vIFRPRE86IHJld3JpdGUgdG8gdXNlIGh0dHA6Ly93M2MuZ2l0aHViLmlvL3dlYnJ0Yy1wYy8jc2V0LWFzc29jaWF0ZWQtcmVtb3RlLXN0cmVhbXNcbiAgICAgICAgdmFyIGlzTmV3VHJhY2sgPSBmYWxzZTtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdzZW5kb25seScpIHtcbiAgICAgICAgICBpc05ld1RyYWNrID0gIXRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyO1xuICAgICAgICAgIHJ0cFJlY2VpdmVyID0gdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIgfHxcbiAgICAgICAgICAgICAgbmV3IHdpbmRvdy5SVENSdHBSZWNlaXZlcih0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0LCBraW5kKTtcblxuICAgICAgICAgIGlmIChpc05ld1RyYWNrKSB7XG4gICAgICAgICAgICB2YXIgc3RyZWFtO1xuICAgICAgICAgICAgdHJhY2sgPSBydHBSZWNlaXZlci50cmFjaztcbiAgICAgICAgICAgIC8vIEZJWE1FOiBkb2VzIG5vdCB3b3JrIHdpdGggUGxhbiBCLlxuICAgICAgICAgICAgaWYgKHJlbW90ZU1zaWQgJiYgcmVtb3RlTXNpZC5zdHJlYW0gPT09ICctJykge1xuICAgICAgICAgICAgICAvLyBuby1vcC4gYSBzdHJlYW0gaWQgb2YgJy0nIG1lYW5zOiBubyBhc3NvY2lhdGVkIHN0cmVhbS5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVtb3RlTXNpZCkge1xuICAgICAgICAgICAgICBpZiAoIXN0cmVhbXNbcmVtb3RlTXNpZC5zdHJlYW1dKSB7XG4gICAgICAgICAgICAgICAgc3RyZWFtc1tyZW1vdGVNc2lkLnN0cmVhbV0gPSBuZXcgd2luZG93Lk1lZGlhU3RyZWFtKCk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN0cmVhbXNbcmVtb3RlTXNpZC5zdHJlYW1dLCAnaWQnLCB7XG4gICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3RlTXNpZC5zdHJlYW07XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRyYWNrLCAnaWQnLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZW1vdGVNc2lkLnRyYWNrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHN0cmVhbSA9IHN0cmVhbXNbcmVtb3RlTXNpZC5zdHJlYW1dO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKCFzdHJlYW1zLmRlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1zLmRlZmF1bHQgPSBuZXcgd2luZG93Lk1lZGlhU3RyZWFtKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc3RyZWFtID0gc3RyZWFtcy5kZWZhdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0cmVhbSkge1xuICAgICAgICAgICAgICBhZGRUcmFja1RvU3RyZWFtQW5kRmlyZUV2ZW50KHRyYWNrLCBzdHJlYW0pO1xuICAgICAgICAgICAgICB0cmFuc2NlaXZlci5hc3NvY2lhdGVkUmVtb3RlTWVkaWFTdHJlYW1zLnB1c2goc3RyZWFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlY2VpdmVyTGlzdC5wdXNoKFt0cmFjaywgcnRwUmVjZWl2ZXIsIHN0cmVhbV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBSZWNlaXZlciAmJiB0cmFuc2NlaXZlci5ydHBSZWNlaXZlci50cmFjaykge1xuICAgICAgICAgIHRyYW5zY2VpdmVyLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbihzKSB7XG4gICAgICAgICAgICB2YXIgbmF0aXZlVHJhY2sgPSBzLmdldFRyYWNrcygpLmZpbmQoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICByZXR1cm4gdC5pZCA9PT0gdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIudHJhY2suaWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChuYXRpdmVUcmFjaykge1xuICAgICAgICAgICAgICByZW1vdmVUcmFja0Zyb21TdHJlYW1BbmRGaXJlRXZlbnQobmF0aXZlVHJhY2ssIHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRyYW5zY2VpdmVyLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXMgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzID0gbG9jYWxDYXBhYmlsaXRpZXM7XG4gICAgICAgIHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcyA9IHJlbW90ZUNhcGFiaWxpdGllcztcbiAgICAgICAgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIgPSBydHBSZWNlaXZlcjtcbiAgICAgICAgdHJhbnNjZWl2ZXIucnRjcFBhcmFtZXRlcnMgPSBydGNwUGFyYW1ldGVycztcbiAgICAgICAgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVycyA9IHNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7XG4gICAgICAgIHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMgPSByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzO1xuXG4gICAgICAgIC8vIFN0YXJ0IHRoZSBSVENSdHBSZWNlaXZlciBub3cuIFRoZSBSVFBTZW5kZXIgaXMgc3RhcnRlZCBpblxuICAgICAgICAvLyBzZXRMb2NhbERlc2NyaXB0aW9uLlxuICAgICAgICBwYy5fdHJhbnNjZWl2ZShwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0sXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIGlzTmV3VHJhY2spO1xuICAgICAgfSBlbHNlIGlmIChkZXNjcmlwdGlvbi50eXBlID09PSAnYW5zd2VyJyAmJiAhcmVqZWN0ZWQpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIgPSBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF07XG4gICAgICAgIGljZUdhdGhlcmVyID0gdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXI7XG4gICAgICAgIGljZVRyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydDtcbiAgICAgICAgZHRsc1RyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQ7XG4gICAgICAgIHJ0cFJlY2VpdmVyID0gdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7XG4gICAgICAgIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnMgPSB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzO1xuICAgICAgICBsb2NhbENhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzO1xuXG4gICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzID1cbiAgICAgICAgICAgIHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM7XG4gICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5yZW1vdGVDYXBhYmlsaXRpZXMgPVxuICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzO1xuICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucnRjcFBhcmFtZXRlcnMgPSBydGNwUGFyYW1ldGVycztcblxuICAgICAgICBpZiAoY2FuZHMubGVuZ3RoICYmIGljZVRyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgICAgICBpZiAoKGlzSWNlTGl0ZSB8fCBpc0NvbXBsZXRlKSAmJlxuICAgICAgICAgICAgICAoIXVzaW5nQnVuZGxlIHx8IHNkcE1MaW5lSW5kZXggPT09IDApKSB7XG4gICAgICAgICAgICBpY2VUcmFuc3BvcnQuc2V0UmVtb3RlQ2FuZGlkYXRlcyhjYW5kcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbmRzLmZvckVhY2goZnVuY3Rpb24oY2FuZGlkYXRlKSB7XG4gICAgICAgICAgICAgIG1heWJlQWRkQ2FuZGlkYXRlKHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCwgY2FuZGlkYXRlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkge1xuICAgICAgICAgIGlmIChpY2VUcmFuc3BvcnQuc3RhdGUgPT09ICduZXcnKSB7XG4gICAgICAgICAgICBpY2VUcmFuc3BvcnQuc3RhcnQoaWNlR2F0aGVyZXIsIHJlbW90ZUljZVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgJ2NvbnRyb2xsaW5nJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkdGxzVHJhbnNwb3J0LnN0YXRlID09PSAnbmV3Jykge1xuICAgICAgICAgICAgZHRsc1RyYW5zcG9ydC5zdGFydChyZW1vdGVEdGxzUGFyYW1ldGVycyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdGhlIG9mZmVyIGNvbnRhaW5lZCBSVFggYnV0IHRoZSBhbnN3ZXIgZGlkIG5vdCxcbiAgICAgICAgLy8gcmVtb3ZlIFJUWCBmcm9tIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnMuXG4gICAgICAgIHZhciBjb21tb25DYXBhYmlsaXRpZXMgPSBnZXRDb21tb25DYXBhYmlsaXRpZXMoXG4gICAgICAgICAgdHJhbnNjZWl2ZXIubG9jYWxDYXBhYmlsaXRpZXMsXG4gICAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzKTtcblxuICAgICAgICB2YXIgaGFzUnR4ID0gY29tbW9uQ2FwYWJpbGl0aWVzLmNvZGVjcy5maWx0ZXIoZnVuY3Rpb24oYykge1xuICAgICAgICAgIHJldHVybiBjLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3J0eCc7XG4gICAgICAgIH0pLmxlbmd0aDtcbiAgICAgICAgaWYgKCFoYXNSdHggJiYgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgpIHtcbiAgICAgICAgICBkZWxldGUgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHg7XG4gICAgICAgIH1cblxuICAgICAgICBwYy5fdHJhbnNjZWl2ZSh0cmFuc2NlaXZlcixcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdyZWN2b25seScsXG4gICAgICAgICAgICBkaXJlY3Rpb24gPT09ICdzZW5kcmVjdicgfHwgZGlyZWN0aW9uID09PSAnc2VuZG9ubHknKTtcblxuICAgICAgICAvLyBUT0RPOiByZXdyaXRlIHRvIHVzZSBodHRwOi8vdzNjLmdpdGh1Yi5pby93ZWJydGMtcGMvI3NldC1hc3NvY2lhdGVkLXJlbW90ZS1zdHJlYW1zXG4gICAgICAgIGlmIChydHBSZWNlaXZlciAmJlxuICAgICAgICAgICAgKGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdzZW5kb25seScpKSB7XG4gICAgICAgICAgdHJhY2sgPSBydHBSZWNlaXZlci50cmFjaztcbiAgICAgICAgICBpZiAocmVtb3RlTXNpZCkge1xuICAgICAgICAgICAgaWYgKCFzdHJlYW1zW3JlbW90ZU1zaWQuc3RyZWFtXSkge1xuICAgICAgICAgICAgICBzdHJlYW1zW3JlbW90ZU1zaWQuc3RyZWFtXSA9IG5ldyB3aW5kb3cuTWVkaWFTdHJlYW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZFRyYWNrVG9TdHJlYW1BbmRGaXJlRXZlbnQodHJhY2ssIHN0cmVhbXNbcmVtb3RlTXNpZC5zdHJlYW1dKTtcbiAgICAgICAgICAgIHJlY2VpdmVyTGlzdC5wdXNoKFt0cmFjaywgcnRwUmVjZWl2ZXIsIHN0cmVhbXNbcmVtb3RlTXNpZC5zdHJlYW1dXSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghc3RyZWFtcy5kZWZhdWx0KSB7XG4gICAgICAgICAgICAgIHN0cmVhbXMuZGVmYXVsdCA9IG5ldyB3aW5kb3cuTWVkaWFTdHJlYW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZFRyYWNrVG9TdHJlYW1BbmRGaXJlRXZlbnQodHJhY2ssIHN0cmVhbXMuZGVmYXVsdCk7XG4gICAgICAgICAgICByZWNlaXZlckxpc3QucHVzaChbdHJhY2ssIHJ0cFJlY2VpdmVyLCBzdHJlYW1zLmRlZmF1bHRdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRklYTUU6IGFjdHVhbGx5IHRoZSByZWNlaXZlciBzaG91bGQgYmUgY3JlYXRlZCBsYXRlci5cbiAgICAgICAgICBkZWxldGUgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChwYy5fZHRsc1JvbGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcGMuX2R0bHNSb2xlID0gZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJyA/ICdhY3RpdmUnIDogJ3Bhc3NpdmUnO1xuICAgIH1cblxuICAgIHBjLl9yZW1vdGVEZXNjcmlwdGlvbiA9IHtcbiAgICAgIHR5cGU6IGRlc2NyaXB0aW9uLnR5cGUsXG4gICAgICBzZHA6IGRlc2NyaXB0aW9uLnNkcFxuICAgIH07XG4gICAgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdvZmZlcicpIHtcbiAgICAgIHBjLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnaGF2ZS1yZW1vdGUtb2ZmZXInKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdzdGFibGUnKTtcbiAgICB9XG4gICAgT2JqZWN0LmtleXMoc3RyZWFtcykuZm9yRWFjaChmdW5jdGlvbihzaWQpIHtcbiAgICAgIHZhciBzdHJlYW0gPSBzdHJlYW1zW3NpZF07XG4gICAgICBpZiAoc3RyZWFtLmdldFRyYWNrcygpLmxlbmd0aCkge1xuICAgICAgICBpZiAocGMucmVtb3RlU3RyZWFtcy5pbmRleE9mKHN0cmVhbSkgPT09IC0xKSB7XG4gICAgICAgICAgcGMucmVtb3RlU3RyZWFtcy5wdXNoKHN0cmVhbSk7XG4gICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdhZGRzdHJlYW0nKTtcbiAgICAgICAgICBldmVudC5zdHJlYW0gPSBzdHJlYW07XG4gICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBwYy5fZGlzcGF0Y2hFdmVudCgnYWRkc3RyZWFtJywgZXZlbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVjZWl2ZXJMaXN0LmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgIHZhciB0cmFjayA9IGl0ZW1bMF07XG4gICAgICAgICAgdmFyIHJlY2VpdmVyID0gaXRlbVsxXTtcbiAgICAgICAgICBpZiAoc3RyZWFtLmlkICE9PSBpdGVtWzJdLmlkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGZpcmVBZGRUcmFjayhwYywgdHJhY2ssIHJlY2VpdmVyLCBbc3RyZWFtXSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJlY2VpdmVyTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZpcmVBZGRUcmFjayhwYywgaXRlbVswXSwgaXRlbVsxXSwgW10pO1xuICAgIH0pO1xuXG4gICAgLy8gY2hlY2sgd2hldGhlciBhZGRJY2VDYW5kaWRhdGUoe30pIHdhcyBjYWxsZWQgd2l0aGluIGZvdXIgc2Vjb25kcyBhZnRlclxuICAgIC8vIHNldFJlbW90ZURlc2NyaXB0aW9uLlxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCEocGMgJiYgcGMudHJhbnNjZWl2ZXJzKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBwYy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0ICYmXG4gICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQuc3RhdGUgPT09ICduZXcnICYmXG4gICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQuZ2V0UmVtb3RlQ2FuZGlkYXRlcygpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1RpbWVvdXQgZm9yIGFkZFJlbW90ZUNhbmRpZGF0ZS4gQ29uc2lkZXIgc2VuZGluZyAnICtcbiAgICAgICAgICAgICAgJ2FuIGVuZC1vZi1jYW5kaWRhdGVzIG5vdGlmaWNhdGlvbicpO1xuICAgICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5hZGRSZW1vdGVDYW5kaWRhdGUoe30pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCA0MDAwKTtcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICAvKiBub3QgeWV0XG4gICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuY2xvc2UoKTtcbiAgICAgIH1cbiAgICAgICovXG4gICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0KSB7XG4gICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdG9wKCk7XG4gICAgICB9XG4gICAgICBpZiAodHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydCkge1xuICAgICAgICB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0LnN0b3AoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIucnRwU2VuZGVyLnN0b3AoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikge1xuICAgICAgICB0cmFuc2NlaXZlci5ydHBSZWNlaXZlci5zdG9wKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gRklYTUU6IGNsZWFuIHVwIHRyYWNrcywgbG9jYWwgc3RyZWFtcywgcmVtb3RlIHN0cmVhbXMsIGV0Y1xuICAgIHRoaXMuX2lzQ2xvc2VkID0gdHJ1ZTtcbiAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnY2xvc2VkJyk7XG4gIH07XG5cbiAgLy8gVXBkYXRlIHRoZSBzaWduYWxpbmcgc3RhdGUuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fdXBkYXRlU2lnbmFsaW5nU3RhdGUgPSBmdW5jdGlvbihuZXdTdGF0ZSkge1xuICAgIHRoaXMuc2lnbmFsaW5nU3RhdGUgPSBuZXdTdGF0ZTtcbiAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ3NpZ25hbGluZ3N0YXRlY2hhbmdlJyk7XG4gICAgdGhpcy5fZGlzcGF0Y2hFdmVudCgnc2lnbmFsaW5nc3RhdGVjaGFuZ2UnLCBldmVudCk7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdG8gZmlyZSB0aGUgbmVnb3RpYXRpb25uZWVkZWQgZXZlbnQuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fbWF5YmVGaXJlTmVnb3RpYXRpb25OZWVkZWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGMgPSB0aGlzO1xuICAgIGlmICh0aGlzLnNpZ25hbGluZ1N0YXRlICE9PSAnc3RhYmxlJyB8fCB0aGlzLm5lZWROZWdvdGlhdGlvbiA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm5lZWROZWdvdGlhdGlvbiA9IHRydWU7XG4gICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAocGMubmVlZE5lZ290aWF0aW9uKSB7XG4gICAgICAgIHBjLm5lZWROZWdvdGlhdGlvbiA9IGZhbHNlO1xuICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ25lZ290aWF0aW9ubmVlZGVkJyk7XG4gICAgICAgIHBjLl9kaXNwYXRjaEV2ZW50KCduZWdvdGlhdGlvbm5lZWRlZCcsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9LCAwKTtcbiAgfTtcblxuICAvLyBVcGRhdGUgdGhlIGljZSBjb25uZWN0aW9uIHN0YXRlLlxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX3VwZGF0ZUljZUNvbm5lY3Rpb25TdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuZXdTdGF0ZTtcbiAgICB2YXIgc3RhdGVzID0ge1xuICAgICAgJ25ldyc6IDAsXG4gICAgICBjbG9zZWQ6IDAsXG4gICAgICBjaGVja2luZzogMCxcbiAgICAgIGNvbm5lY3RlZDogMCxcbiAgICAgIGNvbXBsZXRlZDogMCxcbiAgICAgIGRpc2Nvbm5lY3RlZDogMCxcbiAgICAgIGZhaWxlZDogMFxuICAgIH07XG4gICAgdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgaWYgKHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCAmJiAhdHJhbnNjZWl2ZXIucmVqZWN0ZWQpIHtcbiAgICAgICAgc3RhdGVzW3RyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdGF0ZV0rKztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIG5ld1N0YXRlID0gJ25ldyc7XG4gICAgaWYgKHN0YXRlcy5mYWlsZWQgPiAwKSB7XG4gICAgICBuZXdTdGF0ZSA9ICdmYWlsZWQnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGVzLmNoZWNraW5nID4gMCkge1xuICAgICAgbmV3U3RhdGUgPSAnY2hlY2tpbmcnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGVzLmRpc2Nvbm5lY3RlZCA+IDApIHtcbiAgICAgIG5ld1N0YXRlID0gJ2Rpc2Nvbm5lY3RlZCc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZXMubmV3ID4gMCkge1xuICAgICAgbmV3U3RhdGUgPSAnbmV3JztcbiAgICB9IGVsc2UgaWYgKHN0YXRlcy5jb25uZWN0ZWQgPiAwKSB7XG4gICAgICBuZXdTdGF0ZSA9ICdjb25uZWN0ZWQnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGVzLmNvbXBsZXRlZCA+IDApIHtcbiAgICAgIG5ld1N0YXRlID0gJ2NvbXBsZXRlZCc7XG4gICAgfVxuXG4gICAgaWYgKG5ld1N0YXRlICE9PSB0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSkge1xuICAgICAgdGhpcy5pY2VDb25uZWN0aW9uU3RhdGUgPSBuZXdTdGF0ZTtcbiAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJyk7XG4gICAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KCdpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCBldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFVwZGF0ZSB0aGUgY29ubmVjdGlvbiBzdGF0ZS5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl91cGRhdGVDb25uZWN0aW9uU3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbmV3U3RhdGU7XG4gICAgdmFyIHN0YXRlcyA9IHtcbiAgICAgICduZXcnOiAwLFxuICAgICAgY2xvc2VkOiAwLFxuICAgICAgY29ubmVjdGluZzogMCxcbiAgICAgIGNvbm5lY3RlZDogMCxcbiAgICAgIGNvbXBsZXRlZDogMCxcbiAgICAgIGRpc2Nvbm5lY3RlZDogMCxcbiAgICAgIGZhaWxlZDogMFxuICAgIH07XG4gICAgdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgaWYgKHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCAmJiB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0ICYmXG4gICAgICAgICAgIXRyYW5zY2VpdmVyLnJlamVjdGVkKSB7XG4gICAgICAgIHN0YXRlc1t0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQuc3RhdGVdKys7XG4gICAgICAgIHN0YXRlc1t0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0LnN0YXRlXSsrO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIElDRVRyYW5zcG9ydC5jb21wbGV0ZWQgYW5kIGNvbm5lY3RlZCBhcmUgdGhlIHNhbWUgZm9yIHRoaXMgcHVycG9zZS5cbiAgICBzdGF0ZXMuY29ubmVjdGVkICs9IHN0YXRlcy5jb21wbGV0ZWQ7XG5cbiAgICBuZXdTdGF0ZSA9ICduZXcnO1xuICAgIGlmIChzdGF0ZXMuZmFpbGVkID4gMCkge1xuICAgICAgbmV3U3RhdGUgPSAnZmFpbGVkJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlcy5jb25uZWN0aW5nID4gMCkge1xuICAgICAgbmV3U3RhdGUgPSAnY29ubmVjdGluZyc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZXMuZGlzY29ubmVjdGVkID4gMCkge1xuICAgICAgbmV3U3RhdGUgPSAnZGlzY29ubmVjdGVkJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlcy5uZXcgPiAwKSB7XG4gICAgICBuZXdTdGF0ZSA9ICduZXcnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGVzLmNvbm5lY3RlZCA+IDApIHtcbiAgICAgIG5ld1N0YXRlID0gJ2Nvbm5lY3RlZCc7XG4gICAgfVxuXG4gICAgaWYgKG5ld1N0YXRlICE9PSB0aGlzLmNvbm5lY3Rpb25TdGF0ZSkge1xuICAgICAgdGhpcy5jb25uZWN0aW9uU3RhdGUgPSBuZXdTdGF0ZTtcbiAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnY29ubmVjdGlvbnN0YXRlY2hhbmdlJyk7XG4gICAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KCdjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCBldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwYyA9IHRoaXM7XG5cbiAgICBpZiAocGMuX2lzQ2xvc2VkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobWFrZUVycm9yKCdJbnZhbGlkU3RhdGVFcnJvcicsXG4gICAgICAgICAgJ0NhbiBub3QgY2FsbCBjcmVhdGVPZmZlciBhZnRlciBjbG9zZScpKTtcbiAgICB9XG5cbiAgICB2YXIgbnVtQXVkaW9UcmFja3MgPSBwYy50cmFuc2NlaXZlcnMuZmlsdGVyKGZ1bmN0aW9uKHQpIHtcbiAgICAgIHJldHVybiB0LmtpbmQgPT09ICdhdWRpbyc7XG4gICAgfSkubGVuZ3RoO1xuICAgIHZhciBudW1WaWRlb1RyYWNrcyA9IHBjLnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24odCkge1xuICAgICAgcmV0dXJuIHQua2luZCA9PT0gJ3ZpZGVvJztcbiAgICB9KS5sZW5ndGg7XG5cbiAgICAvLyBEZXRlcm1pbmUgbnVtYmVyIG9mIGF1ZGlvIGFuZCB2aWRlbyB0cmFja3Mgd2UgbmVlZCB0byBzZW5kL3JlY3YuXG4gICAgdmFyIG9mZmVyT3B0aW9ucyA9IGFyZ3VtZW50c1swXTtcbiAgICBpZiAob2ZmZXJPcHRpb25zKSB7XG4gICAgICAvLyBSZWplY3QgQ2hyb21lIGxlZ2FjeSBjb25zdHJhaW50cy5cbiAgICAgIGlmIChvZmZlck9wdGlvbnMubWFuZGF0b3J5IHx8IG9mZmVyT3B0aW9ucy5vcHRpb25hbCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICAgJ0xlZ2FjeSBtYW5kYXRvcnkvb3B0aW9uYWwgY29uc3RyYWludHMgbm90IHN1cHBvcnRlZC4nKTtcbiAgICAgIH1cbiAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyA9PT0gdHJ1ZSkge1xuICAgICAgICAgIG51bUF1ZGlvVHJhY2tzID0gMTtcbiAgICAgICAgfSBlbHNlIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBudW1BdWRpb1RyYWNrcyA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbnVtQXVkaW9UcmFja3MgPSBvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvID09PSB0cnVlKSB7XG4gICAgICAgICAgbnVtVmlkZW9UcmFja3MgPSAxO1xuICAgICAgICB9IGVsc2UgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvID09PSBmYWxzZSkge1xuICAgICAgICAgIG51bVZpZGVvVHJhY2tzID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBudW1WaWRlb1RyYWNrcyA9IG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHtcbiAgICAgIGlmICh0cmFuc2NlaXZlci5raW5kID09PSAnYXVkaW8nKSB7XG4gICAgICAgIG51bUF1ZGlvVHJhY2tzLS07XG4gICAgICAgIGlmIChudW1BdWRpb1RyYWNrcyA8IDApIHtcbiAgICAgICAgICB0cmFuc2NlaXZlci53YW50UmVjZWl2ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICd2aWRlbycpIHtcbiAgICAgICAgbnVtVmlkZW9UcmFja3MtLTtcbiAgICAgICAgaWYgKG51bVZpZGVvVHJhY2tzIDwgMCkge1xuICAgICAgICAgIHRyYW5zY2VpdmVyLndhbnRSZWNlaXZlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBNLWxpbmVzIGZvciByZWN2b25seSBzdHJlYW1zLlxuICAgIHdoaWxlIChudW1BdWRpb1RyYWNrcyA+IDAgfHwgbnVtVmlkZW9UcmFja3MgPiAwKSB7XG4gICAgICBpZiAobnVtQXVkaW9UcmFja3MgPiAwKSB7XG4gICAgICAgIHBjLl9jcmVhdGVUcmFuc2NlaXZlcignYXVkaW8nKTtcbiAgICAgICAgbnVtQXVkaW9UcmFja3MtLTtcbiAgICAgIH1cbiAgICAgIGlmIChudW1WaWRlb1RyYWNrcyA+IDApIHtcbiAgICAgICAgcGMuX2NyZWF0ZVRyYW5zY2VpdmVyKCd2aWRlbycpO1xuICAgICAgICBudW1WaWRlb1RyYWNrcy0tO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzZHAgPSBTRFBVdGlscy53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZShwYy5fc2RwU2Vzc2lvbklkLFxuICAgICAgICBwYy5fc2RwU2Vzc2lvblZlcnNpb24rKyk7XG4gICAgcGMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIsIHNkcE1MaW5lSW5kZXgpIHtcbiAgICAgIC8vIEZvciBlYWNoIHRyYWNrLCBjcmVhdGUgYW4gaWNlIGdhdGhlcmVyLCBpY2UgdHJhbnNwb3J0LFxuICAgICAgLy8gZHRscyB0cmFuc3BvcnQsIHBvdGVudGlhbGx5IHJ0cHNlbmRlciBhbmQgcnRwcmVjZWl2ZXIuXG4gICAgICB2YXIgdHJhY2sgPSB0cmFuc2NlaXZlci50cmFjaztcbiAgICAgIHZhciBraW5kID0gdHJhbnNjZWl2ZXIua2luZDtcbiAgICAgIHZhciBtaWQgPSB0cmFuc2NlaXZlci5taWQgfHwgU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyKCk7XG4gICAgICB0cmFuc2NlaXZlci5taWQgPSBtaWQ7XG5cbiAgICAgIGlmICghdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIgPSBwYy5fY3JlYXRlSWNlR2F0aGVyZXIoc2RwTUxpbmVJbmRleCxcbiAgICAgICAgICAgIHBjLnVzaW5nQnVuZGxlKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGxvY2FsQ2FwYWJpbGl0aWVzID0gd2luZG93LlJUQ1J0cFNlbmRlci5nZXRDYXBhYmlsaXRpZXMoa2luZCk7XG4gICAgICAvLyBmaWx0ZXIgUlRYIHVudGlsIGFkZGl0aW9uYWwgc3R1ZmYgbmVlZGVkIGZvciBSVFggaXMgaW1wbGVtZW50ZWRcbiAgICAgIC8vIGluIGFkYXB0ZXIuanNcbiAgICAgIGlmIChlZGdlVmVyc2lvbiA8IDE1MDE5KSB7XG4gICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcyA9IGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcy5maWx0ZXIoXG4gICAgICAgICAgICBmdW5jdGlvbihjb2RlYykge1xuICAgICAgICAgICAgICByZXR1cm4gY29kZWMubmFtZSAhPT0gJ3J0eCc7XG4gICAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGNvZGVjKSB7XG4gICAgICAgIC8vIHdvcmsgYXJvdW5kIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD02NTUyXG4gICAgICAgIC8vIGJ5IGFkZGluZyBsZXZlbC1hc3ltbWV0cnktYWxsb3dlZD0xXG4gICAgICAgIGlmIChjb2RlYy5uYW1lID09PSAnSDI2NCcgJiZcbiAgICAgICAgICAgIGNvZGVjLnBhcmFtZXRlcnNbJ2xldmVsLWFzeW1tZXRyeS1hbGxvd2VkJ10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvZGVjLnBhcmFtZXRlcnNbJ2xldmVsLWFzeW1tZXRyeS1hbGxvd2VkJ10gPSAnMSc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmb3Igc3Vic2VxdWVudCBvZmZlcnMsIHdlIG1pZ2h0IGhhdmUgdG8gcmUtdXNlIHRoZSBwYXlsb2FkXG4gICAgICAgIC8vIHR5cGUgb2YgdGhlIGxhc3Qgb2ZmZXIuXG4gICAgICAgIGlmICh0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXMgJiZcbiAgICAgICAgICAgIHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MpIHtcbiAgICAgICAgICB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24ocmVtb3RlQ29kZWMpIHtcbiAgICAgICAgICAgIGlmIChjb2RlYy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IHJlbW90ZUNvZGVjLm5hbWUudG9Mb3dlckNhc2UoKSAmJlxuICAgICAgICAgICAgICAgIGNvZGVjLmNsb2NrUmF0ZSA9PT0gcmVtb3RlQ29kZWMuY2xvY2tSYXRlKSB7XG4gICAgICAgICAgICAgIGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlID0gcmVtb3RlQ29kZWMucGF5bG9hZFR5cGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGhkckV4dCkge1xuICAgICAgICB2YXIgcmVtb3RlRXh0ZW5zaW9ucyA9IHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcyAmJlxuICAgICAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMgfHwgW107XG4gICAgICAgIHJlbW90ZUV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbihySGRyRXh0KSB7XG4gICAgICAgICAgaWYgKGhkckV4dC51cmkgPT09IHJIZHJFeHQudXJpKSB7XG4gICAgICAgICAgICBoZHJFeHQuaWQgPSBySGRyRXh0LmlkO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gZ2VuZXJhdGUgYW4gc3NyYyBub3csIHRvIGJlIHVzZWQgbGF0ZXIgaW4gcnRwU2VuZGVyLnNlbmRcbiAgICAgIHZhciBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzID0gdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVycyB8fCBbe1xuICAgICAgICBzc3JjOiAoMiAqIHNkcE1MaW5lSW5kZXggKyAxKSAqIDEwMDFcbiAgICAgIH1dO1xuICAgICAgaWYgKHRyYWNrKSB7XG4gICAgICAgIC8vIGFkZCBSVFhcbiAgICAgICAgaWYgKGVkZ2VWZXJzaW9uID49IDE1MDE5ICYmIGtpbmQgPT09ICd2aWRlbycgJiZcbiAgICAgICAgICAgICFzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCkge1xuICAgICAgICAgIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4ID0ge1xuICAgICAgICAgICAgc3NyYzogc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICsgMVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRyYW5zY2VpdmVyLndhbnRSZWNlaXZlKSB7XG4gICAgICAgIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyID0gbmV3IHdpbmRvdy5SVENSdHBSZWNlaXZlcihcbiAgICAgICAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQsIGtpbmQpO1xuICAgICAgfVxuXG4gICAgICB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcyA9IGxvY2FsQ2FwYWJpbGl0aWVzO1xuICAgICAgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVycyA9IHNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7XG4gICAgfSk7XG5cbiAgICAvLyBhbHdheXMgb2ZmZXIgQlVORExFIGFuZCBkaXNwb3NlIG9uIHJldHVybiBpZiBub3Qgc3VwcG9ydGVkLlxuICAgIGlmIChwYy5fY29uZmlnLmJ1bmRsZVBvbGljeSAhPT0gJ21heC1jb21wYXQnKSB7XG4gICAgICBzZHAgKz0gJ2E9Z3JvdXA6QlVORExFICcgKyBwYy50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHQubWlkO1xuICAgICAgfSkuam9pbignICcpICsgJ1xcclxcbic7XG4gICAgfVxuICAgIHNkcCArPSAnYT1pY2Utb3B0aW9uczp0cmlja2xlXFxyXFxuJztcblxuICAgIHBjLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyLCBzZHBNTGluZUluZGV4KSB7XG4gICAgICBzZHAgKz0gd3JpdGVNZWRpYVNlY3Rpb24odHJhbnNjZWl2ZXIsIHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzLFxuICAgICAgICAgICdvZmZlcicsIHRyYW5zY2VpdmVyLnN0cmVhbSwgcGMuX2R0bHNSb2xlKTtcbiAgICAgIHNkcCArPSAnYT1ydGNwLXJzaXplXFxyXFxuJztcblxuICAgICAgaWYgKHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyICYmIHBjLmljZUdhdGhlcmluZ1N0YXRlICE9PSAnbmV3JyAmJlxuICAgICAgICAgIChzZHBNTGluZUluZGV4ID09PSAwIHx8ICFwYy51c2luZ0J1bmRsZSkpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuZ2V0TG9jYWxDYW5kaWRhdGVzKCkuZm9yRWFjaChmdW5jdGlvbihjYW5kKSB7XG4gICAgICAgICAgY2FuZC5jb21wb25lbnQgPSAxO1xuICAgICAgICAgIHNkcCArPSAnYT0nICsgU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUoY2FuZCkgKyAnXFxyXFxuJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLnN0YXRlID09PSAnY29tcGxldGVkJykge1xuICAgICAgICAgIHNkcCArPSAnYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcbic7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBkZXNjID0gbmV3IHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe1xuICAgICAgdHlwZTogJ29mZmVyJyxcbiAgICAgIHNkcDogc2RwXG4gICAgfSk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZXNjKTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlQW5zd2VyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBjID0gdGhpcztcblxuICAgIGlmIChwYy5faXNDbG9zZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChtYWtlRXJyb3IoJ0ludmFsaWRTdGF0ZUVycm9yJyxcbiAgICAgICAgICAnQ2FuIG5vdCBjYWxsIGNyZWF0ZUFuc3dlciBhZnRlciBjbG9zZScpKTtcbiAgICB9XG5cbiAgICBpZiAoIShwYy5zaWduYWxpbmdTdGF0ZSA9PT0gJ2hhdmUtcmVtb3RlLW9mZmVyJyB8fFxuICAgICAgICBwYy5zaWduYWxpbmdTdGF0ZSA9PT0gJ2hhdmUtbG9jYWwtcHJhbnN3ZXInKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG1ha2VFcnJvcignSW52YWxpZFN0YXRlRXJyb3InLFxuICAgICAgICAgICdDYW4gbm90IGNhbGwgY3JlYXRlQW5zd2VyIGluIHNpZ25hbGluZ1N0YXRlICcgKyBwYy5zaWduYWxpbmdTdGF0ZSkpO1xuICAgIH1cblxuICAgIHZhciBzZHAgPSBTRFBVdGlscy53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZShwYy5fc2RwU2Vzc2lvbklkLFxuICAgICAgICBwYy5fc2RwU2Vzc2lvblZlcnNpb24rKyk7XG4gICAgaWYgKHBjLnVzaW5nQnVuZGxlKSB7XG4gICAgICBzZHAgKz0gJ2E9Z3JvdXA6QlVORExFICcgKyBwYy50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHQubWlkO1xuICAgICAgfSkuam9pbignICcpICsgJ1xcclxcbic7XG4gICAgfVxuICAgIHNkcCArPSAnYT1pY2Utb3B0aW9uczp0cmlja2xlXFxyXFxuJztcblxuICAgIHZhciBtZWRpYVNlY3Rpb25zSW5PZmZlciA9IFNEUFV0aWxzLmdldE1lZGlhU2VjdGlvbnMoXG4gICAgICAgIHBjLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApLmxlbmd0aDtcbiAgICBwYy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlciwgc2RwTUxpbmVJbmRleCkge1xuICAgICAgaWYgKHNkcE1MaW5lSW5kZXggKyAxID4gbWVkaWFTZWN0aW9uc0luT2ZmZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRyYW5zY2VpdmVyLnJlamVjdGVkKSB7XG4gICAgICAgIGlmICh0cmFuc2NlaXZlci5raW5kID09PSAnYXBwbGljYXRpb24nKSB7XG4gICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnByb3RvY29sID09PSAnRFRMUy9TQ1RQJykgeyAvLyBsZWdhY3kgZm10XG4gICAgICAgICAgICBzZHAgKz0gJ209YXBwbGljYXRpb24gMCBEVExTL1NDVFAgNTAwMFxcclxcbic7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNkcCArPSAnbT1hcHBsaWNhdGlvbiAwICcgKyB0cmFuc2NlaXZlci5wcm90b2NvbCArXG4gICAgICAgICAgICAgICAgJyB3ZWJydGMtZGF0YWNoYW5uZWxcXHJcXG4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5raW5kID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgc2RwICs9ICdtPWF1ZGlvIDAgVURQL1RMUy9SVFAvU0FWUEYgMFxcclxcbicgK1xuICAgICAgICAgICAgICAnYT1ydHBtYXA6MCBQQ01VLzgwMDBcXHJcXG4nO1xuICAgICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICd2aWRlbycpIHtcbiAgICAgICAgICBzZHAgKz0gJ209dmlkZW8gMCBVRFAvVExTL1JUUC9TQVZQRiAxMjBcXHJcXG4nICtcbiAgICAgICAgICAgICAgJ2E9cnRwbWFwOjEyMCBWUDgvOTAwMDBcXHJcXG4nO1xuICAgICAgICB9XG4gICAgICAgIHNkcCArPSAnYz1JTiBJUDQgMC4wLjAuMFxcclxcbicgK1xuICAgICAgICAgICAgJ2E9aW5hY3RpdmVcXHJcXG4nICtcbiAgICAgICAgICAgICdhPW1pZDonICsgdHJhbnNjZWl2ZXIubWlkICsgJ1xcclxcbic7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gRklYTUU6IGxvb2sgYXQgZGlyZWN0aW9uLlxuICAgICAgaWYgKHRyYW5zY2VpdmVyLnN0cmVhbSkge1xuICAgICAgICB2YXIgbG9jYWxUcmFjaztcbiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICBsb2NhbFRyYWNrID0gdHJhbnNjZWl2ZXIuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF07XG4gICAgICAgIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIua2luZCA9PT0gJ3ZpZGVvJykge1xuICAgICAgICAgIGxvY2FsVHJhY2sgPSB0cmFuc2NlaXZlci5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobG9jYWxUcmFjaykge1xuICAgICAgICAgIC8vIGFkZCBSVFhcbiAgICAgICAgICBpZiAoZWRnZVZlcnNpb24gPj0gMTUwMTkgJiYgdHJhbnNjZWl2ZXIua2luZCA9PT0gJ3ZpZGVvJyAmJlxuICAgICAgICAgICAgICAhdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgpIHtcbiAgICAgICAgICAgIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4ID0ge1xuICAgICAgICAgICAgICBzc3JjOiB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgKyAxXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDYWxjdWxhdGUgaW50ZXJzZWN0aW9uIG9mIGNhcGFiaWxpdGllcy5cbiAgICAgIHZhciBjb21tb25DYXBhYmlsaXRpZXMgPSBnZXRDb21tb25DYXBhYmlsaXRpZXMoXG4gICAgICAgICAgdHJhbnNjZWl2ZXIubG9jYWxDYXBhYmlsaXRpZXMsXG4gICAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzKTtcblxuICAgICAgdmFyIGhhc1J0eCA9IGNvbW1vbkNhcGFiaWxpdGllcy5jb2RlY3MuZmlsdGVyKGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgcmV0dXJuIGMubmFtZS50b0xvd2VyQ2FzZSgpID09PSAncnR4JztcbiAgICAgIH0pLmxlbmd0aDtcbiAgICAgIGlmICghaGFzUnR4ICYmIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4KSB7XG4gICAgICAgIGRlbGV0ZSB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eDtcbiAgICAgIH1cblxuICAgICAgc2RwICs9IHdyaXRlTWVkaWFTZWN0aW9uKHRyYW5zY2VpdmVyLCBjb21tb25DYXBhYmlsaXRpZXMsXG4gICAgICAgICAgJ2Fuc3dlcicsIHRyYW5zY2VpdmVyLnN0cmVhbSwgcGMuX2R0bHNSb2xlKTtcbiAgICAgIGlmICh0cmFuc2NlaXZlci5ydGNwUGFyYW1ldGVycyAmJlxuICAgICAgICAgIHRyYW5zY2VpdmVyLnJ0Y3BQYXJhbWV0ZXJzLnJlZHVjZWRTaXplKSB7XG4gICAgICAgIHNkcCArPSAnYT1ydGNwLXJzaXplXFxyXFxuJztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBkZXNjID0gbmV3IHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe1xuICAgICAgdHlwZTogJ2Fuc3dlcicsXG4gICAgICBzZHA6IHNkcFxuICAgIH0pO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGVzYyk7XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGNhbmRpZGF0ZSkge1xuICAgIHZhciBwYyA9IHRoaXM7XG4gICAgdmFyIHNlY3Rpb25zO1xuICAgIGlmIChjYW5kaWRhdGUgJiYgIShjYW5kaWRhdGUuc2RwTUxpbmVJbmRleCAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgIGNhbmRpZGF0ZS5zZHBNaWQpKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcignc2RwTUxpbmVJbmRleCBvciBzZHBNaWQgcmVxdWlyZWQnKSk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogbmVlZHMgdG8gZ28gaW50byBvcHMgcXVldWUuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgaWYgKCFwYy5fcmVtb3RlRGVzY3JpcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdChtYWtlRXJyb3IoJ0ludmFsaWRTdGF0ZUVycm9yJyxcbiAgICAgICAgICAgICdDYW4gbm90IGFkZCBJQ0UgY2FuZGlkYXRlIHdpdGhvdXQgYSByZW1vdGUgZGVzY3JpcHRpb24nKSk7XG4gICAgICB9IGVsc2UgaWYgKCFjYW5kaWRhdGUgfHwgY2FuZGlkYXRlLmNhbmRpZGF0ZSA9PT0gJycpIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwYy50cmFuc2NlaXZlcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBpZiAocGMudHJhbnNjZWl2ZXJzW2pdLnJlamVjdGVkKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGMudHJhbnNjZWl2ZXJzW2pdLmljZVRyYW5zcG9ydC5hZGRSZW1vdGVDYW5kaWRhdGUoe30pO1xuICAgICAgICAgIHNlY3Rpb25zID0gU0RQVXRpbHMuZ2V0TWVkaWFTZWN0aW9ucyhwYy5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKTtcbiAgICAgICAgICBzZWN0aW9uc1tqXSArPSAnYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcbic7XG4gICAgICAgICAgcGMuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCA9XG4gICAgICAgICAgICAgIFNEUFV0aWxzLmdldERlc2NyaXB0aW9uKHBjLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApICtcbiAgICAgICAgICAgICAgc2VjdGlvbnMuam9pbignJyk7XG4gICAgICAgICAgaWYgKHBjLnVzaW5nQnVuZGxlKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBzZHBNTGluZUluZGV4ID0gY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXg7XG4gICAgICAgIGlmIChjYW5kaWRhdGUuc2RwTWlkKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYy50cmFuc2NlaXZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChwYy50cmFuc2NlaXZlcnNbaV0ubWlkID09PSBjYW5kaWRhdGUuc2RwTWlkKSB7XG4gICAgICAgICAgICAgIHNkcE1MaW5lSW5kZXggPSBpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRyYW5zY2VpdmVyID0gcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdO1xuICAgICAgICBpZiAodHJhbnNjZWl2ZXIpIHtcbiAgICAgICAgICBpZiAodHJhbnNjZWl2ZXIucmVqZWN0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBjYW5kID0gT2JqZWN0LmtleXMoY2FuZGlkYXRlLmNhbmRpZGF0ZSkubGVuZ3RoID4gMCA/XG4gICAgICAgICAgICAgIFNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlKGNhbmRpZGF0ZS5jYW5kaWRhdGUpIDoge307XG4gICAgICAgICAgLy8gSWdub3JlIENocm9tZSdzIGludmFsaWQgY2FuZGlkYXRlcyBzaW5jZSBFZGdlIGRvZXMgbm90IGxpa2UgdGhlbS5cbiAgICAgICAgICBpZiAoY2FuZC5wcm90b2NvbCA9PT0gJ3RjcCcgJiYgKGNhbmQucG9ydCA9PT0gMCB8fCBjYW5kLnBvcnQgPT09IDkpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBJZ25vcmUgUlRDUCBjYW5kaWRhdGVzLCB3ZSBhc3N1bWUgUlRDUC1NVVguXG4gICAgICAgICAgaWYgKGNhbmQuY29tcG9uZW50ICYmIGNhbmQuY29tcG9uZW50ICE9PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyB3aGVuIHVzaW5nIGJ1bmRsZSwgYXZvaWQgYWRkaW5nIGNhbmRpZGF0ZXMgdG8gdGhlIHdyb25nXG4gICAgICAgICAgLy8gaWNlIHRyYW5zcG9ydC4gQW5kIGF2b2lkIGFkZGluZyBjYW5kaWRhdGVzIGFkZGVkIGluIHRoZSBTRFAuXG4gICAgICAgICAgaWYgKHNkcE1MaW5lSW5kZXggPT09IDAgfHwgKHNkcE1MaW5lSW5kZXggPiAwICYmXG4gICAgICAgICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCAhPT0gcGMudHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydCkpIHtcbiAgICAgICAgICAgIGlmICghbWF5YmVBZGRDYW5kaWRhdGUodHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LCBjYW5kKSkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KG1ha2VFcnJvcignT3BlcmF0aW9uRXJyb3InLFxuICAgICAgICAgICAgICAgICAgJ0NhbiBub3QgYWRkIElDRSBjYW5kaWRhdGUnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gdXBkYXRlIHRoZSByZW1vdGVEZXNjcmlwdGlvbi5cbiAgICAgICAgICB2YXIgY2FuZGlkYXRlU3RyaW5nID0gY2FuZGlkYXRlLmNhbmRpZGF0ZS50cmltKCk7XG4gICAgICAgICAgaWYgKGNhbmRpZGF0ZVN0cmluZy5pbmRleE9mKCdhPScpID09PSAwKSB7XG4gICAgICAgICAgICBjYW5kaWRhdGVTdHJpbmcgPSBjYW5kaWRhdGVTdHJpbmcuc3Vic3RyKDIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZWN0aW9ucyA9IFNEUFV0aWxzLmdldE1lZGlhU2VjdGlvbnMocGMuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCk7XG4gICAgICAgICAgc2VjdGlvbnNbc2RwTUxpbmVJbmRleF0gKz0gJ2E9JyArXG4gICAgICAgICAgICAgIChjYW5kLnR5cGUgPyBjYW5kaWRhdGVTdHJpbmcgOiAnZW5kLW9mLWNhbmRpZGF0ZXMnKVxuICAgICAgICAgICAgICArICdcXHJcXG4nO1xuICAgICAgICAgIHBjLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHAgPVxuICAgICAgICAgICAgICBTRFBVdGlscy5nZXREZXNjcmlwdGlvbihwYy5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKSArXG4gICAgICAgICAgICAgIHNlY3Rpb25zLmpvaW4oJycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiByZWplY3QobWFrZUVycm9yKCdPcGVyYXRpb25FcnJvcicsXG4gICAgICAgICAgICAgICdDYW4gbm90IGFkZCBJQ0UgY2FuZGlkYXRlJykpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXNvbHZlKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICBpZiAoc2VsZWN0b3IgJiYgc2VsZWN0b3IgaW5zdGFuY2VvZiB3aW5kb3cuTWVkaWFTdHJlYW1UcmFjaykge1xuICAgICAgdmFyIHNlbmRlck9yUmVjZWl2ZXIgPSBudWxsO1xuICAgICAgdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyICYmXG4gICAgICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIudHJhY2sgPT09IHNlbGVjdG9yKSB7XG4gICAgICAgICAgc2VuZGVyT3JSZWNlaXZlciA9IHRyYW5zY2VpdmVyLnJ0cFNlbmRlcjtcbiAgICAgICAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBSZWNlaXZlciAmJlxuICAgICAgICAgICAgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIudHJhY2sgPT09IHNlbGVjdG9yKSB7XG4gICAgICAgICAgc2VuZGVyT3JSZWNlaXZlciA9IHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmICghc2VuZGVyT3JSZWNlaXZlcikge1xuICAgICAgICB0aHJvdyBtYWtlRXJyb3IoJ0ludmFsaWRBY2Nlc3NFcnJvcicsICdJbnZhbGlkIHNlbGVjdG9yLicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlbmRlck9yUmVjZWl2ZXIuZ2V0U3RhdHMoKTtcbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICBbJ3J0cFNlbmRlcicsICdydHBSZWNlaXZlcicsICdpY2VHYXRoZXJlcicsICdpY2VUcmFuc3BvcnQnLFxuICAgICAgICAgICdkdGxzVHJhbnNwb3J0J10uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgICAgIGlmICh0cmFuc2NlaXZlclttZXRob2RdKSB7XG4gICAgICAgICAgICAgIHByb21pc2VzLnB1c2godHJhbnNjZWl2ZXJbbWV0aG9kXS5nZXRTdGF0cygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYWxsU3RhdHMpIHtcbiAgICAgIHZhciByZXN1bHRzID0gbmV3IE1hcCgpO1xuICAgICAgYWxsU3RhdHMuZm9yRWFjaChmdW5jdGlvbihzdGF0cykge1xuICAgICAgICBzdGF0cy5mb3JFYWNoKGZ1bmN0aW9uKHN0YXQpIHtcbiAgICAgICAgICByZXN1bHRzLnNldChzdGF0LmlkLCBzdGF0KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIGZpeCBsb3ctbGV2ZWwgc3RhdCBuYW1lcyBhbmQgcmV0dXJuIE1hcCBpbnN0ZWFkIG9mIG9iamVjdC5cbiAgdmFyIG9ydGNPYmplY3RzID0gWydSVENSdHBTZW5kZXInLCAnUlRDUnRwUmVjZWl2ZXInLCAnUlRDSWNlR2F0aGVyZXInLFxuICAgICdSVENJY2VUcmFuc3BvcnQnLCAnUlRDRHRsc1RyYW5zcG9ydCddO1xuICBvcnRjT2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uKG9ydGNPYmplY3ROYW1lKSB7XG4gICAgdmFyIG9iaiA9IHdpbmRvd1tvcnRjT2JqZWN0TmFtZV07XG4gICAgaWYgKG9iaiAmJiBvYmoucHJvdG90eXBlICYmIG9iai5wcm90b3R5cGUuZ2V0U3RhdHMpIHtcbiAgICAgIHZhciBuYXRpdmVHZXRzdGF0cyA9IG9iai5wcm90b3R5cGUuZ2V0U3RhdHM7XG4gICAgICBvYmoucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBuYXRpdmVHZXRzdGF0cy5hcHBseSh0aGlzKVxuICAgICAgICAudGhlbihmdW5jdGlvbihuYXRpdmVTdGF0cykge1xuICAgICAgICAgIHZhciBtYXBTdGF0cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICBPYmplY3Qua2V5cyhuYXRpdmVTdGF0cykuZm9yRWFjaChmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgbmF0aXZlU3RhdHNbaWRdLnR5cGUgPSBmaXhTdGF0c1R5cGUobmF0aXZlU3RhdHNbaWRdKTtcbiAgICAgICAgICAgIG1hcFN0YXRzLnNldChpZCwgbmF0aXZlU3RhdHNbaWRdKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gbWFwU3RhdHM7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIGxlZ2FjeSBjYWxsYmFjayBzaGltcy4gU2hvdWxkIGJlIG1vdmVkIHRvIGFkYXB0ZXIuanMgc29tZSBkYXlzLlxuICB2YXIgbWV0aG9kcyA9IFsnY3JlYXRlT2ZmZXInLCAnY3JlYXRlQW5zd2VyJ107XG4gIG1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICB2YXIgbmF0aXZlTWV0aG9kID0gUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF07XG4gICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnZnVuY3Rpb24nIHx8XG4gICAgICAgICAgdHlwZW9mIGFyZ3NbMV0gPT09ICdmdW5jdGlvbicpIHsgLy8gbGVnYWN5XG4gICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgW2FyZ3VtZW50c1syXV0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhcmdzWzBdLmFwcGx5KG51bGwsIFtkZXNjcmlwdGlvbl0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFyZ3NbMV0uYXBwbHkobnVsbCwgW2Vycm9yXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9KTtcblxuICBtZXRob2RzID0gWydzZXRMb2NhbERlc2NyaXB0aW9uJywgJ3NldFJlbW90ZURlc2NyaXB0aW9uJywgJ2FkZEljZUNhbmRpZGF0ZSddO1xuICBtZXRob2RzLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgdmFyIG5hdGl2ZU1ldGhvZCA9IFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdO1xuICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gJ2Z1bmN0aW9uJyB8fFxuICAgICAgICAgIHR5cGVvZiBhcmdzWzJdID09PSAnZnVuY3Rpb24nKSB7IC8vIGxlZ2FjeVxuICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhcmdzWzFdLmFwcGx5KG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMl0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFyZ3NbMl0uYXBwbHkobnVsbCwgW2Vycm9yXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBnZXRTdGF0cyBpcyBzcGVjaWFsLiBJdCBkb2Vzbid0IGhhdmUgYSBzcGVjIGxlZ2FjeSBtZXRob2QgeWV0IHdlIHN1cHBvcnRcbiAgLy8gZ2V0U3RhdHMoc29tZXRoaW5nLCBjYikgd2l0aG91dCBlcnJvciBjYWxsYmFja3MuXG4gIFsnZ2V0U3RhdHMnXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgIHZhciBuYXRpdmVNZXRob2QgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTtcbiAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICBpZiAodHlwZW9mIGFyZ3NbMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYXJnc1sxXS5hcHBseShudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH0pO1xuXG4gIHJldHVybiBSVENQZWVyQ29ubmVjdGlvbjtcbn07XG4iLCIvKiFcbiogc2NyZWVuZnVsbFxuKiB2NS4yLjAgLSAyMDIxLTExLTAzXG4qIChjKSBTaW5kcmUgU29yaHVzOyBNSVQgTGljZW5zZVxuKi9cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgZG9jdW1lbnQgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LmRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5kb2N1bWVudCA6IHt9O1xuXHR2YXIgaXNDb21tb25qcyA9IHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzO1xuXG5cdHZhciBmbiA9IChmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHZhbDtcblxuXHRcdHZhciBmbk1hcCA9IFtcblx0XHRcdFtcblx0XHRcdFx0J3JlcXVlc3RGdWxsc2NyZWVuJyxcblx0XHRcdFx0J2V4aXRGdWxsc2NyZWVuJyxcblx0XHRcdFx0J2Z1bGxzY3JlZW5FbGVtZW50Jyxcblx0XHRcdFx0J2Z1bGxzY3JlZW5FbmFibGVkJyxcblx0XHRcdFx0J2Z1bGxzY3JlZW5jaGFuZ2UnLFxuXHRcdFx0XHQnZnVsbHNjcmVlbmVycm9yJ1xuXHRcdFx0XSxcblx0XHRcdC8vIE5ldyBXZWJLaXRcblx0XHRcdFtcblx0XHRcdFx0J3dlYmtpdFJlcXVlc3RGdWxsc2NyZWVuJyxcblx0XHRcdFx0J3dlYmtpdEV4aXRGdWxsc2NyZWVuJyxcblx0XHRcdFx0J3dlYmtpdEZ1bGxzY3JlZW5FbGVtZW50Jyxcblx0XHRcdFx0J3dlYmtpdEZ1bGxzY3JlZW5FbmFibGVkJyxcblx0XHRcdFx0J3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLFxuXHRcdFx0XHQnd2Via2l0ZnVsbHNjcmVlbmVycm9yJ1xuXG5cdFx0XHRdLFxuXHRcdFx0Ly8gT2xkIFdlYktpdFxuXHRcdFx0W1xuXHRcdFx0XHQnd2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4nLFxuXHRcdFx0XHQnd2Via2l0Q2FuY2VsRnVsbFNjcmVlbicsXG5cdFx0XHRcdCd3ZWJraXRDdXJyZW50RnVsbFNjcmVlbkVsZW1lbnQnLFxuXHRcdFx0XHQnd2Via2l0Q2FuY2VsRnVsbFNjcmVlbicsXG5cdFx0XHRcdCd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJyxcblx0XHRcdFx0J3dlYmtpdGZ1bGxzY3JlZW5lcnJvcidcblxuXHRcdFx0XSxcblx0XHRcdFtcblx0XHRcdFx0J21velJlcXVlc3RGdWxsU2NyZWVuJyxcblx0XHRcdFx0J21vekNhbmNlbEZ1bGxTY3JlZW4nLFxuXHRcdFx0XHQnbW96RnVsbFNjcmVlbkVsZW1lbnQnLFxuXHRcdFx0XHQnbW96RnVsbFNjcmVlbkVuYWJsZWQnLFxuXHRcdFx0XHQnbW96ZnVsbHNjcmVlbmNoYW5nZScsXG5cdFx0XHRcdCdtb3pmdWxsc2NyZWVuZXJyb3InXG5cdFx0XHRdLFxuXHRcdFx0W1xuXHRcdFx0XHQnbXNSZXF1ZXN0RnVsbHNjcmVlbicsXG5cdFx0XHRcdCdtc0V4aXRGdWxsc2NyZWVuJyxcblx0XHRcdFx0J21zRnVsbHNjcmVlbkVsZW1lbnQnLFxuXHRcdFx0XHQnbXNGdWxsc2NyZWVuRW5hYmxlZCcsXG5cdFx0XHRcdCdNU0Z1bGxzY3JlZW5DaGFuZ2UnLFxuXHRcdFx0XHQnTVNGdWxsc2NyZWVuRXJyb3InXG5cdFx0XHRdXG5cdFx0XTtcblxuXHRcdHZhciBpID0gMDtcblx0XHR2YXIgbCA9IGZuTWFwLmxlbmd0aDtcblx0XHR2YXIgcmV0ID0ge307XG5cblx0XHRmb3IgKDsgaSA8IGw7IGkrKykge1xuXHRcdFx0dmFsID0gZm5NYXBbaV07XG5cdFx0XHRpZiAodmFsICYmIHZhbFsxXSBpbiBkb2N1bWVudCkge1xuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0cmV0W2ZuTWFwWzBdW2ldXSA9IHZhbFtpXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fSkoKTtcblxuXHR2YXIgZXZlbnROYW1lTWFwID0ge1xuXHRcdGNoYW5nZTogZm4uZnVsbHNjcmVlbmNoYW5nZSxcblx0XHRlcnJvcjogZm4uZnVsbHNjcmVlbmVycm9yXG5cdH07XG5cblx0dmFyIHNjcmVlbmZ1bGwgPSB7XG5cdFx0cmVxdWVzdDogZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcdHZhciBvbkZ1bGxTY3JlZW5FbnRlcmVkID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHRoaXMub2ZmKCdjaGFuZ2UnLCBvbkZ1bGxTY3JlZW5FbnRlcmVkKTtcblx0XHRcdFx0XHRyZXNvbHZlKCk7XG5cdFx0XHRcdH0uYmluZCh0aGlzKTtcblxuXHRcdFx0XHR0aGlzLm9uKCdjaGFuZ2UnLCBvbkZ1bGxTY3JlZW5FbnRlcmVkKTtcblxuXHRcdFx0XHRlbGVtZW50ID0gZWxlbWVudCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cblx0XHRcdFx0dmFyIHJldHVyblByb21pc2UgPSBlbGVtZW50W2ZuLnJlcXVlc3RGdWxsc2NyZWVuXShvcHRpb25zKTtcblxuXHRcdFx0XHRpZiAocmV0dXJuUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcblx0XHRcdFx0XHRyZXR1cm5Qcm9taXNlLnRoZW4ob25GdWxsU2NyZWVuRW50ZXJlZCkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdFx0fVxuXHRcdFx0fS5iaW5kKHRoaXMpKTtcblx0XHR9LFxuXHRcdGV4aXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcdGlmICghdGhpcy5pc0Z1bGxzY3JlZW4pIHtcblx0XHRcdFx0XHRyZXNvbHZlKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIG9uRnVsbFNjcmVlbkV4aXQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0dGhpcy5vZmYoJ2NoYW5nZScsIG9uRnVsbFNjcmVlbkV4aXQpO1xuXHRcdFx0XHRcdHJlc29sdmUoKTtcblx0XHRcdFx0fS5iaW5kKHRoaXMpO1xuXG5cdFx0XHRcdHRoaXMub24oJ2NoYW5nZScsIG9uRnVsbFNjcmVlbkV4aXQpO1xuXG5cdFx0XHRcdHZhciByZXR1cm5Qcm9taXNlID0gZG9jdW1lbnRbZm4uZXhpdEZ1bGxzY3JlZW5dKCk7XG5cblx0XHRcdFx0aWYgKHJldHVyblByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG5cdFx0XHRcdFx0cmV0dXJuUHJvbWlzZS50aGVuKG9uRnVsbFNjcmVlbkV4aXQpLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0uYmluZCh0aGlzKSk7XG5cdFx0fSxcblx0XHR0b2dnbGU6IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5pc0Z1bGxzY3JlZW4gPyB0aGlzLmV4aXQoKSA6IHRoaXMucmVxdWVzdChlbGVtZW50LCBvcHRpb25zKTtcblx0XHR9LFxuXHRcdG9uY2hhbmdlOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0XHRcdHRoaXMub24oJ2NoYW5nZScsIGNhbGxiYWNrKTtcblx0XHR9LFxuXHRcdG9uZXJyb3I6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHRcdFx0dGhpcy5vbignZXJyb3InLCBjYWxsYmFjayk7XG5cdFx0fSxcblx0XHRvbjogZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuXHRcdFx0dmFyIGV2ZW50TmFtZSA9IGV2ZW50TmFtZU1hcFtldmVudF07XG5cdFx0XHRpZiAoZXZlbnROYW1lKSB7XG5cdFx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYWxsYmFjaywgZmFsc2UpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0b2ZmOiBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG5cdFx0XHR2YXIgZXZlbnROYW1lID0gZXZlbnROYW1lTWFwW2V2ZW50XTtcblx0XHRcdGlmIChldmVudE5hbWUpIHtcblx0XHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGNhbGxiYWNrLCBmYWxzZSk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRyYXc6IGZuXG5cdH07XG5cblx0aWYgKCFmbikge1xuXHRcdGlmIChpc0NvbW1vbmpzKSB7XG5cdFx0XHRtb2R1bGUuZXhwb3J0cyA9IHtpc0VuYWJsZWQ6IGZhbHNlfTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0d2luZG93LnNjcmVlbmZ1bGwgPSB7aXNFbmFibGVkOiBmYWxzZX07XG5cdFx0fVxuXG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc2NyZWVuZnVsbCwge1xuXHRcdGlzRnVsbHNjcmVlbjoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHJldHVybiBCb29sZWFuKGRvY3VtZW50W2ZuLmZ1bGxzY3JlZW5FbGVtZW50XSk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRlbGVtZW50OiB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHJldHVybiBkb2N1bWVudFtmbi5mdWxsc2NyZWVuRWxlbWVudF07XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRpc0VuYWJsZWQ6IHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Ly8gQ29lcmNlIHRvIGJvb2xlYW4gaW4gY2FzZSBvZiBvbGQgV2ViS2l0XG5cdFx0XHRcdHJldHVybiBCb29sZWFuKGRvY3VtZW50W2ZuLmZ1bGxzY3JlZW5FbmFibGVkXSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblxuXHRpZiAoaXNDb21tb25qcykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gc2NyZWVuZnVsbDtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuc2NyZWVuZnVsbCA9IHNjcmVlbmZ1bGw7XG5cdH1cbn0pKCk7XG4iLCIvKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcblxuLy8gU0RQIGhlbHBlcnMuXG52YXIgU0RQVXRpbHMgPSB7fTtcblxuLy8gR2VuZXJhdGUgYW4gYWxwaGFudW1lcmljIGlkZW50aWZpZXIgZm9yIGNuYW1lIG9yIG1pZHMuXG4vLyBUT0RPOiB1c2UgVVVJRHMgaW5zdGVhZD8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vamVkLzk4Mjg4M1xuU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgMTApO1xufTtcblxuLy8gVGhlIFJUQ1AgQ05BTUUgdXNlZCBieSBhbGwgcGVlcmNvbm5lY3Rpb25zIGZyb20gdGhlIHNhbWUgSlMuXG5TRFBVdGlscy5sb2NhbENOYW1lID0gU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyKCk7XG5cbi8vIFNwbGl0cyBTRFAgaW50byBsaW5lcywgZGVhbGluZyB3aXRoIGJvdGggQ1JMRiBhbmQgTEYuXG5TRFBVdGlscy5zcGxpdExpbmVzID0gZnVuY3Rpb24oYmxvYikge1xuICByZXR1cm4gYmxvYi50cmltKCkuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgcmV0dXJuIGxpbmUudHJpbSgpO1xuICB9KTtcbn07XG4vLyBTcGxpdHMgU0RQIGludG8gc2Vzc2lvbnBhcnQgYW5kIG1lZGlhc2VjdGlvbnMuIEVuc3VyZXMgQ1JMRi5cblNEUFV0aWxzLnNwbGl0U2VjdGlvbnMgPSBmdW5jdGlvbihibG9iKSB7XG4gIHZhciBwYXJ0cyA9IGJsb2Iuc3BsaXQoJ1xcbm09Jyk7XG4gIHJldHVybiBwYXJ0cy5tYXAoZnVuY3Rpb24ocGFydCwgaW5kZXgpIHtcbiAgICByZXR1cm4gKGluZGV4ID4gMCA/ICdtPScgKyBwYXJ0IDogcGFydCkudHJpbSgpICsgJ1xcclxcbic7XG4gIH0pO1xufTtcblxuLy8gcmV0dXJucyB0aGUgc2Vzc2lvbiBkZXNjcmlwdGlvbi5cblNEUFV0aWxzLmdldERlc2NyaXB0aW9uID0gZnVuY3Rpb24oYmxvYikge1xuICB2YXIgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKGJsb2IpO1xuICByZXR1cm4gc2VjdGlvbnMgJiYgc2VjdGlvbnNbMF07XG59O1xuXG4vLyByZXR1cm5zIHRoZSBpbmRpdmlkdWFsIG1lZGlhIHNlY3Rpb25zLlxuU0RQVXRpbHMuZ2V0TWVkaWFTZWN0aW9ucyA9IGZ1bmN0aW9uKGJsb2IpIHtcbiAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhibG9iKTtcbiAgc2VjdGlvbnMuc2hpZnQoKTtcbiAgcmV0dXJuIHNlY3Rpb25zO1xufTtcblxuLy8gUmV0dXJucyBsaW5lcyB0aGF0IHN0YXJ0IHdpdGggYSBjZXJ0YWluIHByZWZpeC5cblNEUFV0aWxzLm1hdGNoUHJlZml4ID0gZnVuY3Rpb24oYmxvYiwgcHJlZml4KSB7XG4gIHJldHVybiBTRFBVdGlscy5zcGxpdExpbmVzKGJsb2IpLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7XG4gICAgcmV0dXJuIGxpbmUuaW5kZXhPZihwcmVmaXgpID09PSAwO1xuICB9KTtcbn07XG5cbi8vIFBhcnNlcyBhbiBJQ0UgY2FuZGlkYXRlIGxpbmUuIFNhbXBsZSBpbnB1dDpcbi8vIGNhbmRpZGF0ZTo3MDI3ODYzNTAgMiB1ZHAgNDE4MTk5MDIgOC44LjguOCA2MDc2OSB0eXAgcmVsYXkgcmFkZHIgOC44LjguOFxuLy8gcnBvcnQgNTU5OTZcIlxuU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBwYXJ0cztcbiAgLy8gUGFyc2UgYm90aCB2YXJpYW50cy5cbiAgaWYgKGxpbmUuaW5kZXhPZignYT1jYW5kaWRhdGU6JykgPT09IDApIHtcbiAgICBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDEyKS5zcGxpdCgnICcpO1xuICB9IGVsc2Uge1xuICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTApLnNwbGl0KCcgJyk7XG4gIH1cblxuICB2YXIgY2FuZGlkYXRlID0ge1xuICAgIGZvdW5kYXRpb246IHBhcnRzWzBdLFxuICAgIGNvbXBvbmVudDogcGFyc2VJbnQocGFydHNbMV0sIDEwKSxcbiAgICBwcm90b2NvbDogcGFydHNbMl0udG9Mb3dlckNhc2UoKSxcbiAgICBwcmlvcml0eTogcGFyc2VJbnQocGFydHNbM10sIDEwKSxcbiAgICBpcDogcGFydHNbNF0sXG4gICAgYWRkcmVzczogcGFydHNbNF0sIC8vIGFkZHJlc3MgaXMgYW4gYWxpYXMgZm9yIGlwLlxuICAgIHBvcnQ6IHBhcnNlSW50KHBhcnRzWzVdLCAxMCksXG4gICAgLy8gc2tpcCBwYXJ0c1s2XSA9PSAndHlwJ1xuICAgIHR5cGU6IHBhcnRzWzddXG4gIH07XG5cbiAgZm9yICh2YXIgaSA9IDg7IGkgPCBwYXJ0cy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHN3aXRjaCAocGFydHNbaV0pIHtcbiAgICAgIGNhc2UgJ3JhZGRyJzpcbiAgICAgICAgY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzID0gcGFydHNbaSArIDFdO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Jwb3J0JzpcbiAgICAgICAgY2FuZGlkYXRlLnJlbGF0ZWRQb3J0ID0gcGFyc2VJbnQocGFydHNbaSArIDFdLCAxMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGNwdHlwZSc6XG4gICAgICAgIGNhbmRpZGF0ZS50Y3BUeXBlID0gcGFydHNbaSArIDFdO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3VmcmFnJzpcbiAgICAgICAgY2FuZGlkYXRlLnVmcmFnID0gcGFydHNbaSArIDFdOyAvLyBmb3IgYmFja3dhcmQgY29tcGFiaWxpdHkuXG4gICAgICAgIGNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50ID0gcGFydHNbaSArIDFdO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6IC8vIGV4dGVuc2lvbiBoYW5kbGluZywgaW4gcGFydGljdWxhciB1ZnJhZ1xuICAgICAgICBjYW5kaWRhdGVbcGFydHNbaV1dID0gcGFydHNbaSArIDFdO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNhbmRpZGF0ZTtcbn07XG5cbi8vIFRyYW5zbGF0ZXMgYSBjYW5kaWRhdGUgb2JqZWN0IGludG8gU0RQIGNhbmRpZGF0ZSBhdHRyaWJ1dGUuXG5TRFBVdGlscy53cml0ZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGNhbmRpZGF0ZSkge1xuICB2YXIgc2RwID0gW107XG4gIHNkcC5wdXNoKGNhbmRpZGF0ZS5mb3VuZGF0aW9uKTtcbiAgc2RwLnB1c2goY2FuZGlkYXRlLmNvbXBvbmVudCk7XG4gIHNkcC5wdXNoKGNhbmRpZGF0ZS5wcm90b2NvbC50b1VwcGVyQ2FzZSgpKTtcbiAgc2RwLnB1c2goY2FuZGlkYXRlLnByaW9yaXR5KTtcbiAgc2RwLnB1c2goY2FuZGlkYXRlLmFkZHJlc3MgfHwgY2FuZGlkYXRlLmlwKTtcbiAgc2RwLnB1c2goY2FuZGlkYXRlLnBvcnQpO1xuXG4gIHZhciB0eXBlID0gY2FuZGlkYXRlLnR5cGU7XG4gIHNkcC5wdXNoKCd0eXAnKTtcbiAgc2RwLnB1c2godHlwZSk7XG4gIGlmICh0eXBlICE9PSAnaG9zdCcgJiYgY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzICYmXG4gICAgICBjYW5kaWRhdGUucmVsYXRlZFBvcnQpIHtcbiAgICBzZHAucHVzaCgncmFkZHInKTtcbiAgICBzZHAucHVzaChjYW5kaWRhdGUucmVsYXRlZEFkZHJlc3MpO1xuICAgIHNkcC5wdXNoKCdycG9ydCcpO1xuICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCk7XG4gIH1cbiAgaWYgKGNhbmRpZGF0ZS50Y3BUeXBlICYmIGNhbmRpZGF0ZS5wcm90b2NvbC50b0xvd2VyQ2FzZSgpID09PSAndGNwJykge1xuICAgIHNkcC5wdXNoKCd0Y3B0eXBlJyk7XG4gICAgc2RwLnB1c2goY2FuZGlkYXRlLnRjcFR5cGUpO1xuICB9XG4gIGlmIChjYW5kaWRhdGUudXNlcm5hbWVGcmFnbWVudCB8fCBjYW5kaWRhdGUudWZyYWcpIHtcbiAgICBzZHAucHVzaCgndWZyYWcnKTtcbiAgICBzZHAucHVzaChjYW5kaWRhdGUudXNlcm5hbWVGcmFnbWVudCB8fCBjYW5kaWRhdGUudWZyYWcpO1xuICB9XG4gIHJldHVybiAnY2FuZGlkYXRlOicgKyBzZHAuam9pbignICcpO1xufTtcblxuLy8gUGFyc2VzIGFuIGljZS1vcHRpb25zIGxpbmUsIHJldHVybnMgYW4gYXJyYXkgb2Ygb3B0aW9uIHRhZ3MuXG4vLyBhPWljZS1vcHRpb25zOmZvbyBiYXJcblNEUFV0aWxzLnBhcnNlSWNlT3B0aW9ucyA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgcmV0dXJuIGxpbmUuc3Vic3RyKDE0KS5zcGxpdCgnICcpO1xufTtcblxuLy8gUGFyc2VzIGFuIHJ0cG1hcCBsaW5lLCByZXR1cm5zIFJUQ1J0cENvZGRlY1BhcmFtZXRlcnMuIFNhbXBsZSBpbnB1dDpcbi8vIGE9cnRwbWFwOjExMSBvcHVzLzQ4MDAwLzJcblNEUFV0aWxzLnBhcnNlUnRwTWFwID0gZnVuY3Rpb24obGluZSkge1xuICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cig5KS5zcGxpdCgnICcpO1xuICB2YXIgcGFyc2VkID0ge1xuICAgIHBheWxvYWRUeXBlOiBwYXJzZUludChwYXJ0cy5zaGlmdCgpLCAxMCkgLy8gd2FzOiBpZFxuICB9O1xuXG4gIHBhcnRzID0gcGFydHNbMF0uc3BsaXQoJy8nKTtcblxuICBwYXJzZWQubmFtZSA9IHBhcnRzWzBdO1xuICBwYXJzZWQuY2xvY2tSYXRlID0gcGFyc2VJbnQocGFydHNbMV0sIDEwKTsgLy8gd2FzOiBjbG9ja3JhdGVcbiAgcGFyc2VkLmNoYW5uZWxzID0gcGFydHMubGVuZ3RoID09PSAzID8gcGFyc2VJbnQocGFydHNbMl0sIDEwKSA6IDE7XG4gIC8vIGxlZ2FjeSBhbGlhcywgZ290IHJlbmFtZWQgYmFjayB0byBjaGFubmVscyBpbiBPUlRDLlxuICBwYXJzZWQubnVtQ2hhbm5lbHMgPSBwYXJzZWQuY2hhbm5lbHM7XG4gIHJldHVybiBwYXJzZWQ7XG59O1xuXG4vLyBHZW5lcmF0ZSBhbiBhPXJ0cG1hcCBsaW5lIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yXG4vLyBSVENSdHBDb2RlY1BhcmFtZXRlcnMuXG5TRFBVdGlscy53cml0ZVJ0cE1hcCA9IGZ1bmN0aW9uKGNvZGVjKSB7XG4gIHZhciBwdCA9IGNvZGVjLnBheWxvYWRUeXBlO1xuICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHB0ID0gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7XG4gIH1cbiAgdmFyIGNoYW5uZWxzID0gY29kZWMuY2hhbm5lbHMgfHwgY29kZWMubnVtQ2hhbm5lbHMgfHwgMTtcbiAgcmV0dXJuICdhPXJ0cG1hcDonICsgcHQgKyAnICcgKyBjb2RlYy5uYW1lICsgJy8nICsgY29kZWMuY2xvY2tSYXRlICtcbiAgICAgIChjaGFubmVscyAhPT0gMSA/ICcvJyArIGNoYW5uZWxzIDogJycpICsgJ1xcclxcbic7XG59O1xuXG4vLyBQYXJzZXMgYW4gYT1leHRtYXAgbGluZSAoaGVhZGVyZXh0ZW5zaW9uIGZyb20gUkZDIDUyODUpLiBTYW1wbGUgaW5wdXQ6XG4vLyBhPWV4dG1hcDoyIHVybjppZXRmOnBhcmFtczpydHAtaGRyZXh0OnRvZmZzZXRcbi8vIGE9ZXh0bWFwOjIvc2VuZG9ubHkgdXJuOmlldGY6cGFyYW1zOnJ0cC1oZHJleHQ6dG9mZnNldFxuU0RQVXRpbHMucGFyc2VFeHRtYXAgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKDkpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgaWQ6IHBhcnNlSW50KHBhcnRzWzBdLCAxMCksXG4gICAgZGlyZWN0aW9uOiBwYXJ0c1swXS5pbmRleE9mKCcvJykgPiAwID8gcGFydHNbMF0uc3BsaXQoJy8nKVsxXSA6ICdzZW5kcmVjdicsXG4gICAgdXJpOiBwYXJ0c1sxXVxuICB9O1xufTtcblxuLy8gR2VuZXJhdGVzIGE9ZXh0bWFwIGxpbmUgZnJvbSBSVENSdHBIZWFkZXJFeHRlbnNpb25QYXJhbWV0ZXJzIG9yXG4vLyBSVENSdHBIZWFkZXJFeHRlbnNpb24uXG5TRFBVdGlscy53cml0ZUV4dG1hcCA9IGZ1bmN0aW9uKGhlYWRlckV4dGVuc2lvbikge1xuICByZXR1cm4gJ2E9ZXh0bWFwOicgKyAoaGVhZGVyRXh0ZW5zaW9uLmlkIHx8IGhlYWRlckV4dGVuc2lvbi5wcmVmZXJyZWRJZCkgK1xuICAgICAgKGhlYWRlckV4dGVuc2lvbi5kaXJlY3Rpb24gJiYgaGVhZGVyRXh0ZW5zaW9uLmRpcmVjdGlvbiAhPT0gJ3NlbmRyZWN2J1xuICAgICAgICA/ICcvJyArIGhlYWRlckV4dGVuc2lvbi5kaXJlY3Rpb25cbiAgICAgICAgOiAnJykgK1xuICAgICAgJyAnICsgaGVhZGVyRXh0ZW5zaW9uLnVyaSArICdcXHJcXG4nO1xufTtcblxuLy8gUGFyc2VzIGFuIGZ0bXAgbGluZSwgcmV0dXJucyBkaWN0aW9uYXJ5LiBTYW1wbGUgaW5wdXQ6XG4vLyBhPWZtdHA6OTYgdmJyPW9uO2NuZz1vblxuLy8gQWxzbyBkZWFscyB3aXRoIHZicj1vbjsgY25nPW9uXG5TRFBVdGlscy5wYXJzZUZtdHAgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBwYXJzZWQgPSB7fTtcbiAgdmFyIGt2O1xuICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCc7Jyk7XG4gIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICBrdiA9IHBhcnRzW2pdLnRyaW0oKS5zcGxpdCgnPScpO1xuICAgIHBhcnNlZFtrdlswXS50cmltKCldID0ga3ZbMV07XG4gIH1cbiAgcmV0dXJuIHBhcnNlZDtcbn07XG5cbi8vIEdlbmVyYXRlcyBhbiBhPWZ0bXAgbGluZSBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuXG5TRFBVdGlscy53cml0ZUZtdHAgPSBmdW5jdGlvbihjb2RlYykge1xuICB2YXIgbGluZSA9ICcnO1xuICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTtcbiAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlO1xuICB9XG4gIGlmIChjb2RlYy5wYXJhbWV0ZXJzICYmIE9iamVjdC5rZXlzKGNvZGVjLnBhcmFtZXRlcnMpLmxlbmd0aCkge1xuICAgIHZhciBwYXJhbXMgPSBbXTtcbiAgICBPYmplY3Qua2V5cyhjb2RlYy5wYXJhbWV0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHBhcmFtKSB7XG4gICAgICBpZiAoY29kZWMucGFyYW1ldGVyc1twYXJhbV0pIHtcbiAgICAgICAgcGFyYW1zLnB1c2gocGFyYW0gKyAnPScgKyBjb2RlYy5wYXJhbWV0ZXJzW3BhcmFtXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJhbXMucHVzaChwYXJhbSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgbGluZSArPSAnYT1mbXRwOicgKyBwdCArICcgJyArIHBhcmFtcy5qb2luKCc7JykgKyAnXFxyXFxuJztcbiAgfVxuICByZXR1cm4gbGluZTtcbn07XG5cbi8vIFBhcnNlcyBhbiBydGNwLWZiIGxpbmUsIHJldHVybnMgUlRDUFJ0Y3BGZWVkYmFjayBvYmplY3QuIFNhbXBsZSBpbnB1dDpcbi8vIGE9cnRjcC1mYjo5OCBuYWNrIHJwc2lcblNEUFV0aWxzLnBhcnNlUnRjcEZiID0gZnVuY3Rpb24obGluZSkge1xuICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgdHlwZTogcGFydHMuc2hpZnQoKSxcbiAgICBwYXJhbWV0ZXI6IHBhcnRzLmpvaW4oJyAnKVxuICB9O1xufTtcbi8vIEdlbmVyYXRlIGE9cnRjcC1mYiBsaW5lcyBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuXG5TRFBVdGlscy53cml0ZVJ0Y3BGYiA9IGZ1bmN0aW9uKGNvZGVjKSB7XG4gIHZhciBsaW5lcyA9ICcnO1xuICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTtcbiAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlO1xuICB9XG4gIGlmIChjb2RlYy5ydGNwRmVlZGJhY2sgJiYgY29kZWMucnRjcEZlZWRiYWNrLmxlbmd0aCkge1xuICAgIC8vIEZJWE1FOiBzcGVjaWFsIGhhbmRsaW5nIGZvciB0cnItaW50P1xuICAgIGNvZGVjLnJ0Y3BGZWVkYmFjay5mb3JFYWNoKGZ1bmN0aW9uKGZiKSB7XG4gICAgICBsaW5lcyArPSAnYT1ydGNwLWZiOicgKyBwdCArICcgJyArIGZiLnR5cGUgK1xuICAgICAgKGZiLnBhcmFtZXRlciAmJiBmYi5wYXJhbWV0ZXIubGVuZ3RoID8gJyAnICsgZmIucGFyYW1ldGVyIDogJycpICtcbiAgICAgICAgICAnXFxyXFxuJztcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gbGluZXM7XG59O1xuXG4vLyBQYXJzZXMgYW4gUkZDIDU1NzYgc3NyYyBtZWRpYSBhdHRyaWJ1dGUuIFNhbXBsZSBpbnB1dDpcbi8vIGE9c3NyYzozNzM1OTI4NTU5IGNuYW1lOnNvbWV0aGluZ1xuU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBzcCA9IGxpbmUuaW5kZXhPZignICcpO1xuICB2YXIgcGFydHMgPSB7XG4gICAgc3NyYzogcGFyc2VJbnQobGluZS5zdWJzdHIoNywgc3AgLSA3KSwgMTApXG4gIH07XG4gIHZhciBjb2xvbiA9IGxpbmUuaW5kZXhPZignOicsIHNwKTtcbiAgaWYgKGNvbG9uID4gLTEpIHtcbiAgICBwYXJ0cy5hdHRyaWJ1dGUgPSBsaW5lLnN1YnN0cihzcCArIDEsIGNvbG9uIC0gc3AgLSAxKTtcbiAgICBwYXJ0cy52YWx1ZSA9IGxpbmUuc3Vic3RyKGNvbG9uICsgMSk7XG4gIH0gZWxzZSB7XG4gICAgcGFydHMuYXR0cmlidXRlID0gbGluZS5zdWJzdHIoc3AgKyAxKTtcbiAgfVxuICByZXR1cm4gcGFydHM7XG59O1xuXG5TRFBVdGlscy5wYXJzZVNzcmNHcm91cCA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIoMTMpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgc2VtYW50aWNzOiBwYXJ0cy5zaGlmdCgpLFxuICAgIHNzcmNzOiBwYXJ0cy5tYXAoZnVuY3Rpb24oc3NyYykge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KHNzcmMsIDEwKTtcbiAgICB9KVxuICB9O1xufTtcblxuLy8gRXh0cmFjdHMgdGhlIE1JRCAoUkZDIDU4ODgpIGZyb20gYSBtZWRpYSBzZWN0aW9uLlxuLy8gcmV0dXJucyB0aGUgTUlEIG9yIHVuZGVmaW5lZCBpZiBubyBtaWQgbGluZSB3YXMgZm91bmQuXG5TRFBVdGlscy5nZXRNaWQgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgdmFyIG1pZCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9bWlkOicpWzBdO1xuICBpZiAobWlkKSB7XG4gICAgcmV0dXJuIG1pZC5zdWJzdHIoNik7XG4gIH1cbn07XG5cblNEUFV0aWxzLnBhcnNlRmluZ2VycHJpbnQgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKDE0KS5zcGxpdCgnICcpO1xuICByZXR1cm4ge1xuICAgIGFsZ29yaXRobTogcGFydHNbMF0udG9Mb3dlckNhc2UoKSwgLy8gYWxnb3JpdGhtIGlzIGNhc2Utc2Vuc2l0aXZlIGluIEVkZ2UuXG4gICAgdmFsdWU6IHBhcnRzWzFdXG4gIH07XG59O1xuXG4vLyBFeHRyYWN0cyBEVExTIHBhcmFtZXRlcnMgZnJvbSBTRFAgbWVkaWEgc2VjdGlvbiBvciBzZXNzaW9ucGFydC5cbi8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seVxuLy8gICBnZXQgdGhlIGZpbmdlcnByaW50IGxpbmUgYXMgaW5wdXQuIFNlZSBhbHNvIGdldEljZVBhcmFtZXRlcnMuXG5TRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHtcbiAgdmFyIGxpbmVzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uICsgc2Vzc2lvbnBhcnQsXG4gICAgJ2E9ZmluZ2VycHJpbnQ6Jyk7XG4gIC8vIE5vdGU6IGE9c2V0dXAgbGluZSBpcyBpZ25vcmVkIHNpbmNlIHdlIHVzZSB0aGUgJ2F1dG8nIHJvbGUuXG4gIC8vIE5vdGUyOiAnYWxnb3JpdGhtJyBpcyBub3QgY2FzZSBzZW5zaXRpdmUgZXhjZXB0IGluIEVkZ2UuXG4gIHJldHVybiB7XG4gICAgcm9sZTogJ2F1dG8nLFxuICAgIGZpbmdlcnByaW50czogbGluZXMubWFwKFNEUFV0aWxzLnBhcnNlRmluZ2VycHJpbnQpXG4gIH07XG59O1xuXG4vLyBTZXJpYWxpemVzIERUTFMgcGFyYW1ldGVycyB0byBTRFAuXG5TRFBVdGlscy53cml0ZUR0bHNQYXJhbWV0ZXJzID0gZnVuY3Rpb24ocGFyYW1zLCBzZXR1cFR5cGUpIHtcbiAgdmFyIHNkcCA9ICdhPXNldHVwOicgKyBzZXR1cFR5cGUgKyAnXFxyXFxuJztcbiAgcGFyYW1zLmZpbmdlcnByaW50cy5mb3JFYWNoKGZ1bmN0aW9uKGZwKSB7XG4gICAgc2RwICs9ICdhPWZpbmdlcnByaW50OicgKyBmcC5hbGdvcml0aG0gKyAnICcgKyBmcC52YWx1ZSArICdcXHJcXG4nO1xuICB9KTtcbiAgcmV0dXJuIHNkcDtcbn07XG5cbi8vIFBhcnNlcyBhPWNyeXB0byBsaW5lcyBpbnRvXG4vLyAgIGh0dHBzOi8vcmF3Z2l0LmNvbS9hYm9iYS9lZGdlcnRjL21hc3Rlci9tc29ydGMtcnM0Lmh0bWwjZGljdGlvbmFyeS1ydGNzcnRwc2Rlc3BhcmFtZXRlcnMtbWVtYmVyc1xuU0RQVXRpbHMucGFyc2VDcnlwdG9MaW5lID0gZnVuY3Rpb24obGluZSkge1xuICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cig5KS5zcGxpdCgnICcpO1xuICByZXR1cm4ge1xuICAgIHRhZzogcGFyc2VJbnQocGFydHNbMF0sIDEwKSxcbiAgICBjcnlwdG9TdWl0ZTogcGFydHNbMV0sXG4gICAga2V5UGFyYW1zOiBwYXJ0c1syXSxcbiAgICBzZXNzaW9uUGFyYW1zOiBwYXJ0cy5zbGljZSgzKSxcbiAgfTtcbn07XG5cblNEUFV0aWxzLndyaXRlQ3J5cHRvTGluZSA9IGZ1bmN0aW9uKHBhcmFtZXRlcnMpIHtcbiAgcmV0dXJuICdhPWNyeXB0bzonICsgcGFyYW1ldGVycy50YWcgKyAnICcgK1xuICAgIHBhcmFtZXRlcnMuY3J5cHRvU3VpdGUgKyAnICcgK1xuICAgICh0eXBlb2YgcGFyYW1ldGVycy5rZXlQYXJhbXMgPT09ICdvYmplY3QnXG4gICAgICA/IFNEUFV0aWxzLndyaXRlQ3J5cHRvS2V5UGFyYW1zKHBhcmFtZXRlcnMua2V5UGFyYW1zKVxuICAgICAgOiBwYXJhbWV0ZXJzLmtleVBhcmFtcykgK1xuICAgIChwYXJhbWV0ZXJzLnNlc3Npb25QYXJhbXMgPyAnICcgKyBwYXJhbWV0ZXJzLnNlc3Npb25QYXJhbXMuam9pbignICcpIDogJycpICtcbiAgICAnXFxyXFxuJztcbn07XG5cbi8vIFBhcnNlcyB0aGUgY3J5cHRvIGtleSBwYXJhbWV0ZXJzIGludG9cbi8vICAgaHR0cHM6Ly9yYXdnaXQuY29tL2Fib2JhL2VkZ2VydGMvbWFzdGVyL21zb3J0Yy1yczQuaHRtbCNydGNzcnRwa2V5cGFyYW0qXG5TRFBVdGlscy5wYXJzZUNyeXB0b0tleVBhcmFtcyA9IGZ1bmN0aW9uKGtleVBhcmFtcykge1xuICBpZiAoa2V5UGFyYW1zLmluZGV4T2YoJ2lubGluZTonKSAhPT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHZhciBwYXJ0cyA9IGtleVBhcmFtcy5zdWJzdHIoNykuc3BsaXQoJ3wnKTtcbiAgcmV0dXJuIHtcbiAgICBrZXlNZXRob2Q6ICdpbmxpbmUnLFxuICAgIGtleVNhbHQ6IHBhcnRzWzBdLFxuICAgIGxpZmVUaW1lOiBwYXJ0c1sxXSxcbiAgICBta2lWYWx1ZTogcGFydHNbMl0gPyBwYXJ0c1syXS5zcGxpdCgnOicpWzBdIDogdW5kZWZpbmVkLFxuICAgIG1raUxlbmd0aDogcGFydHNbMl0gPyBwYXJ0c1syXS5zcGxpdCgnOicpWzFdIDogdW5kZWZpbmVkLFxuICB9O1xufTtcblxuU0RQVXRpbHMud3JpdGVDcnlwdG9LZXlQYXJhbXMgPSBmdW5jdGlvbihrZXlQYXJhbXMpIHtcbiAgcmV0dXJuIGtleVBhcmFtcy5rZXlNZXRob2QgKyAnOidcbiAgICArIGtleVBhcmFtcy5rZXlTYWx0ICtcbiAgICAoa2V5UGFyYW1zLmxpZmVUaW1lID8gJ3wnICsga2V5UGFyYW1zLmxpZmVUaW1lIDogJycpICtcbiAgICAoa2V5UGFyYW1zLm1raVZhbHVlICYmIGtleVBhcmFtcy5ta2lMZW5ndGhcbiAgICAgID8gJ3wnICsga2V5UGFyYW1zLm1raVZhbHVlICsgJzonICsga2V5UGFyYW1zLm1raUxlbmd0aFxuICAgICAgOiAnJyk7XG59O1xuXG4vLyBFeHRyYWN0cyBhbGwgU0RFUyBwYXJhbXRlcnMuXG5TRFBVdGlscy5nZXRDcnlwdG9QYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkge1xuICB2YXIgbGluZXMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24gKyBzZXNzaW9ucGFydCxcbiAgICAnYT1jcnlwdG86Jyk7XG4gIHJldHVybiBsaW5lcy5tYXAoU0RQVXRpbHMucGFyc2VDcnlwdG9MaW5lKTtcbn07XG5cbi8vIFBhcnNlcyBJQ0UgaW5mb3JtYXRpb24gZnJvbSBTRFAgbWVkaWEgc2VjdGlvbiBvciBzZXNzaW9ucGFydC5cbi8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seVxuLy8gICBnZXQgdGhlIGljZS11ZnJhZyBhbmQgaWNlLXB3ZCBsaW5lcyBhcyBpbnB1dC5cblNEUFV0aWxzLmdldEljZVBhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KSB7XG4gIHZhciB1ZnJhZyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiArIHNlc3Npb25wYXJ0LFxuICAgICdhPWljZS11ZnJhZzonKVswXTtcbiAgdmFyIHB3ZCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiArIHNlc3Npb25wYXJ0LFxuICAgICdhPWljZS1wd2Q6JylbMF07XG4gIGlmICghKHVmcmFnICYmIHB3ZCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4ge1xuICAgIHVzZXJuYW1lRnJhZ21lbnQ6IHVmcmFnLnN1YnN0cigxMiksXG4gICAgcGFzc3dvcmQ6IHB3ZC5zdWJzdHIoMTApLFxuICB9O1xufTtcblxuLy8gU2VyaWFsaXplcyBJQ0UgcGFyYW1ldGVycyB0byBTRFAuXG5TRFBVdGlscy53cml0ZUljZVBhcmFtZXRlcnMgPSBmdW5jdGlvbihwYXJhbXMpIHtcbiAgcmV0dXJuICdhPWljZS11ZnJhZzonICsgcGFyYW1zLnVzZXJuYW1lRnJhZ21lbnQgKyAnXFxyXFxuJyArXG4gICAgICAnYT1pY2UtcHdkOicgKyBwYXJhbXMucGFzc3dvcmQgKyAnXFxyXFxuJztcbn07XG5cbi8vIFBhcnNlcyB0aGUgU0RQIG1lZGlhIHNlY3Rpb24gYW5kIHJldHVybnMgUlRDUnRwUGFyYW1ldGVycy5cblNEUFV0aWxzLnBhcnNlUnRwUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICB2YXIgZGVzY3JpcHRpb24gPSB7XG4gICAgY29kZWNzOiBbXSxcbiAgICBoZWFkZXJFeHRlbnNpb25zOiBbXSxcbiAgICBmZWNNZWNoYW5pc21zOiBbXSxcbiAgICBydGNwOiBbXVxuICB9O1xuICB2YXIgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7XG4gIHZhciBtbGluZSA9IGxpbmVzWzBdLnNwbGl0KCcgJyk7XG4gIGZvciAodmFyIGkgPSAzOyBpIDwgbWxpbmUubGVuZ3RoOyBpKyspIHsgLy8gZmluZCBhbGwgY29kZWNzIGZyb20gbWxpbmVbMy4uXVxuICAgIHZhciBwdCA9IG1saW5lW2ldO1xuICAgIHZhciBydHBtYXBsaW5lID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoXG4gICAgICBtZWRpYVNlY3Rpb24sICdhPXJ0cG1hcDonICsgcHQgKyAnICcpWzBdO1xuICAgIGlmIChydHBtYXBsaW5lKSB7XG4gICAgICB2YXIgY29kZWMgPSBTRFBVdGlscy5wYXJzZVJ0cE1hcChydHBtYXBsaW5lKTtcbiAgICAgIHZhciBmbXRwcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KFxuICAgICAgICBtZWRpYVNlY3Rpb24sICdhPWZtdHA6JyArIHB0ICsgJyAnKTtcbiAgICAgIC8vIE9ubHkgdGhlIGZpcnN0IGE9Zm10cDo8cHQ+IGlzIGNvbnNpZGVyZWQuXG4gICAgICBjb2RlYy5wYXJhbWV0ZXJzID0gZm10cHMubGVuZ3RoID8gU0RQVXRpbHMucGFyc2VGbXRwKGZtdHBzWzBdKSA6IHt9O1xuICAgICAgY29kZWMucnRjcEZlZWRiYWNrID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoXG4gICAgICAgIG1lZGlhU2VjdGlvbiwgJ2E9cnRjcC1mYjonICsgcHQgKyAnICcpXG4gICAgICAgIC5tYXAoU0RQVXRpbHMucGFyc2VSdGNwRmIpO1xuICAgICAgZGVzY3JpcHRpb24uY29kZWNzLnB1c2goY29kZWMpO1xuICAgICAgLy8gcGFyc2UgRkVDIG1lY2hhbmlzbXMgZnJvbSBydHBtYXAgbGluZXMuXG4gICAgICBzd2l0Y2ggKGNvZGVjLm5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgICBjYXNlICdSRUQnOlxuICAgICAgICBjYXNlICdVTFBGRUMnOlxuICAgICAgICAgIGRlc2NyaXB0aW9uLmZlY01lY2hhbmlzbXMucHVzaChjb2RlYy5uYW1lLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiAvLyBvbmx5IFJFRCBhbmQgVUxQRkVDIGFyZSByZWNvZ25pemVkIGFzIEZFQyBtZWNoYW5pc21zLlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWV4dG1hcDonKS5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICBkZXNjcmlwdGlvbi5oZWFkZXJFeHRlbnNpb25zLnB1c2goU0RQVXRpbHMucGFyc2VFeHRtYXAobGluZSkpO1xuICB9KTtcbiAgLy8gRklYTUU6IHBhcnNlIHJ0Y3AuXG4gIHJldHVybiBkZXNjcmlwdGlvbjtcbn07XG5cbi8vIEdlbmVyYXRlcyBwYXJ0cyBvZiB0aGUgU0RQIG1lZGlhIHNlY3Rpb24gZGVzY3JpYmluZyB0aGUgY2FwYWJpbGl0aWVzIC9cbi8vIHBhcmFtZXRlcnMuXG5TRFBVdGlscy53cml0ZVJ0cERlc2NyaXB0aW9uID0gZnVuY3Rpb24oa2luZCwgY2Fwcykge1xuICB2YXIgc2RwID0gJyc7XG5cbiAgLy8gQnVpbGQgdGhlIG1saW5lLlxuICBzZHAgKz0gJ209JyArIGtpbmQgKyAnICc7XG4gIHNkcCArPSBjYXBzLmNvZGVjcy5sZW5ndGggPiAwID8gJzknIDogJzAnOyAvLyByZWplY3QgaWYgbm8gY29kZWNzLlxuICBzZHAgKz0gJyBVRFAvVExTL1JUUC9TQVZQRiAnO1xuICBzZHAgKz0gY2Fwcy5jb2RlY3MubWFwKGZ1bmN0aW9uKGNvZGVjKSB7XG4gICAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTtcbiAgICB9XG4gICAgcmV0dXJuIGNvZGVjLnBheWxvYWRUeXBlO1xuICB9KS5qb2luKCcgJykgKyAnXFxyXFxuJztcblxuICBzZHAgKz0gJ2M9SU4gSVA0IDAuMC4wLjBcXHJcXG4nO1xuICBzZHAgKz0gJ2E9cnRjcDo5IElOIElQNCAwLjAuMC4wXFxyXFxuJztcblxuICAvLyBBZGQgYT1ydHBtYXAgbGluZXMgZm9yIGVhY2ggY29kZWMuIEFsc28gZm10cCBhbmQgcnRjcC1mYi5cbiAgY2Fwcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihjb2RlYykge1xuICAgIHNkcCArPSBTRFBVdGlscy53cml0ZVJ0cE1hcChjb2RlYyk7XG4gICAgc2RwICs9IFNEUFV0aWxzLndyaXRlRm10cChjb2RlYyk7XG4gICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRjcEZiKGNvZGVjKTtcbiAgfSk7XG4gIHZhciBtYXhwdGltZSA9IDA7XG4gIGNhcHMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24oY29kZWMpIHtcbiAgICBpZiAoY29kZWMubWF4cHRpbWUgPiBtYXhwdGltZSkge1xuICAgICAgbWF4cHRpbWUgPSBjb2RlYy5tYXhwdGltZTtcbiAgICB9XG4gIH0pO1xuICBpZiAobWF4cHRpbWUgPiAwKSB7XG4gICAgc2RwICs9ICdhPW1heHB0aW1lOicgKyBtYXhwdGltZSArICdcXHJcXG4nO1xuICB9XG4gIHNkcCArPSAnYT1ydGNwLW11eFxcclxcbic7XG5cbiAgaWYgKGNhcHMuaGVhZGVyRXh0ZW5zaW9ucykge1xuICAgIGNhcHMuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGV4dGVuc2lvbikge1xuICAgICAgc2RwICs9IFNEUFV0aWxzLndyaXRlRXh0bWFwKGV4dGVuc2lvbik7XG4gICAgfSk7XG4gIH1cbiAgLy8gRklYTUU6IHdyaXRlIGZlY01lY2hhbmlzbXMuXG4gIHJldHVybiBzZHA7XG59O1xuXG4vLyBQYXJzZXMgdGhlIFNEUCBtZWRpYSBzZWN0aW9uIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mXG4vLyBSVENSdHBFbmNvZGluZ1BhcmFtZXRlcnMuXG5TRFBVdGlscy5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICB2YXIgZW5jb2RpbmdQYXJhbWV0ZXJzID0gW107XG4gIHZhciBkZXNjcmlwdGlvbiA9IFNEUFV0aWxzLnBhcnNlUnRwUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pO1xuICB2YXIgaGFzUmVkID0gZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5pbmRleE9mKCdSRUQnKSAhPT0gLTE7XG4gIHZhciBoYXNVbHBmZWMgPSBkZXNjcmlwdGlvbi5mZWNNZWNoYW5pc21zLmluZGV4T2YoJ1VMUEZFQycpICE9PSAtMTtcblxuICAvLyBmaWx0ZXIgYT1zc3JjOi4uLiBjbmFtZTosIGlnbm9yZSBQbGFuQi1tc2lkXG4gIHZhciBzc3JjcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKVxuICAgIC5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgcmV0dXJuIFNEUFV0aWxzLnBhcnNlU3NyY01lZGlhKGxpbmUpO1xuICAgIH0pXG4gICAgLmZpbHRlcihmdW5jdGlvbihwYXJ0cykge1xuICAgICAgcmV0dXJuIHBhcnRzLmF0dHJpYnV0ZSA9PT0gJ2NuYW1lJztcbiAgICB9KTtcbiAgdmFyIHByaW1hcnlTc3JjID0gc3NyY3MubGVuZ3RoID4gMCAmJiBzc3Jjc1swXS5zc3JjO1xuICB2YXIgc2Vjb25kYXJ5U3NyYztcblxuICB2YXIgZmxvd3MgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmMtZ3JvdXA6RklEJylcbiAgICAubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKDE3KS5zcGxpdCgnICcpO1xuICAgICAgcmV0dXJuIHBhcnRzLm1hcChmdW5jdGlvbihwYXJ0KSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChwYXJ0LCAxMCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgaWYgKGZsb3dzLmxlbmd0aCA+IDAgJiYgZmxvd3NbMF0ubGVuZ3RoID4gMSAmJiBmbG93c1swXVswXSA9PT0gcHJpbWFyeVNzcmMpIHtcbiAgICBzZWNvbmRhcnlTc3JjID0gZmxvd3NbMF1bMV07XG4gIH1cblxuICBkZXNjcmlwdGlvbi5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihjb2RlYykge1xuICAgIGlmIChjb2RlYy5uYW1lLnRvVXBwZXJDYXNlKCkgPT09ICdSVFgnICYmIGNvZGVjLnBhcmFtZXRlcnMuYXB0KSB7XG4gICAgICB2YXIgZW5jUGFyYW0gPSB7XG4gICAgICAgIHNzcmM6IHByaW1hcnlTc3JjLFxuICAgICAgICBjb2RlY1BheWxvYWRUeXBlOiBwYXJzZUludChjb2RlYy5wYXJhbWV0ZXJzLmFwdCwgMTApXG4gICAgICB9O1xuICAgICAgaWYgKHByaW1hcnlTc3JjICYmIHNlY29uZGFyeVNzcmMpIHtcbiAgICAgICAgZW5jUGFyYW0ucnR4ID0ge3NzcmM6IHNlY29uZGFyeVNzcmN9O1xuICAgICAgfVxuICAgICAgZW5jb2RpbmdQYXJhbWV0ZXJzLnB1c2goZW5jUGFyYW0pO1xuICAgICAgaWYgKGhhc1JlZCkge1xuICAgICAgICBlbmNQYXJhbSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZW5jUGFyYW0pKTtcbiAgICAgICAgZW5jUGFyYW0uZmVjID0ge1xuICAgICAgICAgIHNzcmM6IHByaW1hcnlTc3JjLFxuICAgICAgICAgIG1lY2hhbmlzbTogaGFzVWxwZmVjID8gJ3JlZCt1bHBmZWMnIDogJ3JlZCdcbiAgICAgICAgfTtcbiAgICAgICAgZW5jb2RpbmdQYXJhbWV0ZXJzLnB1c2goZW5jUGFyYW0pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIGlmIChlbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoID09PSAwICYmIHByaW1hcnlTc3JjKSB7XG4gICAgZW5jb2RpbmdQYXJhbWV0ZXJzLnB1c2goe1xuICAgICAgc3NyYzogcHJpbWFyeVNzcmNcbiAgICB9KTtcbiAgfVxuXG4gIC8vIHdlIHN1cHBvcnQgYm90aCBiPUFTIGFuZCBiPVRJQVMgYnV0IGludGVycHJldCBBUyBhcyBUSUFTLlxuICB2YXIgYmFuZHdpZHRoID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYj0nKTtcbiAgaWYgKGJhbmR3aWR0aC5sZW5ndGgpIHtcbiAgICBpZiAoYmFuZHdpZHRoWzBdLmluZGV4T2YoJ2I9VElBUzonKSA9PT0gMCkge1xuICAgICAgYmFuZHdpZHRoID0gcGFyc2VJbnQoYmFuZHdpZHRoWzBdLnN1YnN0cig3KSwgMTApO1xuICAgIH0gZWxzZSBpZiAoYmFuZHdpZHRoWzBdLmluZGV4T2YoJ2I9QVM6JykgPT09IDApIHtcbiAgICAgIC8vIHVzZSBmb3JtdWxhIGZyb20gSlNFUCB0byBjb252ZXJ0IGI9QVMgdG8gVElBUyB2YWx1ZS5cbiAgICAgIGJhbmR3aWR0aCA9IHBhcnNlSW50KGJhbmR3aWR0aFswXS5zdWJzdHIoNSksIDEwKSAqIDEwMDAgKiAwLjk1XG4gICAgICAgICAgLSAoNTAgKiA0MCAqIDgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYW5kd2lkdGggPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGVuY29kaW5nUGFyYW1ldGVycy5mb3JFYWNoKGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgcGFyYW1zLm1heEJpdHJhdGUgPSBiYW5kd2lkdGg7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGVuY29kaW5nUGFyYW1ldGVycztcbn07XG5cbi8vIHBhcnNlcyBodHRwOi8vZHJhZnQub3J0Yy5vcmcvI3J0Y3J0Y3BwYXJhbWV0ZXJzKlxuU0RQVXRpbHMucGFyc2VSdGNwUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICB2YXIgcnRjcFBhcmFtZXRlcnMgPSB7fTtcblxuICAvLyBHZXRzIHRoZSBmaXJzdCBTU1JDLiBOb3RlIHRoYSB3aXRoIFJUWCB0aGVyZSBtaWdodCBiZSBtdWx0aXBsZVxuICAvLyBTU1JDcy5cbiAgdmFyIHJlbW90ZVNzcmMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmM6JylcbiAgICAubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHJldHVybiBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYShsaW5lKTtcbiAgICB9KVxuICAgIC5maWx0ZXIoZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gb2JqLmF0dHJpYnV0ZSA9PT0gJ2NuYW1lJztcbiAgICB9KVswXTtcbiAgaWYgKHJlbW90ZVNzcmMpIHtcbiAgICBydGNwUGFyYW1ldGVycy5jbmFtZSA9IHJlbW90ZVNzcmMudmFsdWU7XG4gICAgcnRjcFBhcmFtZXRlcnMuc3NyYyA9IHJlbW90ZVNzcmMuc3NyYztcbiAgfVxuXG4gIC8vIEVkZ2UgdXNlcyB0aGUgY29tcG91bmQgYXR0cmlidXRlIGluc3RlYWQgb2YgcmVkdWNlZFNpemVcbiAgLy8gY29tcG91bmQgaXMgIXJlZHVjZWRTaXplXG4gIHZhciByc2l6ZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9cnRjcC1yc2l6ZScpO1xuICBydGNwUGFyYW1ldGVycy5yZWR1Y2VkU2l6ZSA9IHJzaXplLmxlbmd0aCA+IDA7XG4gIHJ0Y3BQYXJhbWV0ZXJzLmNvbXBvdW5kID0gcnNpemUubGVuZ3RoID09PSAwO1xuXG4gIC8vIHBhcnNlcyB0aGUgcnRjcC1tdXggYXR0ctGWYnV0ZS5cbiAgLy8gTm90ZSB0aGF0IEVkZ2UgZG9lcyBub3Qgc3VwcG9ydCB1bm11eGVkIFJUQ1AuXG4gIHZhciBtdXggPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXJ0Y3AtbXV4Jyk7XG4gIHJ0Y3BQYXJhbWV0ZXJzLm11eCA9IG11eC5sZW5ndGggPiAwO1xuXG4gIHJldHVybiBydGNwUGFyYW1ldGVycztcbn07XG5cbi8vIHBhcnNlcyBlaXRoZXIgYT1tc2lkOiBvciBhPXNzcmM6Li4uIG1zaWQgbGluZXMgYW5kIHJldHVybnNcbi8vIHRoZSBpZCBvZiB0aGUgTWVkaWFTdHJlYW0gYW5kIE1lZGlhU3RyZWFtVHJhY2suXG5TRFBVdGlscy5wYXJzZU1zaWQgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgdmFyIHBhcnRzO1xuICB2YXIgc3BlYyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9bXNpZDonKTtcbiAgaWYgKHNwZWMubGVuZ3RoID09PSAxKSB7XG4gICAgcGFydHMgPSBzcGVjWzBdLnN1YnN0cig3KS5zcGxpdCgnICcpO1xuICAgIHJldHVybiB7c3RyZWFtOiBwYXJ0c1swXSwgdHJhY2s6IHBhcnRzWzFdfTtcbiAgfVxuICB2YXIgcGxhbkIgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmM6JylcbiAgICAubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHJldHVybiBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYShsaW5lKTtcbiAgICB9KVxuICAgIC5maWx0ZXIoZnVuY3Rpb24obXNpZFBhcnRzKSB7XG4gICAgICByZXR1cm4gbXNpZFBhcnRzLmF0dHJpYnV0ZSA9PT0gJ21zaWQnO1xuICAgIH0pO1xuICBpZiAocGxhbkIubGVuZ3RoID4gMCkge1xuICAgIHBhcnRzID0gcGxhbkJbMF0udmFsdWUuc3BsaXQoJyAnKTtcbiAgICByZXR1cm4ge3N0cmVhbTogcGFydHNbMF0sIHRyYWNrOiBwYXJ0c1sxXX07XG4gIH1cbn07XG5cbi8vIFNDVFBcbi8vIHBhcnNlcyBkcmFmdC1pZXRmLW1tdXNpYy1zY3RwLXNkcC0yNiBmaXJzdCBhbmQgZmFsbHMgYmFja1xuLy8gdG8gZHJhZnQtaWV0Zi1tbXVzaWMtc2N0cC1zZHAtMDVcblNEUFV0aWxzLnBhcnNlU2N0cERlc2NyaXB0aW9uID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIHZhciBtbGluZSA9IFNEUFV0aWxzLnBhcnNlTUxpbmUobWVkaWFTZWN0aW9uKTtcbiAgdmFyIG1heFNpemVMaW5lID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1tYXgtbWVzc2FnZS1zaXplOicpO1xuICB2YXIgbWF4TWVzc2FnZVNpemU7XG4gIGlmIChtYXhTaXplTGluZS5sZW5ndGggPiAwKSB7XG4gICAgbWF4TWVzc2FnZVNpemUgPSBwYXJzZUludChtYXhTaXplTGluZVswXS5zdWJzdHIoMTkpLCAxMCk7XG4gIH1cbiAgaWYgKGlzTmFOKG1heE1lc3NhZ2VTaXplKSkge1xuICAgIG1heE1lc3NhZ2VTaXplID0gNjU1MzY7XG4gIH1cbiAgdmFyIHNjdHBQb3J0ID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zY3RwLXBvcnQ6Jyk7XG4gIGlmIChzY3RwUG9ydC5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvcnQ6IHBhcnNlSW50KHNjdHBQb3J0WzBdLnN1YnN0cigxMiksIDEwKSxcbiAgICAgIHByb3RvY29sOiBtbGluZS5mbXQsXG4gICAgICBtYXhNZXNzYWdlU2l6ZTogbWF4TWVzc2FnZVNpemVcbiAgICB9O1xuICB9XG4gIHZhciBzY3RwTWFwTGluZXMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNjdHBtYXA6Jyk7XG4gIGlmIChzY3RwTWFwTGluZXMubGVuZ3RoID4gMCkge1xuICAgIHZhciBwYXJ0cyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c2N0cG1hcDonKVswXVxuICAgICAgLnN1YnN0cigxMClcbiAgICAgIC5zcGxpdCgnICcpO1xuICAgIHJldHVybiB7XG4gICAgICBwb3J0OiBwYXJzZUludChwYXJ0c1swXSwgMTApLFxuICAgICAgcHJvdG9jb2w6IHBhcnRzWzFdLFxuICAgICAgbWF4TWVzc2FnZVNpemU6IG1heE1lc3NhZ2VTaXplXG4gICAgfTtcbiAgfVxufTtcblxuLy8gU0NUUFxuLy8gb3V0cHV0cyB0aGUgZHJhZnQtaWV0Zi1tbXVzaWMtc2N0cC1zZHAtMjYgdmVyc2lvbiB0aGF0IGFsbCBicm93c2Vyc1xuLy8gc3VwcG9ydCBieSBub3cgcmVjZWl2aW5nIGluIHRoaXMgZm9ybWF0LCB1bmxlc3Mgd2Ugb3JpZ2luYWxseSBwYXJzZWRcbi8vIGFzIHRoZSBkcmFmdC1pZXRmLW1tdXNpYy1zY3RwLXNkcC0wNSBmb3JtYXQgKGluZGljYXRlZCBieSB0aGUgbS1saW5lXG4vLyBwcm90b2NvbCBvZiBEVExTL1NDVFAgLS0gd2l0aG91dCBVRFAvIG9yIFRDUC8pXG5TRFBVdGlscy53cml0ZVNjdHBEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKG1lZGlhLCBzY3RwKSB7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgaWYgKG1lZGlhLnByb3RvY29sICE9PSAnRFRMUy9TQ1RQJykge1xuICAgIG91dHB1dCA9IFtcbiAgICAgICdtPScgKyBtZWRpYS5raW5kICsgJyA5ICcgKyBtZWRpYS5wcm90b2NvbCArICcgJyArIHNjdHAucHJvdG9jb2wgKyAnXFxyXFxuJyxcbiAgICAgICdjPUlOIElQNCAwLjAuMC4wXFxyXFxuJyxcbiAgICAgICdhPXNjdHAtcG9ydDonICsgc2N0cC5wb3J0ICsgJ1xcclxcbidcbiAgICBdO1xuICB9IGVsc2Uge1xuICAgIG91dHB1dCA9IFtcbiAgICAgICdtPScgKyBtZWRpYS5raW5kICsgJyA5ICcgKyBtZWRpYS5wcm90b2NvbCArICcgJyArIHNjdHAucG9ydCArICdcXHJcXG4nLFxuICAgICAgJ2M9SU4gSVA0IDAuMC4wLjBcXHJcXG4nLFxuICAgICAgJ2E9c2N0cG1hcDonICsgc2N0cC5wb3J0ICsgJyAnICsgc2N0cC5wcm90b2NvbCArICcgNjU1MzVcXHJcXG4nXG4gICAgXTtcbiAgfVxuICBpZiAoc2N0cC5tYXhNZXNzYWdlU2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgb3V0cHV0LnB1c2goJ2E9bWF4LW1lc3NhZ2Utc2l6ZTonICsgc2N0cC5tYXhNZXNzYWdlU2l6ZSArICdcXHJcXG4nKTtcbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xufTtcblxuLy8gR2VuZXJhdGUgYSBzZXNzaW9uIElEIGZvciBTRFAuXG4vLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvZHJhZnQtaWV0Zi1ydGN3ZWItanNlcC0yMCNzZWN0aW9uLTUuMi4xXG4vLyByZWNvbW1lbmRzIHVzaW5nIGEgY3J5cHRvZ3JhcGhpY2FsbHkgcmFuZG9tICt2ZSA2NC1iaXQgdmFsdWVcbi8vIGJ1dCByaWdodCBub3cgdGhpcyBzaG91bGQgYmUgYWNjZXB0YWJsZSBhbmQgd2l0aGluIHRoZSByaWdodCByYW5nZVxuU0RQVXRpbHMuZ2VuZXJhdGVTZXNzaW9uSWQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKS5zdWJzdHIoMiwgMjEpO1xufTtcblxuLy8gV3JpdGUgYm9pbGRlciBwbGF0ZSBmb3Igc3RhcnQgb2YgU0RQXG4vLyBzZXNzSWQgYXJndW1lbnQgaXMgb3B0aW9uYWwgLSBpZiBub3Qgc3VwcGxpZWQgaXQgd2lsbFxuLy8gYmUgZ2VuZXJhdGVkIHJhbmRvbWx5XG4vLyBzZXNzVmVyc2lvbiBpcyBvcHRpb25hbCBhbmQgZGVmYXVsdHMgdG8gMlxuLy8gc2Vzc1VzZXIgaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvICd0aGlzaXNhZGFwdGVyb3J0YydcblNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlID0gZnVuY3Rpb24oc2Vzc0lkLCBzZXNzVmVyLCBzZXNzVXNlcikge1xuICB2YXIgc2Vzc2lvbklkO1xuICB2YXIgdmVyc2lvbiA9IHNlc3NWZXIgIT09IHVuZGVmaW5lZCA/IHNlc3NWZXIgOiAyO1xuICBpZiAoc2Vzc0lkKSB7XG4gICAgc2Vzc2lvbklkID0gc2Vzc0lkO1xuICB9IGVsc2Uge1xuICAgIHNlc3Npb25JZCA9IFNEUFV0aWxzLmdlbmVyYXRlU2Vzc2lvbklkKCk7XG4gIH1cbiAgdmFyIHVzZXIgPSBzZXNzVXNlciB8fCAndGhpc2lzYWRhcHRlcm9ydGMnO1xuICAvLyBGSVhNRTogc2Vzcy1pZCBzaG91bGQgYmUgYW4gTlRQIHRpbWVzdGFtcC5cbiAgcmV0dXJuICd2PTBcXHJcXG4nICtcbiAgICAgICdvPScgKyB1c2VyICsgJyAnICsgc2Vzc2lvbklkICsgJyAnICsgdmVyc2lvbiArXG4gICAgICAgICcgSU4gSVA0IDEyNy4wLjAuMVxcclxcbicgK1xuICAgICAgJ3M9LVxcclxcbicgK1xuICAgICAgJ3Q9MCAwXFxyXFxuJztcbn07XG5cblNEUFV0aWxzLndyaXRlTWVkaWFTZWN0aW9uID0gZnVuY3Rpb24odHJhbnNjZWl2ZXIsIGNhcHMsIHR5cGUsIHN0cmVhbSkge1xuICB2YXIgc2RwID0gU0RQVXRpbHMud3JpdGVSdHBEZXNjcmlwdGlvbih0cmFuc2NlaXZlci5raW5kLCBjYXBzKTtcblxuICAvLyBNYXAgSUNFIHBhcmFtZXRlcnMgKHVmcmFnLCBwd2QpIHRvIFNEUC5cbiAgc2RwICs9IFNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycyhcbiAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5nZXRMb2NhbFBhcmFtZXRlcnMoKSk7XG5cbiAgLy8gTWFwIERUTFMgcGFyYW1ldGVycyB0byBTRFAuXG4gIHNkcCArPSBTRFBVdGlscy53cml0ZUR0bHNQYXJhbWV0ZXJzKFxuICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuZ2V0TG9jYWxQYXJhbWV0ZXJzKCksXG4gICAgdHlwZSA9PT0gJ29mZmVyJyA/ICdhY3RwYXNzJyA6ICdhY3RpdmUnKTtcblxuICBzZHAgKz0gJ2E9bWlkOicgKyB0cmFuc2NlaXZlci5taWQgKyAnXFxyXFxuJztcblxuICBpZiAodHJhbnNjZWl2ZXIuZGlyZWN0aW9uKSB7XG4gICAgc2RwICs9ICdhPScgKyB0cmFuc2NlaXZlci5kaXJlY3Rpb24gKyAnXFxyXFxuJztcbiAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIgJiYgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIpIHtcbiAgICBzZHAgKz0gJ2E9c2VuZHJlY3ZcXHJcXG4nO1xuICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikge1xuICAgIHNkcCArPSAnYT1zZW5kb25seVxcclxcbic7XG4gIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIpIHtcbiAgICBzZHAgKz0gJ2E9cmVjdm9ubHlcXHJcXG4nO1xuICB9IGVsc2Uge1xuICAgIHNkcCArPSAnYT1pbmFjdGl2ZVxcclxcbic7XG4gIH1cblxuICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7XG4gICAgLy8gc3BlYy5cbiAgICB2YXIgbXNpZCA9ICdtc2lkOicgKyBzdHJlYW0uaWQgKyAnICcgK1xuICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIudHJhY2suaWQgKyAnXFxyXFxuJztcbiAgICBzZHAgKz0gJ2E9JyArIG1zaWQ7XG5cbiAgICAvLyBmb3IgQ2hyb21lLlxuICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgK1xuICAgICAgICAnICcgKyBtc2lkO1xuICAgIGlmICh0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCkge1xuICAgICAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMgK1xuICAgICAgICAgICcgJyArIG1zaWQ7XG4gICAgICBzZHAgKz0gJ2E9c3NyYy1ncm91cDpGSUQgJyArXG4gICAgICAgICAgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICsgJyAnICtcbiAgICAgICAgICB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjICtcbiAgICAgICAgICAnXFxyXFxuJztcbiAgICB9XG4gIH1cbiAgLy8gRklYTUU6IHRoaXMgc2hvdWxkIGJlIHdyaXR0ZW4gYnkgd3JpdGVSdHBEZXNjcmlwdGlvbi5cbiAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArXG4gICAgICAnIGNuYW1lOicgKyBTRFBVdGlscy5sb2NhbENOYW1lICsgJ1xcclxcbic7XG4gIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIgJiYgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgpIHtcbiAgICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYyArXG4gICAgICAgICcgY25hbWU6JyArIFNEUFV0aWxzLmxvY2FsQ05hbWUgKyAnXFxyXFxuJztcbiAgfVxuICByZXR1cm4gc2RwO1xufTtcblxuLy8gR2V0cyB0aGUgZGlyZWN0aW9uIGZyb20gdGhlIG1lZGlhU2VjdGlvbiBvciB0aGUgc2Vzc2lvbnBhcnQuXG5TRFBVdGlscy5nZXREaXJlY3Rpb24gPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KSB7XG4gIC8vIExvb2sgZm9yIHNlbmRyZWN2LCBzZW5kb25seSwgcmVjdm9ubHksIGluYWN0aXZlLCBkZWZhdWx0IHRvIHNlbmRyZWN2LlxuICB2YXIgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICBzd2l0Y2ggKGxpbmVzW2ldKSB7XG4gICAgICBjYXNlICdhPXNlbmRyZWN2JzpcbiAgICAgIGNhc2UgJ2E9c2VuZG9ubHknOlxuICAgICAgY2FzZSAnYT1yZWN2b25seSc6XG4gICAgICBjYXNlICdhPWluYWN0aXZlJzpcbiAgICAgICAgcmV0dXJuIGxpbmVzW2ldLnN1YnN0cigyKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIEZJWE1FOiBXaGF0IHNob3VsZCBoYXBwZW4gaGVyZT9cbiAgICB9XG4gIH1cbiAgaWYgKHNlc3Npb25wYXJ0KSB7XG4gICAgcmV0dXJuIFNEUFV0aWxzLmdldERpcmVjdGlvbihzZXNzaW9ucGFydCk7XG4gIH1cbiAgcmV0dXJuICdzZW5kcmVjdic7XG59O1xuXG5TRFBVdGlscy5nZXRLaW5kID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTtcbiAgdmFyIG1saW5lID0gbGluZXNbMF0uc3BsaXQoJyAnKTtcbiAgcmV0dXJuIG1saW5lWzBdLnN1YnN0cigyKTtcbn07XG5cblNEUFV0aWxzLmlzUmVqZWN0ZWQgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgcmV0dXJuIG1lZGlhU2VjdGlvbi5zcGxpdCgnICcsIDIpWzFdID09PSAnMCc7XG59O1xuXG5TRFBVdGlscy5wYXJzZU1MaW5lID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTtcbiAgdmFyIHBhcnRzID0gbGluZXNbMF0uc3Vic3RyKDIpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAga2luZDogcGFydHNbMF0sXG4gICAgcG9ydDogcGFyc2VJbnQocGFydHNbMV0sIDEwKSxcbiAgICBwcm90b2NvbDogcGFydHNbMl0sXG4gICAgZm10OiBwYXJ0cy5zbGljZSgzKS5qb2luKCcgJylcbiAgfTtcbn07XG5cblNEUFV0aWxzLnBhcnNlT0xpbmUgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgdmFyIGxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdvPScpWzBdO1xuICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cigyKS5zcGxpdCgnICcpO1xuICByZXR1cm4ge1xuICAgIHVzZXJuYW1lOiBwYXJ0c1swXSxcbiAgICBzZXNzaW9uSWQ6IHBhcnRzWzFdLFxuICAgIHNlc3Npb25WZXJzaW9uOiBwYXJzZUludChwYXJ0c1syXSwgMTApLFxuICAgIG5ldFR5cGU6IHBhcnRzWzNdLFxuICAgIGFkZHJlc3NUeXBlOiBwYXJ0c1s0XSxcbiAgICBhZGRyZXNzOiBwYXJ0c1s1XVxuICB9O1xufTtcblxuLy8gYSB2ZXJ5IG5haXZlIGludGVycHJldGF0aW9uIG9mIGEgdmFsaWQgU0RQLlxuU0RQVXRpbHMuaXNWYWxpZFNEUCA9IGZ1bmN0aW9uKGJsb2IpIHtcbiAgaWYgKHR5cGVvZiBibG9iICE9PSAnc3RyaW5nJyB8fCBibG9iLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKGJsb2IpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGxpbmVzW2ldLmxlbmd0aCA8IDIgfHwgbGluZXNbaV0uY2hhckF0KDEpICE9PSAnPScpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gVE9ETzogY2hlY2sgdGhlIG1vZGlmaWVyIGEgYml0IG1vcmUuXG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xuXG4vLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuXG5pZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBTRFBVdGlscztcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxudmFyIHN0eWxlc0luRG9tID0gW107XG5cbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgdmFyIHJlc3VsdCA9IC0xO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5Eb20ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5Eb21baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBpZENvdW50TWFwID0ge307XG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXVxuICAgIH07XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGVzSW5Eb20ucHVzaCh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IGFkZFN0eWxlKG9iaiwgb3B0aW9ucyksXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cblxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHZhciBhdHRyaWJ1dGVzID0gb3B0aW9ucy5hdHRyaWJ1dGVzIHx8IHt9O1xuXG4gIGlmICh0eXBlb2YgYXR0cmlidXRlcy5ub25jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09ICd1bmRlZmluZWQnID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gICAgaWYgKG5vbmNlKSB7XG4gICAgICBhdHRyaWJ1dGVzLm5vbmNlID0gbm9uY2U7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgfSk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMuaW5zZXJ0KHN0eWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KG9wdGlvbnMuaW5zZXJ0IHx8ICdoZWFkJyk7XG5cbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG52YXIgcmVwbGFjZVRleHQgPSBmdW5jdGlvbiByZXBsYWNlVGV4dCgpIHtcbiAgdmFyIHRleHRTdG9yZSA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gcmVwbGFjZShpbmRleCwgcmVwbGFjZW1lbnQpIHtcbiAgICB0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG4gICAgcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmoubWVkaWEgPyBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpLmNvbmNhdChvYmouY3NzLCBcIn1cIikgOiBvYmouY3NzOyAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuICAgIGlmIChjaGlsZE5vZGVzW2luZGV4XSkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzcztcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbWVkaWEpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgnbWVkaWEnKTtcbiAgfVxuXG4gIGlmIChzb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5Eb21bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRG9tLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vKiBVQVBhcnNlci5qcyB2MC43LjMxXG4gICBDb3B5cmlnaHQgwqkgMjAxMi0yMDIxIEZhaXNhbCBTYWxtYW4gPGZAZmFpc2FsbWFuLmNvbT5cbiAgIE1JVCBMaWNlbnNlICovLypcbiAgIERldGVjdCBCcm93c2VyLCBFbmdpbmUsIE9TLCBDUFUsIGFuZCBEZXZpY2UgdHlwZS9tb2RlbCBmcm9tIFVzZXItQWdlbnQgZGF0YS5cbiAgIFN1cHBvcnRzIGJyb3dzZXIgJiBub2RlLmpzIGVudmlyb25tZW50LiBcbiAgIERlbW8gICA6IGh0dHBzOi8vZmFpc2FsbWFuLmdpdGh1Yi5pby91YS1wYXJzZXItanNcbiAgIFNvdXJjZSA6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWlzYWxtYW4vdWEtcGFyc2VyLWpzICovXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuKGZ1bmN0aW9uICh3aW5kb3csIHVuZGVmaW5lZCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBDb25zdGFudHNcbiAgICAvLy8vLy8vLy8vLy8vXG5cblxuICAgIHZhciBMSUJWRVJTSU9OICA9ICcwLjcuMzEnLFxuICAgICAgICBFTVBUWSAgICAgICA9ICcnLFxuICAgICAgICBVTktOT1dOICAgICA9ICc/JyxcbiAgICAgICAgRlVOQ19UWVBFICAgPSAnZnVuY3Rpb24nLFxuICAgICAgICBVTkRFRl9UWVBFICA9ICd1bmRlZmluZWQnLFxuICAgICAgICBPQkpfVFlQRSAgICA9ICdvYmplY3QnLFxuICAgICAgICBTVFJfVFlQRSAgICA9ICdzdHJpbmcnLFxuICAgICAgICBNQUpPUiAgICAgICA9ICdtYWpvcicsXG4gICAgICAgIE1PREVMICAgICAgID0gJ21vZGVsJyxcbiAgICAgICAgTkFNRSAgICAgICAgPSAnbmFtZScsXG4gICAgICAgIFRZUEUgICAgICAgID0gJ3R5cGUnLFxuICAgICAgICBWRU5ET1IgICAgICA9ICd2ZW5kb3InLFxuICAgICAgICBWRVJTSU9OICAgICA9ICd2ZXJzaW9uJyxcbiAgICAgICAgQVJDSElURUNUVVJFPSAnYXJjaGl0ZWN0dXJlJyxcbiAgICAgICAgQ09OU09MRSAgICAgPSAnY29uc29sZScsXG4gICAgICAgIE1PQklMRSAgICAgID0gJ21vYmlsZScsXG4gICAgICAgIFRBQkxFVCAgICAgID0gJ3RhYmxldCcsXG4gICAgICAgIFNNQVJUVFYgICAgID0gJ3NtYXJ0dHYnLFxuICAgICAgICBXRUFSQUJMRSAgICA9ICd3ZWFyYWJsZScsXG4gICAgICAgIEVNQkVEREVEICAgID0gJ2VtYmVkZGVkJyxcbiAgICAgICAgVUFfTUFYX0xFTkdUSCA9IDI1NTtcblxuICAgIHZhciBBTUFaT04gID0gJ0FtYXpvbicsXG4gICAgICAgIEFQUExFICAgPSAnQXBwbGUnLFxuICAgICAgICBBU1VTICAgID0gJ0FTVVMnLFxuICAgICAgICBCTEFDS0JFUlJZID0gJ0JsYWNrQmVycnknLFxuICAgICAgICBCUk9XU0VSID0gJ0Jyb3dzZXInLFxuICAgICAgICBDSFJPTUUgID0gJ0Nocm9tZScsXG4gICAgICAgIEVER0UgICAgPSAnRWRnZScsXG4gICAgICAgIEZJUkVGT1ggPSAnRmlyZWZveCcsXG4gICAgICAgIEdPT0dMRSAgPSAnR29vZ2xlJyxcbiAgICAgICAgSFVBV0VJICA9ICdIdWF3ZWknLFxuICAgICAgICBMRyAgICAgID0gJ0xHJyxcbiAgICAgICAgTUlDUk9TT0ZUID0gJ01pY3Jvc29mdCcsXG4gICAgICAgIE1PVE9ST0xBICA9ICdNb3Rvcm9sYScsXG4gICAgICAgIE9QRVJBICAgPSAnT3BlcmEnLFxuICAgICAgICBTQU1TVU5HID0gJ1NhbXN1bmcnLFxuICAgICAgICBTT05ZICAgID0gJ1NvbnknLFxuICAgICAgICBYSUFPTUkgID0gJ1hpYW9taScsXG4gICAgICAgIFpFQlJBICAgPSAnWmVicmEnLFxuICAgICAgICBGQUNFQk9PSyAgID0gJ0ZhY2Vib29rJztcblxuICAgIC8vLy8vLy8vLy8vXG4gICAgLy8gSGVscGVyXG4gICAgLy8vLy8vLy8vL1xuXG4gICAgdmFyIGV4dGVuZCA9IGZ1bmN0aW9uIChyZWdleGVzLCBleHRlbnNpb25zKSB7XG4gICAgICAgICAgICB2YXIgbWVyZ2VkUmVnZXhlcyA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiByZWdleGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dGVuc2lvbnNbaV0gJiYgZXh0ZW5zaW9uc1tpXS5sZW5ndGggJSAyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZFJlZ2V4ZXNbaV0gPSBleHRlbnNpb25zW2ldLmNvbmNhdChyZWdleGVzW2ldKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZWdleGVzW2ldID0gcmVnZXhlc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVyZ2VkUmVnZXhlcztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyaXplID0gZnVuY3Rpb24gKGFycikge1xuICAgICAgICAgICAgdmFyIGVudW1zID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8YXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZW51bXNbYXJyW2ldLnRvVXBwZXJDYXNlKCldID0gYXJyW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVudW1zO1xuICAgICAgICB9LFxuICAgICAgICBoYXMgPSBmdW5jdGlvbiAoc3RyMSwgc3RyMikge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBzdHIxID09PSBTVFJfVFlQRSA/IGxvd2VyaXplKHN0cjIpLmluZGV4T2YobG93ZXJpemUoc3RyMSkpICE9PSAtMSA6IGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICBsb3dlcml6ZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSxcbiAgICAgICAgbWFqb3JpemUgPSBmdW5jdGlvbiAodmVyc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZih2ZXJzaW9uKSA9PT0gU1RSX1RZUEUgPyB2ZXJzaW9uLnJlcGxhY2UoL1teXFxkXFwuXS9nLCBFTVBUWSkuc3BsaXQoJy4nKVswXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfSxcbiAgICAgICAgdHJpbSA9IGZ1bmN0aW9uIChzdHIsIGxlbikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZihzdHIpID09PSBTVFJfVFlQRSkge1xuICAgICAgICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9eXFxzXFxzKi8sIEVNUFRZKS5yZXBsYWNlKC9cXHNcXHMqJC8sIEVNUFRZKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mKGxlbikgPT09IFVOREVGX1RZUEUgPyBzdHIgOiBzdHIuc3Vic3RyaW5nKDAsIFVBX01BWF9MRU5HVEgpO1xuICAgICAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBNYXAgaGVscGVyXG4gICAgLy8vLy8vLy8vLy8vLy9cblxuICAgIHZhciByZ3hNYXBwZXIgPSBmdW5jdGlvbiAodWEsIGFycmF5cykge1xuXG4gICAgICAgICAgICB2YXIgaSA9IDAsIGosIGssIHAsIHEsIG1hdGNoZXMsIG1hdGNoO1xuXG4gICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggYWxsIHJlZ2V4ZXMgbWFwc1xuICAgICAgICAgICAgd2hpbGUgKGkgPCBhcnJheXMubGVuZ3RoICYmICFtYXRjaGVzKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVnZXggPSBhcnJheXNbaV0sICAgICAgIC8vIGV2ZW4gc2VxdWVuY2UgKDAsMiw0LC4uKVxuICAgICAgICAgICAgICAgICAgICBwcm9wcyA9IGFycmF5c1tpICsgMV07ICAgLy8gb2RkIHNlcXVlbmNlICgxLDMsNSwuLilcbiAgICAgICAgICAgICAgICBqID0gayA9IDA7XG5cbiAgICAgICAgICAgICAgICAvLyB0cnkgbWF0Y2hpbmcgdWFzdHJpbmcgd2l0aCByZWdleGVzXG4gICAgICAgICAgICAgICAgd2hpbGUgKGogPCByZWdleC5sZW5ndGggJiYgIW1hdGNoZXMpIHtcblxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVzID0gcmVnZXhbaisrXS5leGVjKHVhKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoISFtYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHAgPSAwOyBwIDwgcHJvcHMubGVuZ3RoOyBwKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IG1hdGNoZXNbKytrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gcHJvcHNbcF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgZ2l2ZW4gcHJvcGVydHkgaXMgYWN0dWFsbHkgYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHEgPT09IE9CSl9UWVBFICYmIHEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcVsxXSA9PSBGVU5DX1RZUEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhc3NpZ24gbW9kaWZpZWQgbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FbMF1dID0gcVsxXS5jYWxsKHRoaXMsIG1hdGNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXNzaWduIGdpdmVuIHZhbHVlLCBpZ25vcmUgcmVnZXggbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FbMF1dID0gcVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChxLmxlbmd0aCA9PT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgd2hldGhlciBmdW5jdGlvbiBvciByZWdleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBxWzFdID09PSBGVU5DX1RZUEUgJiYgIShxWzFdLmV4ZWMgJiYgcVsxXS50ZXN0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZnVuY3Rpb24gKHVzdWFsbHkgc3RyaW5nIG1hcHBlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FbMF1dID0gbWF0Y2ggPyBxWzFdLmNhbGwodGhpcywgbWF0Y2gsIHFbMl0pIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYW5pdGl6ZSBtYXRjaCB1c2luZyBnaXZlbiByZWdleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcVswXV0gPSBtYXRjaCA/IG1hdGNoLnJlcGxhY2UocVsxXSwgcVsyXSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocS5sZW5ndGggPT09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FbMF1dID0gbWF0Y2ggPyBxWzNdLmNhbGwodGhpcywgbWF0Y2gucmVwbGFjZShxWzFdLCBxWzJdKSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FdID0gbWF0Y2ggPyBtYXRjaCA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSArPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHN0ck1hcHBlciA9IGZ1bmN0aW9uIChzdHIsIG1hcCkge1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIG1hcCkge1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGN1cnJlbnQgdmFsdWUgaXMgYXJyYXlcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1hcFtpXSA9PT0gT0JKX1RZUEUgJiYgbWFwW2ldLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtYXBbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXMobWFwW2ldW2pdLCBzdHIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChpID09PSBVTktOT1dOKSA/IHVuZGVmaW5lZCA6IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhhcyhtYXBbaV0sIHN0cikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChpID09PSBVTktOT1dOKSA/IHVuZGVmaW5lZCA6IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9O1xuXG4gICAgLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gU3RyaW5nIG1hcFxuICAgIC8vLy8vLy8vLy8vLy8vXG5cbiAgICAvLyBTYWZhcmkgPCAzLjBcbiAgICB2YXIgb2xkU2FmYXJpTWFwID0ge1xuICAgICAgICAgICAgJzEuMCcgICA6ICcvOCcsXG4gICAgICAgICAgICAnMS4yJyAgIDogJy8xJyxcbiAgICAgICAgICAgICcxLjMnICAgOiAnLzMnLFxuICAgICAgICAgICAgJzIuMCcgICA6ICcvNDEyJyxcbiAgICAgICAgICAgICcyLjAuMicgOiAnLzQxNicsXG4gICAgICAgICAgICAnMi4wLjMnIDogJy80MTcnLFxuICAgICAgICAgICAgJzIuMC40JyA6ICcvNDE5JyxcbiAgICAgICAgICAgICc/JyAgICAgOiAnLydcbiAgICAgICAgfSxcbiAgICAgICAgd2luZG93c1ZlcnNpb25NYXAgPSB7XG4gICAgICAgICAgICAnTUUnICAgICAgICA6ICc0LjkwJyxcbiAgICAgICAgICAgICdOVCAzLjExJyAgIDogJ05UMy41MScsXG4gICAgICAgICAgICAnTlQgNC4wJyAgICA6ICdOVDQuMCcsXG4gICAgICAgICAgICAnMjAwMCcgICAgICA6ICdOVCA1LjAnLFxuICAgICAgICAgICAgJ1hQJyAgICAgICAgOiBbJ05UIDUuMScsICdOVCA1LjInXSxcbiAgICAgICAgICAgICdWaXN0YScgICAgIDogJ05UIDYuMCcsXG4gICAgICAgICAgICAnNycgICAgICAgICA6ICdOVCA2LjEnLFxuICAgICAgICAgICAgJzgnICAgICAgICAgOiAnTlQgNi4yJyxcbiAgICAgICAgICAgICc4LjEnICAgICAgIDogJ05UIDYuMycsXG4gICAgICAgICAgICAnMTAnICAgICAgICA6IFsnTlQgNi40JywgJ05UIDEwLjAnXSxcbiAgICAgICAgICAgICdSVCcgICAgICAgIDogJ0FSTSdcbiAgICB9O1xuXG4gICAgLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBSZWdleCBtYXBcbiAgICAvLy8vLy8vLy8vLy8vXG5cbiAgICB2YXIgcmVnZXhlcyA9IHtcblxuICAgICAgICBicm93c2VyIDogW1tcblxuICAgICAgICAgICAgL1xcYig/OmNybW98Y3Jpb3MpXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hyb21lIGZvciBBbmRyb2lkL2lPU1xuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnQ2hyb21lJ11dLCBbXG4gICAgICAgICAgICAvZWRnKD86ZXxpb3N8YSk/XFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pY3Jvc29mdCBFZGdlXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdFZGdlJ11dLCBbXG5cbiAgICAgICAgICAgIC8vIFByZXN0byBiYXNlZFxuICAgICAgICAgICAgLyhvcGVyYSBtaW5pKVxcLyhbLVxcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVyYSBNaW5pXG4gICAgICAgICAgICAvKG9wZXJhIFttb2JpbGV0YWJdezMsNn0pXFxiLit2ZXJzaW9uXFwvKFstXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAvLyBPcGVyYSBNb2JpL1RhYmxldFxuICAgICAgICAgICAgLyhvcGVyYSkoPzouK3ZlcnNpb25cXC98W1xcLyBdKykoW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3BlcmFcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSwgW1xuICAgICAgICAgICAgL29waW9zW1xcLyBdKyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVyYSBtaW5pIG9uIGlwaG9uZSA+PSA4LjBcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgT1BFUkErJyBNaW5pJ11dLCBbXG4gICAgICAgICAgICAvXFxib3ByXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVyYSBXZWJraXRcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgT1BFUkFdXSwgW1xuXG4gICAgICAgICAgICAvLyBNaXhlZFxuICAgICAgICAgICAgLyhraW5kbGUpXFwvKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLaW5kbGVcbiAgICAgICAgICAgIC8obHVuYXNjYXBlfG1heHRob258bmV0ZnJvbnR8amFzbWluZXxibGF6ZXIpW1xcLyBdPyhbXFx3XFwuXSopL2ksICAgICAgLy8gTHVuYXNjYXBlL01heHRob24vTmV0ZnJvbnQvSmFzbWluZS9CbGF6ZXJcbiAgICAgICAgICAgIC8vIFRyaWRlbnQgYmFzZWRcbiAgICAgICAgICAgIC8oYXZhbnQgfGllbW9iaWxlfHNsaW0pKD86YnJvd3Nlcik/W1xcLyBdPyhbXFx3XFwuXSopL2ksICAgICAgICAgICAgICAgLy8gQXZhbnQvSUVNb2JpbGUvU2xpbUJyb3dzZXJcbiAgICAgICAgICAgIC8oYmE/aWR1YnJvd3NlcilbXFwvIF0/KFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmFpZHUgQnJvd3NlclxuICAgICAgICAgICAgLyg/Om1zfFxcKCkoaWUpIChbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnRlcm5ldCBFeHBsb3JlclxuXG4gICAgICAgICAgICAvLyBXZWJraXQvS0hUTUwgYmFzZWQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZsb2NrL1JvY2tNZWx0L01pZG9yaS9FcGlwaGFueS9TaWxrL1NreWZpcmUvQm9sdC9Jcm9uL0lyaWRpdW0vUGhhbnRvbUpTL0Jvd3Nlci9RdXBaaWxsYS9GYWxrb25cbiAgICAgICAgICAgIC8oZmxvY2t8cm9ja21lbHR8bWlkb3JpfGVwaXBoYW55fHNpbGt8c2t5ZmlyZXxvdmlicm93c2VyfGJvbHR8aXJvbnx2aXZhbGRpfGlyaWRpdW18cGhhbnRvbWpzfGJvd3NlcnxxdWFya3xxdXB6aWxsYXxmYWxrb258cmVrb25xfHB1ZmZpbnxicmF2ZXx3aGFsZXxxcWJyb3dzZXJsaXRlfHFxKVxcLyhbLVxcd1xcLl0rKS9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWtvbnEvUHVmZmluL0JyYXZlL1doYWxlL1FRQnJvd3NlckxpdGUvUVEsIGFrYSBTaG91UVxuICAgICAgICAgICAgLyh3ZWlibylfXyhbXFxkXFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlaWJvXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC8oPzpcXGJ1Yz8gP2Jyb3dzZXJ8KD86anVjLispdWN3ZWIpW1xcLyBdPyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgIC8vIFVDQnJvd3NlclxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnVUMnK0JST1dTRVJdXSwgW1xuICAgICAgICAgICAgL1xcYnFiY29yZVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2VDaGF0IERlc2t0b3AgZm9yIFdpbmRvd3MgQnVpbHQtaW4gQnJvd3NlclxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnV2VDaGF0KFdpbikgRGVza3RvcCddXSwgW1xuICAgICAgICAgICAgL21pY3JvbWVzc2VuZ2VyXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZUNoYXRcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ1dlQ2hhdCddXSwgW1xuICAgICAgICAgICAgL2tvbnF1ZXJvclxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLb25xdWVyb3JcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ0tvbnF1ZXJvciddXSwgW1xuICAgICAgICAgICAgL3RyaWRlbnQuK3J2WzogXShbXFx3XFwuXXsxLDl9KVxcYi4rbGlrZSBnZWNrby9pICAgICAgICAgICAgICAgICAgICAgICAvLyBJRTExXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdJRSddXSwgW1xuICAgICAgICAgICAgL3lhYnJvd3NlclxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBZYW5kZXhcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ1lhbmRleCddXSwgW1xuICAgICAgICAgICAgLyhhdmFzdHxhdmcpXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBdmFzdC9BVkcgU2VjdXJlIEJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgLyguKykvLCAnJDEgU2VjdXJlICcrQlJPV1NFUl0sIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvXFxiZm9jdXNcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJlZm94IEZvY3VzXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsIEZJUkVGT1grJyBGb2N1cyddXSwgW1xuICAgICAgICAgICAgL1xcYm9wdFxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3BlcmEgVG91Y2hcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgT1BFUkErJyBUb3VjaCddXSwgW1xuICAgICAgICAgICAgL2NvY19jb2NcXHcrXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29jIENvYyBCcm93c2VyXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdDb2MgQ29jJ11dLCBbXG4gICAgICAgICAgICAvZG9sZmluXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvbHBoaW5cbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ0RvbHBoaW4nXV0sIFtcbiAgICAgICAgICAgIC9jb2FzdFxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3BlcmEgQ29hc3RcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgT1BFUkErJyBDb2FzdCddXSwgW1xuICAgICAgICAgICAgL21pdWlicm93c2VyXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNSVVJIEJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ01JVUkgJytCUk9XU0VSXV0sIFtcbiAgICAgICAgICAgIC9meGlvc1xcLyhbLVxcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZWZveCBmb3IgaU9TXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsIEZJUkVGT1hdXSwgW1xuICAgICAgICAgICAgL1xcYnFpaHV8KHFpP2hvP28/fDM2MClicm93c2VyL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMzYwXG4gICAgICAgICAgICBdLCBbW05BTUUsICczNjAgJytCUk9XU0VSXV0sIFtcbiAgICAgICAgICAgIC8ob2N1bHVzfHNhbXN1bmd8c2FpbGZpc2gpYnJvd3NlclxcLyhbXFx3XFwuXSspL2lcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgLyguKykvLCAnJDEgJytCUk9XU0VSXSwgVkVSU0lPTl0sIFsgICAgICAgICAgICAgICAgICAgICAgLy8gT2N1bHVzL1NhbXN1bmcvU2FpbGZpc2ggQnJvd3NlclxuICAgICAgICAgICAgLyhjb21vZG9fZHJhZ29uKVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21vZG8gRHJhZ29uXG4gICAgICAgICAgICBdLCBbW05BTUUsIC9fL2csICcgJ10sIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvKGVsZWN0cm9uKVxcLyhbXFx3XFwuXSspIHNhZmFyaS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVsZWN0cm9uLWJhc2VkIEFwcFxuICAgICAgICAgICAgLyh0ZXNsYSkoPzogcXRjYXJicm93c2VyfFxcLygyMFxcZFxcZFxcLlstXFx3XFwuXSspKS9pLCAgICAgICAgICAgICAgICAgICAvLyBUZXNsYVxuICAgICAgICAgICAgL20/KHFxYnJvd3NlcnxiYWlkdWJveGFwcHwyMzQ1RXhwbG9yZXIpW1xcLyBdPyhbXFx3XFwuXSspL2kgICAgICAgICAgICAvLyBRUUJyb3dzZXIvQmFpZHUgQXBwLzIzNDUgQnJvd3NlclxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvKG1ldGFzcilbXFwvIF0/KFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvdUdvdUJyb3dzZXJcbiAgICAgICAgICAgIC8obGJicm93c2VyKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGllQmFvIEJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtOQU1FXSwgW1xuXG4gICAgICAgICAgICAvLyBXZWJWaWV3XG4gICAgICAgICAgICAvKCg/OmZiYW5cXC9mYmlvc3xmYl9pYWJcXC9mYjRhKSg/IS4rZmJhdil8O2ZiYXZcXC8oW1xcd1xcLl0rKTspL2kgICAgICAgLy8gRmFjZWJvb2sgQXBwIGZvciBpT1MgJiBBbmRyb2lkXG4gICAgICAgICAgICBdLCBbW05BTUUsIEZBQ0VCT09LXSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC9zYWZhcmkgKGxpbmUpXFwvKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGluZSBBcHAgZm9yIGlPU1xuICAgICAgICAgICAgL1xcYihsaW5lKVxcLyhbXFx3XFwuXSspXFwvaWFiL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExpbmUgQXBwIGZvciBBbmRyb2lkXG4gICAgICAgICAgICAvKGNocm9taXVtfGluc3RhZ3JhbSlbXFwvIF0oWy1cXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENocm9taXVtL0luc3RhZ3JhbVxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvXFxiZ3NhXFwvKFtcXHdcXC5dKykgLipzYWZhcmlcXC8vaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR29vZ2xlIFNlYXJjaCBBcHBsaWFuY2Ugb24gaU9TXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdHU0EnXV0sIFtcblxuICAgICAgICAgICAgL2hlYWRsZXNzY2hyb21lKD86XFwvKFtcXHdcXC5dKyl8ICkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaHJvbWUgSGVhZGxlc3NcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgQ0hST01FKycgSGVhZGxlc3MnXV0sIFtcblxuICAgICAgICAgICAgLyB3dlxcKS4rKGNocm9tZSlcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hyb21lIFdlYlZpZXdcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgQ0hST01FKycgV2ViVmlldyddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvZHJvaWQuKyB2ZXJzaW9uXFwvKFtcXHdcXC5dKylcXGIuKyg/Om1vYmlsZSBzYWZhcml8c2FmYXJpKS9pICAgICAgICAgICAvLyBBbmRyb2lkIEJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ0FuZHJvaWQgJytCUk9XU0VSXV0sIFtcblxuICAgICAgICAgICAgLyhjaHJvbWV8b21uaXdlYnxhcm9yYXxbdGl6ZW5va2FdezV9ID9icm93c2VyKVxcL3Y/KFtcXHdcXC5dKykvaSAgICAgICAvLyBDaHJvbWUvT21uaVdlYi9Bcm9yYS9UaXplbi9Ob2tpYVxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC92ZXJzaW9uXFwvKFtcXHdcXC5dKykgLiptb2JpbGVcXC9cXHcrIChzYWZhcmkpL2kgICAgICAgICAgICAgICAgICAgICAgICAvLyBNb2JpbGUgU2FmYXJpXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdNb2JpbGUgU2FmYXJpJ11dLCBbXG4gICAgICAgICAgICAvdmVyc2lvblxcLyhbXFx3XFwuXSspIC4qKG1vYmlsZSA/c2FmYXJpfHNhZmFyaSkvaSAgICAgICAgICAgICAgICAgICAgIC8vIFNhZmFyaSAmIFNhZmFyaSBNb2JpbGVcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBOQU1FXSwgW1xuICAgICAgICAgICAgL3dlYmtpdC4rPyhtb2JpbGUgP3NhZmFyaXxzYWZhcmkpKFxcL1tcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAvLyBTYWZhcmkgPCAzLjBcbiAgICAgICAgICAgIF0sIFtOQU1FLCBbVkVSU0lPTiwgc3RyTWFwcGVyLCBvbGRTYWZhcmlNYXBdXSwgW1xuXG4gICAgICAgICAgICAvKHdlYmtpdHxraHRtbClcXC8oW1xcd1xcLl0rKS9pXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLy8gR2Vja28gYmFzZWRcbiAgICAgICAgICAgIC8obmF2aWdhdG9yfG5ldHNjYXBlXFxkPylcXC8oWy1cXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5ldHNjYXBlXG4gICAgICAgICAgICBdLCBbW05BTUUsICdOZXRzY2FwZSddLCBWRVJTSU9OXSwgW1xuICAgICAgICAgICAgL21vYmlsZSB2cjsgcnY6KFtcXHdcXC5dKylcXCkuK2ZpcmVmb3gvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJlZm94IFJlYWxpdHlcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgRklSRUZPWCsnIFJlYWxpdHknXV0sIFtcbiAgICAgICAgICAgIC9la2lvaGYuKyhmbG93KVxcLyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmxvd1xuICAgICAgICAgICAgLyhzd2lmdGZveCkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTd2lmdGZveFxuICAgICAgICAgICAgLyhpY2VkcmFnb258aWNld2Vhc2VsfGNhbWlub3xjaGltZXJhfGZlbm5lY3xtYWVtbyBicm93c2VyfG1pbmltb3xjb25rZXJvcnxrbGFyKVtcXC8gXT8oW1xcd1xcLlxcK10rKS9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJY2VEcmFnb24vSWNld2Vhc2VsL0NhbWluby9DaGltZXJhL0Zlbm5lYy9NYWVtby9NaW5pbW8vQ29ua2Vyb3IvS2xhclxuICAgICAgICAgICAgLyhzZWFtb25rZXl8ay1tZWxlb258aWNlY2F0fGljZWFwZXxmaXJlYmlyZHxwaG9lbml4fHBhbGVtb29ufGJhc2lsaXNrfHdhdGVyZm94KVxcLyhbLVxcd1xcLl0rKSQvaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZWZveC9TZWFNb25rZXkvSy1NZWxlb24vSWNlQ2F0L0ljZUFwZS9GaXJlYmlyZC9QaG9lbml4XG4gICAgICAgICAgICAvKGZpcmVmb3gpXFwvKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE90aGVyIEZpcmVmb3gtYmFzZWRcbiAgICAgICAgICAgIC8obW96aWxsYSlcXC8oW1xcd1xcLl0rKSAuK3J2XFw6LitnZWNrb1xcL1xcZCsvaSwgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTW96aWxsYVxuXG4gICAgICAgICAgICAvLyBPdGhlclxuICAgICAgICAgICAgLyhwb2xhcmlzfGx5bnh8ZGlsbG98aWNhYnxkb3Jpc3xhbWF5YXx3M218bmV0c3VyZnxzbGVpcG5pcnxvYmlnb3xtb3NhaWN8KD86Z298aWNlfHVwKVtcXC4gXT9icm93c2VyKVstXFwvIF0/dj8oW1xcd1xcLl0rKS9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQb2xhcmlzL0x5bngvRGlsbG8vaUNhYi9Eb3Jpcy9BbWF5YS93M20vTmV0U3VyZi9TbGVpcG5pci9PYmlnby9Nb3NhaWMvR28vSUNFL1VQLkJyb3dzZXJcbiAgICAgICAgICAgIC8obGlua3MpIFxcKChbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGlua3NcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXVxuICAgICAgICBdLFxuXG4gICAgICAgIGNwdSA6IFtbXG5cbiAgICAgICAgICAgIC8oPzooYW1kfHgoPzooPzo4Nnw2NClbLV9dKT98d293fHdpbik2NClbO1xcKV0vaSAgICAgICAgICAgICAgICAgICAgIC8vIEFNRDY0ICh4NjQpXG4gICAgICAgICAgICBdLCBbW0FSQ0hJVEVDVFVSRSwgJ2FtZDY0J11dLCBbXG5cbiAgICAgICAgICAgIC8oaWEzMig/PTspKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUEzMiAocXVpY2t0aW1lKVxuICAgICAgICAgICAgXSwgW1tBUkNISVRFQ1RVUkUsIGxvd2VyaXplXV0sIFtcblxuICAgICAgICAgICAgLygoPzppWzM0Nl18eCk4NilbO1xcKV0vaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUEzMiAoeDg2KVxuICAgICAgICAgICAgXSwgW1tBUkNISVRFQ1RVUkUsICdpYTMyJ11dLCBbXG5cbiAgICAgICAgICAgIC9cXGIoYWFyY2g2NHxhcm0odj84ZT9sP3xfPzY0KSlcXGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFSTTY0XG4gICAgICAgICAgICBdLCBbW0FSQ0hJVEVDVFVSRSwgJ2FybTY0J11dLCBbXG5cbiAgICAgICAgICAgIC9cXGIoYXJtKD86dls2N10pP2h0P24/W2ZsXXA/KVxcYi9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBUk1IRlxuICAgICAgICAgICAgXSwgW1tBUkNISVRFQ1RVUkUsICdhcm1oZiddXSwgW1xuXG4gICAgICAgICAgICAvLyBQb2NrZXRQQyBtaXN0YWtlbmx5IGlkZW50aWZpZWQgYXMgUG93ZXJQQ1xuICAgICAgICAgICAgL3dpbmRvd3MgKGNlfG1vYmlsZSk7IHBwYzsvaVxuICAgICAgICAgICAgXSwgW1tBUkNISVRFQ1RVUkUsICdhcm0nXV0sIFtcblxuICAgICAgICAgICAgLygoPzpwcGN8cG93ZXJwYykoPzo2NCk/KSg/OiBtYWN8O3xcXCkpL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUG93ZXJQQ1xuICAgICAgICAgICAgXSwgW1tBUkNISVRFQ1RVUkUsIC9vd2VyLywgRU1QVFksIGxvd2VyaXplXV0sIFtcblxuICAgICAgICAgICAgLyhzdW40XFx3KVs7XFwpXS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNQQVJDXG4gICAgICAgICAgICBdLCBbW0FSQ0hJVEVDVFVSRSwgJ3NwYXJjJ11dLCBbXG5cbiAgICAgICAgICAgIC8oKD86YXZyMzJ8aWE2NCg/PTspKXw2OGsoPz1cXCkpfFxcYmFybSg/PXYoPzpbMS03XXxbNS03XTEpbD98O3xlYWJpKXwoPz1hdG1lbCApYXZyfCg/OmlyaXh8bWlwc3xzcGFyYykoPzo2NCk/XFxifHBhLXJpc2MpL2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUE2NCwgNjhLLCBBUk0vNjQsIEFWUi8zMiwgSVJJWC82NCwgTUlQUy82NCwgU1BBUkMvNjQsIFBBLVJJU0NcbiAgICAgICAgICAgIF0sIFtbQVJDSElURUNUVVJFLCBsb3dlcml6ZV1dXG4gICAgICAgIF0sXG5cbiAgICAgICAgZGV2aWNlIDogW1tcblxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgIC8vIE1PQklMRVMgJiBUQUJMRVRTXG4gICAgICAgICAgICAvLyBPcmRlcmVkIGJ5IHBvcHVsYXJpdHlcbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICAgICAgLy8gU2Ftc3VuZ1xuICAgICAgICAgICAgL1xcYihzY2gtaVs4OV0wXFxkfHNody1tMzgwc3xzbS1bcHRdXFx3ezIsNH18Z3QtW3BuXVxcZHsyLDR9fHNnaC10OFs1Nl05fG5leHVzIDEwKS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIFNBTVNVTkddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9cXGIoKD86c1tjZ3BdaHxndHxzbSktXFx3K3xnYWxheHkgbmV4dXMpL2ksXG4gICAgICAgICAgICAvc2Ftc3VuZ1stIF0oWy1cXHddKykvaSxcbiAgICAgICAgICAgIC9zZWMtKHNnaFxcdyspL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgU0FNU1VOR10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBBcHBsZVxuICAgICAgICAgICAgL1xcKChpcCg/OmhvbmV8b2QpW1xcdyBdKik7L2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlQb2QvaVBob25lXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIEFQUExFXSwgW1RZUEUsIE1PQklMRV1dLCBbXG4gICAgICAgICAgICAvXFwoKGlwYWQpO1stXFx3XFwpLDsgXSthcHBsZS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlQYWRcbiAgICAgICAgICAgIC9hcHBsZWNvcmVtZWRpYVxcL1tcXHdcXC5dKyBcXCgoaXBhZCkvaSxcbiAgICAgICAgICAgIC9cXGIoaXBhZClcXGRcXGQ/LFxcZFxcZD9bO1xcXV0uK2lvcy9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIEFQUExFXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC8vIEh1YXdlaVxuICAgICAgICAgICAgL1xcYigoPzphZ1tyc11bMjNdP3xiYWgyP3xzaHQ/fGJ0diktYT9bbHddXFxkezJ9KVxcYig/IS4rZFxcL3MpL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgSFVBV0VJXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvKD86aHVhd2VpfGhvbm9yKShbLVxcdyBdKylbO1xcKV0vaSxcbiAgICAgICAgICAgIC9cXGIobmV4dXMgNnB8XFx3ezIsNH0tW2F0dV0/W2xuXVswMTI1OXhdWzAxMjM1OV1bYW5dPylcXGIoPyEuK2RcXC9zKS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIEhVQVdFSV0sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBYaWFvbWlcbiAgICAgICAgICAgIC9cXGIocG9jb1tcXHcgXSspKD86IGJ1aXxcXCkpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWGlhb21pIFBPQ09cbiAgICAgICAgICAgIC9cXGI7IChcXHcrKSBidWlsZFxcL2htXFwxL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFhpYW9taSBIb25nbWkgJ251bWVyaWMnIG1vZGVsc1xuICAgICAgICAgICAgL1xcYihobVstXyBdP25vdGU/W18gXT8oPzpcXGRcXHcpPykgYnVpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBYaWFvbWkgSG9uZ21pXG4gICAgICAgICAgICAvXFxiKHJlZG1pW1xcLV8gXT8oPzpub3RlfGspP1tcXHdfIF0rKSg/OiBidWl8XFwpKS9pLCAgICAgICAgICAgICAgICAgICAvLyBYaWFvbWkgUmVkbWlcbiAgICAgICAgICAgIC9cXGIobWlbLV8gXT8oPzphXFxkfG9uZXxvbmVbXyBdcGx1c3xub3RlIGx0ZXxtYXgpP1tfIF0/KD86XFxkP1xcdz8pW18gXT8oPzpwbHVzfHNlfGxpdGUpPykoPzogYnVpfFxcKSkvaSAvLyBYaWFvbWkgTWlcbiAgICAgICAgICAgIF0sIFtbTU9ERUwsIC9fL2csICcgJ10sIFtWRU5ET1IsIFhJQU9NSV0sIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL1xcYihtaVstXyBdPyg/OnBhZCkoPzpbXFx3XyBdKykpKD86IGJ1aXxcXCkpL2kgICAgICAgICAgICAgICAgICAgICAgICAvLyBNaSBQYWQgdGFibGV0c1xuICAgICAgICAgICAgXSxbW01PREVMLCAvXy9nLCAnICddLCBbVkVORE9SLCBYSUFPTUldLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgLy8gT1BQT1xuICAgICAgICAgICAgLzsgKFxcdyspIGJ1aS4rIG9wcG8vaSxcbiAgICAgICAgICAgIC9cXGIoY3BoWzEyXVxcZHszfXxwKD86YWZ8Y1thbF18ZFxcd3xlW2FyXSlbbXRdXFxkMHx4OTAwN3xhMTAxb3ApXFxiL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ09QUE8nXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8vIFZpdm9cbiAgICAgICAgICAgIC92aXZvIChcXHcrKSg/OiBidWl8XFwpKS9pLFxuICAgICAgICAgICAgL1xcYih2WzEyXVxcZHszfVxcdz9bYXRdKSg/OiBidWl8OykvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnVml2byddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gUmVhbG1lXG4gICAgICAgICAgICAvXFxiKHJteFsxMl1cXGR7M30pKD86IGJ1aXw7fFxcKSkvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnUmVhbG1lJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBNb3Rvcm9sYVxuICAgICAgICAgICAgL1xcYihtaWxlc3RvbmV8ZHJvaWQoPzpbMi00eF18ICg/OmJpb25pY3x4Mnxwcm98cmF6cikpPzo/KCA0Zyk/KVxcYltcXHcgXStidWlsZFxcLy9pLFxuICAgICAgICAgICAgL1xcYm1vdCg/Om9yb2xhKT9bLSBdKFxcdyopL2ksXG4gICAgICAgICAgICAvKCg/Om1vdG9bXFx3XFwoXFwpIF0rfHh0XFxkezMsNH18bmV4dXMgNikoPz0gYnVpfFxcKSkpL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgTU9UT1JPTEFdLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9cXGIobXo2MFxcZHx4b29tWzIgXXswLDJ9KSBidWlsZFxcLy9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIE1PVE9ST0xBXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC8vIExHXG4gICAgICAgICAgICAvKCg/PWxnKT9bdmxda1xcLT9cXGR7M30pIGJ1aXwgM1xcLlstXFx3OyBdezEwfWxnPy0oWzA2Y3Y5XXszLDR9KS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIExHXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvKGxtKD86LT9mMTAwW252XT98LVtcXHdcXC5dKykoPz0gYnVpfFxcKSl8bmV4dXMgWzQ1XSkvaSxcbiAgICAgICAgICAgIC9cXGJsZ1stZTtcXC8gXSsoKD8hYnJvd3NlcnxuZXRjYXN0fGFuZHJvaWQgdHYpXFx3KykvaSxcbiAgICAgICAgICAgIC9cXGJsZy0/KFtcXGRcXHddKykgYnVpL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgTEddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gTGVub3ZvXG4gICAgICAgICAgICAvKGlkZWF0YWJbLVxcdyBdKykvaSxcbiAgICAgICAgICAgIC9sZW5vdm8gPyhzWzU2XTAwMFstXFx3XSt8dGFiKD86W1xcdyBdKyl8eXRbLVxcZFxcd117Nn18dGJbLVxcZFxcd117Nn0pL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0xlbm92byddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgLy8gTm9raWFcbiAgICAgICAgICAgIC8oPzptYWVtb3xub2tpYSkuKihuOTAwfGx1bWlhIFxcZCspL2ksXG4gICAgICAgICAgICAvbm9raWFbLV8gXT8oWy1cXHdcXC5dKikvaVxuICAgICAgICAgICAgXSwgW1tNT0RFTCwgL18vZywgJyAnXSwgW1ZFTkRPUiwgJ05va2lhJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBHb29nbGVcbiAgICAgICAgICAgIC8ocGl4ZWwgYylcXGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdvb2dsZSBQaXhlbCBDXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIEdPT0dMRV0sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL2Ryb2lkLis7IChwaXhlbFtcXGRheGwgXXswLDZ9KSg/OiBidWl8XFwpKS9pICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdvb2dsZSBQaXhlbFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCBHT09HTEVdLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gU29ueVxuICAgICAgICAgICAgL2Ryb2lkLisgKFtjLWddXFxkezR9fHNvWy1nbF1cXHcrfHhxLWFcXHdbNC03XVsxMl0pKD89IGJ1aXxcXCkuK2Nocm9tZVxcLyg/IVsxLTZdezAsMX1cXGRcXC4pKS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIFNPTlldLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9zb255IHRhYmxldCBbcHNdL2ksXG4gICAgICAgICAgICAvXFxiKD86c29ueSk/c2dwXFx3Kyg/OiBidWl8XFwpKS9pXG4gICAgICAgICAgICBdLCBbW01PREVMLCAnWHBlcmlhIFRhYmxldCddLCBbVkVORE9SLCBTT05ZXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC8vIE9uZVBsdXNcbiAgICAgICAgICAgIC8gKGtiMjAwNXxpbjIwWzEyXTV8YmUyMFsxMl1bNTldKVxcYi9pLFxuICAgICAgICAgICAgLyg/Om9uZSk/KD86cGx1cyk/IChhXFxkMFxcZFxcZCkoPzogYnxcXCkpL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ09uZVBsdXMnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8vIEFtYXpvblxuICAgICAgICAgICAgLyhhbGV4YSl3ZWJtL2ksXG4gICAgICAgICAgICAvKGtmW2Etel17Mn13aSkoIGJ1aXxcXCkpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLaW5kbGUgRmlyZSB3aXRob3V0IFNpbGtcbiAgICAgICAgICAgIC8oa2ZbYS16XSspKCBidWl8XFwpKS4rc2lsa1xcLy9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLaW5kbGUgRmlyZSBIRFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCBBTUFaT05dLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC8oKD86c2R8a2YpWzAzNDloaWpvcnN0dXddKykoIGJ1aXxcXCkpLitzaWxrXFwvL2kgICAgICAgICAgICAgICAgICAgICAvLyBGaXJlIFBob25lXG4gICAgICAgICAgICBdLCBbW01PREVMLCAvKC4rKS9nLCAnRmlyZSBQaG9uZSAkMSddLCBbVkVORE9SLCBBTUFaT05dLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gQmxhY2tCZXJyeVxuICAgICAgICAgICAgLyhwbGF5Ym9vayk7Wy1cXHdcXCksOyBdKyhyaW0pL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrQmVycnkgUGxheUJvb2tcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgVkVORE9SLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9cXGIoKD86YmJbYS1mXXxzdFtodl0pMTAwLVxcZCkvaSxcbiAgICAgICAgICAgIC9cXChiYjEwOyAoXFx3KykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCbGFja0JlcnJ5IDEwXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIEJMQUNLQkVSUlldLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gQXN1c1xuICAgICAgICAgICAgLyg/OlxcYnxhc3VzXykodHJhbnNmb1twcmltZSBdezQsMTB9IFxcdyt8ZWVlcGN8c2xpZGVyIFxcdyt8bmV4dXMgN3xwYWRmb25lfHAwMFtjal0pL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgQVNVU10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgLyAoeltiZXNdNlswMjddWzAxMl1ba21dW2xzXXx6ZW5mb25lIFxcZFxcdz8pXFxiL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgQVNVU10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBIVENcbiAgICAgICAgICAgIC8obmV4dXMgOSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSFRDIE5leHVzIDlcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0hUQyddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC8oaHRjKVstO18gXXsxLDJ9KFtcXHcgXSsoPz1cXCl8IGJ1aSl8XFx3KykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSFRDXG5cbiAgICAgICAgICAgIC8vIFpURVxuICAgICAgICAgICAgLyh6dGUpWy0gXShbXFx3IF0rPykoPzogYnVpfFxcL3xcXCkpL2ksXG4gICAgICAgICAgICAvKGFsY2F0ZWx8Z2Vla3NwaG9uZXxuZXhpYW58cGFuYXNvbmljfHNvbnkpWy1fIF0/KFstXFx3XSopL2kgICAgICAgICAvLyBBbGNhdGVsL0dlZWtzUGhvbmUvTmV4aWFuL1BhbmFzb25pYy9Tb255XG4gICAgICAgICAgICBdLCBbVkVORE9SLCBbTU9ERUwsIC9fL2csICcgJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBBY2VyXG4gICAgICAgICAgICAvZHJvaWQuKzsgKFthYl1bMS03XS0/WzAxNzhhXVxcZFxcZD8pL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0FjZXInXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC8vIE1laXp1XG4gICAgICAgICAgICAvZHJvaWQuKzsgKG1bMS01XSBub3RlKSBidWkvaSxcbiAgICAgICAgICAgIC9cXGJtei0oWy1cXHddezIsfSkvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnTWVpenUnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8vIFNoYXJwXG4gICAgICAgICAgICAvXFxiKHNoLT9bYWx0dnpdP1xcZFxcZFthLWVrbV0/KS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdTaGFycCddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gTUlYRURcbiAgICAgICAgICAgIC8oYmxhY2tiZXJyeXxiZW5xfHBhbG0oPz1cXC0pfHNvbnllcmljc3NvbnxhY2VyfGFzdXN8ZGVsbHxtZWl6dXxtb3Rvcm9sYXxwb2x5dHJvbilbLV8gXT8oWy1cXHddKikvaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2tCZXJyeS9CZW5RL1BhbG0vU29ueS1Fcmljc3Nvbi9BY2VyL0FzdXMvRGVsbC9NZWl6dS9Nb3Rvcm9sYS9Qb2x5dHJvblxuICAgICAgICAgICAgLyhocCkgKFtcXHcgXStcXHcpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhQIGlQQVFcbiAgICAgICAgICAgIC8oYXN1cyktPyhcXHcrKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFzdXNcbiAgICAgICAgICAgIC8obWljcm9zb2Z0KTsgKGx1bWlhW1xcdyBdKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pY3Jvc29mdCBMdW1pYVxuICAgICAgICAgICAgLyhsZW5vdm8pWy1fIF0/KFstXFx3XSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGVub3ZvXG4gICAgICAgICAgICAvKGpvbGxhKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEpvbGxhXG4gICAgICAgICAgICAvKG9wcG8pID8oW1xcdyBdKykgYnVpL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPUFBPXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBNT0RFTCwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8oYXJjaG9zKSAoZ2FtZXBhZDI/KS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXJjaG9zXG4gICAgICAgICAgICAvKGhwKS4rKHRvdWNocGFkKD8hLit0YWJsZXQpfHRhYmxldCkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhQIFRvdWNoUGFkXG4gICAgICAgICAgICAvKGtpbmRsZSlcXC8oW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtpbmRsZVxuICAgICAgICAgICAgLyhub29rKVtcXHcgXStidWlsZFxcLyhcXHcrKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb29rXG4gICAgICAgICAgICAvKGRlbGwpIChzdHJlYVtrcHJcXGQgXSpbXFxka29dKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVsbCBTdHJlYWtcbiAgICAgICAgICAgIC8obGVbLSBdK3BhbilbLSBdKyhcXHd7MSw5fSkgYnVpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExlIFBhbiBUYWJsZXRzXG4gICAgICAgICAgICAvKHRyaW5pdHkpWy0gXSoodFxcZHszfSkgYnVpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmluaXR5IFRhYmxldHNcbiAgICAgICAgICAgIC8oZ2lnYXNldClbLSBdKyhxXFx3ezEsOX0pIGJ1aS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdpZ2FzZXQgVGFibGV0c1xuICAgICAgICAgICAgLyh2b2RhZm9uZSkgKFtcXHcgXSspKD86XFwpfCBidWkpL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZvZGFmb25lXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBNT0RFTCwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC8oc3VyZmFjZSBkdW8pL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VyZmFjZSBEdW9cbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgTUlDUk9TT0ZUXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvZHJvaWQgW1xcZFxcLl0rOyAoZnBcXGR1PykoPzogYnxcXCkpL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWlycGhvbmVcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0ZhaXJwaG9uZSddLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC8odTMwNGFhKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQVQmVFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnQVQmVCddLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9cXGJzaWUtKFxcdyopL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaWVtZW5zXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdTaWVtZW5zJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL1xcYihyY3RcXHcrKSBiL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJDQSBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdSQ0EnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvXFxiKHZlbnVlW1xcZCBdezIsN30pIGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVsbCBWZW51ZSBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdEZWxsJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1xcYihxKD86bXZ8dGEpXFx3KykgYi9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcml6b24gVGFibGV0XG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdWZXJpem9uJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1xcYig/OmJhcm5lc1smIF0rbm9ibGUgfGJuW3J0XSkoW1xcd1xcKyBdKikgYi9pICAgICAgICAgICAgICAgICAgICAgICAvLyBCYXJuZXMgJiBOb2JsZSBUYWJsZXRcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0Jhcm5lcyAmIE5vYmxlJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1xcYih0bVxcZHszfVxcdyspIGIvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnTnVWaXNpb24nXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvXFxiKGs4OCkgYi9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBaVEUgSyBTZXJpZXMgVGFibGV0XG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdaVEUnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvXFxiKG54XFxkezN9aikgYi9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWlRFIE51YmlhXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdaVEUnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG4gICAgICAgICAgICAvXFxiKGdlblxcZHszfSkgYi4rNDloL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3dpc3MgR0VOIE1vYmlsZVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnU3dpc3MnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG4gICAgICAgICAgICAvXFxiKHp1clxcZHszfSkgYi9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3dpc3MgWlVSIFRhYmxldFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnU3dpc3MnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvXFxiKCh6ZWtpKT90Yi4qXFxiKSBiL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWmVraSBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdaZWtpJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1xcYihbeXJdXFxkezJ9KSBiL2ksXG4gICAgICAgICAgICAvXFxiKGRyYWdvblstIF0rdG91Y2ggfGR0KShcXHd7NX0pIGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhZ29uIFRvdWNoIFRhYmxldFxuICAgICAgICAgICAgXSwgW1tWRU5ET1IsICdEcmFnb24gVG91Y2gnXSwgTU9ERUwsIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1xcYihucy0/XFx3ezAsOX0pIGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluc2lnbmlhIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0luc2lnbmlhJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1xcYigobnhhfG5leHQpLT9cXHd7MCw5fSkgYi9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5leHRCb29rIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ05leHRCb29rJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1xcYih4dHJlbWVcXF8pPyh2KDFbMDQ1XXwyWzAxNV18WzM0NjldMHw3WzA1XSkpIGIvaSAgICAgICAgICAgICAgICAgIC8vIFZvaWNlIFh0cmVtZSBQaG9uZXNcbiAgICAgICAgICAgIF0sIFtbVkVORE9SLCAnVm9pY2UnXSwgTU9ERUwsIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL1xcYihsdnRlbFxcLSk/KHYxWzEyXSkgYi9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEx2VGVsIFBob25lc1xuICAgICAgICAgICAgXSwgW1tWRU5ET1IsICdMdlRlbCddLCBNT0RFTCwgW1RZUEUsIE1PQklMRV1dLCBbXG4gICAgICAgICAgICAvXFxiKHBoLTEpIC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFc3NlbnRpYWwgUEgtMVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnRXNzZW50aWFsJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL1xcYih2KDEwMG1kfDcwMG5hfDcwMTF8OTE3ZykuKlxcYikgYi9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVudml6ZW4gVGFibGV0c1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnRW52aXplbiddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9cXGIodHJpb1stXFx3XFwuIF0rKSBiL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFjaFNwZWVkIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ01hY2hTcGVlZCddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9cXGJ0dV8oMTQ5MSkgYi9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJvdG9yIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ1JvdG9yJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgLyhzaGllbGRbXFx3IF0rKSBiL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTnZpZGlhIFNoaWVsZCBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdOdmlkaWEnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvKHNwcmludCkgKFxcdyspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTcHJpbnQgUGhvbmVzXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBNT0RFTCwgW1RZUEUsIE1PQklMRV1dLCBbXG4gICAgICAgICAgICAvKGtpblxcLltvbmV0d117M30pL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNaWNyb3NvZnQgS2luXG4gICAgICAgICAgICBdLCBbW01PREVMLCAvXFwuL2csICcgJ10sIFtWRU5ET1IsIE1JQ1JPU09GVF0sIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL2Ryb2lkLis7IChjYzY2NjY/fGV0NVsxNl18bWNbMjM5XVsyM114P3x2YzhbMDNdeD8pXFwpL2kgICAgICAgICAgICAgLy8gWmVicmFcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgWkVCUkFdLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9kcm9pZC4rOyAoZWMzMHxwczIwfHRjWzItOF1cXGRba3hdKVxcKS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIFpFQlJBXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgIC8vIENPTlNPTEVTXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgICAgIC8ob3V5YSkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3V5YVxuICAgICAgICAgICAgLyhuaW50ZW5kbykgKFt3aWRzM3V0Y2hdKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOaW50ZW5kb1xuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBDT05TT0xFXV0sIFtcbiAgICAgICAgICAgIC9kcm9pZC4rOyAoc2hpZWxkKSBidWkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTnZpZGlhXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdOdmlkaWEnXSwgW1RZUEUsIENPTlNPTEVdXSwgW1xuICAgICAgICAgICAgLyhwbGF5c3RhdGlvbiBbMzQ1cG9ydGFibGV2aV0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQbGF5c3RhdGlvblxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCBTT05ZXSwgW1RZUEUsIENPTlNPTEVdXSwgW1xuICAgICAgICAgICAgL1xcYih4Ym94KD86IG9uZSk/KD8hOyB4Ym94KSlbXFwpOyBdL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pY3Jvc29mdCBYYm94XG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIE1JQ1JPU09GVF0sIFtUWVBFLCBDT05TT0xFXV0sIFtcblxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgLy8gU01BUlRUVlNcbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICAgICAgL3NtYXJ0LXR2Lisoc2Ftc3VuZykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTYW1zdW5nXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBbVFlQRSwgU01BUlRUVl1dLCBbXG4gICAgICAgICAgICAvaGJidHYuK21hcGxlOyhcXGQrKS9pXG4gICAgICAgICAgICBdLCBbW01PREVMLCAvXi8sICdTbWFydFRWJ10sIFtWRU5ET1IsIFNBTVNVTkddLCBbVFlQRSwgU01BUlRUVl1dLCBbXG4gICAgICAgICAgICAvKG51eDsgbmV0Y2FzdC4rc21hcnR0dnxsZyAobmV0Y2FzdFxcLnR2LTIwMVxcZHxhbmRyb2lkIHR2KSkvaSAgICAgICAgLy8gTEcgU21hcnRUVlxuICAgICAgICAgICAgXSwgW1tWRU5ET1IsIExHXSwgW1RZUEUsIFNNQVJUVFZdXSwgW1xuICAgICAgICAgICAgLyhhcHBsZSkgP3R2L2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBsZSBUVlxuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgW01PREVMLCBBUFBMRSsnIFRWJ10sIFtUWVBFLCBTTUFSVFRWXV0sIFtcbiAgICAgICAgICAgIC9jcmtleS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR29vZ2xlIENocm9tZWNhc3RcbiAgICAgICAgICAgIF0sIFtbTU9ERUwsIENIUk9NRSsnY2FzdCddLCBbVkVORE9SLCBHT09HTEVdLCBbVFlQRSwgU01BUlRUVl1dLCBbXG4gICAgICAgICAgICAvZHJvaWQuK2FmdChcXHcpKCBidWl8XFwpKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZSBUVlxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCBBTUFaT05dLCBbVFlQRSwgU01BUlRUVl1dLCBbXG4gICAgICAgICAgICAvXFwoZHR2W1xcKTtdLisoYXF1b3MpL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2hhcnBcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ1NoYXJwJ10sIFtUWVBFLCBTTUFSVFRWXV0sIFtcbiAgICAgICAgICAgIC9cXGIocm9rdSlbXFxkeF0qW1xcKVxcL10oKD86ZHZwLSk/W1xcZFxcLl0qKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUm9rdVxuICAgICAgICAgICAgL2hiYnR2XFwvXFxkK1xcLlxcZCtcXC5cXGQrICtcXChbXFx3IF0qOyAqKFxcd1teO10qKTsoW147XSopL2kgICAgICAgICAgICAgICAvLyBIYmJUViBkZXZpY2VzXG4gICAgICAgICAgICBdLCBbW1ZFTkRPUiwgdHJpbV0sIFtNT0RFTCwgdHJpbV0sIFtUWVBFLCBTTUFSVFRWXV0sIFtcbiAgICAgICAgICAgIC9cXGIoYW5kcm9pZCB0dnxzbWFydFstIF0/dHZ8b3BlcmEgdHZ8dHY7IHJ2OilcXGIvaSAgICAgICAgICAgICAgICAgICAvLyBTbWFydFRWIGZyb20gVW5pZGVudGlmaWVkIFZlbmRvcnNcbiAgICAgICAgICAgIF0sIFtbVFlQRSwgU01BUlRUVl1dLCBbXG5cbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgIC8vIFdFQVJBQkxFU1xuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICAvKChwZWJibGUpKWFwcC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlYmJsZVxuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBXRUFSQUJMRV1dLCBbXG4gICAgICAgICAgICAvZHJvaWQuKzsgKGdsYXNzKSBcXGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHb29nbGUgR2xhc3NcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgR09PR0xFXSwgW1RZUEUsIFdFQVJBQkxFXV0sIFtcbiAgICAgICAgICAgIC9kcm9pZC4rOyAod3Q2Mz8wezIsM30pXFwpL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgWkVCUkFdLCBbVFlQRSwgV0VBUkFCTEVdXSwgW1xuICAgICAgICAgICAgLyhxdWVzdCggMik/KS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPY3VsdXMgUXVlc3RcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgRkFDRUJPT0tdLCBbVFlQRSwgV0VBUkFCTEVdXSwgW1xuXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAvLyBFTUJFRERFRFxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICAvKHRlc2xhKSg/OiBxdGNhcmJyb3dzZXJ8XFwvWy1cXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRlc2xhXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBbVFlQRSwgRU1CRURERURdXSwgW1xuXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgLy8gTUlYRUQgKEdFTkVSSUMpXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgICAgIC9kcm9pZCAuKz87IChbXjtdKz8pKD86IGJ1aXxcXCkgYXBwbGV3KS4rPyBtb2JpbGUgc2FmYXJpL2kgICAgICAgICAgIC8vIEFuZHJvaWQgUGhvbmVzIGZyb20gVW5pZGVudGlmaWVkIFZlbmRvcnNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1RZUEUsIE1PQklMRV1dLCBbXG4gICAgICAgICAgICAvZHJvaWQgLis/OyAoW147XSs/KSg/OiBidWl8XFwpIGFwcGxldykuKz8oPyEgbW9iaWxlKSBzYWZhcmkvaSAgICAgICAvLyBBbmRyb2lkIFRhYmxldHMgZnJvbSBVbmlkZW50aWZpZWQgVmVuZG9yc1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9cXGIoKHRhYmxldHx0YWIpWztcXC9dfGZvY3VzXFwvXFxkKD8hLittb2JpbGUpKS9pICAgICAgICAgICAgICAgICAgICAgIC8vIFVuaWRlbnRpZmlhYmxlIFRhYmxldFxuICAgICAgICAgICAgXSwgW1tUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgLyhwaG9uZXxtb2JpbGUoPzpbO1xcL118IHNhZmFyaSl8cGRhKD89Lit3aW5kb3dzIGNlKSkvaSAgICAgICAgICAgICAgLy8gVW5pZGVudGlmaWFibGUgTW9iaWxlXG4gICAgICAgICAgICBdLCBbW1RZUEUsIE1PQklMRV1dLCBbXG4gICAgICAgICAgICAvKGFuZHJvaWRbLVxcd1xcLiBdezAsOX0pOy4rYnVpbC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJpYyBBbmRyb2lkIERldmljZVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnR2VuZXJpYyddXVxuICAgICAgICBdLFxuXG4gICAgICAgIGVuZ2luZSA6IFtbXG5cbiAgICAgICAgICAgIC93aW5kb3dzLisgZWRnZVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFZGdlSFRNTFxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCBFREdFKydIVE1MJ11dLCBbXG5cbiAgICAgICAgICAgIC93ZWJraXRcXC81MzdcXC4zNi4rY2hyb21lXFwvKD8hMjcpKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCbGlua1xuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnQmxpbmsnXV0sIFtcblxuICAgICAgICAgICAgLyhwcmVzdG8pXFwvKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmVzdG9cbiAgICAgICAgICAgIC8od2Via2l0fHRyaWRlbnR8bmV0ZnJvbnR8bmV0c3VyZnxhbWF5YXxseW54fHczbXxnb2FubmEpXFwvKFtcXHdcXC5dKykvaSwgLy8gV2ViS2l0L1RyaWRlbnQvTmV0RnJvbnQvTmV0U3VyZi9BbWF5YS9MeW54L3czbS9Hb2FubmFcbiAgICAgICAgICAgIC9la2lvaChmbG93KVxcLyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmxvd1xuICAgICAgICAgICAgLyhraHRtbHx0YXNtYW58bGlua3MpW1xcLyBdXFwoPyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS0hUTUwvVGFzbWFuL0xpbmtzXG4gICAgICAgICAgICAvKGljYWIpW1xcLyBdKFsyM11cXC5bXFxkXFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpQ2FiXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgL3J2XFw6KFtcXHdcXC5dezEsOX0pXFxiLisoZ2Vja28pL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2Vja29cbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBOQU1FXVxuICAgICAgICBdLFxuXG4gICAgICAgIG9zIDogW1tcblxuICAgICAgICAgICAgLy8gV2luZG93c1xuICAgICAgICAgICAgL21pY3Jvc29mdCAod2luZG93cykgKHZpc3RhfHhwKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaW5kb3dzIChpVHVuZXMpXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC8od2luZG93cykgbnQgNlxcLjI7IChhcm0pL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdpbmRvd3MgUlRcbiAgICAgICAgICAgIC8od2luZG93cyAoPzpwaG9uZSg/OiBvcyk/fG1vYmlsZSkpW1xcLyBdPyhbXFxkXFwuXFx3IF0qKS9pLCAgICAgICAgICAgIC8vIFdpbmRvd3MgUGhvbmVcbiAgICAgICAgICAgIC8od2luZG93cylbXFwvIF0/KFtudGNlXFxkXFwuIF0rXFx3KSg/IS4reGJveCkvaVxuICAgICAgICAgICAgXSwgW05BTUUsIFtWRVJTSU9OLCBzdHJNYXBwZXIsIHdpbmRvd3NWZXJzaW9uTWFwXV0sIFtcbiAgICAgICAgICAgIC8od2luKD89M3w5fG4pfHdpbiA5eCApKFtudFxcZFxcLl0rKS9pXG4gICAgICAgICAgICBdLCBbW05BTUUsICdXaW5kb3dzJ10sIFtWRVJTSU9OLCBzdHJNYXBwZXIsIHdpbmRvd3NWZXJzaW9uTWFwXV0sIFtcblxuICAgICAgICAgICAgLy8gaU9TL21hY09TXG4gICAgICAgICAgICAvaXBbaG9uZWFkXXsyLDR9XFxiKD86LipvcyAoW1xcd10rKSBsaWtlIG1hY3w7IG9wZXJhKS9pLCAgICAgICAgICAgICAgLy8gaU9TXG4gICAgICAgICAgICAvY2ZuZXR3b3JrXFwvLitkYXJ3aW4vaVxuICAgICAgICAgICAgXSwgW1tWRVJTSU9OLCAvXy9nLCAnLiddLCBbTkFNRSwgJ2lPUyddXSwgW1xuICAgICAgICAgICAgLyhtYWMgb3MgeCkgPyhbXFx3XFwuIF0qKS9pLFxuICAgICAgICAgICAgLyhtYWNpbnRvc2h8bWFjX3Bvd2VycGNcXGIpKD8hLitoYWlrdSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFjIE9TXG4gICAgICAgICAgICBdLCBbW05BTUUsICdNYWMgT1MnXSwgW1ZFUlNJT04sIC9fL2csICcuJ11dLCBbXG5cbiAgICAgICAgICAgIC8vIE1vYmlsZSBPU2VzXG4gICAgICAgICAgICAvZHJvaWQgKFtcXHdcXC5dKylcXGIuKyhhbmRyb2lkWy0gXXg4NikvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFuZHJvaWQteDg2XG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgTkFNRV0sIFsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFuZHJvaWQvV2ViT1MvUU5YL0JhZGEvUklNL01hZW1vL01lZUdvL1NhaWxmaXNoIE9TXG4gICAgICAgICAgICAvKGFuZHJvaWR8d2Vib3N8cW54fGJhZGF8cmltIHRhYmxldCBvc3xtYWVtb3xtZWVnb3xzYWlsZmlzaClbLVxcLyBdPyhbXFx3XFwuXSopL2ksXG4gICAgICAgICAgICAvKGJsYWNrYmVycnkpXFx3KlxcLyhbXFx3XFwuXSopL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCbGFja2JlcnJ5XG4gICAgICAgICAgICAvKHRpemVufGthaW9zKVtcXC8gXShbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRpemVuL0thaU9TXG4gICAgICAgICAgICAvXFwoKHNlcmllczQwKTsvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXJpZXMgNDBcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSwgW1xuICAgICAgICAgICAgL1xcKGJiKDEwKTsvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2tCZXJyeSAxMFxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCBCTEFDS0JFUlJZXV0sIFtcbiAgICAgICAgICAgIC8oPzpzeW1iaWFuID9vc3xzeW1ib3N8czYwKD89Oyl8c2VyaWVzNjApWy1cXC8gXT8oW1xcd1xcLl0qKS9pICAgICAgICAgLy8gU3ltYmlhblxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnU3ltYmlhbiddXSwgW1xuICAgICAgICAgICAgL21vemlsbGFcXC9bXFxkXFwuXSsgXFwoKD86bW9iaWxlfHRhYmxldHx0dnxtb2JpbGU7IFtcXHcgXSspOyBydjouKyBnZWNrb1xcLyhbXFx3XFwuXSspL2kgLy8gRmlyZWZveCBPU1xuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCBGSVJFRk9YKycgT1MnXV0sIFtcbiAgICAgICAgICAgIC93ZWIwczsuK3J0KHR2KS9pLFxuICAgICAgICAgICAgL1xcYig/OmhwKT93b3MoPzpicm93c2VyKT9cXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2ViT1NcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ3dlYk9TJ11dLCBbXG5cbiAgICAgICAgICAgIC8vIEdvb2dsZSBDaHJvbWVjYXN0XG4gICAgICAgICAgICAvY3JrZXlcXC8oW1xcZFxcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdvb2dsZSBDaHJvbWVjYXN0XG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsIENIUk9NRSsnY2FzdCddXSwgW1xuICAgICAgICAgICAgLyhjcm9zKSBbXFx3XSsgKFtcXHdcXC5dK1xcdykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hyb21pdW0gT1NcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ0Nocm9taXVtIE9TJ10sIFZFUlNJT05dLFtcblxuICAgICAgICAgICAgLy8gQ29uc29sZVxuICAgICAgICAgICAgLyhuaW50ZW5kb3xwbGF5c3RhdGlvbikgKFt3aWRzMzQ1cG9ydGFibGV2dWNoXSspL2ksICAgICAgICAgICAgICAgICAvLyBOaW50ZW5kby9QbGF5c3RhdGlvblxuICAgICAgICAgICAgLyh4Ym94KTsgK3hib3ggKFteXFwpO10rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWljcm9zb2Z0IFhib3ggKDM2MCwgT25lLCBYLCBTLCBTZXJpZXMgWCwgU2VyaWVzIFMpXG5cbiAgICAgICAgICAgIC8vIE90aGVyXG4gICAgICAgICAgICAvXFxiKGpvbGl8cGFsbSlcXGIgPyg/Om9zKT9cXC8/KFtcXHdcXC5dKikvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSm9saS9QYWxtXG4gICAgICAgICAgICAvKG1pbnQpW1xcL1xcKFxcKSBdPyhcXHcqKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNaW50XG4gICAgICAgICAgICAvKG1hZ2VpYXx2ZWN0b3JsaW51eClbOyBdL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hZ2VpYS9WZWN0b3JMaW51eFxuICAgICAgICAgICAgLyhba3hsbl0/dWJ1bnR1fGRlYmlhbnxzdXNlfG9wZW5zdXNlfGdlbnRvb3xhcmNoKD89IGxpbnV4KXxzbGFja3dhcmV8ZmVkb3JhfG1hbmRyaXZhfGNlbnRvc3xwY2xpbnV4b3N8cmVkID9oYXR8emVud2Fsa3xsaW5wdXN8cmFzcGJpYW58cGxhbiA5fG1pbml4fHJpc2Mgb3N8Y29udGlraXxkZWVwaW58bWFuamFyb3xlbGVtZW50YXJ5IG9zfHNhYmF5b258bGluc3BpcmUpKD86IGdudVxcL2xpbnV4KT8oPzogZW50ZXJwcmlzZSk/KD86Wy0gXWxpbnV4KT8oPzotZ251KT9bLVxcLyBdPyg/IWNocm9tfHBhY2thZ2UpKFstXFx3XFwuXSopL2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVidW50dS9EZWJpYW4vU1VTRS9HZW50b28vQXJjaC9TbGFja3dhcmUvRmVkb3JhL01hbmRyaXZhL0NlbnRPUy9QQ0xpbnV4T1MvUmVkSGF0L1plbndhbGsvTGlucHVzL1Jhc3BiaWFuL1BsYW45L01pbml4L1JJU0NPUy9Db250aWtpL0RlZXBpbi9NYW5qYXJvL2VsZW1lbnRhcnkvU2FiYXlvbi9MaW5zcGlyZVxuICAgICAgICAgICAgLyhodXJkfGxpbnV4KSA/KFtcXHdcXC5dKikvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEh1cmQvTGludXhcbiAgICAgICAgICAgIC8oZ251KSA/KFtcXHdcXC5dKikvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHTlVcbiAgICAgICAgICAgIC9cXGIoWy1mcmVudG9wY2doc117MCw1fWJzZHxkcmFnb25mbHkpW1xcLyBdPyg/IWFtZHxbaXgzNDZdezEsMn04NikoW1xcd1xcLl0qKS9pLCAvLyBGcmVlQlNEL05ldEJTRC9PcGVuQlNEL1BDLUJTRC9HaG9zdEJTRC9EcmFnb25GbHlcbiAgICAgICAgICAgIC8oaGFpa3UpIChcXHcrKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhaWt1XG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC8oc3Vub3MpID8oW1xcd1xcLlxcZF0qKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU29sYXJpc1xuICAgICAgICAgICAgXSwgW1tOQU1FLCAnU29sYXJpcyddLCBWRVJTSU9OXSwgW1xuICAgICAgICAgICAgLygoPzpvcGVuKT9zb2xhcmlzKVstXFwvIF0/KFtcXHdcXC5dKikvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTb2xhcmlzXG4gICAgICAgICAgICAvKGFpeCkgKChcXGQpKD89XFwufFxcKXwgKVtcXHdcXC5dKSovaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQUlYXG4gICAgICAgICAgICAvXFxiKGJlb3N8b3NcXC8yfGFtaWdhb3N8bW9ycGhvc3xvcGVudm1zfGZ1Y2hzaWF8aHAtdXgpL2ksICAgICAgICAgICAgLy8gQmVPUy9PUzIvQW1pZ2FPUy9Nb3JwaE9TL09wZW5WTVMvRnVjaHNpYS9IUC1VWFxuICAgICAgICAgICAgLyh1bml4KSA/KFtcXHdcXC5dKikvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVOSVhcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXVxuICAgICAgICBdXG4gICAgfTtcblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gQ29uc3RydWN0b3JcbiAgICAvLy8vLy8vLy8vLy8vLy8vXG5cbiAgICB2YXIgVUFQYXJzZXIgPSBmdW5jdGlvbiAodWEsIGV4dGVuc2lvbnMpIHtcblxuICAgICAgICBpZiAodHlwZW9mIHVhID09PSBPQkpfVFlQRSkge1xuICAgICAgICAgICAgZXh0ZW5zaW9ucyA9IHVhO1xuICAgICAgICAgICAgdWEgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVUFQYXJzZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVBUGFyc2VyKHVhLCBleHRlbnNpb25zKS5nZXRSZXN1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfdWEgPSB1YSB8fCAoKHR5cGVvZiB3aW5kb3cgIT09IFVOREVGX1RZUEUgJiYgd2luZG93Lm5hdmlnYXRvciAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkgPyB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCA6IEVNUFRZKTtcbiAgICAgICAgdmFyIF9yZ3htYXAgPSBleHRlbnNpb25zID8gZXh0ZW5kKHJlZ2V4ZXMsIGV4dGVuc2lvbnMpIDogcmVnZXhlcztcblxuICAgICAgICB0aGlzLmdldEJyb3dzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2Jyb3dzZXIgPSB7fTtcbiAgICAgICAgICAgIF9icm93c2VyW05BTUVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgX2Jyb3dzZXJbVkVSU0lPTl0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZ3hNYXBwZXIuY2FsbChfYnJvd3NlciwgX3VhLCBfcmd4bWFwLmJyb3dzZXIpO1xuICAgICAgICAgICAgX2Jyb3dzZXIubWFqb3IgPSBtYWpvcml6ZShfYnJvd3Nlci52ZXJzaW9uKTtcbiAgICAgICAgICAgIHJldHVybiBfYnJvd3NlcjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRDUFUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2NwdSA9IHt9O1xuICAgICAgICAgICAgX2NwdVtBUkNISVRFQ1RVUkVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmd4TWFwcGVyLmNhbGwoX2NwdSwgX3VhLCBfcmd4bWFwLmNwdSk7XG4gICAgICAgICAgICByZXR1cm4gX2NwdTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXREZXZpY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2RldmljZSA9IHt9O1xuICAgICAgICAgICAgX2RldmljZVtWRU5ET1JdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgX2RldmljZVtNT0RFTF0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBfZGV2aWNlW1RZUEVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmd4TWFwcGVyLmNhbGwoX2RldmljZSwgX3VhLCBfcmd4bWFwLmRldmljZSk7XG4gICAgICAgICAgICByZXR1cm4gX2RldmljZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRFbmdpbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2VuZ2luZSA9IHt9O1xuICAgICAgICAgICAgX2VuZ2luZVtOQU1FXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIF9lbmdpbmVbVkVSU0lPTl0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZ3hNYXBwZXIuY2FsbChfZW5naW5lLCBfdWEsIF9yZ3htYXAuZW5naW5lKTtcbiAgICAgICAgICAgIHJldHVybiBfZW5naW5lO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldE9TID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9vcyA9IHt9O1xuICAgICAgICAgICAgX29zW05BTUVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgX29zW1ZFUlNJT05dID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmd4TWFwcGVyLmNhbGwoX29zLCBfdWEsIF9yZ3htYXAub3MpO1xuICAgICAgICAgICAgcmV0dXJuIF9vcztcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRSZXN1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVhICAgICAgOiB0aGlzLmdldFVBKCksXG4gICAgICAgICAgICAgICAgYnJvd3NlciA6IHRoaXMuZ2V0QnJvd3NlcigpLFxuICAgICAgICAgICAgICAgIGVuZ2luZSAgOiB0aGlzLmdldEVuZ2luZSgpLFxuICAgICAgICAgICAgICAgIG9zICAgICAgOiB0aGlzLmdldE9TKCksXG4gICAgICAgICAgICAgICAgZGV2aWNlICA6IHRoaXMuZ2V0RGV2aWNlKCksXG4gICAgICAgICAgICAgICAgY3B1ICAgICA6IHRoaXMuZ2V0Q1BVKClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0VUEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3VhO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFVBID0gZnVuY3Rpb24gKHVhKSB7XG4gICAgICAgICAgICBfdWEgPSAodHlwZW9mIHVhID09PSBTVFJfVFlQRSAmJiB1YS5sZW5ndGggPiBVQV9NQVhfTEVOR1RIKSA/IHRyaW0odWEsIFVBX01BWF9MRU5HVEgpIDogdWE7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXRVQShfdWEpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgVUFQYXJzZXIuVkVSU0lPTiA9IExJQlZFUlNJT047XG4gICAgVUFQYXJzZXIuQlJPV1NFUiA9ICBlbnVtZXJpemUoW05BTUUsIFZFUlNJT04sIE1BSk9SXSk7XG4gICAgVUFQYXJzZXIuQ1BVID0gZW51bWVyaXplKFtBUkNISVRFQ1RVUkVdKTtcbiAgICBVQVBhcnNlci5ERVZJQ0UgPSBlbnVtZXJpemUoW01PREVMLCBWRU5ET1IsIFRZUEUsIENPTlNPTEUsIE1PQklMRSwgU01BUlRUViwgVEFCTEVULCBXRUFSQUJMRSwgRU1CRURERURdKTtcbiAgICBVQVBhcnNlci5FTkdJTkUgPSBVQVBhcnNlci5PUyA9IGVudW1lcml6ZShbTkFNRSwgVkVSU0lPTl0pO1xuXG4gICAgLy8vLy8vLy8vLy9cbiAgICAvLyBFeHBvcnRcbiAgICAvLy8vLy8vLy8vXG5cbiAgICAvLyBjaGVjayBqcyBlbnZpcm9ubWVudFxuICAgIGlmICh0eXBlb2YoZXhwb3J0cykgIT09IFVOREVGX1RZUEUpIHtcbiAgICAgICAgLy8gbm9kZWpzIGVudlxuICAgICAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gVU5ERUZfVFlQRSAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICAgICAgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gVUFQYXJzZXI7XG4gICAgICAgIH1cbiAgICAgICAgZXhwb3J0cy5VQVBhcnNlciA9IFVBUGFyc2VyO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHJlcXVpcmVqcyBlbnYgKG9wdGlvbmFsKVxuICAgICAgICBpZiAodHlwZW9mKGRlZmluZSkgPT09IEZVTkNfVFlQRSAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgICAgICBkZWZpbmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBVQVBhcnNlcjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFVOREVGX1RZUEUpIHtcbiAgICAgICAgICAgIC8vIGJyb3dzZXIgZW52XG4gICAgICAgICAgICB3aW5kb3cuVUFQYXJzZXIgPSBVQVBhcnNlcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGpRdWVyeS9aZXB0byBzcGVjaWZpYyAob3B0aW9uYWwpXG4gICAgLy8gTm90ZTpcbiAgICAvLyAgIEluIEFNRCBlbnYgdGhlIGdsb2JhbCBzY29wZSBzaG91bGQgYmUga2VwdCBjbGVhbiwgYnV0IGpRdWVyeSBpcyBhbiBleGNlcHRpb24uXG4gICAgLy8gICBqUXVlcnkgYWx3YXlzIGV4cG9ydHMgdG8gZ2xvYmFsIHNjb3BlLCB1bmxlc3MgalF1ZXJ5Lm5vQ29uZmxpY3QodHJ1ZSkgaXMgdXNlZCxcbiAgICAvLyAgIGFuZCB3ZSBzaG91bGQgY2F0Y2ggdGhhdC5cbiAgICB2YXIgJCA9IHR5cGVvZiB3aW5kb3cgIT09IFVOREVGX1RZUEUgJiYgKHdpbmRvdy5qUXVlcnkgfHwgd2luZG93LlplcHRvKTtcbiAgICBpZiAoJCAmJiAhJC51YSkge1xuICAgICAgICB2YXIgcGFyc2VyID0gbmV3IFVBUGFyc2VyKCk7XG4gICAgICAgICQudWEgPSBwYXJzZXIuZ2V0UmVzdWx0KCk7XG4gICAgICAgICQudWEuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5nZXRVQSgpO1xuICAgICAgICB9O1xuICAgICAgICAkLnVhLnNldCA9IGZ1bmN0aW9uICh1YSkge1xuICAgICAgICAgICAgcGFyc2VyLnNldFVBKHVhKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBwYXJzZXIuZ2V0UmVzdWx0KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICQudWFbcHJvcF0gPSByZXN1bHRbcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG59KSh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyA/IHdpbmRvdyA6IHRoaXMpO1xuIiwiZXhwb3J0IHsgZGVmYXVsdCBhcyB2MSB9IGZyb20gJy4vdjEuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB2MyB9IGZyb20gJy4vdjMuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB2NCB9IGZyb20gJy4vdjQuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB2NSB9IGZyb20gJy4vdjUuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBOSUwgfSBmcm9tICcuL25pbC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHZlcnNpb24gfSBmcm9tICcuL3ZlcnNpb24uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB2YWxpZGF0ZSB9IGZyb20gJy4vdmFsaWRhdGUuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBzdHJpbmdpZnkgfSBmcm9tICcuL3N0cmluZ2lmeS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHBhcnNlIH0gZnJvbSAnLi9wYXJzZS5qcyc7IiwiLypcbiAqIEJyb3dzZXItY29tcGF0aWJsZSBKYXZhU2NyaXB0IE1ENVxuICpcbiAqIE1vZGlmaWNhdGlvbiBvZiBKYXZhU2NyaXB0IE1ENVxuICogaHR0cHM6Ly9naXRodWIuY29tL2JsdWVpbXAvSmF2YVNjcmlwdC1NRDVcbiAqXG4gKiBDb3B5cmlnaHQgMjAxMSwgU2ViYXN0aWFuIFRzY2hhblxuICogaHR0cHM6Ly9ibHVlaW1wLm5ldFxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZTpcbiAqIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKlxuICogQmFzZWQgb25cbiAqIEEgSmF2YVNjcmlwdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgUlNBIERhdGEgU2VjdXJpdHksIEluYy4gTUQ1IE1lc3NhZ2VcbiAqIERpZ2VzdCBBbGdvcml0aG0sIGFzIGRlZmluZWQgaW4gUkZDIDEzMjEuXG4gKiBWZXJzaW9uIDIuMiBDb3B5cmlnaHQgKEMpIFBhdWwgSm9obnN0b24gMTk5OSAtIDIwMDlcbiAqIE90aGVyIGNvbnRyaWJ1dG9yczogR3JlZyBIb2x0LCBBbmRyZXcgS2VwZXJ0LCBZZG5hciwgTG9zdGluZXRcbiAqIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBCU0QgTGljZW5zZVxuICogU2VlIGh0dHA6Ly9wYWpob21lLm9yZy51ay9jcnlwdC9tZDUgZm9yIG1vcmUgaW5mby5cbiAqL1xuZnVuY3Rpb24gbWQ1KGJ5dGVzKSB7XG4gIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIG1zZyA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChieXRlcykpOyAvLyBVVEY4IGVzY2FwZVxuXG4gICAgYnl0ZXMgPSBuZXcgVWludDhBcnJheShtc2cubGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgKytpKSB7XG4gICAgICBieXRlc1tpXSA9IG1zZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtZDVUb0hleEVuY29kZWRBcnJheSh3b3Jkc1RvTWQ1KGJ5dGVzVG9Xb3JkcyhieXRlcyksIGJ5dGVzLmxlbmd0aCAqIDgpKTtcbn1cbi8qXG4gKiBDb252ZXJ0IGFuIGFycmF5IG9mIGxpdHRsZS1lbmRpYW4gd29yZHMgdG8gYW4gYXJyYXkgb2YgYnl0ZXNcbiAqL1xuXG5cbmZ1bmN0aW9uIG1kNVRvSGV4RW5jb2RlZEFycmF5KGlucHV0KSB7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgdmFyIGxlbmd0aDMyID0gaW5wdXQubGVuZ3RoICogMzI7XG4gIHZhciBoZXhUYWIgPSAnMDEyMzQ1Njc4OWFiY2RlZic7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGgzMjsgaSArPSA4KSB7XG4gICAgdmFyIHggPSBpbnB1dFtpID4+IDVdID4+PiBpICUgMzIgJiAweGZmO1xuICAgIHZhciBoZXggPSBwYXJzZUludChoZXhUYWIuY2hhckF0KHggPj4+IDQgJiAweDBmKSArIGhleFRhYi5jaGFyQXQoeCAmIDB4MGYpLCAxNik7XG4gICAgb3V0cHV0LnB1c2goaGV4KTtcbiAgfVxuXG4gIHJldHVybiBvdXRwdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZSBvdXRwdXQgbGVuZ3RoIHdpdGggcGFkZGluZyBhbmQgYml0IGxlbmd0aFxuICovXG5cblxuZnVuY3Rpb24gZ2V0T3V0cHV0TGVuZ3RoKGlucHV0TGVuZ3RoOCkge1xuICByZXR1cm4gKGlucHV0TGVuZ3RoOCArIDY0ID4+PiA5IDw8IDQpICsgMTQgKyAxO1xufVxuLypcbiAqIENhbGN1bGF0ZSB0aGUgTUQ1IG9mIGFuIGFycmF5IG9mIGxpdHRsZS1lbmRpYW4gd29yZHMsIGFuZCBhIGJpdCBsZW5ndGguXG4gKi9cblxuXG5mdW5jdGlvbiB3b3Jkc1RvTWQ1KHgsIGxlbikge1xuICAvKiBhcHBlbmQgcGFkZGluZyAqL1xuICB4W2xlbiA+PiA1XSB8PSAweDgwIDw8IGxlbiAlIDMyO1xuICB4W2dldE91dHB1dExlbmd0aChsZW4pIC0gMV0gPSBsZW47XG4gIHZhciBhID0gMTczMjU4NDE5MztcbiAgdmFyIGIgPSAtMjcxNzMzODc5O1xuICB2YXIgYyA9IC0xNzMyNTg0MTk0O1xuICB2YXIgZCA9IDI3MTczMzg3ODtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpICs9IDE2KSB7XG4gICAgdmFyIG9sZGEgPSBhO1xuICAgIHZhciBvbGRiID0gYjtcbiAgICB2YXIgb2xkYyA9IGM7XG4gICAgdmFyIG9sZGQgPSBkO1xuICAgIGEgPSBtZDVmZihhLCBiLCBjLCBkLCB4W2ldLCA3LCAtNjgwODc2OTM2KTtcbiAgICBkID0gbWQ1ZmYoZCwgYSwgYiwgYywgeFtpICsgMV0sIDEyLCAtMzg5NTY0NTg2KTtcbiAgICBjID0gbWQ1ZmYoYywgZCwgYSwgYiwgeFtpICsgMl0sIDE3LCA2MDYxMDU4MTkpO1xuICAgIGIgPSBtZDVmZihiLCBjLCBkLCBhLCB4W2kgKyAzXSwgMjIsIC0xMDQ0NTI1MzMwKTtcbiAgICBhID0gbWQ1ZmYoYSwgYiwgYywgZCwgeFtpICsgNF0sIDcsIC0xNzY0MTg4OTcpO1xuICAgIGQgPSBtZDVmZihkLCBhLCBiLCBjLCB4W2kgKyA1XSwgMTIsIDEyMDAwODA0MjYpO1xuICAgIGMgPSBtZDVmZihjLCBkLCBhLCBiLCB4W2kgKyA2XSwgMTcsIC0xNDczMjMxMzQxKTtcbiAgICBiID0gbWQ1ZmYoYiwgYywgZCwgYSwgeFtpICsgN10sIDIyLCAtNDU3MDU5ODMpO1xuICAgIGEgPSBtZDVmZihhLCBiLCBjLCBkLCB4W2kgKyA4XSwgNywgMTc3MDAzNTQxNik7XG4gICAgZCA9IG1kNWZmKGQsIGEsIGIsIGMsIHhbaSArIDldLCAxMiwgLTE5NTg0MTQ0MTcpO1xuICAgIGMgPSBtZDVmZihjLCBkLCBhLCBiLCB4W2kgKyAxMF0sIDE3LCAtNDIwNjMpO1xuICAgIGIgPSBtZDVmZihiLCBjLCBkLCBhLCB4W2kgKyAxMV0sIDIyLCAtMTk5MDQwNDE2Mik7XG4gICAgYSA9IG1kNWZmKGEsIGIsIGMsIGQsIHhbaSArIDEyXSwgNywgMTgwNDYwMzY4Mik7XG4gICAgZCA9IG1kNWZmKGQsIGEsIGIsIGMsIHhbaSArIDEzXSwgMTIsIC00MDM0MTEwMSk7XG4gICAgYyA9IG1kNWZmKGMsIGQsIGEsIGIsIHhbaSArIDE0XSwgMTcsIC0xNTAyMDAyMjkwKTtcbiAgICBiID0gbWQ1ZmYoYiwgYywgZCwgYSwgeFtpICsgMTVdLCAyMiwgMTIzNjUzNTMyOSk7XG4gICAgYSA9IG1kNWdnKGEsIGIsIGMsIGQsIHhbaSArIDFdLCA1LCAtMTY1Nzk2NTEwKTtcbiAgICBkID0gbWQ1Z2coZCwgYSwgYiwgYywgeFtpICsgNl0sIDksIC0xMDY5NTAxNjMyKTtcbiAgICBjID0gbWQ1Z2coYywgZCwgYSwgYiwgeFtpICsgMTFdLCAxNCwgNjQzNzE3NzEzKTtcbiAgICBiID0gbWQ1Z2coYiwgYywgZCwgYSwgeFtpXSwgMjAsIC0zNzM4OTczMDIpO1xuICAgIGEgPSBtZDVnZyhhLCBiLCBjLCBkLCB4W2kgKyA1XSwgNSwgLTcwMTU1ODY5MSk7XG4gICAgZCA9IG1kNWdnKGQsIGEsIGIsIGMsIHhbaSArIDEwXSwgOSwgMzgwMTYwODMpO1xuICAgIGMgPSBtZDVnZyhjLCBkLCBhLCBiLCB4W2kgKyAxNV0sIDE0LCAtNjYwNDc4MzM1KTtcbiAgICBiID0gbWQ1Z2coYiwgYywgZCwgYSwgeFtpICsgNF0sIDIwLCAtNDA1NTM3ODQ4KTtcbiAgICBhID0gbWQ1Z2coYSwgYiwgYywgZCwgeFtpICsgOV0sIDUsIDU2ODQ0NjQzOCk7XG4gICAgZCA9IG1kNWdnKGQsIGEsIGIsIGMsIHhbaSArIDE0XSwgOSwgLTEwMTk4MDM2OTApO1xuICAgIGMgPSBtZDVnZyhjLCBkLCBhLCBiLCB4W2kgKyAzXSwgMTQsIC0xODczNjM5NjEpO1xuICAgIGIgPSBtZDVnZyhiLCBjLCBkLCBhLCB4W2kgKyA4XSwgMjAsIDExNjM1MzE1MDEpO1xuICAgIGEgPSBtZDVnZyhhLCBiLCBjLCBkLCB4W2kgKyAxM10sIDUsIC0xNDQ0NjgxNDY3KTtcbiAgICBkID0gbWQ1Z2coZCwgYSwgYiwgYywgeFtpICsgMl0sIDksIC01MTQwMzc4NCk7XG4gICAgYyA9IG1kNWdnKGMsIGQsIGEsIGIsIHhbaSArIDddLCAxNCwgMTczNTMyODQ3Myk7XG4gICAgYiA9IG1kNWdnKGIsIGMsIGQsIGEsIHhbaSArIDEyXSwgMjAsIC0xOTI2NjA3NzM0KTtcbiAgICBhID0gbWQ1aGgoYSwgYiwgYywgZCwgeFtpICsgNV0sIDQsIC0zNzg1NTgpO1xuICAgIGQgPSBtZDVoaChkLCBhLCBiLCBjLCB4W2kgKyA4XSwgMTEsIC0yMDIyNTc0NDYzKTtcbiAgICBjID0gbWQ1aGgoYywgZCwgYSwgYiwgeFtpICsgMTFdLCAxNiwgMTgzOTAzMDU2Mik7XG4gICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDE0XSwgMjMsIC0zNTMwOTU1Nik7XG4gICAgYSA9IG1kNWhoKGEsIGIsIGMsIGQsIHhbaSArIDFdLCA0LCAtMTUzMDk5MjA2MCk7XG4gICAgZCA9IG1kNWhoKGQsIGEsIGIsIGMsIHhbaSArIDRdLCAxMSwgMTI3Mjg5MzM1Myk7XG4gICAgYyA9IG1kNWhoKGMsIGQsIGEsIGIsIHhbaSArIDddLCAxNiwgLTE1NTQ5NzYzMik7XG4gICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDEwXSwgMjMsIC0xMDk0NzMwNjQwKTtcbiAgICBhID0gbWQ1aGgoYSwgYiwgYywgZCwgeFtpICsgMTNdLCA0LCA2ODEyNzkxNzQpO1xuICAgIGQgPSBtZDVoaChkLCBhLCBiLCBjLCB4W2ldLCAxMSwgLTM1ODUzNzIyMik7XG4gICAgYyA9IG1kNWhoKGMsIGQsIGEsIGIsIHhbaSArIDNdLCAxNiwgLTcyMjUyMTk3OSk7XG4gICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDZdLCAyMywgNzYwMjkxODkpO1xuICAgIGEgPSBtZDVoaChhLCBiLCBjLCBkLCB4W2kgKyA5XSwgNCwgLTY0MDM2NDQ4Nyk7XG4gICAgZCA9IG1kNWhoKGQsIGEsIGIsIGMsIHhbaSArIDEyXSwgMTEsIC00MjE4MTU4MzUpO1xuICAgIGMgPSBtZDVoaChjLCBkLCBhLCBiLCB4W2kgKyAxNV0sIDE2LCA1MzA3NDI1MjApO1xuICAgIGIgPSBtZDVoaChiLCBjLCBkLCBhLCB4W2kgKyAyXSwgMjMsIC05OTUzMzg2NTEpO1xuICAgIGEgPSBtZDVpaShhLCBiLCBjLCBkLCB4W2ldLCA2LCAtMTk4NjMwODQ0KTtcbiAgICBkID0gbWQ1aWkoZCwgYSwgYiwgYywgeFtpICsgN10sIDEwLCAxMTI2ODkxNDE1KTtcbiAgICBjID0gbWQ1aWkoYywgZCwgYSwgYiwgeFtpICsgMTRdLCAxNSwgLTE0MTYzNTQ5MDUpO1xuICAgIGIgPSBtZDVpaShiLCBjLCBkLCBhLCB4W2kgKyA1XSwgMjEsIC01NzQzNDA1NSk7XG4gICAgYSA9IG1kNWlpKGEsIGIsIGMsIGQsIHhbaSArIDEyXSwgNiwgMTcwMDQ4NTU3MSk7XG4gICAgZCA9IG1kNWlpKGQsIGEsIGIsIGMsIHhbaSArIDNdLCAxMCwgLTE4OTQ5ODY2MDYpO1xuICAgIGMgPSBtZDVpaShjLCBkLCBhLCBiLCB4W2kgKyAxMF0sIDE1LCAtMTA1MTUyMyk7XG4gICAgYiA9IG1kNWlpKGIsIGMsIGQsIGEsIHhbaSArIDFdLCAyMSwgLTIwNTQ5MjI3OTkpO1xuICAgIGEgPSBtZDVpaShhLCBiLCBjLCBkLCB4W2kgKyA4XSwgNiwgMTg3MzMxMzM1OSk7XG4gICAgZCA9IG1kNWlpKGQsIGEsIGIsIGMsIHhbaSArIDE1XSwgMTAsIC0zMDYxMTc0NCk7XG4gICAgYyA9IG1kNWlpKGMsIGQsIGEsIGIsIHhbaSArIDZdLCAxNSwgLTE1NjAxOTgzODApO1xuICAgIGIgPSBtZDVpaShiLCBjLCBkLCBhLCB4W2kgKyAxM10sIDIxLCAxMzA5MTUxNjQ5KTtcbiAgICBhID0gbWQ1aWkoYSwgYiwgYywgZCwgeFtpICsgNF0sIDYsIC0xNDU1MjMwNzApO1xuICAgIGQgPSBtZDVpaShkLCBhLCBiLCBjLCB4W2kgKyAxMV0sIDEwLCAtMTEyMDIxMDM3OSk7XG4gICAgYyA9IG1kNWlpKGMsIGQsIGEsIGIsIHhbaSArIDJdLCAxNSwgNzE4Nzg3MjU5KTtcbiAgICBiID0gbWQ1aWkoYiwgYywgZCwgYSwgeFtpICsgOV0sIDIxLCAtMzQzNDg1NTUxKTtcbiAgICBhID0gc2FmZUFkZChhLCBvbGRhKTtcbiAgICBiID0gc2FmZUFkZChiLCBvbGRiKTtcbiAgICBjID0gc2FmZUFkZChjLCBvbGRjKTtcbiAgICBkID0gc2FmZUFkZChkLCBvbGRkKTtcbiAgfVxuXG4gIHJldHVybiBbYSwgYiwgYywgZF07XG59XG4vKlxuICogQ29udmVydCBhbiBhcnJheSBieXRlcyB0byBhbiBhcnJheSBvZiBsaXR0bGUtZW5kaWFuIHdvcmRzXG4gKiBDaGFyYWN0ZXJzID4yNTUgaGF2ZSB0aGVpciBoaWdoLWJ5dGUgc2lsZW50bHkgaWdub3JlZC5cbiAqL1xuXG5cbmZ1bmN0aW9uIGJ5dGVzVG9Xb3JkcyhpbnB1dCkge1xuICBpZiAoaW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgdmFyIGxlbmd0aDggPSBpbnB1dC5sZW5ndGggKiA4O1xuICB2YXIgb3V0cHV0ID0gbmV3IFVpbnQzMkFycmF5KGdldE91dHB1dExlbmd0aChsZW5ndGg4KSk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg4OyBpICs9IDgpIHtcbiAgICBvdXRwdXRbaSA+PiA1XSB8PSAoaW5wdXRbaSAvIDhdICYgMHhmZikgPDwgaSAlIDMyO1xuICB9XG5cbiAgcmV0dXJuIG91dHB1dDtcbn1cbi8qXG4gKiBBZGQgaW50ZWdlcnMsIHdyYXBwaW5nIGF0IDJeMzIuIFRoaXMgdXNlcyAxNi1iaXQgb3BlcmF0aW9ucyBpbnRlcm5hbGx5XG4gKiB0byB3b3JrIGFyb3VuZCBidWdzIGluIHNvbWUgSlMgaW50ZXJwcmV0ZXJzLlxuICovXG5cblxuZnVuY3Rpb24gc2FmZUFkZCh4LCB5KSB7XG4gIHZhciBsc3cgPSAoeCAmIDB4ZmZmZikgKyAoeSAmIDB4ZmZmZik7XG4gIHZhciBtc3cgPSAoeCA+PiAxNikgKyAoeSA+PiAxNikgKyAobHN3ID4+IDE2KTtcbiAgcmV0dXJuIG1zdyA8PCAxNiB8IGxzdyAmIDB4ZmZmZjtcbn1cbi8qXG4gKiBCaXR3aXNlIHJvdGF0ZSBhIDMyLWJpdCBudW1iZXIgdG8gdGhlIGxlZnQuXG4gKi9cblxuXG5mdW5jdGlvbiBiaXRSb3RhdGVMZWZ0KG51bSwgY250KSB7XG4gIHJldHVybiBudW0gPDwgY250IHwgbnVtID4+PiAzMiAtIGNudDtcbn1cbi8qXG4gKiBUaGVzZSBmdW5jdGlvbnMgaW1wbGVtZW50IHRoZSBmb3VyIGJhc2ljIG9wZXJhdGlvbnMgdGhlIGFsZ29yaXRobSB1c2VzLlxuICovXG5cblxuZnVuY3Rpb24gbWQ1Y21uKHEsIGEsIGIsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIHNhZmVBZGQoYml0Um90YXRlTGVmdChzYWZlQWRkKHNhZmVBZGQoYSwgcSksIHNhZmVBZGQoeCwgdCkpLCBzKSwgYik7XG59XG5cbmZ1bmN0aW9uIG1kNWZmKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIG1kNWNtbihiICYgYyB8IH5iICYgZCwgYSwgYiwgeCwgcywgdCk7XG59XG5cbmZ1bmN0aW9uIG1kNWdnKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIG1kNWNtbihiICYgZCB8IGMgJiB+ZCwgYSwgYiwgeCwgcywgdCk7XG59XG5cbmZ1bmN0aW9uIG1kNWhoKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIG1kNWNtbihiIF4gYyBeIGQsIGEsIGIsIHgsIHMsIHQpO1xufVxuXG5mdW5jdGlvbiBtZDVpaShhLCBiLCBjLCBkLCB4LCBzLCB0KSB7XG4gIHJldHVybiBtZDVjbW4oYyBeIChiIHwgfmQpLCBhLCBiLCB4LCBzLCB0KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbWQ1OyIsImV4cG9ydCBkZWZhdWx0ICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAnOyIsImltcG9ydCB2YWxpZGF0ZSBmcm9tICcuL3ZhbGlkYXRlLmpzJztcblxuZnVuY3Rpb24gcGFyc2UodXVpZCkge1xuICBpZiAoIXZhbGlkYXRlKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdJbnZhbGlkIFVVSUQnKTtcbiAgfVxuXG4gIHZhciB2O1xuICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMTYpOyAvLyBQYXJzZSAjIyMjIyMjIy0uLi4uLS4uLi4tLi4uLi0uLi4uLi4uLi4uLi5cblxuICBhcnJbMF0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoMCwgOCksIDE2KSkgPj4+IDI0O1xuICBhcnJbMV0gPSB2ID4+PiAxNiAmIDB4ZmY7XG4gIGFyclsyXSA9IHYgPj4+IDggJiAweGZmO1xuICBhcnJbM10gPSB2ICYgMHhmZjsgLy8gUGFyc2UgLi4uLi4uLi4tIyMjIy0uLi4uLS4uLi4tLi4uLi4uLi4uLi4uXG5cbiAgYXJyWzRdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDksIDEzKSwgMTYpKSA+Pj4gODtcbiAgYXJyWzVdID0gdiAmIDB4ZmY7IC8vIFBhcnNlIC4uLi4uLi4uLS4uLi4tIyMjIy0uLi4uLS4uLi4uLi4uLi4uLlxuXG4gIGFycls2XSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSgxNCwgMTgpLCAxNikpID4+PiA4O1xuICBhcnJbN10gPSB2ICYgMHhmZjsgLy8gUGFyc2UgLi4uLi4uLi4tLi4uLi0uLi4uLSMjIyMtLi4uLi4uLi4uLi4uXG5cbiAgYXJyWzhdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDE5LCAyMyksIDE2KSkgPj4+IDg7XG4gIGFycls5XSA9IHYgJiAweGZmOyAvLyBQYXJzZSAuLi4uLi4uLi0uLi4uLS4uLi4tLi4uLi0jIyMjIyMjIyMjIyNcbiAgLy8gKFVzZSBcIi9cIiB0byBhdm9pZCAzMi1iaXQgdHJ1bmNhdGlvbiB3aGVuIGJpdC1zaGlmdGluZyBoaWdoLW9yZGVyIGJ5dGVzKVxuXG4gIGFyclsxMF0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoMjQsIDM2KSwgMTYpKSAvIDB4MTAwMDAwMDAwMDAgJiAweGZmO1xuICBhcnJbMTFdID0gdiAvIDB4MTAwMDAwMDAwICYgMHhmZjtcbiAgYXJyWzEyXSA9IHYgPj4+IDI0ICYgMHhmZjtcbiAgYXJyWzEzXSA9IHYgPj4+IDE2ICYgMHhmZjtcbiAgYXJyWzE0XSA9IHYgPj4+IDggJiAweGZmO1xuICBhcnJbMTVdID0gdiAmIDB4ZmY7XG4gIHJldHVybiBhcnI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHBhcnNlOyIsImV4cG9ydCBkZWZhdWx0IC9eKD86WzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtNV1bMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTsiLCIvLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiBJbiB0aGUgYnJvd3NlciB3ZSB0aGVyZWZvcmVcbi8vIHJlcXVpcmUgdGhlIGNyeXB0byBBUEkgYW5kIGRvIG5vdCBzdXBwb3J0IGJ1aWx0LWluIGZhbGxiYWNrIHRvIGxvd2VyIHF1YWxpdHkgcmFuZG9tIG51bWJlclxuLy8gZ2VuZXJhdG9ycyAobGlrZSBNYXRoLnJhbmRvbSgpKS5cbnZhciBnZXRSYW5kb21WYWx1ZXM7XG52YXIgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIC8vIGxhenkgbG9hZCBzbyB0aGF0IGVudmlyb25tZW50cyB0aGF0IG5lZWQgdG8gcG9seWZpbGwgaGF2ZSBhIGNoYW5jZSB0byBkbyBzb1xuICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgIC8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0byBpbXBsZW1lbnRhdGlvbi4gQWxzbyxcbiAgICAvLyBmaW5kIHRoZSBjb21wbGV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBjcnlwdG8gKG1zQ3J5cHRvKSBvbiBJRTExLlxuICAgIGdldFJhbmRvbVZhbHVlcyA9IHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0bykgfHwgdHlwZW9mIG1zQ3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09PSAnZnVuY3Rpb24nICYmIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKG1zQ3J5cHRvKTtcblxuICAgIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyeXB0by5nZXRSYW5kb21WYWx1ZXMoKSBub3Qgc3VwcG9ydGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkI2dldHJhbmRvbXZhbHVlcy1ub3Qtc3VwcG9ydGVkJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG59IiwiLy8gQWRhcHRlZCBmcm9tIENocmlzIFZlbmVzcycgU0hBMSBjb2RlIGF0XG4vLyBodHRwOi8vd3d3Lm1vdmFibGUtdHlwZS5jby51ay9zY3JpcHRzL3NoYTEuaHRtbFxuZnVuY3Rpb24gZihzLCB4LCB5LCB6KSB7XG4gIHN3aXRjaCAocykge1xuICAgIGNhc2UgMDpcbiAgICAgIHJldHVybiB4ICYgeSBeIH54ICYgejtcblxuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiB4IF4geSBeIHo7XG5cbiAgICBjYXNlIDI6XG4gICAgICByZXR1cm4geCAmIHkgXiB4ICYgeiBeIHkgJiB6O1xuXG4gICAgY2FzZSAzOlxuICAgICAgcmV0dXJuIHggXiB5IF4gejtcbiAgfVxufVxuXG5mdW5jdGlvbiBST1RMKHgsIG4pIHtcbiAgcmV0dXJuIHggPDwgbiB8IHggPj4+IDMyIC0gbjtcbn1cblxuZnVuY3Rpb24gc2hhMShieXRlcykge1xuICB2YXIgSyA9IFsweDVhODI3OTk5LCAweDZlZDllYmExLCAweDhmMWJiY2RjLCAweGNhNjJjMWQ2XTtcbiAgdmFyIEggPSBbMHg2NzQ1MjMwMSwgMHhlZmNkYWI4OSwgMHg5OGJhZGNmZSwgMHgxMDMyNTQ3NiwgMHhjM2QyZTFmMF07XG5cbiAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgbXNnID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGJ5dGVzKSk7IC8vIFVURjggZXNjYXBlXG5cbiAgICBieXRlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyArK2kpIHtcbiAgICAgIGJ5dGVzLnB1c2gobXNnLmNoYXJDb2RlQXQoaSkpO1xuICAgIH1cbiAgfSBlbHNlIGlmICghQXJyYXkuaXNBcnJheShieXRlcykpIHtcbiAgICAvLyBDb252ZXJ0IEFycmF5LWxpa2UgdG8gQXJyYXlcbiAgICBieXRlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGJ5dGVzKTtcbiAgfVxuXG4gIGJ5dGVzLnB1c2goMHg4MCk7XG4gIHZhciBsID0gYnl0ZXMubGVuZ3RoIC8gNCArIDI7XG4gIHZhciBOID0gTWF0aC5jZWlsKGwgLyAxNik7XG4gIHZhciBNID0gbmV3IEFycmF5KE4pO1xuXG4gIGZvciAodmFyIF9pID0gMDsgX2kgPCBOOyArK19pKSB7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50MzJBcnJheSgxNik7XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IDE2OyArK2opIHtcbiAgICAgIGFycltqXSA9IGJ5dGVzW19pICogNjQgKyBqICogNF0gPDwgMjQgfCBieXRlc1tfaSAqIDY0ICsgaiAqIDQgKyAxXSA8PCAxNiB8IGJ5dGVzW19pICogNjQgKyBqICogNCArIDJdIDw8IDggfCBieXRlc1tfaSAqIDY0ICsgaiAqIDQgKyAzXTtcbiAgICB9XG5cbiAgICBNW19pXSA9IGFycjtcbiAgfVxuXG4gIE1bTiAtIDFdWzE0XSA9IChieXRlcy5sZW5ndGggLSAxKSAqIDggLyBNYXRoLnBvdygyLCAzMik7XG4gIE1bTiAtIDFdWzE0XSA9IE1hdGguZmxvb3IoTVtOIC0gMV1bMTRdKTtcbiAgTVtOIC0gMV1bMTVdID0gKGJ5dGVzLmxlbmd0aCAtIDEpICogOCAmIDB4ZmZmZmZmZmY7XG5cbiAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgTjsgKytfaTIpIHtcbiAgICB2YXIgVyA9IG5ldyBVaW50MzJBcnJheSg4MCk7XG5cbiAgICBmb3IgKHZhciB0ID0gMDsgdCA8IDE2OyArK3QpIHtcbiAgICAgIFdbdF0gPSBNW19pMl1bdF07XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX3QgPSAxNjsgX3QgPCA4MDsgKytfdCkge1xuICAgICAgV1tfdF0gPSBST1RMKFdbX3QgLSAzXSBeIFdbX3QgLSA4XSBeIFdbX3QgLSAxNF0gXiBXW190IC0gMTZdLCAxKTtcbiAgICB9XG5cbiAgICB2YXIgYSA9IEhbMF07XG4gICAgdmFyIGIgPSBIWzFdO1xuICAgIHZhciBjID0gSFsyXTtcbiAgICB2YXIgZCA9IEhbM107XG4gICAgdmFyIGUgPSBIWzRdO1xuXG4gICAgZm9yICh2YXIgX3QyID0gMDsgX3QyIDwgODA7ICsrX3QyKSB7XG4gICAgICB2YXIgcyA9IE1hdGguZmxvb3IoX3QyIC8gMjApO1xuICAgICAgdmFyIFQgPSBST1RMKGEsIDUpICsgZihzLCBiLCBjLCBkKSArIGUgKyBLW3NdICsgV1tfdDJdID4+PiAwO1xuICAgICAgZSA9IGQ7XG4gICAgICBkID0gYztcbiAgICAgIGMgPSBST1RMKGIsIDMwKSA+Pj4gMDtcbiAgICAgIGIgPSBhO1xuICAgICAgYSA9IFQ7XG4gICAgfVxuXG4gICAgSFswXSA9IEhbMF0gKyBhID4+PiAwO1xuICAgIEhbMV0gPSBIWzFdICsgYiA+Pj4gMDtcbiAgICBIWzJdID0gSFsyXSArIGMgPj4+IDA7XG4gICAgSFszXSA9IEhbM10gKyBkID4+PiAwO1xuICAgIEhbNF0gPSBIWzRdICsgZSA+Pj4gMDtcbiAgfVxuXG4gIHJldHVybiBbSFswXSA+PiAyNCAmIDB4ZmYsIEhbMF0gPj4gMTYgJiAweGZmLCBIWzBdID4+IDggJiAweGZmLCBIWzBdICYgMHhmZiwgSFsxXSA+PiAyNCAmIDB4ZmYsIEhbMV0gPj4gMTYgJiAweGZmLCBIWzFdID4+IDggJiAweGZmLCBIWzFdICYgMHhmZiwgSFsyXSA+PiAyNCAmIDB4ZmYsIEhbMl0gPj4gMTYgJiAweGZmLCBIWzJdID4+IDggJiAweGZmLCBIWzJdICYgMHhmZiwgSFszXSA+PiAyNCAmIDB4ZmYsIEhbM10gPj4gMTYgJiAweGZmLCBIWzNdID4+IDggJiAweGZmLCBIWzNdICYgMHhmZiwgSFs0XSA+PiAyNCAmIDB4ZmYsIEhbNF0gPj4gMTYgJiAweGZmLCBIWzRdID4+IDggJiAweGZmLCBIWzRdICYgMHhmZl07XG59XG5cbmV4cG9ydCBkZWZhdWx0IHNoYTE7IiwiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG5cbnZhciBieXRlVG9IZXggPSBbXTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc3Vic3RyKDEpKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFycikge1xuICB2YXIgb2Zmc2V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwO1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgdmFyIHV1aWQgPSAoYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAzXV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA5XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDExXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEzXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE1XV0pLnRvTG93ZXJDYXNlKCk7IC8vIENvbnNpc3RlbmN5IGNoZWNrIGZvciB2YWxpZCBVVUlELiAgSWYgdGhpcyB0aHJvd3MsIGl0J3MgbGlrZWx5IGR1ZSB0byBvbmVcbiAgLy8gb2YgdGhlIGZvbGxvd2luZzpcbiAgLy8gLSBPbmUgb3IgbW9yZSBpbnB1dCBhcnJheSB2YWx1ZXMgZG9uJ3QgbWFwIHRvIGEgaGV4IG9jdGV0IChsZWFkaW5nIHRvXG4gIC8vIFwidW5kZWZpbmVkXCIgaW4gdGhlIHV1aWQpXG4gIC8vIC0gSW52YWxpZCBpbnB1dCB2YWx1ZXMgZm9yIHRoZSBSRkMgYHZlcnNpb25gIG9yIGB2YXJpYW50YCBmaWVsZHNcblxuICBpZiAoIXZhbGlkYXRlKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgfVxuXG4gIHJldHVybiB1dWlkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzdHJpbmdpZnk7IiwiaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJy4vc3RyaW5naWZ5LmpzJzsgLy8gKipgdjEoKWAgLSBHZW5lcmF0ZSB0aW1lLWJhc2VkIFVVSUQqKlxuLy9cbi8vIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9MaW9zSy9VVUlELmpzXG4vLyBhbmQgaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3V1aWQuaHRtbFxuXG52YXIgX25vZGVJZDtcblxudmFyIF9jbG9ja3NlcTsgLy8gUHJldmlvdXMgdXVpZCBjcmVhdGlvbiB0aW1lXG5cblxudmFyIF9sYXN0TVNlY3MgPSAwO1xudmFyIF9sYXN0TlNlY3MgPSAwOyAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkIGZvciBBUEkgZGV0YWlsc1xuXG5mdW5jdGlvbiB2MShvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICB2YXIgaSA9IGJ1ZiAmJiBvZmZzZXQgfHwgMDtcbiAgdmFyIGIgPSBidWYgfHwgbmV3IEFycmF5KDE2KTtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBub2RlID0gb3B0aW9ucy5ub2RlIHx8IF9ub2RlSWQ7XG4gIHZhciBjbG9ja3NlcSA9IG9wdGlvbnMuY2xvY2tzZXEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xvY2tzZXEgOiBfY2xvY2tzZXE7IC8vIG5vZGUgYW5kIGNsb2Nrc2VxIG5lZWQgdG8gYmUgaW5pdGlhbGl6ZWQgdG8gcmFuZG9tIHZhbHVlcyBpZiB0aGV5J3JlIG5vdFxuICAvLyBzcGVjaWZpZWQuICBXZSBkbyB0aGlzIGxhemlseSB0byBtaW5pbWl6ZSBpc3N1ZXMgcmVsYXRlZCB0byBpbnN1ZmZpY2llbnRcbiAgLy8gc3lzdGVtIGVudHJvcHkuICBTZWUgIzE4OVxuXG4gIGlmIChub2RlID09IG51bGwgfHwgY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgIHZhciBzZWVkQnl0ZXMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpO1xuXG4gICAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuNSwgY3JlYXRlIGFuZCA0OC1iaXQgbm9kZSBpZCwgKDQ3IHJhbmRvbSBiaXRzICsgbXVsdGljYXN0IGJpdCA9IDEpXG4gICAgICBub2RlID0gX25vZGVJZCA9IFtzZWVkQnl0ZXNbMF0gfCAweDAxLCBzZWVkQnl0ZXNbMV0sIHNlZWRCeXRlc1syXSwgc2VlZEJ5dGVzWzNdLCBzZWVkQnl0ZXNbNF0sIHNlZWRCeXRlc1s1XV07XG4gICAgfVxuXG4gICAgaWYgKGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjIuMiwgcmFuZG9taXplICgxNCBiaXQpIGNsb2Nrc2VxXG4gICAgICBjbG9ja3NlcSA9IF9jbG9ja3NlcSA9IChzZWVkQnl0ZXNbNl0gPDwgOCB8IHNlZWRCeXRlc1s3XSkgJiAweDNmZmY7XG4gICAgfVxuICB9IC8vIFVVSUQgdGltZXN0YW1wcyBhcmUgMTAwIG5hbm8tc2Vjb25kIHVuaXRzIHNpbmNlIHRoZSBHcmVnb3JpYW4gZXBvY2gsXG4gIC8vICgxNTgyLTEwLTE1IDAwOjAwKS4gIEpTTnVtYmVycyBhcmVuJ3QgcHJlY2lzZSBlbm91Z2ggZm9yIHRoaXMsIHNvXG4gIC8vIHRpbWUgaXMgaGFuZGxlZCBpbnRlcm5hbGx5IGFzICdtc2VjcycgKGludGVnZXIgbWlsbGlzZWNvbmRzKSBhbmQgJ25zZWNzJ1xuICAvLyAoMTAwLW5hbm9zZWNvbmRzIG9mZnNldCBmcm9tIG1zZWNzKSBzaW5jZSB1bml4IGVwb2NoLCAxOTcwLTAxLTAxIDAwOjAwLlxuXG5cbiAgdmFyIG1zZWNzID0gb3B0aW9ucy5tc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tc2VjcyA6IERhdGUubm93KCk7IC8vIFBlciA0LjIuMS4yLCB1c2UgY291bnQgb2YgdXVpZCdzIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGN1cnJlbnQgY2xvY2tcbiAgLy8gY3ljbGUgdG8gc2ltdWxhdGUgaGlnaGVyIHJlc29sdXRpb24gY2xvY2tcblxuICB2YXIgbnNlY3MgPSBvcHRpb25zLm5zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5zZWNzIDogX2xhc3ROU2VjcyArIDE7IC8vIFRpbWUgc2luY2UgbGFzdCB1dWlkIGNyZWF0aW9uIChpbiBtc2VjcylcblxuICB2YXIgZHQgPSBtc2VjcyAtIF9sYXN0TVNlY3MgKyAobnNlY3MgLSBfbGFzdE5TZWNzKSAvIDEwMDAwOyAvLyBQZXIgNC4yLjEuMiwgQnVtcCBjbG9ja3NlcSBvbiBjbG9jayByZWdyZXNzaW9uXG5cbiAgaWYgKGR0IDwgMCAmJiBvcHRpb25zLmNsb2Nrc2VxID09PSB1bmRlZmluZWQpIHtcbiAgICBjbG9ja3NlcSA9IGNsb2Nrc2VxICsgMSAmIDB4M2ZmZjtcbiAgfSAvLyBSZXNldCBuc2VjcyBpZiBjbG9jayByZWdyZXNzZXMgKG5ldyBjbG9ja3NlcSkgb3Igd2UndmUgbW92ZWQgb250byBhIG5ld1xuICAvLyB0aW1lIGludGVydmFsXG5cblxuICBpZiAoKGR0IDwgMCB8fCBtc2VjcyA+IF9sYXN0TVNlY3MpICYmIG9wdGlvbnMubnNlY3MgPT09IHVuZGVmaW5lZCkge1xuICAgIG5zZWNzID0gMDtcbiAgfSAvLyBQZXIgNC4yLjEuMiBUaHJvdyBlcnJvciBpZiB0b28gbWFueSB1dWlkcyBhcmUgcmVxdWVzdGVkXG5cblxuICBpZiAobnNlY3MgPj0gMTAwMDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1dWlkLnYxKCk6IENhbid0IGNyZWF0ZSBtb3JlIHRoYW4gMTBNIHV1aWRzL3NlY1wiKTtcbiAgfVxuXG4gIF9sYXN0TVNlY3MgPSBtc2VjcztcbiAgX2xhc3ROU2VjcyA9IG5zZWNzO1xuICBfY2xvY2tzZXEgPSBjbG9ja3NlcTsgLy8gUGVyIDQuMS40IC0gQ29udmVydCBmcm9tIHVuaXggZXBvY2ggdG8gR3JlZ29yaWFuIGVwb2NoXG5cbiAgbXNlY3MgKz0gMTIyMTkyOTI4MDAwMDA7IC8vIGB0aW1lX2xvd2BcblxuICB2YXIgdGwgPSAoKG1zZWNzICYgMHhmZmZmZmZmKSAqIDEwMDAwICsgbnNlY3MpICUgMHgxMDAwMDAwMDA7XG4gIGJbaSsrXSA9IHRsID4+PiAyNCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiAxNiAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdGwgJiAweGZmOyAvLyBgdGltZV9taWRgXG5cbiAgdmFyIHRtaCA9IG1zZWNzIC8gMHgxMDAwMDAwMDAgKiAxMDAwMCAmIDB4ZmZmZmZmZjtcbiAgYltpKytdID0gdG1oID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdG1oICYgMHhmZjsgLy8gYHRpbWVfaGlnaF9hbmRfdmVyc2lvbmBcblxuICBiW2krK10gPSB0bWggPj4+IDI0ICYgMHhmIHwgMHgxMDsgLy8gaW5jbHVkZSB2ZXJzaW9uXG5cbiAgYltpKytdID0gdG1oID4+PiAxNiAmIDB4ZmY7IC8vIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYCAoUGVyIDQuMi4yIC0gaW5jbHVkZSB2YXJpYW50KVxuXG4gIGJbaSsrXSA9IGNsb2Nrc2VxID4+PiA4IHwgMHg4MDsgLy8gYGNsb2NrX3NlcV9sb3dgXG5cbiAgYltpKytdID0gY2xvY2tzZXEgJiAweGZmOyAvLyBgbm9kZWBcblxuICBmb3IgKHZhciBuID0gMDsgbiA8IDY7ICsrbikge1xuICAgIGJbaSArIG5dID0gbm9kZVtuXTtcbiAgfVxuXG4gIHJldHVybiBidWYgfHwgc3RyaW5naWZ5KGIpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2MTsiLCJpbXBvcnQgdjM1IGZyb20gJy4vdjM1LmpzJztcbmltcG9ydCBtZDUgZnJvbSAnLi9tZDUuanMnO1xudmFyIHYzID0gdjM1KCd2MycsIDB4MzAsIG1kNSk7XG5leHBvcnQgZGVmYXVsdCB2MzsiLCJpbXBvcnQgc3RyaW5naWZ5IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcbmltcG9ydCBwYXJzZSBmcm9tICcuL3BhcnNlLmpzJztcblxuZnVuY3Rpb24gc3RyaW5nVG9CeXRlcyhzdHIpIHtcbiAgc3RyID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN0cikpOyAvLyBVVEY4IGVzY2FwZVxuXG4gIHZhciBieXRlcyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgYnl0ZXMucHVzaChzdHIuY2hhckNvZGVBdChpKSk7XG4gIH1cblxuICByZXR1cm4gYnl0ZXM7XG59XG5cbmV4cG9ydCB2YXIgRE5TID0gJzZiYTdiODEwLTlkYWQtMTFkMS04MGI0LTAwYzA0ZmQ0MzBjOCc7XG5leHBvcnQgdmFyIFVSTCA9ICc2YmE3YjgxMS05ZGFkLTExZDEtODBiNC0wMGMwNGZkNDMwYzgnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKG5hbWUsIHZlcnNpb24sIGhhc2hmdW5jKSB7XG4gIGZ1bmN0aW9uIGdlbmVyYXRlVVVJRCh2YWx1ZSwgbmFtZXNwYWNlLCBidWYsIG9mZnNldCkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB2YWx1ZSA9IHN0cmluZ1RvQnl0ZXModmFsdWUpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlID09PSAnc3RyaW5nJykge1xuICAgICAgbmFtZXNwYWNlID0gcGFyc2UobmFtZXNwYWNlKTtcbiAgICB9XG5cbiAgICBpZiAobmFtZXNwYWNlLmxlbmd0aCAhPT0gMTYpIHtcbiAgICAgIHRocm93IFR5cGVFcnJvcignTmFtZXNwYWNlIG11c3QgYmUgYXJyYXktbGlrZSAoMTYgaXRlcmFibGUgaW50ZWdlciB2YWx1ZXMsIDAtMjU1KScpO1xuICAgIH0gLy8gQ29tcHV0ZSBoYXNoIG9mIG5hbWVzcGFjZSBhbmQgdmFsdWUsIFBlciA0LjNcbiAgICAvLyBGdXR1cmU6IFVzZSBzcHJlYWQgc3ludGF4IHdoZW4gc3VwcG9ydGVkIG9uIGFsbCBwbGF0Zm9ybXMsIGUuZy4gYGJ5dGVzID1cbiAgICAvLyBoYXNoZnVuYyhbLi4ubmFtZXNwYWNlLCAuLi4gdmFsdWVdKWBcblxuXG4gICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoMTYgKyB2YWx1ZS5sZW5ndGgpO1xuICAgIGJ5dGVzLnNldChuYW1lc3BhY2UpO1xuICAgIGJ5dGVzLnNldCh2YWx1ZSwgbmFtZXNwYWNlLmxlbmd0aCk7XG4gICAgYnl0ZXMgPSBoYXNoZnVuYyhieXRlcyk7XG4gICAgYnl0ZXNbNl0gPSBieXRlc1s2XSAmIDB4MGYgfCB2ZXJzaW9uO1xuICAgIGJ5dGVzWzhdID0gYnl0ZXNbOF0gJiAweDNmIHwgMHg4MDtcblxuICAgIGlmIChidWYpIHtcbiAgICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgICAgYnVmW29mZnNldCArIGldID0gYnl0ZXNbaV07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBidWY7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0cmluZ2lmeShieXRlcyk7XG4gIH0gLy8gRnVuY3Rpb24jbmFtZSBpcyBub3Qgc2V0dGFibGUgb24gc29tZSBwbGF0Zm9ybXMgKCMyNzApXG5cblxuICB0cnkge1xuICAgIGdlbmVyYXRlVVVJRC5uYW1lID0gbmFtZTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gIH0gY2F0Y2ggKGVycikge30gLy8gRm9yIENvbW1vbkpTIGRlZmF1bHQgZXhwb3J0IHN1cHBvcnRcblxuXG4gIGdlbmVyYXRlVVVJRC5ETlMgPSBETlM7XG4gIGdlbmVyYXRlVVVJRC5VUkwgPSBVUkw7XG4gIHJldHVybiBnZW5lcmF0ZVVVSUQ7XG59IiwiaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTsgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuXG4gIHJuZHNbNl0gPSBybmRzWzZdICYgMHgwZiB8IDB4NDA7XG4gIHJuZHNbOF0gPSBybmRzWzhdICYgMHgzZiB8IDB4ODA7IC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuXG4gIGlmIChidWYpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgYnVmW29mZnNldCArIGldID0gcm5kc1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVmO1xuICB9XG5cbiAgcmV0dXJuIHN0cmluZ2lmeShybmRzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdjQ7IiwiaW1wb3J0IHYzNSBmcm9tICcuL3YzNS5qcyc7XG5pbXBvcnQgc2hhMSBmcm9tICcuL3NoYTEuanMnO1xudmFyIHY1ID0gdjM1KCd2NScsIDB4NTAsIHNoYTEpO1xuZXhwb3J0IGRlZmF1bHQgdjU7IiwiaW1wb3J0IFJFR0VYIGZyb20gJy4vcmVnZXguanMnO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZSh1dWlkKSB7XG4gIHJldHVybiB0eXBlb2YgdXVpZCA9PT0gJ3N0cmluZycgJiYgUkVHRVgudGVzdCh1dWlkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdGU7IiwiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuXG5mdW5jdGlvbiB2ZXJzaW9uKHV1aWQpIHtcbiAgaWYgKCF2YWxpZGF0ZSh1dWlkKSkge1xuICAgIHRocm93IFR5cGVFcnJvcignSW52YWxpZCBVVUlEJyk7XG4gIH1cblxuICByZXR1cm4gcGFyc2VJbnQodXVpZC5zdWJzdHIoMTQsIDEpLCAxNik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHZlcnNpb247IiwiLyogZ2xvYmFscyBfX3dlYnBhY2tfYW1kX29wdGlvbnNfXyAqL1xubW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfYW1kX29wdGlvbnNfXztcbiIsInZhciBnO1xuXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxuZyA9IChmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXM7XG59KSgpO1xuXG50cnkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcblx0ZyA9IGcgfHwgbmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiIsIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuLyogZXNsaW50LWVudiBub2RlICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHthZGFwdGVyRmFjdG9yeX0gZnJvbSAnLi9hZGFwdGVyX2ZhY3RvcnkuanMnO1xuXG5jb25zdCBhZGFwdGVyID1cbiAgYWRhcHRlckZhY3Rvcnkoe3dpbmRvdzogdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiB3aW5kb3d9KTtcbmV4cG9ydCBkZWZhdWx0IGFkYXB0ZXI7XG4iLCIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4vdXRpbHMnO1xuXG4gIC8vIEJyb3dzZXIgc2hpbXMuXG5pbXBvcnQgKiBhcyBjaHJvbWVTaGltIGZyb20gJy4vY2hyb21lL2Nocm9tZV9zaGltJztcbmltcG9ydCAqIGFzIGVkZ2VTaGltIGZyb20gJy4vZWRnZS9lZGdlX3NoaW0nO1xuaW1wb3J0ICogYXMgZmlyZWZveFNoaW0gZnJvbSAnLi9maXJlZm94L2ZpcmVmb3hfc2hpbSc7XG5pbXBvcnQgKiBhcyBzYWZhcmlTaGltIGZyb20gJy4vc2FmYXJpL3NhZmFyaV9zaGltJztcbmltcG9ydCAqIGFzIGNvbW1vblNoaW0gZnJvbSAnLi9jb21tb25fc2hpbSc7XG5cbi8vIFNoaW1taW5nIHN0YXJ0cyBoZXJlLlxuZXhwb3J0IGZ1bmN0aW9uIGFkYXB0ZXJGYWN0b3J5KHt3aW5kb3d9ID0ge30sIG9wdGlvbnMgPSB7XG4gIHNoaW1DaHJvbWU6IHRydWUsXG4gIHNoaW1GaXJlZm94OiB0cnVlLFxuICBzaGltRWRnZTogdHJ1ZSxcbiAgc2hpbVNhZmFyaTogdHJ1ZSxcbn0pIHtcbiAgLy8gVXRpbHMuXG4gIGNvbnN0IGxvZ2dpbmcgPSB1dGlscy5sb2c7XG4gIGNvbnN0IGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuZGV0ZWN0QnJvd3Nlcih3aW5kb3cpO1xuXG4gIGNvbnN0IGFkYXB0ZXIgPSB7XG4gICAgYnJvd3NlckRldGFpbHMsXG4gICAgY29tbW9uU2hpbSxcbiAgICBleHRyYWN0VmVyc2lvbjogdXRpbHMuZXh0cmFjdFZlcnNpb24sXG4gICAgZGlzYWJsZUxvZzogdXRpbHMuZGlzYWJsZUxvZyxcbiAgICBkaXNhYmxlV2FybmluZ3M6IHV0aWxzLmRpc2FibGVXYXJuaW5nc1xuICB9O1xuXG4gIC8vIFNoaW0gYnJvd3NlciBpZiBmb3VuZC5cbiAgc3dpdGNoIChicm93c2VyRGV0YWlscy5icm93c2VyKSB7XG4gICAgY2FzZSAnY2hyb21lJzpcbiAgICAgIGlmICghY2hyb21lU2hpbSB8fCAhY2hyb21lU2hpbS5zaGltUGVlckNvbm5lY3Rpb24gfHxcbiAgICAgICAgICAhb3B0aW9ucy5zaGltQ2hyb21lKSB7XG4gICAgICAgIGxvZ2dpbmcoJ0Nocm9tZSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXI7XG4gICAgICB9XG4gICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA9PT0gbnVsbCkge1xuICAgICAgICBsb2dnaW5nKCdDaHJvbWUgc2hpbSBjYW4gbm90IGRldGVybWluZSB2ZXJzaW9uLCBub3Qgc2hpbW1pbmcuJyk7XG4gICAgICAgIHJldHVybiBhZGFwdGVyO1xuICAgICAgfVxuICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBjaHJvbWUuJyk7XG4gICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLlxuICAgICAgYWRhcHRlci5icm93c2VyU2hpbSA9IGNocm9tZVNoaW07XG5cbiAgICAgIC8vIE11c3QgYmUgY2FsbGVkIGJlZm9yZSBzaGltUGVlckNvbm5lY3Rpb24uXG4gICAgICBjb21tb25TaGltLnNoaW1BZGRJY2VDYW5kaWRhdGVOdWxsT3JFbXB0eSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcblxuICAgICAgY2hyb21lU2hpbS5zaGltR2V0VXNlck1lZGlhKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY2hyb21lU2hpbS5zaGltTWVkaWFTdHJlYW0od2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjaHJvbWVTaGltLnNoaW1QZWVyQ29ubmVjdGlvbih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNocm9tZVNoaW0uc2hpbU9uVHJhY2sod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjaHJvbWVTaGltLnNoaW1BZGRUcmFja1JlbW92ZVRyYWNrKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY2hyb21lU2hpbS5zaGltR2V0U2VuZGVyc1dpdGhEdG1mKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY2hyb21lU2hpbS5zaGltR2V0U3RhdHMod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjaHJvbWVTaGltLnNoaW1TZW5kZXJSZWNlaXZlckdldFN0YXRzKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY2hyb21lU2hpbS5maXhOZWdvdGlhdGlvbk5lZWRlZCh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcblxuICAgICAgY29tbW9uU2hpbS5zaGltUlRDSWNlQ2FuZGlkYXRlKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5zaGltQ29ubmVjdGlvblN0YXRlKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5zaGltTWF4TWVzc2FnZVNpemUod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnNoaW1TZW5kVGhyb3dUeXBlRXJyb3Iod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnJlbW92ZUV4dG1hcEFsbG93TWl4ZWQod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdmaXJlZm94JzpcbiAgICAgIGlmICghZmlyZWZveFNoaW0gfHwgIWZpcmVmb3hTaGltLnNoaW1QZWVyQ29ubmVjdGlvbiB8fFxuICAgICAgICAgICFvcHRpb25zLnNoaW1GaXJlZm94KSB7XG4gICAgICAgIGxvZ2dpbmcoJ0ZpcmVmb3ggc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuJyk7XG4gICAgICAgIHJldHVybiBhZGFwdGVyO1xuICAgICAgfVxuICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBmaXJlZm94LicpO1xuICAgICAgLy8gRXhwb3J0IHRvIHRoZSBhZGFwdGVyIGdsb2JhbCBvYmplY3QgdmlzaWJsZSBpbiB0aGUgYnJvd3Nlci5cbiAgICAgIGFkYXB0ZXIuYnJvd3NlclNoaW0gPSBmaXJlZm94U2hpbTtcblxuICAgICAgLy8gTXVzdCBiZSBjYWxsZWQgYmVmb3JlIHNoaW1QZWVyQ29ubmVjdGlvbi5cbiAgICAgIGNvbW1vblNoaW0uc2hpbUFkZEljZUNhbmRpZGF0ZU51bGxPckVtcHR5KHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuXG4gICAgICBmaXJlZm94U2hpbS5zaGltR2V0VXNlck1lZGlhKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbVBlZXJDb25uZWN0aW9uKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbU9uVHJhY2sod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltUmVtb3ZlU3RyZWFtKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbVNlbmRlckdldFN0YXRzKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbVJlY2VpdmVyR2V0U3RhdHMod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltUlRDRGF0YUNoYW5uZWwod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltQWRkVHJhbnNjZWl2ZXIod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltR2V0UGFyYW1ldGVycyh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGZpcmVmb3hTaGltLnNoaW1DcmVhdGVPZmZlcih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGZpcmVmb3hTaGltLnNoaW1DcmVhdGVBbnN3ZXIod2luZG93LCBicm93c2VyRGV0YWlscyk7XG5cbiAgICAgIGNvbW1vblNoaW0uc2hpbVJUQ0ljZUNhbmRpZGF0ZSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbUNvbm5lY3Rpb25TdGF0ZSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbU1heE1lc3NhZ2VTaXplKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5zaGltU2VuZFRocm93VHlwZUVycm9yKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZWRnZSc6XG4gICAgICBpZiAoIWVkZ2VTaGltIHx8ICFlZGdlU2hpbS5zaGltUGVlckNvbm5lY3Rpb24gfHwgIW9wdGlvbnMuc2hpbUVkZ2UpIHtcbiAgICAgICAgbG9nZ2luZygnTVMgZWRnZSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXI7XG4gICAgICB9XG4gICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIGVkZ2UuJyk7XG4gICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLlxuICAgICAgYWRhcHRlci5icm93c2VyU2hpbSA9IGVkZ2VTaGltO1xuXG4gICAgICBlZGdlU2hpbS5zaGltR2V0VXNlck1lZGlhKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZWRnZVNoaW0uc2hpbUdldERpc3BsYXlNZWRpYSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGVkZ2VTaGltLnNoaW1QZWVyQ29ubmVjdGlvbih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGVkZ2VTaGltLnNoaW1SZXBsYWNlVHJhY2sod2luZG93LCBicm93c2VyRGV0YWlscyk7XG5cbiAgICAgIC8vIHRoZSBlZGdlIHNoaW0gaW1wbGVtZW50cyB0aGUgZnVsbCBSVENJY2VDYW5kaWRhdGUgb2JqZWN0LlxuXG4gICAgICBjb21tb25TaGltLnNoaW1NYXhNZXNzYWdlU2l6ZSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbVNlbmRUaHJvd1R5cGVFcnJvcih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3NhZmFyaSc6XG4gICAgICBpZiAoIXNhZmFyaVNoaW0gfHwgIW9wdGlvbnMuc2hpbVNhZmFyaSkge1xuICAgICAgICBsb2dnaW5nKCdTYWZhcmkgc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuJyk7XG4gICAgICAgIHJldHVybiBhZGFwdGVyO1xuICAgICAgfVxuICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBzYWZhcmkuJyk7XG4gICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLlxuICAgICAgYWRhcHRlci5icm93c2VyU2hpbSA9IHNhZmFyaVNoaW07XG5cbiAgICAgIC8vIE11c3QgYmUgY2FsbGVkIGJlZm9yZSBzaGltQ2FsbGJhY2tBUEkuXG4gICAgICBjb21tb25TaGltLnNoaW1BZGRJY2VDYW5kaWRhdGVOdWxsT3JFbXB0eSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcblxuICAgICAgc2FmYXJpU2hpbS5zaGltUlRDSWNlU2VydmVyVXJscyh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIHNhZmFyaVNoaW0uc2hpbUNyZWF0ZU9mZmVyTGVnYWN5KHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgc2FmYXJpU2hpbS5zaGltQ2FsbGJhY2tzQVBJKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgc2FmYXJpU2hpbS5zaGltTG9jYWxTdHJlYW1zQVBJKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgc2FmYXJpU2hpbS5zaGltUmVtb3RlU3RyZWFtc0FQSSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIHNhZmFyaVNoaW0uc2hpbVRyYWNrRXZlbnRUcmFuc2NlaXZlcih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIHNhZmFyaVNoaW0uc2hpbUdldFVzZXJNZWRpYSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIHNhZmFyaVNoaW0uc2hpbUF1ZGlvQ29udGV4dCh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcblxuICAgICAgY29tbW9uU2hpbS5zaGltUlRDSWNlQ2FuZGlkYXRlKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5zaGltTWF4TWVzc2FnZVNpemUod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnNoaW1TZW5kVGhyb3dUeXBlRXJyb3Iod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnJlbW92ZUV4dG1hcEFsbG93TWl4ZWQod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgbG9nZ2luZygnVW5zdXBwb3J0ZWQgYnJvd3NlciEnKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIGFkYXB0ZXI7XG59XG4iLCIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbiAvKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL3V0aWxzLmpzJztcblxuZXhwb3J0IHtzaGltR2V0VXNlck1lZGlhfSBmcm9tICcuL2dldHVzZXJtZWRpYSc7XG5leHBvcnQge3NoaW1HZXREaXNwbGF5TWVkaWF9IGZyb20gJy4vZ2V0ZGlzcGxheW1lZGlhJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1NZWRpYVN0cmVhbSh3aW5kb3cpIHtcbiAgd2luZG93Lk1lZGlhU3RyZWFtID0gd2luZG93Lk1lZGlhU3RyZWFtIHx8IHdpbmRvdy53ZWJraXRNZWRpYVN0cmVhbTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1PblRyYWNrKHdpbmRvdykge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmICEoJ29udHJhY2snIGluXG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLCAnb250cmFjaycsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29udHJhY2s7XG4gICAgICB9LFxuICAgICAgc2V0KGYpIHtcbiAgICAgICAgaWYgKHRoaXMuX29udHJhY2spIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgdGhpcy5fb250cmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29udHJhY2sgPSBmKTtcbiAgICAgIH0sXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgY29uc3Qgb3JpZ1NldFJlbW90ZURlc2NyaXB0aW9uID1cbiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uID1cbiAgICAgIGZ1bmN0aW9uIHNldFJlbW90ZURlc2NyaXB0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuX29udHJhY2twb2x5KSB7XG4gICAgICAgICAgdGhpcy5fb250cmFja3BvbHkgPSAoZSkgPT4ge1xuICAgICAgICAgICAgLy8gb25hZGRzdHJlYW0gZG9lcyBub3QgZmlyZSB3aGVuIGEgdHJhY2sgaXMgYWRkZWQgdG8gYW4gZXhpc3RpbmdcbiAgICAgICAgICAgIC8vIHN0cmVhbS4gQnV0IHN0cmVhbS5vbmFkZHRyYWNrIGlzIGltcGxlbWVudGVkIHNvIHdlIHVzZSB0aGF0LlxuICAgICAgICAgICAgZS5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcignYWRkdHJhY2snLCB0ZSA9PiB7XG4gICAgICAgICAgICAgIGxldCByZWNlaXZlcjtcbiAgICAgICAgICAgICAgaWYgKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzKSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSB0aGlzLmdldFJlY2VpdmVycygpXG4gICAgICAgICAgICAgICAgICAuZmluZChyID0+IHIudHJhY2sgJiYgci50cmFjay5pZCA9PT0gdGUudHJhY2suaWQpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyID0ge3RyYWNrOiB0ZS50cmFja307XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTtcbiAgICAgICAgICAgICAgZXZlbnQudHJhY2sgPSB0ZS50cmFjaztcbiAgICAgICAgICAgICAgZXZlbnQucmVjZWl2ZXIgPSByZWNlaXZlcjtcbiAgICAgICAgICAgICAgZXZlbnQudHJhbnNjZWl2ZXIgPSB7cmVjZWl2ZXJ9O1xuICAgICAgICAgICAgICBldmVudC5zdHJlYW1zID0gW2Uuc3RyZWFtXTtcbiAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZS5zdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB7XG4gICAgICAgICAgICAgIGxldCByZWNlaXZlcjtcbiAgICAgICAgICAgICAgaWYgKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzKSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSB0aGlzLmdldFJlY2VpdmVycygpXG4gICAgICAgICAgICAgICAgICAuZmluZChyID0+IHIudHJhY2sgJiYgci50cmFjay5pZCA9PT0gdHJhY2suaWQpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyID0ge3RyYWNrfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTtcbiAgICAgICAgICAgICAgZXZlbnQudHJhY2sgPSB0cmFjaztcbiAgICAgICAgICAgICAgZXZlbnQucmVjZWl2ZXIgPSByZWNlaXZlcjtcbiAgICAgICAgICAgICAgZXZlbnQudHJhbnNjZWl2ZXIgPSB7cmVjZWl2ZXJ9O1xuICAgICAgICAgICAgICBldmVudC5zdHJlYW1zID0gW2Uuc3RyZWFtXTtcbiAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG4gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbnRyYWNrcG9seSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9yaWdTZXRSZW1vdGVEZXNjcmlwdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgfSBlbHNlIHtcbiAgICAvLyBldmVuIGlmIFJUQ1J0cFRyYW5zY2VpdmVyIGlzIGluIHdpbmRvdywgaXQgaXMgb25seSB1c2VkIGFuZFxuICAgIC8vIGVtaXR0ZWQgaW4gdW5pZmllZC1wbGFuLiBVbmZvcnR1bmF0ZWx5IHRoaXMgbWVhbnMgd2UgbmVlZFxuICAgIC8vIHRvIHVuY29uZGl0aW9uYWxseSB3cmFwIHRoZSBldmVudC5cbiAgICB1dGlscy53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh3aW5kb3csICd0cmFjaycsIGUgPT4ge1xuICAgICAgaWYgKCFlLnRyYW5zY2VpdmVyKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCAndHJhbnNjZWl2ZXInLFxuICAgICAgICAgIHt2YWx1ZToge3JlY2VpdmVyOiBlLnJlY2VpdmVyfX0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGU7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1HZXRTZW5kZXJzV2l0aER0bWYod2luZG93KSB7XG4gIC8vIE92ZXJyaWRlcyBhZGRUcmFjay9yZW1vdmVUcmFjaywgZGVwZW5kcyBvbiBzaGltQWRkVHJhY2tSZW1vdmVUcmFjay5cbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJlxuICAgICAgISgnZ2V0U2VuZGVycycgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkgJiZcbiAgICAgICdjcmVhdGVEVE1GU2VuZGVyJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSB7XG4gICAgY29uc3Qgc2hpbVNlbmRlcldpdGhEdG1mID0gZnVuY3Rpb24ocGMsIHRyYWNrKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0cmFjayxcbiAgICAgICAgZ2V0IGR0bWYoKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX2R0bWYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKHRyYWNrLmtpbmQgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZHRtZiA9IHBjLmNyZWF0ZURUTUZTZW5kZXIodHJhY2spO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5fZHRtZiA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aGlzLl9kdG1mO1xuICAgICAgICB9LFxuICAgICAgICBfcGM6IHBjXG4gICAgICB9O1xuICAgIH07XG5cbiAgICAvLyBhdWdtZW50IGFkZFRyYWNrIHdoZW4gZ2V0U2VuZGVycyBpcyBub3QgYXZhaWxhYmxlLlxuICAgIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzKSB7XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMgPSBmdW5jdGlvbiBnZXRTZW5kZXJzKCkge1xuICAgICAgICB0aGlzLl9zZW5kZXJzID0gdGhpcy5fc2VuZGVycyB8fCBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRlcnMuc2xpY2UoKTsgLy8gcmV0dXJuIGEgY29weSBvZiB0aGUgaW50ZXJuYWwgc3RhdGUuXG4gICAgICB9O1xuICAgICAgY29uc3Qgb3JpZ0FkZFRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPVxuICAgICAgICBmdW5jdGlvbiBhZGRUcmFjayh0cmFjaywgc3RyZWFtKSB7XG4gICAgICAgICAgbGV0IHNlbmRlciA9IG9yaWdBZGRUcmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIGlmICghc2VuZGVyKSB7XG4gICAgICAgICAgICBzZW5kZXIgPSBzaGltU2VuZGVyV2l0aER0bWYodGhpcywgdHJhY2spO1xuICAgICAgICAgICAgdGhpcy5fc2VuZGVycy5wdXNoKHNlbmRlcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzZW5kZXI7XG4gICAgICAgIH07XG5cbiAgICAgIGNvbnN0IG9yaWdSZW1vdmVUcmFjayA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2s7XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrID1cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlVHJhY2soc2VuZGVyKSB7XG4gICAgICAgICAgb3JpZ1JlbW92ZVRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5fc2VuZGVycy5pbmRleE9mKHNlbmRlcik7XG4gICAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX3NlbmRlcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBvcmlnQWRkU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW0gPSBmdW5jdGlvbiBhZGRTdHJlYW0oc3RyZWFtKSB7XG4gICAgICB0aGlzLl9zZW5kZXJzID0gdGhpcy5fc2VuZGVycyB8fCBbXTtcbiAgICAgIG9yaWdBZGRTdHJlYW0uYXBwbHkodGhpcywgW3N0cmVhbV0pO1xuICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgICB0aGlzLl9zZW5kZXJzLnB1c2goc2hpbVNlbmRlcldpdGhEdG1mKHRoaXMsIHRyYWNrKSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3Qgb3JpZ1JlbW92ZVN0cmVhbSA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID1cbiAgICAgIGZ1bmN0aW9uIHJlbW92ZVN0cmVhbShzdHJlYW0pIHtcbiAgICAgICAgdGhpcy5fc2VuZGVycyA9IHRoaXMuX3NlbmRlcnMgfHwgW107XG4gICAgICAgIG9yaWdSZW1vdmVTdHJlYW0uYXBwbHkodGhpcywgW3N0cmVhbV0pO1xuXG4gICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHtcbiAgICAgICAgICBjb25zdCBzZW5kZXIgPSB0aGlzLl9zZW5kZXJzLmZpbmQocyA9PiBzLnRyYWNrID09PSB0cmFjayk7XG4gICAgICAgICAgaWYgKHNlbmRlcikgeyAvLyByZW1vdmUgc2VuZGVyXG4gICAgICAgICAgICB0aGlzLl9zZW5kZXJzLnNwbGljZSh0aGlzLl9zZW5kZXJzLmluZGV4T2Yoc2VuZGVyKSwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmXG4gICAgICAgICAgICAgJ2dldFNlbmRlcnMnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgJiZcbiAgICAgICAgICAgICAnY3JlYXRlRFRNRlNlbmRlcicgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSAmJlxuICAgICAgICAgICAgIHdpbmRvdy5SVENSdHBTZW5kZXIgJiZcbiAgICAgICAgICAgICAhKCdkdG1mJyBpbiB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkpIHtcbiAgICBjb25zdCBvcmlnR2V0U2VuZGVycyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycztcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMgPSBmdW5jdGlvbiBnZXRTZW5kZXJzKCkge1xuICAgICAgY29uc3Qgc2VuZGVycyA9IG9yaWdHZXRTZW5kZXJzLmFwcGx5KHRoaXMsIFtdKTtcbiAgICAgIHNlbmRlcnMuZm9yRWFjaChzZW5kZXIgPT4gc2VuZGVyLl9wYyA9IHRoaXMpO1xuICAgICAgcmV0dXJuIHNlbmRlcnM7XG4gICAgfTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSwgJ2R0bWYnLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9kdG1mID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAodGhpcy50cmFjay5raW5kID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgICB0aGlzLl9kdG1mID0gdGhpcy5fcGMuY3JlYXRlRFRNRlNlbmRlcih0aGlzLnRyYWNrKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZHRtZiA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kdG1mO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltR2V0U3RhdHMod2luZG93KSB7XG4gIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgb3JpZ0dldFN0YXRzID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cztcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uIGdldFN0YXRzKCkge1xuICAgIGNvbnN0IFtzZWxlY3Rvciwgb25TdWNjLCBvbkVycl0gPSBhcmd1bWVudHM7XG5cbiAgICAvLyBJZiBzZWxlY3RvciBpcyBhIGZ1bmN0aW9uIHRoZW4gd2UgYXJlIGluIHRoZSBvbGQgc3R5bGUgc3RhdHMgc28ganVzdFxuICAgIC8vIHBhc3MgYmFjayB0aGUgb3JpZ2luYWwgZ2V0U3RhdHMgZm9ybWF0IHRvIGF2b2lkIGJyZWFraW5nIG9sZCB1c2Vycy5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdHlwZW9mIHNlbGVjdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gb3JpZ0dldFN0YXRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgLy8gV2hlbiBzcGVjLXN0eWxlIGdldFN0YXRzIGlzIHN1cHBvcnRlZCwgcmV0dXJuIHRob3NlIHdoZW4gY2FsbGVkIHdpdGhcbiAgICAvLyBlaXRoZXIgbm8gYXJndW1lbnRzIG9yIHRoZSBzZWxlY3RvciBhcmd1bWVudCBpcyBudWxsLlxuICAgIGlmIChvcmlnR2V0U3RhdHMubGVuZ3RoID09PSAwICYmIChhcmd1bWVudHMubGVuZ3RoID09PSAwIHx8XG4gICAgICAgIHR5cGVvZiBzZWxlY3RvciAhPT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgW10pO1xuICAgIH1cblxuICAgIGNvbnN0IGZpeENocm9tZVN0YXRzXyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICBjb25zdCBzdGFuZGFyZFJlcG9ydCA9IHt9O1xuICAgICAgY29uc3QgcmVwb3J0cyA9IHJlc3BvbnNlLnJlc3VsdCgpO1xuICAgICAgcmVwb3J0cy5mb3JFYWNoKHJlcG9ydCA9PiB7XG4gICAgICAgIGNvbnN0IHN0YW5kYXJkU3RhdHMgPSB7XG4gICAgICAgICAgaWQ6IHJlcG9ydC5pZCxcbiAgICAgICAgICB0aW1lc3RhbXA6IHJlcG9ydC50aW1lc3RhbXAsXG4gICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgbG9jYWxjYW5kaWRhdGU6ICdsb2NhbC1jYW5kaWRhdGUnLFxuICAgICAgICAgICAgcmVtb3RlY2FuZGlkYXRlOiAncmVtb3RlLWNhbmRpZGF0ZSdcbiAgICAgICAgICB9W3JlcG9ydC50eXBlXSB8fCByZXBvcnQudHlwZVxuICAgICAgICB9O1xuICAgICAgICByZXBvcnQubmFtZXMoKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICAgIHN0YW5kYXJkU3RhdHNbbmFtZV0gPSByZXBvcnQuc3RhdChuYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHN0YW5kYXJkUmVwb3J0W3N0YW5kYXJkU3RhdHMuaWRdID0gc3RhbmRhcmRTdGF0cztcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc3RhbmRhcmRSZXBvcnQ7XG4gICAgfTtcblxuICAgIC8vIHNoaW0gZ2V0U3RhdHMgd2l0aCBtYXBsaWtlIHN1cHBvcnRcbiAgICBjb25zdCBtYWtlTWFwU3RhdHMgPSBmdW5jdGlvbihzdGF0cykge1xuICAgICAgcmV0dXJuIG5ldyBNYXAoT2JqZWN0LmtleXMoc3RhdHMpLm1hcChrZXkgPT4gW2tleSwgc3RhdHNba2V5XV0pKTtcbiAgICB9O1xuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikge1xuICAgICAgY29uc3Qgc3VjY2Vzc0NhbGxiYWNrV3JhcHBlcl8gPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICBvblN1Y2MobWFrZU1hcFN0YXRzKGZpeENocm9tZVN0YXRzXyhyZXNwb25zZSkpKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgW3N1Y2Nlc3NDYWxsYmFja1dyYXBwZXJfLFxuICAgICAgICBzZWxlY3Rvcl0pO1xuICAgIH1cblxuICAgIC8vIHByb21pc2Utc3VwcG9ydFxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgW1xuICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgIHJlc29sdmUobWFrZU1hcFN0YXRzKGZpeENocm9tZVN0YXRzXyhyZXNwb25zZSkpKTtcbiAgICAgICAgfSwgcmVqZWN0XSk7XG4gICAgfSkudGhlbihvblN1Y2MsIG9uRXJyKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1TZW5kZXJSZWNlaXZlckdldFN0YXRzKHdpbmRvdykge1xuICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiZcbiAgICAgIHdpbmRvdy5SVENSdHBTZW5kZXIgJiYgd2luZG93LlJUQ1J0cFJlY2VpdmVyKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIHNoaW0gc2VuZGVyIHN0YXRzLlxuICBpZiAoISgnZ2V0U3RhdHMnIGluIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlKSkge1xuICAgIGNvbnN0IG9yaWdHZXRTZW5kZXJzID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzO1xuICAgIGlmIChvcmlnR2V0U2VuZGVycykge1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzID0gZnVuY3Rpb24gZ2V0U2VuZGVycygpIHtcbiAgICAgICAgY29uc3Qgc2VuZGVycyA9IG9yaWdHZXRTZW5kZXJzLmFwcGx5KHRoaXMsIFtdKTtcbiAgICAgICAgc2VuZGVycy5mb3JFYWNoKHNlbmRlciA9PiBzZW5kZXIuX3BjID0gdGhpcyk7XG4gICAgICAgIHJldHVybiBzZW5kZXJzO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBvcmlnQWRkVHJhY2sgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO1xuICAgIGlmIChvcmlnQWRkVHJhY2spIHtcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPSBmdW5jdGlvbiBhZGRUcmFjaygpIHtcbiAgICAgICAgY29uc3Qgc2VuZGVyID0gb3JpZ0FkZFRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHNlbmRlci5fcGMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gc2VuZGVyO1xuICAgICAgfTtcbiAgICB9XG4gICAgd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbiBnZXRTdGF0cygpIHtcbiAgICAgIGNvbnN0IHNlbmRlciA9IHRoaXM7XG4gICAgICByZXR1cm4gdGhpcy5fcGMuZ2V0U3RhdHMoKS50aGVuKHJlc3VsdCA9PlxuICAgICAgICAvKiBOb3RlOiB0aGlzIHdpbGwgaW5jbHVkZSBzdGF0cyBvZiBhbGwgc2VuZGVycyB0aGF0XG4gICAgICAgICAqICAgc2VuZCBhIHRyYWNrIHdpdGggdGhlIHNhbWUgaWQgYXMgc2VuZGVyLnRyYWNrIGFzXG4gICAgICAgICAqICAgaXQgaXMgbm90IHBvc3NpYmxlIHRvIGlkZW50aWZ5IHRoZSBSVENSdHBTZW5kZXIuXG4gICAgICAgICAqL1xuICAgICAgICB1dGlscy5maWx0ZXJTdGF0cyhyZXN1bHQsIHNlbmRlci50cmFjaywgdHJ1ZSkpO1xuICAgIH07XG4gIH1cblxuICAvLyBzaGltIHJlY2VpdmVyIHN0YXRzLlxuICBpZiAoISgnZ2V0U3RhdHMnIGluIHdpbmRvdy5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUpKSB7XG4gICAgY29uc3Qgb3JpZ0dldFJlY2VpdmVycyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzO1xuICAgIGlmIChvcmlnR2V0UmVjZWl2ZXJzKSB7XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycyA9XG4gICAgICAgIGZ1bmN0aW9uIGdldFJlY2VpdmVycygpIHtcbiAgICAgICAgICBjb25zdCByZWNlaXZlcnMgPSBvcmlnR2V0UmVjZWl2ZXJzLmFwcGx5KHRoaXMsIFtdKTtcbiAgICAgICAgICByZWNlaXZlcnMuZm9yRWFjaChyZWNlaXZlciA9PiByZWNlaXZlci5fcGMgPSB0aGlzKTtcbiAgICAgICAgICByZXR1cm4gcmVjZWl2ZXJzO1xuICAgICAgICB9O1xuICAgIH1cbiAgICB1dGlscy53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh3aW5kb3csICd0cmFjaycsIGUgPT4ge1xuICAgICAgZS5yZWNlaXZlci5fcGMgPSBlLnNyY0VsZW1lbnQ7XG4gICAgICByZXR1cm4gZTtcbiAgICB9KTtcbiAgICB3aW5kb3cuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24gZ2V0U3RhdHMoKSB7XG4gICAgICBjb25zdCByZWNlaXZlciA9IHRoaXM7XG4gICAgICByZXR1cm4gdGhpcy5fcGMuZ2V0U3RhdHMoKS50aGVuKHJlc3VsdCA9PlxuICAgICAgICB1dGlscy5maWx0ZXJTdGF0cyhyZXN1bHQsIHJlY2VpdmVyLnRyYWNrLCBmYWxzZSkpO1xuICAgIH07XG4gIH1cblxuICBpZiAoISgnZ2V0U3RhdHMnIGluIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlICYmXG4gICAgICAnZ2V0U3RhdHMnIGluIHdpbmRvdy5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gc2hpbSBSVENQZWVyQ29ubmVjdGlvbi5nZXRTdGF0cyh0cmFjaykuXG4gIGNvbnN0IG9yaWdHZXRTdGF0cyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbiBnZXRTdGF0cygpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgYXJndW1lbnRzWzBdIGluc3RhbmNlb2Ygd2luZG93Lk1lZGlhU3RyZWFtVHJhY2spIHtcbiAgICAgIGNvbnN0IHRyYWNrID0gYXJndW1lbnRzWzBdO1xuICAgICAgbGV0IHNlbmRlcjtcbiAgICAgIGxldCByZWNlaXZlcjtcbiAgICAgIGxldCBlcnI7XG4gICAgICB0aGlzLmdldFNlbmRlcnMoKS5mb3JFYWNoKHMgPT4ge1xuICAgICAgICBpZiAocy50cmFjayA9PT0gdHJhY2spIHtcbiAgICAgICAgICBpZiAoc2VuZGVyKSB7XG4gICAgICAgICAgICBlcnIgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZW5kZXIgPSBzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLmdldFJlY2VpdmVycygpLmZvckVhY2gociA9PiB7XG4gICAgICAgIGlmIChyLnRyYWNrID09PSB0cmFjaykge1xuICAgICAgICAgIGlmIChyZWNlaXZlcikge1xuICAgICAgICAgICAgZXJyID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVjZWl2ZXIgPSByO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gci50cmFjayA9PT0gdHJhY2s7XG4gICAgICB9KTtcbiAgICAgIGlmIChlcnIgfHwgKHNlbmRlciAmJiByZWNlaXZlcikpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBET01FeGNlcHRpb24oXG4gICAgICAgICAgJ1RoZXJlIGFyZSBtb3JlIHRoYW4gb25lIHNlbmRlciBvciByZWNlaXZlciBmb3IgdGhlIHRyYWNrLicsXG4gICAgICAgICAgJ0ludmFsaWRBY2Nlc3NFcnJvcicpKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VuZGVyKSB7XG4gICAgICAgIHJldHVybiBzZW5kZXIuZ2V0U3RhdHMoKTtcbiAgICAgIH0gZWxzZSBpZiAocmVjZWl2ZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlY2VpdmVyLmdldFN0YXRzKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IERPTUV4Y2VwdGlvbihcbiAgICAgICAgJ1RoZXJlIGlzIG5vIHNlbmRlciBvciByZWNlaXZlciBmb3IgdGhlIHRyYWNrLicsXG4gICAgICAgICdJbnZhbGlkQWNjZXNzRXJyb3InKSk7XG4gICAgfVxuICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1BZGRUcmFja1JlbW92ZVRyYWNrV2l0aE5hdGl2ZSh3aW5kb3cpIHtcbiAgLy8gc2hpbSBhZGRUcmFjay9yZW1vdmVUcmFjayB3aXRoIG5hdGl2ZSB2YXJpYW50cyBpbiBvcmRlciB0byBtYWtlXG4gIC8vIHRoZSBpbnRlcmFjdGlvbnMgd2l0aCBsZWdhY3kgZ2V0TG9jYWxTdHJlYW1zIGJlaGF2ZSBhcyBpbiBvdGhlciBicm93c2Vycy5cbiAgLy8gS2VlcHMgYSBtYXBwaW5nIHN0cmVhbS5pZCA9PiBbc3RyZWFtLCBydHBzZW5kZXJzLi4uXVxuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcyA9XG4gICAgZnVuY3Rpb24gZ2V0TG9jYWxTdHJlYW1zKCkge1xuICAgICAgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyA9IHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMgfHwge307XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcylcbiAgICAgICAgLm1hcChzdHJlYW1JZCA9PiB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbUlkXVswXSk7XG4gICAgfTtcblxuICBjb25zdCBvcmlnQWRkVHJhY2sgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrID1cbiAgICBmdW5jdGlvbiBhZGRUcmFjayh0cmFjaywgc3RyZWFtKSB7XG4gICAgICBpZiAoIXN0cmVhbSkge1xuICAgICAgICByZXR1cm4gb3JpZ0FkZFRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTtcblxuICAgICAgY29uc3Qgc2VuZGVyID0gb3JpZ0FkZFRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICBpZiAoIXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtLmlkXSkge1xuICAgICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbS5pZF0gPSBbc3RyZWFtLCBzZW5kZXJdO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbS5pZF0uaW5kZXhPZihzZW5kZXIpID09PSAtMSkge1xuICAgICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbS5pZF0ucHVzaChzZW5kZXIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlbmRlcjtcbiAgICB9O1xuXG4gIGNvbnN0IG9yaWdBZGRTdHJlYW0gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbTtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW0gPSBmdW5jdGlvbiBhZGRTdHJlYW0oc3RyZWFtKSB7XG4gICAgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyA9IHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMgfHwge307XG5cbiAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB7XG4gICAgICBjb25zdCBhbHJlYWR5RXhpc3RzID0gdGhpcy5nZXRTZW5kZXJzKCkuZmluZChzID0+IHMudHJhY2sgPT09IHRyYWNrKTtcbiAgICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1RyYWNrIGFscmVhZHkgZXhpc3RzLicsXG4gICAgICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgZXhpc3RpbmdTZW5kZXJzID0gdGhpcy5nZXRTZW5kZXJzKCk7XG4gICAgb3JpZ0FkZFN0cmVhbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGNvbnN0IG5ld1NlbmRlcnMgPSB0aGlzLmdldFNlbmRlcnMoKVxuICAgICAgLmZpbHRlcihuZXdTZW5kZXIgPT4gZXhpc3RpbmdTZW5kZXJzLmluZGV4T2YobmV3U2VuZGVyKSA9PT0gLTEpO1xuICAgIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtLmlkXSA9IFtzdHJlYW1dLmNvbmNhdChuZXdTZW5kZXJzKTtcbiAgfTtcblxuICBjb25zdCBvcmlnUmVtb3ZlU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID1cbiAgICBmdW5jdGlvbiByZW1vdmVTdHJlYW0oc3RyZWFtKSB7XG4gICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTtcbiAgICAgIGRlbGV0ZSB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbS5pZF07XG4gICAgICByZXR1cm4gb3JpZ1JlbW92ZVN0cmVhbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgY29uc3Qgb3JpZ1JlbW92ZVRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaztcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjayA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlVHJhY2soc2VuZGVyKSB7XG4gICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTtcbiAgICAgIGlmIChzZW5kZXIpIHtcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcykuZm9yRWFjaChzdHJlYW1JZCA9PiB7XG4gICAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW1JZF0uaW5kZXhPZihzZW5kZXIpO1xuICAgICAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbUlkXS5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtSWRdLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtSWRdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gb3JpZ1JlbW92ZVRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1BZGRUcmFja1JlbW92ZVRyYWNrKHdpbmRvdywgYnJvd3NlckRldGFpbHMpIHtcbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gc2hpbSBhZGRUcmFjayBhbmQgcmVtb3ZlVHJhY2suXG4gIGlmICh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrICYmXG4gICAgICBicm93c2VyRGV0YWlscy52ZXJzaW9uID49IDY1KSB7XG4gICAgcmV0dXJuIHNoaW1BZGRUcmFja1JlbW92ZVRyYWNrV2l0aE5hdGl2ZSh3aW5kb3cpO1xuICB9XG5cbiAgLy8gYWxzbyBzaGltIHBjLmdldExvY2FsU3RyZWFtcyB3aGVuIGFkZFRyYWNrIGlzIHNoaW1tZWRcbiAgLy8gdG8gcmV0dXJuIHRoZSBvcmlnaW5hbCBzdHJlYW1zLlxuICBjb25zdCBvcmlnR2V0TG9jYWxTdHJlYW1zID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVxuICAgICAgLmdldExvY2FsU3RyZWFtcztcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXMgPVxuICAgIGZ1bmN0aW9uIGdldExvY2FsU3RyZWFtcygpIHtcbiAgICAgIGNvbnN0IG5hdGl2ZVN0cmVhbXMgPSBvcmlnR2V0TG9jYWxTdHJlYW1zLmFwcGx5KHRoaXMpO1xuICAgICAgdGhpcy5fcmV2ZXJzZVN0cmVhbXMgPSB0aGlzLl9yZXZlcnNlU3RyZWFtcyB8fCB7fTtcbiAgICAgIHJldHVybiBuYXRpdmVTdHJlYW1zLm1hcChzdHJlYW0gPT4gdGhpcy5fcmV2ZXJzZVN0cmVhbXNbc3RyZWFtLmlkXSk7XG4gICAgfTtcblxuICBjb25zdCBvcmlnQWRkU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24gYWRkU3RyZWFtKHN0cmVhbSkge1xuICAgIHRoaXMuX3N0cmVhbXMgPSB0aGlzLl9zdHJlYW1zIHx8IHt9O1xuICAgIHRoaXMuX3JldmVyc2VTdHJlYW1zID0gdGhpcy5fcmV2ZXJzZVN0cmVhbXMgfHwge307XG5cbiAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB7XG4gICAgICBjb25zdCBhbHJlYWR5RXhpc3RzID0gdGhpcy5nZXRTZW5kZXJzKCkuZmluZChzID0+IHMudHJhY2sgPT09IHRyYWNrKTtcbiAgICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1RyYWNrIGFscmVhZHkgZXhpc3RzLicsXG4gICAgICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gQWRkIGlkZW50aXR5IG1hcHBpbmcgZm9yIGNvbnNpc3RlbmN5IHdpdGggYWRkVHJhY2suXG4gICAgLy8gVW5sZXNzIHRoaXMgaXMgYmVpbmcgdXNlZCB3aXRoIGEgc3RyZWFtIGZyb20gYWRkVHJhY2suXG4gICAgaWYgKCF0aGlzLl9yZXZlcnNlU3RyZWFtc1tzdHJlYW0uaWRdKSB7XG4gICAgICBjb25zdCBuZXdTdHJlYW0gPSBuZXcgd2luZG93Lk1lZGlhU3RyZWFtKHN0cmVhbS5nZXRUcmFja3MoKSk7XG4gICAgICB0aGlzLl9zdHJlYW1zW3N0cmVhbS5pZF0gPSBuZXdTdHJlYW07XG4gICAgICB0aGlzLl9yZXZlcnNlU3RyZWFtc1tuZXdTdHJlYW0uaWRdID0gc3RyZWFtO1xuICAgICAgc3RyZWFtID0gbmV3U3RyZWFtO1xuICAgIH1cbiAgICBvcmlnQWRkU3RyZWFtLmFwcGx5KHRoaXMsIFtzdHJlYW1dKTtcbiAgfTtcblxuICBjb25zdCBvcmlnUmVtb3ZlU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID1cbiAgICBmdW5jdGlvbiByZW1vdmVTdHJlYW0oc3RyZWFtKSB7XG4gICAgICB0aGlzLl9zdHJlYW1zID0gdGhpcy5fc3RyZWFtcyB8fCB7fTtcbiAgICAgIHRoaXMuX3JldmVyc2VTdHJlYW1zID0gdGhpcy5fcmV2ZXJzZVN0cmVhbXMgfHwge307XG5cbiAgICAgIG9yaWdSZW1vdmVTdHJlYW0uYXBwbHkodGhpcywgWyh0aGlzLl9zdHJlYW1zW3N0cmVhbS5pZF0gfHwgc3RyZWFtKV0pO1xuICAgICAgZGVsZXRlIHRoaXMuX3JldmVyc2VTdHJlYW1zWyh0aGlzLl9zdHJlYW1zW3N0cmVhbS5pZF0gP1xuICAgICAgICAgIHRoaXMuX3N0cmVhbXNbc3RyZWFtLmlkXS5pZCA6IHN0cmVhbS5pZCldO1xuICAgICAgZGVsZXRlIHRoaXMuX3N0cmVhbXNbc3RyZWFtLmlkXTtcbiAgICB9O1xuXG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPVxuICAgIGZ1bmN0aW9uIGFkZFRyYWNrKHRyYWNrLCBzdHJlYW0pIHtcbiAgICAgIGlmICh0aGlzLnNpZ25hbGluZ1N0YXRlID09PSAnY2xvc2VkJykge1xuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFxuICAgICAgICAgICdUaGUgUlRDUGVlckNvbm5lY3Rpb25cXCdzIHNpZ25hbGluZ1N0YXRlIGlzIFxcJ2Nsb3NlZFxcJy4nLFxuICAgICAgICAgICdJbnZhbGlkU3RhdGVFcnJvcicpO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3RyZWFtcyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgIGlmIChzdHJlYW1zLmxlbmd0aCAhPT0gMSB8fFxuICAgICAgICAgICFzdHJlYW1zWzBdLmdldFRyYWNrcygpLmZpbmQodCA9PiB0ID09PSB0cmFjaykpIHtcbiAgICAgICAgLy8gdGhpcyBpcyBub3QgZnVsbHkgY29ycmVjdCBidXQgYWxsIHdlIGNhbiBtYW5hZ2Ugd2l0aG91dFxuICAgICAgICAvLyBbW2Fzc29jaWF0ZWQgTWVkaWFTdHJlYW1zXV0gaW50ZXJuYWwgc2xvdC5cbiAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcbiAgICAgICAgICAnVGhlIGFkYXB0ZXIuanMgYWRkVHJhY2sgcG9seWZpbGwgb25seSBzdXBwb3J0cyBhIHNpbmdsZSAnICtcbiAgICAgICAgICAnIHN0cmVhbSB3aGljaCBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIHNwZWNpZmllZCB0cmFjay4nLFxuICAgICAgICAgICdOb3RTdXBwb3J0ZWRFcnJvcicpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhbHJlYWR5RXhpc3RzID0gdGhpcy5nZXRTZW5kZXJzKCkuZmluZChzID0+IHMudHJhY2sgPT09IHRyYWNrKTtcbiAgICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1RyYWNrIGFscmVhZHkgZXhpc3RzLicsXG4gICAgICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3N0cmVhbXMgPSB0aGlzLl9zdHJlYW1zIHx8IHt9O1xuICAgICAgdGhpcy5fcmV2ZXJzZVN0cmVhbXMgPSB0aGlzLl9yZXZlcnNlU3RyZWFtcyB8fCB7fTtcbiAgICAgIGNvbnN0IG9sZFN0cmVhbSA9IHRoaXMuX3N0cmVhbXNbc3RyZWFtLmlkXTtcbiAgICAgIGlmIChvbGRTdHJlYW0pIHtcbiAgICAgICAgLy8gdGhpcyBpcyB1c2luZyBvZGQgQ2hyb21lIGJlaGF2aW91ciwgdXNlIHdpdGggY2F1dGlvbjpcbiAgICAgICAgLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3dlYnJ0Yy9pc3N1ZXMvZGV0YWlsP2lkPTc4MTVcbiAgICAgICAgLy8gTm90ZTogd2UgcmVseSBvbiB0aGUgaGlnaC1sZXZlbCBhZGRUcmFjay9kdG1mIHNoaW0gdG9cbiAgICAgICAgLy8gY3JlYXRlIHRoZSBzZW5kZXIgd2l0aCBhIGR0bWYgc2VuZGVyLlxuICAgICAgICBvbGRTdHJlYW0uYWRkVHJhY2sodHJhY2spO1xuXG4gICAgICAgIC8vIFRyaWdnZXIgT05OIGFzeW5jLlxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCduZWdvdGlhdGlvbm5lZWRlZCcpKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBuZXdTdHJlYW0gPSBuZXcgd2luZG93Lk1lZGlhU3RyZWFtKFt0cmFja10pO1xuICAgICAgICB0aGlzLl9zdHJlYW1zW3N0cmVhbS5pZF0gPSBuZXdTdHJlYW07XG4gICAgICAgIHRoaXMuX3JldmVyc2VTdHJlYW1zW25ld1N0cmVhbS5pZF0gPSBzdHJlYW07XG4gICAgICAgIHRoaXMuYWRkU3RyZWFtKG5ld1N0cmVhbSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5nZXRTZW5kZXJzKCkuZmluZChzID0+IHMudHJhY2sgPT09IHRyYWNrKTtcbiAgICB9O1xuXG4gIC8vIHJlcGxhY2UgdGhlIGludGVybmFsIHN0cmVhbSBpZCB3aXRoIHRoZSBleHRlcm5hbCBvbmUgYW5kXG4gIC8vIHZpY2UgdmVyc2EuXG4gIGZ1bmN0aW9uIHJlcGxhY2VJbnRlcm5hbFN0cmVhbUlkKHBjLCBkZXNjcmlwdGlvbikge1xuICAgIGxldCBzZHAgPSBkZXNjcmlwdGlvbi5zZHA7XG4gICAgT2JqZWN0LmtleXMocGMuX3JldmVyc2VTdHJlYW1zIHx8IFtdKS5mb3JFYWNoKGludGVybmFsSWQgPT4ge1xuICAgICAgY29uc3QgZXh0ZXJuYWxTdHJlYW0gPSBwYy5fcmV2ZXJzZVN0cmVhbXNbaW50ZXJuYWxJZF07XG4gICAgICBjb25zdCBpbnRlcm5hbFN0cmVhbSA9IHBjLl9zdHJlYW1zW2V4dGVybmFsU3RyZWFtLmlkXTtcbiAgICAgIHNkcCA9IHNkcC5yZXBsYWNlKG5ldyBSZWdFeHAoaW50ZXJuYWxTdHJlYW0uaWQsICdnJyksXG4gICAgICAgICAgZXh0ZXJuYWxTdHJlYW0uaWQpO1xuICAgIH0pO1xuICAgIHJldHVybiBuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHtcbiAgICAgIHR5cGU6IGRlc2NyaXB0aW9uLnR5cGUsXG4gICAgICBzZHBcbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiByZXBsYWNlRXh0ZXJuYWxTdHJlYW1JZChwYywgZGVzY3JpcHRpb24pIHtcbiAgICBsZXQgc2RwID0gZGVzY3JpcHRpb24uc2RwO1xuICAgIE9iamVjdC5rZXlzKHBjLl9yZXZlcnNlU3RyZWFtcyB8fCBbXSkuZm9yRWFjaChpbnRlcm5hbElkID0+IHtcbiAgICAgIGNvbnN0IGV4dGVybmFsU3RyZWFtID0gcGMuX3JldmVyc2VTdHJlYW1zW2ludGVybmFsSWRdO1xuICAgICAgY29uc3QgaW50ZXJuYWxTdHJlYW0gPSBwYy5fc3RyZWFtc1tleHRlcm5hbFN0cmVhbS5pZF07XG4gICAgICBzZHAgPSBzZHAucmVwbGFjZShuZXcgUmVnRXhwKGV4dGVybmFsU3RyZWFtLmlkLCAnZycpLFxuICAgICAgICAgIGludGVybmFsU3RyZWFtLmlkKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7XG4gICAgICB0eXBlOiBkZXNjcmlwdGlvbi50eXBlLFxuICAgICAgc2RwXG4gICAgfSk7XG4gIH1cbiAgWydjcmVhdGVPZmZlcicsICdjcmVhdGVBbnN3ZXInXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgIGNvbnN0IG5hdGl2ZU1ldGhvZCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTtcbiAgICBjb25zdCBtZXRob2RPYmogPSB7W21ldGhvZF0oKSB7XG4gICAgICBjb25zdCBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgY29uc3QgaXNMZWdhY3lDYWxsID0gYXJndW1lbnRzLmxlbmd0aCAmJlxuICAgICAgICAgIHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdmdW5jdGlvbic7XG4gICAgICBpZiAoaXNMZWdhY3lDYWxsKSB7XG4gICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgW1xuICAgICAgICAgIChkZXNjcmlwdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGVzYyA9IHJlcGxhY2VJbnRlcm5hbFN0cmVhbUlkKHRoaXMsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIGFyZ3NbMF0uYXBwbHkobnVsbCwgW2Rlc2NdKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIChlcnIpID0+IHtcbiAgICAgICAgICAgIGlmIChhcmdzWzFdKSB7XG4gICAgICAgICAgICAgIGFyZ3NbMV0uYXBwbHkobnVsbCwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBhcmd1bWVudHNbMl1cbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICAgIC50aGVuKGRlc2NyaXB0aW9uID0+IHJlcGxhY2VJbnRlcm5hbFN0cmVhbUlkKHRoaXMsIGRlc2NyaXB0aW9uKSk7XG4gICAgfX07XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gbWV0aG9kT2JqW21ldGhvZF07XG4gIH0pO1xuXG4gIGNvbnN0IG9yaWdTZXRMb2NhbERlc2NyaXB0aW9uID1cbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbjtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uID1cbiAgICBmdW5jdGlvbiBzZXRMb2NhbERlc2NyaXB0aW9uKCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoIHx8ICFhcmd1bWVudHNbMF0udHlwZSkge1xuICAgICAgICByZXR1cm4gb3JpZ1NldExvY2FsRGVzY3JpcHRpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICAgIGFyZ3VtZW50c1swXSA9IHJlcGxhY2VFeHRlcm5hbFN0cmVhbUlkKHRoaXMsIGFyZ3VtZW50c1swXSk7XG4gICAgICByZXR1cm4gb3JpZ1NldExvY2FsRGVzY3JpcHRpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gIC8vIFRPRE86IG1hbmdsZSBnZXRTdGF0czogaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYnJ0Yy1zdGF0cy8jZG9tLXJ0Y21lZGlhc3RyZWFtc3RhdHMtc3RyZWFtaWRlbnRpZmllclxuXG4gIGNvbnN0IG9yaWdMb2NhbERlc2NyaXB0aW9uID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdsb2NhbERlc2NyaXB0aW9uJyk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFxuICAgICAgJ2xvY2FsRGVzY3JpcHRpb24nLCB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IG9yaWdMb2NhbERlc2NyaXB0aW9uLmdldC5hcHBseSh0aGlzKTtcbiAgICAgICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJycpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlcGxhY2VJbnRlcm5hbFN0cmVhbUlkKHRoaXMsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjayA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlVHJhY2soc2VuZGVyKSB7XG4gICAgICBpZiAodGhpcy5zaWduYWxpbmdTdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcbiAgICAgICAgICAnVGhlIFJUQ1BlZXJDb25uZWN0aW9uXFwncyBzaWduYWxpbmdTdGF0ZSBpcyBcXCdjbG9zZWRcXCcuJyxcbiAgICAgICAgICAnSW52YWxpZFN0YXRlRXJyb3InKTtcbiAgICAgIH1cbiAgICAgIC8vIFdlIGNhbiBub3QgeWV0IGNoZWNrIGZvciBzZW5kZXIgaW5zdGFuY2VvZiBSVENSdHBTZW5kZXJcbiAgICAgIC8vIHNpbmNlIHdlIHNoaW0gUlRQU2VuZGVyLiBTbyB3ZSBjaGVjayBpZiBzZW5kZXIuX3BjIGlzIHNldC5cbiAgICAgIGlmICghc2VuZGVyLl9wYykge1xuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdBcmd1bWVudCAxIG9mIFJUQ1BlZXJDb25uZWN0aW9uLnJlbW92ZVRyYWNrICcgK1xuICAgICAgICAgICAgJ2RvZXMgbm90IGltcGxlbWVudCBpbnRlcmZhY2UgUlRDUnRwU2VuZGVyLicsICdUeXBlRXJyb3InKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlzTG9jYWwgPSBzZW5kZXIuX3BjID09PSB0aGlzO1xuICAgICAgaWYgKCFpc0xvY2FsKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1NlbmRlciB3YXMgbm90IGNyZWF0ZWQgYnkgdGhpcyBjb25uZWN0aW9uLicsXG4gICAgICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlYXJjaCBmb3IgdGhlIG5hdGl2ZSBzdHJlYW0gdGhlIHNlbmRlcnMgdHJhY2sgYmVsb25ncyB0by5cbiAgICAgIHRoaXMuX3N0cmVhbXMgPSB0aGlzLl9zdHJlYW1zIHx8IHt9O1xuICAgICAgbGV0IHN0cmVhbTtcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMuX3N0cmVhbXMpLmZvckVhY2goc3RyZWFtaWQgPT4ge1xuICAgICAgICBjb25zdCBoYXNUcmFjayA9IHRoaXMuX3N0cmVhbXNbc3RyZWFtaWRdLmdldFRyYWNrcygpXG4gICAgICAgICAgLmZpbmQodHJhY2sgPT4gc2VuZGVyLnRyYWNrID09PSB0cmFjayk7XG4gICAgICAgIGlmIChoYXNUcmFjaykge1xuICAgICAgICAgIHN0cmVhbSA9IHRoaXMuX3N0cmVhbXNbc3RyZWFtaWRdO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKHN0cmVhbSkge1xuICAgICAgICBpZiAoc3RyZWFtLmdldFRyYWNrcygpLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIC8vIGlmIHRoaXMgaXMgdGhlIGxhc3QgdHJhY2sgb2YgdGhlIHN0cmVhbSwgcmVtb3ZlIHRoZSBzdHJlYW0uIFRoaXNcbiAgICAgICAgICAvLyB0YWtlcyBjYXJlIG9mIGFueSBzaGltbWVkIF9zZW5kZXJzLlxuICAgICAgICAgIHRoaXMucmVtb3ZlU3RyZWFtKHRoaXMuX3JldmVyc2VTdHJlYW1zW3N0cmVhbS5pZF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJlbHlpbmcgb24gdGhlIHNhbWUgb2RkIGNocm9tZSBiZWhhdmlvdXIgYXMgYWJvdmUuXG4gICAgICAgICAgc3RyZWFtLnJlbW92ZVRyYWNrKHNlbmRlci50cmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbmVnb3RpYXRpb25uZWVkZWQnKSk7XG4gICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1QZWVyQ29ubmVjdGlvbih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKSB7XG4gIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmIHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbikge1xuICAgIC8vIHZlcnkgYmFzaWMgc3VwcG9ydCBmb3Igb2xkIHZlcnNpb25zLlxuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9IHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbjtcbiAgfVxuICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIHNoaW0gaW1wbGljaXQgY3JlYXRpb24gb2YgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uL1JUQ0ljZUNhbmRpZGF0ZVxuICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDUzKSB7XG4gICAgWydzZXRMb2NhbERlc2NyaXB0aW9uJywgJ3NldFJlbW90ZURlc2NyaXB0aW9uJywgJ2FkZEljZUNhbmRpZGF0ZSddXG4gICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgICAgIGNvbnN0IG5hdGl2ZU1ldGhvZCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTtcbiAgICAgICAgICBjb25zdCBtZXRob2RPYmogPSB7W21ldGhvZF0oKSB7XG4gICAgICAgICAgICBhcmd1bWVudHNbMF0gPSBuZXcgKChtZXRob2QgPT09ICdhZGRJY2VDYW5kaWRhdGUnKSA/XG4gICAgICAgICAgICAgICAgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSA6XG4gICAgICAgICAgICAgICAgd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoYXJndW1lbnRzWzBdKTtcbiAgICAgICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICB9fTtcbiAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBtZXRob2RPYmpbbWV0aG9kXTtcbiAgICAgICAgfSk7XG4gIH1cbn1cblxuLy8gQXR0ZW1wdCB0byBmaXggT05OIGluIHBsYW4tYiBtb2RlLlxuZXhwb3J0IGZ1bmN0aW9uIGZpeE5lZ290aWF0aW9uTmVlZGVkKHdpbmRvdywgYnJvd3NlckRldGFpbHMpIHtcbiAgdXRpbHMud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQod2luZG93LCAnbmVnb3RpYXRpb25uZWVkZWQnLCBlID0+IHtcbiAgICBjb25zdCBwYyA9IGUudGFyZ2V0O1xuICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNzIgfHwgKHBjLmdldENvbmZpZ3VyYXRpb24gJiZcbiAgICAgICAgcGMuZ2V0Q29uZmlndXJhdGlvbigpLnNkcFNlbWFudGljcyA9PT0gJ3BsYW4tYicpKSB7XG4gICAgICBpZiAocGMuc2lnbmFsaW5nU3RhdGUgIT09ICdzdGFibGUnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGU7XG4gIH0pO1xufVxuIiwiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIGFkYXB0ZXIuanMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5leHBvcnQgZnVuY3Rpb24gc2hpbUdldERpc3BsYXlNZWRpYSh3aW5kb3csIGdldFNvdXJjZUlkKSB7XG4gIGlmICh3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJlxuICAgICdnZXREaXNwbGF5TWVkaWEnIGluIHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghKHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSkge1xuICAgIHJldHVybjtcbiAgfVxuICAvLyBnZXRTb3VyY2VJZCBpcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHByb21pc2UgcmVzb2x2aW5nIHdpdGhcbiAgLy8gdGhlIHNvdXJjZUlkIG9mIHRoZSBzY3JlZW4vd2luZG93L3RhYiB0byBiZSBzaGFyZWQuXG4gIGlmICh0eXBlb2YgZ2V0U291cmNlSWQgIT09ICdmdW5jdGlvbicpIHtcbiAgICBjb25zb2xlLmVycm9yKCdzaGltR2V0RGlzcGxheU1lZGlhOiBnZXRTb3VyY2VJZCBhcmd1bWVudCBpcyBub3QgJyArXG4gICAgICAgICdhIGZ1bmN0aW9uJyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSA9XG4gICAgZnVuY3Rpb24gZ2V0RGlzcGxheU1lZGlhKGNvbnN0cmFpbnRzKSB7XG4gICAgICByZXR1cm4gZ2V0U291cmNlSWQoY29uc3RyYWludHMpXG4gICAgICAgIC50aGVuKHNvdXJjZUlkID0+IHtcbiAgICAgICAgICBjb25zdCB3aWR0aFNwZWNpZmllZCA9IGNvbnN0cmFpbnRzLnZpZGVvICYmIGNvbnN0cmFpbnRzLnZpZGVvLndpZHRoO1xuICAgICAgICAgIGNvbnN0IGhlaWdodFNwZWNpZmllZCA9IGNvbnN0cmFpbnRzLnZpZGVvICYmXG4gICAgICAgICAgICBjb25zdHJhaW50cy52aWRlby5oZWlnaHQ7XG4gICAgICAgICAgY29uc3QgZnJhbWVSYXRlU3BlY2lmaWVkID0gY29uc3RyYWludHMudmlkZW8gJiZcbiAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvLmZyYW1lUmF0ZTtcbiAgICAgICAgICBjb25zdHJhaW50cy52aWRlbyA9IHtcbiAgICAgICAgICAgIG1hbmRhdG9yeToge1xuICAgICAgICAgICAgICBjaHJvbWVNZWRpYVNvdXJjZTogJ2Rlc2t0b3AnLFxuICAgICAgICAgICAgICBjaHJvbWVNZWRpYVNvdXJjZUlkOiBzb3VyY2VJZCxcbiAgICAgICAgICAgICAgbWF4RnJhbWVSYXRlOiBmcmFtZVJhdGVTcGVjaWZpZWQgfHwgM1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKHdpZHRoU3BlY2lmaWVkKSB7XG4gICAgICAgICAgICBjb25zdHJhaW50cy52aWRlby5tYW5kYXRvcnkubWF4V2lkdGggPSB3aWR0aFNwZWNpZmllZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGhlaWdodFNwZWNpZmllZCkge1xuICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8ubWFuZGF0b3J5Lm1heEhlaWdodCA9IGhlaWdodFNwZWNpZmllZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cyk7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG4iLCIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbi8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuY29uc3QgbG9nZ2luZyA9IHV0aWxzLmxvZztcblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1HZXRVc2VyTWVkaWEod2luZG93LCBicm93c2VyRGV0YWlscykge1xuICBjb25zdCBuYXZpZ2F0b3IgPSB3aW5kb3cgJiYgd2luZG93Lm5hdmlnYXRvcjtcblxuICBpZiAoIW5hdmlnYXRvci5tZWRpYURldmljZXMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBjb25zdHJhaW50c1RvQ2hyb21lXyA9IGZ1bmN0aW9uKGMpIHtcbiAgICBpZiAodHlwZW9mIGMgIT09ICdvYmplY3QnIHx8IGMubWFuZGF0b3J5IHx8IGMub3B0aW9uYWwpIHtcbiAgICAgIHJldHVybiBjO1xuICAgIH1cbiAgICBjb25zdCBjYyA9IHt9O1xuICAgIE9iamVjdC5rZXlzKGMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGlmIChrZXkgPT09ICdyZXF1aXJlJyB8fCBrZXkgPT09ICdhZHZhbmNlZCcgfHwga2V5ID09PSAnbWVkaWFTb3VyY2UnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHIgPSAodHlwZW9mIGNba2V5XSA9PT0gJ29iamVjdCcpID8gY1trZXldIDoge2lkZWFsOiBjW2tleV19O1xuICAgICAgaWYgKHIuZXhhY3QgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygci5leGFjdCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgci5taW4gPSByLm1heCA9IHIuZXhhY3Q7XG4gICAgICB9XG4gICAgICBjb25zdCBvbGRuYW1lXyA9IGZ1bmN0aW9uKHByZWZpeCwgbmFtZSkge1xuICAgICAgICBpZiAocHJlZml4KSB7XG4gICAgICAgICAgcmV0dXJuIHByZWZpeCArIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmFtZSA9PT0gJ2RldmljZUlkJykgPyAnc291cmNlSWQnIDogbmFtZTtcbiAgICAgIH07XG4gICAgICBpZiAoci5pZGVhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNjLm9wdGlvbmFsID0gY2Mub3B0aW9uYWwgfHwgW107XG4gICAgICAgIGxldCBvYyA9IHt9O1xuICAgICAgICBpZiAodHlwZW9mIHIuaWRlYWwgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgb2Nbb2xkbmFtZV8oJ21pbicsIGtleSldID0gci5pZGVhbDtcbiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTtcbiAgICAgICAgICBvYyA9IHt9O1xuICAgICAgICAgIG9jW29sZG5hbWVfKCdtYXgnLCBrZXkpXSA9IHIuaWRlYWw7XG4gICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2Nbb2xkbmFtZV8oJycsIGtleSldID0gci5pZGVhbDtcbiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHIuZXhhY3QgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygci5leGFjdCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgY2MubWFuZGF0b3J5ID0gY2MubWFuZGF0b3J5IHx8IHt9O1xuICAgICAgICBjYy5tYW5kYXRvcnlbb2xkbmFtZV8oJycsIGtleSldID0gci5leGFjdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFsnbWluJywgJ21heCddLmZvckVhY2gobWl4ID0+IHtcbiAgICAgICAgICBpZiAoclttaXhdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNjLm1hbmRhdG9yeSA9IGNjLm1hbmRhdG9yeSB8fCB7fTtcbiAgICAgICAgICAgIGNjLm1hbmRhdG9yeVtvbGRuYW1lXyhtaXgsIGtleSldID0gclttaXhdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGMuYWR2YW5jZWQpIHtcbiAgICAgIGNjLm9wdGlvbmFsID0gKGNjLm9wdGlvbmFsIHx8IFtdKS5jb25jYXQoYy5hZHZhbmNlZCk7XG4gICAgfVxuICAgIHJldHVybiBjYztcbiAgfTtcblxuICBjb25zdCBzaGltQ29uc3RyYWludHNfID0gZnVuY3Rpb24oY29uc3RyYWludHMsIGZ1bmMpIHtcbiAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA+PSA2MSkge1xuICAgICAgcmV0dXJuIGZ1bmMoY29uc3RyYWludHMpO1xuICAgIH1cbiAgICBjb25zdHJhaW50cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICBpZiAoY29uc3RyYWludHMgJiYgdHlwZW9mIGNvbnN0cmFpbnRzLmF1ZGlvID09PSAnb2JqZWN0Jykge1xuICAgICAgY29uc3QgcmVtYXAgPSBmdW5jdGlvbihvYmosIGEsIGIpIHtcbiAgICAgICAgaWYgKGEgaW4gb2JqICYmICEoYiBpbiBvYmopKSB7XG4gICAgICAgICAgb2JqW2JdID0gb2JqW2FdO1xuICAgICAgICAgIGRlbGV0ZSBvYmpbYV07XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjb25zdHJhaW50cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICAgIHJlbWFwKGNvbnN0cmFpbnRzLmF1ZGlvLCAnYXV0b0dhaW5Db250cm9sJywgJ2dvb2dBdXRvR2FpbkNvbnRyb2wnKTtcbiAgICAgIHJlbWFwKGNvbnN0cmFpbnRzLmF1ZGlvLCAnbm9pc2VTdXBwcmVzc2lvbicsICdnb29nTm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgY29uc3RyYWludHMuYXVkaW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy5hdWRpbyk7XG4gICAgfVxuICAgIGlmIChjb25zdHJhaW50cyAmJiB0eXBlb2YgY29uc3RyYWludHMudmlkZW8gPT09ICdvYmplY3QnKSB7XG4gICAgICAvLyBTaGltIGZhY2luZ01vZGUgZm9yIG1vYmlsZSAmIHN1cmZhY2UgcHJvLlxuICAgICAgbGV0IGZhY2UgPSBjb25zdHJhaW50cy52aWRlby5mYWNpbmdNb2RlO1xuICAgICAgZmFjZSA9IGZhY2UgJiYgKCh0eXBlb2YgZmFjZSA9PT0gJ29iamVjdCcpID8gZmFjZSA6IHtpZGVhbDogZmFjZX0pO1xuICAgICAgY29uc3QgZ2V0U3VwcG9ydGVkRmFjaW5nTW9kZUxpZXMgPSBicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNjY7XG5cbiAgICAgIGlmICgoZmFjZSAmJiAoZmFjZS5leGFjdCA9PT0gJ3VzZXInIHx8IGZhY2UuZXhhY3QgPT09ICdlbnZpcm9ubWVudCcgfHxcbiAgICAgICAgICAgICAgICAgICAgZmFjZS5pZGVhbCA9PT0gJ3VzZXInIHx8IGZhY2UuaWRlYWwgPT09ICdlbnZpcm9ubWVudCcpKSAmJlxuICAgICAgICAgICEobmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cyAmJlxuICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpLmZhY2luZ01vZGUgJiZcbiAgICAgICAgICAgICFnZXRTdXBwb3J0ZWRGYWNpbmdNb2RlTGllcykpIHtcbiAgICAgICAgZGVsZXRlIGNvbnN0cmFpbnRzLnZpZGVvLmZhY2luZ01vZGU7XG4gICAgICAgIGxldCBtYXRjaGVzO1xuICAgICAgICBpZiAoZmFjZS5leGFjdCA9PT0gJ2Vudmlyb25tZW50JyB8fCBmYWNlLmlkZWFsID09PSAnZW52aXJvbm1lbnQnKSB7XG4gICAgICAgICAgbWF0Y2hlcyA9IFsnYmFjaycsICdyZWFyJ107XG4gICAgICAgIH0gZWxzZSBpZiAoZmFjZS5leGFjdCA9PT0gJ3VzZXInIHx8IGZhY2UuaWRlYWwgPT09ICd1c2VyJykge1xuICAgICAgICAgIG1hdGNoZXMgPSBbJ2Zyb250J107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICAvLyBMb29rIGZvciBtYXRjaGVzIGluIGxhYmVsLCBvciB1c2UgbGFzdCBjYW0gZm9yIGJhY2sgKHR5cGljYWwpLlxuICAgICAgICAgIHJldHVybiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKVxuICAgICAgICAgIC50aGVuKGRldmljZXMgPT4ge1xuICAgICAgICAgICAgZGV2aWNlcyA9IGRldmljZXMuZmlsdGVyKGQgPT4gZC5raW5kID09PSAndmlkZW9pbnB1dCcpO1xuICAgICAgICAgICAgbGV0IGRldiA9IGRldmljZXMuZmluZChkID0+IG1hdGNoZXMuc29tZShtYXRjaCA9PlxuICAgICAgICAgICAgICBkLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobWF0Y2gpKSk7XG4gICAgICAgICAgICBpZiAoIWRldiAmJiBkZXZpY2VzLmxlbmd0aCAmJiBtYXRjaGVzLmluY2x1ZGVzKCdiYWNrJykpIHtcbiAgICAgICAgICAgICAgZGV2ID0gZGV2aWNlc1tkZXZpY2VzLmxlbmd0aCAtIDFdOyAvLyBtb3JlIGxpa2VseSB0aGUgYmFjayBjYW1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkZXYpIHtcbiAgICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8uZGV2aWNlSWQgPSBmYWNlLmV4YWN0ID8ge2V4YWN0OiBkZXYuZGV2aWNlSWR9IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2lkZWFsOiBkZXYuZGV2aWNlSWR9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy52aWRlbyk7XG4gICAgICAgICAgICBsb2dnaW5nKCdjaHJvbWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmMoY29uc3RyYWludHMpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdHJhaW50cy52aWRlbyA9IGNvbnN0cmFpbnRzVG9DaHJvbWVfKGNvbnN0cmFpbnRzLnZpZGVvKTtcbiAgICB9XG4gICAgbG9nZ2luZygnY2hyb21lOiAnICsgSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICByZXR1cm4gZnVuYyhjb25zdHJhaW50cyk7XG4gIH07XG5cbiAgY29uc3Qgc2hpbUVycm9yXyA9IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA+PSA2NCkge1xuICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB7XG4gICAgICAgIFBlcm1pc3Npb25EZW5pZWRFcnJvcjogJ05vdEFsbG93ZWRFcnJvcicsXG4gICAgICAgIFBlcm1pc3Npb25EaXNtaXNzZWRFcnJvcjogJ05vdEFsbG93ZWRFcnJvcicsXG4gICAgICAgIEludmFsaWRTdGF0ZUVycm9yOiAnTm90QWxsb3dlZEVycm9yJyxcbiAgICAgICAgRGV2aWNlc05vdEZvdW5kRXJyb3I6ICdOb3RGb3VuZEVycm9yJyxcbiAgICAgICAgQ29uc3RyYWludE5vdFNhdGlzZmllZEVycm9yOiAnT3ZlcmNvbnN0cmFpbmVkRXJyb3InLFxuICAgICAgICBUcmFja1N0YXJ0RXJyb3I6ICdOb3RSZWFkYWJsZUVycm9yJyxcbiAgICAgICAgTWVkaWFEZXZpY2VGYWlsZWREdWVUb1NodXRkb3duOiAnTm90QWxsb3dlZEVycm9yJyxcbiAgICAgICAgTWVkaWFEZXZpY2VLaWxsU3dpdGNoT246ICdOb3RBbGxvd2VkRXJyb3InLFxuICAgICAgICBUYWJDYXB0dXJlRXJyb3I6ICdBYm9ydEVycm9yJyxcbiAgICAgICAgU2NyZWVuQ2FwdHVyZUVycm9yOiAnQWJvcnRFcnJvcicsXG4gICAgICAgIERldmljZUNhcHR1cmVFcnJvcjogJ0Fib3J0RXJyb3InXG4gICAgICB9W2UubmFtZV0gfHwgZS5uYW1lLFxuICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLFxuICAgICAgY29uc3RyYWludDogZS5jb25zdHJhaW50IHx8IGUuY29uc3RyYWludE5hbWUsXG4gICAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZSArICh0aGlzLm1lc3NhZ2UgJiYgJzogJykgKyB0aGlzLm1lc3NhZ2U7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICBjb25zdCBnZXRVc2VyTWVkaWFfID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgIHNoaW1Db25zdHJhaW50c18oY29uc3RyYWludHMsIGMgPT4ge1xuICAgICAgbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYShjLCBvblN1Y2Nlc3MsIGUgPT4ge1xuICAgICAgICBpZiAob25FcnJvcikge1xuICAgICAgICAgIG9uRXJyb3Ioc2hpbUVycm9yXyhlKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gZ2V0VXNlck1lZGlhXy5iaW5kKG5hdmlnYXRvcik7XG5cbiAgLy8gRXZlbiB0aG91Z2ggQ2hyb21lIDQ1IGhhcyBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzIGFuZCBhIGdldFVzZXJNZWRpYVxuICAvLyBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgUHJvbWlzZSwgaXQgZG9lcyBub3QgYWNjZXB0IHNwZWMtc3R5bGVcbiAgLy8gY29uc3RyYWludHMuXG4gIGlmIChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkge1xuICAgIGNvbnN0IG9yaWdHZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5cbiAgICAgICAgYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKGNzKSB7XG4gICAgICByZXR1cm4gc2hpbUNvbnN0cmFpbnRzXyhjcywgYyA9PiBvcmlnR2V0VXNlck1lZGlhKGMpLnRoZW4oc3RyZWFtID0+IHtcbiAgICAgICAgaWYgKGMuYXVkaW8gJiYgIXN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCB8fFxuICAgICAgICAgICAgYy52aWRlbyAmJiAhc3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoKSB7XG4gICAgICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgICAgICAgdHJhY2suc3RvcCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJycsICdOb3RGb3VuZEVycm9yJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICAgIH0sIGUgPT4gUHJvbWlzZS5yZWplY3Qoc2hpbUVycm9yXyhlKSkpKTtcbiAgICB9O1xuICB9XG59XG4iLCIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNyBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbi8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgU0RQVXRpbHMgZnJvbSAnc2RwJztcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2hpbVJUQ0ljZUNhbmRpZGF0ZSh3aW5kb3cpIHtcbiAgLy8gZm91bmRhdGlvbiBpcyBhcmJpdHJhcmlseSBjaG9zZW4gYXMgYW4gaW5kaWNhdG9yIGZvciBmdWxsIHN1cHBvcnQgZm9yXG4gIC8vIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJydGMtcGMvI3J0Y2ljZWNhbmRpZGF0ZS1pbnRlcmZhY2VcbiAgaWYgKCF3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlIHx8ICh3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlICYmICdmb3VuZGF0aW9uJyBpblxuICAgICAgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZS5wcm90b3R5cGUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgTmF0aXZlUlRDSWNlQ2FuZGlkYXRlID0gd2luZG93LlJUQ0ljZUNhbmRpZGF0ZTtcbiAgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uIFJUQ0ljZUNhbmRpZGF0ZShhcmdzKSB7XG4gICAgLy8gUmVtb3ZlIHRoZSBhPSB3aGljaCBzaG91bGRuJ3QgYmUgcGFydCBvZiB0aGUgY2FuZGlkYXRlIHN0cmluZy5cbiAgICBpZiAodHlwZW9mIGFyZ3MgPT09ICdvYmplY3QnICYmIGFyZ3MuY2FuZGlkYXRlICYmXG4gICAgICAgIGFyZ3MuY2FuZGlkYXRlLmluZGV4T2YoJ2E9JykgPT09IDApIHtcbiAgICAgIGFyZ3MgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGFyZ3MpKTtcbiAgICAgIGFyZ3MuY2FuZGlkYXRlID0gYXJncy5jYW5kaWRhdGUuc3Vic3RyKDIpO1xuICAgIH1cblxuICAgIGlmIChhcmdzLmNhbmRpZGF0ZSAmJiBhcmdzLmNhbmRpZGF0ZS5sZW5ndGgpIHtcbiAgICAgIC8vIEF1Z21lbnQgdGhlIG5hdGl2ZSBjYW5kaWRhdGUgd2l0aCB0aGUgcGFyc2VkIGZpZWxkcy5cbiAgICAgIGNvbnN0IG5hdGl2ZUNhbmRpZGF0ZSA9IG5ldyBOYXRpdmVSVENJY2VDYW5kaWRhdGUoYXJncyk7XG4gICAgICBjb25zdCBwYXJzZWRDYW5kaWRhdGUgPSBTRFBVdGlscy5wYXJzZUNhbmRpZGF0ZShhcmdzLmNhbmRpZGF0ZSk7XG4gICAgICBjb25zdCBhdWdtZW50ZWRDYW5kaWRhdGUgPSBPYmplY3QuYXNzaWduKG5hdGl2ZUNhbmRpZGF0ZSxcbiAgICAgICAgICBwYXJzZWRDYW5kaWRhdGUpO1xuXG4gICAgICAvLyBBZGQgYSBzZXJpYWxpemVyIHRoYXQgZG9lcyBub3Qgc2VyaWFsaXplIHRoZSBleHRyYSBhdHRyaWJ1dGVzLlxuICAgICAgYXVnbWVudGVkQ2FuZGlkYXRlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjYW5kaWRhdGU6IGF1Z21lbnRlZENhbmRpZGF0ZS5jYW5kaWRhdGUsXG4gICAgICAgICAgc2RwTWlkOiBhdWdtZW50ZWRDYW5kaWRhdGUuc2RwTWlkLFxuICAgICAgICAgIHNkcE1MaW5lSW5kZXg6IGF1Z21lbnRlZENhbmRpZGF0ZS5zZHBNTGluZUluZGV4LFxuICAgICAgICAgIHVzZXJuYW1lRnJhZ21lbnQ6IGF1Z21lbnRlZENhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50LFxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIHJldHVybiBhdWdtZW50ZWRDYW5kaWRhdGU7XG4gICAgfVxuICAgIHJldHVybiBuZXcgTmF0aXZlUlRDSWNlQ2FuZGlkYXRlKGFyZ3MpO1xuICB9O1xuICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlLnByb3RvdHlwZSA9IE5hdGl2ZVJUQ0ljZUNhbmRpZGF0ZS5wcm90b3R5cGU7XG5cbiAgLy8gSG9vayB1cCB0aGUgYXVnbWVudGVkIGNhbmRpZGF0ZSBpbiBvbmljZWNhbmRpZGF0ZSBhbmRcbiAgLy8gYWRkRXZlbnRMaXN0ZW5lcignaWNlY2FuZGlkYXRlJywgLi4uKVxuICB1dGlscy53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh3aW5kb3csICdpY2VjYW5kaWRhdGUnLCBlID0+IHtcbiAgICBpZiAoZS5jYW5kaWRhdGUpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCAnY2FuZGlkYXRlJywge1xuICAgICAgICB2YWx1ZTogbmV3IHdpbmRvdy5SVENJY2VDYW5kaWRhdGUoZS5jYW5kaWRhdGUpLFxuICAgICAgICB3cml0YWJsZTogJ2ZhbHNlJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBlO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1NYXhNZXNzYWdlU2l6ZSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKSB7XG4gIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCEoJ3NjdHAnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdzY3RwJywge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuX3NjdHAgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHRoaXMuX3NjdHA7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBzY3RwSW5EZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKGRlc2NyaXB0aW9uKSB7XG4gICAgaWYgKCFkZXNjcmlwdGlvbiB8fCAhZGVzY3JpcHRpb24uc2RwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhkZXNjcmlwdGlvbi5zZHApO1xuICAgIHNlY3Rpb25zLnNoaWZ0KCk7XG4gICAgcmV0dXJuIHNlY3Rpb25zLnNvbWUobWVkaWFTZWN0aW9uID0+IHtcbiAgICAgIGNvbnN0IG1MaW5lID0gU0RQVXRpbHMucGFyc2VNTGluZShtZWRpYVNlY3Rpb24pO1xuICAgICAgcmV0dXJuIG1MaW5lICYmIG1MaW5lLmtpbmQgPT09ICdhcHBsaWNhdGlvbidcbiAgICAgICAgICAmJiBtTGluZS5wcm90b2NvbC5pbmRleE9mKCdTQ1RQJykgIT09IC0xO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGdldFJlbW90ZUZpcmVmb3hWZXJzaW9uID0gZnVuY3Rpb24oZGVzY3JpcHRpb24pIHtcbiAgICAvLyBUT0RPOiBJcyB0aGVyZSBhIGJldHRlciBzb2x1dGlvbiBmb3IgZGV0ZWN0aW5nIEZpcmVmb3g/XG4gICAgY29uc3QgbWF0Y2ggPSBkZXNjcmlwdGlvbi5zZHAubWF0Y2goL21vemlsbGEuLi5USElTX0lTX1NEUEFSVEEtKFxcZCspLyk7XG4gICAgaWYgKG1hdGNoID09PSBudWxsIHx8IG1hdGNoLmxlbmd0aCA8IDIpIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgY29uc3QgdmVyc2lvbiA9IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7XG4gICAgLy8gVGVzdCBmb3IgTmFOICh5ZXMsIHRoaXMgaXMgdWdseSlcbiAgICByZXR1cm4gdmVyc2lvbiAhPT0gdmVyc2lvbiA/IC0xIDogdmVyc2lvbjtcbiAgfTtcblxuICBjb25zdCBnZXRDYW5TZW5kTWF4TWVzc2FnZVNpemUgPSBmdW5jdGlvbihyZW1vdGVJc0ZpcmVmb3gpIHtcbiAgICAvLyBFdmVyeSBpbXBsZW1lbnRhdGlvbiB3ZSBrbm93IGNhbiBzZW5kIGF0IGxlYXN0IDY0IEtpQi5cbiAgICAvLyBOb3RlOiBBbHRob3VnaCBDaHJvbWUgaXMgdGVjaG5pY2FsbHkgYWJsZSB0byBzZW5kIHVwIHRvIDI1NiBLaUIsIHRoZVxuICAgIC8vICAgICAgIGRhdGEgZG9lcyBub3QgcmVhY2ggdGhlIG90aGVyIHBlZXIgcmVsaWFibHkuXG4gICAgLy8gICAgICAgU2VlOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3Avd2VicnRjL2lzc3Vlcy9kZXRhaWw/aWQ9ODQxOVxuICAgIGxldCBjYW5TZW5kTWF4TWVzc2FnZVNpemUgPSA2NTUzNjtcbiAgICBpZiAoYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnKSB7XG4gICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDU3KSB7XG4gICAgICAgIGlmIChyZW1vdGVJc0ZpcmVmb3ggPT09IC0xKSB7XG4gICAgICAgICAgLy8gRkYgPCA1NyB3aWxsIHNlbmQgaW4gMTYgS2lCIGNodW5rcyB1c2luZyB0aGUgZGVwcmVjYXRlZCBQUElEXG4gICAgICAgICAgLy8gZnJhZ21lbnRhdGlvbi5cbiAgICAgICAgICBjYW5TZW5kTWF4TWVzc2FnZVNpemUgPSAxNjM4NDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBIb3dldmVyLCBvdGhlciBGRiAoYW5kIFJBV1JUQykgY2FuIHJlYXNzZW1ibGUgUFBJRC1mcmFnbWVudGVkXG4gICAgICAgICAgLy8gbWVzc2FnZXMuIFRodXMsIHN1cHBvcnRpbmcgfjIgR2lCIHdoZW4gc2VuZGluZy5cbiAgICAgICAgICBjYW5TZW5kTWF4TWVzc2FnZVNpemUgPSAyMTQ3NDgzNjM3O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA2MCkge1xuICAgICAgICAvLyBDdXJyZW50bHksIGFsbCBGRiA+PSA1NyB3aWxsIHJlc2V0IHRoZSByZW1vdGUgbWF4aW11bSBtZXNzYWdlIHNpemVcbiAgICAgICAgLy8gdG8gdGhlIGRlZmF1bHQgdmFsdWUgd2hlbiBhIGRhdGEgY2hhbm5lbCBpcyBjcmVhdGVkIGF0IGEgbGF0ZXJcbiAgICAgICAgLy8gc3RhZ2UuIDooXG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNjgzMVxuICAgICAgICBjYW5TZW5kTWF4TWVzc2FnZVNpemUgPVxuICAgICAgICAgIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPT09IDU3ID8gNjU1MzUgOiA2NTUzNjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZGID49IDYwIHN1cHBvcnRzIHNlbmRpbmcgfjIgR2lCXG4gICAgICAgIGNhblNlbmRNYXhNZXNzYWdlU2l6ZSA9IDIxNDc0ODM2Mzc7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjYW5TZW5kTWF4TWVzc2FnZVNpemU7XG4gIH07XG5cbiAgY29uc3QgZ2V0TWF4TWVzc2FnZVNpemUgPSBmdW5jdGlvbihkZXNjcmlwdGlvbiwgcmVtb3RlSXNGaXJlZm94KSB7XG4gICAgLy8gTm90ZTogNjU1MzYgYnl0ZXMgaXMgdGhlIGRlZmF1bHQgdmFsdWUgZnJvbSB0aGUgU0RQIHNwZWMuIEFsc28sXG4gICAgLy8gICAgICAgZXZlcnkgaW1wbGVtZW50YXRpb24gd2Uga25vdyBzdXBwb3J0cyByZWNlaXZpbmcgNjU1MzYgYnl0ZXMuXG4gICAgbGV0IG1heE1lc3NhZ2VTaXplID0gNjU1MzY7XG5cbiAgICAvLyBGRiA1NyBoYXMgYSBzbGlnaHRseSBpbmNvcnJlY3QgZGVmYXVsdCByZW1vdGUgbWF4IG1lc3NhZ2Ugc2l6ZSwgc29cbiAgICAvLyB3ZSBuZWVkIHRvIGFkanVzdCBpdCBoZXJlIHRvIGF2b2lkIGEgZmFpbHVyZSB3aGVuIHNlbmRpbmcuXG4gICAgLy8gU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDI1Njk3XG4gICAgaWYgKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdmaXJlZm94J1xuICAgICAgICAgJiYgYnJvd3NlckRldGFpbHMudmVyc2lvbiA9PT0gNTcpIHtcbiAgICAgIG1heE1lc3NhZ2VTaXplID0gNjU1MzU7XG4gICAgfVxuXG4gICAgY29uc3QgbWF0Y2ggPSBTRFBVdGlscy5tYXRjaFByZWZpeChkZXNjcmlwdGlvbi5zZHAsXG4gICAgICAnYT1tYXgtbWVzc2FnZS1zaXplOicpO1xuICAgIGlmIChtYXRjaC5sZW5ndGggPiAwKSB7XG4gICAgICBtYXhNZXNzYWdlU2l6ZSA9IHBhcnNlSW50KG1hdGNoWzBdLnN1YnN0cigxOSksIDEwKTtcbiAgICB9IGVsc2UgaWYgKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdmaXJlZm94JyAmJlxuICAgICAgICAgICAgICAgIHJlbW90ZUlzRmlyZWZveCAhPT0gLTEpIHtcbiAgICAgIC8vIElmIHRoZSBtYXhpbXVtIG1lc3NhZ2Ugc2l6ZSBpcyBub3QgcHJlc2VudCBpbiB0aGUgcmVtb3RlIFNEUCBhbmRcbiAgICAgIC8vIGJvdGggbG9jYWwgYW5kIHJlbW90ZSBhcmUgRmlyZWZveCwgdGhlIHJlbW90ZSBwZWVyIGNhbiByZWNlaXZlXG4gICAgICAvLyB+MiBHaUIuXG4gICAgICBtYXhNZXNzYWdlU2l6ZSA9IDIxNDc0ODM2Mzc7XG4gICAgfVxuICAgIHJldHVybiBtYXhNZXNzYWdlU2l6ZTtcbiAgfTtcblxuICBjb25zdCBvcmlnU2V0UmVtb3RlRGVzY3JpcHRpb24gPVxuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbiA9XG4gICAgZnVuY3Rpb24gc2V0UmVtb3RlRGVzY3JpcHRpb24oKSB7XG4gICAgICB0aGlzLl9zY3RwID0gbnVsbDtcbiAgICAgIC8vIENocm9tZSBkZWNpZGVkIHRvIG5vdCBleHBvc2UgLnNjdHAgaW4gcGxhbi1iIG1vZGUuXG4gICAgICAvLyBBcyB1c3VhbCwgYWRhcHRlci5qcyBoYXMgdG8gZG8gYW4gJ3VnbHkgd29yYWthcm91bmQnXG4gICAgICAvLyB0byBjb3ZlciB1cCB0aGUgbWVzcy5cbiAgICAgIGlmIChicm93c2VyRGV0YWlscy5icm93c2VyID09PSAnY2hyb21lJyAmJiBicm93c2VyRGV0YWlscy52ZXJzaW9uID49IDc2KSB7XG4gICAgICAgIGNvbnN0IHtzZHBTZW1hbnRpY3N9ID0gdGhpcy5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgICAgIGlmIChzZHBTZW1hbnRpY3MgPT09ICdwbGFuLWInKSB7XG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdzY3RwJywge1xuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuX3NjdHAgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHRoaXMuX3NjdHA7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc2N0cEluRGVzY3JpcHRpb24oYXJndW1lbnRzWzBdKSkge1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgcmVtb3RlIGlzIEZGLlxuICAgICAgICBjb25zdCBpc0ZpcmVmb3ggPSBnZXRSZW1vdGVGaXJlZm94VmVyc2lvbihhcmd1bWVudHNbMF0pO1xuXG4gICAgICAgIC8vIEdldCB0aGUgbWF4aW11bSBtZXNzYWdlIHNpemUgdGhlIGxvY2FsIHBlZXIgaXMgY2FwYWJsZSBvZiBzZW5kaW5nXG4gICAgICAgIGNvbnN0IGNhblNlbmRNTVMgPSBnZXRDYW5TZW5kTWF4TWVzc2FnZVNpemUoaXNGaXJlZm94KTtcblxuICAgICAgICAvLyBHZXQgdGhlIG1heGltdW0gbWVzc2FnZSBzaXplIG9mIHRoZSByZW1vdGUgcGVlci5cbiAgICAgICAgY29uc3QgcmVtb3RlTU1TID0gZ2V0TWF4TWVzc2FnZVNpemUoYXJndW1lbnRzWzBdLCBpc0ZpcmVmb3gpO1xuXG4gICAgICAgIC8vIERldGVybWluZSBmaW5hbCBtYXhpbXVtIG1lc3NhZ2Ugc2l6ZVxuICAgICAgICBsZXQgbWF4TWVzc2FnZVNpemU7XG4gICAgICAgIGlmIChjYW5TZW5kTU1TID09PSAwICYmIHJlbW90ZU1NUyA9PT0gMCkge1xuICAgICAgICAgIG1heE1lc3NhZ2VTaXplID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgICAgICB9IGVsc2UgaWYgKGNhblNlbmRNTVMgPT09IDAgfHwgcmVtb3RlTU1TID09PSAwKSB7XG4gICAgICAgICAgbWF4TWVzc2FnZVNpemUgPSBNYXRoLm1heChjYW5TZW5kTU1TLCByZW1vdGVNTVMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1heE1lc3NhZ2VTaXplID0gTWF0aC5taW4oY2FuU2VuZE1NUywgcmVtb3RlTU1TKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBhIGR1bW15IFJUQ1NjdHBUcmFuc3BvcnQgb2JqZWN0IGFuZCB0aGUgJ21heE1lc3NhZ2VTaXplJ1xuICAgICAgICAvLyBhdHRyaWJ1dGUuXG4gICAgICAgIGNvbnN0IHNjdHAgPSB7fTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNjdHAsICdtYXhNZXNzYWdlU2l6ZScsIHtcbiAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gbWF4TWVzc2FnZVNpemU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fc2N0cCA9IHNjdHA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvcmlnU2V0UmVtb3RlRGVzY3JpcHRpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbVNlbmRUaHJvd1R5cGVFcnJvcih3aW5kb3cpIHtcbiAgaWYgKCEod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmXG4gICAgICAnY3JlYXRlRGF0YUNoYW5uZWwnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gTm90ZTogQWx0aG91Z2ggRmlyZWZveCA+PSA1NyBoYXMgYSBuYXRpdmUgaW1wbGVtZW50YXRpb24sIHRoZSBtYXhpbXVtXG4gIC8vICAgICAgIG1lc3NhZ2Ugc2l6ZSBjYW4gYmUgcmVzZXQgZm9yIGFsbCBkYXRhIGNoYW5uZWxzIGF0IGEgbGF0ZXIgc3RhZ2UuXG4gIC8vICAgICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNjgzMVxuXG4gIGZ1bmN0aW9uIHdyYXBEY1NlbmQoZGMsIHBjKSB7XG4gICAgY29uc3Qgb3JpZ0RhdGFDaGFubmVsU2VuZCA9IGRjLnNlbmQ7XG4gICAgZGMuc2VuZCA9IGZ1bmN0aW9uIHNlbmQoKSB7XG4gICAgICBjb25zdCBkYXRhID0gYXJndW1lbnRzWzBdO1xuICAgICAgY29uc3QgbGVuZ3RoID0gZGF0YS5sZW5ndGggfHwgZGF0YS5zaXplIHx8IGRhdGEuYnl0ZUxlbmd0aDtcbiAgICAgIGlmIChkYy5yZWFkeVN0YXRlID09PSAnb3BlbicgJiZcbiAgICAgICAgICBwYy5zY3RwICYmIGxlbmd0aCA+IHBjLnNjdHAubWF4TWVzc2FnZVNpemUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTWVzc2FnZSB0b28gbGFyZ2UgKGNhbiBzZW5kIGEgbWF4aW11bSBvZiAnICtcbiAgICAgICAgICBwYy5zY3RwLm1heE1lc3NhZ2VTaXplICsgJyBieXRlcyknKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvcmlnRGF0YUNoYW5uZWxTZW5kLmFwcGx5KGRjLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH1cbiAgY29uc3Qgb3JpZ0NyZWF0ZURhdGFDaGFubmVsID1cbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZURhdGFDaGFubmVsO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZURhdGFDaGFubmVsID1cbiAgICBmdW5jdGlvbiBjcmVhdGVEYXRhQ2hhbm5lbCgpIHtcbiAgICAgIGNvbnN0IGRhdGFDaGFubmVsID0gb3JpZ0NyZWF0ZURhdGFDaGFubmVsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB3cmFwRGNTZW5kKGRhdGFDaGFubmVsLCB0aGlzKTtcbiAgICAgIHJldHVybiBkYXRhQ2hhbm5lbDtcbiAgICB9O1xuICB1dGlscy53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh3aW5kb3csICdkYXRhY2hhbm5lbCcsIGUgPT4ge1xuICAgIHdyYXBEY1NlbmQoZS5jaGFubmVsLCBlLnRhcmdldCk7XG4gICAgcmV0dXJuIGU7XG4gIH0pO1xufVxuXG5cbi8qIHNoaW1zIFJUQ0Nvbm5lY3Rpb25TdGF0ZSBieSBwcmV0ZW5kaW5nIGl0IGlzIHRoZSBzYW1lIGFzIGljZUNvbm5lY3Rpb25TdGF0ZS5cbiAqIFNlZSBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3Avd2VicnRjL2lzc3Vlcy9kZXRhaWw/aWQ9NjE0NSNjMTJcbiAqIGZvciB3aHkgdGhpcyBpcyBhIHZhbGlkIGhhY2sgaW4gQ2hyb21lLiBJbiBGaXJlZm94IGl0IGlzIHNsaWdodGx5IGluY29ycmVjdFxuICogc2luY2UgRFRMUyBmYWlsdXJlcyB3b3VsZCBiZSBoaWRkZW4uIFNlZVxuICogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTI2NTgyN1xuICogZm9yIHRoZSBGaXJlZm94IHRyYWNraW5nIGJ1Zy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNoaW1Db25uZWN0aW9uU3RhdGUod2luZG93KSB7XG4gIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uIHx8XG4gICAgICAnY29ubmVjdGlvblN0YXRlJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHByb3RvID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvLCAnY29ubmVjdGlvblN0YXRlJywge1xuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvbXBsZXRlZDogJ2Nvbm5lY3RlZCcsXG4gICAgICAgIGNoZWNraW5nOiAnY29ubmVjdGluZydcbiAgICAgIH1bdGhpcy5pY2VDb25uZWN0aW9uU3RhdGVdIHx8IHRoaXMuaWNlQ29ubmVjdGlvblN0YXRlO1xuICAgIH0sXG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgJ29uY29ubmVjdGlvbnN0YXRlY2hhbmdlJywge1xuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSB8fCBudWxsO1xuICAgIH0sXG4gICAgc2V0KGNiKSB7XG4gICAgICBpZiAodGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLFxuICAgICAgICAgICAgdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2UpO1xuICAgICAgICBkZWxldGUgdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2U7XG4gICAgICB9XG4gICAgICBpZiAoY2IpIHtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLFxuICAgICAgICAgICAgdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBjYik7XG4gICAgICB9XG4gICAgfSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcblxuICBbJ3NldExvY2FsRGVzY3JpcHRpb24nLCAnc2V0UmVtb3RlRGVzY3JpcHRpb24nXS5mb3JFYWNoKChtZXRob2QpID0+IHtcbiAgICBjb25zdCBvcmlnTWV0aG9kID0gcHJvdG9bbWV0aG9kXTtcbiAgICBwcm90b1ttZXRob2RdID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXRoaXMuX2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZXBvbHkpIHtcbiAgICAgICAgdGhpcy5fY29ubmVjdGlvbnN0YXRlY2hhbmdlcG9seSA9IGUgPT4ge1xuICAgICAgICAgIGNvbnN0IHBjID0gZS50YXJnZXQ7XG4gICAgICAgICAgaWYgKHBjLl9sYXN0Q29ubmVjdGlvblN0YXRlICE9PSBwYy5jb25uZWN0aW9uU3RhdGUpIHtcbiAgICAgICAgICAgIHBjLl9sYXN0Q29ubmVjdGlvblN0YXRlID0gcGMuY29ubmVjdGlvblN0YXRlO1xuICAgICAgICAgICAgY29uc3QgbmV3RXZlbnQgPSBuZXcgRXZlbnQoJ2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZScsIGUpO1xuICAgICAgICAgICAgcGMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZScsXG4gICAgICAgICAgdGhpcy5fY29ubmVjdGlvbnN0YXRlY2hhbmdlcG9seSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gb3JpZ01ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRXh0bWFwQWxsb3dNaXhlZCh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKSB7XG4gIC8qIHJlbW92ZSBhPWV4dG1hcC1hbGxvdy1taXhlZCBmb3Igd2VicnRjLm9yZyA8IE03MSAqL1xuICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2Nocm9tZScgJiYgYnJvd3NlckRldGFpbHMudmVyc2lvbiA+PSA3MSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ3NhZmFyaScgJiYgYnJvd3NlckRldGFpbHMudmVyc2lvbiA+PSA2MDUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgbmF0aXZlU1JEID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbiA9XG4gIGZ1bmN0aW9uIHNldFJlbW90ZURlc2NyaXB0aW9uKGRlc2MpIHtcbiAgICBpZiAoZGVzYyAmJiBkZXNjLnNkcCAmJiBkZXNjLnNkcC5pbmRleE9mKCdcXG5hPWV4dG1hcC1hbGxvdy1taXhlZCcpICE9PSAtMSkge1xuICAgICAgY29uc3Qgc2RwID0gZGVzYy5zZHAuc3BsaXQoJ1xcbicpLmZpbHRlcigobGluZSkgPT4ge1xuICAgICAgICByZXR1cm4gbGluZS50cmltKCkgIT09ICdhPWV4dG1hcC1hbGxvdy1taXhlZCc7XG4gICAgICB9KS5qb2luKCdcXG4nKTtcbiAgICAgIC8vIFNhZmFyaSBlbmZvcmNlcyByZWFkLW9ubHktbmVzcyBvZiBSVENTZXNzaW9uRGVzY3JpcHRpb24gZmllbGRzLlxuICAgICAgaWYgKHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24gJiZcbiAgICAgICAgICBkZXNjIGluc3RhbmNlb2Ygd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikge1xuICAgICAgICBhcmd1bWVudHNbMF0gPSBuZXcgd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7XG4gICAgICAgICAgdHlwZTogZGVzYy50eXBlLFxuICAgICAgICAgIHNkcCxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZXNjLnNkcCA9IHNkcDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5hdGl2ZVNSRC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUFkZEljZUNhbmRpZGF0ZU51bGxPckVtcHR5KHdpbmRvdywgYnJvd3NlckRldGFpbHMpIHtcbiAgLy8gU3VwcG9ydCBmb3IgYWRkSWNlQ2FuZGlkYXRlKG51bGwgb3IgdW5kZWZpbmVkKVxuICAvLyBhcyB3ZWxsIGFzIGFkZEljZUNhbmRpZGF0ZSh7Y2FuZGlkYXRlOiBcIlwiLCAuLi59KVxuICAvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD05Nzg1ODJcbiAgLy8gTm90ZTogbXVzdCBiZSBjYWxsZWQgYmVmb3JlIG90aGVyIHBvbHlmaWxscyB3aGljaCBjaGFuZ2UgdGhlIHNpZ25hdHVyZS5cbiAgaWYgKCEod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG5hdGl2ZUFkZEljZUNhbmRpZGF0ZSA9XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZTtcbiAgaWYgKCFuYXRpdmVBZGRJY2VDYW5kaWRhdGUgfHwgbmF0aXZlQWRkSWNlQ2FuZGlkYXRlLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZSA9XG4gICAgZnVuY3Rpb24gYWRkSWNlQ2FuZGlkYXRlKCkge1xuICAgICAgaWYgKCFhcmd1bWVudHNbMF0pIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50c1sxXSkge1xuICAgICAgICAgIGFyZ3VtZW50c1sxXS5hcHBseShudWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICB9XG4gICAgICAvLyBGaXJlZm94IDY4KyBlbWl0cyBhbmQgcHJvY2Vzc2VzIHtjYW5kaWRhdGU6IFwiXCIsIC4uLn0sIGlnbm9yZVxuICAgICAgLy8gaW4gb2xkZXIgdmVyc2lvbnMuXG4gICAgICAvLyBOYXRpdmUgc3VwcG9ydCBmb3IgaWdub3JpbmcgZXhpc3RzIGZvciBDaHJvbWUgTTc3Ky5cbiAgICAgIC8vIFNhZmFyaSBpZ25vcmVzIGFzIHdlbGwsIGV4YWN0IHZlcnNpb24gdW5rbm93biBidXQgd29ya3MgaW4gdGhlIHNhbWVcbiAgICAgIC8vIHZlcnNpb24gdGhhdCBhbHNvIGlnbm9yZXMgYWRkSWNlQ2FuZGlkYXRlKG51bGwpLlxuICAgICAgaWYgKCgoYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2Nocm9tZScgJiYgYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDc4KVxuICAgICAgICAgICB8fCAoYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnXG4gICAgICAgICAgICAgICAmJiBicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNjgpXG4gICAgICAgICAgIHx8IChicm93c2VyRGV0YWlscy5icm93c2VyID09PSAnc2FmYXJpJykpXG4gICAgICAgICAgJiYgYXJndW1lbnRzWzBdICYmIGFyZ3VtZW50c1swXS5jYW5kaWRhdGUgPT09ICcnKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuYXRpdmVBZGRJY2VDYW5kaWRhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuIiwiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4vKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHtmaWx0ZXJJY2VTZXJ2ZXJzfSBmcm9tICcuL2ZpbHRlcmljZXNlcnZlcnMnO1xuaW1wb3J0IHNoaW1SVENQZWVyQ29ubmVjdGlvbiBmcm9tICdydGNwZWVyY29ubmVjdGlvbi1zaGltJztcblxuZXhwb3J0IHtzaGltR2V0VXNlck1lZGlhfSBmcm9tICcuL2dldHVzZXJtZWRpYSc7XG5leHBvcnQge3NoaW1HZXREaXNwbGF5TWVkaWF9IGZyb20gJy4vZ2V0ZGlzcGxheW1lZGlhJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1QZWVyQ29ubmVjdGlvbih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKSB7XG4gIGlmICh3aW5kb3cuUlRDSWNlR2F0aGVyZXIpIHtcbiAgICBpZiAoIXdpbmRvdy5SVENJY2VDYW5kaWRhdGUpIHtcbiAgICAgIHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgPSBmdW5jdGlvbiBSVENJY2VDYW5kaWRhdGUoYXJncykge1xuICAgICAgICByZXR1cm4gYXJncztcbiAgICAgIH07XG4gICAgfVxuICAgIGlmICghd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikge1xuICAgICAgd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiA9IGZ1bmN0aW9uIFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihhcmdzKSB7XG4gICAgICAgIHJldHVybiBhcmdzO1xuICAgICAgfTtcbiAgICB9XG4gICAgLy8gdGhpcyBhZGRzIGFuIGFkZGl0aW9uYWwgZXZlbnQgbGlzdGVuZXIgdG8gTWVkaWFTdHJhY2tUcmFjayB0aGF0IHNpZ25hbHNcbiAgICAvLyB3aGVuIGEgdHJhY2tzIGVuYWJsZWQgcHJvcGVydHkgd2FzIGNoYW5nZWQuIFdvcmthcm91bmQgZm9yIGEgYnVnIGluXG4gICAgLy8gYWRkU3RyZWFtLCBzZWUgYmVsb3cuIE5vIGxvbmdlciByZXF1aXJlZCBpbiAxNTAyNStcbiAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDE1MDI1KSB7XG4gICAgICBjb25zdCBvcmlnTVNURW5hYmxlZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoXG4gICAgICAgICAgd2luZG93Lk1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLCAnZW5hYmxlZCcpO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5NZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZSwgJ2VuYWJsZWQnLCB7XG4gICAgICAgIHNldCh2YWx1ZSkge1xuICAgICAgICAgIG9yaWdNU1RFbmFibGVkLnNldC5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgICBjb25zdCBldiA9IG5ldyBFdmVudCgnZW5hYmxlZCcpO1xuICAgICAgICAgIGV2LmVuYWJsZWQgPSB2YWx1ZTtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXYpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBPUlRDIGRlZmluZXMgdGhlIERUTUYgc2VuZGVyIGEgYml0IGRpZmZlcmVudC5cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3czYy9vcnRjL2lzc3Vlcy83MTRcbiAgaWYgKHdpbmRvdy5SVENSdHBTZW5kZXIgJiYgISgnZHRtZicgaW4gd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLCAnZHRtZicsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2R0bWYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICh0aGlzLnRyYWNrLmtpbmQgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgIHRoaXMuX2R0bWYgPSBuZXcgd2luZG93LlJUQ0R0bWZTZW5kZXIodGhpcyk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRyYWNrLmtpbmQgPT09ICd2aWRlbycpIHtcbiAgICAgICAgICAgIHRoaXMuX2R0bWYgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZHRtZjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICAvLyBFZGdlIGN1cnJlbnRseSBvbmx5IGltcGxlbWVudHMgdGhlIFJUQ0R0bWZTZW5kZXIsIG5vdCB0aGVcbiAgLy8gUlRDRFRNRlNlbmRlciBhbGlhcy4gU2VlIGh0dHA6Ly9kcmFmdC5vcnRjLm9yZy8jcnRjZHRtZnNlbmRlcjIqXG4gIGlmICh3aW5kb3cuUlRDRHRtZlNlbmRlciAmJiAhd2luZG93LlJUQ0RUTUZTZW5kZXIpIHtcbiAgICB3aW5kb3cuUlRDRFRNRlNlbmRlciA9IHdpbmRvdy5SVENEdG1mU2VuZGVyO1xuICB9XG5cbiAgY29uc3QgUlRDUGVlckNvbm5lY3Rpb25TaGltID0gc2hpbVJUQ1BlZXJDb25uZWN0aW9uKHdpbmRvdyxcbiAgICAgIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24pO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbiBSVENQZWVyQ29ubmVjdGlvbihjb25maWcpIHtcbiAgICBpZiAoY29uZmlnICYmIGNvbmZpZy5pY2VTZXJ2ZXJzKSB7XG4gICAgICBjb25maWcuaWNlU2VydmVycyA9IGZpbHRlckljZVNlcnZlcnMoY29uZmlnLmljZVNlcnZlcnMsXG4gICAgICAgIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24pO1xuICAgICAgdXRpbHMubG9nKCdJQ0Ugc2VydmVycyBhZnRlciBmaWx0ZXJpbmc6JywgY29uZmlnLmljZVNlcnZlcnMpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFJUQ1BlZXJDb25uZWN0aW9uU2hpbShjb25maWcpO1xuICB9O1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlID0gUlRDUGVlckNvbm5lY3Rpb25TaGltLnByb3RvdHlwZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1SZXBsYWNlVHJhY2sod2luZG93KSB7XG4gIC8vIE9SVEMgaGFzIHJlcGxhY2VUcmFjayAtLSBodHRwczovL2dpdGh1Yi5jb20vdzNjL29ydGMvaXNzdWVzLzYxNFxuICBpZiAod2luZG93LlJUQ1J0cFNlbmRlciAmJlxuICAgICAgISgncmVwbGFjZVRyYWNrJyBpbiB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkpIHtcbiAgICB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5yZXBsYWNlVHJhY2sgPVxuICAgICAgICB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5zZXRUcmFjaztcbiAgfVxufVxuIiwiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4vKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi4vdXRpbHMnO1xuLy8gRWRnZSBkb2VzIG5vdCBsaWtlXG4vLyAxKSBzdHVuOiBmaWx0ZXJlZCBhZnRlciAxNDM5MyB1bmxlc3MgP3RyYW5zcG9ydD11ZHAgaXMgcHJlc2VudFxuLy8gMikgdHVybjogdGhhdCBkb2VzIG5vdCBoYXZlIGFsbCBvZiB0dXJuOmhvc3Q6cG9ydD90cmFuc3BvcnQ9dWRwXG4vLyAzKSB0dXJuOiB3aXRoIGlwdjYgYWRkcmVzc2VzXG4vLyA0KSB0dXJuOiBvY2N1cnJpbmcgbXVsaXBsZSB0aW1lc1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckljZVNlcnZlcnMoaWNlU2VydmVycywgZWRnZVZlcnNpb24pIHtcbiAgbGV0IGhhc1R1cm4gPSBmYWxzZTtcbiAgaWNlU2VydmVycyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaWNlU2VydmVycykpO1xuICByZXR1cm4gaWNlU2VydmVycy5maWx0ZXIoc2VydmVyID0+IHtcbiAgICBpZiAoc2VydmVyICYmIChzZXJ2ZXIudXJscyB8fCBzZXJ2ZXIudXJsKSkge1xuICAgICAgbGV0IHVybHMgPSBzZXJ2ZXIudXJscyB8fCBzZXJ2ZXIudXJsO1xuICAgICAgaWYgKHNlcnZlci51cmwgJiYgIXNlcnZlci51cmxzKSB7XG4gICAgICAgIHV0aWxzLmRlcHJlY2F0ZWQoJ1JUQ0ljZVNlcnZlci51cmwnLCAnUlRDSWNlU2VydmVyLnVybHMnKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlzU3RyaW5nID0gdHlwZW9mIHVybHMgPT09ICdzdHJpbmcnO1xuICAgICAgaWYgKGlzU3RyaW5nKSB7XG4gICAgICAgIHVybHMgPSBbdXJsc107XG4gICAgICB9XG4gICAgICB1cmxzID0gdXJscy5maWx0ZXIodXJsID0+IHtcbiAgICAgICAgLy8gZmlsdGVyIFNUVU4gdW5jb25kaXRpb25hbGx5LlxuICAgICAgICBpZiAodXJsLmluZGV4T2YoJ3N0dW46JykgPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2YWxpZFR1cm4gPSB1cmwuc3RhcnRzV2l0aCgndHVybicpICYmXG4gICAgICAgICAgICAhdXJsLnN0YXJ0c1dpdGgoJ3R1cm46WycpICYmXG4gICAgICAgICAgICB1cmwuaW5jbHVkZXMoJ3RyYW5zcG9ydD11ZHAnKTtcbiAgICAgICAgaWYgKHZhbGlkVHVybiAmJiAhaGFzVHVybikge1xuICAgICAgICAgIGhhc1R1cm4gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWxpZFR1cm4gJiYgIWhhc1R1cm47XG4gICAgICB9KTtcblxuICAgICAgZGVsZXRlIHNlcnZlci51cmw7XG4gICAgICBzZXJ2ZXIudXJscyA9IGlzU3RyaW5nID8gdXJsc1swXSA6IHVybHM7XG4gICAgICByZXR1cm4gISF1cmxzLmxlbmd0aDtcbiAgICB9XG4gIH0pO1xufVxuIiwiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIGFkYXB0ZXIuanMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuIC8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUdldERpc3BsYXlNZWRpYSh3aW5kb3cpIHtcbiAgaWYgKCEoJ2dldERpc3BsYXlNZWRpYScgaW4gd2luZG93Lm5hdmlnYXRvcikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKCEod2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJlxuICAgICdnZXREaXNwbGF5TWVkaWEnIGluIHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSA9XG4gICAgd2luZG93Lm5hdmlnYXRvci5nZXREaXNwbGF5TWVkaWEuYmluZCh3aW5kb3cubmF2aWdhdG9yKTtcbn1cbiIsIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuIC8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUdldFVzZXJNZWRpYSh3aW5kb3cpIHtcbiAgY29uc3QgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7XG5cbiAgY29uc3Qgc2hpbUVycm9yXyA9IGZ1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZToge1Blcm1pc3Npb25EZW5pZWRFcnJvcjogJ05vdEFsbG93ZWRFcnJvcid9W2UubmFtZV0gfHwgZS5uYW1lLFxuICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLFxuICAgICAgY29uc3RyYWludDogZS5jb25zdHJhaW50LFxuICAgICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICAvLyBnZXRVc2VyTWVkaWEgZXJyb3Igc2hpbS5cbiAgY29uc3Qgb3JpZ0dldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLlxuICAgICAgYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTtcbiAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjKSB7XG4gICAgcmV0dXJuIG9yaWdHZXRVc2VyTWVkaWEoYykuY2F0Y2goZSA9PiBQcm9taXNlLnJlamVjdChzaGltRXJyb3JfKGUpKSk7XG4gIH07XG59XG4iLCIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbi8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuLi91dGlscyc7XG5leHBvcnQge3NoaW1HZXRVc2VyTWVkaWF9IGZyb20gJy4vZ2V0dXNlcm1lZGlhJztcbmV4cG9ydCB7c2hpbUdldERpc3BsYXlNZWRpYX0gZnJvbSAnLi9nZXRkaXNwbGF5bWVkaWEnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2hpbU9uVHJhY2sod2luZG93KSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDVHJhY2tFdmVudCAmJlxuICAgICAgKCdyZWNlaXZlcicgaW4gd2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlKSAmJlxuICAgICAgISgndHJhbnNjZWl2ZXInIGluIHdpbmRvdy5SVENUcmFja0V2ZW50LnByb3RvdHlwZSkpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlLCAndHJhbnNjZWl2ZXInLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB7cmVjZWl2ZXI6IHRoaXMucmVjZWl2ZXJ9O1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltUGVlckNvbm5lY3Rpb24od2luZG93LCBicm93c2VyRGV0YWlscykge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcgfHxcbiAgICAgICEod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uIHx8IHdpbmRvdy5tb3pSVENQZWVyQ29ubmVjdGlvbikpIHtcbiAgICByZXR1cm47IC8vIHByb2JhYmx5IG1lZGlhLnBlZXJjb25uZWN0aW9uLmVuYWJsZWQ9ZmFsc2UgaW4gYWJvdXQ6Y29uZmlnXG4gIH1cbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgd2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgLy8gdmVyeSBiYXNpYyBzdXBwb3J0IGZvciBvbGQgdmVyc2lvbnMuXG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID0gd2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uO1xuICB9XG5cbiAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA1Mykge1xuICAgIC8vIHNoaW0gYXdheSBuZWVkIGZvciBvYnNvbGV0ZSBSVENJY2VDYW5kaWRhdGUvUlRDU2Vzc2lvbkRlc2NyaXB0aW9uLlxuICAgIFsnc2V0TG9jYWxEZXNjcmlwdGlvbicsICdzZXRSZW1vdGVEZXNjcmlwdGlvbicsICdhZGRJY2VDYW5kaWRhdGUnXVxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgICBjb25zdCBuYXRpdmVNZXRob2QgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF07XG4gICAgICAgICAgY29uc3QgbWV0aG9kT2JqID0ge1ttZXRob2RdKCkge1xuICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gbmV3ICgobWV0aG9kID09PSAnYWRkSWNlQ2FuZGlkYXRlJykgP1xuICAgICAgICAgICAgICAgIHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgOlxuICAgICAgICAgICAgICAgIHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24pKGFyZ3VtZW50c1swXSk7XG4gICAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfX07XG4gICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gbWV0aG9kT2JqW21ldGhvZF07XG4gICAgICAgIH0pO1xuICB9XG5cbiAgY29uc3QgbW9kZXJuU3RhdHNUeXBlcyA9IHtcbiAgICBpbmJvdW5kcnRwOiAnaW5ib3VuZC1ydHAnLFxuICAgIG91dGJvdW5kcnRwOiAnb3V0Ym91bmQtcnRwJyxcbiAgICBjYW5kaWRhdGVwYWlyOiAnY2FuZGlkYXRlLXBhaXInLFxuICAgIGxvY2FsY2FuZGlkYXRlOiAnbG9jYWwtY2FuZGlkYXRlJyxcbiAgICByZW1vdGVjYW5kaWRhdGU6ICdyZW1vdGUtY2FuZGlkYXRlJ1xuICB9O1xuXG4gIGNvbnN0IG5hdGl2ZUdldFN0YXRzID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cztcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uIGdldFN0YXRzKCkge1xuICAgIGNvbnN0IFtzZWxlY3Rvciwgb25TdWNjLCBvbkVycl0gPSBhcmd1bWVudHM7XG4gICAgcmV0dXJuIG5hdGl2ZUdldFN0YXRzLmFwcGx5KHRoaXMsIFtzZWxlY3RvciB8fCBudWxsXSlcbiAgICAgIC50aGVuKHN0YXRzID0+IHtcbiAgICAgICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA1MyAmJiAhb25TdWNjKSB7XG4gICAgICAgICAgLy8gU2hpbSBvbmx5IHByb21pc2UgZ2V0U3RhdHMgd2l0aCBzcGVjLWh5cGhlbnMgaW4gdHlwZSBuYW1lc1xuICAgICAgICAgIC8vIExlYXZlIGNhbGxiYWNrIHZlcnNpb24gYWxvbmU7IG1pc2Mgb2xkIHVzZXMgb2YgZm9yRWFjaCBiZWZvcmUgTWFwXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN0YXRzLmZvckVhY2goc3RhdCA9PiB7XG4gICAgICAgICAgICAgIHN0YXQudHlwZSA9IG1vZGVyblN0YXRzVHlwZXNbc3RhdC50eXBlXSB8fCBzdGF0LnR5cGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5uYW1lICE9PSAnVHlwZUVycm9yJykge1xuICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQXZvaWQgVHlwZUVycm9yOiBcInR5cGVcIiBpcyByZWFkLW9ubHksIGluIG9sZCB2ZXJzaW9ucy4gMzQtNDNpc2hcbiAgICAgICAgICAgIHN0YXRzLmZvckVhY2goKHN0YXQsIGkpID0+IHtcbiAgICAgICAgICAgICAgc3RhdHMuc2V0KGksIE9iamVjdC5hc3NpZ24oe30sIHN0YXQsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBtb2Rlcm5TdGF0c1R5cGVzW3N0YXQudHlwZV0gfHwgc3RhdC50eXBlXG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdHM7XG4gICAgICB9KVxuICAgICAgLnRoZW4ob25TdWNjLCBvbkVycik7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltU2VuZGVyR2V0U3RhdHMod2luZG93KSB7XG4gIGlmICghKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJlxuICAgICAgd2luZG93LlJUQ1J0cFNlbmRlcikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHdpbmRvdy5SVENSdHBTZW5kZXIgJiYgJ2dldFN0YXRzJyBpbiB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBvcmlnR2V0U2VuZGVycyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycztcbiAgaWYgKG9yaWdHZXRTZW5kZXJzKSB7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzID0gZnVuY3Rpb24gZ2V0U2VuZGVycygpIHtcbiAgICAgIGNvbnN0IHNlbmRlcnMgPSBvcmlnR2V0U2VuZGVycy5hcHBseSh0aGlzLCBbXSk7XG4gICAgICBzZW5kZXJzLmZvckVhY2goc2VuZGVyID0+IHNlbmRlci5fcGMgPSB0aGlzKTtcbiAgICAgIHJldHVybiBzZW5kZXJzO1xuICAgIH07XG4gIH1cblxuICBjb25zdCBvcmlnQWRkVHJhY2sgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO1xuICBpZiAob3JpZ0FkZFRyYWNrKSB7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjayA9IGZ1bmN0aW9uIGFkZFRyYWNrKCkge1xuICAgICAgY29uc3Qgc2VuZGVyID0gb3JpZ0FkZFRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICBzZW5kZXIuX3BjID0gdGhpcztcbiAgICAgIHJldHVybiBzZW5kZXI7XG4gICAgfTtcbiAgfVxuICB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uIGdldFN0YXRzKCkge1xuICAgIHJldHVybiB0aGlzLnRyYWNrID8gdGhpcy5fcGMuZ2V0U3RhdHModGhpcy50cmFjaykgOlxuICAgICAgICBQcm9taXNlLnJlc29sdmUobmV3IE1hcCgpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1SZWNlaXZlckdldFN0YXRzKHdpbmRvdykge1xuICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiZcbiAgICAgIHdpbmRvdy5SVENSdHBTZW5kZXIpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh3aW5kb3cuUlRDUnRwU2VuZGVyICYmICdnZXRTdGF0cycgaW4gd2luZG93LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBvcmlnR2V0UmVjZWl2ZXJzID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM7XG4gIGlmIChvcmlnR2V0UmVjZWl2ZXJzKSB7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnMgPSBmdW5jdGlvbiBnZXRSZWNlaXZlcnMoKSB7XG4gICAgICBjb25zdCByZWNlaXZlcnMgPSBvcmlnR2V0UmVjZWl2ZXJzLmFwcGx5KHRoaXMsIFtdKTtcbiAgICAgIHJlY2VpdmVycy5mb3JFYWNoKHJlY2VpdmVyID0+IHJlY2VpdmVyLl9wYyA9IHRoaXMpO1xuICAgICAgcmV0dXJuIHJlY2VpdmVycztcbiAgICB9O1xuICB9XG4gIHV0aWxzLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgJ3RyYWNrJywgZSA9PiB7XG4gICAgZS5yZWNlaXZlci5fcGMgPSBlLnNyY0VsZW1lbnQ7XG4gICAgcmV0dXJuIGU7XG4gIH0pO1xuICB3aW5kb3cuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24gZ2V0U3RhdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BjLmdldFN0YXRzKHRoaXMudHJhY2spO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbVJlbW92ZVN0cmVhbSh3aW5kb3cpIHtcbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gfHxcbiAgICAgICdyZW1vdmVTdHJlYW0nIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW0gPVxuICAgIGZ1bmN0aW9uIHJlbW92ZVN0cmVhbShzdHJlYW0pIHtcbiAgICAgIHV0aWxzLmRlcHJlY2F0ZWQoJ3JlbW92ZVN0cmVhbScsICdyZW1vdmVUcmFjaycpO1xuICAgICAgdGhpcy5nZXRTZW5kZXJzKCkuZm9yRWFjaChzZW5kZXIgPT4ge1xuICAgICAgICBpZiAoc2VuZGVyLnRyYWNrICYmIHN0cmVhbS5nZXRUcmFja3MoKS5pbmNsdWRlcyhzZW5kZXIudHJhY2spKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVUcmFjayhzZW5kZXIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbVJUQ0RhdGFDaGFubmVsKHdpbmRvdykge1xuICAvLyByZW5hbWUgRGF0YUNoYW5uZWwgdG8gUlRDRGF0YUNoYW5uZWwgKG5hdGl2ZSBmaXggaW4gRkY2MCk6XG4gIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTExNzM4NTFcbiAgaWYgKHdpbmRvdy5EYXRhQ2hhbm5lbCAmJiAhd2luZG93LlJUQ0RhdGFDaGFubmVsKSB7XG4gICAgd2luZG93LlJUQ0RhdGFDaGFubmVsID0gd2luZG93LkRhdGFDaGFubmVsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltQWRkVHJhbnNjZWl2ZXIod2luZG93KSB7XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJydGNIYWNrcy9hZGFwdGVyL2lzc3Vlcy85OTgjaXNzdWVjb21tZW50LTUxNjkyMTY0N1xuICAvLyBGaXJlZm94IGlnbm9yZXMgdGhlIGluaXQgc2VuZEVuY29kaW5ncyBvcHRpb25zIHBhc3NlZCB0byBhZGRUcmFuc2NlaXZlclxuICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzk2OTE4XG4gIGlmICghKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgb3JpZ0FkZFRyYW5zY2VpdmVyID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFuc2NlaXZlcjtcbiAgaWYgKG9yaWdBZGRUcmFuc2NlaXZlcikge1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhbnNjZWl2ZXIgPVxuICAgICAgZnVuY3Rpb24gYWRkVHJhbnNjZWl2ZXIoKSB7XG4gICAgICAgIHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzID0gW107XG4gICAgICAgIGNvbnN0IGluaXRQYXJhbWV0ZXJzID0gYXJndW1lbnRzWzFdO1xuICAgICAgICBjb25zdCBzaG91bGRQZXJmb3JtQ2hlY2sgPSBpbml0UGFyYW1ldGVycyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzZW5kRW5jb2RpbmdzJyBpbiBpbml0UGFyYW1ldGVycztcbiAgICAgICAgaWYgKHNob3VsZFBlcmZvcm1DaGVjaykge1xuICAgICAgICAgIC8vIElmIHNlbmRFbmNvZGluZ3MgcGFyYW1zIGFyZSBwcm92aWRlZCwgdmFsaWRhdGUgZ3JhbW1hclxuICAgICAgICAgIGluaXRQYXJhbWV0ZXJzLnNlbmRFbmNvZGluZ3MuZm9yRWFjaCgoZW5jb2RpbmdQYXJhbSkgPT4ge1xuICAgICAgICAgICAgaWYgKCdyaWQnIGluIGVuY29kaW5nUGFyYW0pIHtcbiAgICAgICAgICAgICAgY29uc3QgcmlkUmVnZXggPSAvXlthLXowLTldezAsMTZ9JC9pO1xuICAgICAgICAgICAgICBpZiAoIXJpZFJlZ2V4LnRlc3QoZW5jb2RpbmdQYXJhbS5yaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBSSUQgdmFsdWUgcHJvdmlkZWQuJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgnc2NhbGVSZXNvbHV0aW9uRG93bkJ5JyBpbiBlbmNvZGluZ1BhcmFtKSB7XG4gICAgICAgICAgICAgIGlmICghKHBhcnNlRmxvYXQoZW5jb2RpbmdQYXJhbS5zY2FsZVJlc29sdXRpb25Eb3duQnkpID49IDEuMCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc2NhbGVfcmVzb2x1dGlvbl9kb3duX2J5IG11c3QgYmUgPj0gMS4wJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgnbWF4RnJhbWVyYXRlJyBpbiBlbmNvZGluZ1BhcmFtKSB7XG4gICAgICAgICAgICAgIGlmICghKHBhcnNlRmxvYXQoZW5jb2RpbmdQYXJhbS5tYXhGcmFtZXJhdGUpID49IDApKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ21heF9mcmFtZXJhdGUgbXVzdCBiZSA+PSAwLjAnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRyYW5zY2VpdmVyID0gb3JpZ0FkZFRyYW5zY2VpdmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIGlmIChzaG91bGRQZXJmb3JtQ2hlY2spIHtcbiAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgaW5pdCBvcHRpb25zIHdlcmUgYXBwbGllZC4gSWYgbm90IHdlIGRvIHRoaXMgaW4gYW5cbiAgICAgICAgICAvLyBhc3luY2hyb25vdXMgd2F5IGFuZCBzYXZlIHRoZSBwcm9taXNlIHJlZmVyZW5jZSBpbiBhIGdsb2JhbCBvYmplY3QuXG4gICAgICAgICAgLy8gVGhpcyBpcyBhbiB1Z2x5IGhhY2ssIGJ1dCBhdCB0aGUgc2FtZSB0aW1lIGlzIHdheSBtb3JlIHJvYnVzdCB0aGFuXG4gICAgICAgICAgLy8gY2hlY2tpbmcgdGhlIHNlbmRlciBwYXJhbWV0ZXJzIGJlZm9yZSBhbmQgYWZ0ZXIgdGhlIGNyZWF0ZU9mZmVyXG4gICAgICAgICAgLy8gQWxzbyBub3RlIHRoYXQgYWZ0ZXIgdGhlIGNyZWF0ZW9mZmVyIHdlIGFyZSBub3QgMTAwJSBzdXJlIHRoYXRcbiAgICAgICAgICAvLyB0aGUgcGFyYW1zIHdlcmUgYXN5bmNocm9ub3VzbHkgYXBwbGllZCBzbyB3ZSBtaWdodCBtaXNzIHRoZVxuICAgICAgICAgIC8vIG9wcG9ydHVuaXR5IHRvIHJlY3JlYXRlIG9mZmVyLlxuICAgICAgICAgIGNvbnN0IHtzZW5kZXJ9ID0gdHJhbnNjZWl2ZXI7XG4gICAgICAgICAgY29uc3QgcGFyYW1zID0gc2VuZGVyLmdldFBhcmFtZXRlcnMoKTtcbiAgICAgICAgICBpZiAoISgnZW5jb2RpbmdzJyBpbiBwYXJhbXMpIHx8XG4gICAgICAgICAgICAgIC8vIEF2b2lkIGJlaW5nIGZvb2xlZCBieSBwYXRjaGVkIGdldFBhcmFtZXRlcnMoKSBiZWxvdy5cbiAgICAgICAgICAgICAgKHBhcmFtcy5lbmNvZGluZ3MubGVuZ3RoID09PSAxICYmXG4gICAgICAgICAgICAgICBPYmplY3Qua2V5cyhwYXJhbXMuZW5jb2RpbmdzWzBdKS5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgICBwYXJhbXMuZW5jb2RpbmdzID0gaW5pdFBhcmFtZXRlcnMuc2VuZEVuY29kaW5ncztcbiAgICAgICAgICAgIHNlbmRlci5zZW5kRW5jb2RpbmdzID0gaW5pdFBhcmFtZXRlcnMuc2VuZEVuY29kaW5ncztcbiAgICAgICAgICAgIHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzLnB1c2goc2VuZGVyLnNldFBhcmFtZXRlcnMocGFyYW1zKVxuICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNlbmRlci5zZW5kRW5jb2RpbmdzO1xuICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNlbmRlci5zZW5kRW5jb2RpbmdzO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyO1xuICAgICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUdldFBhcmFtZXRlcnMod2luZG93KSB7XG4gIGlmICghKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENSdHBTZW5kZXIpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG9yaWdHZXRQYXJhbWV0ZXJzID0gd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUuZ2V0UGFyYW1ldGVycztcbiAgaWYgKG9yaWdHZXRQYXJhbWV0ZXJzKSB7XG4gICAgd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUuZ2V0UGFyYW1ldGVycyA9XG4gICAgICBmdW5jdGlvbiBnZXRQYXJhbWV0ZXJzKCkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBvcmlnR2V0UGFyYW1ldGVycy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICBpZiAoISgnZW5jb2RpbmdzJyBpbiBwYXJhbXMpKSB7XG4gICAgICAgICAgcGFyYW1zLmVuY29kaW5ncyA9IFtdLmNvbmNhdCh0aGlzLnNlbmRFbmNvZGluZ3MgfHwgW3t9XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1DcmVhdGVPZmZlcih3aW5kb3cpIHtcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3dlYnJ0Y0hhY2tzL2FkYXB0ZXIvaXNzdWVzLzk5OCNpc3N1ZWNvbW1lbnQtNTE2OTIxNjQ3XG4gIC8vIEZpcmVmb3ggaWdub3JlcyB0aGUgaW5pdCBzZW5kRW5jb2RpbmdzIG9wdGlvbnMgcGFzc2VkIHRvIGFkZFRyYW5zY2VpdmVyXG4gIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTEzOTY5MThcbiAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBvcmlnQ3JlYXRlT2ZmZXIgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyID0gZnVuY3Rpb24gY3JlYXRlT2ZmZXIoKSB7XG4gICAgaWYgKHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzICYmIHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICByZXR1cm4gb3JpZ0NyZWF0ZU9mZmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcyA9IFtdO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBvcmlnQ3JlYXRlT2ZmZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1DcmVhdGVBbnN3ZXIod2luZG93KSB7XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJydGNIYWNrcy9hZGFwdGVyL2lzc3Vlcy85OTgjaXNzdWVjb21tZW50LTUxNjkyMTY0N1xuICAvLyBGaXJlZm94IGlnbm9yZXMgdGhlIGluaXQgc2VuZEVuY29kaW5ncyBvcHRpb25zIHBhc3NlZCB0byBhZGRUcmFuc2NlaXZlclxuICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzk2OTE4XG4gIGlmICghKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgb3JpZ0NyZWF0ZUFuc3dlciA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlQW5zd2VyO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZUFuc3dlciA9IGZ1bmN0aW9uIGNyZWF0ZUFuc3dlcigpIHtcbiAgICBpZiAodGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMgJiYgdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwodGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiBvcmlnQ3JlYXRlQW5zd2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcyA9IFtdO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBvcmlnQ3JlYXRlQW5zd2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59XG4iLCIvKlxuICogIENvcHlyaWdodCAoYykgMjAxOCBUaGUgYWRhcHRlci5qcyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4vKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1HZXREaXNwbGF5TWVkaWEod2luZG93LCBwcmVmZXJyZWRNZWRpYVNvdXJjZSkge1xuICBpZiAod2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMgJiZcbiAgICAnZ2V0RGlzcGxheU1lZGlhJyBpbiB3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcykge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoISh3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcykpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgd2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhID1cbiAgICBmdW5jdGlvbiBnZXREaXNwbGF5TWVkaWEoY29uc3RyYWludHMpIHtcbiAgICAgIGlmICghKGNvbnN0cmFpbnRzICYmIGNvbnN0cmFpbnRzLnZpZGVvKSkge1xuICAgICAgICBjb25zdCBlcnIgPSBuZXcgRE9NRXhjZXB0aW9uKCdnZXREaXNwbGF5TWVkaWEgd2l0aG91dCB2aWRlbyAnICtcbiAgICAgICAgICAgICdjb25zdHJhaW50cyBpcyB1bmRlZmluZWQnKTtcbiAgICAgICAgZXJyLm5hbWUgPSAnTm90Rm91bmRFcnJvcic7XG4gICAgICAgIC8vIGZyb20gaHR0cHM6Ly9oZXljYW0uZ2l0aHViLmlvL3dlYmlkbC8jaWRsLURPTUV4Y2VwdGlvbi1lcnJvci1uYW1lc1xuICAgICAgICBlcnIuY29kZSA9IDg7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfVxuICAgICAgaWYgKGNvbnN0cmFpbnRzLnZpZGVvID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0ge21lZGlhU291cmNlOiBwcmVmZXJyZWRNZWRpYVNvdXJjZX07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdHJhaW50cy52aWRlby5tZWRpYVNvdXJjZSA9IHByZWZlcnJlZE1lZGlhU291cmNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cyk7XG4gICAgfTtcbn1cbiIsIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1HZXRVc2VyTWVkaWEod2luZG93LCBicm93c2VyRGV0YWlscykge1xuICBjb25zdCBuYXZpZ2F0b3IgPSB3aW5kb3cgJiYgd2luZG93Lm5hdmlnYXRvcjtcbiAgY29uc3QgTWVkaWFTdHJlYW1UcmFjayA9IHdpbmRvdyAmJiB3aW5kb3cuTWVkaWFTdHJlYW1UcmFjaztcblxuICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgIC8vIFJlcGxhY2UgRmlyZWZveCA0NCsncyBkZXByZWNhdGlvbiB3YXJuaW5nIHdpdGggdW5wcmVmaXhlZCB2ZXJzaW9uLlxuICAgIHV0aWxzLmRlcHJlY2F0ZWQoJ25hdmlnYXRvci5nZXRVc2VyTWVkaWEnLFxuICAgICAgICAnbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEnKTtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykudGhlbihvblN1Y2Nlc3MsIG9uRXJyb3IpO1xuICB9O1xuXG4gIGlmICghKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPiA1NSAmJlxuICAgICAgJ2F1dG9HYWluQ29udHJvbCcgaW4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpKSkge1xuICAgIGNvbnN0IHJlbWFwID0gZnVuY3Rpb24ob2JqLCBhLCBiKSB7XG4gICAgICBpZiAoYSBpbiBvYmogJiYgIShiIGluIG9iaikpIHtcbiAgICAgICAgb2JqW2JdID0gb2JqW2FdO1xuICAgICAgICBkZWxldGUgb2JqW2FdO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBuYXRpdmVHZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5cbiAgICAgICAgYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKGMpIHtcbiAgICAgIGlmICh0eXBlb2YgYyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGMuYXVkaW8gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGMpKTtcbiAgICAgICAgcmVtYXAoYy5hdWRpbywgJ2F1dG9HYWluQ29udHJvbCcsICdtb3pBdXRvR2FpbkNvbnRyb2wnKTtcbiAgICAgICAgcmVtYXAoYy5hdWRpbywgJ25vaXNlU3VwcHJlc3Npb24nLCAnbW96Tm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZUdldFVzZXJNZWRpYShjKTtcbiAgICB9O1xuXG4gICAgaWYgKE1lZGlhU3RyZWFtVHJhY2sgJiYgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuZ2V0U2V0dGluZ3MpIHtcbiAgICAgIGNvbnN0IG5hdGl2ZUdldFNldHRpbmdzID0gTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuZ2V0U2V0dGluZ3M7XG4gICAgICBNZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZS5nZXRTZXR0aW5ncyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCBvYmogPSBuYXRpdmVHZXRTZXR0aW5ncy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICByZW1hcChvYmosICdtb3pBdXRvR2FpbkNvbnRyb2wnLCAnYXV0b0dhaW5Db250cm9sJyk7XG4gICAgICAgIHJlbWFwKG9iaiwgJ21vek5vaXNlU3VwcHJlc3Npb24nLCAnbm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoTWVkaWFTdHJlYW1UcmFjayAmJiBNZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnRzKSB7XG4gICAgICBjb25zdCBuYXRpdmVBcHBseUNvbnN0cmFpbnRzID1cbiAgICAgICAgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50cztcbiAgICAgIE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludHMgPSBmdW5jdGlvbihjKSB7XG4gICAgICAgIGlmICh0aGlzLmtpbmQgPT09ICdhdWRpbycgJiYgdHlwZW9mIGMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgYyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYykpO1xuICAgICAgICAgIHJlbWFwKGMsICdhdXRvR2FpbkNvbnRyb2wnLCAnbW96QXV0b0dhaW5Db250cm9sJyk7XG4gICAgICAgICAgcmVtYXAoYywgJ25vaXNlU3VwcHJlc3Npb24nLCAnbW96Tm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuYXRpdmVBcHBseUNvbnN0cmFpbnRzLmFwcGx5KHRoaXMsIFtjXSk7XG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuIiwiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4ndXNlIHN0cmljdCc7XG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltTG9jYWxTdHJlYW1zQVBJKHdpbmRvdykge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcgfHwgIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoISgnZ2V0TG9jYWxTdHJlYW1zJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zID1cbiAgICAgIGZ1bmN0aW9uIGdldExvY2FsU3RyZWFtcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9sb2NhbFN0cmVhbXMpIHtcbiAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbG9jYWxTdHJlYW1zO1xuICAgICAgfTtcbiAgfVxuICBpZiAoISgnYWRkU3RyZWFtJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgIGNvbnN0IF9hZGRUcmFjayA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW0gPSBmdW5jdGlvbiBhZGRTdHJlYW0oc3RyZWFtKSB7XG4gICAgICBpZiAoIXRoaXMuX2xvY2FsU3RyZWFtcykge1xuICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMgPSBbXTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5fbG9jYWxTdHJlYW1zLmluY2x1ZGVzKHN0cmVhbSkpIHtcbiAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW1zLnB1c2goc3RyZWFtKTtcbiAgICAgIH1cbiAgICAgIC8vIFRyeSB0byBlbXVsYXRlIENocm9tZSdzIGJlaGF2aW91ciBvZiBhZGRpbmcgaW4gYXVkaW8tdmlkZW8gb3JkZXIuXG4gICAgICAvLyBTYWZhcmkgb3JkZXJzIGJ5IHRyYWNrIGlkLlxuICAgICAgc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiBfYWRkVHJhY2suY2FsbCh0aGlzLCB0cmFjayxcbiAgICAgICAgc3RyZWFtKSk7XG4gICAgICBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IF9hZGRUcmFjay5jYWxsKHRoaXMsIHRyYWNrLFxuICAgICAgICBzdHJlYW0pKTtcbiAgICB9O1xuXG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjayA9XG4gICAgICBmdW5jdGlvbiBhZGRUcmFjayh0cmFjaywgLi4uc3RyZWFtcykge1xuICAgICAgICBpZiAoc3RyZWFtcykge1xuICAgICAgICAgIHN0cmVhbXMuZm9yRWFjaCgoc3RyZWFtKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2xvY2FsU3RyZWFtcykge1xuICAgICAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMgPSBbc3RyZWFtXTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX2xvY2FsU3RyZWFtcy5pbmNsdWRlcyhzdHJlYW0pKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcy5wdXNoKHN0cmVhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9hZGRUcmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgfVxuICBpZiAoISgncmVtb3ZlU3RyZWFtJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID1cbiAgICAgIGZ1bmN0aW9uIHJlbW92ZVN0cmVhbShzdHJlYW0pIHtcbiAgICAgICAgaWYgKCF0aGlzLl9sb2NhbFN0cmVhbXMpIHtcbiAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX2xvY2FsU3RyZWFtcy5pbmRleE9mKHN0cmVhbSk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW1zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIGNvbnN0IHRyYWNrcyA9IHN0cmVhbS5nZXRUcmFja3MoKTtcbiAgICAgICAgdGhpcy5nZXRTZW5kZXJzKCkuZm9yRWFjaChzZW5kZXIgPT4ge1xuICAgICAgICAgIGlmICh0cmFja3MuaW5jbHVkZXMoc2VuZGVyLnRyYWNrKSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVUcmFjayhzZW5kZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltUmVtb3RlU3RyZWFtc0FQSSh3aW5kb3cpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICdvYmplY3QnIHx8ICF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKCEoJ2dldFJlbW90ZVN0cmVhbXMnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZW1vdGVTdHJlYW1zID1cbiAgICAgIGZ1bmN0aW9uIGdldFJlbW90ZVN0cmVhbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW1vdGVTdHJlYW1zID8gdGhpcy5fcmVtb3RlU3RyZWFtcyA6IFtdO1xuICAgICAgfTtcbiAgfVxuICBpZiAoISgnb25hZGRzdHJlYW0nIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdvbmFkZHN0cmVhbScsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uYWRkc3RyZWFtO1xuICAgICAgfSxcbiAgICAgIHNldChmKSB7XG4gICAgICAgIGlmICh0aGlzLl9vbmFkZHN0cmVhbSkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkc3RyZWFtJywgdGhpcy5fb25hZGRzdHJlYW0pO1xuICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbmFkZHN0cmVhbXBvbHkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignYWRkc3RyZWFtJywgdGhpcy5fb25hZGRzdHJlYW0gPSBmKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29uYWRkc3RyZWFtcG9seSA9IChlKSA9PiB7XG4gICAgICAgICAgZS5zdHJlYW1zLmZvckVhY2goc3RyZWFtID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fcmVtb3RlU3RyZWFtcykge1xuICAgICAgICAgICAgICB0aGlzLl9yZW1vdGVTdHJlYW1zID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5fcmVtb3RlU3RyZWFtcy5pbmNsdWRlcyhzdHJlYW0pKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3JlbW90ZVN0cmVhbXMucHVzaChzdHJlYW0pO1xuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgRXZlbnQoJ2FkZHN0cmVhbScpO1xuICAgICAgICAgICAgZXZlbnQuc3RyZWFtID0gc3RyZWFtO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3Qgb3JpZ1NldFJlbW90ZURlc2NyaXB0aW9uID1cbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbiA9XG4gICAgICBmdW5jdGlvbiBzZXRSZW1vdGVEZXNjcmlwdGlvbigpIHtcbiAgICAgICAgY29uc3QgcGMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuX29uYWRkc3RyZWFtcG9seSkge1xuICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbmFkZHN0cmVhbXBvbHkgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnN0cmVhbXMuZm9yRWFjaChzdHJlYW0gPT4ge1xuICAgICAgICAgICAgICBpZiAoIXBjLl9yZW1vdGVTdHJlYW1zKSB7XG4gICAgICAgICAgICAgICAgcGMuX3JlbW90ZVN0cmVhbXMgPSBbXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAocGMuX3JlbW90ZVN0cmVhbXMuaW5kZXhPZihzdHJlYW0pID49IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcGMuX3JlbW90ZVN0cmVhbXMucHVzaChzdHJlYW0pO1xuICAgICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBFdmVudCgnYWRkc3RyZWFtJyk7XG4gICAgICAgICAgICAgIGV2ZW50LnN0cmVhbSA9IHN0cmVhbTtcbiAgICAgICAgICAgICAgcGMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3JpZ1NldFJlbW90ZURlc2NyaXB0aW9uLmFwcGx5KHBjLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUNhbGxiYWNrc0FQSSh3aW5kb3cpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICdvYmplY3QnIHx8ICF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgcHJvdG90eXBlID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtcbiAgY29uc3Qgb3JpZ0NyZWF0ZU9mZmVyID0gcHJvdG90eXBlLmNyZWF0ZU9mZmVyO1xuICBjb25zdCBvcmlnQ3JlYXRlQW5zd2VyID0gcHJvdG90eXBlLmNyZWF0ZUFuc3dlcjtcbiAgY29uc3Qgc2V0TG9jYWxEZXNjcmlwdGlvbiA9IHByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uO1xuICBjb25zdCBzZXRSZW1vdGVEZXNjcmlwdGlvbiA9IHByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjtcbiAgY29uc3QgYWRkSWNlQ2FuZGlkYXRlID0gcHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZTtcblxuICBwcm90b3R5cGUuY3JlYXRlT2ZmZXIgPVxuICAgIGZ1bmN0aW9uIGNyZWF0ZU9mZmVyKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICBjb25zdCBvcHRpb25zID0gKGFyZ3VtZW50cy5sZW5ndGggPj0gMikgPyBhcmd1bWVudHNbMl0gOiBhcmd1bWVudHNbMF07XG4gICAgICBjb25zdCBwcm9taXNlID0gb3JpZ0NyZWF0ZU9mZmVyLmFwcGx5KHRoaXMsIFtvcHRpb25zXSk7XG4gICAgICBpZiAoIWZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH1cbiAgICAgIHByb21pc2UudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfTtcblxuICBwcm90b3R5cGUuY3JlYXRlQW5zd2VyID1cbiAgICBmdW5jdGlvbiBjcmVhdGVBbnN3ZXIoc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSA/IGFyZ3VtZW50c1syXSA6IGFyZ3VtZW50c1swXTtcbiAgICAgIGNvbnN0IHByb21pc2UgPSBvcmlnQ3JlYXRlQW5zd2VyLmFwcGx5KHRoaXMsIFtvcHRpb25zXSk7XG4gICAgICBpZiAoIWZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH1cbiAgICAgIHByb21pc2UudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfTtcblxuICBsZXQgd2l0aENhbGxiYWNrID0gZnVuY3Rpb24oZGVzY3JpcHRpb24sIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IHNldExvY2FsRGVzY3JpcHRpb24uYXBwbHkodGhpcywgW2Rlc2NyaXB0aW9uXSk7XG4gICAgaWYgKCFmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICBwcm9taXNlLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfTtcbiAgcHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb24gPSB3aXRoQ2FsbGJhY2s7XG5cbiAgd2l0aENhbGxiYWNrID0gZnVuY3Rpb24oZGVzY3JpcHRpb24sIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IHNldFJlbW90ZURlc2NyaXB0aW9uLmFwcGx5KHRoaXMsIFtkZXNjcmlwdGlvbl0pO1xuICAgIGlmICghZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgcHJvbWlzZS50aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH07XG4gIHByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbiA9IHdpdGhDYWxsYmFjaztcblxuICB3aXRoQ2FsbGJhY2sgPSBmdW5jdGlvbihjYW5kaWRhdGUsIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IGFkZEljZUNhbmRpZGF0ZS5hcHBseSh0aGlzLCBbY2FuZGlkYXRlXSk7XG4gICAgaWYgKCFmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICBwcm9taXNlLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfTtcbiAgcHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZSA9IHdpdGhDYWxsYmFjaztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1HZXRVc2VyTWVkaWEod2luZG93KSB7XG4gIGNvbnN0IG5hdmlnYXRvciA9IHdpbmRvdyAmJiB3aW5kb3cubmF2aWdhdG9yO1xuXG4gIGlmIChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKSB7XG4gICAgLy8gc2hpbSBub3QgbmVlZGVkIGluIFNhZmFyaSAxMi4xXG4gICAgY29uc3QgbWVkaWFEZXZpY2VzID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcztcbiAgICBjb25zdCBfZ2V0VXNlck1lZGlhID0gbWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5iaW5kKG1lZGlhRGV2aWNlcyk7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSAoY29uc3RyYWludHMpID0+IHtcbiAgICAgIHJldHVybiBfZ2V0VXNlck1lZGlhKHNoaW1Db25zdHJhaW50cyhjb25zdHJhaW50cykpO1xuICAgIH07XG4gIH1cblxuICBpZiAoIW5hdmlnYXRvci5nZXRVc2VyTWVkaWEgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJlxuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKSB7XG4gICAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uIGdldFVzZXJNZWRpYShjb25zdHJhaW50cywgY2IsIGVycmNiKSB7XG4gICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cylcbiAgICAgIC50aGVuKGNiLCBlcnJjYik7XG4gICAgfS5iaW5kKG5hdmlnYXRvcik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1Db25zdHJhaW50cyhjb25zdHJhaW50cykge1xuICBpZiAoY29uc3RyYWludHMgJiYgY29uc3RyYWludHMudmlkZW8gIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LFxuICAgICAgY29uc3RyYWludHMsXG4gICAgICB7dmlkZW86IHV0aWxzLmNvbXBhY3RPYmplY3QoY29uc3RyYWludHMudmlkZW8pfVxuICAgICk7XG4gIH1cblxuICByZXR1cm4gY29uc3RyYWludHM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltUlRDSWNlU2VydmVyVXJscyh3aW5kb3cpIHtcbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gbWlncmF0ZSBmcm9tIG5vbi1zcGVjIFJUQ0ljZVNlcnZlci51cmwgdG8gUlRDSWNlU2VydmVyLnVybHNcbiAgY29uc3QgT3JpZ1BlZXJDb25uZWN0aW9uID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPVxuICAgIGZ1bmN0aW9uIFJUQ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKSB7XG4gICAgICBpZiAocGNDb25maWcgJiYgcGNDb25maWcuaWNlU2VydmVycykge1xuICAgICAgICBjb25zdCBuZXdJY2VTZXJ2ZXJzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGNDb25maWcuaWNlU2VydmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxldCBzZXJ2ZXIgPSBwY0NvbmZpZy5pY2VTZXJ2ZXJzW2ldO1xuICAgICAgICAgIGlmICghc2VydmVyLmhhc093blByb3BlcnR5KCd1cmxzJykgJiZcbiAgICAgICAgICAgICAgc2VydmVyLmhhc093blByb3BlcnR5KCd1cmwnKSkge1xuICAgICAgICAgICAgdXRpbHMuZGVwcmVjYXRlZCgnUlRDSWNlU2VydmVyLnVybCcsICdSVENJY2VTZXJ2ZXIudXJscycpO1xuICAgICAgICAgICAgc2VydmVyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzZXJ2ZXIpKTtcbiAgICAgICAgICAgIHNlcnZlci51cmxzID0gc2VydmVyLnVybDtcbiAgICAgICAgICAgIGRlbGV0ZSBzZXJ2ZXIudXJsO1xuICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKHNlcnZlcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld0ljZVNlcnZlcnMucHVzaChwY0NvbmZpZy5pY2VTZXJ2ZXJzW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcGNDb25maWcuaWNlU2VydmVycyA9IG5ld0ljZVNlcnZlcnM7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IE9yaWdQZWVyQ29ubmVjdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cyk7XG4gICAgfTtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSA9IE9yaWdQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7XG4gIC8vIHdyYXAgc3RhdGljIG1ldGhvZHMuIEN1cnJlbnRseSBqdXN0IGdlbmVyYXRlQ2VydGlmaWNhdGUuXG4gIGlmICgnZ2VuZXJhdGVDZXJ0aWZpY2F0ZScgaW4gT3JpZ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiwgJ2dlbmVyYXRlQ2VydGlmaWNhdGUnLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiBPcmlnUGVlckNvbm5lY3Rpb24uZ2VuZXJhdGVDZXJ0aWZpY2F0ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbVRyYWNrRXZlbnRUcmFuc2NlaXZlcih3aW5kb3cpIHtcbiAgLy8gQWRkIGV2ZW50LnRyYW5zY2VpdmVyIG1lbWJlciBvdmVyIGRlcHJlY2F0ZWQgZXZlbnQucmVjZWl2ZXJcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENUcmFja0V2ZW50ICYmXG4gICAgICAncmVjZWl2ZXInIGluIHdpbmRvdy5SVENUcmFja0V2ZW50LnByb3RvdHlwZSAmJlxuICAgICAgISgndHJhbnNjZWl2ZXInIGluIHdpbmRvdy5SVENUcmFja0V2ZW50LnByb3RvdHlwZSkpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlLCAndHJhbnNjZWl2ZXInLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB7cmVjZWl2ZXI6IHRoaXMucmVjZWl2ZXJ9O1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltQ3JlYXRlT2ZmZXJMZWdhY3kod2luZG93KSB7XG4gIGNvbnN0IG9yaWdDcmVhdGVPZmZlciA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI7XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXIgPVxuICAgIGZ1bmN0aW9uIGNyZWF0ZU9mZmVyKG9mZmVyT3B0aW9ucykge1xuICAgICAgaWYgKG9mZmVyT3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIC8vIHN1cHBvcnQgYml0IHZhbHVlc1xuICAgICAgICAgIG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvID1cbiAgICAgICAgICAgICEhb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW87XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXVkaW9UcmFuc2NlaXZlciA9IHRoaXMuZ2V0VHJhbnNjZWl2ZXJzKCkuZmluZCh0cmFuc2NlaXZlciA9PlxuICAgICAgICAgIHRyYW5zY2VpdmVyLnJlY2VpdmVyLnRyYWNrLmtpbmQgPT09ICdhdWRpbycpO1xuICAgICAgICBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gPT09IGZhbHNlICYmIGF1ZGlvVHJhbnNjZWl2ZXIpIHtcbiAgICAgICAgICBpZiAoYXVkaW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPT09ICdzZW5kcmVjdicpIHtcbiAgICAgICAgICAgIGlmIChhdWRpb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbikge1xuICAgICAgICAgICAgICBhdWRpb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbignc2VuZG9ubHknKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGF1ZGlvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gJ3NlbmRvbmx5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGF1ZGlvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID09PSAncmVjdm9ubHknKSB7XG4gICAgICAgICAgICBpZiAoYXVkaW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgYXVkaW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24oJ2luYWN0aXZlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhdWRpb1RyYW5zY2VpdmVyLmRpcmVjdGlvbiA9ICdpbmFjdGl2ZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvID09PSB0cnVlICYmXG4gICAgICAgICAgICAhYXVkaW9UcmFuc2NlaXZlcikge1xuICAgICAgICAgIHRoaXMuYWRkVHJhbnNjZWl2ZXIoJ2F1ZGlvJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIC8vIHN1cHBvcnQgYml0IHZhbHVlc1xuICAgICAgICAgIG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvID1cbiAgICAgICAgICAgICEhb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW87XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmlkZW9UcmFuc2NlaXZlciA9IHRoaXMuZ2V0VHJhbnNjZWl2ZXJzKCkuZmluZCh0cmFuc2NlaXZlciA9PlxuICAgICAgICAgIHRyYW5zY2VpdmVyLnJlY2VpdmVyLnRyYWNrLmtpbmQgPT09ICd2aWRlbycpO1xuICAgICAgICBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gPT09IGZhbHNlICYmIHZpZGVvVHJhbnNjZWl2ZXIpIHtcbiAgICAgICAgICBpZiAodmlkZW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPT09ICdzZW5kcmVjdicpIHtcbiAgICAgICAgICAgIGlmICh2aWRlb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbikge1xuICAgICAgICAgICAgICB2aWRlb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbignc2VuZG9ubHknKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZpZGVvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gJ3NlbmRvbmx5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHZpZGVvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID09PSAncmVjdm9ubHknKSB7XG4gICAgICAgICAgICBpZiAodmlkZW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgdmlkZW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24oJ2luYWN0aXZlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2aWRlb1RyYW5zY2VpdmVyLmRpcmVjdGlvbiA9ICdpbmFjdGl2ZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvID09PSB0cnVlICYmXG4gICAgICAgICAgICAhdmlkZW9UcmFuc2NlaXZlcikge1xuICAgICAgICAgIHRoaXMuYWRkVHJhbnNjZWl2ZXIoJ3ZpZGVvJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvcmlnQ3JlYXRlT2ZmZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUF1ZGlvQ29udGV4dCh3aW5kb3cpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICdvYmplY3QnIHx8IHdpbmRvdy5BdWRpb0NvbnRleHQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgd2luZG93LkF1ZGlvQ29udGV4dCA9IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQ7XG59XG4iLCIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbiAvKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcblxubGV0IGxvZ0Rpc2FibGVkXyA9IHRydWU7XG5sZXQgZGVwcmVjYXRpb25XYXJuaW5nc18gPSB0cnVlO1xuXG4vKipcbiAqIEV4dHJhY3QgYnJvd3NlciB2ZXJzaW9uIG91dCBvZiB0aGUgcHJvdmlkZWQgdXNlciBhZ2VudCBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHshc3RyaW5nfSB1YXN0cmluZyB1c2VyQWdlbnQgc3RyaW5nLlxuICogQHBhcmFtIHshc3RyaW5nfSBleHByIFJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIGFzIG1hdGNoIGNyaXRlcmlhLlxuICogQHBhcmFtIHshbnVtYmVyfSBwb3MgcG9zaXRpb24gaW4gdGhlIHZlcnNpb24gc3RyaW5nIHRvIGJlIHJldHVybmVkLlxuICogQHJldHVybiB7IW51bWJlcn0gYnJvd3NlciB2ZXJzaW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFZlcnNpb24odWFzdHJpbmcsIGV4cHIsIHBvcykge1xuICBjb25zdCBtYXRjaCA9IHVhc3RyaW5nLm1hdGNoKGV4cHIpO1xuICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID49IHBvcyAmJiBwYXJzZUludChtYXRjaFtwb3NdLCAxMCk7XG59XG5cbi8vIFdyYXBzIHRoZSBwZWVyY29ubmVjdGlvbiBldmVudCBldmVudE5hbWVUb1dyYXAgaW4gYSBmdW5jdGlvblxuLy8gd2hpY2ggcmV0dXJucyB0aGUgbW9kaWZpZWQgZXZlbnQgb2JqZWN0IChvciBmYWxzZSB0byBwcmV2ZW50XG4vLyB0aGUgZXZlbnQpLlxuZXhwb3J0IGZ1bmN0aW9uIHdyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgZXZlbnROYW1lVG9XcmFwLCB3cmFwcGVyKSB7XG4gIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHByb3RvID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtcbiAgY29uc3QgbmF0aXZlQWRkRXZlbnRMaXN0ZW5lciA9IHByb3RvLmFkZEV2ZW50TGlzdGVuZXI7XG4gIHByb3RvLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihuYXRpdmVFdmVudE5hbWUsIGNiKSB7XG4gICAgaWYgKG5hdGl2ZUV2ZW50TmFtZSAhPT0gZXZlbnROYW1lVG9XcmFwKSB7XG4gICAgICByZXR1cm4gbmF0aXZlQWRkRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBjb25zdCB3cmFwcGVkQ2FsbGJhY2sgPSAoZSkgPT4ge1xuICAgICAgY29uc3QgbW9kaWZpZWRFdmVudCA9IHdyYXBwZXIoZSk7XG4gICAgICBpZiAobW9kaWZpZWRFdmVudCkge1xuICAgICAgICBpZiAoY2IuaGFuZGxlRXZlbnQpIHtcbiAgICAgICAgICBjYi5oYW5kbGVFdmVudChtb2RpZmllZEV2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYihtb2RpZmllZEV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5fZXZlbnRNYXAgPSB0aGlzLl9ldmVudE1hcCB8fCB7fTtcbiAgICBpZiAoIXRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF0pIHtcbiAgICAgIHRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF0gPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIHRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF0uc2V0KGNiLCB3cmFwcGVkQ2FsbGJhY2spO1xuICAgIHJldHVybiBuYXRpdmVBZGRFdmVudExpc3RlbmVyLmFwcGx5KHRoaXMsIFtuYXRpdmVFdmVudE5hbWUsXG4gICAgICB3cmFwcGVkQ2FsbGJhY2tdKTtcbiAgfTtcblxuICBjb25zdCBuYXRpdmVSZW1vdmVFdmVudExpc3RlbmVyID0gcHJvdG8ucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgcHJvdG8ucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKG5hdGl2ZUV2ZW50TmFtZSwgY2IpIHtcbiAgICBpZiAobmF0aXZlRXZlbnROYW1lICE9PSBldmVudE5hbWVUb1dyYXAgfHwgIXRoaXMuX2V2ZW50TWFwXG4gICAgICAgIHx8ICF0aGlzLl9ldmVudE1hcFtldmVudE5hbWVUb1dyYXBdKSB7XG4gICAgICByZXR1cm4gbmF0aXZlUmVtb3ZlRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF0uaGFzKGNiKSkge1xuICAgICAgcmV0dXJuIG5hdGl2ZVJlbW92ZUV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgY29uc3QgdW53cmFwcGVkQ2IgPSB0aGlzLl9ldmVudE1hcFtldmVudE5hbWVUb1dyYXBdLmdldChjYik7XG4gICAgdGhpcy5fZXZlbnRNYXBbZXZlbnROYW1lVG9XcmFwXS5kZWxldGUoY2IpO1xuICAgIGlmICh0aGlzLl9ldmVudE1hcFtldmVudE5hbWVUb1dyYXBdLnNpemUgPT09IDApIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudE1hcFtldmVudE5hbWVUb1dyYXBdO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXModGhpcy5fZXZlbnRNYXApLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50TWFwO1xuICAgIH1cbiAgICByZXR1cm4gbmF0aXZlUmVtb3ZlRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBbbmF0aXZlRXZlbnROYW1lLFxuICAgICAgdW53cmFwcGVkQ2JdKTtcbiAgfTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG8sICdvbicgKyBldmVudE5hbWVUb1dyYXAsIHtcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpc1snX29uJyArIGV2ZW50TmFtZVRvV3JhcF07XG4gICAgfSxcbiAgICBzZXQoY2IpIHtcbiAgICAgIGlmICh0aGlzWydfb24nICsgZXZlbnROYW1lVG9XcmFwXSkge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lVG9XcmFwLFxuICAgICAgICAgICAgdGhpc1snX29uJyArIGV2ZW50TmFtZVRvV3JhcF0pO1xuICAgICAgICBkZWxldGUgdGhpc1snX29uJyArIGV2ZW50TmFtZVRvV3JhcF07XG4gICAgICB9XG4gICAgICBpZiAoY2IpIHtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZVRvV3JhcCxcbiAgICAgICAgICAgIHRoaXNbJ19vbicgKyBldmVudE5hbWVUb1dyYXBdID0gY2IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlTG9nKGJvb2wpIHtcbiAgaWYgKHR5cGVvZiBib29sICE9PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gbmV3IEVycm9yKCdBcmd1bWVudCB0eXBlOiAnICsgdHlwZW9mIGJvb2wgK1xuICAgICAgICAnLiBQbGVhc2UgdXNlIGEgYm9vbGVhbi4nKTtcbiAgfVxuICBsb2dEaXNhYmxlZF8gPSBib29sO1xuICByZXR1cm4gKGJvb2wpID8gJ2FkYXB0ZXIuanMgbG9nZ2luZyBkaXNhYmxlZCcgOlxuICAgICAgJ2FkYXB0ZXIuanMgbG9nZ2luZyBlbmFibGVkJztcbn1cblxuLyoqXG4gKiBEaXNhYmxlIG9yIGVuYWJsZSBkZXByZWNhdGlvbiB3YXJuaW5nc1xuICogQHBhcmFtIHshYm9vbGVhbn0gYm9vbCBzZXQgdG8gdHJ1ZSB0byBkaXNhYmxlIHdhcm5pbmdzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZVdhcm5pbmdzKGJvb2wpIHtcbiAgaWYgKHR5cGVvZiBib29sICE9PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gbmV3IEVycm9yKCdBcmd1bWVudCB0eXBlOiAnICsgdHlwZW9mIGJvb2wgK1xuICAgICAgICAnLiBQbGVhc2UgdXNlIGEgYm9vbGVhbi4nKTtcbiAgfVxuICBkZXByZWNhdGlvbldhcm5pbmdzXyA9ICFib29sO1xuICByZXR1cm4gJ2FkYXB0ZXIuanMgZGVwcmVjYXRpb24gd2FybmluZ3MgJyArIChib29sID8gJ2Rpc2FibGVkJyA6ICdlbmFibGVkJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2coKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0Jykge1xuICAgIGlmIChsb2dEaXNhYmxlZF8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5sb2cgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2hvd3MgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHN1Z2dlc3RpbmcgdGhlIG1vZGVybiBhbmQgc3BlYy1jb21wYXRpYmxlIEFQSS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlcHJlY2F0ZWQob2xkTWV0aG9kLCBuZXdNZXRob2QpIHtcbiAgaWYgKCFkZXByZWNhdGlvbldhcm5pbmdzXykge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zb2xlLndhcm4ob2xkTWV0aG9kICsgJyBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlICcgKyBuZXdNZXRob2QgK1xuICAgICAgJyBpbnN0ZWFkLicpO1xufVxuXG4vKipcbiAqIEJyb3dzZXIgZGV0ZWN0b3IuXG4gKlxuICogQHJldHVybiB7b2JqZWN0fSByZXN1bHQgY29udGFpbmluZyBicm93c2VyIGFuZCB2ZXJzaW9uXG4gKiAgICAgcHJvcGVydGllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdEJyb3dzZXIod2luZG93KSB7XG4gIC8vIFJldHVybmVkIHJlc3VsdCBvYmplY3QuXG4gIGNvbnN0IHJlc3VsdCA9IHticm93c2VyOiBudWxsLCB2ZXJzaW9uOiBudWxsfTtcblxuICAvLyBGYWlsIGVhcmx5IGlmIGl0J3Mgbm90IGEgYnJvd3NlclxuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXdpbmRvdy5uYXZpZ2F0b3IpIHtcbiAgICByZXN1bHQuYnJvd3NlciA9ICdOb3QgYSBicm93c2VyLic7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGNvbnN0IHtuYXZpZ2F0b3J9ID0gd2luZG93O1xuXG4gIGlmIChuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7IC8vIEZpcmVmb3guXG4gICAgcmVzdWx0LmJyb3dzZXIgPSAnZmlyZWZveCc7XG4gICAgcmVzdWx0LnZlcnNpb24gPSBleHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LFxuICAgICAgICAvRmlyZWZveFxcLyhcXGQrKVxcLi8sIDEpO1xuICB9IGVsc2UgaWYgKG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEgfHxcbiAgICAgICh3aW5kb3cuaXNTZWN1cmVDb250ZXh0ID09PSBmYWxzZSAmJiB3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb24gJiZcbiAgICAgICAhd2luZG93LlJUQ0ljZUdhdGhlcmVyKSkge1xuICAgIC8vIENocm9tZSwgQ2hyb21pdW0sIFdlYnZpZXcsIE9wZXJhLlxuICAgIC8vIFZlcnNpb24gbWF0Y2hlcyBDaHJvbWUvV2ViUlRDIHZlcnNpb24uXG4gICAgLy8gQ2hyb21lIDc0IHJlbW92ZWQgd2Via2l0R2V0VXNlck1lZGlhIG9uIGh0dHAgYXMgd2VsbCBzbyB3ZSBuZWVkIHRoZVxuICAgIC8vIG1vcmUgY29tcGxpY2F0ZWQgZmFsbGJhY2sgdG8gd2Via2l0UlRDUGVlckNvbm5lY3Rpb24uXG4gICAgcmVzdWx0LmJyb3dzZXIgPSAnY2hyb21lJztcbiAgICByZXN1bHQudmVyc2lvbiA9IGV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAgIC9DaHJvbShlfGl1bSlcXC8oXFxkKylcXC4vLCAyKTtcbiAgfSBlbHNlIGlmIChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmXG4gICAgICBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9FZGdlXFwvKFxcZCspLihcXGQrKSQvKSkgeyAvLyBFZGdlLlxuICAgIHJlc3VsdC5icm93c2VyID0gJ2VkZ2UnO1xuICAgIHJlc3VsdC52ZXJzaW9uID0gZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgICAgL0VkZ2VcXC8oXFxkKykuKFxcZCspJC8sIDIpO1xuICB9IGVsc2UgaWYgKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJlxuICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vKSkgeyAvLyBTYWZhcmkuXG4gICAgcmVzdWx0LmJyb3dzZXIgPSAnc2FmYXJpJztcbiAgICByZXN1bHQudmVyc2lvbiA9IGV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAgIC9BcHBsZVdlYktpdFxcLyhcXGQrKVxcLi8sIDEpO1xuICAgIHJlc3VsdC5zdXBwb3J0c1VuaWZpZWRQbGFuID0gd2luZG93LlJUQ1J0cFRyYW5zY2VpdmVyICYmXG4gICAgICAgICdjdXJyZW50RGlyZWN0aW9uJyBpbiB3aW5kb3cuUlRDUnRwVHJhbnNjZWl2ZXIucHJvdG90eXBlO1xuICB9IGVsc2UgeyAvLyBEZWZhdWx0IGZhbGx0aHJvdWdoOiBub3Qgc3VwcG9ydGVkLlxuICAgIHJlc3VsdC5icm93c2VyID0gJ05vdCBhIHN1cHBvcnRlZCBicm93c2VyLic7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHNvbWV0aGluZyBpcyBhbiBvYmplY3QuXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHNvbWV0aGluZyB5b3Ugd2FudCB0byBjaGVjay5cbiAqIEByZXR1cm4gdHJ1ZSBpZiB2YWwgaXMgYW4gb2JqZWN0LCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xufVxuXG4vKipcbiAqIFJlbW92ZSBhbGwgZW1wdHkgb2JqZWN0cyBhbmQgdW5kZWZpbmVkIHZhbHVlc1xuICogZnJvbSBhIG5lc3RlZCBvYmplY3QgLS0gYW4gZW5oYW5jZWQgYW5kIHZhbmlsbGEgdmVyc2lvblxuICogb2YgTG9kYXNoJ3MgYGNvbXBhY3RgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcGFjdE9iamVjdChkYXRhKSB7XG4gIGlmICghaXNPYmplY3QoZGF0YSkpIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIHJldHVybiBPYmplY3Qua2V5cyhkYXRhKS5yZWR1Y2UoZnVuY3Rpb24oYWNjdW11bGF0b3IsIGtleSkge1xuICAgIGNvbnN0IGlzT2JqID0gaXNPYmplY3QoZGF0YVtrZXldKTtcbiAgICBjb25zdCB2YWx1ZSA9IGlzT2JqID8gY29tcGFjdE9iamVjdChkYXRhW2tleV0pIDogZGF0YVtrZXldO1xuICAgIGNvbnN0IGlzRW1wdHlPYmplY3QgPSBpc09iaiAmJiAhT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aDtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCBpc0VtcHR5T2JqZWN0KSB7XG4gICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKGFjY3VtdWxhdG9yLCB7W2tleV06IHZhbHVlfSk7XG4gIH0sIHt9KTtcbn1cblxuLyogaXRlcmF0ZXMgdGhlIHN0YXRzIGdyYXBoIHJlY3Vyc2l2ZWx5LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhbGtTdGF0cyhzdGF0cywgYmFzZSwgcmVzdWx0U2V0KSB7XG4gIGlmICghYmFzZSB8fCByZXN1bHRTZXQuaGFzKGJhc2UuaWQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJlc3VsdFNldC5zZXQoYmFzZS5pZCwgYmFzZSk7XG4gIE9iamVjdC5rZXlzKGJhc2UpLmZvckVhY2gobmFtZSA9PiB7XG4gICAgaWYgKG5hbWUuZW5kc1dpdGgoJ0lkJykpIHtcbiAgICAgIHdhbGtTdGF0cyhzdGF0cywgc3RhdHMuZ2V0KGJhc2VbbmFtZV0pLCByZXN1bHRTZXQpO1xuICAgIH0gZWxzZSBpZiAobmFtZS5lbmRzV2l0aCgnSWRzJykpIHtcbiAgICAgIGJhc2VbbmFtZV0uZm9yRWFjaChpZCA9PiB7XG4gICAgICAgIHdhbGtTdGF0cyhzdGF0cywgc3RhdHMuZ2V0KGlkKSwgcmVzdWx0U2V0KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qIGZpbHRlciBnZXRTdGF0cyBmb3IgYSBzZW5kZXIvcmVjZWl2ZXIgdHJhY2suICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyU3RhdHMocmVzdWx0LCB0cmFjaywgb3V0Ym91bmQpIHtcbiAgY29uc3Qgc3RyZWFtU3RhdHNUeXBlID0gb3V0Ym91bmQgPyAnb3V0Ym91bmQtcnRwJyA6ICdpbmJvdW5kLXJ0cCc7XG4gIGNvbnN0IGZpbHRlcmVkUmVzdWx0ID0gbmV3IE1hcCgpO1xuICBpZiAodHJhY2sgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmlsdGVyZWRSZXN1bHQ7XG4gIH1cbiAgY29uc3QgdHJhY2tTdGF0cyA9IFtdO1xuICByZXN1bHQuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgaWYgKHZhbHVlLnR5cGUgPT09ICd0cmFjaycgJiZcbiAgICAgICAgdmFsdWUudHJhY2tJZGVudGlmaWVyID09PSB0cmFjay5pZCkge1xuICAgICAgdHJhY2tTdGF0cy5wdXNoKHZhbHVlKTtcbiAgICB9XG4gIH0pO1xuICB0cmFja1N0YXRzLmZvckVhY2godHJhY2tTdGF0ID0+IHtcbiAgICByZXN1bHQuZm9yRWFjaChzdGF0cyA9PiB7XG4gICAgICBpZiAoc3RhdHMudHlwZSA9PT0gc3RyZWFtU3RhdHNUeXBlICYmIHN0YXRzLnRyYWNrSWQgPT09IHRyYWNrU3RhdC5pZCkge1xuICAgICAgICB3YWxrU3RhdHMocmVzdWx0LCBzdGF0cywgZmlsdGVyZWRSZXN1bHQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGZpbHRlcmVkUmVzdWx0O1xufVxuXG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFdvcmtlcihfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiTG9hZGVyV29ya2VyLndvcmtlci5qc1wiKTtcbn07IiwiaW1wb3J0IHsgZ2xDb2xvcjMgfSBmcm9tICcuLi8uLi9nbC9nbENvbG9yJztcclxuXHJcbi8qKlxyXG4gKiBUaGUgaXRlbXMgcmV0dXJuZWQgZnJvbSBleGFtaW5pbmcgdGhlIGN1cnJlbnQgdmlld1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJQ29sb3JEYXRhIHtcclxuICAgbWF4Q2hyb21hOiBudW1iZXIsXHJcbiAgIGhpZ2hsaWdodENvbG9yOiBnbENvbG9yMyxcclxuICAgYXZnTGlnaHRDb2xvcjogZ2xDb2xvcjMsXHJcbiAgIGxpZ2h0ZXN0TGlnaHRDb2xvcjogZ2xDb2xvcjMsXHJcbiAgIGRhcmtlc3RMaWdodENvbG9yOiBnbENvbG9yMyxcclxuICAgYXZnU2hhZG93Q29sb3I6IGdsQ29sb3IzLFxyXG4gICBsaWdodGVzdFNoYWRvd0NvbG9yOiBnbENvbG9yMyxcclxuICAgZGFya2VzdFNoYWRvd0NvbG9yOiBnbENvbG9yMyxcclxuICAgdGVybWluYXRvckNvbG9yOiBnbENvbG9yMyxcclxufVxyXG5cclxuLyoqXHJcbiAqIFRoaXMgY2xhc3MgZ3JhYnMgYSBjb3B5IG9mIHRoZSByZW5kZXJlZCB0ZXh0dXJlIGFuZCBleGFtaW5lcyBpdCBmb3JcclxuICogY29sb3IgdmFsdWVzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbG9yQW5hbHl6ZXIge1xyXG5cclxuICAgLyoqXHJcbiAgICAqIFRoZSBhcnJheSB3aGVyZSB3ZSdsbCBkdW1wIHRoZSB0ZXh0dXJlIHRvLiBDYWNoZSB0aGlzIGFycmF5IGluc3RlYWQgb2ZcclxuICAgICogYWxsb2NhdGluZyBhIG5ldyBvbmUgZm9yIGVhY2ggZnJhbWUuXHJcbiAgICAqL1xyXG4gICBwcml2YXRlIHBpeGVsczogRmxvYXQzMkFycmF5O1xyXG5cclxuICAgLyoqXHJcbiAgICAqIFNpemUgb2YgdGhlIHRleHR1cmVcclxuICAgICovXHJcbiAgIHByaXZhdGUgcmVhZG9ubHkgc2l6ZTogbnVtYmVyO1xyXG5cclxuICAgLyoqXHJcbiAgICAqIEBwYXJhbSBzaXplIFRoZSB3aWR0aCBhbmQgaGVpZ2h0IG9mIHRoZSBidWZmZXJcclxuICAgICovXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplOiBudW1iZXIpIHtcclxuXHJcbiAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XHJcblxyXG4gICAgICAvLyBhbGxvY2F0ZSB0aGUgYnVmZmVyIHVzZWQgZm9yIGdyYWJzXHJcbiAgICAgIHRoaXMucGl4ZWxzID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLnNpemUgKiB0aGlzLnNpemUgKiA0KTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFJ1bnMgdGhlIGFuYWx5c2lzIC0gZ3JhYnMgYSBjb3B5IG9mIHRoZSBmcmFtZSBidWZmZXIgYW5kIHNjYW5zIGl0LlxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIGFscGhhTGlnaHQgVGhlIGFscGhhIHZhbHVlIGZvciB0aGluZ3MgaW4gbGlnaHQuIFZhbHVlcyBhYm92ZSB0aGlzIGFyZSBkdWUgdG8gc3BlY3VsYXIgbGlnaHRpbmcuXHJcbiAgICAqIEBwYXJhbSBhbHBoYVNoYWRvdyBUaGUgYWxwaGEgdmFsdWUgZm9yIHRoaW5ncyBpbiBzaGFkb3cuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgcnVuKFxyXG4gICAgICBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0IHwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dCxcclxuICAgICAgYWxwaGFMaWdodDogbnVtYmVyLFxyXG4gICAgICBhbHBoYVNoYWRvdzogbnVtYmVyXHJcbiAgICk6IElDb2xvckRhdGEge1xyXG5cclxuICAgICAgY29uc3QgZGF0YTogSUNvbG9yRGF0YSA9IHtcclxuICAgICAgICAgbWF4Q2hyb21hOiAwLFxyXG4gICAgICAgICBhdmdMaWdodENvbG9yOiBuZXcgZ2xDb2xvcjMoWzAsIDAsIDBdKSxcclxuICAgICAgICAgbGlnaHRlc3RMaWdodENvbG9yOiBuZXcgZ2xDb2xvcjMoWzAsIDAsIDBdKSxcclxuICAgICAgICAgZGFya2VzdExpZ2h0Q29sb3I6IG5ldyBnbENvbG9yMyhbMSwgMSwgMV0pLFxyXG4gICAgICAgICBhdmdTaGFkb3dDb2xvcjogbmV3IGdsQ29sb3IzKFswLCAwLCAwXSksXHJcbiAgICAgICAgIGxpZ2h0ZXN0U2hhZG93Q29sb3I6IG5ldyBnbENvbG9yMyhbMCwgMCwgMF0pLFxyXG4gICAgICAgICBkYXJrZXN0U2hhZG93Q29sb3I6IG5ldyBnbENvbG9yMyhbMSwgMSwgMV0pLFxyXG4gICAgICAgICB0ZXJtaW5hdG9yQ29sb3I6IG5ldyBnbENvbG9yMyhbMCwgMCwgMF0pLFxyXG4gICAgICAgICBoaWdobGlnaHRDb2xvcjogbmV3IGdsQ29sb3IzKFswLCAwLCAwXSksXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRPRE8gaGFuZGxlIGNhc2Ugd2hlbiB0aGUgdGV4dCB0eXBlIGlzIFVOU0lHTkVEX0JZVEVcclxuICAgICAgLy8gVE9ETyBnbC5GTE9BVCBub3Qgc3VwcG9ydGVkIG9uIFNhZmFyaS5cclxuICAgICAgZ2wucmVhZFBpeGVscygwLCAwLCB0aGlzLnNpemUsIHRoaXMuc2l6ZSwgZ2wuUkdCQSwgZ2wuRkxPQVQsIHRoaXMucGl4ZWxzKTtcclxuXHJcbiAgICAgIGxldCBudW1MaWdodFBpeGVscyA9IDA7XHJcbiAgICAgIGxldCBudW1TaGFkb3dQaXhlbHMgPSAwO1xyXG4gICAgICBsZXQgbnVtVGVybWluYXRvclBpeGVscyA9IDA7XHJcblxyXG4gICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCB0aGlzLnNpemU7IHJvdysrKSB7XHJcbiAgICAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IHRoaXMuc2l6ZTsgY29sKyspIHtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSAocm93ICogdGhpcy5zaXplICsgY29sKSAqIDQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLnBpeGVsc1tpbmRleCArIDBdO1xyXG4gICAgICAgICAgICBjb25zdCBnID0gdGhpcy5waXhlbHNbaW5kZXggKyAxXTtcclxuICAgICAgICAgICAgY29uc3QgYiA9IHRoaXMucGl4ZWxzW2luZGV4ICsgMl07XHJcbiAgICAgICAgICAgIGNvbnN0IGEgPSB0aGlzLnBpeGVsc1tpbmRleCArIDNdO1xyXG5cclxuICAgICAgICAgICAgLy8gaWdub3JlIHZhbHVlcyB0aGF0IGFyZSBub3QgcGFydCBvZiB0aGUgYmFsbFxyXG4gICAgICAgICAgICBpZiAoYSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgYXZnID0gKHIgKyBnICsgYikgLyAzO1xyXG4gICAgICAgICAgICBjb25zdCBjaHJvbWEgPSAoTWF0aC5hYnMociAtIGF2ZykgKyBNYXRoLmFicyhnIC0gYXZnKSArIE1hdGguYWJzKGIgLSBhdmcpKSAvICg0IC8gMyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2hyb21hID4gZGF0YS5tYXhDaHJvbWEpIHtcclxuICAgICAgICAgICAgICAgZGF0YS5tYXhDaHJvbWEgPSBjaHJvbWE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gbmV3IGdsQ29sb3IzKFtyLCBnLCBiXSk7XHJcbiAgICAgICAgICAgIGlmIChhID09IGFscGhhTGlnaHQpIHtcclxuICAgICAgICAgICAgICAgbnVtTGlnaHRQaXhlbHMrKztcclxuICAgICAgICAgICAgICAgaWYgKGRhdGEubGlnaHRlc3RMaWdodENvbG9yID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgZGF0YS5saWdodGVzdExpZ2h0Q29sb3IgPSBjb2xvcjtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBpZiAoZGF0YS5kYXJrZXN0TGlnaHRDb2xvciA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRhdGEuZGFya2VzdExpZ2h0Q29sb3IgPSBjb2xvcjtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBkYXRhLmxpZ2h0ZXN0TGlnaHRDb2xvciA9IGdsQ29sb3IzLmxpZ2h0ZXN0KGRhdGEubGlnaHRlc3RMaWdodENvbG9yLCBjb2xvcik7XHJcbiAgICAgICAgICAgICAgIGRhdGEuZGFya2VzdExpZ2h0Q29sb3IgPSBnbENvbG9yMy5kYXJrZXN0KGRhdGEuZGFya2VzdExpZ2h0Q29sb3IsIGNvbG9yKTtcclxuICAgICAgICAgICAgICAgZGF0YS5hdmdMaWdodENvbG9yLnIgKz0gY29sb3IucjtcclxuICAgICAgICAgICAgICAgZGF0YS5hdmdMaWdodENvbG9yLmIgKz0gY29sb3IuYjtcclxuICAgICAgICAgICAgICAgZGF0YS5hdmdMaWdodENvbG9yLmcgKz0gY29sb3IuZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChhID09IGFscGhhU2hhZG93KSB7XHJcbiAgICAgICAgICAgICAgIG51bVNoYWRvd1BpeGVscysrO1xyXG4gICAgICAgICAgICAgICBpZiAoZGF0YS5saWdodGVzdFNoYWRvd0NvbG9yID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgZGF0YS5saWdodGVzdFNoYWRvd0NvbG9yID0gY29sb3I7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgaWYgKGRhdGEuZGFya2VzdFNoYWRvd0NvbG9yID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgZGF0YS5kYXJrZXN0U2hhZG93Q29sb3IgPSBjb2xvcjtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBkYXRhLmxpZ2h0ZXN0U2hhZG93Q29sb3IgPSBnbENvbG9yMy5saWdodGVzdChkYXRhLmxpZ2h0ZXN0U2hhZG93Q29sb3IsIGNvbG9yKTtcclxuICAgICAgICAgICAgICAgZGF0YS5kYXJrZXN0U2hhZG93Q29sb3IgPSBnbENvbG9yMy5kYXJrZXN0KGRhdGEuZGFya2VzdFNoYWRvd0NvbG9yLCBjb2xvcik7XHJcbiAgICAgICAgICAgICAgIGRhdGEuYXZnU2hhZG93Q29sb3IuciArPSBjb2xvci5yO1xyXG4gICAgICAgICAgICAgICBkYXRhLmF2Z1NoYWRvd0NvbG9yLmIgKz0gY29sb3IuYjtcclxuICAgICAgICAgICAgICAgZGF0YS5hdmdTaGFkb3dDb2xvci5nICs9IGNvbG9yLmc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoYSA+IGFscGhhTGlnaHQpIHtcclxuICAgICAgICAgICAgICAgZGF0YS5oaWdobGlnaHRDb2xvciA9IGdsQ29sb3IzLmxpZ2h0ZXN0KGRhdGEuaGlnaGxpZ2h0Q29sb3IsIGNvbG9yKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgdGVybWluYXRvciA9IChhbHBoYUxpZ2h0ICsgYWxwaGFTaGFkb3cpIC8gMi4wO1xyXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoYSAtIHRlcm1pbmF0b3IpIDwgMC4xKSB7XHJcbiAgICAgICAgICAgICAgIG51bVRlcm1pbmF0b3JQaXhlbHMrKztcclxuICAgICAgICAgICAgICAgZGF0YS50ZXJtaW5hdG9yQ29sb3IuciArPSBjb2xvci5yO1xyXG4gICAgICAgICAgICAgICBkYXRhLnRlcm1pbmF0b3JDb2xvci5iICs9IGNvbG9yLmI7XHJcbiAgICAgICAgICAgICAgIGRhdGEudGVybWluYXRvckNvbG9yLmcgKz0gY29sb3IuZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChudW1MaWdodFBpeGVscyA+IDApIHtcclxuICAgICAgICAgZGF0YS5hdmdMaWdodENvbG9yLnIgLz0gbnVtTGlnaHRQaXhlbHM7XHJcbiAgICAgICAgIGRhdGEuYXZnTGlnaHRDb2xvci5nIC89IG51bUxpZ2h0UGl4ZWxzO1xyXG4gICAgICAgICBkYXRhLmF2Z0xpZ2h0Q29sb3IuYiAvPSBudW1MaWdodFBpeGVscztcclxuICAgICAgfVxyXG4gICAgICBpZiAobnVtU2hhZG93UGl4ZWxzID4gMCkge1xyXG4gICAgICAgICBkYXRhLmF2Z1NoYWRvd0NvbG9yLnIgLz0gbnVtU2hhZG93UGl4ZWxzO1xyXG4gICAgICAgICBkYXRhLmF2Z1NoYWRvd0NvbG9yLmcgLz0gbnVtU2hhZG93UGl4ZWxzO1xyXG4gICAgICAgICBkYXRhLmF2Z1NoYWRvd0NvbG9yLmIgLz0gbnVtU2hhZG93UGl4ZWxzO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChudW1UZXJtaW5hdG9yUGl4ZWxzID4gMCkge1xyXG4gICAgICAgICBkYXRhLnRlcm1pbmF0b3JDb2xvci5yIC89IG51bVRlcm1pbmF0b3JQaXhlbHM7XHJcbiAgICAgICAgIGRhdGEudGVybWluYXRvckNvbG9yLmcgLz0gbnVtVGVybWluYXRvclBpeGVscztcclxuICAgICAgICAgZGF0YS50ZXJtaW5hdG9yQ29sb3IuYiAvPSBudW1UZXJtaW5hdG9yUGl4ZWxzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgfVxyXG59IiwiaW1wb3J0IHsgaHRtbENvbG9yIH0gZnJvbSAnLi4vLi4vVXRpbC9odG1sQ29sb3InO1xyXG5pbXBvcnQgeyBJQXBwIH0gZnJvbSAnLi4vLi4vSUFwcCc7XHJcbmltcG9ydCB7IFBhdGhUcmFjZXJSZW5kZXJlciwgUmVuZGVyTW9kZSB9IGZyb20gJy4vUGF0aFRyYWNlclJlbmRlcmVyJztcclxuaW1wb3J0IHsgU3BoZXJpY2FsQ29vcmQgfSBmcm9tICcuLi8uLi9VdGlsM0QvU3BoZXJpY2FsQ29vcmQnO1xyXG5pbXBvcnQgeyBTbGlkZXIgfSBmcm9tICcuLi8uLi9HVUkvU2xpZGVyJztcclxuaW1wb3J0IHsgaXNNb2JpbGUsIGNsYW1wIH0gZnJvbSAnLi4vLi4vVXRpbC9HbG9iYWxzJztcclxuaW1wb3J0IHsgUG9pbnRlckV2ZW50SGFuZGxlciB9IGZyb20gJy4uLy4uL0dVSS9Qb2ludGVyRXZlbnRIYW5kbGVyJztcclxuaW1wb3J0IHsgVmVjMiwgVmVjMyB9IGZyb20gJy4uLy4uL1V0aWwzRC9WZWMnO1xyXG5pbXBvcnQgeyBUcmlhbmdsZU9iaiB9IGZyb20gJy4uLy4uL1V0aWwzRC9UcmlhbmdsZU9iaic7XHJcbmltcG9ydCB7IGdsQ29sb3JXaXRoVGVtcGVyYXR1cmUgfSBmcm9tICcuLi8uLi9nbC9nbENvbG9yV2l0aFRlbXBlcmF0dXJlJztcclxuaW1wb3J0IHsgTWVudWJhciB9IGZyb20gJy4uLy4uL0dVSS9NZW51JztcclxuaW1wb3J0IHsgVHJpYW5nbGVPYmpCdWlsZGVyIH0gZnJvbSAnLi4vLi4vVXRpbDNEL1RyaWFuZ2xlT2JqQnVpbGRlcic7XHJcbmltcG9ydCB7IFRyaWFuZ2xlT2JqRmlsZSB9IGZyb20gJy4uLy4uL1V0aWwzRC9UcmlhbmdsZU9iakZpbGUnO1xyXG5pbXBvcnQgeyBNYXQ0IH0gZnJvbSAnLi4vLi4vVXRpbDNEL01hdCc7XHJcblxyXG5jb25zdCBza2luVG9uZXMgPSBbXHJcbiAgIG5ldyBodG1sQ29sb3IoWzI0MCwgMjIzLCAyMTRdKSxcclxuICAgbmV3IGh0bWxDb2xvcihbMjU1LCAyMTgsIDIwMF0pLFxyXG4gICBuZXcgaHRtbENvbG9yKFsyMzIsIDE3OSwgMTE3XSksXHJcbiAgIG5ldyBodG1sQ29sb3IoWzE5MCwgMTM2LCA4N10pLFxyXG4gICAvLyAgIG5ldyBodG1sQ29sb3IoWzExNSwgOTEsIDU5XSksXHJcbiAgIG5ldyBodG1sQ29sb3IoWzEzOSwgNzMsIDY1XSlcclxuICAgLy8gICBuZXcgaHRtbENvbG9yKFsxMzIsIDU1LCAzNF0pLFxyXG4gICAvL25ldyBodG1sQ29sb3IoWzYxLCAxMiwgMl0pLFxyXG4gICAvLyAgIG5ldyBodG1sQ29sb3IoWzM4LCA3LCAxXSlcclxuXTtcclxuXHJcbmVudW0gUG9pbnRlck1vZGUge1xyXG4gICBWaWV3LFxyXG4gICBMaWdodCxcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBhdGhUcmFjZXJBcHAgaW1wbGVtZW50cyBJQXBwIHtcclxuICAgcHJpdmF0ZSBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0IHwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IG51bGw7XHJcbiAgIHByaXZhdGUgcmVuZGVyZXI6IFBhdGhUcmFjZXJSZW5kZXJlcjtcclxuICAgcHJpdmF0ZSBwb2ludGVyTW9kZTogUG9pbnRlck1vZGUgPSBQb2ludGVyTW9kZS5WaWV3O1xyXG4gICBwcml2YXRlIHBvaW50ZXJNb2RlU3BlY2lhbCA9IGZhbHNlO1xyXG4gICBwcml2YXRlIHBvczogU3BoZXJpY2FsQ29vcmQ7XHJcbiAgIHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgcHJpdmF0ZSBhbmltYXRpb25GcmFtZTogbnVtYmVyO1xyXG5cclxuICAgcHJpdmF0ZSBpbnRlbnNpdHlTbGlkZXI6IFNsaWRlcjtcclxuICAgcHJpdmF0ZSBsaWdodENvbG9yU2xpZGVyOiBTbGlkZXI7XHJcbiAgIHByaXZhdGUgYmFsbENvbG9yU2xpZGVyOiBTbGlkZXI7XHJcbiAgIHByaXZhdGUgYW1iaWVudEludGVuc2l0eVNsaWRlcjogU2xpZGVyO1xyXG5cclxuICAgcHJpdmF0ZSBhbmdsZVggPSAwLjU7XHJcbiAgIHByaXZhdGUgYW5nbGVZID0gMC43NTtcclxuICAgcHJpdmF0ZSB6b29tWiA9IDMuNTtcclxuXHJcbiAgIHByaXZhdGUgbGFzdFRpbWVzOiBudW1iZXJbXSA9IFtdO1xyXG4gICBwcml2YXRlIHJlYWRvbmx5IE1BWF9TQU1QTEVTID0gNTAwO1xyXG5cclxuICAgcHJpdmF0ZSBpbml0aWFsRmlsZTogc3RyaW5nO1xyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKGZpbGU6IHN0cmluZykge1xyXG4gICAgICB0aGlzLmluaXRpYWxGaWxlID0gZmlsZTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNyZWF0ZShkaXY6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XHJcblxyXG4gICAgICBkaXYuaWQgPSAnUGF0aFRyYWNlckFwcCc7XHJcblxyXG4gICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdDb250YWluZXInO1xyXG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcclxuXHJcbiAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgIHRoaXMuY2FudmFzLmlkID0gJ2NhbnZhc3gnO1xyXG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xyXG5cclxuICAgICAgbGV0IGNvbnRleHQ6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbDInKTtcclxuXHJcbiAgICAgIGlmICghY29udGV4dCkge1xyXG4gICAgICAgICBjb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFjb250ZXh0KSB7XHJcbiAgICAgICAgIC8vIFRPRE8gZGlzcGxheSBhIG1lc3NhZ2UgYWJvdXQgbm90IGJlaW5nIGFibGUgdG8gY3JlYXRlIGEgV2ViR0wgY29udGV4dFxyXG4gICAgICAgICBjb25zb2xlLmxvZygnVW5hYmxlIHRvIGdldCBXZWJHTCBjb250ZXh0Jyk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5nbCA9IGNvbnRleHQ7XHJcblxyXG4gICAgICBsZXQgc2l6ZSA9IDUxMjtcclxuICAgICAgaWYgKGlzTW9iaWxlKSB7XHJcbiAgICAgICAgIHNpemUgPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZ2wuY2FudmFzLndpZHRoID0gc2l6ZTtcclxuICAgICAgdGhpcy5nbC5jYW52YXMuaGVpZ2h0ID0gc2l6ZTtcclxuICAgICAgZGl2LnN0eWxlLndpZHRoID0gc2l6ZSArICdweCc7XHJcbiAgICAgIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBzaXplICsgJ3B4JztcclxuXHJcbiAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUGF0aFRyYWNlclJlbmRlcmVyKHRoaXMuZ2wpO1xyXG5cclxuICAgICAgY29uc3QgaGFuZGxlciA9IG5ldyBQb2ludGVyRXZlbnRIYW5kbGVyKHRoaXMuY2FudmFzKTtcclxuICAgICAgaGFuZGxlci5vbkRyYWcgPSAocG9zOiBWZWMyLCBkZWx0YTogVmVjMikgPT4gdGhpcy5vbk1vdmUocG9zLCBkZWx0YSk7XHJcbiAgICAgIGhhbmRsZXIub25DbGljayA9IChwb3M6IFZlYzIpID0+IHRoaXMuY2xpY2socG9zLngsIHBvcy55KTtcclxuICAgICAgaGFuZGxlci5vbkRvd24gPSAocG9zOiBWZWMyKSA9PiB0aGlzLm9uRG93bihwb3MueCwgcG9zLnkpO1xyXG5cclxuICAgICAgdGhpcy5sb2FkTW9kZWwodGhpcy5pbml0aWFsRmlsZSkudGhlbigodE9iajogVHJpYW5nbGVPYmopID0+IHtcclxuICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRPYmoodE9iaik7XHJcbiAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLnRpY2soKSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgZHJhd1RpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgZHJhd1RpbWUuaWQgPSAnZHJhd1RpbWUnO1xyXG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZHJhd1RpbWUpO1xyXG5cclxuICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgZGVzY3JpcHRpb24uaWQgPSAnZGVzY3JpcHRpb24nO1xyXG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pO1xyXG5cclxuICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIGJ1dHRvbi5pZCA9ICdtb2RlQnV0dG9uJztcclxuICAgICAgYnV0dG9uLmlubmVySFRNTCA9ICdWaWV3JztcclxuICAgICAgdGhpcy5wb2ludGVyTW9kZSA9IFBvaW50ZXJNb2RlLlZpZXc7XHJcbiAgICAgIGJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICBzd2l0Y2ggKHRoaXMucG9pbnRlck1vZGUpIHtcclxuICAgICAgICAgICAgY2FzZSBQb2ludGVyTW9kZS5WaWV3OlxyXG4gICAgICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gJ0xpZ2h0JztcclxuICAgICAgICAgICAgICAgdGhpcy5wb2ludGVyTW9kZSA9IFBvaW50ZXJNb2RlLkxpZ2h0O1xyXG4gICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgUG9pbnRlck1vZGUuTGlnaHQ6XHJcbiAgICAgICAgICAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAnVmlldyc7XHJcbiAgICAgICAgICAgICAgIHRoaXMucG9pbnRlck1vZGUgPSBQb2ludGVyTW9kZS5WaWV3O1xyXG4gICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG5cclxuICAgICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgcHJvZ3Jlc3NCYXIuaWQgPSAncHJvZ3Jlc3NCYXInO1xyXG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocHJvZ3Jlc3NCYXIpO1xyXG5cclxuICAgICAgdGhpcy5pbnRlbnNpdHlTbGlkZXIgPSBuZXcgU2xpZGVyKGRpdiwge1xyXG4gICAgICAgICBpZDogJ0xpZ2h0SW50ZW5zaXR5JyxcclxuICAgICAgICAgbGFiZWw6ICdMaWdodCBJbnRlbnNpdHknLFxyXG4gICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgIG1heDogMSxcclxuICAgICAgICAgdmFsdWU6IHRoaXMucmVuZGVyZXIudW5pZm9ybXMudUxpZ2h0SW50ZW5zaXR5LFxyXG4gICAgICAgICBjb2xvcnM6IFtodG1sQ29sb3IuYmxhY2ssIGh0bWxDb2xvci53aGl0ZV0sXHJcbiAgICAgICAgIG9uaW5wdXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci51bmlmb3Jtcy51TGlnaHRJbnRlbnNpdHkgPSB0aGlzLmludGVuc2l0eVNsaWRlci52YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5yZXN0YXJ0KCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBidWlsZCBhIHJhbmdlIG9mIGNvbG9yc1xyXG4gICAgICBjb25zdCBtaW4gPSAyMDAwO1xyXG4gICAgICBjb25zdCBtYXggPSAxMDAwMDtcclxuICAgICAgY29uc3QgY29sb3JzOiBodG1sQ29sb3JbXSA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuICAgICAgICAgY29uc3QgdGVtcCA9IG1pbiArIChpIC8gOSkgKiAobWF4IC0gbWluKTtcclxuICAgICAgICAgY29sb3JzLnB1c2goZ2xDb2xvcldpdGhUZW1wZXJhdHVyZS5jcmVhdGUodGVtcCkudG9IdG1sQ29sb3IoKSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5saWdodENvbG9yU2xpZGVyID0gbmV3IFNsaWRlcihkaXYsIHtcclxuICAgICAgICAgaWQ6ICdMaWdodENvbG9yJyxcclxuICAgICAgICAgbGFiZWw6ICdMaWdodCBDb2xvcicsXHJcbiAgICAgICAgIG1pbjogMjAwMCxcclxuICAgICAgICAgbWF4OiAxMDAwMCxcclxuICAgICAgICAgdmFsdWU6IGdsQ29sb3JXaXRoVGVtcGVyYXR1cmUuZGF5bGlnaHQudGVtcGVyYXR1cmUsXHJcbiAgICAgICAgIGNvbG9yczogY29sb3JzLFxyXG4gICAgICAgICBvbmlucHV0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TGlnaHRDb2xvcigpO1xyXG4gICAgICAgICB9LFxyXG4gICAgICAgICBvbkdldFRleHQ6IChzbGlkZXI6IFNsaWRlcikgPT4geyByZXR1cm4gc2xpZGVyLnZhbHVlLnRvRml4ZWQoKSArICdLJyB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gYXBwbHkgdGhlIGluaXRpYWwgY29sb3JzXHJcbiAgICAgIHRoaXMuc2V0TGlnaHRDb2xvcigpO1xyXG5cclxuICAgICAgdGhpcy5iYWxsQ29sb3JTbGlkZXIgPSBuZXcgU2xpZGVyKGRpdiwge1xyXG4gICAgICAgICBpZDogJ0JhbGxDb2xvcicsXHJcbiAgICAgICAgIGxhYmVsOiAnQmFsbCBDb2xvcicsXHJcbiAgICAgICAgIG1pbjogMCxcclxuICAgICAgICAgbWF4OiAxMDAsXHJcbiAgICAgICAgIHZhbHVlOiA1MCxcclxuICAgICAgICAgY29sb3JzOiBza2luVG9uZXMsXHJcbiAgICAgICAgIG9uaW5wdXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci51bmlmb3Jtcy51T2JqQ29sb3IgPSB0aGlzLmJhbGxDb2xvclNsaWRlci5nbENvbG9yO1xyXG4gICAgICAgICAgICB0aGlzLnJlc3RhcnQoKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIG1ha2Ugc3VyZSBnbCBtYXRjaGVzIHRoZSBpbml0aWFsIFVJIHNldHRpbmdcclxuICAgICAgdGhpcy5yZW5kZXJlci51bmlmb3Jtcy51T2JqQ29sb3IgPSB0aGlzLmJhbGxDb2xvclNsaWRlci5nbENvbG9yO1xyXG5cclxuICAgICAgdGhpcy5hbWJpZW50SW50ZW5zaXR5U2xpZGVyID0gbmV3IFNsaWRlcihkaXYsIHtcclxuICAgICAgICAgaWQ6ICdBbWJpZW50SW50ZW5zaXR5JyxcclxuICAgICAgICAgbGFiZWw6ICdBbWJpZW50IExpZ2h0JyxcclxuICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICBtYXg6IDEsXHJcbiAgICAgICAgIHZhbHVlOiB0aGlzLnJlbmRlcmVyLnVuaWZvcm1zLnVBbWJpZW50TGlnaHRJbnRlbnNpdHksXHJcbiAgICAgICAgIGNvbG9yczogW2h0bWxDb2xvci5ibGFjaywgaHRtbENvbG9yLndoaXRlXSxcclxuICAgICAgICAgb25pbnB1dDogKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnVuaWZvcm1zLnVBbWJpZW50TGlnaHRJbnRlbnNpdHkgPSB0aGlzLmFtYmllbnRJbnRlbnNpdHlTbGlkZXIudmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdGFydCgpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgYnVpbGRNZW51KG1lbnViYXI6IE1lbnViYXIpOiB2b2lkIHtcclxuICAgICAgLy8gbm8gbWVudXNcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBsb2FkTW9kZWwoZmlsZTogc3RyaW5nKTogUHJvbWlzZTxUcmlhbmdsZU9iaj4ge1xyXG4gICAgICBpZiAoZmlsZSAmJiBmaWxlLnRvTG93ZXJDYXNlKCkgPT09ICdzcGhlcmUnKSB7XHJcbiAgICAgICAgIHRoaXMucmVuZGVyZXIudW5pZm9ybXMudUJhbGxSYWRpdXMgPSAwO1xyXG4gICAgICAgICBjb25zdCByYWRpdXMgPSAwLjU7XHJcbiAgICAgICAgIGNvbnN0IGNlbnRlciA9IG5ldyBWZWMzKFswLCByYWRpdXMsIDBdKTtcclxuICAgICAgICAgY29uc3QgdE9iaiA9IG5ldyBUcmlhbmdsZU9iakJ1aWxkZXIoKTtcclxuICAgICAgICAgdE9iai5hZGRTcGhlcmUoOCwgcmFkaXVzLCBjZW50ZXIpO1xyXG4gICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRPYmopO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGZpbGUgJiYgZmlsZS50b0xvd2VyQ2FzZSgpID09PSAnY3ViZScpIHtcclxuICAgICAgICAgdGhpcy5yZW5kZXJlci51bmlmb3Jtcy51QmFsbFJhZGl1cyA9IDA7XHJcbiAgICAgICAgIGNvbnN0IHNpemUgPSAwLjg7XHJcbiAgICAgICAgIGNvbnN0IGNlbnRlciA9IG5ldyBWZWMzKFswLCBzaXplIC8gMi4wLCAwXSk7XHJcbiAgICAgICAgIGNvbnN0IHRPYmogPSBuZXcgVHJpYW5nbGVPYmpCdWlsZGVyKCk7XHJcbiAgICAgICAgIHRPYmouYWRkQ3ViZShzaXplLCBjZW50ZXIpO1xyXG4gICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRPYmopO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGZpbGUgJiYgZmlsZS50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcub2JqJykpIHtcclxuICAgICAgICAgdGhpcy5yZW5kZXJlci51bmlmb3Jtcy51QmFsbFJhZGl1cyA9IDA7XHJcbiAgICAgICAgIHJldHVybiBmZXRjaChmaWxlKVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLnRleHQoKSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUcmlhbmdsZU9iakZpbGUoZmlsZSwgcmVzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBzZXRMaWdodENvbG9yKCkge1xyXG5cclxuICAgICAgLy8gdXBkYXRlIHRoZSBjb2xvcnMgZm9yIHRoZSBpbnRlbnNpdHkgc2xpZGVyXHJcbiAgICAgIHRoaXMuaW50ZW5zaXR5U2xpZGVyLmNvbG9ycyA9IFtodG1sQ29sb3IuYmxhY2ssIHRoaXMubGlnaHRDb2xvclNsaWRlci5odG1sQ29sb3JdO1xyXG5cclxuICAgICAgLy8gdXNlIHRoZSB2YWx1ZSBpbiByZW5kZXJpbmdcclxuICAgICAgdGhpcy5yZW5kZXJlci51bmlmb3Jtcy51TGlnaHRDb2xvciA9IHRoaXMubGlnaHRDb2xvclNsaWRlci5nbENvbG9yO1xyXG5cclxuICAgICAgdGhpcy5yZXN0YXJ0KCk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgb25Eb3duKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcblxyXG4gICAgICB0aGlzLnBvaW50ZXJNb2RlU3BlY2lhbCA9ICh4IDwgMC4xICogdGhpcy5jYW52YXMud2lkdGgpID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgdGhpcy5wb3MgPSBTcGhlcmljYWxDb29yZC5mcm9tWFlaKHRoaXMucmVuZGVyZXIudW5pZm9ybXMudUxpZ2h0UG9zLnZhbHVlcyk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgb25Nb3ZlKHBvczogVmVjMiwgZGVsdGE6IFZlYzIpIHtcclxuICAgICAgaWYgKHRoaXMucG9pbnRlck1vZGUgPT09IFBvaW50ZXJNb2RlLlZpZXcpIHtcclxuICAgICAgICAgaWYgKHRoaXMucG9pbnRlck1vZGVTcGVjaWFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuem9vbVogLT0gKGRlbHRhLnkpICogMC4wMTtcclxuICAgICAgICAgICAgdGhpcy56b29tWiA9IGNsYW1wKHRoaXMuem9vbVosIDEsIDgpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGFuZ2xlcyBiYXNlZCBvbiBob3cgZmFyIHdlIG1vdmVkIHNpbmNlIGxhc3QgdGltZVxyXG4gICAgICAgICAgICB0aGlzLmFuZ2xlWSAtPSAoZGVsdGEueCkgKiAwLjAxO1xyXG4gICAgICAgICAgICB0aGlzLmFuZ2xlWCArPSAoZGVsdGEueSkgKiAwLjAxO1xyXG5cclxuICAgICAgICAgICAgLy8gZG9uJ3QgZ28gdXBzaWRlIGRvd25cclxuICAgICAgICAgICAgdGhpcy5hbmdsZVggPSBNYXRoLm1heCh0aGlzLmFuZ2xlWCwgLU1hdGguUEkgLyAyICsgMC4wMSk7XHJcbiAgICAgICAgICAgIHRoaXMuYW5nbGVYID0gTWF0aC5taW4odGhpcy5hbmdsZVgsIE1hdGguUEkgLyAyIC0gMC4wMSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmICh0aGlzLnBvaW50ZXJNb2RlID09PSBQb2ludGVyTW9kZS5MaWdodCkge1xyXG5cclxuICAgICAgICAgaWYgKHRoaXMucG9pbnRlck1vZGVTcGVjaWFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zLnJhZGl1cyAtPSAoZGVsdGEueSkgKiAwLjAwNTtcclxuICAgICAgICAgICAgdGhpcy5wb3MucmFkaXVzID0gY2xhbXAodGhpcy5wb3MucmFkaXVzLCB0aGlzLnJlbmRlcmVyLnVuaWZvcm1zLnVCYWxsUmFkaXVzICsgMC41LCA1KTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci51bmlmb3Jtcy51TGlnaHRQb3MudmFsdWVzID0gdGhpcy5wb3MudG9YWVooKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wb3Mucm90YXRpb25BbmdsZSArPSAoLWRlbHRhLngpO1xyXG4gICAgICAgICAgICB0aGlzLnBvcy5lbGV2YXRpb25BbmdsZSArPSAoLWRlbHRhLnkpO1xyXG4gICAgICAgICAgICB0aGlzLnBvcy5lbGV2YXRpb25BbmdsZSA9IGNsYW1wKHRoaXMucG9zLmVsZXZhdGlvbkFuZ2xlLCAwLCAxODApO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnVuaWZvcm1zLnVMaWdodFBvcy52YWx1ZXMgPSB0aGlzLnBvcy50b1hZWigpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGNsZWFyIHRoZSBzYW1wbGUgYnVmZmVyXHJcbiAgICAgIHRoaXMucmVzdGFydCgpO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogUHJvY2Vzc2VzIGEgY2xpY2svdG91Y2ggZXZlbnQgYXQgdGhlIGRlc2lnbmF0ZWQgY29vcmRpbmF0ZXMuIElmIGEgaGl0XHJcbiAgICAqIG9jY3VycywgdGhlIGNsaWNrZWQgb24gdmlldyBpcyBzd2FwcGVkIGZvciB0aGUgcHJpbWFyeSB2aWV3IGFuZCB0cnVlXHJcbiAgICAqIGlzIHJldHVybmVkLiBJZiBubyBoaXQgb2NjdXJzLCBmYWxzZSBpcyByZXR1cm5lZC5cclxuICAgICogXHJcbiAgICAqIEBwYXJhbSB4IFRoZSB4IGNvb3JkaW5hdGUuXHJcbiAgICAqIEBwYXJhbSB5IFRoZSB5IGNvb3JkaW5hdGUuXHJcbiAgICAqIEByZXR1cm5zIHRydWUgaWYgYSBoaXQgb24gb25lIG9mIHRoZSB2aWV3cyBvY2N1cnMuXHJcbiAgICAqL1xyXG4gICBwcml2YXRlIGNsaWNrKHg6IG51bWJlciwgeTogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgIC8vIFRPRE8gaGFuZGxlIHRoaXMgd2l0aGluIHRoZSBQYXRoVHJhY2VyIGNsYXNzIHNvIHRoYXQgd2UgZG9uJ3QgaGF2ZSB0byBoYXJkIGNvZGUgdmlldyBzdHVmZlxyXG4gICAgICBjb25zdCBzaXplID0gMC4yICogdGhpcy5jYW52YXMud2lkdGg7XHJcblxyXG4gICAgICBpZiAoeSA8IHNpemUpIHtcclxuXHJcbiAgICAgICAgIGlmICh4ID4gdGhpcy5jYW52YXMud2lkdGggLSAxICogc2l6ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnN3YXAoMik7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGVzY3JpcHRpb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSBpZiAoeCA+IHRoaXMuY2FudmFzLndpZHRoIC0gMiAqIHNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5zd2FwKDEpO1xyXG4gICAgICAgICAgICB0aGlzLnNldERlc2NyaXB0aW9uKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2UgaWYgKHggPiB0aGlzLmNhbnZhcy53aWR0aCAtIDMgKiBzaXplKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3dhcCgwKTtcclxuICAgICAgICAgICAgdGhpcy5zZXREZXNjcmlwdGlvbigpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgc2V0RGVzY3JpcHRpb24oKSB7XHJcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uJyk7XHJcbiAgICAgIHN3aXRjaCAodGhpcy5yZW5kZXJlci5yZW5kZXJNb2RlKSB7XHJcbiAgICAgICAgIGNhc2UgUmVuZGVyTW9kZS5BcnRpc3Q6XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLmlubmVyVGV4dCA9ICcnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGNhc2UgUmVuZGVyTW9kZS5DaHJvbWE6XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLmlubmVyVGV4dCA9ICdDaHJvbWEgVmlldzogcmVkPWhpZ2hlc3QgY2hyb21hJztcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICBjYXNlIFJlbmRlck1vZGUuVmFsdWU6XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLmlubmVyVGV4dCA9ICdWYWx1ZSBWaWV3JztcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICBjYXNlIFJlbmRlck1vZGUuQmFuZHM6XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLmlubmVyVGV4dCA9ICc1IENvbG9yICsgSGlnaGxpZ2h0IFZpZXcnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHVwZGF0ZVRleHR1cmUoKSB7XHJcbiAgICAgIGNvbnN0IG1vZGVsdmlldyA9IE1hdDQubWFrZUxvb2tBdChcclxuICAgICAgICAgdGhpcy5yZW5kZXJlci51bmlmb3Jtcy51RXllLFxyXG4gICAgICAgICBuZXcgVmVjMyhbMCwgMSwgMF0pLCAgLy8gY2VudGVyIHBvaW50XHJcbiAgICAgICAgIG5ldyBWZWMzKFswLCAxLCAwXSkgICAvLyB1cCB2ZWN0b3JcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnN0IHByb2plY3Rpb24gPSBNYXQ0Lm1ha2VQZXJzcGVjdGl2ZSg1NSwgMSwgMC4xLCAxMDApO1xyXG4gICAgICBjb25zdCBtb2RlbHZpZXdQcm9qZWN0aW9uID0gcHJvamVjdGlvbi5tdWx0TShtb2RlbHZpZXcpO1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZVRleHR1cmUobW9kZWx2aWV3UHJvamVjdGlvbik7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgZGlzcGxheVRleHR1cmUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuZGlzcGxheVRleHR1cmUoKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHJlc3RhcnQoKTogdm9pZCB7XHJcbiAgICAgIGlmICh0aGlzLnJlbmRlcmVyKSB7XHJcbiAgICAgICAgIHRoaXMucmVuZGVyZXIucmVzdGFydCgpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzd2FwKHBvczogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuc3dhcChwb3MpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgdGljaygpIHtcclxuXHJcbiAgICAgIHRoaXMudXBkYXRlVGltZXJMYWJlbCgpO1xyXG4gICAgICB0aGlzLnVwZGF0ZVByb2dyZXNzKCk7XHJcbiAgICAgIGlmICh0aGlzLnJlbmRlcmVyLnVuaWZvcm1zLnVTYW1wbGUgPCB0aGlzLk1BWF9TQU1QTEVTKSB7XHJcbiAgICAgICAgIHRoaXMucmVuZGVyZXIudW5pZm9ybXMudUV5ZS52YWx1ZXNbMF0gPSB0aGlzLnpvb21aICogTWF0aC5zaW4odGhpcy5hbmdsZVkpICogTWF0aC5jb3ModGhpcy5hbmdsZVgpO1xyXG4gICAgICAgICB0aGlzLnJlbmRlcmVyLnVuaWZvcm1zLnVFeWUudmFsdWVzWzFdID0gdGhpcy56b29tWiAqIE1hdGguc2luKHRoaXMuYW5nbGVYKTtcclxuICAgICAgICAgdGhpcy5yZW5kZXJlci51bmlmb3Jtcy51RXllLnZhbHVlc1syXSA9IHRoaXMuem9vbVogKiBNYXRoLmNvcyh0aGlzLmFuZ2xlWSkgKiBNYXRoLmNvcyh0aGlzLmFuZ2xlWCk7XHJcblxyXG4gICAgICAgICB0aGlzLnVwZGF0ZVRleHR1cmUoKTtcclxuICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dHVyZSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmFuaW1hdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMudGljaygpKTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSB1cGRhdGVUaW1lckxhYmVsKCkge1xyXG5cclxuICAgICAgY29uc3QgdCA9IHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgY29uc3QgZHJhd1RpbWVMYWJlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkcmF3VGltZScpO1xyXG4gICAgICBpZiAodGhpcy5sYXN0VGltZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICBjb25zdCBlbGFwc2VkTXMgPSAodCAtIHRoaXMubGFzdFRpbWVzWzBdKSAvIHRoaXMubGFzdFRpbWVzLmxlbmd0aDtcclxuICAgICAgICAgZHJhd1RpbWVMYWJlbC5pbm5lclRleHQgPSBlbGFwc2VkTXMudG9GaXhlZCgwKSArICdtcyc7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5sYXN0VGltZXMucHVzaCh0KTtcclxuICAgICAgaWYgKHRoaXMubGFzdFRpbWVzLmxlbmd0aCA+IDMwKSB7XHJcbiAgICAgICAgIHRoaXMubGFzdFRpbWVzLnNoaWZ0KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRyYXdUaW1lTGFiZWwuc3R5bGUudmlzaWJpbGl0eSA9IHRoaXMucmVuZGVyZXIudW5pZm9ybXMudVNhbXBsZSA8IHRoaXMuTUFYX1NBTVBMRVMgPyAndmlzaWJsZScgOiAnaGlkZGVuJztcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSB1cGRhdGVQcm9ncmVzcygpIHtcclxuICAgICAgY29uc3QgcHJvZ3Jlc3MgPSB0aGlzLnJlbmRlcmVyLnVuaWZvcm1zLnVTYW1wbGUgLyB0aGlzLk1BWF9TQU1QTEVTO1xyXG4gICAgICBjb25zdCBiYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3NCYXInKTtcclxuICAgICAgaWYgKHByb2dyZXNzID49IDAgJiYgcHJvZ3Jlc3MgPCAxKSB7XHJcbiAgICAgICAgIGJhci5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG4gICAgICAgICBsZXQgdyA9IHRoaXMuY2FudmFzLndpZHRoO1xyXG4gICAgICAgICBiYXIuc3R5bGUucmlnaHQgPSB3ICogKDEgLSBwcm9ncmVzcykgKyAncHgnO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICBiYXIuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gICAgICB9XHJcbiAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgVm9sdW1lIH0gZnJvbSAnLi9Wb2x1bWUnO1xyXG5pbXBvcnQgeyBUcmlhbmdsZU9iaiB9IGZyb20gJy4uLy4uL1V0aWwzRC9UcmlhbmdsZU9iaic7XHJcbmltcG9ydCB7IFZlYzMgfSBmcm9tICcuLi8uLi9VdGlsM0QvVmVjJztcclxuaW1wb3J0IHsgSW5kZXhlZFZlYzMgfSBmcm9tICcuLi8uLi9VdGlsM0QvSW5kZXhlZFZlYzMnO1xyXG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4uLy4uL1V0aWwvR2xvYmFscyc7XHJcblxyXG4vKipcclxuICogV3JhcHBlciBmb3IgVHJpYW5nbGVPYmogdXNlZCBieSB0aGUgUGF0aFRyYWNlciBhcHAuIEFkZHMgdGhlIGFiaWxpdHkgdG8gXHJcbiAqIG1vdmUgdmVydGljZXMgKGFzIG9wcG9zZWQgdG8gdXNpbmcgYSB0cmFuZm9ybWF0aW9uIG1hdHJpeCkgYW5kIHRvIGJyZWFrXHJcbiAqIHRoaW5ncyBkb3duIGludG8gdm9sdW1lcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBQYXRoVHJhY2VyT2JqIHtcclxuICAgcHVibGljIHZvbHVtZXM6IFZvbHVtZVtdID0gW107XHJcbiAgIHB1YmxpYyB0T2JqOiBUcmlhbmdsZU9iajtcclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih0T2JqOiBUcmlhbmdsZU9iaikge1xyXG4gICAgICB0aGlzLnRPYmogPSB0T2JqO1xyXG5cclxuICAgICAgdGhpcy5hdXRvQ2VudGVyKCk7XHJcbiAgICAgIHRoaXMuYnJlYWtJbnRvVm9sdW1lcygpO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogU2NhbGVzIHRoZSBvYmplY3QsIGNlbnRlcnMgaXQsIGFuZCBwdXRzIGl0IG9uIHRoZSBmbG9vciBhdCB5PTBcclxuICAgICovXHJcbiAgIHByaXZhdGUgYXV0b0NlbnRlcigpIHtcclxuXHJcbiAgICAgIGNvbnN0IGNlbnRlciA9IHRoaXMudE9iai5ib3guY2VudGVyO1xyXG4gICAgICBjb25zdCB0cmFucyA9IG5ldyBWZWMzKFstY2VudGVyLngsIC1jZW50ZXIueSArIHRoaXMudE9iai5oZWlnaHQgLyAyLCAtY2VudGVyLnpdKTtcclxuXHJcbiAgICAgIGNvbnN0IHNjYWxlID0gMiAvIHRoaXMudE9iai5kaWFnb25hbDtcclxuXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50T2JqLm51bVZlcnRpY2VzOyBpKyspIHtcclxuICAgICAgICAgY29uc3QgdiA9IG5ldyBJbmRleGVkVmVjMyh0aGlzLnRPYmoudmVydGljZXMsIGkpO1xyXG5cclxuICAgICAgICAgdi54ID0gKHYueCArIHRyYW5zLngpICogc2NhbGU7XHJcbiAgICAgICAgIHYueSA9ICh2LnkgKyB0cmFucy55KSAqIHNjYWxlO1xyXG4gICAgICAgICB2LnogPSAodi56ICsgdHJhbnMueikgKiBzY2FsZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy50T2JqLmJveC5taW4ueCA9ICh0aGlzLnRPYmouYm94Lm1pbi54ICsgdHJhbnMueCkgKiBzY2FsZTtcclxuICAgICAgdGhpcy50T2JqLmJveC5taW4ueSA9ICh0aGlzLnRPYmouYm94Lm1pbi55ICsgdHJhbnMueSkgKiBzY2FsZTtcclxuICAgICAgdGhpcy50T2JqLmJveC5taW4ueiA9ICh0aGlzLnRPYmouYm94Lm1pbi56ICsgdHJhbnMueikgKiBzY2FsZTtcclxuICAgICAgdGhpcy50T2JqLmJveC5tYXgueCA9ICh0aGlzLnRPYmouYm94Lm1heC54ICsgdHJhbnMueCkgKiBzY2FsZTtcclxuICAgICAgdGhpcy50T2JqLmJveC5tYXgueSA9ICh0aGlzLnRPYmouYm94Lm1heC55ICsgdHJhbnMueSkgKiBzY2FsZTtcclxuICAgICAgdGhpcy50T2JqLmJveC5tYXgueiA9ICh0aGlzLnRPYmouYm94Lm1heC56ICsgdHJhbnMueikgKiBzY2FsZTtcclxuXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52b2x1bWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgIGNvbnN0IHYgPSB0aGlzLnZvbHVtZXNbaV07XHJcbiAgICAgICAgIHYuYm94TWluLnggPSAodi5ib3hNaW4ueCArIHRyYW5zLngpICogc2NhbGU7XHJcbiAgICAgICAgIHYuYm94TWluLnkgPSAodi5ib3hNaW4ueSArIHRyYW5zLnkpICogc2NhbGU7XHJcbiAgICAgICAgIHYuYm94TWluLnogPSAodi5ib3hNaW4ueiArIHRyYW5zLnopICogc2NhbGU7XHJcbiAgICAgICAgIHYuYm94TWF4LnggPSAodi5ib3hNYXgueCArIHRyYW5zLngpICogc2NhbGU7XHJcbiAgICAgICAgIHYuYm94TWF4LnkgPSAodi5ib3hNYXgueSArIHRyYW5zLnkpICogc2NhbGU7XHJcbiAgICAgICAgIHYuYm94TWF4LnogPSAodi5ib3hNYXgueiArIHRyYW5zLnopICogc2NhbGU7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIEJyZWFrcyB0aGUgb2JqZWN0IGludG8gZXZlbmx5IHNwYWNlZCB2b2x1bWVzLiBUaGUgbnVtYmVyIG9mIHZvbHVtZXMgaXMgYXV0b21hdGljYWxseVxyXG4gICAgKiBkZXRlcm1pbmVkIGJhc2VkIG9uIHRoZSBudW1iZXIgb2YgdHJpYW5nbGVzLlxyXG4gICAgKi9cclxuICAgcHVibGljIGJyZWFrSW50b1ZvbHVtZXMoKSB7XHJcbiAgICAgIGxldCBudW1TdGVwcztcclxuICAgICAgaWYgKHRoaXMudE9iai5udW1UcmlhbmdsZXMgPCA0MCkge1xyXG4gICAgICAgICBudW1TdGVwcyA9IDE7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy50T2JqLm51bVRyaWFuZ2xlcyA8IDE1MDApIHtcclxuICAgICAgICAgbnVtU3RlcHMgPSAyO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICBudW1TdGVwcyA9IDM7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy52b2x1bWVzID0gW107XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5wb3cobnVtU3RlcHMsIDMpOyBpKyspIHtcclxuICAgICAgICAgdGhpcy52b2x1bWVzLnB1c2gobmV3IFZvbHVtZSgpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRPYmoubnVtVHJpYW5nbGVzOyBpKyspIHtcclxuICAgICAgICAgY29uc3QgdCA9IHRoaXMudE9iai5nZXRUcmlhbmdsZShpKTtcclxuICAgICAgICAgbGV0IHggPSBNYXRoLmZsb29yKG51bVN0ZXBzICogKHQubWluWCAtIHRoaXMudE9iai5ib3gubWluLngpIC8gKHRoaXMudE9iai5ib3gud2lkdGgpKTtcclxuICAgICAgICAgbGV0IHkgPSBNYXRoLmZsb29yKG51bVN0ZXBzICogKHQubWluWSAtIHRoaXMudE9iai5ib3gubWluLnkpIC8gKHRoaXMudE9iai5ib3guaGVpZ2h0KSk7XHJcbiAgICAgICAgIGxldCB6ID0gTWF0aC5mbG9vcihudW1TdGVwcyAqICh0Lm1pblogLSB0aGlzLnRPYmouYm94Lm1pbi56KSAvICh0aGlzLnRPYmouYm94LmRlcHRoKSk7XHJcbiAgICAgICAgIHggPSBjbGFtcCh4LCAwLCBudW1TdGVwcyAtIDEpO1xyXG4gICAgICAgICB5ID0gY2xhbXAoeSwgMCwgbnVtU3RlcHMgLSAxKTtcclxuICAgICAgICAgeiA9IGNsYW1wKHosIDAsIG51bVN0ZXBzIC0gMSk7XHJcbiAgICAgICAgIGNvbnN0IGluZGV4ID0geCArIHkgKiBudW1TdGVwcyArIHogKiBudW1TdGVwcyAqIG51bVN0ZXBzO1xyXG4gICAgICAgICB0aGlzLnZvbHVtZXNbaW5kZXhdLnB1c2godCk7XHJcbiAgICAgIH1cclxuICAgfVxyXG59IiwiaW1wb3J0IHRvU2NyZWVuVmVydGV4U291cmNlIGZyb20gJy4uLy4uL3NoYWRlcnMvUGF0aFRyYWNlclRvU2NyZWVuVmVydGV4Lmdsc2wnO1xyXG5pbXBvcnQgdG9TY3JlZW5GcmFnbWVudFNvdXJjZSBmcm9tICcuLi8uLi9zaGFkZXJzL1BhdGhUcmFjZXJUb1NjcmVlbkZyYWdtZW50Lmdsc2wnO1xyXG5pbXBvcnQgdG9UZXh0dXJlVmVydGV4U291cmNlIGZyb20gJy4uLy4uL3NoYWRlcnMvUGF0aFRyYWNlclRvVGV4dHVyZVZlcnRleC5nbHNsJztcclxuaW1wb3J0IHRvVGV4dHVyZUZyYWdtZW50U291cmNlIGZyb20gJy4uLy4uL3NoYWRlcnMvUGF0aFRyYWNlclRvVGV4dHVyZUZyYWdtZW50Lmdsc2wnO1xyXG5pbXBvcnQgeyBnbENvbG9yMyB9IGZyb20gJy4uLy4uL2dsL2dsQ29sb3InO1xyXG5pbXBvcnQgeyBWZWMzLCBWZWM0IH0gZnJvbSAnLi4vLi4vVXRpbDNEL1ZlYyc7XHJcbmltcG9ydCB7IFNwaGVyaWNhbENvb3JkIH0gZnJvbSAnLi4vLi4vVXRpbDNEL1NwaGVyaWNhbENvb3JkJztcclxuaW1wb3J0IHsgZ2xGcmFtZUJ1ZmZlciB9IGZyb20gJy4uLy4uL2dsL2dsRnJhbWVCdWZmZXInO1xyXG5pbXBvcnQgeyBnbFRleHR1cmUsIGdsVGV4dHVyZVN0eWxlIH0gZnJvbSAnLi4vLi4vZ2wvZ2xUZXh0dXJlJztcclxuaW1wb3J0IHsgZ2xQcm9ncmFtIH0gZnJvbSAnLi4vLi4vZ2wvZ2xQcm9ncmFtJztcclxuaW1wb3J0IHsgZ2xBdHRyaWJ1dGVCdWZmZXIgfSBmcm9tICcuLi8uLi9nbC9nbEF0dHJpYnV0ZUJ1ZmZlcic7XHJcbmltcG9ydCB7IENvbG9yQW5hbHl6ZXIgfSBmcm9tICcuL0NvbG9yQW5hbHl6ZXInO1xyXG5pbXBvcnQgeyBnbFVuaWZvcm1CbG9jayB9IGZyb20gJy4uLy4uL2dsL2dsVW5pZm9ybUJsb2NrJztcclxuaW1wb3J0IHsgaXNNb2JpbGUgfSBmcm9tICcuLi8uLi9VdGlsL0dsb2JhbHMnO1xyXG5pbXBvcnQgeyBUcmlhbmdsZU9iaiB9IGZyb20gJy4uLy4uL1V0aWwzRC9UcmlhbmdsZU9iaic7XHJcbmltcG9ydCB7IFByb2ZpbGVyIH0gZnJvbSAnLi4vLi4vVXRpbC9Qcm9maWxlcic7XHJcbmltcG9ydCB7IFBhdGhUcmFjZXJPYmogfSBmcm9tICcuL1BhdGhUcmFjZXJPYmonO1xyXG5pbXBvcnQgeyBnbFVuaWZvcm0gfSBmcm9tICcuLi8uLi9nbC9nbFVuaWZvcm0nO1xyXG5pbXBvcnQgeyBNYXQ0IH0gZnJvbSAnLi4vLi4vVXRpbDNEL01hdCc7XHJcbmltcG9ydCB7IENvbG9yUmFuZ2UgfSBmcm9tICcuLi8uLi9HVUkvQ29sb3JSYW5nZSc7XHJcblxyXG4vKipcclxuICogUmVuZGVyaW5nIG1vZGUgZm9yIGRpc3BsYXlpbmcgdGhlIHRleHR1cmVcclxuICovXHJcbmV4cG9ydCBlbnVtIFJlbmRlck1vZGUge1xyXG4gICBBcnRpc3QgPSAwLFxyXG4gICBWYWx1ZSA9IDEsXHJcbiAgIENocm9tYSA9IDIsXHJcbiAgIEJhbmRzID0gMyxcclxufVxyXG5cclxuY2xhc3MgVW5pZm9ybXMge1xyXG4gICB1U2NhbGUgPSAxLjA7XHJcbiAgIHVYT2Zmc2V0ID0gMC4wO1xyXG4gICB1WU9mZnNldCA9IDAuMDtcclxuICAgdU1vZGUgPSAwO1xyXG4gICB1TWF4Q2hyb21hID0gMS4wO1xyXG5cclxuICAgdUhpZ2hsaWdodENvbG9yOiBnbENvbG9yMztcclxuICAgdUxpZ2h0TGlnaHRDb2xvcjogZ2xDb2xvcjM7XHJcbiAgIHVNaWRMaWdodENvbG9yOiBnbENvbG9yMztcclxuICAgdURhcmtMaWdodENvbG9yOiBnbENvbG9yMztcclxuXHJcbiAgIHVTaGFkb3dDb2xvcjogZ2xDb2xvcjM7XHJcbiAgIHVSZWZsZWN0ZWRMaWdodENvbG9yOiBnbENvbG9yMztcclxuICAgdURhcmtBY2NlbnRDb2xvcjogZ2xDb2xvcjM7XHJcbiAgIHVMaWdodEFscGhhID0gMTAwMTtcclxuICAgdVNoYWRvd0FscGhhID0gMTAwMDtcclxuXHJcbiAgIHVMaWdodEludGVuc2l0eSA9IDAuNztcclxuICAgdUxpZ2h0Q29sb3IgPSBuZXcgZ2xDb2xvcjMoWzEuMCwgMS4wLCAxLjBdKTtcclxuICAgdUxpZ2h0UG9zID0gbmV3IFZlYzMobmV3IFNwaGVyaWNhbENvb3JkKDIsIDYwLCAxMTApLnRvWFlaKCkpO1xyXG4gICB1QW1iaWVudExpZ2h0SW50ZW5zaXR5ID0gMC4zO1xyXG4gICB1T2JqQ29sb3IgPSBuZXcgZ2xDb2xvcjMoWzAuNSwgMC41LCAwLjhdKTtcclxuICAgdUJhbGxSYWRpdXMgPSAwLjU7XHJcbiAgIHVFeWUgPSBuZXcgVmVjMyhbMCwgMCwgMF0pO1xyXG4gICB1VGV4dHVyZVNpemUgPSAyNTY7XHJcbiAgIHVSYW5kb20gPSBNYXRoLnJhbmRvbSgpO1xyXG4gICB1UmF5MDAgPSBuZXcgVmVjMyhbMCwgMCwgMF0pO1xyXG4gICB1UmF5MDEgPSBuZXcgVmVjMyhbMCwgMCwgMF0pO1xyXG4gICB1UmF5MTAgPSBuZXcgVmVjMyhbMCwgMCwgMF0pO1xyXG4gICB1UmF5MTEgPSBuZXcgVmVjMyhbMCwgMCwgMF0pO1xyXG4gICB1U2FtcGxlID0gMC4wO1xyXG59XHJcblxyXG4vKipcclxuICogQ2xhc3MgdGhhdCBkb2VzIHRoZSB3b3JrIG9mIGJ1aWxkaW5nIHRoZSBQYXRoIFRyYWNlZCB0ZXh0dXJlXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUGF0aFRyYWNlclJlbmRlcmVyIHtcclxuXHJcbiAgIHByaXZhdGUgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBudWxsO1xyXG4gICBwcml2YXRlIHZlcnRleEJ1ZmZlcjogV2ViR0xCdWZmZXI7XHJcbiAgIHByaXZhdGUgZnJhbWVCdWZmZXI6IGdsRnJhbWVCdWZmZXI7XHJcbiAgIHByaXZhdGUgdGV4dHVyZXM6IGdsVGV4dHVyZVtdO1xyXG4gICBwcml2YXRlIHRvU2NyZWVuUHJvZ3JhbTogZ2xQcm9ncmFtO1xyXG4gICBwcml2YXRlIHRvU2NyZWVuVmVydGV4QXR0cmlidXRlOiBnbEF0dHJpYnV0ZUJ1ZmZlcjtcclxuICAgcHJpdmF0ZSB0b1RleHR1cmVQcm9ncmFtOiBnbFByb2dyYW07XHJcbiAgIHByaXZhdGUgdG9UZXh0dXJlVmVydGV4QXR0cmlidXRlOiBnbEF0dHJpYnV0ZUJ1ZmZlcjtcclxuICAgcHJpdmF0ZSBhbmFseXplcjogQ29sb3JBbmFseXplcjtcclxuICAgcHJpdmF0ZSB0QmxvY2s6IGdsVW5pZm9ybUJsb2NrO1xyXG4gICBwcml2YXRlIHZCbG9jazogZ2xVbmlmb3JtQmxvY2s7XHJcbiAgIHB1YmxpYyB1bmlmb3JtcyA9IG5ldyBVbmlmb3JtcygpO1xyXG5cclxuICAgcHJpdmF0ZSBtYWluVmlldyA9IFJlbmRlck1vZGUuQXJ0aXN0O1xyXG4gICBwcml2YXRlIHNtYWxsVmlld3MgPSBbXHJcbiAgICAgIFJlbmRlck1vZGUuQ2hyb21hLFxyXG4gICAgICBSZW5kZXJNb2RlLlZhbHVlLFxyXG4gICAgICBSZW5kZXJNb2RlLkJhbmRzLFxyXG4gICBdO1xyXG5cclxuICAgcHJpdmF0ZSB2ZXJ0aWNlcyA9IFtcclxuICAgICAgLTEsIC0xLFxyXG4gICAgICAtMSwgKzEsXHJcbiAgICAgICsxLCAtMSxcclxuICAgICAgKzEsICsxXHJcbiAgIF07XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IoXHJcbiAgICAgIGdsQ3R4OiBXZWJHTFJlbmRlcmluZ0NvbnRleHQgfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LFxyXG4gICApIHtcclxuXHJcbiAgICAgIHRoaXMuZ2wgPSBnbEN0eDtcclxuICAgICAgbGV0IGdsID0gdGhpcy5nbDtcclxuXHJcbiAgICAgIC8vIGxhcmdlciB0ZXh0dXJlIGlzIGhpZ2hlciByZXNvbHV0aW9uLCBidXQgdGFrZXMgbG9uZ2VyIHRvIGNvbXB1dGVcclxuICAgICAgaWYgKGlzTW9iaWxlKSB7XHJcbiAgICAgICAgIHRoaXMudW5pZm9ybXMudVRleHR1cmVTaXplID0gMjU2O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICAvLyB0aGlzLnVuaWZvcm1zLnVUZXh0dXJlU2l6ZSA9IDUxMjtcclxuICAgICAgICAgdGhpcy51bmlmb3Jtcy51VGV4dHVyZVNpemUgPSAyNTY7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5hbmFseXplciA9IG5ldyBDb2xvckFuYWx5emVyKHRoaXMudW5pZm9ybXMudVRleHR1cmVTaXplKTtcclxuXHJcbiAgICAgIC8vIGNyZWF0ZSBmcmFtZWJ1ZmZlclxyXG4gICAgICB0aGlzLmZyYW1lQnVmZmVyID0gbmV3IGdsRnJhbWVCdWZmZXIoXHJcbiAgICAgICAgIGdsLFxyXG4gICAgICAgICB0aGlzLnVuaWZvcm1zLnVUZXh0dXJlU2l6ZSxcclxuICAgICAgICAgdGhpcy51bmlmb3Jtcy51VGV4dHVyZVNpemUsXHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvLyBjcmVhdGUgdHdvIHRleHR1cmVzLiBPbmUgd2UgZGlzcGxheSBhbmQgb25lIHdlIGRyYXcgdG9cclxuICAgICAgdGhpcy50ZXh0dXJlcyA9IFtdO1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI7IGkrKykge1xyXG4gICAgICAgICB0aGlzLnRleHR1cmVzLnB1c2godGhpcy5mcmFtZUJ1ZmZlci5jcmVhdGVUZXh0dXJlKGdsVGV4dHVyZVN0eWxlLkZsb2F0KSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGNyZWF0ZSB0b1NjcmVlbiBzaGFkZXJcclxuICAgICAgdGhpcy50b1NjcmVlblByb2dyYW0gPSBuZXcgZ2xQcm9ncmFtKGdsLCB0b1NjcmVlblZlcnRleFNvdXJjZSwgdG9TY3JlZW5GcmFnbWVudFNvdXJjZSk7XHJcbiAgICAgIHRoaXMudG9TY3JlZW5WZXJ0ZXhBdHRyaWJ1dGUgPSBuZXcgZ2xBdHRyaWJ1dGVCdWZmZXIoZ2wsIHRoaXMudG9TY3JlZW5Qcm9ncmFtLCAndmVydGV4Jyk7XHJcbiAgICAgIHRoaXMudG9TY3JlZW5WZXJ0ZXhBdHRyaWJ1dGUudXBsb2FkKHRoaXMudmVydGljZXMpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc2V0T2JqKHRPYmo6IFRyaWFuZ2xlT2JqKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuY29tcGlsZVNoYWRlcih0T2JqKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZnJhbWVCdWZmZXIuZGlzcG9zZSgpO1xyXG4gICAgICB0aGlzLnRleHR1cmVzWzBdLmRpc3Bvc2UoKTtcclxuICAgICAgdGhpcy50ZXh0dXJlc1sxXS5kaXNwb3NlKCk7XHJcbiAgICAgIGlmICh0aGlzLnZCbG9jaykge1xyXG4gICAgICAgICB0aGlzLnZCbG9jay5kaXNwb3NlKCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMudEJsb2NrKSB7XHJcbiAgICAgICAgIHRoaXMudEJsb2NrLmRpc3Bvc2UoKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGNvbXBpbGVTaGFkZXIodE9iaj86IFRyaWFuZ2xlT2JqKSB7XHJcbiAgICAgIGxldCBnbCA9IHRoaXMuZ2w7XHJcblxyXG4gICAgICBpZiAodGhpcy50b1RleHR1cmVQcm9ncmFtKSB7XHJcbiAgICAgICAgIHRoaXMudG9UZXh0dXJlUHJvZ3JhbS5kaXNwb3NlKCk7XHJcbiAgICAgICAgIHRoaXMudG9UZXh0dXJlUHJvZ3JhbSA9IG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBwID0gbmV3IFByb2ZpbGVyKCk7XHJcbiAgICAgIC8vIGNyZWF0ZSB0aGUgdG9UZXh0dXJlIHNoYWRlclxyXG4gICAgICBpZiAodE9iaiAmJiB0T2JqLm51bVRyaWFuZ2xlcyA+IDApIHtcclxuXHJcbiAgICAgICAgIGxldCBwT2JqID0gbmV3IFBhdGhUcmFjZXJPYmoodE9iaik7XHJcblxyXG4gICAgICAgICB0aGlzLnRvVGV4dHVyZVByb2dyYW0gPSBuZXcgZ2xQcm9ncmFtKFxyXG4gICAgICAgICAgICBnbCxcclxuICAgICAgICAgICAgdG9UZXh0dXJlVmVydGV4U291cmNlXHJcbiAgICAgICAgICAgICAgIC5yZXBsYWNlKCc8VkVSU0lPTj4nLCAnI3ZlcnNpb24gMzAwIGVzJylcclxuICAgICAgICAgICAgICAgLnJlcGxhY2UoJ05PVEhJTkcnLCAnVVNFX1RSSUFOR0xFUycpLFxyXG4gICAgICAgICAgICB0b1RleHR1cmVGcmFnbWVudFNvdXJjZVxyXG4gICAgICAgICAgICAgICAucmVwbGFjZSgnPFZFUlNJT04+JywgJyN2ZXJzaW9uIDMwMCBlcycpXHJcbiAgICAgICAgICAgICAgIC5yZXBsYWNlKCdOT1RISU5HJywgJ1VTRV9UUklBTkdMRVMnKVxyXG4gICAgICAgICAgICAgICAucmVwbGFjZSgnPE5VTV9WRVJUSUNFUz4nLCB0T2JqLm51bVZlcnRpY2VzLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgICAgIC5yZXBsYWNlKCc8TlVNX1ZPTFVNRVM+JywgcE9iai52b2x1bWVzLmxlbmd0aC50b1N0cmluZygpKVxyXG4gICAgICAgICAgICAgICAucmVwbGFjZSgnPE5VTV9UUklBTkdMRVM+JywgdE9iai5udW1UcmlhbmdsZXMudG9TdHJpbmcoKSlcclxuICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgIC8vIHVwbG9hZCB0cmlhbmdsZXMgdG8gdGhlIEdQVVxyXG4gICAgICAgICB0aGlzLnVwbG9hZFVuaWZvcm1zKHBPYmopO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICB0aGlzLnRvVGV4dHVyZVByb2dyYW0gPSBuZXcgZ2xQcm9ncmFtKFxyXG4gICAgICAgICAgICBnbCxcclxuICAgICAgICAgICAgdG9UZXh0dXJlVmVydGV4U291cmNlXHJcbiAgICAgICAgICAgICAgIC5yZXBsYWNlKCc8VkVSU0lPTj4nLCAnJyksXHJcbiAgICAgICAgICAgIHRvVGV4dHVyZUZyYWdtZW50U291cmNlXHJcbiAgICAgICAgICAgICAgIC5yZXBsYWNlKCc8VkVSU0lPTj4nLCAnJylcclxuICAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy50b1RleHR1cmVWZXJ0ZXhBdHRyaWJ1dGUgPSBuZXcgZ2xBdHRyaWJ1dGVCdWZmZXIoZ2wsIHRoaXMudG9UZXh0dXJlUHJvZ3JhbSwgJ3ZlcnRleCcpO1xyXG4gICAgICB0aGlzLnRvVGV4dHVyZVZlcnRleEF0dHJpYnV0ZS51cGxvYWQodGhpcy52ZXJ0aWNlcyk7XHJcblxyXG4gICAgICBwLmxvZygnY29tcGlsZScpO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogVXBsb2FkcyBhbGwgdGhlIHRyaWFuZ2xlIGRhdGEgdG8gV2ViR0xcclxuICAgICogXHJcbiAgICAqIEBwYXJhbSBwcm9ncmFtIFRoZSBwcm9ncmFtIHRvIHVwbG9hZCB0b1xyXG4gICAgKi9cclxuICAgcHJpdmF0ZSB1cGxvYWRVbmlmb3JtcyhwT2JqOiBQYXRoVHJhY2VyT2JqKSB7XHJcblxyXG4gICAgICBsZXQgZ2wgPSB0aGlzLmdsIGFzIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XHJcbiAgICAgIGxldCB0T2JqID0gcE9iai50T2JqO1xyXG5cclxuICAgICAgLy8gdXBsb2FkIHRoZSBiaWcgY2h1bmtzIGFzIFVuaWZvcm0gQmxvY2tzXHJcbiAgICAgIGxldCBibG9ja0JpbmRpbmcgPSAyO1xyXG4gICAgICB0aGlzLnZCbG9jayA9IG5ldyBnbFVuaWZvcm1CbG9jayhnbCwgdGhpcy50b1RleHR1cmVQcm9ncmFtLCAnTXlWZXJ0aWNlc0Jsb2NrJywgYmxvY2tCaW5kaW5nKTtcclxuXHJcbiAgICAgIC8vIHB1dCB0aGUgZGF0YSBpbnRvIGEgRmxvYXQzMkFycmF5IGZvciB1cGxvYWRpbmdcclxuICAgICAgbGV0IHZEYXRhID0gbmV3IEZsb2F0MzJBcnJheShwT2JqLnRPYmoubnVtVmVydGljZXMgKiA0KTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0T2JqLm51bVZlcnRpY2VzOyBpKyspIHtcclxuICAgICAgICAgdkRhdGFbNCAqIGkgKyAwXSA9IHRPYmoudmVydGljZXNbMyAqIGkgKyAwXTtcclxuICAgICAgICAgdkRhdGFbNCAqIGkgKyAxXSA9IHRPYmoudmVydGljZXNbMyAqIGkgKyAxXTtcclxuICAgICAgICAgdkRhdGFbNCAqIGkgKyAyXSA9IHRPYmoudmVydGljZXNbMyAqIGkgKyAyXTtcclxuICAgICAgICAgdkRhdGFbNCAqIGkgKyAzXSA9IDA7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy52QmxvY2sudXBsb2FkKHZEYXRhKTtcclxuXHJcbiAgICAgIGJsb2NrQmluZGluZyA9IDM7XHJcbiAgICAgIHRoaXMudEJsb2NrID0gbmV3IGdsVW5pZm9ybUJsb2NrKGdsLCB0aGlzLnRvVGV4dHVyZVByb2dyYW0sICdNeVRyaWFuZ2xlc0Jsb2NrJywgYmxvY2tCaW5kaW5nKTtcclxuXHJcbiAgICAgIC8vIHB1dCB0aGUgZGF0YSBpbnRvIGEgRmxvYXQzMkFycmF5IGZvciB1cGxvYWRpbmdcclxuICAgICAgbGV0IHREYXRhID0gbmV3IEludDMyQXJyYXkodE9iai5udW1UcmlhbmdsZXMgKiA0KTtcclxuICAgICAgbGV0IGluZGV4ID0gMDtcclxuICAgICAgZm9yIChsZXQgdiA9IDA7IHYgPCBwT2JqLnZvbHVtZXMubGVuZ3RoOyB2KyspIHtcclxuICAgICAgICAgbGV0IHZvbCA9IHBPYmoudm9sdW1lc1t2XTtcclxuICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2b2wudHJpYW5nbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB0ID0gdm9sLnRyaWFuZ2xlc1tpXTtcclxuICAgICAgICAgICAgdERhdGFbaW5kZXgrK10gPSB0LmkxO1xyXG4gICAgICAgICAgICB0RGF0YVtpbmRleCsrXSA9IHQuaTI7XHJcbiAgICAgICAgICAgIHREYXRhW2luZGV4KytdID0gdC5pMztcclxuICAgICAgICAgICAgdERhdGFbaW5kZXgrK10gPSAwO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy50QmxvY2sudXBsb2FkKHREYXRhKTtcclxuXHJcbiAgICAgIC8vIFVwbG9hZCB0aGUgdm9sdW1lIGluZm8gYXMgYSBzdGFuZGFyZCB1bmlmb3JtXHJcbiAgICAgIGxldCB1bmkgPSBuZXcgZ2xVbmlmb3JtKGdsLCB0aGlzLnRvVGV4dHVyZVByb2dyYW0pO1xyXG4gICAgICBsZXQgc3RhcnRJbmRleCA9IDA7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcE9iai52b2x1bWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgIGxldCB2b2wgPSBwT2JqLnZvbHVtZXNbaV07XHJcbiAgICAgICAgIHVuaS5zZXQoJ29iamVjdC52b2x1bWVzWycgKyBpICsgJ10uc3RhcnRJbmRleCcsIHN0YXJ0SW5kZXgsIHRydWUpO1xyXG4gICAgICAgICB1bmkuc2V0KCdvYmplY3Qudm9sdW1lc1snICsgaSArICddLm51bVRyaWFuZ2xlcycsIHZvbC50cmlhbmdsZXMubGVuZ3RoLCB0cnVlKTtcclxuICAgICAgICAgdW5pLnNldCgnb2JqZWN0LnZvbHVtZXNbJyArIGkgKyAnXS5ib3hNaW4nLCB2b2wuYm94TWluKTtcclxuICAgICAgICAgdW5pLnNldCgnb2JqZWN0LnZvbHVtZXNbJyArIGkgKyAnXS5ib3hNYXgnLCB2b2wuYm94TWF4KTtcclxuICAgICAgICAgc3RhcnRJbmRleCArPSB2b2wudHJpYW5nbGVzLmxlbmd0aDtcclxuICAgICAgfVxyXG4gICAgICB1bmkuc2V0KCdvYmplY3QuYm94TWluJywgdE9iai5ib3gubWluKTtcclxuICAgICAgdW5pLnNldCgnb2JqZWN0LmJveE1heCcsIHRPYmouYm94Lm1heCk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgcmVuZGVyTW9kZSgpOiBSZW5kZXJNb2RlIHtcclxuICAgICAgcmV0dXJuIHRoaXMubWFpblZpZXc7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyByZXN0YXJ0KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnVuaWZvcm1zLnVTYW1wbGUgPSAwO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGdldEV5ZVJheShtYXRyaXg6IE1hdDQsIHg6IG51bWJlciwgeTogbnVtYmVyKTogVmVjMyB7XHJcbiAgICAgIGxldCB2ZWMgPSBuZXcgVmVjNChbeCwgeSwgMCwgMV0pO1xyXG4gICAgICByZXR1cm4gbWF0cml4Lm11bHRWKHZlYykuZGl2aWRlQnlXKCkuc3VidHJhY3QodGhpcy51bmlmb3Jtcy51RXllKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHVwZGF0ZVRleHR1cmUobW9kZWx2aWV3UHJvamVjdGlvbjogTWF0NCk6IHZvaWQge1xyXG5cclxuICAgICAgbGV0IGdsID0gdGhpcy5nbDtcclxuXHJcbiAgICAgIC8vIGltcGxlbWVudCBhbGlhc2luZyBieSByYW5kb20gc2FtcGxpbmcgd2l0aGluIGEgcGl4ZWxcclxuICAgICAgbGV0IHggPSAoTWF0aC5yYW5kb20oKSAqIDIgLSAxKSAvIHRoaXMudW5pZm9ybXMudVRleHR1cmVTaXplO1xyXG4gICAgICBsZXQgeSA9IChNYXRoLnJhbmRvbSgpICogMiAtIDEpIC8gdGhpcy51bmlmb3Jtcy51VGV4dHVyZVNpemU7XHJcbiAgICAgIGxldCB6ID0gMDtcclxuXHJcbiAgICAgIGxldCB2ID0gbmV3IFZlYzMoW3gsIHksIHpdKTtcclxuICAgICAgbGV0IGppdHRlciA9IE1hdDQuZnJvbVRyYW5zbGF0aW9uKHYpO1xyXG4gICAgICBsZXQgbWF0cml4ID0gaml0dGVyLm11bHRNKG1vZGVsdmlld1Byb2plY3Rpb24pLmludmVyc2UoKTtcclxuXHJcbiAgICAgIHRoaXMudW5pZm9ybXMudVJheTAwID0gdGhpcy5nZXRFeWVSYXkobWF0cml4LCAtMSwgLTEpO1xyXG4gICAgICB0aGlzLnVuaWZvcm1zLnVSYXkwMSA9IHRoaXMuZ2V0RXllUmF5KG1hdHJpeCwgLTEsICsxKTtcclxuICAgICAgdGhpcy51bmlmb3Jtcy51UmF5MTAgPSB0aGlzLmdldEV5ZVJheShtYXRyaXgsICsxLCAtMSk7XHJcbiAgICAgIHRoaXMudW5pZm9ybXMudVJheTExID0gdGhpcy5nZXRFeWVSYXkobWF0cml4LCArMSwgKzEpO1xyXG4gICAgICAvLyBzZXQgdW5pZm9ybXNcclxuICAgICAgbGV0IHVuaSA9IG5ldyBnbFVuaWZvcm0oZ2wsIHRoaXMudG9UZXh0dXJlUHJvZ3JhbSk7XHJcbiAgICAgIHVuaS5zZXRBbGwodGhpcy51bmlmb3Jtcyk7XHJcblxyXG4gICAgICAvLyByZW5kZXIgdG8gdGV4dHVyZVxyXG4gICAgICBnbC52aWV3cG9ydCgwLCAwLCB0aGlzLnVuaWZvcm1zLnVUZXh0dXJlU2l6ZSwgdGhpcy51bmlmb3Jtcy51VGV4dHVyZVNpemUpO1xyXG4gICAgICB0aGlzLnRleHR1cmVzWzBdLmJpbmQoKTtcclxuICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudmVydGV4QnVmZmVyKTtcclxuICAgICAgdGhpcy5mcmFtZUJ1ZmZlci5iaW5kKCk7XHJcbiAgICAgIGdsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGdsLkZSQU1FQlVGRkVSLCBnbC5DT0xPUl9BVFRBQ0hNRU5UMCwgZ2wuVEVYVFVSRV8yRCwgdGhpcy50ZXh0dXJlc1sxXS5nZXQoKSwgMCk7XHJcblxyXG4gICAgICB0aGlzLnRvVGV4dHVyZVZlcnRleEF0dHJpYnV0ZS5iaW5kKDIpO1xyXG5cclxuICAgICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRV9TVFJJUCwgMCwgNCk7XHJcblxyXG4gICAgICBsZXQgZGF0YSA9IHRoaXMuYW5hbHl6ZXIucnVuKGdsLCB0aGlzLnVuaWZvcm1zLnVMaWdodEFscGhhLCB0aGlzLnVuaWZvcm1zLnVTaGFkb3dBbHBoYSk7XHJcbiAgICAgIHRoaXMudW5pZm9ybXMudU1heENocm9tYSA9IGRhdGEubWF4Q2hyb21hO1xyXG5cclxuICAgICAgbGV0IGNyID0gbmV3IENvbG9yUmFuZ2UoW2RhdGEuZGFya2VzdExpZ2h0Q29sb3IudG9IdG1sQ29sb3IoKSwgZGF0YS5hdmdMaWdodENvbG9yLnRvSHRtbENvbG9yKCksIGRhdGEubGlnaHRlc3RMaWdodENvbG9yLnRvSHRtbENvbG9yKCldKTtcclxuICAgICAgdGhpcy51bmlmb3Jtcy51SGlnaGxpZ2h0Q29sb3IgPSBkYXRhLmhpZ2hsaWdodENvbG9yO1xyXG4gICAgICB0aGlzLnVuaWZvcm1zLnVMaWdodExpZ2h0Q29sb3IgPSBjci5nZXQoMC44NSkudG9HbENvbG9yKCk7XHJcbiAgICAgIHRoaXMudW5pZm9ybXMudU1pZExpZ2h0Q29sb3IgPSBjci5nZXQoMC41KS50b0dsQ29sb3IoKTtcclxuICAgICAgdGhpcy51bmlmb3Jtcy51RGFya0xpZ2h0Q29sb3IgPSBjci5nZXQoMC4xNSkudG9HbENvbG9yKCk7XHJcblxyXG4gICAgICBjciA9IG5ldyBDb2xvclJhbmdlKFtkYXRhLmRhcmtlc3RTaGFkb3dDb2xvci50b0h0bWxDb2xvcigpLCBkYXRhLmF2Z1NoYWRvd0NvbG9yLnRvSHRtbENvbG9yKCksIGRhdGEubGlnaHRlc3RTaGFkb3dDb2xvci50b0h0bWxDb2xvcigpXSk7XHJcbiAgICAgIC8vdGhpcy51bmlmb3Jtcy51U2hhZG93Q29sb3IgPSBkYXRhLnRlcm1pbmF0b3JDb2xvcjtcclxuICAgICAgdGhpcy51bmlmb3Jtcy51U2hhZG93Q29sb3IgPSBkYXRhLmF2Z1NoYWRvd0NvbG9yO1xyXG4gICAgICB0aGlzLnVuaWZvcm1zLnVSZWZsZWN0ZWRMaWdodENvbG9yID0gY3IuZ2V0KDEpLnRvR2xDb2xvcigpO1xyXG4gICAgICB0aGlzLnVuaWZvcm1zLnVEYXJrQWNjZW50Q29sb3IgPSBjci5nZXQoMC4wKS50b0dsQ29sb3IoKTtcclxuXHJcbiAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XHJcblxyXG4gICAgICAvLyBwaW5nIHBvbmcgdGV4dHVyZXNcclxuICAgICAgdGhpcy50ZXh0dXJlcy5yZXZlcnNlKCk7XHJcblxyXG4gICAgICB0aGlzLnVuaWZvcm1zLnVTYW1wbGUrKztcclxuICAgICAgdGhpcy51bmlmb3Jtcy51UmFuZG9tID0gTWF0aC5yYW5kb20oKTtcclxuICAgfTtcclxuXHJcbiAgIHB1YmxpYyBkaXNwbGF5VGV4dHVyZSgpOiB2b2lkIHtcclxuXHJcbiAgICAgIGxldCBnbCA9IHRoaXMuZ2w7XHJcblxyXG4gICAgICBnbC52aWV3cG9ydCgwLCAwLCBnbC5jYW52YXMud2lkdGgsIGdsLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICB0aGlzLnRvU2NyZWVuUHJvZ3JhbS51c2UoKTtcclxuICAgICAgdGhpcy50ZXh0dXJlc1swXS5iaW5kKCk7XHJcbiAgICAgIHRoaXMudG9TY3JlZW5WZXJ0ZXhBdHRyaWJ1dGUuYmluZCgyKTtcclxuXHJcbiAgICAgIC8vIGRpc3BsYXkgdGhlIG1haW4gc2NyZWVuXHJcbiAgICAgIGxldCB1bmkgPSBuZXcgZ2xVbmlmb3JtKGdsLCB0aGlzLnRvU2NyZWVuUHJvZ3JhbSk7XHJcbiAgICAgIHRoaXMudW5pZm9ybXMudVNjYWxlID0gMS4wO1xyXG4gICAgICB0aGlzLnVuaWZvcm1zLnVYT2Zmc2V0ID0gMC4wO1xyXG4gICAgICB0aGlzLnVuaWZvcm1zLnVZT2Zmc2V0ID0gMC4wO1xyXG4gICAgICB0aGlzLnVuaWZvcm1zLnVNb2RlID0gdGhpcy5tYWluVmlldztcclxuICAgICAgdW5pLnNldEFsbCh0aGlzLnVuaWZvcm1zKTtcclxuICAgICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRV9TVFJJUCwgMCwgNCk7XHJcblxyXG4gICAgICAvLyBkaXNwbGF5IHRoZSBzbWFsbGVyIHZpZXdzXHJcbiAgICAgIHRoaXMudW5pZm9ybXMudVNjYWxlID0gMC4yO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc21hbGxWaWV3cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICB0aGlzLnVuaWZvcm1zLnVYT2Zmc2V0ID0gMS4wIC0gKHRoaXMuc21hbGxWaWV3cy5sZW5ndGggLSBpIC0gMC41KSAqICgyICogdGhpcy51bmlmb3Jtcy51U2NhbGUpO1xyXG4gICAgICAgICB0aGlzLnVuaWZvcm1zLnVZT2Zmc2V0ID0gMS4wIC0gdGhpcy51bmlmb3Jtcy51U2NhbGU7XHJcbiAgICAgICAgIHRoaXMudW5pZm9ybXMudU1vZGUgPSB0aGlzLnNtYWxsVmlld3NbaV07XHJcbiAgICAgICAgIHVuaS5zZXRBbGwodGhpcy51bmlmb3Jtcyk7XHJcbiAgICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVfU1RSSVAsIDAsIDQpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzd2FwKHBvczogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc21hbGxWaWV3cyA9IFtcclxuICAgICAgICAgUmVuZGVyTW9kZS5DaHJvbWEsXHJcbiAgICAgICAgIFJlbmRlck1vZGUuVmFsdWUsXHJcbiAgICAgICAgIFJlbmRlck1vZGUuQmFuZHMsXHJcbiAgICAgIF07XHJcbiAgICAgIGlmICh0aGlzLm1haW5WaWV3ID09IHRoaXMuc21hbGxWaWV3c1twb3NdKSB7XHJcbiAgICAgICAgIHRoaXMubWFpblZpZXcgPSBSZW5kZXJNb2RlLkFydGlzdDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgdGhpcy5tYWluVmlldyA9IHRoaXMuc21hbGxWaWV3c1twb3NdO1xyXG4gICAgICAgICB0aGlzLnNtYWxsVmlld3NbcG9zXSA9IFJlbmRlck1vZGUuQXJ0aXN0O1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZGlzcGxheVRleHR1cmUoKTtcclxuICAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBWZWMzIH0gZnJvbSAnLi4vLi4vVXRpbDNEL1ZlYyc7XHJcbmltcG9ydCB7IEluZGV4ZWRUcmlhbmdsZSB9IGZyb20gJy4uLy4uL1V0aWwzRC9JbmRleGVkVHJpYW5nbGUnO1xyXG5cclxuY29uc3QgTUFYID0gMTAwMDsgLy8gSU5GSU5JVFkgaW4gb3VyIHJlbmRlcmluZyB3b3JsZFxyXG5cclxuLyoqXHJcbiAqIENsYXNzIHRoYXQgbWFuYWdlcyBhIHNldCBvZiB0cmlhbmdsZXMgd2l0aGluIGEgZ2l2ZW4gc3BhY2VcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWb2x1bWUge1xyXG4gICAvKipcclxuICAgICogVGhlIHRyaWFuZ2xlcyBlbmNsb3NlZCB3aXRoaW4gdGhlIGJvdW5kaW5nIGJveFxyXG4gICAgKi9cclxuICAgcHVibGljIHRyaWFuZ2xlczogSW5kZXhlZFRyaWFuZ2xlW10gPSBbXTtcclxuXHJcbiAgIC8qKlxyXG4gICAgKiBCb3VuZGluZyBib3ggbWluaW11bVxyXG4gICAgKi9cclxuICAgcHVibGljIGJveE1pbiA9IG5ldyBWZWMzKFtNQVgsIE1BWCwgTUFYXSk7XHJcblxyXG4gICAvKipcclxuICAgICogQm91bmRpbmcgYm94IG1heGltdW1cclxuICAgICovXHJcbiAgIHB1YmxpYyBib3hNYXggPSBuZXcgVmVjMyhbLU1BWCwgLU1BWCwgLU1BWF0pO1xyXG5cclxuICAgLyoqXHJcbiAgICAqIFN0b3JlcyBhIHRyaWFuZ2xlIGFuZCB1cGRhdGVzIHRoZSBib3VuZGluZyBib3hcclxuICAgICogXHJcbiAgICAqIEBwYXJhbSB0cmlhbmdsZSBUaGUgdHJpYW5nbGUgdG8gc3RvcmVcclxuICAgICovXHJcbiAgIHB1YmxpYyBwdXNoKHRyaWFuZ2xlOiBJbmRleGVkVHJpYW5nbGUpOiB2b2lkIHtcclxuXHJcbiAgICAgIHRoaXMudHJpYW5nbGVzLnB1c2godHJpYW5nbGUpO1xyXG4gICAgICB0aGlzLmJveE1pbi54ID0gTWF0aC5taW4odGhpcy5ib3hNaW4ueCwgdHJpYW5nbGUubWluWCk7XHJcbiAgICAgIHRoaXMuYm94TWluLnkgPSBNYXRoLm1pbih0aGlzLmJveE1pbi55LCB0cmlhbmdsZS5taW5ZKTtcclxuICAgICAgdGhpcy5ib3hNaW4ueiA9IE1hdGgubWluKHRoaXMuYm94TWluLnosIHRyaWFuZ2xlLm1pblopO1xyXG4gICAgICB0aGlzLmJveE1heC54ID0gTWF0aC5tYXgodGhpcy5ib3hNYXgueCwgdHJpYW5nbGUubWF4WCk7XHJcbiAgICAgIHRoaXMuYm94TWF4LnkgPSBNYXRoLm1heCh0aGlzLmJveE1heC55LCB0cmlhbmdsZS5tYXhZKTtcclxuICAgICAgdGhpcy5ib3hNYXgueiA9IE1hdGgubWF4KHRoaXMuYm94TWF4LnosIHRyaWFuZ2xlLm1heFopO1xyXG4gICB9XHJcbn1cclxuIiwiaW1wb3J0ICd3ZWJydGMtYWRhcHRlcic7XHJcbmltcG9ydCB7IElBcHAgfSBmcm9tICcuLi8uLi9JQXBwJztcclxuaW1wb3J0IHsgSVZpZGVvQ29uc3RyYWludCwgQ2FtZXJhIH0gZnJvbSAnLi9DYW1lcmEnO1xyXG5pbXBvcnQgeyBTbGlkZXIgfSBmcm9tICcuLi8uLi9HVUkvU2xpZGVyJztcclxuaW1wb3J0IHsgTWVudWJhciB9IGZyb20gJy4uLy4uL0dVSS9NZW51JztcclxuaW1wb3J0IHsgVmVyc2lvbiB9IGZyb20gJy4vVmVyc2lvbic7XHJcbmltcG9ydCB7IEdVSSB9IGZyb20gJy4uLy4uL0dVSS9HVUknO1xyXG5pbXBvcnQgTm9TbGVlcCBmcm9tICdub3NsZWVwLmpzJztcclxuaW1wb3J0IHsgcHhUb051bWJlciB9IGZyb20gJy4uLy4uL1V0aWwvR2xvYmFscyc7XHJcbmltcG9ydCB7IEltYWdlRmlsdGVyIH0gZnJvbSAnLi9JbWFnZUZpbHRlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgU2VlQXBwIGltcGxlbWVudHMgSUFwcCB7XHJcbiAgIHByaXZhdGUgZGl2OiBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgIHByaXZhdGUgY2FtZXJhOiBDYW1lcmEgfCB1bmRlZmluZWQ7XHJcbiAgIHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgcHJpdmF0ZSBjaHJvbWE6IFNsaWRlcjtcclxuICAgcHJpdmF0ZSBudW1MZXZlbHM6IFNsaWRlcjtcclxuXHJcbiAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnQsIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbFxyXG4gICBwcml2YXRlIG5vU2xlZXAgPSBuZXcgTm9TbGVlcCgpO1xyXG5cclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGwsIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xyXG4gICAgICB0aGlzLm5vU2xlZXAuZW5hYmxlKCk7XHJcblxyXG4gICAgICBkb2N1bWVudC50aXRsZSArPSAoJyAnICsgVmVyc2lvbi5CdWlsZCk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBjcmVhdGUoZGl2OiBIVE1MRGl2RWxlbWVudCk6IHZvaWQge1xyXG5cclxuICAgICAgZGl2LmlkID0gJ0FydFNlZUFwcCc7XHJcblxyXG4gICAgICB0aGlzLmRpdiA9IEdVSS5jcmVhdGUoJ2RpdicsICdCb2R5RGl2JywgZGl2KTtcclxuXHJcbiAgICAgIHRoaXMuY2FudmFzID0gR1VJLmNyZWF0ZSgnY2FudmFzJywgJ0NhbnZhcycsIHRoaXMuZGl2KTtcclxuXHJcbiAgICAgIHRoaXMubnVtTGV2ZWxzID0gbmV3IFNsaWRlcih0aGlzLmRpdiwge1xyXG4gICAgICAgICBsYWJlbDogJ0xldmVscycsXHJcbiAgICAgICAgIG1pbjogMixcclxuICAgICAgICAgbWF4OiAyNSxcclxuICAgICAgICAgdmFsdWU6IDI1LFxyXG4gICAgICAgICBvbkdldFRleHQ6IChzbGlkZXIpID0+IHtcclxuICAgICAgICAgICAgaWYgKHNsaWRlci52YWx1ZSA9PT0gc2xpZGVyLm1heCkge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gJ+KInic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiBzbGlkZXIudmFsdWUudG9GaXhlZCgwKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLmNocm9tYSA9IG5ldyBTbGlkZXIodGhpcy5kaXYsIHtcclxuICAgICAgICAgbGFiZWw6ICdDaHJvbWEnLFxyXG4gICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgIG1heDogMjAwLFxyXG4gICAgICAgICB2YWx1ZTogMTAwLFxyXG4gICAgICAgICBvbkdldFRleHQ6IChzbGlkZXIpID0+IHNsaWRlci52YWx1ZS50b0ZpeGVkKDApICsgJyUnLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuY2FtZXJhID0gbmV3IENhbWVyYSh0aGlzLmRpdik7XHJcblxyXG4gICAgICBDYW1lcmEuZ2V0Q2FtZXJhcygoY29uc3RyYWludDogSVZpZGVvQ29uc3RyYWludCwgY2FtZXJhSW5kZXg6IG51bWJlciwgbnVtQ2FtZXJhczogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgIGlmIChjYW1lcmFJbmRleCA9PT0gKG51bUNhbWVyYXMgLSAxKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS5zdGFydChjb25zdHJhaW50KVxyXG4gICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBhbGVydCgnQ2Fubm90IHN0YXJ0IGNhbWVyYTogJyArIGVycik7XHJcbiAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHRoaXMudXBkYXRlU2l6ZXMoKSk7XHJcbiAgICAgIHRoaXMudXBkYXRlU2l6ZXMoKTtcclxuXHJcbiAgICAgIC8vIGtpY2sgb2ZmIHRoZSByZW5kZXJpbmcgbG9vcFxyXG4gICAgICB0aGlzLmRyYXdJbWcoKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGJ1aWxkTWVudShtZW51YmFyOiBNZW51YmFyKTogdm9pZCB7XHJcblxyXG4gICAgICBjb25zdCBjYW1lcmFNZW51ID0gbWVudWJhci5hZGRTdWJNZW51KCdDYW1lcmEnKTtcclxuXHJcbiAgICAgIENhbWVyYS5nZXRDYW1lcmFzKChjb25zdHJhaW50OiBJVmlkZW9Db25zdHJhaW50LCBjYW1lcmFJbmRleDogbnVtYmVyLCBudW1DYW1lcmFzOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgY29uc3QgcmFkaW9CdXR0b24gPSBjYW1lcmFNZW51LmFkZFJhZGlvYnV0dG9uKFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgIGxhYmVsOiBjb25zdHJhaW50LmxhYmVsLFxyXG4gICAgICAgICAgICAgICBvbmNoZWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnN0YXJ0KGNvbnN0cmFpbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdDYW5ub3Qgc3RhcnQgY2FtZXJhOiAnICsgZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgIGNoZWNrZWQ6IGNhbWVyYUluZGV4ID09PSAobnVtQ2FtZXJhcyAtIDEpLFxyXG4gICAgICAgICAgICAgICBncm91cDogJ0NhbWVyYXNHcm91cCcsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSB1cGRhdGVTaXplcygpIHtcclxuICAgICAgbGV0IG1lbnVCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnTWVudWJhcicpO1xyXG4gICAgICBjb25zdCBtZW51YmFySGVpZ2h0ID0gbWVudUJhci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcblxyXG4gICAgICBsZXQgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMuY2hyb21hLmRpdik7XHJcbiAgICAgIGNvbnN0IHNsaWRlckhlaWdodCA9IHRoaXMuY2hyb21hLmRpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgKyBweFRvTnVtYmVyKHN0eWxlLm1hcmdpblRvcCkgKyBweFRvTnVtYmVyKHN0eWxlLm1hcmdpbkJvdHRvbSk7XHJcblxyXG4gICAgICBjb25zdCB2aWV3V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgY29uc3Qgdmlld0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHJcbiAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdmlld1dpZHRoO1xyXG4gICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB2aWV3SGVpZ2h0IC0gbWVudWJhckhlaWdodCAtIDIgKiBzbGlkZXJIZWlnaHQ7XHJcbiAgIH1cclxuXHJcblxyXG4gICBwcml2YXRlIGJ1c3kgPSBmYWxzZTtcclxuXHJcbiAgIHByaXZhdGUgZHJhd0ltZygpIHtcclxuXHJcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmRyYXdJbWcoKSk7XHJcbiAgICAgIGlmICh0aGlzLmJ1c3kpIHtcclxuICAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmJ1c3kgPSB0cnVlO1xyXG4gICAgICBjb25zdCBjYW52YXNXaWR0aCA9IHRoaXMuY2FudmFzLndpZHRoO1xyXG4gICAgICBjb25zdCBjYW52YXNIZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgIGNvbnN0IGNhbnZhc0FSID0gY2FudmFzV2lkdGggLyBjYW52YXNIZWlnaHQ7XHJcblxyXG4gICAgICBjb25zdCBjYW1lcmFXaWR0aCA9IHRoaXMuY2FtZXJhLnZpZGVvV2lkdGg7XHJcbiAgICAgIGNvbnN0IGNhbWVyYUhlaWdodCA9IHRoaXMuY2FtZXJhLnZpZGVvSGVpZ2h0O1xyXG4gICAgICBjb25zdCBjYW1lcmFBUiA9IGNhbWVyYVdpZHRoIC8gY2FtZXJhSGVpZ2h0O1xyXG5cclxuICAgICAgbGV0IHdpZHRoOiBudW1iZXI7XHJcbiAgICAgIGxldCBoZWlnaHQ6IG51bWJlcjtcclxuXHJcbiAgICAgIGlmIChjYW52YXNBUiA+IGNhbWVyYUFSKSB7XHJcbiAgICAgICAgIGhlaWdodCA9IGNhbnZhc0hlaWdodDtcclxuICAgICAgICAgd2lkdGggPSBoZWlnaHQgKiBjYW1lcmFBUjtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgd2lkdGggPSBjYW52YXNXaWR0aDtcclxuICAgICAgICAgaGVpZ2h0ID0gd2lkdGggLyBjYW1lcmFBUjtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IG1lZ2FQaXhlbHMgPSB3aWR0aCAqIGhlaWdodCAvICgxMDAwICogMTAwMCk7XHJcbiAgICAgIGxldCBzY2FsZSA9IDE7XHJcbiAgICAgIHdoaWxlIChtZWdhUGl4ZWxzID4gMSkge1xyXG4gICAgICAgICBtZWdhUGl4ZWxzIC89IDQ7XHJcbiAgICAgICAgIHdpZHRoIC89IDI7XHJcbiAgICAgICAgIGhlaWdodCAvPSAyO1xyXG4gICAgICAgICBzY2FsZSAvPSAyO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgbnVtTGV2ZWxzID0gdGhpcy5udW1MZXZlbHMudmFsdWUgPCB0aGlzLm51bUxldmVscy5tYXggPyB0aGlzLm51bUxldmVscy52YWx1ZSA6IE5hTjtcclxuXHJcbiAgICAgIGxldCBibHVyU2l6ZSA9IDA7XHJcbiAgICAgIGlmIChpc05hTihudW1MZXZlbHMpID09PSBmYWxzZSkge1xyXG4gICAgICAgICBibHVyU2l6ZSA9IE1hdGgubWluKDMsIDMwIC8gbnVtTGV2ZWxzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IGltYWdlRGF0YSA9IHRoaXMuY2FtZXJhLnRha2VQaWN0dXJlMihtZWdhUGl4ZWxzLCBibHVyU2l6ZSk7XHJcblxyXG4gICAgICBpZiAoaW1hZ2VEYXRhICE9PSBudWxsKSB7XHJcblxyXG4gICAgICAgICBjb25zdCBjdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuXHJcbiAgICAgICAgIGlmICh0aGlzLmNocm9tYS52YWx1ZSAhPT0gMTAwKSB7XHJcbiAgICAgICAgICAgIEltYWdlRmlsdGVyLmNocm9tYShpbWFnZURhdGEsIHRoaXMuY2hyb21hLnZhbHVlKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgbGV0IHdoaXRlID0gMTtcclxuICAgICAgICAgbGV0IGJsYWNrID0gMDtcclxuICAgICAgICAgbGV0IG1pZFB0ID0gMC41O1xyXG4gICAgICAgICBsZXQgbWlkVmFsdWUgPSAwLjU7XHJcbiAgICAgICAgIGlmIChpc05hTihudW1MZXZlbHMpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBJbWFnZUZpbHRlci5sZXZlbHMoaW1hZ2VEYXRhLCB3aGl0ZSwgYmxhY2ssIG1pZFB0LCBtaWRWYWx1ZSwgbnVtTGV2ZWxzKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgbGV0IHRlbXBDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICAgdGVtcENhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICB0ZW1wQ2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICAgbGV0IHRlbXBDdHggPSB0ZW1wQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgIHRlbXBDdHgucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XHJcblxyXG4gICAgICAgICB3aWR0aCAvPSBzY2FsZTtcclxuICAgICAgICAgaGVpZ2h0IC89IHNjYWxlO1xyXG4gICAgICAgICBjdHguZHJhd0ltYWdlKHRlbXBDYW52YXMsIChjYW52YXNXaWR0aCAtIHdpZHRoKSAvIDIsIChjYW52YXNIZWlnaHQgLSBoZWlnaHQpIC8gMiwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuYnVzeSA9IGZhbHNlO1xyXG4gICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRlBTIH0gZnJvbSAnLi4vLi4vVXRpbC9GUFMnO1xyXG5pbXBvcnQgeyBTdG9wd2F0Y2ggfSBmcm9tICcuLi8uLi9VdGlsL1N0b3B3YXRjaCc7XHJcblxyXG5jbGFzcyBUcmFuc2ZlciB7XHJcbiAgIHB1YmxpYyBieXRlczogbnVtYmVyO1xyXG4gICBwdWJsaWMgZWxhcHNlZFMgPSBOYU47XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IoYnl0ZXM6IG51bWJlcikge1xyXG4gICAgICB0aGlzLmJ5dGVzID0gYnl0ZXM7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBlbmQoZWxhcHNlZFM6IG51bWJlcikge1xyXG4gICAgICB0aGlzLmVsYXBzZWRTID0gZWxhcHNlZFM7XHJcbiAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFRoaXMgY2xhc3MgbW9uaXRvcnMgdGhlIHVwbG9hZCByYXRlIGFuZCByZWNvbW1lbmRzIGEgZnJhbWUgcmF0ZSB0byBtYXRjaC4gV2VcclxuICogY2FuIHRoZW4gdXNlIHRoaXMgdG8gcGFjZSBvdXIgdXBsb2FkcyB0byBtYXRjaCBhdmFpbGFibGUgYmFuZHdpZHRoLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJhbmR3aWR0aFRyYWNrZXIge1xyXG5cclxuICAgcHJpdmF0ZSB0cmFuc2ZlcnM6IFRyYW5zZmVyW10gPSBbXTtcclxuICAgcHJpdmF0ZSBfZnBzID0gbmV3IEZQUygpO1xyXG4gICBwcml2YXRlIHN0b3B3YXRjaDogU3RvcHdhdGNoID0gbmV3IFN0b3B3YXRjaCgpO1xyXG4gICBwcml2YXRlIGFjdGl2ZVRyYW5zZmVyOiBUcmFuc2ZlciB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgcHVibGljIGdldCBudW1TYW1wbGVzKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnRyYW5zZmVycy5sZW5ndGg7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgbGFzdFRyYW5zZmVyQnl0ZXMoKTogbnVtYmVyIHtcclxuICAgICAgaWYgKHRoaXMuYWN0aXZlVHJhbnNmZXIgIT09IG51bGwpIHtcclxuICAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlVHJhbnNmZXIuYnl0ZXM7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHJldHVybiBOYU47XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBnZXQgZWxhcHNlZFMoKTogbnVtYmVyIHtcclxuICAgICAgbGV0IGVsYXBzZWRTID0gMDtcclxuICAgICAgZm9yIChjb25zdCB0cmFuc2ZlciBvZiB0aGlzLnRyYW5zZmVycykge1xyXG4gICAgICAgICBlbGFwc2VkUyArPSB0cmFuc2Zlci5lbGFwc2VkUztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZWxhcHNlZFM7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgZ2V0IGJ5dGVzKCk6IG51bWJlciB7XHJcbiAgICAgIGxldCBieXRlcyA9IDA7XHJcbiAgICAgIGZvciAoY29uc3QgdHJhbnNmZXIgb2YgdGhpcy50cmFuc2ZlcnMpIHtcclxuICAgICAgICAgYnl0ZXMgKz0gdHJhbnNmZXIuYnl0ZXM7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGJ5dGVzXHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBiYW5kd2lkdGgsIE1icHNcclxuICAgICovXHJcbiAgIHB1YmxpYyBnZXQgbWVnYUJpdHNQZXJTZWMoKTogbnVtYmVyIHtcclxuICAgICAgaWYgKHRoaXMudHJhbnNmZXJzLmxlbmd0aCA8IDIpIHtcclxuICAgICAgICAgcmV0dXJuIE51bWJlci5OYU47XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHJldHVybiAoOCAqIHRoaXMuYnl0ZXMgLyAoMTAwMCAqIDEwMDApKSAvIHRoaXMuZWxhcHNlZFM7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBmcHMoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2Zwcy5yYXRlO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgcGF1c2UoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc3RvcHdhdGNoLnN0b3AoKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHJlc3VtZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zdG9wd2F0Y2guc3RhcnQoKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENhbGwgdGhpcyBkYXRhIGlzIHRyYW5zZmVyZWRcclxuICAgICovXHJcbiAgIHB1YmxpYyB0aWNrKGJ5dGVzOiBudW1iZXIpOiB2b2lkIHtcclxuXHJcbiAgICAgIC8vIGNyZWF0ZSBhbiBvYmplY3QgZm9yIHRyYWNraW5nIHRoZSB0cmFuc2ZlclxyXG4gICAgICBjb25zdCB0cmFuc2ZlciA9IG5ldyBUcmFuc2ZlcihieXRlcyk7XHJcblxyXG4gICAgICAvLyBjYXB0dXJlIHRoZSB0cmFuc2ZlclxyXG4gICAgICBpZiAodGhpcy5hY3RpdmVUcmFuc2ZlciAhPT0gbnVsbCkge1xyXG4gICAgICAgICB0aGlzLmFjdGl2ZVRyYW5zZmVyLmVuZCh0aGlzLnN0b3B3YXRjaC5lbGFwc2VkUyk7XHJcbiAgICAgICAgIHRoaXMudHJhbnNmZXJzLnB1c2godGhpcy5hY3RpdmVUcmFuc2Zlcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuYWN0aXZlVHJhbnNmZXIgPSB0cmFuc2ZlcjtcclxuXHJcbiAgICAgIC8vIHN0YXJ0IGEgbmV3IHRyYW5zZmVyXHJcbiAgICAgIHRoaXMuYWN0aXZlVHJhbnNmZXIgPSBuZXcgVHJhbnNmZXIoYnl0ZXMpO1xyXG4gICAgICB0aGlzLnN0b3B3YXRjaC5yZXN0YXJ0KCk7XHJcbiAgICAgIHRoaXMuX2Zwcy50aWNrKCk7XHJcblxyXG4gICAgICAvLyB0cmltIGV4aXN0aW5nIHRyYW5zZmVyc1xyXG4gICAgICB3aGlsZSAoXHJcbiAgICAgICAgIHRoaXMudHJhbnNmZXJzLmxlbmd0aCA+IDIwIHx8XHJcbiAgICAgICAgICh0aGlzLnRyYW5zZmVycy5sZW5ndGggPiAyICYmICh0aGlzLmVsYXBzZWRTID4gMykpXHJcbiAgICAgICkge1xyXG4gICAgICAgICB0aGlzLnRyYW5zZmVycy5zaGlmdCgpO1xyXG4gICAgICB9XHJcbiAgIH1cclxufSIsIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2VzcyAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnQgKi9cclxuaW1wb3J0IHsgZGVidWcgfSBmcm9tICcuL1NxdWludEFwcCc7XHJcbmltcG9ydCB7IGdldEVtUGl4ZWxzLCBpT1MsIHB4VG9OdW1iZXIgfSBmcm9tICcuLi8uLi9VdGlsL0dsb2JhbHMnO1xyXG5pbXBvcnQgeyBTcXVpbnRTdHJpbmdzIH0gZnJvbSAnLi9TcXVpbnRTdHJpbmdzJztcclxuaW1wb3J0IHsgUG9pbnRlckV2ZW50SGFuZGxlciB9IGZyb20gJy4uLy4uL0dVSS9Qb2ludGVyRXZlbnRIYW5kbGVyJztcclxuaW1wb3J0IHsgVmVjMiB9IGZyb20gJy4uLy4uL1V0aWwzRC9WZWMnO1xyXG5pbXBvcnQgeyBSZWN0SGl0LCBSZWN0IH0gZnJvbSAnLi9SZWN0JztcclxuXHJcbmV4cG9ydCBlbnVtIENhbWVyYVJvdGF0aW9uIHtcclxuICAgREVHXzAgPSAwLFxyXG4gICBERUdfOTAgPSBNYXRoLlBJIC8gMixcclxuICAgREVHXzE4MCA9IE1hdGguUEksXHJcbiAgIERFR18yNzAgPSAzICogTWF0aC5QSSAvIDIsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZpZGVvQ29uc3RyYWludCB7XHJcbiAgIGxhYmVsOiBzdHJpbmcsXHJcbiAgIHdpZHRoPzogbnVtYmVyLFxyXG4gICBoZWlnaHQ/OiBudW1iZXIsXHJcbiAgIGZyYW1lUmF0ZT86IG51bWJlcixcclxuICAgZGV2aWNlSWQ/OiBzdHJpbmcsXHJcbiAgIGZhY2luZ01vZGU/OiBzdHJpbmcsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEFkdmFuY2VkQ29uc3RyYWludE1vZGUgPSAnbWFudWFsJyB8ICdjb250aW51b3VzJztcclxuXHJcbmV4cG9ydCB0eXBlIEFkdmFuY2VkQ29uc3RyYWludE5hbWUgPVxyXG4gICAnd2hpdGVCYWxhbmNlTW9kZScgfFxyXG4gICAnY29sb3JUZW1wZXJhdHVyZScgfFxyXG4gICAnZXhwb3N1cmVNb2RlJyB8XHJcbiAgICdleHBvc3VyZUNvbXBlbnNhdGlvbicgfFxyXG4gICAnZXhwb3N1cmVUaW1lJyB8XHJcbiAgICdmb2N1c01vZGUnIHxcclxuICAgJ2ZvY3VzRGlzdGFuY2UnIHxcclxuICAgJ2lzbycgfFxyXG4gICAnem9vbSc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElBZHZhbmNlZENvbnN0cmFpbnQge1xyXG4gICBbaW5kZXg6IHN0cmluZ106IHN0cmluZyB8ICgoKSA9PiBzdHJpbmcpIHwgKCgpID0+IG51bWJlcik7XHJcbiAgIGNvbnN0cmFpbnQ6IHN0cmluZzsgLy9BZHZhbmNlZENvbnN0cmFpbnROYW1lLFxyXG4gICB2YWx1ZTogKCgpID0+IHN0cmluZykgfCAoKCkgPT4gbnVtYmVyKSxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQWR2YW5jZWRDb25zdHJhaW50VmFsdWUge1xyXG4gICBbaW5kZXg6IHN0cmluZ106IHN0cmluZyB8IG51bWJlcjtcclxuICAgY29uc3RyYWludDogc3RyaW5nOyAvL0FkdmFuY2VkQ29uc3RyYWludE5hbWUsXHJcbiAgIHZhbHVlOiBzdHJpbmcgfCBudW1iZXIsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSU1lZGlhU2V0dGluZ3NSYW5nZSB7XHJcbiAgIG1pbjogbnVtYmVyLFxyXG4gICBtYXg6IG51bWJlcixcclxuICAgc3RlcD86IG51bWJlcixcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQWR2YW5jZWRDb25zdHJhaW50T2JqZWN0IHtcclxuICAgW2luZGV4OiBzdHJpbmddOiBBZHZhbmNlZENvbnN0cmFpbnRNb2RlIHwgbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElWaWRlb1RyYWNrQWR2YW5jZWRTZXR0aW5ncyBleHRlbmRzIElBZHZhbmNlZENvbnN0cmFpbnRPYmplY3Qge1xyXG5cclxuICAgd2hpdGVCYWxhbmNlTW9kZT86IEFkdmFuY2VkQ29uc3RyYWludE1vZGU7XHJcbiAgIGNvbG9yVGVtcGVyYXR1cmU/OiBudW1iZXI7XHJcblxyXG4gICBleHBvc3VyZU1vZGU/OiBBZHZhbmNlZENvbnN0cmFpbnRNb2RlO1xyXG4gICBleHBvc3VyZUNvbXBlbnNhdGlvbj86IG51bWJlcjsgLy8gYS5rLmEgZi1zdG9wXHJcbiAgIGV4cG9zdXJlVGltZT86IG51bWJlcjtcclxuXHJcbiAgIGZvY3VzTW9kZT86IEFkdmFuY2VkQ29uc3RyYWludE1vZGU7XHJcbiAgIGZvY3VzRGlzdGFuY2U/OiBudW1iZXI7XHJcblxyXG4gICBpc28/OiBudW1iZXI7XHJcbiAgIHpvb20/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZpZGVvVHJhY2tBZHZhbmNlZENhcGFiaWxpdGllcyB7XHJcblxyXG4gICBbaW5kZXg6IHN0cmluZ106IElNZWRpYVNldHRpbmdzUmFuZ2UgfCBzdHJpbmdbXSB8IHVuZGVmaW5lZDtcclxuXHJcbiAgIHdoaXRlQmFsYW5jZU1vZGU/OiBzdHJpbmdbXTtcclxuICAgY29sb3JUZW1wZXJhdHVyZT86IElNZWRpYVNldHRpbmdzUmFuZ2U7XHJcblxyXG4gICBleHBvc3VyZU1vZGU/OiBzdHJpbmdbXTtcclxuICAgZXhwb3N1cmVDb21wZW5zYXRpb24/OiBJTWVkaWFTZXR0aW5nc1JhbmdlOyAvLyBhLmsuYSBmLXN0b3BcclxuICAgZXhwb3N1cmVUaW1lPzogSU1lZGlhU2V0dGluZ3NSYW5nZTtcclxuXHJcbiAgIGZvY3VzTW9kZT86IHN0cmluZ1tdO1xyXG4gICBmb2N1c0Rpc3RhbmNlPzogSU1lZGlhU2V0dGluZ3NSYW5nZTtcclxuXHJcbiAgIGlzbz86IElNZWRpYVNldHRpbmdzUmFuZ2U7XHJcbiAgIHpvb20/OiBJTWVkaWFTZXR0aW5nc1JhbmdlO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBDYW1lcmFQYXVzZVJlc3VtZUhhbmRsZXIgPSAoKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIENhbWVyYSB7XHJcblxyXG4gICBwcml2YXRlIGhpZGRlbkNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgIHByaXZhdGUgdmlkZW86IEhUTUxWaWRlb0VsZW1lbnQ7XHJcbiAgIHByaXZhdGUgb3ZlcmxheUNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcblxyXG4gICAvLyB0aGUgYXJlYSBvZiB0aGUgY2FtZXJhIHRoYXQgd2UgY2FwdHVyZSBpbiBhIHBob3RvXHJcbiAgIHB1YmxpYyBjYXB0dXJlID0gbmV3IFJlY3QoKTtcclxuXHJcbiAgIC8vIGlkIGZvciB0aGUgYWN0aXZlIGNhbWVyYVxyXG4gICBwcml2YXRlIF9kZXZpY2VJZCA9ICcnO1xyXG4gICBwdWJsaWMgZ2V0IGRldmljZUlkKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9kZXZpY2VJZDtcclxuICAgfVxyXG5cclxuICAgcHVibGljIG9uUGF1c2VkOiBDYW1lcmFQYXVzZVJlc3VtZUhhbmRsZXIgfCBudWxsID0gbnVsbDtcclxuICAgcHVibGljIG9uUmVzdW1lOiBDYW1lcmFQYXVzZVJlc3VtZUhhbmRsZXIgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgIHB1YmxpYyBnZXQgcGF1c2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSAhPT0gJ3Zpc2libGUnKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCB2aWRlb1dpZHRoKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnZpZGVvLnZpZGVvV2lkdGg7XHJcbiAgIH1cclxuICAgcHVibGljIGdldCB2aWRlb0hlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy52aWRlby52aWRlb0hlaWdodDtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBjbGllbnRXaWR0aCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy52aWRlby5jbGllbnRXaWR0aDtcclxuICAgfVxyXG4gICBwdWJsaWMgZ2V0IGNsaWVudEhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy52aWRlby5jbGllbnRIZWlnaHQ7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgZ2V0IG9mZnNldCgpOiBudW1iZXIge1xyXG4gICAgICBsZXQgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMudmlkZW8pO1xyXG4gICAgICByZXR1cm4gcHhUb051bWJlcihzdHlsZS5ib3JkZXJXaWR0aCkgKyBweFRvTnVtYmVyKHN0eWxlLm1hcmdpbik7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyByb3RhdGlvbiA9IENhbWVyYVJvdGF0aW9uLkRFR18wO1xyXG5cclxuICAgcHVibGljIHNldCB3aWR0aCh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMudmlkZW8uc3R5bGUud2lkdGggPSB2YWx1ZSArICdweCc7XHJcbiAgICAgIHRoaXMub3ZlcmxheUNhbnZhcy5zdHlsZS53aWR0aCA9ICh2YWx1ZSArIDIgKiB0aGlzLm9mZnNldCkgKyAncHgnO1xyXG4gICB9XHJcbiAgIHB1YmxpYyBzZXQgaGVpZ2h0KHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy52aWRlby5zdHlsZS5oZWlnaHQgPSB2YWx1ZSArICdweCc7XHJcbiAgICAgIHRoaXMub3ZlcmxheUNhbnZhcy5zdHlsZS5oZWlnaHQgPSAodmFsdWUgKyAyICogdGhpcy5vZmZzZXQpICsgJ3B4JztcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCB2aXNpYmxlKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gKGdldENvbXB1dGVkU3R5bGUodGhpcy52aWRlbykuZGlzcGxheSAhPT0gJ25vbmUnKTtcclxuICAgfVxyXG4gICBwdWJsaWMgc2V0IHZpc2libGUoZmxhZzogYm9vbGVhbikge1xyXG4gICAgICBpZiAoZmxhZyA9PT0gdGhpcy52aXNpYmxlKSB7XHJcbiAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGZsYWcpIHtcclxuICAgICAgICAgdGhpcy52aWRlby5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgdGhpcy5vdmVybGF5Q2FudmFzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICB0aGlzLnZpZGVvLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgIHRoaXMub3ZlcmxheUNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IocGFyZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICB0aGlzLmhpZGRlbkNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG5cclxuICAgICAgdGhpcy52aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XHJcbiAgICAgIHRoaXMudmlkZW8uaWQgPSAnVmlkZW8nO1xyXG4gICAgICB0aGlzLnZpZGVvLmF1dG9wbGF5ID0gdHJ1ZTtcclxuICAgICAgdGhpcy52aWRlby5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJ3RydWUnKTsgLy8gbmVlZGVkIGZvciBpUGhvbmVzXHJcbiAgICAgIHRoaXMudmlkZW8ub25lcnJvciA9IChlcnIpID0+IHtcclxuICAgICAgICAgYWxlcnQoJ3ZpZGVvLm9uZXJyb3IoKTogJyArIGVycik7XHJcbiAgICAgIH1cclxuICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMudmlkZW8pO1xyXG5cclxuICAgICAgdGhpcy5vdmVybGF5Q2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgIHRoaXMub3ZlcmxheUNhbnZhcy5pZCA9ICdWaWRlb092ZXJsYXknO1xyXG4gICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5vdmVybGF5Q2FudmFzKTtcclxuXHJcbiAgICAgIGxldCBoYW5kbGVyID0gbmV3IFBvaW50ZXJFdmVudEhhbmRsZXIodGhpcy5vdmVybGF5Q2FudmFzKTtcclxuXHJcbiAgICAgIGxldCBoaXQgPSBSZWN0SGl0Lk5vbmU7XHJcbiAgICAgIGhhbmRsZXIub25Eb3duID0gKHBvczogVmVjMikgPT4ge1xyXG4gICAgICAgICBoaXQgPSB0aGlzLmdldEhpdChwb3MpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBoYW5kbGVyLm9uTW92ZSA9IChwb3M6IFZlYzIpID0+IHtcclxuICAgICAgICAgbGV0IGhpdCA9IHRoaXMuZ2V0SGl0KHBvcyk7XHJcbiAgICAgICAgIHN3aXRjaCAoaGl0KSB7XHJcbiAgICAgICAgICAgIGNhc2UgUmVjdEhpdC5VTDpcclxuICAgICAgICAgICAgICAgdGhpcy5vdmVybGF5Q2FudmFzLnN0eWxlLmN1cnNvciA9ICdud3NlLXJlc2l6ZSc7XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFJlY3RIaXQuVVI6XHJcbiAgICAgICAgICAgICAgIHRoaXMub3ZlcmxheUNhbnZhcy5zdHlsZS5jdXJzb3IgPSAnbmVzdy1yZXNpemUnO1xyXG4gICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBSZWN0SGl0LkxMOlxyXG4gICAgICAgICAgICAgICB0aGlzLm92ZXJsYXlDYW52YXMuc3R5bGUuY3Vyc29yID0gJ25lc3ctcmVzaXplJztcclxuICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgUmVjdEhpdC5MUjpcclxuICAgICAgICAgICAgICAgdGhpcy5vdmVybGF5Q2FudmFzLnN0eWxlLmN1cnNvciA9ICdud3NlLXJlc2l6ZSc7XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFJlY3RIaXQuSW5zaWRlOlxyXG4gICAgICAgICAgICAgICBpZiAodGhpcy5jYXB0dXJlLndpZHRoIDwgdGhpcy52aWRlb1dpZHRoIHx8IHRoaXMuY2FwdHVyZS5oZWlnaHQgPCB0aGlzLnZpZGVvSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMub3ZlcmxheUNhbnZhcy5zdHlsZS5jdXJzb3IgPSAnbW92ZSc7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMub3ZlcmxheUNhbnZhcy5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgUmVjdEhpdC5Ob25lOlxyXG4gICAgICAgICAgICAgICB0aGlzLm92ZXJsYXlDYW52YXMuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xyXG4gICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBoYW5kbGVyLm9uRHJhZyA9IChwb3M6IFZlYzIsIGRlbHRhOiBWZWMyKSA9PiB7XHJcbiAgICAgICAgIGxldCByYXRpbyA9IHRoaXMudmlkZW9XaWR0aCAvIHRoaXMuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgIGRlbHRhLnggKj0gcmF0aW87XHJcbiAgICAgICAgIGRlbHRhLnkgKj0gcmF0aW87XHJcbiAgICAgICAgIGxldCBtaW4gPSAyMDA7XHJcblxyXG4gICAgICAgICAvLyBjaGVjayBmb3IgbGltaXRzXHJcbiAgICAgICAgIGlmIChoaXQgPT09IFJlY3RIaXQuVUwgfHwgaGl0ID09PSBSZWN0SGl0LkxMIHx8IGhpdCA9PT0gUmVjdEhpdC5JbnNpZGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2FwdHVyZS53aWR0aCAtIGRlbHRhLnggPCBtaW4pIHtcclxuICAgICAgICAgICAgICAgZGVsdGEueCA9IHRoaXMuY2FwdHVyZS53aWR0aCAtIG1pbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5jYXB0dXJlLnggKyBkZWx0YS54IDwgMCkge1xyXG4gICAgICAgICAgICAgICBkZWx0YS54ID0gLXRoaXMuY2FwdHVyZS54O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgaWYgKGhpdCA9PT0gUmVjdEhpdC5VUiB8fCBoaXQgPT09IFJlY3RIaXQuTFIgfHwgaGl0ID09PSBSZWN0SGl0Lkluc2lkZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jYXB0dXJlLnJpZ2h0ICsgZGVsdGEueCA+IHRoaXMudmlkZW9XaWR0aCkge1xyXG4gICAgICAgICAgICAgICBkZWx0YS54ID0gdGhpcy52aWRlb1dpZHRoIC0gdGhpcy5jYXB0dXJlLnJpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNhcHR1cmUud2lkdGggKyBkZWx0YS54IDwgbWluKSB7XHJcbiAgICAgICAgICAgICAgIGRlbHRhLnggPSBtaW4gLSB0aGlzLmNhcHR1cmUud2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgICAgICBpZiAoaGl0ID09PSBSZWN0SGl0LlVMIHx8IGhpdCA9PT0gUmVjdEhpdC5VUiB8fCBoaXQgPT09IFJlY3RIaXQuSW5zaWRlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNhcHR1cmUueSArIGRlbHRhLnkgKyBtaW4gPiB0aGlzLmNhcHR1cmUuYm90dG9tKSB7XHJcbiAgICAgICAgICAgICAgIGRlbHRhLnkgPSB0aGlzLmNhcHR1cmUuYm90dG9tIC0gdGhpcy5jYXB0dXJlLnkgLSBtaW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuY2FwdHVyZS55ICsgZGVsdGEueSA8IDApIHtcclxuICAgICAgICAgICAgICAgZGVsdGEueSA9IC10aGlzLmNhcHR1cmUueTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGlmIChoaXQgPT09IFJlY3RIaXQuTEwgfHwgaGl0ID09PSBSZWN0SGl0LkxSIHx8IGhpdCA9PT0gUmVjdEhpdC5JbnNpZGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2FwdHVyZS5oZWlnaHQgKyBkZWx0YS55IDwgbWluKSB7XHJcbiAgICAgICAgICAgICAgIGRlbHRhLnkgPSBtaW4gLSB0aGlzLmNhcHR1cmUuaGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNhcHR1cmUuYm90dG9tICsgZGVsdGEueSA+IHRoaXMudmlkZW9IZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgZGVsdGEueSA9IHRoaXMudmlkZW9IZWlnaHQgLSB0aGlzLmNhcHR1cmUuYm90dG9tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIC8vIGRvIHRoZSBtb3ZlXHJcbiAgICAgICAgIHN3aXRjaCAoaGl0KSB7XHJcbiAgICAgICAgICAgIGNhc2UgUmVjdEhpdC5VTDpcclxuICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlLnggKz0gZGVsdGEueDtcclxuICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlLnkgKz0gZGVsdGEueTtcclxuICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlLndpZHRoIC09IGRlbHRhLng7XHJcbiAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZS5oZWlnaHQgLT0gZGVsdGEueTtcclxuICAgICAgICAgICAgICAgdGhpcy5kcmF3T3ZlcmxheSgpO1xyXG4gICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBSZWN0SGl0LlVSOlxyXG4gICAgICAgICAgICAgICB0aGlzLmNhcHR1cmUueSArPSBkZWx0YS55O1xyXG4gICAgICAgICAgICAgICB0aGlzLmNhcHR1cmUud2lkdGggKz0gZGVsdGEueDtcclxuICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlLmhlaWdodCAtPSBkZWx0YS55O1xyXG4gICAgICAgICAgICAgICB0aGlzLmRyYXdPdmVybGF5KCk7XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFJlY3RIaXQuTEw6XHJcbiAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZS54ICs9IGRlbHRhLng7XHJcbiAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZS53aWR0aCAtPSBkZWx0YS54O1xyXG4gICAgICAgICAgICAgICB0aGlzLmNhcHR1cmUuaGVpZ2h0ICs9IGRlbHRhLnk7XHJcbiAgICAgICAgICAgICAgIHRoaXMuZHJhd092ZXJsYXkoKTtcclxuICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgUmVjdEhpdC5MUjpcclxuICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlLndpZHRoICs9IGRlbHRhLng7XHJcbiAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZS5oZWlnaHQgKz0gZGVsdGEueTtcclxuICAgICAgICAgICAgICAgdGhpcy5kcmF3T3ZlcmxheSgpO1xyXG4gICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBSZWN0SGl0Lkluc2lkZTpcclxuICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlLnggKz0gZGVsdGEueDtcclxuICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlLnkgKz0gZGVsdGEueTtcclxuICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsICgpID0+IHtcclxuICAgICAgICAgaWYgKHRoaXMudmlzaWJsZSkge1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZScpIHtcclxuICAgICAgICAgICAgICAgaWYgKHRoaXMub25SZXN1bWUpIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5vblJlc3VtZSgpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgIGlmICh0aGlzLm9uUGF1c2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMub25QYXVzZWQoKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKlxyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgIHRoaXMuY2FwdHVyZS54ID0gMDtcclxuICAgICAgICAgdGhpcy5jYXB0dXJlLnkgPSAwO1xyXG4gICAgICAgICB0aGlzLmNhcHR1cmUud2lkdGggPSB0aGlzLnZpZGVvV2lkdGg7XHJcbiAgICAgICAgIHRoaXMuY2FwdHVyZS5oZWlnaHQgPSB0aGlzLnZpZGVvSGVpZ2h0O1xyXG4gICAgICAgICBsZXQgcmVjdCA9IHRoaXMudmlkZW8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgIHRoaXMub3ZlcmxheUNhbnZhcy5zdHlsZS5sZWZ0ID0gcmVjdC5sZWZ0ICsgJ3B4JztcclxuICAgICAgICAgdGhpcy5vdmVybGF5Q2FudmFzLnN0eWxlLnJpZ2h0ID0gcmVjdC5yaWdodCArICdweCc7XHJcbiAgICAgICAgIHRoaXMub3ZlcmxheUNhbnZhcy5zdHlsZS50b3AgPSByZWN0LnRvcCArICdweCc7XHJcbiAgICAgICAgIHRoaXMub3ZlcmxheUNhbnZhcy5zdHlsZS5ib3R0b20gPSByZWN0LmJvdHRvbSArICdweCc7XHJcbiAgICAgIH0pO1xyXG4gICAgICAqL1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGdldEhpdChwb3M6IFZlYzIpOiBSZWN0SGl0IHtcclxuICAgICAgbGV0IHNjYWxlID0gdGhpcy5jbGllbnRXaWR0aCAvIHRoaXMudmlkZW9XaWR0aDtcclxuICAgICAgbGV0IHJlY3QgPSB0aGlzLmNhcHR1cmUuZ2V0U2NhbGVkKHNjYWxlKTtcclxuICAgICAgbGV0IG9mZnNldCA9IHRoaXMub2Zmc2V0O1xyXG4gICAgICByZWN0LnggKz0gb2Zmc2V0O1xyXG4gICAgICByZWN0LnkgKz0gb2Zmc2V0O1xyXG5cclxuICAgICAgbGV0IHJhZGl1cyA9IDAuNSAqIGdldEVtUGl4ZWxzKCk7XHJcbiAgICAgIGxldCBlcHNpbG9uID0gMyAqIHJhZGl1cztcclxuICAgICAgcmV0dXJuIHJlY3QuaGl0KHBvcywgZXBzaWxvbik7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgZHJhd092ZXJsYXkoKTogdm9pZCB7XHJcbiAgICAgIGxldCBjdHggPSB0aGlzLm92ZXJsYXlDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgbGV0IHcgPSB0aGlzLm92ZXJsYXlDYW52YXMud2lkdGg7XHJcbiAgICAgIGxldCBoID0gdGhpcy5vdmVybGF5Q2FudmFzLmhlaWdodDtcclxuICAgICAgbGV0IG0gPSBnZXRFbVBpeGVscygpO1xyXG5cclxuICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB3LCBoKTtcclxuICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsMCwwLDAuNiknO1xyXG4gICAgICBjdHguZmlsbFJlY3QobSwgbSwgdyAtIDIgKiBtLCBoIC0gMiAqIG0pO1xyXG5cclxuICAgICAgbGV0IHNjYWxlID0gdGhpcy52aWRlby5jbGllbnRXaWR0aCAvIHRoaXMudmlkZW8udmlkZW9XaWR0aDtcclxuICAgICAgbGV0IHJlY3QgPSB0aGlzLmNhcHR1cmUuZ2V0U2NhbGVkKHNjYWxlKTtcclxuICAgICAgY3R4LmNsZWFyUmVjdChtICsgcmVjdC54LCBtICsgcmVjdC55LCByZWN0LndpZHRoLCByZWN0LmhlaWdodCk7XHJcblxyXG4gICAgICAvLyBoYW5kbGVzXHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSAnbGlnaHRncmVlbic7XHJcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdkYXJrZ3JlZW4nXHJcbiAgICAgIGxldCByYWRpdXMgPSAwLjUgKiBnZXRFbVBpeGVscygpO1xyXG5cclxuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICBjdHguYXJjKG0gKyByZWN0LmxlZnQsIG0gKyByZWN0LnRvcCwgcmFkaXVzLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgIGN0eC5zdHJva2UoKTtcclxuXHJcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgY3R4LmFyYyhtICsgcmVjdC5yaWdodCwgbSArIHJlY3QudG9wLCByYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcclxuICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgY3R4LnN0cm9rZSgpO1xyXG5cclxuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICBjdHguYXJjKG0gKyByZWN0LmxlZnQsIG0gKyByZWN0LmJvdHRvbSwgcmFkaXVzLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgIGN0eC5zdHJva2UoKTtcclxuXHJcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgY3R4LmFyYyhtICsgcmVjdC5yaWdodCwgbSArIHJlY3QuYm90dG9tLCByYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcclxuICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgdGFrZVBpY3R1cmUoXHJcbiAgICAgIG1lZ2FQaXhlbHM6IG51bWJlcixcclxuICAgICAganBlZ1F1YWxpdHk6IG51bWJlclxyXG4gICApOiBQcm9taXNlPEJsb2IgfCBudWxsPiB7XHJcblxyXG4gICAgICBpZiAodGhpcy52aWRlby5yZWFkeVN0YXRlICE9IDQpIHtcclxuICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFNxdWludFN0cmluZ3MuQ0FNRVJBX05PVF9SRUFEWSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMucGF1c2VkKSB7XHJcbiAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChTcXVpbnRTdHJpbmdzLkNBTUVSQV9OT1RfUkVBRFkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy52aWRlby52aWRlb0hlaWdodCA9PT0gMCB8fCB0aGlzLnZpZGVvLnZpZGVvV2lkdGggPT09IDApIHtcclxuICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCdYWCBWaWRlbyBTaXplID0gMCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLm92ZXJsYXlDYW52YXMud2lkdGggPSB0aGlzLm92ZXJsYXlDYW52YXMuY2xpZW50V2lkdGg7XHJcbiAgICAgIHRoaXMub3ZlcmxheUNhbnZhcy5oZWlnaHQgPSB0aGlzLm92ZXJsYXlDYW52YXMuY2xpZW50SGVpZ2h0O1xyXG5cclxuICAgICAgdGhpcy5kcmF3T3ZlcmxheSgpO1xyXG5cclxuICAgICAgbGV0IHNjYWxlID0gTWF0aC5taW4oTWF0aC5zcXJ0KDEwMDAwMDAgKiBtZWdhUGl4ZWxzIC8gKHRoaXMuY2FwdHVyZS53aWR0aCAqIHRoaXMuY2FwdHVyZS5oZWlnaHQpKSwgMSk7XHJcbiAgICAgIGxldCBpbWdXaWR0aCA9IHRoaXMuY2FwdHVyZS53aWR0aCAqIHNjYWxlO1xyXG4gICAgICBsZXQgaW1nSGVpZ2h0ID0gdGhpcy5jYXB0dXJlLmhlaWdodCAqIHNjYWxlO1xyXG5cclxuICAgICAgaWYgKHRoaXMucm90YXRpb24gPT09IENhbWVyYVJvdGF0aW9uLkRFR18wIHx8IHRoaXMucm90YXRpb24gPT09IENhbWVyYVJvdGF0aW9uLkRFR18xODApIHtcclxuICAgICAgICAgdGhpcy5oaWRkZW5DYW52YXMud2lkdGggPSBpbWdXaWR0aDtcclxuICAgICAgICAgdGhpcy5oaWRkZW5DYW52YXMuaGVpZ2h0ID0gaW1nSGVpZ2h0O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICB0aGlzLmhpZGRlbkNhbnZhcy53aWR0aCA9IGltZ0hlaWdodDtcclxuICAgICAgICAgdGhpcy5oaWRkZW5DYW52YXMuaGVpZ2h0ID0gaW1nV2lkdGg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmhpZGRlbkNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICBpZiAoY29udGV4dCA9PT0gbnVsbCkge1xyXG4gICAgICAgICBkZWJ1ZygnQ2Fubm90IGdldCBjb250ZXh0IDJEJyk7XHJcbiAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChTcXVpbnRTdHJpbmdzLkNBTUVSQV9OT1RfUkVBRFkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb250ZXh0LnJvdGF0ZSh0aGlzLnJvdGF0aW9uKTtcclxuXHJcbiAgICAgIHN3aXRjaCAodGhpcy5yb3RhdGlvbikge1xyXG4gICAgICAgICBjYXNlIENhbWVyYVJvdGF0aW9uLkRFR18wOlxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGNhc2UgQ2FtZXJhUm90YXRpb24uREVHXzkwOlxyXG4gICAgICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSgwLCAtaW1nSGVpZ2h0KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICBjYXNlIENhbWVyYVJvdGF0aW9uLkRFR18xODA6XHJcbiAgICAgICAgICAgIGNvbnRleHQudHJhbnNsYXRlKC1pbWdXaWR0aCwgLWltZ0hlaWdodCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgY2FzZSBDYW1lcmFSb3RhdGlvbi5ERUdfMjcwOlxyXG4gICAgICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSgtaW1nV2lkdGgsIDApO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG5cclxuICAgICAgY29udGV4dC5kcmF3SW1hZ2UoXHJcbiAgICAgICAgIHRoaXMudmlkZW8sXHJcbiAgICAgICAgIHRoaXMuY2FwdHVyZS54LFxyXG4gICAgICAgICB0aGlzLmNhcHR1cmUueSxcclxuICAgICAgICAgdGhpcy5jYXB0dXJlLndpZHRoLFxyXG4gICAgICAgICB0aGlzLmNhcHR1cmUuaGVpZ2h0LFxyXG4gICAgICAgICAwLFxyXG4gICAgICAgICAwLFxyXG4gICAgICAgICBpbWdXaWR0aCxcclxuICAgICAgICAgaW1nSGVpZ2h0KTtcclxuXHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxCbG9iIHwgbnVsbD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICB0aGlzLmhpZGRlbkNhbnZhcy50b0Jsb2IoXHJcbiAgICAgICAgICAgIChibG9iKSA9PiB7XHJcbiAgICAgICAgICAgICAgIC8vIHRoZSBjYW1lcmEgY291bGQgaGF2ZSBzdG9wcGVkIHNpbmNlIHdlIHN0YXJ0ZWQgdGhpc1xyXG4gICAgICAgICAgICAgICAvLyBwcm9jZXNzLiBJZiBzbywgYWJhbmRvbiB0aGUgcmVzdWx0IGFzIHdlIGRvbid0IGtub3dcclxuICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgY2FtZXJhIHdlbnQgb2ZmXHJcbiAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvLnJlYWR5U3RhdGUgIT0gNCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KFNxdWludFN0cmluZ3MuQ0FNRVJBX05PVF9SRUFEWSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wYXVzZWQpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChTcXVpbnRTdHJpbmdzLkNBTUVSQV9OT1RfUkVBRFkpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICByZXNvbHZlKGJsb2IpXHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2ltYWdlL2pwZWcnLFxyXG4gICAgICAgICAgICBqcGVnUXVhbGl0eSk7XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgdGFrZVBpY3R1cmUyKFxyXG4gICAgICBtZWdhUGl4ZWxzOiBudW1iZXIsXHJcbiAgICAgIGJsdXI6IG51bWJlclxyXG4gICApOiBJbWFnZURhdGEge1xyXG5cclxuICAgICAgaWYgKHRoaXMudmlkZW8ucmVhZHlTdGF0ZSAhPSA0KSB7XHJcbiAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAvL3JldHVybiBQcm9taXNlLnJlamVjdChTcXVpbnRTdHJpbmdzLkNBTUVSQV9OT1RfUkVBRFkpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnBhdXNlZCkge1xyXG4gICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgLy9yZXR1cm4gUHJvbWlzZS5yZWplY3QoU3F1aW50U3RyaW5ncy5DQU1FUkFfTk9UX1JFQURZKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMudmlkZW8udmlkZW9IZWlnaHQgPT09IDAgfHwgdGhpcy52aWRlby52aWRlb1dpZHRoID09PSAwKSB7XHJcbiAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAvL3JldHVybiBQcm9taXNlLnJlamVjdCgnWFggVmlkZW8gU2l6ZSA9IDAnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5vdmVybGF5Q2FudmFzLndpZHRoID0gdGhpcy5vdmVybGF5Q2FudmFzLmNsaWVudFdpZHRoO1xyXG4gICAgICB0aGlzLm92ZXJsYXlDYW52YXMuaGVpZ2h0ID0gdGhpcy5vdmVybGF5Q2FudmFzLmNsaWVudEhlaWdodDtcclxuXHJcbiAgICAgIHRoaXMuZHJhd092ZXJsYXkoKTtcclxuXHJcbiAgICAgIGxldCBzY2FsZSA9IE1hdGgubWluKE1hdGguc3FydCgxMDAwMDAwICogbWVnYVBpeGVscyAvICh0aGlzLmNhcHR1cmUud2lkdGggKiB0aGlzLmNhcHR1cmUuaGVpZ2h0KSksIDEpO1xyXG4gICAgICB0aGlzLmhpZGRlbkNhbnZhcy53aWR0aCA9IHRoaXMuY2FwdHVyZS53aWR0aCAqIHNjYWxlO1xyXG4gICAgICB0aGlzLmhpZGRlbkNhbnZhcy5oZWlnaHQgPSB0aGlzLmNhcHR1cmUuaGVpZ2h0ICogc2NhbGU7XHJcblxyXG4gICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5oaWRkZW5DYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgaWYgKGNvbnRleHQgPT09IG51bGwpIHtcclxuICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgIC8vcmV0dXJuIFByb21pc2UucmVqZWN0KFNxdWludFN0cmluZ3MuQ0FNRVJBX05PVF9SRUFEWSk7XHJcbiAgICAgIH1cclxuICAgICAgY29udGV4dC5maWx0ZXIgPSAnYmx1cignICsgYmx1ciArICdweCknO1xyXG5cclxuICAgICAgY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSB0cnVlO1xyXG4gICAgICBjb250ZXh0LmltYWdlU21vb3RoaW5nUXVhbGl0eSA9ICdoaWdoJztcclxuXHJcbiAgICAgIGNvbnRleHQuZHJhd0ltYWdlKFxyXG4gICAgICAgICB0aGlzLnZpZGVvLFxyXG4gICAgICAgICB0aGlzLmNhcHR1cmUueCxcclxuICAgICAgICAgdGhpcy5jYXB0dXJlLnksXHJcbiAgICAgICAgIHRoaXMuY2FwdHVyZS53aWR0aCxcclxuICAgICAgICAgdGhpcy5jYXB0dXJlLmhlaWdodCxcclxuICAgICAgICAgMCxcclxuICAgICAgICAgMCxcclxuICAgICAgICAgdGhpcy5oaWRkZW5DYW52YXMud2lkdGgsXHJcbiAgICAgICAgIHRoaXMuaGlkZGVuQ2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICByZXR1cm4gY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5oaWRkZW5DYW52YXMud2lkdGgsIHRoaXMuaGlkZGVuQ2FudmFzLmhlaWdodCk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzdGFydChkZXNpcmVkOiBNZWRpYVRyYWNrQ29uc3RyYWludHMpOiBQcm9taXNlPE1lZGlhU3RyZWFtVHJhY2s+IHtcclxuXHJcbiAgICAgIGxldCBjb25zdHJhaW50czogTWVkaWFTdHJlYW1Db25zdHJhaW50cztcclxuICAgICAgaWYgKGRlc2lyZWQuZGV2aWNlSWQgJiYgZGVzaXJlZC5kZXZpY2VJZC50b1N0cmluZygpLnRyaW0oKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgIGNvbnN0cmFpbnRzID0ge1xyXG4gICAgICAgICAgICB2aWRlbzoge1xyXG4gICAgICAgICAgICAgICB3aWR0aDogeyBpZGVhbDogZGVzaXJlZC53aWR0aCA/IGRlc2lyZWQud2lkdGggYXMgbnVtYmVyIDogMTAgKiAxMDAwIH0sXHJcbiAgICAgICAgICAgICAgIGhlaWdodDogeyBpZGVhbDogZGVzaXJlZC5oZWlnaHQgPyBkZXNpcmVkLmhlaWdodCBhcyBudW1iZXIgOiAxMCAqIDEwMDAgfSxcclxuICAgICAgICAgICAgICAgZmFjaW5nTW9kZTogZGVzaXJlZC5mYWNpbmdNb2RlLFxyXG4gICAgICAgICAgICAgICBkZXZpY2VJZDogZGVzaXJlZC5kZXZpY2VJZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYXVkaW86IGZhbHNlLFxyXG4gICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICAvL2RlYnVnKCdubyBkZXZpY2UgaWQsIGZhbGxpbmcgYmFjayB0byBhbnkgY2FtZXJhJyk7XHJcbiAgICAgICAgIGNvbnN0cmFpbnRzID0ge1xyXG4gICAgICAgICAgICB2aWRlbzoge1xyXG4gICAgICAgICAgICAgICB3aWR0aDogeyBpZGVhbDogMTAgKiAxMDAwIH0sXHJcbiAgICAgICAgICAgICAgIGhlaWdodDogeyBpZGVhbDogMTAgKiAxMDAwIH0sXHJcbiAgICAgICAgICAgICAgIGZhY2luZ01vZGU6IGRlc2lyZWQuZmFjaW5nTW9kZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYXVkaW86IGZhbHNlLFxyXG4gICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2U8TWVkaWFTdHJlYW1UcmFjaz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cylcclxuICAgICAgICAgICAgLnRoZW4oKHN0cmVhbSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgaWYgKHN0cmVhbSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICByZWplY3QoJ0NvdWxkIG5vdCBjcmVhdGUgdmlkZW8gc3RyZWFtJyk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGxldCB0aGUgVmlkZW8gb2JqZWN0IGtub3cgdGhhdCB0aGUgdXNlciBoYXMga25vdyBncmFudGVkIHVzZXIgcGVybWlzc2lvblxyXG4gICAgICAgICAgICAgICAgICAvLyB0byB1c2UgdGhlIGNhbWVyYVxyXG4gICAgICAgICAgICAgICAgICBDYW1lcmEudmlkZW9FbmFibGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCB0cmFjayA9IHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdGhpcy52aWRlby5wbGF5KClcclxuICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcHR1cmUueCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZS55ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlLndpZHRoID0gdGhpcy52aWRlby52aWRlb1dpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcHR1cmUuaGVpZ2h0ID0gdGhpcy52aWRlby52aWRlb0hlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2lyZWQuZGV2aWNlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGV2aWNlSWQgPSBkZXNpcmVkLmRldmljZUlkLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RldmljZUlkID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0cmFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKHJlYXNvbikgPT4ge1xyXG4gICAgICAgICAgICAgICByZWplY3QoJ1ZpZGVvIGVycm9yOiAnICsgcmVhc29uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc3RvcCgpOiB2b2lkIHtcclxuICAgICAgaWYgKHRoaXMudmlkZW8uc3JjT2JqZWN0KSB7XHJcbiAgICAgICAgIC8vIFVzaW5nIHRoZSBjYW1lcmEgaXMgbm90IHJvYnVzdC4gQXBwbHlpbmcgY29uc3RyYWludHMgdG8gY2hhbmdlIHRoaW5nc1xyXG4gICAgICAgICAvLyBsaWtlIHdoaWNoIGNhbWVyYSBpcyBpbiB1c2Ugb25seSB3b3JrcyBzb21ldGltZXMuIFRoZSBtb3N0IHJvYnVzdCBJIGNhblxyXG4gICAgICAgICAvLyBtYWtlIGl0IGlzIHRvIGNsb3NlIHRoZSB2aWRlbyBlbGVtZW50IGFuZCBjcmVhdGUgYSBuZXcgb25lLlxyXG4gICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLnZpZGVvLnNyY09iamVjdCBhcyBNZWRpYVN0cmVhbTtcclxuICAgICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrOiBNZWRpYVN0cmVhbVRyYWNrKSA9PiB7XHJcbiAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcclxuICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIGFwcGx5QWR2YW5jZWRDb25zdHJhaW50cyhhZHZhbmNlZENvbnN0cmFpbnRzOiBJQWR2YW5jZWRDb25zdHJhaW50W10pOiB2b2lkIHtcclxuICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy52aWRlby5zcmNPYmplY3QgYXMgTWVkaWFTdHJlYW07XHJcbiAgICAgIGNvbnN0IHRyYWNrID0gc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF07XHJcblxyXG4gICAgICBjb25zdCBjb25zdHJhaW50ID0ge30gYXMgSUFkdmFuY2VkQ29uc3RyYWludFZhbHVlO1xyXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYWR2YW5jZWRDb25zdHJhaW50cykge1xyXG4gICAgICAgICBjb25zdHJhaW50W2l0ZW0uY29uc3RyYWludF0gPSBpdGVtLnZhbHVlKCk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc29sZS5sb2coJ3NldHRpbmcgYWR2YW5jZWQgY29uc3RyYWludHM6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50LCBudWxsLCAnICcpKTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbnN0cmFpbnRzID0geyBhZHZhbmNlZDogW2NvbnN0cmFpbnRdIH07XHJcbiAgICAgIHRyYWNrLmFwcGx5Q29uc3RyYWludHMoPE1lZGlhVHJhY2tDb25zdHJhaW50cz48YW55Pihjb25zdHJhaW50cykpXHJcbiAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGRlYnVnKCdDYW5ub3QgYXBwbHkgY29uc3RyYWludHM6ICcgKyBlcnIpO1xyXG4gICAgICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldENhcGFiaWxpdGllcygpOiBNZWRpYVRyYWNrQ2FwYWJpbGl0aWVzIHtcclxuICAgICAgaWYgKHRoaXMudmlkZW8uc3JjT2JqZWN0KSB7XHJcbiAgICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMudmlkZW8uc3JjT2JqZWN0IGFzIE1lZGlhU3RyZWFtO1xyXG4gICAgICAgICBjb25zdCB0cmFjayA9IHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO1xyXG4gICAgICAgICBpZiAodHJhY2suZ2V0Q2FwYWJpbGl0aWVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cmFjay5nZXRDYXBhYmlsaXRpZXMoKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4ge307XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgc3RhdGljIG51bVRvU3RyaW5nKG51bTogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgaWYgKE51bWJlci5pc0ludGVnZXIobnVtKSkge1xyXG4gICAgICAgICByZXR1cm4gbnVtLnRvU3RyaW5nKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHJldHVybiBudW0udG9GaXhlZCgzKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc3RhdGljIGNhcGFiaWxpdHlUb1N0cmluZyhjYXBhYmlsaXRpZXM6IE1lZGlhVHJhY2tDYXBhYmlsaXRpZXMsIG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgIGNvbnN0IG9iaiA9ICg8YW55PmNhcGFiaWxpdGllcylbbmFtZV07XHJcbiAgICAgIGxldCBzdHIgPSBuYW1lICsgJzogJztcclxuICAgICAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgIGlmIChvYmpbJ21pbiddICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgc3RyICs9IENhbWVyYS5udW1Ub1N0cmluZyhvYmpbJ21pbiddIGFzIG51bWJlcikgKyAnIHRvICcgKyBDYW1lcmEubnVtVG9TdHJpbmcob2JqWydtYXgnXSBhcyBudW1iZXIpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgIGlmIChpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICBzdHIgKz0gJywgJztcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBzdHIgKz0gSlNPTi5zdHJpbmdpZnkob2JqW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzdHIgKz0gSlNPTi5zdHJpbmdpZnkob2JqKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICBzdHIgKz0gSlNPTi5zdHJpbmdpZnkob2JqKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc3RyO1xyXG4gICB9XHJcblxyXG5cclxuICAgcHJpdmF0ZSBzdGF0aWMgdmlkZW9FbmFibGVkID0gZmFsc2U7XHJcblxyXG4gICBwdWJsaWMgc3RhdGljIGdldENhbWVyYXMob25Gb3VuZDogKHJlc29sdXRpb246IElWaWRlb0NvbnN0cmFpbnQsIGluZGV4OiBudW1iZXIsIG51bUNhbWVyYXM6IG51bWJlcikgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKVxyXG4gICAgICAgICAudGhlbigoZGV2aWNlcykgPT4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IG51bUNhbWVyYXMgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRldmljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgY29uc3QgZGV2aWNlID0gZGV2aWNlc1tpXTtcclxuICAgICAgICAgICAgICAgLy8gQXZTdHJlYW0gaXMgdGhlIGluZmFyZWQgY2FtZXJhIHRoYXQgaXNuJ3QgYSBjYW1lcmEgaW4gY2hyb21lXHJcbiAgICAgICAgICAgICAgIGlmIChkZXZpY2Uua2luZCA9PT0gJ3ZpZGVvaW5wdXQnICYmIGRldmljZS5sYWJlbC5zdGFydHNXaXRoKCdBdlN0cmVhbSBNZWRpYSBEZXZpY2UnKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgbnVtQ2FtZXJhcysrO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpT1MoKSAmJiBDYW1lcmEudmlkZW9FbmFibGVkID09PSBmYWxzZSkge1xyXG5cclxuICAgICAgICAgICAgICAgLy8gaVBob25lcyBhbmQgaVBhZHMgZG9uJ3QgYWxsb3cgeW91IHRvIGVudW1lcmF0ZSBjYW1lcmFzIHVudGlsIHRoZSB1c2VyXHJcbiAgICAgICAgICAgICAgIC8vIGhhcyBnaXZlbiBwZXJtaXNzaW9uIGFuZCB0aGF0IGRvZXNuJ3QgaGFwcGVuIHVudGlsIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgICAgICAgIC8vIHdlIHRyeSB0byB1c2Ugb25lLiBcclxuICAgICAgICAgICAgICAgLy8gVE9ETyBtYWtlIHRoaXMgd29yayBvbiBpUGhvbmVzIHdpdGhvdXQgdGhlIGlmIHN0YXRlbWVudFxyXG4gICAgICAgICAgICAgICBvbkZvdW5kKHtcclxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdGcm9udCBDYW1lcmEnLFxyXG4gICAgICAgICAgICAgICAgICBmYWNpbmdNb2RlOiAndXNlcicsXHJcbiAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgICAgICAgIDIpO1xyXG5cclxuICAgICAgICAgICAgICAgb25Gb3VuZCh7XHJcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQmFjayBDYW1lcmEnLFxyXG4gICAgICAgICAgICAgICAgICBmYWNpbmdNb2RlOiAnZW52aXJvbm1lbnQnLFxyXG4gICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAxLFxyXG4gICAgICAgICAgICAgICAgICAyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgbGV0IHN0ciA9ICcnO1xyXG4gICAgICAgICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRldmljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgZGV2aWNlID0gZGV2aWNlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgaWYgKGRldmljZS5raW5kID09PSAndmlkZW9pbnB1dCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICAgc3RyICs9ICdcIicgKyBkZXZpY2UuZGV2aWNlSWQgKyAnXCI6ICcgKyBkZXZpY2UubGFiZWwgKyAnXFxuJztcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIHN0ciA9IGNvdW50ICsgJyBjYW1lcmFzIGZvdW5kLlxcbicgKyBzdHI7XHJcbiAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlbnVtZXJhdGVEZXZpY2VzKClcXG4nICsgc3RyKTtcclxuXHJcbiAgICAgICAgICAgICAgIGxldCBjYW1lcmFDb3VudCA9IDE7XHJcbiAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGV2aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBkZXZpY2UgPSBkZXZpY2VzW2ldO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoZGV2aWNlLmtpbmQgPT09ICd2aWRlb2lucHV0JyAmJiBkZXZpY2UubGFiZWwuc3RhcnRzV2l0aCgnQXZTdHJlYW0gTWVkaWEgRGV2aWNlJykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIGlmIChkZXZpY2UubGFiZWwuaW5jbHVkZXMoJ0lOT0dFTkkgNEsnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWwgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnSU5PR0VOSSA0SycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldmljZUlkOiBkZXZpY2UuZGV2aWNlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyICogMTkyMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyICogMTA4MCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Gb3VuZChhY3R1YWwsIGluZGV4KyssIG51bUNhbWVyYXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWwgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnY2FtZXJhICcgKyBjYW1lcmFDb3VudCsrLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZpY2VJZDogZGV2aWNlLmRldmljZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkZvdW5kKGFjdHVhbCwgaW5kZXgrKywgbnVtQ2FtZXJhcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfSlcclxuICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgZGVidWcoJ0Nhbm5vdCBlbnVtZXJhdGUgdmlkZW8gZGV2aWNlczogJyArIGVycik7XHJcbiAgICAgICAgIH0pO1xyXG4gICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgTGlzdEJveCB9IGZyb20gJy4uLy4uL0dVSS9MaXN0Qm94JztcclxuaW1wb3J0IHsgU3F1aW50IH0gZnJvbSAnLi9TcXVpbnQnO1xyXG5pbXBvcnQgeyBHVUkgfSBmcm9tICcuLi8uLi9HVUkvR1VJJztcclxuaW1wb3J0IHsgSUNvbm5lY3Rpb25JbmZvQmFzaWMsIElTZXNzaW9uSW5mb0Z1bGwgfSBmcm9tICcuL1NxdWludE1lc3NhZ2UnO1xyXG5pbXBvcnQgeyBSZXNpemVhYmxlUGFuZWwgfSBmcm9tICcuL1Jlc2l6ZWFibGVQYW5lbCc7XHJcbmltcG9ydCB7IFNxdWludEV2ZW50IH0gZnJvbSAnLi9TcXVpbnRFdmVudHMnO1xyXG5pbXBvcnQgeyBpc1RlbXBsYXRlU3BhbiB9IGZyb20gJ3R5cGVzY3JpcHQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIENoYXRQYW5lbCBleHRlbmRzIFJlc2l6ZWFibGVQYW5lbCB7XHJcblxyXG4gICBwcml2YXRlIHZpZXdlcnNMaXN0Qm94OiBMaXN0Qm94O1xyXG4gICBwcml2YXRlIGNoYXRMaXN0Qm94OiBMaXN0Qm94O1xyXG4gICBwcml2YXRlIGhvc3RDb25uZWN0aW9uSWQ6IHN0cmluZztcclxuXHJcbiAgIHByaXZhdGUgc3F1aW50OiBTcXVpbnQ7XHJcblxyXG4gICBwdWJsaWMgZ2V0IG51bVZpZXdlcnMoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMudmlld2Vyc0xpc3RCb3guaXRlbXMubGVuZ3RoIC0gMTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCB2aWV3ZXJzKCk6IHN0cmluZ1tdIHtcclxuICAgICAgbGV0IGl0ZW1zOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICB0aGlzLnZpZXdlcnNMaXN0Qm94Lml0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgaXRlbXMucHVzaChpdGVtLmRpdi5pbm5lclRleHQpO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGl0ZW1zO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3Ioc3F1aW50OiBTcXVpbnQsIHBhcmVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgc3VwZXIocGFyZW50LCAnQ2hhdFBhbmVsRGl2JywgJ0ZsZXgnLCAnQ2hhdFBhbmVsJyk7XHJcbiAgICAgIHRoaXMuc3F1aW50ID0gc3F1aW50O1xyXG5cclxuICAgICAgY29uc3Qgdmlld2Vyc1RpdGxlRGl2ID0gR1VJLmNyZWF0ZSgnZGl2JywgJ1ZpZXdlcnNUaXRsZURpdicsIHRoaXMuZGl2KTtcclxuICAgICAgdmlld2Vyc1RpdGxlRGl2LmNsYXNzTmFtZSA9ICdUaXRsZUNsYXNzJztcclxuICAgICAgdmlld2Vyc1RpdGxlRGl2LmlubmVyVGV4dCA9ICdWaWV3ZXJzJztcclxuXHJcbiAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gR1VJLmNyZWF0ZSgnYnV0dG9uJywgJ0NoYXRQYW5lbENsb3NlQnV0dG9uJywgdmlld2Vyc1RpdGxlRGl2KTtcclxuICAgICAgY2xvc2VCdXR0b24uY2xhc3NOYW1lID0gJ0J1dHRvbkNsYXNzJztcclxuICAgICAgY2xvc2VCdXR0b24uaW5uZXJUZXh0ID0gJ1gnO1xyXG4gICAgICBjbG9zZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy52aWV3ZXJzTGlzdEJveCA9IG5ldyBMaXN0Qm94KHRoaXMuZGl2LCAnVmlld2Vyc0xpc3RCb3gnKTtcclxuXHJcbiAgICAgIGNvbnN0IGNoYXRUaXRsZURpdiA9IEdVSS5jcmVhdGUoJ2RpdicsICdDaGF0VGl0bGVEaXYnLCB0aGlzLmRpdik7XHJcbiAgICAgIGNoYXRUaXRsZURpdi5jbGFzc05hbWUgPSAnVGl0bGVDbGFzcyc7XHJcbiAgICAgIGNoYXRUaXRsZURpdi5pbm5lclRleHQgPSAnQ2hhdCc7XHJcblxyXG4gICAgICB0aGlzLmNoYXRMaXN0Qm94ID0gbmV3IExpc3RCb3godGhpcy5kaXYsICdDaGF0TGlzdEJveCcpO1xyXG5cclxuICAgICAgY29uc3QgY2hhdFRleHRJbnB1dCA9IEdVSS5jcmVhdGUoJ2lucHV0JywgJ0NoYXRUZXh0SW5wdXQnLCB0aGlzLmRpdik7XHJcbiAgICAgIGNoYXRUZXh0SW5wdXQudHlwZSA9ICd0ZXh0JztcclxuICAgICAgY2hhdFRleHRJbnB1dC5wbGFjZWhvbGRlciA9ICdUeXBlIGNoYXQgbWVzc2FnZSBoZXJlJztcclxuXHJcbiAgICAgIGNoYXRUZXh0SW5wdXQub25rZXlkb3duID0gKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcbiAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgICAgICB0aGlzLnNxdWludC5zZW5kQ2hhdE1lc3NhZ2UoY2hhdFRleHRJbnB1dC52YWx1ZSk7XHJcbiAgICAgICAgICAgIGNoYXRUZXh0SW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgICAgfVxyXG4gICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5zcXVpbnQub24oe1xyXG4gICAgICAgICBldmVudDogU3F1aW50RXZlbnQuU2Vzc2lvbkluZm8sXHJcbiAgICAgICAgIGhhbmRsZXI6IChpbmZvOiBJU2Vzc2lvbkluZm9GdWxsKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25TZXNzaW9uSW5mbyhpbmZvKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuc3F1aW50Lm9uKHtcclxuICAgICAgICAgZXZlbnQ6IFNxdWludEV2ZW50LkNvbm5lY3Rpb25JbmZvVXBkYXRlLFxyXG4gICAgICAgICBoYW5kbGVyOiAoaW5mbzogSUNvbm5lY3Rpb25JbmZvQmFzaWMpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vblVwZGF0ZUNvbm5lY3Rpb25JbmZvKGluZm8pO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5zcXVpbnQub24oe1xyXG4gICAgICAgICBldmVudDogU3F1aW50RXZlbnQuQ2hhdE1lc3NhZ2UsXHJcbiAgICAgICAgIGhhbmRsZXI6IChzcmM6IElDb25uZWN0aW9uSW5mb0Jhc2ljLCBtc2c6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2hhdE1lc3NhZ2Uoc3JjLCBtc2cpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5zcXVpbnQub24oe1xyXG4gICAgICAgICBldmVudDogU3F1aW50RXZlbnQuQ2xvc2UsXHJcbiAgICAgICAgIGhhbmRsZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jaGF0TGlzdEJveC5jbGVhcigpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdlcnNMaXN0Qm94LmNsZWFyKCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSlcclxuICAgfVxyXG5cclxuXHJcbiAgIHByaXZhdGUgb25TZXNzaW9uSW5mbyhpbmZvOiBJU2Vzc2lvbkluZm9GdWxsKSB7XHJcblxyXG4gICAgICB0aGlzLnZpZXdlcnNMaXN0Qm94LmNsZWFyKCk7XHJcblxyXG4gICAgICBpZiAoaW5mby5ob3N0KSB7XHJcbiAgICAgICAgIHRoaXMudmlld2Vyc0xpc3RCb3guYWRkSXRlbShpbmZvLmhvc3QudXNlck5hbWUgKyAnIChob3N0KScsIGluZm8uaG9zdC5jb25uZWN0aW9uSWQpO1xyXG4gICAgICAgICB0aGlzLmhvc3RDb25uZWN0aW9uSWQgPSBpbmZvLmhvc3QuY29ubmVjdGlvbklkO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IHZpZXdlciBvZiBpbmZvLnZpZXdlcnMpIHtcclxuICAgICAgICAgdGhpcy52aWV3ZXJzTGlzdEJveC5hZGRJdGVtKHZpZXdlci51c2VyTmFtZSwgdmlld2VyLmNvbm5lY3Rpb25JZCk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBvblVwZGF0ZUNvbm5lY3Rpb25JbmZvKGluZm86IElDb25uZWN0aW9uSW5mb0Jhc2ljKSB7XHJcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnZpZXdlcnNMaXN0Qm94Lml0ZW1zKSB7XHJcbiAgICAgICAgIGlmIChpdGVtLnVzZXJEYXRhID09PSBpbmZvLmNvbm5lY3Rpb25JZCkge1xyXG4gICAgICAgICAgICBpZiAoaW5mby5jb25uZWN0aW9uSWQgPT09IHRoaXMuaG9zdENvbm5lY3Rpb25JZCkge1xyXG4gICAgICAgICAgICAgICBpdGVtLmRpdi5pbm5lclRleHQgPSBpbmZvLnVzZXJOYW1lICsgJyAoaG9zdCknO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICBpdGVtLmRpdi5pbm5lclRleHQgPSBpbmZvLnVzZXJOYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIG9uQ2hhdE1lc3NhZ2Uoc3JjOiBJQ29ubmVjdGlvbkluZm9CYXNpYywgbXNnOiBzdHJpbmcpIHtcclxuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuY2hhdExpc3RCb3guYWRkSXRlbSgpO1xyXG4gICAgICBpdGVtLmlubmVySFRNTCA9ICc8Yj4nICsgc3JjLnVzZXJOYW1lICsgJzwvYj46ICcgKyBtc2c7XHJcbiAgICAgIGl0ZW0uc2Nyb2xsSW50b1ZpZXcoKTtcclxuICAgfVxyXG59IiwidHlwZSBFdmVudEhhbmRsZXIgPSAoLi4uYXJnczogYW55W10pID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgY2xhc3MgRXZlbnRNYW5hZ2VyIHtcclxuXHJcbiAgIHByaXZhdGUgaGFuZGxlcnMgPSBuZXcgTWFwPHN0cmluZywgRXZlbnRIYW5kbGVyW10+KCk7XHJcblxyXG4gICBwdWJsaWMgb24obmFtZTogc3RyaW5nLCBoYW5kbGVyOiBFdmVudEhhbmRsZXIpOiB2b2lkIHtcclxuICAgICAgY29uc3QgYXJyID0gdGhpcy5oYW5kbGVycy5nZXQobmFtZSk7XHJcblxyXG4gICAgICBpZiAoYXJyKSB7XHJcbiAgICAgICAgIGFyci5wdXNoKGhhbmRsZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICBjb25zdCBhcnIgPSBbXTtcclxuICAgICAgICAgYXJyLnB1c2goaGFuZGxlcik7XHJcbiAgICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KG5hbWUsIGFycik7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIHJlbW92ZShuYW1lOiBzdHJpbmcsIGhhbmRsZXI6IEV2ZW50SGFuZGxlcik6IHZvaWQge1xyXG4gICAgICBsZXQgYXJyID0gdGhpcy5oYW5kbGVycy5nZXQobmFtZSk7XHJcblxyXG4gICAgICBpZiAoYXJyKSB7XHJcbiAgICAgICAgIGFyciA9IGFyci5maWx0ZXIoKGVsZW0pID0+IGVsZW0gIT0gaGFuZGxlcik7XHJcbiAgICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KG5hbWUsIGFycik7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIGVtaXQobmFtZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICBjb25zdCBhcnIgPSB0aGlzLmhhbmRsZXJzLmdldChuYW1lKTtcclxuICAgICAgaWYgKGFycikge1xyXG4gICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgYXJyKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgIGhhbmRsZXIoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSwgYXJnc1s0XSwgYXJnc1s1XSwgYXJnc1s2XSwgYXJnc1s3XSwgYXJnc1s4XSwgYXJnc1s5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmhhbmRsZWQgZXhjZXB0aW9uOiAnICsgZXJyICsgJ1xcbicgKyBKU09OLnN0cmluZ2lmeShlcnIsIG51bGwsICcgJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9XHJcbn0iLCJpbXBvcnQgeyBHVUkgfSBmcm9tICcuLi8uLi9HVUkvR1VJJztcclxuaW1wb3J0IHsgaHN2Q29sb3IgfSBmcm9tICcuLi8uLi9VdGlsL2hzdkNvbG9yJztcclxuaW1wb3J0IHsgSW1hZ2VGaWx0ZXIgfSBmcm9tICcuL0ltYWdlRmlsdGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBJbWFnZUNhbnZhcyB7XHJcbiAgIHByb3RlY3RlZCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICBwdWJsaWMgem9vbSA9IDE7XHJcbiAgIHB1YmxpYyB4T2Zmc2V0ID0gMDtcclxuICAgcHVibGljIHlPZmZzZXQgPSAwO1xyXG5cclxuICAgcHVibGljIGNocm9tYSA9IDEwMDtcclxuICAgcHVibGljIGJsYWNrID0gMDtcclxuICAgcHVibGljIHdoaXRlID0gMTtcclxuICAgcHVibGljIG1pZFB0ID0gMC41O1xyXG4gICBwdWJsaWMgbWlkVmFsdWUgPSAwLjU7XHJcbiAgIHB1YmxpYyBzaG93QXNUZW1wZXJhdHVyZSA9IGZhbHNlO1xyXG5cclxuICAgcHVibGljIG51bUxldmVscyA9IE5hTjtcclxuXHJcbiAgIHB1YmxpYyBnZXQgZWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNhbnZhcztcclxuICAgfVxyXG5cclxuICAgcHVibGljIHNldCB3aWR0aChweDogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gcHg7XHJcbiAgIH1cclxuICAgcHVibGljIGdldCB3aWR0aCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5jYW52YXMud2lkdGg7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzZXQgaGVpZ2h0KHB4OiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gcHg7XHJcbiAgIH1cclxuICAgcHVibGljIGdldCBoZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY2FudmFzLmhlaWdodDtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKHBhcmVudDogSFRNTEVsZW1lbnQsIGlkOiBzdHJpbmcpIHtcclxuICAgICAgdGhpcy5jYW52YXMgPSBHVUkuY3JlYXRlKCdjYW52YXMnLCBpZCwgcGFyZW50KTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgICBjb25zdCBjdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZHJhdyhpbWc6IEhUTUxJbWFnZUVsZW1lbnQpOiB2b2lkIHtcclxuXHJcbiAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5jYW52YXMuY2xpZW50V2lkdGg7XHJcbiAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuY2FudmFzLmNsaWVudEhlaWdodDtcclxuXHJcbiAgICAgIGNvbnN0IGNhbnZhc1dpZHRoID0gdGhpcy5jYW52YXMud2lkdGg7XHJcbiAgICAgIGNvbnN0IGNhbnZhc0hlaWdodCA9IHRoaXMuY2FudmFzLmhlaWdodDtcclxuICAgICAgY29uc3QgY2FudmFzQVIgPSBjYW52YXNXaWR0aCAvIGNhbnZhc0hlaWdodDtcclxuXHJcbiAgICAgIGNvbnN0IGltZ1dpZHRoID0gaW1nLndpZHRoO1xyXG4gICAgICBjb25zdCBpbWdIZWlnaHQgPSBpbWcuaGVpZ2h0O1xyXG4gICAgICBjb25zdCBpbWdBUiA9IGltZ1dpZHRoIC8gaW1nSGVpZ2h0O1xyXG5cclxuICAgICAgbGV0IHdpZHRoOiBudW1iZXI7XHJcbiAgICAgIGxldCBoZWlnaHQ6IG51bWJlcjtcclxuXHJcbiAgICAgIGlmIChjYW52YXNBUiA+IGltZ0FSKSB7XHJcbiAgICAgICAgIGhlaWdodCA9IE1hdGguZmxvb3IodGhpcy56b29tICogY2FudmFzSGVpZ2h0KTtcclxuICAgICAgICAgd2lkdGggPSBNYXRoLmZsb29yKGhlaWdodCAqIGltZ0FSKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgd2lkdGggPSBNYXRoLmZsb29yKHRoaXMuem9vbSAqIGNhbnZhc1dpZHRoKTtcclxuICAgICAgICAgaGVpZ2h0ID0gTWF0aC5mbG9vcih3aWR0aCAvIGltZ0FSKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHggPSAoY2FudmFzV2lkdGggLSB3aWR0aCkgLyAyLjAgKyB0aGlzLnhPZmZzZXQ7XHJcbiAgICAgIGxldCB5ID0gKGNhbnZhc0hlaWdodCAtIGhlaWdodCkgLyAyLjAgLSB0aGlzLnlPZmZzZXQ7XHJcblxyXG4gICAgICBjb25zdCBjdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgIGN0eC5pbWFnZVNtb290aGluZ1F1YWxpdHkgPSAnaGlnaCc7XHJcblxyXG4gICAgICBpZiAoaXNOYU4odGhpcy5udW1MZXZlbHMpID09PSBmYWxzZSkge1xyXG4gICAgICAgICBsZXQgYmx1clNpemUgPSBNYXRoLm1pbigzLCAzMCAvIHRoaXMubnVtTGV2ZWxzKTtcclxuICAgICAgICAgY3R4LmZpbHRlciA9ICdibHVyKCcgKyBibHVyU2l6ZSArICdweCknO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjdHguZHJhd0ltYWdlKGltZywgeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcblxyXG4gICAgICAvLyBhZGp1c3QgZGltZW5zaW9ucyBzbyB3ZSdyZSBub3cgb25seSBlZGl0aW5nIHdoYXQgaXMgdmlzaWJsZVxyXG4gICAgICBsZXQgcmlnaHQgPSBNYXRoLm1pbihjYW52YXNXaWR0aCwgd2lkdGggKyB4KTtcclxuICAgICAgbGV0IGJvdHRvbSA9IE1hdGgubWluKGNhbnZhc0hlaWdodCwgaGVpZ2h0ICsgeSk7XHJcbiAgICAgIHggPSBNYXRoLm1heCgwLCB4KTtcclxuICAgICAgeSA9IE1hdGgubWF4KDAsIHkpO1xyXG4gICAgICB3aWR0aCA9IE1hdGgubWluKHJpZ2h0IC0geCwgY2FudmFzV2lkdGgpO1xyXG4gICAgICBoZWlnaHQgPSBNYXRoLm1pbihib3R0b20gLSB5LCBjYW52YXNIZWlnaHQpO1xyXG5cclxuICAgICAgbGV0IGltYWdlRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgIGxldCBkYXRhID0gaW1hZ2VEYXRhLmRhdGE7XHJcblxyXG4gICAgICBpZiAodGhpcy5jaHJvbWEgIT09IDEwMCkge1xyXG4gICAgICAgICBJbWFnZUZpbHRlci5jaHJvbWEoaW1hZ2VEYXRhLCB0aGlzLmNocm9tYSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmJsYWNrICE9PSAwIHx8IHRoaXMubWlkUHQgIT09IDAuNSB8fCB0aGlzLm1pZFZhbHVlICE9PSAwLjUgfHwgdGhpcy53aGl0ZSAhPT0gMSB8fCBpc05hTih0aGlzLm51bUxldmVscykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgIEltYWdlRmlsdGVyLmxldmVscyhpbWFnZURhdGEsIHRoaXMud2hpdGUsIHRoaXMuYmxhY2ssIHRoaXMubWlkUHQsIHRoaXMubWlkVmFsdWUsIHRoaXMubnVtTGV2ZWxzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuc2hvd0FzVGVtcGVyYXR1cmUpIHtcclxuICAgICAgICAgLy8gZmlyc3QgY29tcHV0ZSBtaW4gYW5kIG1heCB0ZW1wXHJcbiAgICAgICAgIGxldCBtaW5UZW1wID0gMjU1O1xyXG4gICAgICAgICBsZXQgbWF4VGVtcCA9IC0yNTU7XHJcbiAgICAgICAgIGxldCBoc3YgPSBuZXcgaHN2Q29sb3IoWzAsIDAsIDBdKTtcclxuICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSA0KSB7XHJcbiAgICAgICAgICAgIGxldCByID0gZGF0YVtpICsgMF07XHJcbiAgICAgICAgICAgIGxldCBnID0gZGF0YVtpICsgMV07XHJcbiAgICAgICAgICAgIGxldCBiID0gZGF0YVtpICsgMl07XHJcbiAgICAgICAgICAgIGhzdi5mcm9tSHRtbFZhbHVlcyhyLCBnLCBiKTtcclxuXHJcbiAgICAgICAgICAgIGxldCB0ZW1wID0gdGhpcy50ZW1wZXJhdHVyZShyLCBnLCBiKTtcclxuICAgICAgICAgICAgbWluVGVtcCA9IE1hdGgubWluKG1pblRlbXAsIHRlbXApO1xyXG4gICAgICAgICAgICBtYXhUZW1wID0gTWF0aC5tYXgobWF4VGVtcCwgdGVtcCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgLy9jb25zb2xlLmxvZyhtaW5UZW1wICsgJyAgICcgKyBtYXhUZW1wKTtcclxuICAgICAgICAgbGV0IGF2Z1RlbXAgPSAobWF4VGVtcCArIG1pblRlbXApIC8gMjtcclxuXHJcbiAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gNCkge1xyXG4gICAgICAgICAgICBsZXQgciA9IGRhdGFbaSArIDBdO1xyXG4gICAgICAgICAgICBsZXQgZyA9IGRhdGFbaSArIDFdO1xyXG4gICAgICAgICAgICBsZXQgYiA9IGRhdGFbaSArIDJdO1xyXG4gICAgICAgICAgICBsZXQgdGVtcCA9IHRoaXMudGVtcGVyYXR1cmUociwgZywgYik7XHJcblxyXG4gICAgICAgICAgICBpZiAodGVtcCA8IGF2Z1RlbXApIHtcclxuICAgICAgICAgICAgICAgciA9IDA7XHJcbiAgICAgICAgICAgICAgIGcgPSAwO1xyXG4gICAgICAgICAgICAgICBiID0gMjU1ICogKGF2Z1RlbXAgLSB0ZW1wKSAvIChhdmdUZW1wIC0gbWluVGVtcCk7XHJcbiAgICAgICAgICAgICAgIHIgPSAyNTUgLSBiO1xyXG4gICAgICAgICAgICAgICBnID0gMjU1IC0gYjtcclxuICAgICAgICAgICAgICAgYiA9IDI1NTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgciA9IDI1NSAqICh0ZW1wIC0gYXZnVGVtcCkgLyAobWF4VGVtcCAtIGF2Z1RlbXApO1xyXG4gICAgICAgICAgICAgICBnID0gMDtcclxuICAgICAgICAgICAgICAgYiA9IDA7XHJcbiAgICAgICAgICAgICAgIGcgPSAyNTUgLSByO1xyXG4gICAgICAgICAgICAgICBiID0gMjU1IC0gcjtcclxuICAgICAgICAgICAgICAgciA9IDI1NTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGF0YVtpICsgMF0gPSByO1xyXG4gICAgICAgICAgICBkYXRhW2kgKyAxXSA9IGc7XHJcbiAgICAgICAgICAgIGRhdGFbaSArIDJdID0gYjtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjdHgucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgeCwgeSk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgdGVtcGVyYXR1cmUocjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiAwLjUgKyAoKChnICsgcikgLyAyIC0gYikgLyAyNTUpIC8gMjtcclxuICAgfVxyXG59IiwiaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuLi8uLi9VdGlsL0dsb2JhbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEltYWdlRmlsdGVyIHtcclxuICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxyXG4gICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc3RhdGljIGNocm9tYShpbWc6IEltYWdlRGF0YSwgY2hyb21hOiBudW1iZXIpOiB2b2lkIHtcclxuXHJcbiAgICAgIGxldCBkYXRhID0gaW1nLmRhdGE7XHJcbiAgICAgIGxldCB3aWR0aCA9IGltZy53aWR0aDtcclxuICAgICAgbGV0IGhlaWdodCA9IGltZy5oZWlnaHQ7XHJcblxyXG4gICAgICBsZXQgYW1vdW50ID0gY2hyb21hIC8gMTAwO1xyXG4gICAgICBjb25zdCBsdW1SID0gKDEgLSBhbW91bnQpICogLjMwODY7XHJcbiAgICAgIGNvbnN0IGx1bUcgPSAoMSAtIGFtb3VudCkgKiAuNjA5NDtcclxuICAgICAgY29uc3QgbHVtQiA9ICgxIC0gYW1vdW50KSAqIC4wODIwO1xyXG4gICAgICBjb25zdCBzaGlmdFcgPSB3aWR0aCA8PCAyO1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGhlaWdodDsgaisrKSB7XHJcbiAgICAgICAgIGNvbnN0IG9mZnNldCA9IGogKiBzaGlmdFc7XHJcbiAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2lkdGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBwb3MgPSBvZmZzZXQgKyAoaSA8PCAyKTtcclxuICAgICAgICAgICAgY29uc3QgciA9IGRhdGFbcG9zICsgMF07XHJcbiAgICAgICAgICAgIGNvbnN0IGcgPSBkYXRhW3BvcyArIDFdO1xyXG4gICAgICAgICAgICBjb25zdCBiID0gZGF0YVtwb3MgKyAyXTtcclxuXHJcbiAgICAgICAgICAgIGRhdGFbcG9zICsgMF0gPSAoKGx1bVIgKyBhbW91bnQpICogcikgKyAobHVtRyAqIGcpICsgKGx1bUIgKiBiKTtcclxuICAgICAgICAgICAgZGF0YVtwb3MgKyAxXSA9IChsdW1SICogcikgKyAoKGx1bUcgKyBhbW91bnQpICogZykgKyAobHVtQiAqIGIpO1xyXG4gICAgICAgICAgICBkYXRhW3BvcyArIDJdID0gKGx1bVIgKiByKSArIChsdW1HICogZykgKyAoKGx1bUIgKyBhbW91bnQpICogYik7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc3RhdGljIGxldmVscyhcclxuICAgICAgaW1nOiBJbWFnZURhdGEsXHJcbiAgICAgIHdoaXRlOiBudW1iZXIsXHJcbiAgICAgIGJsYWNrOiBudW1iZXIsXHJcbiAgICAgIG1pZFB0OiBudW1iZXIsXHJcbiAgICAgIG1pZFZhbHVlOiBudW1iZXIsXHJcbiAgICAgIG51bUxldmVsczogbnVtYmVyXHJcbiAgICk6IHZvaWQge1xyXG5cclxuICAgICAgbGV0IGRhdGEgPSBpbWcuZGF0YTtcclxuXHJcbiAgICAgIGxldCByZWFsTWlkUHQgPSBibGFjayArIG1pZFB0ICogKHdoaXRlIC0gYmxhY2spO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IDQpIHtcclxuXHJcbiAgICAgICAgIGxldCBvbGRMdW0gPSAoMC4zMDg2ICogZGF0YVtpICsgMF0gKyAwLjYwOTQgKiBkYXRhW2kgKyAxXSArIDAuMDgyMCAqIGRhdGFbaSArIDJdKSAvIDI1NS4wO1xyXG4gICAgICAgICBsZXQgbmV3THVtID0gTmFOO1xyXG5cclxuICAgICAgICAgaWYgKG9sZEx1bSA8PSBibGFjaykge1xyXG4gICAgICAgICAgICBuZXdMdW0gPSAwO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2UgaWYgKG9sZEx1bSA+PSB3aGl0ZSkge1xyXG4gICAgICAgICAgICBuZXdMdW0gPSAxO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAob2xkTHVtIDwgcmVhbE1pZFB0KSB7XHJcbiAgICAgICAgICAgICAgIG5ld0x1bSA9IDAgKyBtaWRWYWx1ZSAqICgob2xkTHVtIC0gYmxhY2spIC8gKHJlYWxNaWRQdCAtIGJsYWNrKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgIG5ld0x1bSA9IG1pZFZhbHVlICsgKDEgLSBtaWRWYWx1ZSkgKiAob2xkTHVtIC0gcmVhbE1pZFB0KSAvICh3aGl0ZSAtIHJlYWxNaWRQdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgaWYgKGlzTmFOKG51bUxldmVscykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGxldCB2YWwgPSBuZXdMdW07XHJcbiAgICAgICAgICAgIG5ld0x1bSA9IChNYXRoLmZsb29yKG51bUxldmVscyAqICh2YWwgLSAwLjAwMDEpKSArIDAuNSkgLyBudW1MZXZlbHM7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGxldCByYXRpbyA9IG5ld0x1bSAvIG9sZEx1bTtcclxuICAgICAgICAgaWYgKG9sZEx1bSA8IDEwIC8gMjU1KSB7XHJcbiAgICAgICAgICAgIC8vIGZvciByZWFsbHkgZGFyayB2YWx1ZXMsIHNjYWxlIHVwIGFzIGJsYWNrIGFuZCB3aGl0ZVxyXG4gICAgICAgICAgICAvLyByYXRoZXIgdGhhbiB0aGUgYWN0dWFsIGNvbG9yIHdoaWNoIGVycm9uZW91c2x5IHR1cm5zXHJcbiAgICAgICAgICAgIC8vIGJsdWUgb3Igc29tZXRpbWVzIHJlZFxyXG4gICAgICAgICAgICBkYXRhW2kgKyAwXSA9IGNsYW1wKDI1NSAqIG5ld0x1bSwgMCwgMjU1KTtcclxuICAgICAgICAgICAgZGF0YVtpICsgMV0gPSBjbGFtcCgyNTUgKiBuZXdMdW0sIDAsIDI1NSk7XHJcbiAgICAgICAgICAgIGRhdGFbaSArIDJdID0gY2xhbXAoMjU1ICogbmV3THVtLCAwLCAyNTUpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhW2kgKyAwXSA9IGNsYW1wKGRhdGFbaSArIDBdICogcmF0aW8sIDAsIDI1NSk7XHJcbiAgICAgICAgICAgIGRhdGFbaSArIDFdID0gY2xhbXAoZGF0YVtpICsgMV0gKiByYXRpbywgMCwgMjU1KTtcclxuICAgICAgICAgICAgZGF0YVtpICsgMl0gPSBjbGFtcChkYXRhW2kgKyAyXSAqIHJhdGlvLCAwLCAyNTUpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLypcclxuICAgcHVibGljIHN0YXRpYyBibHVyKGltZzogSW1hZ2VEYXRhLCBibHVyU2l6ZTogbnVtYmVyKTogdm9pZCB7XHJcblxyXG4gICAgICBsZXQgZGF0YSA9IGltZy5kYXRhO1xyXG4gICAgICBsZXQgd2lkdGggPSBpbWcud2lkdGg7XHJcbiAgICAgIGxldCBoZWlnaHQgPSBpbWcuaGVpZ2h0O1xyXG5cclxuICAgICAgbGV0IGluZGV4O1xyXG4gICAgICBsZXQgYmx1ciA9IG5ldyBVaW50OENsYW1wZWRBcnJheSg0ICogd2lkdGgpO1xyXG4gICAgICBsZXQgc3BhbiA9IE1hdGguZmxvb3IoYmx1clNpemUpO1xyXG4gICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCBoZWlnaHQ7IHJvdysrKSB7XHJcbiAgICAgICAgIC8vIGF2ZXJhZ2UgdGhlIGRhdGFcclxuICAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgd2lkdGg7IGNvbCsrKSB7XHJcbiAgICAgICAgICAgIGxldCBzdW1SID0gMDtcclxuICAgICAgICAgICAgbGV0IHN1bUcgPSAwO1xyXG4gICAgICAgICAgICBsZXQgc3VtQiA9IDA7XHJcbiAgICAgICAgICAgIGxldCBtaW4gPSBNYXRoLm1heCgwLCBjb2wgLSBzcGFuKTtcclxuICAgICAgICAgICAgbGV0IG1heCA9IE1hdGgubWluKHdpZHRoIC0gMSwgY29sICsgc3BhbiArIDEpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBjID0gbWluOyBjIDwgbWF4OyBjKyspIHtcclxuICAgICAgICAgICAgICAgaW5kZXggPSA0ICogKHJvdyAqIHdpZHRoICsgYyk7XHJcbiAgICAgICAgICAgICAgIHN1bVIgKz0gZGF0YVtpbmRleCArIDBdO1xyXG4gICAgICAgICAgICAgICBzdW1HICs9IGRhdGFbaW5kZXggKyAxXTtcclxuICAgICAgICAgICAgICAgc3VtQiArPSBkYXRhW2luZGV4ICsgMl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IG51bVNhbXBsZXMgPSBtYXggLSBtaW47XHJcbiAgICAgICAgICAgIGJsdXJbNCAqIGNvbCArIDBdID0gc3VtUiAvIG51bVNhbXBsZXM7XHJcbiAgICAgICAgICAgIGJsdXJbNCAqIGNvbCArIDFdID0gc3VtRyAvIG51bVNhbXBsZXM7XHJcbiAgICAgICAgICAgIGJsdXJbNCAqIGNvbCArIDJdID0gc3VtQiAvIG51bVNhbXBsZXM7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIC8vIHdyaXRlIGl0IGJhY2tcclxuICAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgd2lkdGg7IGNvbCsrKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gNCAqIChyb3cgKiB3aWR0aCArIGNvbCk7XHJcbiAgICAgICAgICAgIGRhdGFbaW5kZXggKyAwXSA9IGJsdXJbNCAqIGNvbCArIDBdO1xyXG4gICAgICAgICAgICBkYXRhW2luZGV4ICsgMV0gPSBibHVyWzQgKiBjb2wgKyAxXTtcclxuICAgICAgICAgICAgZGF0YVtpbmRleCArIDJdID0gYmx1cls0ICogY29sICsgMl07XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgYmx1ciA9IG5ldyBVaW50OENsYW1wZWRBcnJheSg0ICogaGVpZ2h0KTtcclxuICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgd2lkdGg7IGNvbCsrKSB7XHJcbiAgICAgICAgIC8vIGF2ZXJhZ2UgdGhlIGRhdGFcclxuICAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgaGVpZ2h0OyByb3crKykge1xyXG4gICAgICAgICAgICBsZXQgc3VtUiA9IDA7XHJcbiAgICAgICAgICAgIGxldCBzdW1HID0gMDtcclxuICAgICAgICAgICAgbGV0IHN1bUIgPSAwO1xyXG4gICAgICAgICAgICBsZXQgbWluID0gTWF0aC5tYXgoMCwgcm93IC0gc3Bhbik7XHJcbiAgICAgICAgICAgIGxldCBtYXggPSBNYXRoLm1pbihoZWlnaHQgLSAxLCByb3cgKyBzcGFuICsgMSk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHIgPSBtaW47IHIgPCBtYXg7IHIrKykge1xyXG4gICAgICAgICAgICAgICBpbmRleCA9IDQgKiAociAqIHdpZHRoICsgY29sKTtcclxuICAgICAgICAgICAgICAgc3VtUiArPSBkYXRhW2luZGV4ICsgMF07XHJcbiAgICAgICAgICAgICAgIHN1bUcgKz0gZGF0YVtpbmRleCArIDFdO1xyXG4gICAgICAgICAgICAgICBzdW1CICs9IGRhdGFbaW5kZXggKyAyXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgbnVtU2FtcGxlcyA9IG1heCAtIG1pbjtcclxuICAgICAgICAgICAgYmx1cls0ICogcm93ICsgMF0gPSBzdW1SIC8gbnVtU2FtcGxlcztcclxuICAgICAgICAgICAgYmx1cls0ICogcm93ICsgMV0gPSBzdW1HIC8gbnVtU2FtcGxlcztcclxuICAgICAgICAgICAgYmx1cls0ICogcm93ICsgMl0gPSBzdW1CIC8gbnVtU2FtcGxlcztcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgLy8gd3JpdGUgaXQgYmFja1xyXG4gICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCBoZWlnaHQ7IHJvdysrKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gNCAqIChyb3cgKiB3aWR0aCArIGNvbCk7XHJcbiAgICAgICAgICAgIGRhdGFbaW5kZXggKyAwXSA9IGJsdXJbNCAqIHJvdyArIDBdO1xyXG4gICAgICAgICAgICBkYXRhW2luZGV4ICsgMV0gPSBibHVyWzQgKiByb3cgKyAxXTtcclxuICAgICAgICAgICAgZGF0YVtpbmRleCArIDJdID0gYmx1cls0ICogcm93ICsgMl07XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9XHJcbiAgICovXHJcbn0iLCJpbXBvcnQgeyBHVUkgfSBmcm9tICcuLi8uLi9HVUkvR1VJJztcclxuaW1wb3J0IHsgUG9pbnRlckV2ZW50SGFuZGxlciB9IGZyb20gJy4uLy4uL0dVSS9Qb2ludGVyRXZlbnRIYW5kbGVyJztcclxuaW1wb3J0IHsgU2xpZGVyIH0gZnJvbSAnLi4vLi4vR1VJL1NsaWRlcic7XHJcbmltcG9ydCB7IGNsYW1wLCBnZXRFbVBpeGVscyB9IGZyb20gJy4uLy4uL1V0aWwvR2xvYmFscyc7XHJcbmltcG9ydCB7IFZlYzIgfSBmcm9tICcuLi8uLi9VdGlsM0QvVmVjJztcclxuaW1wb3J0IHsgUmVzaXplYWJsZVBhbmVsIH0gZnJvbSAnLi9SZXNpemVhYmxlUGFuZWwnO1xyXG5cclxuZW51bSBIaXRJdGVtIHtcclxuICAgQmxhY2ssXHJcbiAgIFdoaXRlLFxyXG4gICBCb3RoLFxyXG4gICBNaWQsXHJcbiAgIE5vbmVcclxufVxyXG5cclxuY2xhc3MgSGl0IHtcclxuICAgcHVibGljIG9mZnNldFggPSAwO1xyXG4gICBwdWJsaWMgb2Zmc2V0WSA9IDA7XHJcbiAgIHB1YmxpYyBpdGVtOiBIaXRJdGVtID0gSGl0SXRlbS5Ob25lO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgSVBvaW50cyB7XHJcbiAgIGJsYWNrOiBWZWMyLFxyXG4gICB3aGl0ZTogVmVjMixcclxuICAgbWlkOiBWZWMyLFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBDaGFuZ2VIYW5kbGVyID0gKCkgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCBjbGFzcyBMZXZlbHNQYW5lbCBleHRlbmRzIFJlc2l6ZWFibGVQYW5lbCB7XHJcblxyXG4gICBwcml2YXRlIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgIHByaXZhdGUgbWFyZ2luOiBudW1iZXI7XHJcbiAgIHByaXZhdGUgcmFkaXVzOiBudW1iZXI7XHJcbiAgIHByaXZhdGUgbGluZVdpZHRoOiBudW1iZXI7XHJcblxyXG4gICBwdWJsaWMgd2hpdGUgPSAxO1xyXG4gICBwdWJsaWMgYmxhY2sgPSAwO1xyXG4gICBwdWJsaWMgbWlkUG9pbnQgPSAwLjU7XHJcbiAgIHB1YmxpYyBtaWRWYWx1ZSA9IDAuNTtcclxuICAgcHVibGljIG51bUxldmVscyA9IE5hTjtcclxuICAgcHVibGljIGNocm9tYSA9IDEwMDtcclxuXHJcbiAgIHB1YmxpYyBvbkNoYW5nZTogQ2hhbmdlSGFuZGxlciA9IG51bGw7XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IocGFyZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICBzdXBlcihwYXJlbnQsICdMZXZlbHNQYW5lbERpdicsICdGbGV4JywgJ0xldmVsc1BhbmVsJyk7XHJcblxyXG4gICAgICBjb25zdCB2aWV3ZXJzVGl0bGVEaXYgPSBHVUkuY3JlYXRlKCdkaXYnLCAnVGl0bGVEaXYnLCB0aGlzLmRpdik7XHJcbiAgICAgIHZpZXdlcnNUaXRsZURpdi5jbGFzc05hbWUgPSAnVGl0bGVDbGFzcyc7XHJcbiAgICAgIHZpZXdlcnNUaXRsZURpdi5pbm5lclRleHQgPSAnTGV2ZWxzJztcclxuXHJcbiAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gR1VJLmNyZWF0ZSgnYnV0dG9uJywgJ0xldmVsc1BhbmVsQ2xvc2VCdXR0b24nLCB2aWV3ZXJzVGl0bGVEaXYpO1xyXG4gICAgICBjbG9zZUJ1dHRvbi5jbGFzc05hbWUgPSAnQnV0dG9uQ2xhc3MnO1xyXG4gICAgICBjbG9zZUJ1dHRvbi5pbm5lclRleHQgPSAnWCc7XHJcbiAgICAgIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmNhbnZhcyA9IEdVSS5jcmVhdGUoJ2NhbnZhcycsICdBZnRlckNhbnZhcycsIHRoaXMuZGl2KTtcclxuXHJcbiAgICAgIG5ldyBTbGlkZXIodGhpcy5kaXYsIHtcclxuICAgICAgICAgbGFiZWw6ICdMZXZlbHMnLFxyXG4gICAgICAgICBtaW46IDIsXHJcbiAgICAgICAgIG1heDogMjAsXHJcbiAgICAgICAgIHZhbHVlOiAyMCxcclxuICAgICAgICAgb25pbnB1dDogKHNsaWRlcjogU2xpZGVyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzbGlkZXIudmFsdWUgPT09IHNsaWRlci5tYXgpIHtcclxuICAgICAgICAgICAgICAgdGhpcy5udW1MZXZlbHMgPSBOYU47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgIHRoaXMubnVtTGV2ZWxzID0gc2xpZGVyLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2UoKTtcclxuICAgICAgICAgfSxcclxuICAgICAgICAgb25HZXRUZXh0OiAoc2xpZGVyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzbGlkZXIudmFsdWUgPT09IHNsaWRlci5tYXgpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuICfiiJ4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gc2xpZGVyLnZhbHVlLnRvRml4ZWQoMClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIG5ldyBTbGlkZXIodGhpcy5kaXYsIHtcclxuICAgICAgICAgbGFiZWw6ICdDaHJvbWEnLFxyXG4gICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgIG1heDogMjAwLFxyXG4gICAgICAgICB2YWx1ZTogMTAwLFxyXG4gICAgICAgICBvbmlucHV0OiAoc2xpZGVyOiBTbGlkZXIpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jaHJvbWEgPSBzbGlkZXIudmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2UoKTtcclxuICAgICAgICAgfSxcclxuICAgICAgICAgb25HZXRUZXh0OiAoc2xpZGVyKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBzbGlkZXIudmFsdWUudG9GaXhlZCgwKSArICclJ1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIGxldCBoYW5kbGVyID0gbmV3IFBvaW50ZXJFdmVudEhhbmRsZXIodGhpcy5jYW52YXMpO1xyXG5cclxuICAgICAgbGV0IGhpdDogSGl0O1xyXG4gICAgICBoYW5kbGVyLm9uRG93biA9IChwb3M6IFZlYzIpID0+IHtcclxuICAgICAgICAgaGl0ID0gdGhpcy5nZXRIaXQocG9zKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaGFuZGxlci5vbk1vdmUgPSAocG9zOiBWZWMyKSA9PiB7XHJcbiAgICAgICAgIGxldCBoaXQgPSB0aGlzLmdldEhpdChwb3MpO1xyXG4gICAgICAgICBzd2l0Y2ggKGhpdC5pdGVtKSB7XHJcbiAgICAgICAgICAgIGNhc2UgSGl0SXRlbS5CbGFjazpcclxuICAgICAgICAgICAgY2FzZSBIaXRJdGVtLldoaXRlOlxyXG4gICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSAnZXctcmVzaXplJ1xyXG4gICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBIaXRJdGVtLk1pZDpcclxuICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuY3Vyc29yID0gJ21vdmUnXHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBIaXRJdGVtLkJvdGg6XHJcbiAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0J1xyXG4gICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBtaW5EZWx0YSA9IDAuMDE7XHJcbiAgICAgIGhhbmRsZXIub25EcmFnID0gKHBvczogVmVjMiwgZGVsdGE6IFZlYzIpID0+IHtcclxuICAgICAgICAgc3dpdGNoIChoaXQuaXRlbSkge1xyXG4gICAgICAgICAgICBjYXNlIEhpdEl0ZW0uQmxhY2s6XHJcbiAgICAgICAgICAgICAgIHRoaXMuYmxhY2sgPSBjbGFtcCgocG9zLnggKyBoaXQub2Zmc2V0WCkgLyB0aGlzLmNhbnZhcy53aWR0aCwgMCwgMSAtIG1pbkRlbHRhKTtcclxuICAgICAgICAgICAgICAgdGhpcy53aGl0ZSA9IE1hdGgubWF4KHRoaXMud2hpdGUsIHRoaXMuYmxhY2sgKyBtaW5EZWx0YSk7XHJcbiAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICAgICAgICBpZiAodGhpcy5vbkNoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgSGl0SXRlbS5XaGl0ZTpcclxuICAgICAgICAgICAgICAgdGhpcy53aGl0ZSA9IGNsYW1wKChwb3MueCArIGhpdC5vZmZzZXRYKSAvIHRoaXMuY2FudmFzLndpZHRoLCBtaW5EZWx0YSwgMSk7XHJcbiAgICAgICAgICAgICAgIHRoaXMuYmxhY2sgPSBNYXRoLm1pbih0aGlzLmJsYWNrLCB0aGlzLndoaXRlIC0gbWluRGVsdGEpO1xyXG4gICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgaWYgKHRoaXMub25DaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5vbkNoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEhpdEl0ZW0uTWlkOlxyXG4gICAgICAgICAgICAgICBsZXQgcHRzID0gdGhpcy5jb21wdXRlUG9pbnRzKCk7XHJcbiAgICAgICAgICAgICAgIHRoaXMubWlkUG9pbnQgPSBjbGFtcCgocG9zLnggKyBoaXQub2Zmc2V0WCAtIHB0cy5ibGFjay54KSAvIChwdHMud2hpdGUueCAtIHB0cy5ibGFjay54KSwgMCwgMSk7XHJcbiAgICAgICAgICAgICAgIHRoaXMubWlkVmFsdWUgPSBjbGFtcCgxIC0gKHBvcy55ICsgaGl0Lm9mZnNldFkpIC8gdGhpcy5jYW52YXMuaGVpZ2h0LCAwLCAxKTtcclxuICAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgIGlmICh0aGlzLm9uQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMub25DaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgSGl0SXRlbS5Cb3RoOlxyXG4gICAgICAgICAgICAgICBsZXQgZGVsdGEgPSB0aGlzLndoaXRlIC0gdGhpcy5ibGFjaztcclxuICAgICAgICAgICAgICAgdGhpcy5ibGFjayA9IGNsYW1wKChwb3MueCArIGhpdC5vZmZzZXRYKSAvIHRoaXMuY2FudmFzLndpZHRoLCAwLCAxIC0gZGVsdGEpO1xyXG4gICAgICAgICAgICAgICB0aGlzLndoaXRlID0gdGhpcy5ibGFjayArIGRlbHRhO1xyXG4gICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgaWYgKHRoaXMub25DaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5vbkNoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBlbSA9IGdldEVtUGl4ZWxzKCk7XHJcbiAgICAgIHRoaXMucmFkaXVzID0gMC44ICogZW07XHJcbiAgICAgIHRoaXMubWFyZ2luID0gMC45ICogZW07XHJcbiAgICAgIHRoaXMubGluZVdpZHRoID0gMC4xICogZW07XHJcblxyXG4gICAgICB0aGlzLmRyYXcoKTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBnZXRIaXQocG9zOiBWZWMyKTogSGl0IHtcclxuICAgICAgbGV0IGhpdCA9IG5ldyBIaXQoKTtcclxuICAgICAgbGV0IGVwc2lsb24gPSAzLjAgKiB0aGlzLnJhZGl1cztcclxuICAgICAgbGV0IHB0cyA9IHRoaXMuY29tcHV0ZVBvaW50cygpO1xyXG4gICAgICBpZiAocG9zLmRpc3RhbmNlKHB0cy5taWQpIDwgZXBzaWxvbikge1xyXG4gICAgICAgICBoaXQuaXRlbSA9IEhpdEl0ZW0uTWlkO1xyXG4gICAgICAgICBoaXQub2Zmc2V0WCA9IHB0cy5taWQueCAtIHBvcy54O1xyXG4gICAgICAgICBoaXQub2Zmc2V0WSA9IHB0cy5taWQueSAtIHBvcy55O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKHBvcy5kaXN0YW5jZShwdHMuYmxhY2spIDwgZXBzaWxvbikge1xyXG4gICAgICAgICBoaXQuaXRlbSA9IEhpdEl0ZW0uQmxhY2s7XHJcbiAgICAgICAgIGhpdC5vZmZzZXRYID0gcHRzLmJsYWNrLnggLSBwb3MueDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChwb3MuZGlzdGFuY2UocHRzLndoaXRlKSA8IGVwc2lsb24pIHtcclxuICAgICAgICAgaGl0Lml0ZW0gPSBIaXRJdGVtLldoaXRlO1xyXG4gICAgICAgICBoaXQub2Zmc2V0WCA9IHB0cy53aGl0ZS54IC0gcG9zLng7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIGhpdC5pdGVtID0gSGl0SXRlbS5Cb3RoO1xyXG4gICAgICAgICBoaXQub2Zmc2V0WCA9IHB0cy5ibGFjay54IC0gcG9zLng7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGhpdDtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBkcmF3KCk6IHZvaWQge1xyXG5cclxuICAgICAgLy8gd29yayBhcm91bmQgZm9yIHRoZSBjYW52YXMgbm90IGJlaW5nIGluaXRpYWxpemVkIHlldCB3aGVuIGNhbGxpbmdcclxuICAgICAgLy8gdGhpcyBmdW5jdGlvbiBmcm9tIHRoZSBjb25zdHJ1Y3Rvci4gSXNuJ3QgdGhlcmUgYW4gZXZlbnQgZm9yIHRoaXM/XHJcbiAgICAgIGlmICh0aGlzLmNhbnZhcy5jbGllbnRXaWR0aCA9PT0gMCkge1xyXG4gICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgIH0sIDEwKTtcclxuICAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBzeW5jIHNpemVzXHJcbiAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5jYW52YXMuY2xpZW50V2lkdGg7XHJcbiAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuY2FudmFzLmNsaWVudEhlaWdodDtcclxuXHJcbiAgICAgIC8vIHNob3J0LWhhbmQgdmFyIG5hbWVzXHJcbiAgICAgIGxldCB3aWR0aCA9IHRoaXMuY2FudmFzLndpZHRoIC0gMiAqIHRoaXMubWFyZ2luO1xyXG4gICAgICBsZXQgaGVpZ2h0ID0gdGhpcy5jYW52YXMuaGVpZ2h0IC0gMiAqIHRoaXMubWFyZ2luO1xyXG4gICAgICBsZXQgcHRzID0gdGhpcy5jb21wdXRlUG9pbnRzKCk7XHJcblxyXG4gICAgICBsZXQgY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgICAgIC8vIGRyYXcgdGhlIGJhY2tncm91bmRcclxuICAgICAgbGV0IGdyZCA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCh0aGlzLm1hcmdpbiwgMCwgdGhpcy5tYXJnaW4gKyB3aWR0aCwgMCk7XHJcbiAgICAgIGdyZC5hZGRDb2xvclN0b3AoMCwgJ2JsYWNrJyk7XHJcbiAgICAgIGdyZC5hZGRDb2xvclN0b3AodGhpcy5ibGFjaywgJ2JsYWNrJyk7XHJcbiAgICAgIGxldCBwb3MgPSB0aGlzLmJsYWNrICsgdGhpcy5taWRQb2ludCAqICh0aGlzLndoaXRlIC0gdGhpcy5ibGFjayk7XHJcbiAgICAgIGxldCByZ2IgPSBNYXRoLnJvdW5kKDI1NSAqIHRoaXMubWlkVmFsdWUpO1xyXG4gICAgICBncmQuYWRkQ29sb3JTdG9wKHBvcywgJ3JnYignICsgcmdiICsgJywnICsgcmdiICsgJywnICsgcmdiICsgJyknKTtcclxuICAgICAgZ3JkLmFkZENvbG9yU3RvcCh0aGlzLndoaXRlLCAnd2hpdGUnKTtcclxuICAgICAgZ3JkLmFkZENvbG9yU3RvcCgxLCAnd2hpdGUnKTtcclxuXHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBncmQ7XHJcbiAgICAgIGN0eC5maWxsUmVjdCh0aGlzLm1hcmdpbiwgdGhpcy5tYXJnaW4sIHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgLy8gZHJhdyBsaW5lc1xyXG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnbGlnaHRncmVlbic7XHJcbiAgICAgIGN0eC5saW5lV2lkdGggPSAyICogdGhpcy5saW5lV2lkdGg7XHJcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgY3R4Lm1vdmVUbyh0aGlzLm1hcmdpbiArIHRoaXMuYmxhY2sgKiB3aWR0aCwgdGhpcy5tYXJnaW4gKyBoZWlnaHQpO1xyXG4gICAgICBjdHgubGluZVRvKHB0cy5taWQueCwgcHRzLm1pZC55KTtcclxuICAgICAgY3R4LmxpbmVUbyh0aGlzLm1hcmdpbiArIHRoaXMud2hpdGUgKiB3aWR0aCwgdGhpcy5tYXJnaW4pO1xyXG4gICAgICBjdHguc3Ryb2tlKCk7XHJcblxyXG4gICAgICAvLyBoYW5kbGVzXHJcbiAgICAgIEdVSS5kcmF3SGFuZGxlKGN0eCwgcHRzLmJsYWNrLngsIHB0cy5ibGFjay55LCB0aGlzLnJhZGl1cyk7XHJcbiAgICAgIEdVSS5kcmF3SGFuZGxlKGN0eCwgcHRzLndoaXRlLngsIHB0cy53aGl0ZS55LCB0aGlzLnJhZGl1cyk7XHJcbiAgICAgIEdVSS5kcmF3SGFuZGxlKGN0eCwgcHRzLm1pZC54LCBwdHMubWlkLnksIHRoaXMucmFkaXVzKTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBjb21wdXRlUG9pbnRzKCk6IElQb2ludHMge1xyXG4gICAgICAvLyBzaG9ydC1oYW5kIHZhciBuYW1lc1xyXG4gICAgICBsZXQgbSA9IHRoaXMubWFyZ2luO1xyXG4gICAgICBsZXQgd2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aCAtIDIgKiBtO1xyXG4gICAgICBsZXQgaGVpZ2h0ID0gdGhpcy5jYW52YXMuaGVpZ2h0IC0gMiAqIG07XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgICBibGFjazogbmV3IFZlYzIoW20gKyB0aGlzLmJsYWNrICogd2lkdGgsIG0gKyBoZWlnaHRdKSxcclxuICAgICAgICAgd2hpdGU6IG5ldyBWZWMyKFttICsgdGhpcy53aGl0ZSAqIHdpZHRoLCBtXSksXHJcbiAgICAgICAgIG1pZDogbmV3IFZlYzIoW20gKyAodGhpcy5ibGFjayArIHRoaXMubWlkUG9pbnQgKiAodGhpcy53aGl0ZSAtIHRoaXMuYmxhY2spKSAqIHdpZHRoLCBtICsgKDEgLSB0aGlzLm1pZFZhbHVlKSAqIGhlaWdodF0pLFxyXG4gICAgICB9XHJcbiAgIH1cclxufSIsImltcG9ydCB7IENvdW50ZG93blRpbWVyIH0gZnJvbSAnLi4vLi4vVXRpbC9Db3VudGRvd25UaW1lcic7XHJcbmltcG9ydCB7IElUaW1lckluZm8gfSBmcm9tICcuL0lUaW1lckluZm8nO1xyXG5pbXBvcnQgeyBTcXVpbnQgfSBmcm9tICcuL1NxdWludCc7XHJcbmltcG9ydCB7IGRlYnVnIH0gZnJvbSAnLi9TcXVpbnRBcHAnO1xyXG5pbXBvcnQgeyBTcXVpbnRFdmVudCB9IGZyb20gJy4vU3F1aW50RXZlbnRzJztcclxuXHJcbmV4cG9ydCBlbnVtIFRpbWVNcyB7XHJcbiAgIFNlYyA9IDEwMDAsXHJcbiAgIE1pbiA9IDYwICogU2VjLFxyXG4gICBTdGRQb3NlID0gMjAgKiBNaW4sXHJcbiAgIFN0ZEJyZWFrID0gNyAqIE1pbixcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgT25UaWNrSGFuZGxlciA9IChpbmZvOiBJVGltZXJJbmZvKSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBPbkFsYXJtSGFuZGxlciA9IChzb3VuZDogYm9vbGVhbikgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgT25BbGFybVRpbWVvdXRIYW5kbGVyID0gKCkgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCBjbGFzcyBNb2RlbFRpbWVyIHtcclxuICAgcHJpdmF0ZSBzcXVpbnQ6IFNxdWludDtcclxuICAgcHJpdmF0ZSBjb3VudGRvd25UaW1lciA9IG5ldyBDb3VudGRvd25UaW1lcigpO1xyXG5cclxuICAgcHVibGljIGFsYXJtRHVyYXRpb25NcyA9IDEwICogVGltZU1zLlNlYztcclxuXHJcbiAgIHByaXZhdGUgYWxhcm1UaW1lb3V0SGFuZGxlID0gTmFOO1xyXG5cclxuICAgcHVibGljIG9uVGljazogT25UaWNrSGFuZGxlciA9IG51bGw7XHJcbiAgIHB1YmxpYyBvbkFsYXJtOiBPbkFsYXJtSGFuZGxlciA9IG51bGw7XHJcbiAgIHB1YmxpYyBvbkFsYXJtVGltZW91dDogT25BbGFybVRpbWVvdXRIYW5kbGVyID0gbnVsbDtcclxuXHJcblxyXG4gICBwdWJsaWMgZ2V0IHJ1bm5pbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNvdW50ZG93blRpbWVyLnJ1bm5pbmc7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgZHVyYXRpb25NcygpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5jb3VudGRvd25UaW1lci5kdXJhdGlvbk1zO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc2V0IGR1cmF0aW9uTXModmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLmNvdW50ZG93blRpbWVyLmR1cmF0aW9uTXMgPSB2YWx1ZTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmFsYXJtU291bmRpbmcpIHtcclxuICAgICAgICAgdGhpcy5kb1N0b3BBbGFybShmYWxzZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMudGljaygpO1xyXG4gICAgICB0aGlzLnN5bmNocm9uaXplVG9TZXJ2ZXIoKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCByZW1haW5pbmdNcygpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5jb3VudGRvd25UaW1lci5yZW1haW5pbmdNcztcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCB0aW1lUmVtYWluaW5nU3RyKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNvdW50ZG93blRpbWVyLnRpbWVSZW1haW5pbmdTdHI7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgYWxhcm1Tb3VuZGluZygpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuICFpc05hTih0aGlzLmFsYXJtVGltZW91dEhhbmRsZSk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgaW5mbygpOiBJVGltZXJJbmZvIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgcnVubmluZzogdGhpcy5jb3VudGRvd25UaW1lci5ydW5uaW5nLFxyXG4gICAgICAgICBkdXJhdGlvbk1zOiB0aGlzLmNvdW50ZG93blRpbWVyLmR1cmF0aW9uTXMsXHJcbiAgICAgICAgIHJlbWFpbmluZ01zOiB0aGlzLmNvdW50ZG93blRpbWVyLnJlbWFpbmluZ01zLFxyXG4gICAgICAgICBhbGFybVNvdW5kaW5nOiB0aGlzLmFsYXJtU291bmRpbmcsXHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKHNxdWludD86IFNxdWludCkge1xyXG4gICAgICB0aGlzLnNxdWludCA9IHNxdWludDtcclxuICAgICAgdGhpcy5jb3VudGRvd25UaW1lci5kdXJhdGlvbk1zID0gVGltZU1zLlN0ZFBvc2U7XHJcblxyXG4gICAgICB0aGlzLmNvdW50ZG93blRpbWVyLm9uVGljayA9ICgpID0+IHtcclxuICAgICAgICAgaWYgKHRoaXMuY291bnRkb3duVGltZXIuZXhwaXJlZCAmJiAhdGhpcy5hbGFybVNvdW5kaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRBbGFybSgpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICB0aGlzLnRpY2soKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuc3F1aW50KSB7XHJcbiAgICAgICAgIHNxdWludC5vbih7XHJcbiAgICAgICAgICAgIGV2ZW50OiBTcXVpbnRFdmVudC5TeW5jaHJvbml6ZVRpbWVyLFxyXG4gICAgICAgICAgICBoYW5kbGVyOiAoaW5mbzogSVRpbWVySW5mbykgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgdGhpcy5jb3VudGRvd25UaW1lci5zeW5jaHJvbml6ZShpbmZvLnJ1bm5pbmcsIGluZm8uZHVyYXRpb25NcywgaW5mby5yZW1haW5pbmdNcyk7XHJcblxyXG4gICAgICAgICAgICAgICBpZiAoaW5mby5hbGFybVNvdW5kaW5nICE9PSB0aGlzLmFsYXJtU291bmRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKGluZm8uYWxhcm1Tb3VuZGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0QWxhcm0oKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb1N0b3BBbGFybShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgdGhpcy50aWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICBzcXVpbnQub24oe1xyXG4gICAgICAgICAgICBldmVudDogU3F1aW50RXZlbnQuQ2xvc2UsXHJcbiAgICAgICAgICAgIGhhbmRsZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgdGhpcy5kb1Jlc2V0KGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHN5bmNocm9uaXplVG9TZXJ2ZXIoKTogdm9pZCB7XHJcbiAgICAgIGlmICh0aGlzLnNxdWludCkge1xyXG4gICAgICAgICB0aGlzLnNxdWludC5zeW5jaHJvbml6ZVRpbWVyKHRoaXMuaW5mbyk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIHN5bmNocm9uaXplRnJvbVNlcnZlcigpOiB2b2lkIHtcclxuICAgICAgaWYgKHRoaXMuc3F1aW50KSB7XHJcbiAgICAgICAgIHRoaXMuc3F1aW50LnN5bmNocm9uaXplVGltZXIoKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHRpY2soKTogdm9pZCB7XHJcbiAgICAgIGlmICh0aGlzLm9uVGljaykge1xyXG4gICAgICAgICB0aGlzLm9uVGljayh0aGlzLmluZm8pO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzdGFydCgpOiB2b2lkIHtcclxuICAgICAgaWYgKHRoaXMuY291bnRkb3duVGltZXIucnVubmluZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgdGhpcy5jb3VudGRvd25UaW1lci5zdGFydCgpO1xyXG5cclxuICAgICAgICAgaWYgKHRoaXMuY291bnRkb3duVGltZXIuZXhwaXJlZCAmJiAhdGhpcy5hbGFybVNvdW5kaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRBbGFybSgpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICB0aGlzLnN5bmNocm9uaXplVG9TZXJ2ZXIoKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGRvU3RvcChzeW5jOiBib29sZWFuKSB7XHJcbiAgICAgIGlmICh0aGlzLmNvdW50ZG93blRpbWVyLnJ1bm5pbmcpIHtcclxuICAgICAgICAgdGhpcy5jb3VudGRvd25UaW1lci5zdG9wKCk7XHJcblxyXG4gICAgICAgICB0aGlzLnRpY2soKTtcclxuXHJcbiAgICAgICAgIGlmIChzeW5jKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3luY2hyb25pemVUb1NlcnZlcigpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIHN0b3AoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZG9TdG9wKHRydWUpO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHJlc2V0Q291bnRkb3duVGltZXIoKSB7XHJcbiAgICAgIHRoaXMuY291bnRkb3duVGltZXIucmVzZXQoKTtcclxuICAgICAgaWYgKHRoaXMuY291bnRkb3duVGltZXIuZHVyYXRpb25NcyA9PT0gVGltZU1zLlN0ZEJyZWFrKSB7XHJcbiAgICAgICAgIC8vIHByZXBhcmUgZm9yIG5leHQgcG9zZTtcclxuICAgICAgICAgdGhpcy5jb3VudGRvd25UaW1lci5kdXJhdGlvbk1zID0gVGltZU1zLlN0ZFBvc2U7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIC8vIHByZXBhcmUgZm9yIHRoZSBicmVha1xyXG4gICAgICAgICB0aGlzLmNvdW50ZG93blRpbWVyLmR1cmF0aW9uTXMgPSBUaW1lTXMuU3RkQnJlYWs7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBkb1Jlc2V0KHN5bmM6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgaWYgKHRoaXMuYWxhcm1Tb3VuZGluZykge1xyXG4gICAgICAgICB0aGlzLmRvU3RvcEFsYXJtKGZhbHNlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5yZXNldENvdW50ZG93blRpbWVyKCk7XHJcblxyXG4gICAgICB0aGlzLnRpY2soKTtcclxuXHJcbiAgICAgIGlmIChzeW5jKSB7XHJcbiAgICAgICAgIHRoaXMuc3luY2hyb25pemVUb1NlcnZlcigpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5kb1Jlc2V0KHRydWUpO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHN0YXJ0QWxhcm0oKTogdm9pZCB7XHJcbiAgICAgIGlmICh0aGlzLmFsYXJtU291bmRpbmcpIHtcclxuICAgICAgICAgZGVidWcoJ1N0YXJ0aW5nIGFsYXJtIGJ1dCBpdCBpcyBhbHJlYWR5IHNvdW5kaW5nJyk7XHJcbiAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5hbGFybVRpbWVvdXRIYW5kbGUgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgIC8vIGlmIHdlIHRpbWUgb3V0LCB3ZSBqdXN0IHN0b3AgcGxheWluZyB0aGUgc291bmQuIFdlIGRvbid0IHN5bmNocm9uaXplIHdpdGggdGhlIHNlcnZlclxyXG4gICAgICAgICB0aGlzLnJlc2V0Q291bnRkb3duVGltZXIoKTtcclxuICAgICAgICAgdGhpcy5hbGFybVRpbWVvdXRIYW5kbGUgPSBOYU47XHJcbiAgICAgICAgIGlmICh0aGlzLm9uQWxhcm0pIHtcclxuICAgICAgICAgICAgdGhpcy5vbkFsYXJtKGZhbHNlKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgaWYgKHRoaXMub25BbGFybVRpbWVvdXQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkFsYXJtVGltZW91dCgpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICB9LCB0aGlzLmFsYXJtRHVyYXRpb25Ncyk7XHJcblxyXG4gICAgICAvLyBkbyB0aGlzIGFmdGVyIHNldHRpbmcgYSB2YWx1ZSBmb3IgYWxhcm1UaW1lb3V0SGFuZGxlIHNvIHRoYXQgYWxhcm1Tb3VuZGluZyA9IHRydWVcclxuICAgICAgaWYgKHRoaXMub25BbGFybSkge1xyXG4gICAgICAgICB0aGlzLm9uQWxhcm0odHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBkb1N0b3BBbGFybShzeW5jOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgIGlmICh0aGlzLmFsYXJtU291bmRpbmcpIHtcclxuICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmFsYXJtVGltZW91dEhhbmRsZSk7XHJcbiAgICAgICAgIHRoaXMuYWxhcm1UaW1lb3V0SGFuZGxlID0gTmFOO1xyXG5cclxuICAgICAgICAgaWYgKHRoaXMub25BbGFybSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQWxhcm0oZmFsc2UpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBpZiAoc3luYyAmJiB0aGlzLnNxdWludC5jb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zeW5jaHJvbml6ZVRvU2VydmVyKCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc3RvcEFsYXJtKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLmRvU3RvcEFsYXJtKHRydWUpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgYWRkT25lKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLmNvdW50ZG93blRpbWVyLmFkZE9uZSgpO1xyXG4gICAgICB0aGlzLnN5bmNocm9uaXplVG9TZXJ2ZXIoKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHN1YnRyYWN0T25lKCk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy5jb3VudGRvd25UaW1lci5kdXJhdGlvbk1zID4gMSAqIFRpbWVNcy5NaW4pIHtcclxuICAgICAgICAgdGhpcy5jb3VudGRvd25UaW1lci5zdWJ0cmFjdE9uZSgpO1xyXG4gICAgICAgICB0aGlzLnN5bmNocm9uaXplVG9TZXJ2ZXIoKTtcclxuICAgICAgfVxyXG4gICB9XHJcbn0iLCJpbXBvcnQgJ3dlYnJ0Yy1hZGFwdGVyJztcclxuaW1wb3J0IHsgSUFwcCB9IGZyb20gJy4uLy4uL0lBcHAnO1xyXG5pbXBvcnQgeyBNZW51YmFyIH0gZnJvbSAnLi4vLi4vR1VJL01lbnUnO1xyXG5pbXBvcnQgeyBWZXJzaW9uIH0gZnJvbSAnLi9WZXJzaW9uJztcclxuaW1wb3J0IHsgTW9kZWxUaW1lciB9IGZyb20gJy4vTW9kZWxUaW1lcic7XHJcbmltcG9ydCB7IE1vZGVsVGltZXJQYW5lbCB9IGZyb20gJy4vTW9kZWxUaW1lclBhbmVsJztcclxuaW1wb3J0IHsgU291bmRzLCBTcG9va3lTb3VuZHMgfSBmcm9tICcuL1NvdW5kcyc7XHJcbmltcG9ydCB7IGlzTW9iaWxlIH0gZnJvbSAnLi4vLi4vVXRpbC9HbG9iYWxzJztcclxuaW1wb3J0IHsgR1VJIH0gZnJvbSAnLi4vLi4vR1VJL0dVSSc7XHJcbmltcG9ydCBOb1NsZWVwIGZyb20gJ25vc2xlZXAuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1vZGVsVGltZXJBcHAgaW1wbGVtZW50cyBJQXBwIHtcclxuXHJcbiAgIHByaXZhdGUgbm9TbGVlcCA9IG5ldyBOb1NsZWVwKCk7XHJcblxyXG4gICBwcml2YXRlIHRpbWVyUGFuZWw6IE1vZGVsVGltZXJQYW5lbDtcclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgZG9jdW1lbnQudGl0bGUgKz0gKCcgJyArIFZlcnNpb24uQnVpbGQpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY3JlYXRlKGRpdjogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcclxuXHJcbiAgICAgIGRpdi5pZCA9ICdNb2RlbFRpbWVyQXBwJztcclxuXHJcbiAgICAgIGxldCBib2R5RGl2ID0gR1VJLmNyZWF0ZSgnZGl2JywgJ0JvZHlEaXYnLCBkaXYpO1xyXG5cclxuICAgICAgbGV0IHRpbWVyID0gbmV3IE1vZGVsVGltZXIoKTtcclxuICAgICAgdGhpcy50aW1lclBhbmVsID0gbmV3IE1vZGVsVGltZXJQYW5lbCh0aW1lciwgYm9keURpdilcclxuICAgICAgdGhpcy50aW1lclBhbmVsLmdvRnVsbFNjcmVlbk9uU3RhcnQgPSBpc01vYmlsZTtcclxuICAgICAgdGhpcy50aW1lclBhbmVsLmF1dG9TdGFydCA9IHRydWU7XHJcblxyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgICB0aGlzLnRpbWVyUGFuZWwuZHJhdygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKCkgPT4ge1xyXG4gICAgICAgICB0aGlzLm5vU2xlZXAuZW5hYmxlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoKSA9PiB7XHJcbiAgICAgICAgIHRoaXMubm9TbGVlcC5lbmFibGUoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLnRpbWVyUGFuZWwuZHJhdygpO1xyXG5cclxuICAgfVxyXG5cclxuICAgcHVibGljIGJ1aWxkTWVudShtZW51YmFyOiBNZW51YmFyKTogdm9pZCB7XHJcblxyXG4gICAgICBjb25zdCBzb3VuZE1lbnUgPSBtZW51YmFyLmFkZFN1Yk1lbnUoJ1NvdW5kcycpO1xyXG4gICAgICBmb3IgKGxldCBzb3VuZFN0ciBpbiBTb3VuZHMpIHtcclxuICAgICAgICAgY29uc3Qgc291bmQ6IFNvdW5kcyA9IFNvdW5kc1tzb3VuZFN0ciBhcyBrZXlvZiB0eXBlb2YgU291bmRzXTtcclxuICAgICAgICAgc291bmRNZW51LmFkZFJhZGlvYnV0dG9uKHtcclxuICAgICAgICAgICAgbGFiZWw6IHNvdW5kU3RyLnJlcGxhY2UoJ18nLCAnICcpLFxyXG4gICAgICAgICAgICBncm91cDogJ1NvdW5kcycsXHJcbiAgICAgICAgICAgIGNoZWNrZWQ6IHRoaXMudGltZXJQYW5lbC5zb3VuZCA9PT0gc291bmQsXHJcbiAgICAgICAgICAgIG9uY2hlY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgdGhpcy50aW1lclBhbmVsLnNvdW5kID0gc291bmQ7XHJcbiAgICAgICAgICAgICAgIHRoaXMudGltZXJQYW5lbC50ZXN0U291bmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgc3Bvb2t5U291bmRzTWVudSA9IHNvdW5kTWVudS5hZGRTdWJNZW51KCdTcG9va3knKTtcclxuICAgICAgZm9yIChsZXQgc291bmRTdHIgaW4gU3Bvb2t5U291bmRzKSB7XHJcbiAgICAgICAgIGNvbnN0IHNvdW5kOiBTcG9va3lTb3VuZHMgPSBTcG9va3lTb3VuZHNbc291bmRTdHIgYXMga2V5b2YgdHlwZW9mIFNwb29reVNvdW5kc107XHJcbiAgICAgICAgIHNwb29reVNvdW5kc01lbnUuYWRkUmFkaW9idXR0b24oe1xyXG4gICAgICAgICAgICBsYWJlbDogc291bmRTdHIucmVwbGFjZSgnXycsICcgJyksXHJcbiAgICAgICAgICAgIGdyb3VwOiAnU291bmRzJyxcclxuICAgICAgICAgICAgY2hlY2tlZDogdGhpcy50aW1lclBhbmVsLnNvdW5kID09PSBzb3VuZCxcclxuICAgICAgICAgICAgb25jaGVjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICB0aGlzLnRpbWVyUGFuZWwuc291bmQgPSBzb3VuZDtcclxuICAgICAgICAgICAgICAgdGhpcy50aW1lclBhbmVsLnRlc3RTb3VuZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKlxyXG4gICAgICBjb25zdCBwb3Nlc01lbnUgPSBtZW51YmFyLmFkZFN1Yk1lbnUoJ1Bvc2VzJyk7XHJcbiAgICAgIHBvc2VzTWVudS5hZGRSYWRpb2J1dHRvbih7XHJcbiAgICAgICAgIGxhYmVsOiAnMjAgTWluIChkZWZhdWx0KScsXHJcbiAgICAgICAgIGdyb3VwOiAnUG9zZXMnLFxyXG4gICAgICAgICBjaGVja2VkOiB0cnVlLFxyXG4gICAgICAgICBvbmNoZWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJQYW5lbC5wb3NlcyA9IFtdO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBwb3Nlc01lbnUuYWRkUmFkaW9idXR0b24oe1xyXG4gICAgICAgICBsYWJlbDogJzEwLCAxMCcsXHJcbiAgICAgICAgIGdyb3VwOiAnUG9zZXMnLFxyXG4gICAgICAgICBjaGVja2VkOiBmYWxzZSxcclxuICAgICAgICAgb25jaGVjazogKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyUGFuZWwucG9zZXMgPSBbMTAsIDEwXTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgcG9zZXNNZW51LmFkZFJhZGlvYnV0dG9uKHtcclxuICAgICAgICAgbGFiZWw6ICc1LCA1LCAxMCcsXHJcbiAgICAgICAgIGdyb3VwOiAnUG9zZXMnLFxyXG4gICAgICAgICBjaGVja2VkOiBmYWxzZSxcclxuICAgICAgICAgb25jaGVjazogKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyUGFuZWwucG9zZXMgPSBbNSwgNSwgMTBdO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBwb3Nlc01lbnUuYWRkUmFkaW9idXR0b24oe1xyXG4gICAgICAgICBsYWJlbDogJzUsIDUsIDUsIDUnLFxyXG4gICAgICAgICBncm91cDogJ1Bvc2VzJyxcclxuICAgICAgICAgY2hlY2tlZDogZmFsc2UsXHJcbiAgICAgICAgIG9uY2hlY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50aW1lclBhbmVsLnBvc2VzID0gWzUsIDUsIDUsIDVdO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBwb3Nlc01lbnUuYWRkUmFkaW9idXR0b24oe1xyXG4gICAgICAgICBsYWJlbDogJzEwIHggMicsXHJcbiAgICAgICAgIGdyb3VwOiAnUG9zZXMnLFxyXG4gICAgICAgICBjaGVja2VkOiBmYWxzZSxcclxuICAgICAgICAgb25jaGVjazogKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyUGFuZWwucG9zZXMgPSBbMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMiwgMl07XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHBvc2VzTWVudS5hZGRSYWRpb2J1dHRvbih7XHJcbiAgICAgICAgIGxhYmVsOiAnMjAgeCAxJyxcclxuICAgICAgICAgZ3JvdXA6ICdQb3NlcycsXHJcbiAgICAgICAgIGNoZWNrZWQ6IGZhbHNlLFxyXG4gICAgICAgICBvbmNoZWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJQYW5lbC5wb3NlcyA9IFsxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxXTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgKi9cclxuICAgfVxyXG59XHJcbiIsImltcG9ydCBzY3JlZW5mdWxsIGZyb20gJ3NjcmVlbmZ1bGwnO1xyXG5pbXBvcnQgeyBHVUkgfSBmcm9tICcuLi8uLi9HVUkvR1VJJztcclxuaW1wb3J0IHsgUG9pbnRlckV2ZW50SGFuZGxlciB9IGZyb20gJy4uLy4uL0dVSS9Qb2ludGVyRXZlbnRIYW5kbGVyJztcclxuaW1wb3J0IHsgQ291bnRkb3duVGltZXIgfSBmcm9tICcuLi8uLi9VdGlsL0NvdW50ZG93blRpbWVyJztcclxuaW1wb3J0IHsgYmFzZVVybCwgZ2V0RW1QaXhlbHMsIGdldFRpbWVTdHIsIGlzTW9iaWxlIH0gZnJvbSAnLi4vLi4vVXRpbC9HbG9iYWxzJztcclxuaW1wb3J0IHsgVmVjMiB9IGZyb20gJy4uLy4uL1V0aWwzRC9WZWMnO1xyXG5pbXBvcnQgeyBJVGltZXJJbmZvIH0gZnJvbSAnLi9JVGltZXJJbmZvJztcclxuaW1wb3J0IHsgTW9kZWxUaW1lciwgVGltZU1zIH0gZnJvbSAnLi9Nb2RlbFRpbWVyJztcclxuaW1wb3J0IHsgUmVjdCB9IGZyb20gJy4vUmVjdCc7XHJcbmltcG9ydCB7IFNvdW5kcyB9IGZyb20gJy4vU291bmRzJztcclxuaW1wb3J0IHsgU3RvcmFnZUl0ZW0sIFN0b3JhZ2VXaXRoRXZlbnRzIH0gZnJvbSAnLi9TdG9yYWdlV2l0aEV2ZW50cyc7XHJcblxyXG5lbnVtIEhpdEFyZWEge1xyXG4gICBUaW1lclRleHQsXHJcbiAgIFN0YXJ0U3RvcCxcclxuICAgQXV0b1N0YXJ0Q2FuY2VsLFxyXG4gICBOb25lLFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTW9kZWxUaW1lclBhbmVsIHtcclxuICAgcHJpdmF0ZSBtb2RlbFRpbWVyOiBNb2RlbFRpbWVyO1xyXG4gICBwcml2YXRlIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgIHByaXZhdGUgYWxhcm06IEhUTUxBdWRpb0VsZW1lbnQgPSBudWxsO1xyXG4gICBwcml2YXRlIGFsZXJ0VGltZXJTdGFydGVkOiBIVE1MQXVkaW9FbGVtZW50ID0gbnVsbDtcclxuICAgcHJpdmF0ZSBhbGVydDEwTWluc1JlbWFpbmluZzogSFRNTEF1ZGlvRWxlbWVudCA9IG51bGw7XHJcbiAgIHByaXZhdGUgYWxlcnQxTWluUmVtYWluaW5nOiBIVE1MQXVkaW9FbGVtZW50ID0gbnVsbDtcclxuICAgcHJpdmF0ZSB0aW1lclRleHRCb3g6IFJlY3Q7XHJcbiAgIHByaXZhdGUgY2FuY2VsQm94OiBSZWN0O1xyXG4gICBwcml2YXRlIHN0b3JhZ2UgPSBuZXcgU3RvcmFnZVdpdGhFdmVudHNcclxuICAgcHJpdmF0ZSBzb3VuZEZpbGU6IHN0cmluZyA9IFNvdW5kcy5DaGltZTtcclxuICAgcHJpdmF0ZSBhdXRvU3RhcnRUaW1lcjogQ291bnRkb3duVGltZXIgPSBudWxsO1xyXG4gICBwcml2YXRlIGFsZXJ0MTBNaW5zU291bmRlZCA9IGZhbHNlO1xyXG4gICBwcml2YXRlIGFsZXJ0MU1pblNvdW5kZWQgPSBmYWxzZTtcclxuXHJcbiAgIHB1YmxpYyBnb0Z1bGxTY3JlZW5PblN0YXJ0ID0gZmFsc2U7XHJcblxyXG4gICBwcml2YXRlIHJlYWRvbmx5IGxlZnRNYXJnaW5SYXRpbyA9IDAuMjU7XHJcbiAgIHByaXZhdGUgZ2V0IGxlZnRNYXJnaW5XaWR0aCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy50aW1lclRleHRCb3guaGVpZ2h0ICogdGhpcy5sZWZ0TWFyZ2luUmF0aW87XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgcmVhZG9ubHkgc3RhcnRTdG9wV2lkdGhSYXRpbyA9IDEuMDtcclxuICAgcHJpdmF0ZSBnZXQgc3RhcnRTdG9wV2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMudGltZXJUZXh0Qm94LmhlaWdodCAqIHRoaXMuc3RhcnRTdG9wV2lkdGhSYXRpbztcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBpbmZvKCk6IElUaW1lckluZm8ge1xyXG4gICAgICByZXR1cm4gdGhpcy5tb2RlbFRpbWVyLmluZm87XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgd2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY2FudmFzLndpZHRoO1xyXG4gICB9XHJcbiAgIHB1YmxpYyBzZXQgd2lkdGgod2lkdGg6IG51bWJlcikge1xyXG4gICAgICB0aGlzLmNhbnZhcy5zdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4J1xyXG4gICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICB0aGlzLmRyYXcoKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBoZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY2FudmFzLmhlaWdodDtcclxuICAgfVxyXG4gICBwdWJsaWMgc2V0IGhlaWdodChoZWlnaHQ6IG51bWJlcikge1xyXG4gICAgICB0aGlzLmNhbnZhcy5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnXHJcbiAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgYXV0b1N0YXJ0KCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5hdXRvU3RhcnRUaW1lciAhPT0gbnVsbDtcclxuICAgfVxyXG4gICBwdWJsaWMgc2V0IGF1dG9TdGFydCh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICBpZiAodmFsdWUgIT09IHRoaXMuYXV0b1N0YXJ0KSB7XHJcbiAgICAgICAgIGlmICh0aGlzLmF1dG9TdGFydFRpbWVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0b1N0YXJ0VGltZXIgPSBudWxsO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmF1dG9TdGFydFRpbWVyID0gbmV3IENvdW50ZG93blRpbWVyKDMwICogMTAwMCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0b1N0YXJ0VGltZXIub25UaWNrID0gKCkgPT4gdGhpcy5vbkNvdW50ZG93blRpY2soKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzZXQgc291bmQoc291bmQ6IHN0cmluZykge1xyXG4gICAgICB0aGlzLnNvdW5kRmlsZSA9IHNvdW5kO1xyXG4gICAgICB0aGlzLnN0b3JhZ2Uuc2V0KFN0b3JhZ2VJdGVtLlNvdW5kLCBzb3VuZCk7XHJcbiAgICAgIGlmICh0aGlzLmFsYXJtKSB7XHJcbiAgICAgICAgIHRoaXMuYWxhcm0uc3JjID0gYmFzZVVybCgpICsgc291bmQ7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBzb3VuZCgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy5zb3VuZEZpbGU7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzZXQgcG9zZXMocG9zZXM6IG51bWJlcltdKSB7XHJcblxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IobW9kZWxUaW1lcjogTW9kZWxUaW1lciwgcGFyZW50OiBIVE1MRWxlbWVudCkge1xyXG5cclxuICAgICAgdGhpcy5tb2RlbFRpbWVyID0gbW9kZWxUaW1lcjtcclxuXHJcbiAgICAgIHRoaXMubW9kZWxUaW1lci5vbkFsYXJtID0gKHNvdW5kOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgIGlmIChzb3VuZCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0U291bmQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmF1dG9TdGFydCkge1xyXG4gICAgICAgICAgICAgICB0aGlzLmF1dG9TdGFydFRpbWVyLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgIHRoaXMuYXV0b1N0YXJ0VGltZXIuc3RhcnQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcFNvdW5kKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8qXHJcbiAgICAgIHRoaXMubW9kZWxUaW1lci5vbkFsYXJtVGltZW91dCA9ICgpID0+IHtcclxuICAgICAgICAgaWYgKHRoaXMuYXV0b1N0YXJ0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0b1N0YXJ0VGltZXIucmVzZXQoKTtcclxuICAgICAgICAgICAgdGhpcy5hdXRvU3RhcnRUaW1lci5zdGFydCgpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgKi9cclxuXHJcbiAgICAgIHRoaXMubW9kZWxUaW1lci5vblRpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgIHRoaXMuZHJhdygpO1xyXG5cclxuICAgICAgICAgLy8gZG9uJ3QgcGxheSBhbGVydHMgZm9yIGJyZWFrc1xyXG4gICAgICAgICBpZiAodGhpcy5tb2RlbFRpbWVyLmR1cmF0aW9uTXMgPj0gMTEgKiA2MCAqIDEwMDApIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZWxUaW1lci5yZW1haW5pbmdNcyA8PSAxMCAqIDYwICogMTAwMCAmJiB0aGlzLmFsZXJ0MTBNaW5zU291bmRlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgdGhpcy5hbGVydDEwTWluc1NvdW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICB0aGlzLnBsYXlTb3VuZCh0aGlzLmFsZXJ0MTBNaW5zUmVtYWluaW5nLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZWxUaW1lci5yZW1haW5pbmdNcyA8PSAxICogNjAgKiAxMDAwICYmIHRoaXMuYWxlcnQxTWluU291bmRlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgdGhpcy5hbGVydDFNaW5Tb3VuZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgdGhpcy5wbGF5U291bmQodGhpcy5hbGVydDFNaW5SZW1haW5pbmcsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuY2FudmFzID0gR1VJLmNyZWF0ZSgnY2FudmFzJywgJ01vZGVsVGltZXJDYW52YXMnLCBwYXJlbnQpO1xyXG5cclxuICAgICAgbGV0IGhhbmRsZXIgPSBuZXcgUG9pbnRlckV2ZW50SGFuZGxlcih0aGlzLmNhbnZhcyk7XHJcblxyXG4gICAgICBoYW5kbGVyLm9uTW92ZSA9IChwb3M6IFZlYzIsIGRlbHRhOiBWZWMyKSA9PiB7XHJcbiAgICAgICAgIHN3aXRjaCAodGhpcy5oaXRUZXN0KHBvcykpIHtcclxuICAgICAgICAgICAgY2FzZSBIaXRBcmVhLlRpbWVyVGV4dDpcclxuICAgICAgICAgICAgICAgaWYgKG1vZGVsVGltZXIucnVubmluZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuY3Vyc29yID0gJ25zLXJlc2l6ZSc7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgSGl0QXJlYS5TdGFydFN0b3A6XHJcbiAgICAgICAgICAgIGNhc2UgSGl0QXJlYS5BdXRvU3RhcnRDYW5jZWw6XHJcbiAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcclxuICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBpZiAobW9kZWxUaW1lci5hbGFybVNvdW5kaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcEFsYXJtKCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IGRyYWdnaW5nID0gZmFsc2U7XHJcbiAgICAgIGhhbmRsZXIub25VcCA9IChwb3M6IFZlYzIpID0+IHtcclxuICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XHJcblxyXG4gICAgICAgICBkcmFnZ2luZyA9IGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgc3RhcnRpbmcgPSBmYWxzZTtcclxuICAgICAgaGFuZGxlci5vbkRvd24gPSAocG9zOiBWZWMyKSA9PiB7XHJcblxyXG4gICAgICAgICB0aGlzLmluaXRBdWRpbygpO1xyXG5cclxuICAgICAgICAgaWYgKHRoaXMubW9kZWxUaW1lci5hbGFybVNvdW5kaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcEFsYXJtKCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5oaXRUZXN0KHBvcykpIHtcclxuICAgICAgICAgICAgICAgY2FzZSBIaXRBcmVhLlN0YXJ0U3RvcDpcclxuICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlbFRpbWVyLnJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbFRpbWVyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbFRpbWVyLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1dG9TdGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmF1dG9TdGFydFRpbWVyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0MTBNaW5zU291bmRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0MU1pblNvdW5kZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5U291bmQodGhpcy5hbGVydFRpbWVyU3RhcnRlZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBkcmFnZ2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgIGNhc2UgSGl0QXJlYS5BdXRvU3RhcnRDYW5jZWw6XHJcbiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1dG9TdGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgICB0aGlzLmF1dG9TdGFydFRpbWVyLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgZHJhZ2dpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAvLyBkb24ndCBhZGp1c3QgdGhlIHRpbWUgaWYgdGhlIHRpbWVyIGlzIHJ1bm5pbmcuIEZvcmNlIHRoZSB1c2VyXHJcbiAgICAgICAgICAgICAgICAgIC8vIHRvIHN0b3AgdGhlIHRpbWVyIGZpcnN0XHJcbiAgICAgICAgICAgICAgICAgIGlmIChtb2RlbFRpbWVyLnJ1bm5pbmcgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaGFuZGxlci5vblVwID0gKHBvczogVmVjMikgPT4ge1xyXG4gICAgICAgICBpZiAoc3RhcnRpbmcpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZ29GdWxsU2NyZWVuT25TdGFydCkge1xyXG4gICAgICAgICAgICAgICAvLyBnbyBmdWxsc2NyZWVuXHJcbiAgICAgICAgICAgICAgIGlmIChzY3JlZW5mdWxsLmlzRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICBzY3JlZW5mdWxsLnJlcXVlc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4geyBjb25zb2xlLmxvZygnQ2Fubm90IGdvIGZ1bGxzY3JlZW46ICcgKyBlcnIpIH0pO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgYWNjdW11bGF0ZWREZWx0YSA9IDA7XHJcbiAgICAgIGxldCBzdGVwID0gZ2V0RW1QaXhlbHMoKSAvIDI7XHJcblxyXG4gICAgICBpZiAoaXNNb2JpbGUpIHtcclxuICAgICAgICAgc3RlcCAqPSAyO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBoYW5kbGVyLm9uRHJhZyA9IChwb3M6IFZlYzIsIGRlbHRhOiBWZWMyKSA9PiB7XHJcbiAgICAgICAgIGlmIChkcmFnZ2luZyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICducy1yZXNpemUnO1xyXG4gICAgICAgICAgICBhY2N1bXVsYXRlZERlbHRhIC09IGRlbHRhLnk7XHJcbiAgICAgICAgICAgIHdoaWxlIChhY2N1bXVsYXRlZERlbHRhID4gc3RlcCkge1xyXG4gICAgICAgICAgICAgICB0aGlzLm1vZGVsVGltZXIuYWRkT25lKCk7XHJcbiAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkRGVsdGEgLT0gc3RlcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAoYWNjdW11bGF0ZWREZWx0YSA8IC1zdGVwKSB7XHJcbiAgICAgICAgICAgICAgIHRoaXMubW9kZWxUaW1lci5zdWJ0cmFjdE9uZSgpO1xyXG4gICAgICAgICAgICAgICBhY2N1bXVsYXRlZERlbHRhICs9IHN0ZXA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmF1dG9TdGFydCkge1xyXG4gICAgICAgICAgICAgICB0aGlzLmF1dG9TdGFydFRpbWVyLnN0b3AoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gZm9yIHRoZSBtb3VzZSB3aGVlbFxyXG4gICAgICBoYW5kbGVyLm9uU2NhbGUgPSAoc2NhbGU6IG51bWJlciwgY2hhbmdlOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgaWYgKGNoYW5nZSA8IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbFRpbWVyLmFkZE9uZSgpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsVGltZXIuc3VidHJhY3RPbmUoKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRPRE86IGNhbiB0aGVzZSBiZSByZW1vdmVkPyBEb3VibGUgY2hlY2sgaWYgdGhlcmUgbmVlZGVkIGZvciBTcXVpbnQgb3Igb24gU2FmYXJpXHJcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKCkgPT4ge1xyXG4gICAgICAgICB0aGlzLnN0b3BBbGFybSgpO1xyXG4gICAgICAgICB0aGlzLmluaXRBdWRpbygpO1xyXG4gICAgICB9KTtcclxuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKCkgPT4ge1xyXG4gICAgICAgICB0aGlzLnN0b3BBbGFybSgpO1xyXG4gICAgICAgICB0aGlzLmluaXRBdWRpbygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICh0aGlzLnN0b3JhZ2UuaGFzKFN0b3JhZ2VJdGVtLlNvdW5kKSkge1xyXG4gICAgICAgICB0aGlzLnNvdW5kID0gdGhpcy5zdG9yYWdlLmdldChTdG9yYWdlSXRlbS5Tb3VuZCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuZHJhdygpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgdGVzdFNvdW5kKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnBsYXlTb3VuZCh0aGlzLmFsYXJtLCBmYWxzZSk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgcGxheVNvdW5kKHNvdW5kOiBIVE1MQXVkaW9FbGVtZW50LCBsb29wOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgIHNvdW5kLmN1cnJlbnRUaW1lID0gMDtcclxuICAgICAgc291bmQubG9vcCA9IGxvb3A7XHJcbiAgICAgIHNvdW5kLnBsYXkoKS5jYXRjaCgoZXJyKSA9PiB7IGNvbnNvbGUubG9nKCdDYW5ub3QgcGxheSBzb3VuZDogJyArIGVycikgfSk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgaGl0VGVzdChwb3M6IFZlYzIpOiBIaXRBcmVhIHtcclxuXHJcbiAgICAgIGlmICh0aGlzLmNhbmNlbEJveCAmJiB0aGlzLmNhbmNlbEJveC5pbnNpZGUocG9zKSkge1xyXG4gICAgICAgICByZXR1cm4gSGl0QXJlYS5BdXRvU3RhcnRDYW5jZWw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChwb3MueCA8IHRoaXMudGltZXJUZXh0Qm94LmxlZnQgfHwgcG9zLnggPiB0aGlzLnRpbWVyVGV4dEJveC5yaWdodCB8fCBwb3MueSA8IHRoaXMudGltZXJUZXh0Qm94LnRvcCB8fCBwb3MueSA+IHRoaXMudGltZXJUZXh0Qm94LmJvdHRvbSkge1xyXG4gICAgICAgICByZXR1cm4gSGl0QXJlYS5Ob25lO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocG9zLnggPCB0aGlzLnRpbWVyVGV4dEJveC5yaWdodCAtIHRoaXMuc3RhcnRTdG9wV2lkdGgpIHtcclxuICAgICAgICAgcmV0dXJuIEhpdEFyZWEuVGltZXJUZXh0O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICByZXR1cm4gSGl0QXJlYS5TdGFydFN0b3A7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBpbml0QXVkaW8oKTogdm9pZCB7XHJcbiAgICAgIC8vIGNyZWF0ZSB2aWEgaHRtbCBpbnN0ZWFkIG9mIG5ldyBBdWRpbygpIHdoaWNoIGlzIGJsb2NrZWQgb24gcG9ydGFibGUgaW9zXHJcbiAgICAgIGlmICh0aGlzLmFsYXJtID09PSBudWxsKSB7XHJcbiAgICAgICAgIHRoaXMuYWxhcm0gPSBHVUkuY3JlYXRlKCdhdWRpbycsICdBbGFybUF1ZGlvJywgZG9jdW1lbnQuYm9keSk7XHJcbiAgICAgICAgIHRoaXMuYWxhcm0uc3JjID0gYmFzZVVybCgpICsgdGhpcy5zb3VuZEZpbGU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmFsZXJ0VGltZXJTdGFydGVkID09PSBudWxsKSB7XHJcbiAgICAgICAgIHRoaXMuYWxlcnRUaW1lclN0YXJ0ZWQgPSBHVUkuY3JlYXRlKCdhdWRpbycsICdBbGVydFRpbWVyU3RhcnRlZCcsIGRvY3VtZW50LmJvZHkpO1xyXG4gICAgICAgICB0aGlzLmFsZXJ0VGltZXJTdGFydGVkLnNyYyA9IGJhc2VVcmwoKSArICdzb3VuZHMvdGltZXJfc3RhcnRlZC5tcDMnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5hbGVydDEwTWluc1JlbWFpbmluZyA9PT0gbnVsbCkge1xyXG4gICAgICAgICB0aGlzLmFsZXJ0MTBNaW5zUmVtYWluaW5nID0gR1VJLmNyZWF0ZSgnYXVkaW8nLCAnQWxlcnQxME1pbnNSZW1haW5pbmcnLCBkb2N1bWVudC5ib2R5KTtcclxuICAgICAgICAgdGhpcy5hbGVydDEwTWluc1JlbWFpbmluZy5zcmMgPSBiYXNlVXJsKCkgKyAnc291bmRzLzEwX21pbnV0ZXNfcmVtYWluaW5nLm1wMyc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmFsZXJ0MU1pblJlbWFpbmluZyA9PT0gbnVsbCkge1xyXG4gICAgICAgICB0aGlzLmFsZXJ0MU1pblJlbWFpbmluZyA9IEdVSS5jcmVhdGUoJ2F1ZGlvJywgJ0FsZXJ0MU1pblJlbWFpbmluZycsIGRvY3VtZW50LmJvZHkpO1xyXG4gICAgICAgICB0aGlzLmFsZXJ0MU1pblJlbWFpbmluZy5zcmMgPSBiYXNlVXJsKCkgKyAnc291bmRzLzFfbWludXRlX3JlbWFpbmluZy5tcDMnO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgZ2V0T3B0aW1hbFNpemUoKTogUmVjdCB7XHJcbiAgICAgIGxldCB3aWR0aCA9IHRoaXMuY2FudmFzLndpZHRoO1xyXG4gICAgICBsZXQgaGVpZ2h0ID0gdGhpcy5jYW52YXMuaGVpZ2h0O1xyXG5cclxuICAgICAgbGV0IGVtID0gZ2V0RW1QaXhlbHMoKTtcclxuICAgICAgbGV0IGZvbnRTaXplID0gKGhlaWdodCAtIDAuNSAqIGVtKTtcclxuXHJcbiAgICAgIGxldCBjdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICBjdHguZm9udCA9IGZvbnRTaXplICsgJ3B4IEFyaWFsJztcclxuICAgICAgbGV0IHNpemUgPSBjdHgubWVhc3VyZVRleHQoJzAwOjAwJyk7XHJcblxyXG4gICAgICBsZXQgZGVzaXJlZEhlaWdodCA9IGhlaWdodDtcclxuICAgICAgbGV0IGRlc2lyZWRXaWR0aCA9IHNpemUud2lkdGggKyAodGhpcy5sZWZ0TWFyZ2luUmF0aW8gKyB0aGlzLnN0YXJ0U3RvcFdpZHRoUmF0aW8pICogaGVpZ2h0O1xyXG4gICAgICBsZXQgQVIgPSBkZXNpcmVkV2lkdGggLyBkZXNpcmVkSGVpZ2h0O1xyXG5cclxuICAgICAgaWYgKGRlc2lyZWRXaWR0aCA+IHdpZHRoKSB7XHJcbiAgICAgICAgIGRlc2lyZWRXaWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICBkZXNpcmVkSGVpZ2h0ID0gZGVzaXJlZFdpZHRoIC8gQVI7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCB4ID0gKHdpZHRoIC0gZGVzaXJlZFdpZHRoKSAvIDI7XHJcbiAgICAgIGxldCB5ID0gKGhlaWdodCAtIGRlc2lyZWRIZWlnaHQpIC8gMjtcclxuICAgICAgcmV0dXJuIG5ldyBSZWN0KHgsIHksIGRlc2lyZWRXaWR0aCwgZGVzaXJlZEhlaWdodCk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgc3RhcnRTb3VuZCgpIHtcclxuICAgICAgaWYgKHRoaXMuYWxhcm0pIHtcclxuICAgICAgICAgdGhpcy5wbGF5U291bmQodGhpcy5hbGFybSwgdHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBzdG9wU291bmQoKSB7XHJcbiAgICAgIHRoaXMuYWxhcm0ucGF1c2UoKTtcclxuICAgICAgdGhpcy5hbGFybS5jdXJyZW50VGltZSA9IDA7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgc3RvcEFsYXJtKCkge1xyXG4gICAgICBpZiAodGhpcy5tb2RlbFRpbWVyLmFsYXJtU291bmRpbmcpIHtcclxuICAgICAgICAgdGhpcy5tb2RlbFRpbWVyLnJlc2V0KCk7XHJcblxyXG4gICAgICAgICBpZiAodGhpcy5hdXRvU3RhcnQpIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRvU3RhcnRUaW1lci5yZXNldCgpO1xyXG4gICAgICAgICAgICB0aGlzLmF1dG9TdGFydFRpbWVyLnN0YXJ0KCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZHJhdygpOiB2b2lkIHtcclxuXHJcbiAgICAgIGxldCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGhpcy5jYW52YXMpO1xyXG5cclxuICAgICAgbGV0IHdpZHRoID0gdGhpcy5jYW52YXMuY2xpZW50V2lkdGg7XHJcbiAgICAgIGxldCBoZWlnaHQgPSB0aGlzLmNhbnZhcy5jbGllbnRIZWlnaHQ7XHJcbiAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgdGhpcy50aW1lclRleHRCb3ggPSB0aGlzLmdldE9wdGltYWxTaXplKCk7XHJcblxyXG4gICAgICBsZXQgeCA9IHRoaXMudGltZXJUZXh0Qm94Lng7XHJcbiAgICAgIGxldCB5ID0gdGhpcy50aW1lclRleHRCb3gueTtcclxuXHJcbiAgICAgIGxldCBjdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5tb2RlbFRpbWVyLmFsYXJtU291bmRpbmcgPyAnb3JhbmdlJyA6IHN0eWxlLmJhY2tncm91bmRDb2xvciA/PyAnbGlnaHRncmF5JztcclxuICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgLy8gZHJhdyB0aGUgdGltZSB0ZXh0XHJcbiAgICAgIGxldCBlbSA9IGdldEVtUGl4ZWxzKCk7XHJcbiAgICAgIGxldCBmb250U2l6ZSA9ICh0aGlzLnRpbWVyVGV4dEJveC5oZWlnaHQgLSAwLjUgKiBlbSk7XHJcbiAgICAgIGN0eC5mb250ID0gZm9udFNpemUgKyAncHggQXJpYWwnO1xyXG4gICAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5tb2RlbFRpbWVyLmFsYXJtU291bmRpbmcgPyAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpJyA6IHN0eWxlLmNvbG9yID8/ICdibGFjayc7XHJcbiAgICAgIGxldCBzaXplID0gY3R4Lm1lYXN1cmVUZXh0KCcwMDowMCcpO1xyXG5cclxuICAgICAgeCArPSB0aGlzLmxlZnRNYXJnaW5XaWR0aDtcclxuICAgICAgdGhpcy5kcmF3VGV4dChjdHgsIHRoaXMubW9kZWxUaW1lci50aW1lUmVtYWluaW5nU3RyLCB4LCB5LCBzaXplLndpZHRoLCB0aGlzLnRpbWVyVGV4dEJveC5oZWlnaHQpO1xyXG4gICAgICB4ICs9IHNpemUud2lkdGg7XHJcblxyXG4gICAgICAvLyBkcmF3IHRoZSBzdGFydC9zdG9wIHN5bWJvbHNcclxuICAgICAgbGV0IGJveFNpemUgPSB0aGlzLnRpbWVyVGV4dEJveC5oZWlnaHQ7XHJcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgaWYgKHRoaXMubW9kZWxUaW1lci5hbGFybVNvdW5kaW5nIHx8IHRoaXMubW9kZWxUaW1lci5ydW5uaW5nKSB7XHJcbiAgICAgICAgIC8vIHJlZCBzcXVhcmVcclxuICAgICAgICAgbGV0IHNpemUgPSAwLjI1O1xyXG4gICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjU1LDEyOCwxMjgsMC4zKSc7XHJcbiAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDI1NSwwLDAsMC44KSc7XHJcbiAgICAgICAgIGN0eC5tb3ZlVG8oeCArIHNpemUgKiBib3hTaXplLCB5ICsgc2l6ZSAqIGJveFNpemUpO1xyXG4gICAgICAgICBjdHgubGluZVRvKHggKyAoMSAtIHNpemUpICogYm94U2l6ZSwgeSArIHNpemUgKiBib3hTaXplKTtcclxuICAgICAgICAgY3R4LmxpbmVUbyh4ICsgKDEgLSBzaXplKSAqIGJveFNpemUsIHkgKyAoMSAtIHNpemUpICogYm94U2l6ZSk7XHJcbiAgICAgICAgIGN0eC5saW5lVG8oeCArIHNpemUgKiBib3hTaXplLCB5ICsgKDEgLSBzaXplKSAqIGJveFNpemUpO1xyXG4gICAgICAgICBjdHgubGluZVRvKHggKyBzaXplICogYm94U2l6ZSwgeSArIHNpemUgKiBib3hTaXplKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgLy8gZ3JlZW4gdHJpYW5nbGVcclxuICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDEyOCwyNTUsMTI4LDAuNCknO1xyXG4gICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgwLDIwMCwwLDAuOSknO1xyXG4gICAgICAgICBjdHgubW92ZVRvKHggKyAwLjIgKiBib3hTaXplLCB5ICsgMC4yICogYm94U2l6ZSk7XHJcbiAgICAgICAgIGN0eC5saW5lVG8oeCArIDAuOCAqIGJveFNpemUsIHkgKyAwLjUgKiBib3hTaXplKTtcclxuICAgICAgICAgY3R4LmxpbmVUbyh4ICsgMC4yICogYm94U2l6ZSwgeSArIDAuOCAqIGJveFNpemUpO1xyXG4gICAgICAgICBjdHgubGluZVRvKHggKyAwLjIgKiBib3hTaXplLCB5ICsgMC4yICogYm94U2l6ZSk7XHJcbiAgICAgIH1cclxuICAgICAgLy9jdHguc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xyXG4gICAgICBjdHguZmlsbCgpO1xyXG4gICAgICBjdHguc3Ryb2tlKCk7XHJcblxyXG4gICAgICAvLyBpZiB0aGVyZSBpcyByb29tIGFib3ZlIHRoZSB0ZXh0LCBkcmF3IHRoZSBjdXJyZW50IHRpbWVcclxuICAgICAgaWYgKGhlaWdodCA+IGZvbnRTaXplICsgNiAqIGVtKSB7XHJcbiAgICAgICAgIC8vIGRpc3BsYXkgdGhlIGN1cnJlbnQgdGltZVxyXG4gICAgICAgICBjdHguZm9udCA9ICcyZW0gQXJpYWwnO1xyXG4gICAgICAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5tb2RlbFRpbWVyLmFsYXJtU291bmRpbmcgPyAncmdiYSgyNTUsMjU1LDI1NSwgMC44KScgOiAncmdiYSgyNTUsMjU1LDI1NSwwLjUpJztcclxuICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ3RvcCc7XHJcbiAgICAgICAgIGN0eC5maWxsVGV4dChnZXRUaW1lU3RyKCksIHdpZHRoIC8gMiwgMSAqIGVtKTtcclxuXHJcbiAgICAgICAgIC8vIGRpc3BsYXkgYSBtZXNzYWdlXHJcbiAgICAgICAgIGlmICh0aGlzLmF1dG9TdGFydCAmJiB0aGlzLmF1dG9TdGFydFRpbWVyLnJ1bm5pbmcpIHtcclxuXHJcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpJztcclxuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIGhlaWdodCAtIDQgKiBlbSwgd2lkdGgsIDQgKiBlbSk7XHJcblxyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ2dyYXknO1xyXG4gICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ2JvdHRvbSc7XHJcbiAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnbGVmdCc7XHJcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dCgnQXV0by1zdGFydCBpbiAnICsgdGhpcy5hdXRvU3RhcnRUaW1lci50aW1lUmVtYWluaW5nU3RyLCAxICogZW0sIGhlaWdodCAtIDEgKiBlbSk7XHJcblxyXG4gICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ3JpZ2h0JztcclxuICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCdDYW5jZWwnLCB3aWR0aCAtIDEgKiBlbSwgaGVpZ2h0IC0gMSAqIGVtKTtcclxuICAgICAgICAgICAgbGV0IHNpemUgPSBjdHgubWVhc3VyZVRleHQoJ0NhbmNlbCcpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbmNlbEJveCA9IG5ldyBSZWN0KHdpZHRoIC0gKHNpemUud2lkdGggKyAyICogZW0pLCBoZWlnaHQgLSA0ICogZW0sIHNpemUud2lkdGggKyAyICogZW0sIDQgKiBlbSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsQm94ID0gbnVsbDtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgZHJhd1RleHQoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHN0cjogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcclxuXHJcbiAgICAgIGxldCBzaXplID0gY3R4Lm1lYXN1cmVUZXh0KCd5Jyk7IC8vIHNvbWV0aGluZyB3aXRoIGEgZGVzY2VudFxyXG5cclxuICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XHJcbiAgICAgIGN0eC5maWxsVGV4dChzdHIsIHggKyB3aWR0aCAvIDIsIHkgKyBoZWlnaHQgLyAyICsgMC41ICogc2l6ZS5hY3R1YWxCb3VuZGluZ0JveERlc2NlbnQgLyAyKTtcclxuXHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgb25Db3VudGRvd25UaWNrKCkge1xyXG4gICAgICBpZiAodGhpcy5hdXRvU3RhcnRUaW1lci5leHBpcmVkKSB7XHJcbiAgICAgICAgIC8vIFRPRE8gaWYgdGhlIG1vZGVsIGlzIHBvc2luZywgc3VidHJhY3QgdGhlIHRpbWUgd2UgZm9yZ290IHRvIHN0YXJ0IHRoZSB0aW1lci5cclxuICAgICAgICAgdGhpcy5tb2RlbFRpbWVyLnJlc2V0KCk7XHJcbiAgICAgICAgIHRoaXMubW9kZWxUaW1lci5zdGFydCgpO1xyXG4gICAgICAgICB0aGlzLmFsZXJ0MTBNaW5zU291bmRlZCA9IGZhbHNlO1xyXG4gICAgICAgICB0aGlzLmFsZXJ0MU1pblNvdW5kZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgIGlmICh0aGlzLm1vZGVsVGltZXIucmVtYWluaW5nTXMgIT09IFRpbWVNcy5TdGRCcmVhaykge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXlTb3VuZCh0aGlzLmFsZXJ0VGltZXJTdGFydGVkLCBmYWxzZSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgIH1cclxuICAgfVxyXG59IiwiaW1wb3J0IHsgZGVidWcgfSBmcm9tICcuL1NxdWludEFwcCc7XHJcblxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWludGVyZmFjZVxyXG5leHBvcnQgaW50ZXJmYWNlIElTZXR0aW5ncyB7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBPYmplY3RXaXRoU2V0dGluZ3Mge1xyXG4gICBwcml2YXRlIHNldHRpbmdzS2V5Pzogc3RyaW5nO1xyXG5cclxuICAgcHVibGljIGdldCBoYXNTYXZlZFNldHRpbmdzKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gKHRoaXMuc2V0dGluZ3NLZXkgIT09IHVuZGVmaW5lZCAmJiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnNldHRpbmdzS2V5KSAhPT0gbnVsbCk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgc2V0dGluZ3MoKTogSVNldHRpbmdzIHtcclxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3NLZXkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgbGV0IHNldHRpbmdzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5zZXR0aW5nc0tleSk7XHJcbiAgICAgICAgIGlmIChzZXR0aW5ncykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1yZXR1cm5cclxuICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihzZXR0aW5nc0tleT86IHN0cmluZykge1xyXG5cclxuICAgICAgdGhpcy5zZXR0aW5nc0tleSA9IHNldHRpbmdzS2V5O1xyXG4gICB9XHJcblxyXG4gICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlcywgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cclxuICAgcHJvdGVjdGVkIG9uU2F2ZVNldHRpbmdzKF9zZXR0aW5nczogSVNldHRpbmdzKTogdm9pZCB7XHJcbiAgIH1cclxuXHJcbiAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbW9kdWxlLWJvdW5kYXJ5LXR5cGVzLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMsIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxyXG4gICBwcm90ZWN0ZWQgb25SZXN0b3JlU2V0dGluZ3Moc2V0dGluZ3M6IElTZXR0aW5ncykge1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc2F2ZVNldHRpbmdzKCk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy5zZXR0aW5nc0tleSkge1xyXG4gICAgICAgICBsZXQgc2V0dGluZ3MgPSB7fTtcclxuICAgICAgICAgdGhpcy5vblNhdmVTZXR0aW5ncyhzZXR0aW5ncyk7XHJcblxyXG4gICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnNldHRpbmdzS2V5LCBKU09OLnN0cmluZ2lmeShzZXR0aW5ncykpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyByZXN0b3JlU2V0dGluZ3MoKTogdm9pZCB7XHJcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzS2V5KSB7XHJcbiAgICAgICAgIGxldCBqc29uU3RyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5zZXR0aW5nc0tleSk7XHJcbiAgICAgICAgIGlmIChqc29uU3RyICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgIGxldCBzZXR0aW5ncyA9IEpTT04ucGFyc2UoanNvblN0cik7XHJcbiAgICAgICAgICAgICAgIHRoaXMub25SZXN0b3JlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgZGVidWcoJ0Nhbm5vdCByZXN0b3JlIHNldHRpbmdzIGZvciBcXCcgKyBrZXkgKyBcXCcuXFxuVmFsdWUgaXMgbm90IEpTT046ICcgKyBqc29uU3RyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgfVxyXG59IiwiaW1wb3J0IHsgR1VJIH0gZnJvbSAnLi4vLi4vR1VJL0dVSSc7XHJcbmltcG9ydCB7IE9iamVjdFdpdGhTZXR0aW5ncywgSVNldHRpbmdzIH0gZnJvbSAnLi9PYmplY3RXaXRoU2V0dGluZ3MnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUGFuZWxTZXR0aW5ncyBleHRlbmRzIElTZXR0aW5ncyB7XHJcbiAgIHZpc2libGU/OiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFZpc2libGVIYW5kbGVyID0gKHZpc2libGU6IGJvb2xlYW4pID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgY2xhc3MgUGFuZWwgZXh0ZW5kcyBPYmplY3RXaXRoU2V0dGluZ3Mge1xyXG4gICBwcm90ZWN0ZWQgZGl2OiBIVE1MRGl2RWxlbWVudDtcclxuICAgcHJpdmF0ZSBkaXNwbGF5U3R5bGVGb3JTaG93aW5nOiBzdHJpbmc7XHJcblxyXG4gICBwdWJsaWMgb25WaXNpYmxlOiBWaXNpYmxlSGFuZGxlciA9IG51bGw7XHJcblxyXG4gICBwdWJsaWMgZ2V0IHZpc2libGUoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiAoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmRpdikuZGlzcGxheSAhPT0gJ25vbmUnKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHNldCB2aXNpYmxlKGZsYWc6IGJvb2xlYW4pIHtcclxuICAgICAgaWYgKGZsYWcgPT09IHRoaXMudmlzaWJsZSkge1xyXG4gICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChmbGFnKSB7XHJcbiAgICAgICAgIHRoaXMuZGl2LnN0eWxlLmRpc3BsYXkgPSB0aGlzLmRpc3BsYXlTdHlsZUZvclNob3dpbmc7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHRoaXMuZGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmhhc1NhdmVkU2V0dGluZ3MpIHtcclxuICAgICAgICAgbGV0IHNhdmVkU2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzIGFzIElQYW5lbFNldHRpbmdzO1xyXG4gICAgICAgICBpZiAoc2F2ZWRTZXR0aW5ncy52aXNpYmxlICE9PSBmbGFnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMub25WaXNpYmxlKSB7XHJcbiAgICAgICAgIHRoaXMub25WaXNpYmxlKGZsYWcpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihwYXJlbnQ6IEhUTUxFbGVtZW50LCBpZDogc3RyaW5nLCBkaXNwbGF5U3R5bGVGb3JTaG93aW5nID0gJ2Jsb2NrJywgc2V0dGluZ3NLZXk/OiBzdHJpbmcpIHtcclxuICAgICAgc3VwZXIoc2V0dGluZ3NLZXkpO1xyXG5cclxuICAgICAgdGhpcy5kaXYgPSBHVUkuY3JlYXRlKCdkaXYnLCBpZCwgcGFyZW50KTtcclxuICAgICAgdGhpcy5kaXNwbGF5U3R5bGVGb3JTaG93aW5nID0gZGlzcGxheVN0eWxlRm9yU2hvd2luZztcclxuICAgfVxyXG5cclxuICAgcHJvdGVjdGVkIG9uU2F2ZVNldHRpbmdzKHNldHRpbmdzOiBJUGFuZWxTZXR0aW5ncyk6IHZvaWQge1xyXG4gICAgICBzdXBlci5vblNhdmVTZXR0aW5ncyhzZXR0aW5ncyk7XHJcbiAgICAgIHNldHRpbmdzLnZpc2libGUgPSB0aGlzLnZpc2libGU7XHJcbiAgIH1cclxuXHJcbiAgIHByb3RlY3RlZCBvblJlc3RvcmVTZXR0aW5ncyhzZXR0aW5nczogSVBhbmVsU2V0dGluZ3MpOiB2b2lkIHtcclxuICAgICAgc3VwZXIub25SZXN0b3JlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG4gICAgICBpZiAoc2V0dGluZ3MudmlzaWJsZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgIHRoaXMudmlzaWJsZSA9IHNldHRpbmdzLnZpc2libGU7XHJcbiAgICAgIH1cclxuICAgfVxyXG59IiwiaW1wb3J0IHsgR1VJIH0gZnJvbSAnLi4vLi4vR1VJL0dVSSc7XHJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gJy4uLy4uL0dVSS9EaWFsb2cnO1xyXG5cclxuZXhwb3J0IHR5cGUgT2tIYW5kbGVyID0gKHBhc3N3b3JkOiBzdHJpbmcpID0+IHZvaWQ7XHJcbmV4cG9ydCB0eXBlIENhbmNlbEhhbmRsZXIgPSAoKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhc3N3b3JkRGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuICAgICAgcGFyZW50OiBIVE1MRGl2RWxlbWVudCxcclxuICAgICAgb25PazogT2tIYW5kbGVyLFxyXG4gICAgICBvbkNhbmNlbDogQ2FuY2VsSGFuZGxlclxyXG4gICApIHtcclxuICAgICAgc3VwZXIocGFyZW50LCAnUGFzc3dvcmQnKTtcclxuXHJcbiAgICAgIGNvbnN0IHBhc3N3b3JkR3JvdXBEaXYgPSBHVUkuY3JlYXRlKCdkaXYnLCAnUGFzc3dvcmRHcm91cERpdicsIHRoaXMuZGlhbG9nRGl2KTtcclxuICAgICAgY29uc3QgcGFzc3dvcmRMYWJlbCA9IEdVSS5jcmVhdGUoJ2xhYmVsJywgJ1Bhc3N3b3JkTGFiZWwnLCBwYXNzd29yZEdyb3VwRGl2KTtcclxuICAgICAgcGFzc3dvcmRMYWJlbC5pbm5lclRleHQgPSAnUGFzc3dvcmQ6JztcclxuICAgICAgY29uc3QgcGFzc3dvcmRUZXh0SW5wdXQgPSBHVUkuY3JlYXRlKCdpbnB1dCcsICdQYXNzd29yZFRleHRJbnB1dCcsIHBhc3N3b3JkR3JvdXBEaXYpO1xyXG4gICAgICBwYXNzd29yZExhYmVsLmh0bWxGb3IgPSBwYXNzd29yZFRleHRJbnB1dC5pZDtcclxuICAgICAgcGFzc3dvcmRUZXh0SW5wdXQudHlwZSA9ICd0ZXh0JztcclxuICAgICAgcGFzc3dvcmRUZXh0SW5wdXQucGxhY2Vob2xkZXIgPSAncGFzc3dvcmQnO1xyXG4gICAgICBwYXNzd29yZFRleHRJbnB1dC5hdXRvY2FwaXRhbGl6ZSA9ICdub25lJztcclxuXHJcbiAgICAgIHBhc3N3b3JkVGV4dElucHV0Lm9ua2V5cHJlc3MgPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIG9rQnV0dG9uLmNsaWNrKCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIHRoaXMub25TaG93ID0gKCkgPT4ge1xyXG4gICAgICAgICBwYXNzd29yZFRleHRJbnB1dC5mb2N1cygpO1xyXG4gICAgICAgICBwYXNzd29yZFRleHRJbnB1dC5zZWxlY3QoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgYnV0dG9uR3JvdXBEaXYgPSBHVUkuY3JlYXRlKCdkaXYnLCAnQnV0dG9uR3JvdXBEaXYnLCB0aGlzLmRpYWxvZ0Rpdik7XHJcbiAgICAgIGNvbnN0IG9rQnV0dG9uID0gR1VJLmNyZWF0ZSgnYnV0dG9uJywgJ09rQnV0dG9uJywgYnV0dG9uR3JvdXBEaXYsICdCdXR0b25DbGFzcycpO1xyXG4gICAgICBva0J1dHRvbi5pbm5lclRleHQgPSAnT0snO1xyXG4gICAgICBva0J1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgbGV0IHBhc3N3b3JkID0gcGFzc3dvcmRUZXh0SW5wdXQudmFsdWUudHJpbSgpO1xyXG4gICAgICAgICBvbk9rKHBhc3N3b3JkKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IEdVSS5jcmVhdGUoJ2J1dHRvbicsICdDYW5jZWxCdXR0b24nLCBidXR0b25Hcm91cERpdiwgJ0J1dHRvbkNsYXNzJyk7XHJcbiAgICAgIGNhbmNlbEJ1dHRvbi5pbm5lclRleHQgPSAnQ2FuY2VsJztcclxuICAgICAgY2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICBvbkNhbmNlbCgpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcclxuICAgfVxyXG59IiwiaW1wb3J0IHsgZGVidWcgfSBmcm9tICcuL1NxdWludEFwcCc7XHJcblxyXG5leHBvcnQgdHlwZSBSZXNvbHZlSGFuZGxlciA9IChkYXRhOiBhbnkpID0+IHZvaWQ7XHJcbmV4cG9ydCB0eXBlIFJlamVjdEhhbmRsZXIgPSAoZXJyOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG5jbGFzcyBQcm9taXNlRGF0YSB7XHJcbiAgIHB1YmxpYyB0aW1lb3V0SGFuZGxlOiBudW1iZXI7XHJcbiAgIHB1YmxpYyByZXNvbHZlOiBSZXNvbHZlSGFuZGxlcjtcclxuICAgcHVibGljIHJlamVjdDogUmVqZWN0SGFuZGxlcjtcclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuICAgICAgdGltZW91dEhhbmRsZTogbnVtYmVyLFxyXG4gICAgICByZXNvbHZlOiBSZXNvbHZlSGFuZGxlcixcclxuICAgICAgcmVqZWN0OiBSZWplY3RIYW5kbGVyXHJcbiAgICkge1xyXG4gICAgICB0aGlzLnRpbWVvdXRIYW5kbGUgPSB0aW1lb3V0SGFuZGxlO1xyXG4gICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcclxuICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvbWlzZU1hcCB7XHJcbiAgIG1hcDogTWFwPHN0cmluZywgUHJvbWlzZURhdGE+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAgcHVibGljIHB1dChcclxuICAgICAgaWQ6IHN0cmluZyxcclxuICAgICAgdGltZW91dE1zOiBudW1iZXIsXHJcbiAgICAgIHJlc29sdmU6IFJlc29sdmVIYW5kbGVyLFxyXG4gICAgICByZWplY3Q6IFJlamVjdEhhbmRsZXIsXHJcbiAgICAgIHJlamVjdE1lc3NhZ2U6IHN0cmluZ1xyXG5cclxuICAgKTogdm9pZCB7XHJcbiAgICAgIGxldCBoYW5kbGUgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgIGxldCByZXEgPSB0aGlzLm1hcC5nZXQoaWQpO1xyXG4gICAgICAgICByZXEudGltZW91dEhhbmRsZSA9IG51bGw7XHJcbiAgICAgICAgIHRoaXMucmVqZWN0KGlkLCByZWplY3RNZXNzYWdlKTtcclxuICAgICAgfSwgdGltZW91dE1zKTtcclxuXHJcbiAgICAgIGxldCByZXEgPSBuZXcgUHJvbWlzZURhdGEoaGFuZGxlLCByZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICB0aGlzLm1hcC5zZXQoaWQsIHJlcSk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgZXh0cmFjdChpZDogc3RyaW5nKTogUHJvbWlzZURhdGEge1xyXG4gICAgICBsZXQgcmVxID0gdGhpcy5tYXAuZ2V0KGlkKTtcclxuICAgICAgaWYgKHJlcSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgIGRlYnVnKCdJbnRlcm5hbCBFcnJvcjogcmVxdWVzdCBub3QgZm91bmQnKTtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdyZXF1ZXN0IG5vdCBmb3VuZCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLm1hcC5kZWxldGUoaWQpO1xyXG5cclxuICAgICAgaWYgKHJlcS50aW1lb3V0SGFuZGxlICE9PSBudWxsKSB7XHJcbiAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQocmVxLnRpbWVvdXRIYW5kbGUpO1xyXG4gICAgICAgICByZXEudGltZW91dEhhbmRsZSA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlcTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHJlamVjdChpZDogc3RyaW5nLCBlcnI6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy5tYXAuaGFzKGlkKSkge1xyXG4gICAgICAgICB0aGlzLmV4dHJhY3QoaWQpLnJlamVjdChlcnIpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyByZXNvbHZlPFQ+KGlkOiBzdHJpbmcsIGRhdGE/OiBUKTogdm9pZCB7XHJcbiAgICAgIGlmICh0aGlzLm1hcC5oYXMoaWQpKSB7XHJcbiAgICAgICAgIHRoaXMuZXh0cmFjdChpZCkucmVzb2x2ZShkYXRhKTtcclxuICAgICAgfVxyXG4gICB9XHJcbn0iLCJpbXBvcnQgeyBWZWMyIH0gZnJvbSAnLi4vLi4vVXRpbDNEL1ZlYyc7XHJcblxyXG5leHBvcnQgZW51bSBSZWN0SGl0IHtcclxuICAgVUwsXHJcbiAgIFVSLFxyXG4gICBMTCxcclxuICAgTFIsXHJcbiAgIEluc2lkZSxcclxuICAgTm9uZSxcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJlY3Qge1xyXG4gICBwdWJsaWMgeDogbnVtYmVyO1xyXG4gICBwdWJsaWMgeTogbnVtYmVyO1xyXG4gICBwdWJsaWMgd2lkdGg6IG51bWJlcjtcclxuICAgcHVibGljIGhlaWdodDogbnVtYmVyO1xyXG5cclxuICAgcHVibGljIGdldCBsZWZ0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLng7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgdG9wKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgcmlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMueCArIHRoaXMud2lkdGg7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgYm90dG9tKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnkgKyB0aGlzLmhlaWdodDtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKSB7XHJcbiAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgIHRoaXMueSA9IHk7XHJcbiAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXRTY2FsZWQoZmFjdG9yOiBudW1iZXIpOiBSZWN0IHtcclxuICAgICAgcmV0dXJuIG5ldyBSZWN0KGZhY3RvciAqIHRoaXMueCwgZmFjdG9yICogdGhpcy55LCBmYWN0b3IgKiB0aGlzLndpZHRoLCBmYWN0b3IgKiB0aGlzLmhlaWdodCk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBpbnNpZGUocG9zOiBWZWMyKTogYm9vbGVhbiB7XHJcbiAgICAgIGlmIChwb3MueCA+IHRoaXMueCAmJiBwb3MueCA8IHRoaXMucmlnaHQgJiYgcG9zLnkgPiB0aGlzLnkgJiYgcG9zLnkgPCB0aGlzLmJvdHRvbSkge1xyXG4gICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBoaXQocG9zOiBWZWMyLCBlcHNpbG9uOiBudW1iZXIpOiBSZWN0SGl0IHtcclxuICAgICAgbGV0IHVsID0gbmV3IFZlYzIoW3RoaXMueCwgdGhpcy55XSk7XHJcbiAgICAgIGxldCB1ciA9IG5ldyBWZWMyKFt0aGlzLnJpZ2h0LCB0aGlzLnldKTtcclxuICAgICAgbGV0IGxsID0gbmV3IFZlYzIoW3RoaXMueCwgdGhpcy5ib3R0b21dKTtcclxuICAgICAgbGV0IGxyID0gbmV3IFZlYzIoW3RoaXMucmlnaHQsIHRoaXMuYm90dG9tXSk7XHJcblxyXG4gICAgICBpZiAocG9zLmRpc3RhbmNlKHVsKSA8IGVwc2lsb24pIHtcclxuICAgICAgICAgcmV0dXJuIFJlY3RIaXQuVUw7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAocG9zLmRpc3RhbmNlKHVyKSA8IGVwc2lsb24pIHtcclxuICAgICAgICAgcmV0dXJuIFJlY3RIaXQuVVI7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAocG9zLmRpc3RhbmNlKGxsKSA8IGVwc2lsb24pIHtcclxuICAgICAgICAgcmV0dXJuIFJlY3RIaXQuTEw7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAocG9zLmRpc3RhbmNlKGxyKSA8IGVwc2lsb24pIHtcclxuICAgICAgICAgcmV0dXJuIFJlY3RIaXQuTFI7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAocG9zLnggPiB0aGlzLnggJiYgcG9zLnggPCB0aGlzLnJpZ2h0ICYmIHBvcy55ID4gdGhpcy55ICYmIHBvcy55IDwgdGhpcy5ib3R0b20pIHtcclxuICAgICAgICAgcmV0dXJuIFJlY3RIaXQuSW5zaWRlO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICByZXR1cm4gUmVjdEhpdC5Ob25lXHJcbiAgICAgIH1cclxuXHJcbiAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQYW5lbCwgSVBhbmVsU2V0dGluZ3MgfSBmcm9tICcuL1BhbmVsJztcclxuaW1wb3J0IHsgVmVjMiB9IGZyb20gJy4uLy4uL1V0aWwzRC9WZWMnO1xyXG5pbXBvcnQgeyBQb2ludGVyRXZlbnRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vR1VJL1BvaW50ZXJFdmVudEhhbmRsZXInO1xyXG5cclxuaW50ZXJmYWNlIElSZXNpemVhYmxlUGFuZWxTZXR0aW5ncyBleHRlbmRzIElQYW5lbFNldHRpbmdzIHtcclxuICAgdG9wPzogc3RyaW5nO1xyXG4gICBsZWZ0Pzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUmVzaXplYWJsZVBhbmVsIGV4dGVuZHMgUGFuZWwge1xyXG5cclxuICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKHBhcmVudDogSFRNTEVsZW1lbnQsIGlkOiBzdHJpbmcsIGRpc3BsYXlTdHlsZUZvclNob3cgPSAnYmxvY2snLCBzZXR0aW5nc0tleT86IHN0cmluZykge1xyXG4gICAgICBzdXBlcihwYXJlbnQsIGlkLCBkaXNwbGF5U3R5bGVGb3JTaG93LCBzZXR0aW5nc0tleSk7XHJcblxyXG4gICAgICBjb25zdCBoYW5kbGVyID0gbmV3IFBvaW50ZXJFdmVudEhhbmRsZXIodGhpcy5kaXYpO1xyXG4gICAgICBoYW5kbGVyLm9uRHJhZyA9IChwb3M6IFZlYzIsIGRlbHRhOiBWZWMyKSA9PiB7XHJcbiAgICAgICAgIHRoaXMub25EcmFnKHBvcywgZGVsdGEpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHByb3RlY3RlZCBvblNhdmVTZXR0aW5ncyhzZXR0aW5nczogSVJlc2l6ZWFibGVQYW5lbFNldHRpbmdzKTogdm9pZCB7XHJcbiAgICAgIHN1cGVyLm9uU2F2ZVNldHRpbmdzKHNldHRpbmdzKTtcclxuICAgICAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMuZGl2KTtcclxuICAgICAgc2V0dGluZ3MubGVmdCA9IHN0eWxlLmxlZnQ7XHJcbiAgICAgIHNldHRpbmdzLnRvcCA9IHN0eWxlLnRvcDtcclxuICAgfVxyXG5cclxuICAgcHJvdGVjdGVkIG9uUmVzdG9yZVNldHRpbmdzKHNldHRpbmdzOiBJUmVzaXplYWJsZVBhbmVsU2V0dGluZ3MpOiB2b2lkIHtcclxuICAgICAgc3VwZXIub25SZXN0b3JlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG4gICAgICBpZiAoc2V0dGluZ3MubGVmdCAhPT0gdW5kZWZpbmVkICYmIHNldHRpbmdzLnRvcCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgdGhpcy5kaXYuc3R5bGUudG9wID0gc2V0dGluZ3MudG9wO1xyXG4gICAgICAgICB0aGlzLmRpdi5zdHlsZS5sZWZ0ID0gc2V0dGluZ3MubGVmdDtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIG9uRHJhZyhwb3M6IFZlYzIsIGRlbHRhOiBWZWMyKSB7XHJcbiAgICAgIGNvbnN0IG9sZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmRpdik7XHJcbiAgICAgIGNvbnN0IG9sZFggPSB0aGlzLnB4VG9GbG9hdChvbGRTdHlsZS5sZWZ0KTtcclxuICAgICAgY29uc3Qgb2xkWSA9IHRoaXMucHhUb0Zsb2F0KG9sZFN0eWxlLnRvcCk7XHJcbiAgICAgIHRoaXMuZGl2LnN0eWxlLnRvcCA9IChvbGRZICsgZGVsdGEueSkgKyAncHgnO1xyXG4gICAgICB0aGlzLmRpdi5zdHlsZS5sZWZ0ID0gKG9sZFggKyBkZWx0YS54KSArICdweCc7XHJcbiAgICAgIHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgcHhUb0Zsb2F0KHZhbHVlOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gTnVtYmVyLnBhcnNlRmxvYXQodmFsdWUuc3Vic3RyKDAsIHZhbHVlLmxlbmd0aCAtIDIpKTtcclxuICAgfVxyXG59IiwiXHJcbmxldCBob3N0OiBzdHJpbmc7XHJcbmxldCB3c1ByZTogc3RyaW5nO1xyXG5sZXQgaHR0cFByZTogc3RyaW5nO1xyXG5pZiAobG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnKSB7XHJcbiAgIGhvc3QgPSAnbG9jYWxob3N0OjgwODAvVjEvJztcclxuICAgd3NQcmUgPSAnd3M6Ly8nO1xyXG4gICBodHRwUHJlID0gJ2h0dHA6Ly8nO1xyXG59XHJcbmVsc2Uge1xyXG4gICBob3N0ID0gJ3NxdWludHNlcnZlci0xMTI3OC5ub2RlY2hlZi5jb20vVjEvJ1xyXG4gICB3c1ByZSA9ICd3c3M6Ly8nXHJcbiAgIGh0dHBQcmUgPSAnaHR0cHM6Ly8nO1xyXG59XHJcbi8vZXhwb3J0IGNvbnN0IFNxdWludFVybCA9ICd3czovLzE5Mi4xNjguODYuMjM6ODA4MC9WMS8nXHJcblxyXG5leHBvcnQgY29uc3QgU3F1aW50V3NVcmwgPSB3c1ByZSArIGhvc3Q7XHJcbmV4cG9ydCBjb25zdCBTcXVpbnRIdHRwVXJsID0gaHR0cFByZSArIGhvc3Q7XHJcblxyXG4gICAvL3N0YXRpYyByZWFkb25seSB1cmwgPSAnd3M6Ly9sb2NhbGhvc3Q6ODA4MC9WMS8nXHJcbiAgIC8vc3RhdGljIHJlYWRvbmx5IHVybCA9ICd3c3M6Ly9zcXVpbnRzZXJ2ZXItMTEyNzgubm9kZWNoZWYuY29tL1YxLydcclxuXHJcblxyXG4gICAvL3ByaXZhdGUgaG9zdCA9ICdodHRwczovL3dveWFrdGVzdC51ZS5yLmFwcHNwb3QuY29tLyc7XHJcbiAgIC8vcHJpdmF0ZSBob3N0ID0gJ2h0dHA6Ly8xOTIuMTY4Ljg2LjIzOjgwODAvJztcclxuICAgLy9wcml2YXRlIGhvc3QgPSAnaHR0cDovL2xvY2FsaG9zdDo4MDgwLyc7XHJcbiAgIC8vcHJpdmF0ZSBob3N0ID0gJ2h0dHA6Ly8nICsgbG9jYXRpb24uaG9zdG5hbWUgKyAnOjgwODAvVjEnO1xyXG4gICAvL3ByaXZhdGUgaG9zdCA9ICdodHRwOi8vJyArIGxvY2F0aW9uLmhvc3RuYW1lICsgJzozMDAwLyc7XHJcblxyXG4gICAvL3N0YXRpYyByZWFkb25seSB1cmwgPSAnaHR0cHM6Ly9zcXVpbnRzZXJ2ZXItMTEyNzgubm9kZWNoZWYuY29tL1YxJztcclxuICAgLy9zdGF0aWMgcmVhZG9ubHkgdXJsID0gJ2h0dHA6Ly8nICsgbG9jYXRpb24uaG9zdG5hbWUgKyAnOjgwODAvVjEnXHJcbiAgIC8vc3RhdGljIHJlYWRvbmx5IHVybCA9ICdodHRwOi8vbG9jYWxob3N0OjgwODAvVjEnXHJcbiIsImltcG9ydCB7IEdVSSB9IGZyb20gJy4uLy4uL0dVSS9HVUknO1xyXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tICcuLi8uLi9HVUkvRGlhbG9nJztcclxuXHJcbmV4cG9ydCB0eXBlIE9rSGFuZGxlciA9IChwYXNzd29yZDogc3RyaW5nKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlc3Npb25TZXR1cERpYWxvZyBleHRlbmRzIERpYWxvZyB7XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IoXHJcbiAgICAgIHBhcmVudDogSFRNTERpdkVsZW1lbnQsXHJcbiAgICAgIG9uT2s6IE9rSGFuZGxlclxyXG4gICApIHtcclxuICAgICAgc3VwZXIocGFyZW50LCAnU2Vzc2lvblNldHVwJyk7XHJcblxyXG4gICAgICBjb25zdCBwYXNzd29yZEdyb3VwRGl2ID0gR1VJLmNyZWF0ZSgnZGl2JywgJ1Bhc3N3b3JkR3JvdXBEaXYnLCB0aGlzLmRpYWxvZ0Rpdik7XHJcbiAgICAgIGNvbnN0IHBhc3N3b3JkTGFiZWwgPSBHVUkuY3JlYXRlKCdsYWJlbCcsICdQYXNzd29yZExhYmVsJywgcGFzc3dvcmRHcm91cERpdik7XHJcbiAgICAgIHBhc3N3b3JkTGFiZWwuaW5uZXJUZXh0ID0gJ1Bhc3N3b3JkOic7XHJcbiAgICAgIGNvbnN0IHBhc3N3b3JkVGV4dElucHV0ID0gR1VJLmNyZWF0ZSgnaW5wdXQnLCAnUGFzc3dvcmRUZXh0SW5wdXQnLCBwYXNzd29yZEdyb3VwRGl2KTtcclxuICAgICAgcGFzc3dvcmRMYWJlbC5odG1sRm9yID0gcGFzc3dvcmRUZXh0SW5wdXQuaWQ7XHJcbiAgICAgIHBhc3N3b3JkVGV4dElucHV0LnR5cGUgPSAndGV4dCc7XHJcbiAgICAgIHBhc3N3b3JkVGV4dElucHV0LnBsYWNlaG9sZGVyID0gJ2xlYXZlIGJsYW5rIGZvciBub25lJztcclxuICAgICAgcGFzc3dvcmRUZXh0SW5wdXQuYXV0b2NhcGl0YWxpemUgPSAnbm9uZSc7XHJcblxyXG4gICAgICBwYXNzd29yZFRleHRJbnB1dC5vbmtleXByZXNzID0gKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcbiAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBva0J1dHRvbi5jbGljaygpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICB0aGlzLm9uU2hvdyA9ICgpID0+IHtcclxuICAgICAgICAgcGFzc3dvcmRUZXh0SW5wdXQuZm9jdXMoKTtcclxuICAgICAgICAgcGFzc3dvcmRUZXh0SW5wdXQuc2VsZWN0KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG9rQnV0dG9uID0gR1VJLmNyZWF0ZSgnYnV0dG9uJywgJ09rQnV0dG9uJywgcGFzc3dvcmRHcm91cERpdiwgJ0J1dHRvbkNsYXNzJyk7XHJcbiAgICAgIG9rQnV0dG9uLmlubmVyVGV4dCA9ICdPSyc7XHJcbiAgICAgIG9rQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICBsZXQgcGFzc3dvcmQgPSBwYXNzd29yZFRleHRJbnB1dC52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgIG9uT2socGFzc3dvcmQpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcclxuICAgfVxyXG59IiwiXHJcbmV4cG9ydCBlbnVtIFNvdW5kcyB7XHJcbiAgIEJlZXAgPSAnc291bmRzL2JlZXAubXAzJyxcclxuICAgQ2hpbWUgPSAnc291bmRzL2NoaW1lLm1wMycsXHJcbiAgIENyaWNrZXQgPSAnc291bmRzL2NyaWNrZXQubXAzJyxcclxuICAgQ3Vrb28gPSAnc291bmRzL2N1a29vLm1wMycsXHJcbiAgIERpbmcgPSAnc291bmRzL2RpbmcubXAzJyxcclxuICAgR29uZyA9ICdzb3VuZHMvZ29uZy5tcDMnLFxyXG4gICBMb29uID0gJ3NvdW5kcy9sb29uLm1wMycsXHJcbiAgIE93bCA9ICdzb3VuZHMvb3dsLm1wMycsXHJcbiAgIFJpbmcgPSAnc291bmRzL3JpbmcubXAzJyxcclxuICAgUnViYmVyX0R1Y2t5ID0gJ3NvdW5kcy9ydWJiZXJEdWNreS5tcDMnLFxyXG4gICBUd2VldCA9ICdzb3VuZHMvdHdlZXQubXAzJyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gU3Bvb2t5U291bmRzIHtcclxuICAgQXpnaG9zdCA9ICdzb3VuZHMvc3Bvb2t5L2F6Z2hvc3QubXAzJyxcclxuICAgQ2Fja2xlID0gJ3NvdW5kcy9zcG9va3kvY2Fja2xlLm1wMycsXHJcbiAgIEdob3N0ID0gJ3NvdW5kcy9zcG9va3kvZ2hvc3QubXAzJyxcclxuICAgSmF3cyA9ICdzb3VuZHMvc3Bvb2t5L2phd3MubXAzJyxcclxuICAgU2NyZWFtID0gJ3NvdW5kcy9zcG9va3kvc2NyZWFtLm1wMycsXHJcbiAgIFdpY2tlZF9MYXVnaCA9ICdzb3VuZHMvc3Bvb2t5L3dpY2tlZGxhdWdoLm1wMycsXHJcbiAgIFdpdGNoID0gJ3NvdW5kcy9zcG9va3kvd2l0Y2gubXAzJyxcclxuICAgV29sZiA9ICdzb3VuZHMvc3Bvb2t5L3dvbGYubXAzJyxcclxufSIsImltcG9ydCB7IFNxdWludFdzVXJsIGFzIFNxdWludFdzVXJsIH0gZnJvbSAnLi9TZXJ2ZXJzJztcclxuaW1wb3J0IHsgZGVidWcgfSBmcm9tICcuL1NxdWludEFwcCc7XHJcbmltcG9ydCB7IFNxdWludFNvY2tldCB9IGZyb20gJy4vU3F1aW50U29ja2V0JztcclxuaW1wb3J0IHsgSVNxdWludE1lc3NhZ2UsIFNxdWludE1lc3NhZ2VTdWJqZWN0LCBJU3F1aW50SW5mbywgSUNvbm5lY3Rpb25JbmZvQmFzaWMsIEpvaW5TZXNzaW9uU3RhdHVzLCBDcmVhdGVTZXNzaW9uU3RhdHVzIH0gZnJvbSAnLi9TcXVpbnRNZXNzYWdlJztcclxuaW1wb3J0IHsgRXZlbnRNYW5hZ2VyIH0gZnJvbSAnLi9FdmVudE1hbmFnZXInO1xyXG5pbXBvcnQgeyBJU3F1aW50RXZlbnRIYW5kbGVyLCBTcXVpbnRFdmVudCB9IGZyb20gJy4vU3F1aW50RXZlbnRzJztcclxuaW1wb3J0IHsgV2ViU29ja2V0RmFjdG9yeSB9IGZyb20gJy4vV2ViU29ja2V0RmFjdG9yeSc7XHJcbmltcG9ydCB7IFByb21pc2VNYXAgfSBmcm9tICcuL1Byb21pc2VNYXAnO1xyXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcclxuaW1wb3J0IHsgU3F1aW50U3RyaW5ncyB9IGZyb20gJy4vU3F1aW50U3RyaW5ncyc7XHJcbmltcG9ydCB7IFN0b3B3YXRjaCB9IGZyb20gJy4uLy4uL1V0aWwvU3RvcHdhdGNoJztcclxuaW1wb3J0IHsgTW9kZWxUaW1lciB9IGZyb20gJy4vTW9kZWxUaW1lcic7XHJcbmltcG9ydCB7IElUaW1lckluZm8gfSBmcm9tICcuL0lUaW1lckluZm8nO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNxdWludCB7XHJcblxyXG4gICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IHVybCA9IFNxdWludFdzVXJsO1xyXG4gICBwdWJsaWMgUmVjb25uZWN0VGltZW91dFMgPSA2MDA7XHJcbiAgIHB1YmxpYyBSZWNvbm5lY3RSZXRyeURlbGF5UyA9IDE7XHJcblxyXG4gICBwdWJsaWMgc3M6IFNxdWludFNvY2tldCB8IG51bGwgPSBudWxsO1xyXG4gICBwdWJsaWMgX3VzZXJOYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuICAgcHJpdmF0ZSBfcmVtb3RlQ2FtZXJhUGF1c2VkID0gZmFsc2U7XHJcbiAgIHByaXZhdGUgX3JlbW90ZUNhbWVyYUNvbm5lY3RlZCA9IHRydWU7XHJcbiAgIHByaXZhdGUgX3VybDogc3RyaW5nIHwgbnVsbDtcclxuICAgcHJpdmF0ZSByZXF1ZXN0cyA9IG5ldyBQcm9taXNlTWFwKCk7XHJcbiAgIHByaXZhdGUgcmVjb25uZWN0U3RvcHdhdGNoOiBTdG9wd2F0Y2ggfCBudWxsID0gbnVsbDtcclxuICAgcHJpdmF0ZSBfbW9kZWxUaW1lcjogTW9kZWxUaW1lcjtcclxuXHJcbiAgIHByaXZhdGUgZXZlbnRNYW5hZ2VyID0gbmV3IEV2ZW50TWFuYWdlcigpO1xyXG5cclxuICAgLy8gc3BlY2lhbCBjb2RlIHRoYXQgY2xvc2UgdGhlIHNvY2tldCB3aXRoIGFuIGVycm9yIGNvZGUgdGh1cyBjYXVzaW5nIHRoZVxyXG4gICAvLyBzZXJ2ZXIgdG8gZ28gaW50byB6b21iaWUgbW9kZS4gT25lIGNvZGUgYWxzbyB0ZWxscyB1cywgdGhlIGNsaWVudCwgdG9cclxuICAgLy8gbm90IHRyeSB0byBhdXRvLXJlY29ubmVjdC4gVXNlIHRoZXNlIGZvciB0ZXN0aW5nIG9ubHlcclxuICAgcHVibGljIHN0YXRpYyByZWFkb25seSBDTE9TRV9DT0RFX0ZBSUxfTk9fUkVDT05ORUNUID0gMzAwMTtcclxuICAgcHVibGljIHN0YXRpYyByZWFkb25seSBDTE9TRV9DT0RFX0ZBSUxfUkVDT05ORUNUID0gMzAwMDtcclxuXHJcbiAgIC8qKlxyXG4gICAgKiBGb3IgZGVidWdnaW5nIG9ubHlcclxuICAgICovXHJcbiAgIHB1YmxpYyBnZXQgd3MoKTogV2ViU29ja2V0IHtcclxuICAgICAgcmV0dXJuIHRoaXMuc3Mud3M7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgbW9kZWxUaW1lcigpOiBNb2RlbFRpbWVyIHwgbnVsbCB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9tb2RlbFRpbWVyO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0IHVzZXJOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgIGlmICh0aGlzLl91c2VyTmFtZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICByZXR1cm4gJ1Vua25vd24nO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICByZXR1cm4gdGhpcy5fdXNlck5hbWU7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIHNldCB1c2VyTmFtZSh1c2VyTmFtZTogc3RyaW5nKSB7XHJcbiAgICAgIGlmICh0aGlzLl91c2VyTmFtZSAhPT0gdXNlck5hbWUpIHtcclxuICAgICAgICAgdGhpcy5fdXNlck5hbWUgPSB1c2VyTmFtZTtcclxuICAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29ubmVjdGlvbkluZm8odXNlck5hbWUpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBjb25uZWN0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgIGlmICh0aGlzLnNzICYmIHRoaXMuc3MuY29ubmVjdGVkKSB7XHJcbiAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCByZWNvbm5lY3RpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLnJlY29ubmVjdFN0b3B3YXRjaCAhPT0gbnVsbDtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBidWZmZXJSZWFkeSgpOiBib29sZWFuIHtcclxuICAgICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkge1xyXG4gICAgICAgICBkZWJ1ZygnU3F1aW50LmJ1ZmZlclJlYWR5KCkgY2FsbGVkIGFmdGVyIHdlYnNvY2tldCB3YXMgZGlzY29ubmVjdGVkJyk7XHJcbiAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQHRzLWlnbm9yZTogY2Fubm90IGJlIG51bGwgLSB3ZSBjaGVjayBhYm92ZVxyXG4gICAgICByZXR1cm4gdGhpcy5zcy5idWZmZXJlZEFtb3VudCA9PT0gMDtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBjb25uZWN0aW9uSW5mbygpOiBJQ29ubmVjdGlvbkluZm9CYXNpYyB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgIGNvbm5lY3Rpb25JZDogdGhpcy5jb25uZWN0aW9uSWQsXHJcbiAgICAgICAgIHVzZXJOYW1lOiB0aGlzLnVzZXJOYW1lLFxyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgY29ubmVjdGlvbklkKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiAodGhpcy5zcyAhPT0gbnVsbCkgPyB0aGlzLnNzLmNvbm5lY3Rpb25JZCA6ICdXZWJTb2NrZXQgbm90IGNvbm5lY3RlZCdcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCByZW1vdGVDYW1lcmFQYXVzZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9yZW1vdGVDYW1lcmFQYXVzZWQ7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgcmVtb3RlQ2FtZXJhQ29ubmVjdGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fcmVtb3RlQ2FtZXJhQ29ubmVjdGVkO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIHRoaXMuX21vZGVsVGltZXIgPSBuZXcgTW9kZWxUaW1lcih0aGlzKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIG9uKGhhbmRsZXI6IElTcXVpbnRFdmVudEhhbmRsZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5ldmVudE1hbmFnZXIub24oaGFuZGxlci5ldmVudCwgaGFuZGxlci5oYW5kbGVyKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHJlbW92ZShoYW5kbGVyOiBJU3F1aW50RXZlbnRIYW5kbGVyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyLnJlbW92ZShoYW5kbGVyLmV2ZW50LCBoYW5kbGVyLmhhbmRsZXIpO1xyXG4gICB9XHJcblxyXG4gICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICBwcml2YXRlIGVtaXQobmFtZTogU3F1aW50RXZlbnQsIC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyLmVtaXQobmFtZSwgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSwgYXJnc1s0XSwgYXJnc1s1XSwgYXJnc1s2XSwgYXJnc1s4XSwgYXJnc1s5XSk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgcHJvY2Vzc01lc3NhZ2UobXNnOiBJU3F1aW50TWVzc2FnZSkge1xyXG4gICAgICBzd2l0Y2ggKG1zZy5zdWJqZWN0KSB7XHJcbiAgICAgICAgIGNhc2UgU3F1aW50TWVzc2FnZVN1YmplY3QuQ2FtZXJhUGF1c2VkOiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbW90ZUNhbWVyYVBhdXNlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyLmVtaXQoU3F1aW50RXZlbnQuQ2FtZXJhUGF1c2VkKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGNhc2UgU3F1aW50TWVzc2FnZVN1YmplY3QuQ2FtZXJhUmVxdWVzdDoge1xyXG4gICAgICAgICAgICB0aGlzLmVtaXQoU3F1aW50RXZlbnQuQ2FtZXJhUmVxdWVzdCwgbXNnLnJlc29sdXRpb24sIG1zZy5qcGVnUXVhbGl0eSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICBjYXNlIFNxdWludE1lc3NhZ2VTdWJqZWN0LkNoYXRNZXNzYWdlOiB7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdChTcXVpbnRFdmVudC5DaGF0TWVzc2FnZSwgbXNnLmNvbm5lY3Rpb24sIG1zZy5tZXNzYWdlKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGNhc2UgU3F1aW50TWVzc2FnZVN1YmplY3QuQ29ubmVjdGlvbkluZm9VcGRhdGU6IHtcclxuICAgICAgICAgICAgdGhpcy5lbWl0KFxyXG4gICAgICAgICAgICAgICBTcXVpbnRFdmVudC5Db25uZWN0aW9uSW5mb1VwZGF0ZSxcclxuICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICB1c2VyTmFtZTogbXNnLnVzZXJOYW1lLFxyXG4gICAgICAgICAgICAgICAgICBjb25uZWN0aW9uSWQ6IG1zZy5jb25uZWN0aW9uSWQsXHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGNhc2UgU3F1aW50TWVzc2FnZVN1YmplY3QuSG9zdENoYW5nZWQ6IHtcclxuICAgICAgICAgICAgdGhpcy5lbWl0KFNxdWludEV2ZW50Lkhvc3RDaGFuZ2VkLCBtc2cubmV3SG9zdENvbm5lY3Rpb25JZCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICBjYXNlIFNxdWludE1lc3NhZ2VTdWJqZWN0Lkhvc3REaXNjb25uZWN0ZWQ6IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVtb3RlQ2FtZXJhQ29ubmVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdChTcXVpbnRFdmVudC5Ib3N0RGlzY29ubmVjdGVkKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGNhc2UgU3F1aW50TWVzc2FnZVN1YmplY3QuU2Vzc2lvbkNyZWF0ZWQ6IHtcclxuICAgICAgICAgICAgc3dpdGNoIChtc2cuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgIGNhc2UgQ3JlYXRlU2Vzc2lvblN0YXR1cy5TdWNjZXNzOlxyXG4gICAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RzLnJlc29sdmUobXNnLnJlcXVlc3RJZCwgbXNnLnNlc3Npb25JZCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdChTcXVpbnRFdmVudC5TeW5jaHJvbml6ZVRpbWVyLCBtc2cudGltZXJJbmZvKTtcclxuICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICBjYXNlIENyZWF0ZVNlc3Npb25TdGF0dXMuQWxyZWFkeUluQVNlc3Npb246XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdHMucmVqZWN0KG1zZy5yZXF1ZXN0SWQsIFNxdWludFN0cmluZ3MuQ0FOTk9UX0NSRUFURV9TRVNTSU9OX19JTl9TRVNTSU9OKTtcclxuICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIFRTMjMzOTogUHJvcGVydHkgJ1hYWCcgZG9lcyBub3QgZXhpc3Qgb24gdHlwZSAnbmV2ZXInXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdHMucmVqZWN0KG1zZy5yZXF1ZXN0SWQsIFNxdWludFN0cmluZ3MuQ0FOTk9UX0NSRUFURV9TRVNTSU9OKG1zZy5zdGF0dXMpKTtcclxuICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGNhc2UgU3F1aW50TWVzc2FnZVN1YmplY3QuU2Vzc2lvbkpvaW5lZDoge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG1zZy5zdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgY2FzZSBKb2luU2Vzc2lvblN0YXR1cy5TdWNjZXNzOlxyXG4gICAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RzLnJlc29sdmUobXNnLnJlcXVlc3RJZCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdChTcXVpbnRFdmVudC5TeW5jaHJvbml6ZVRpbWVyLCBtc2cudGltZXJJbmZvKTtcclxuICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICBjYXNlIEpvaW5TZXNzaW9uU3RhdHVzLkFscmVhZHlJbkFTZXNzaW9uOlxyXG4gICAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RzLnJlamVjdChtc2cucmVxdWVzdElkLCBTcXVpbnRTdHJpbmdzLkNBTk5PVF9KT0lOX1NFU1NJT05fX0lOX1NFU1NJT04pO1xyXG4gICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgIGNhc2UgSm9pblNlc3Npb25TdGF0dXMuU2Vzc2lvbk5vdEZvdW5kOlxyXG4gICAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RzLnJlamVjdChtc2cucmVxdWVzdElkLCBTcXVpbnRTdHJpbmdzLkNBTk5PVF9KT0lOX1NFU1NJT05fX1NFU1NJT05fTk9UX0ZPVU5EKTtcclxuICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICBjYXNlIEpvaW5TZXNzaW9uU3RhdHVzLkludmFsaWRQYXNzd29yZDpcclxuICAgICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0cy5yZWplY3QobXNnLnJlcXVlc3RJZCwgU3F1aW50U3RyaW5ncy5DQU5OT1RfSk9JTl9TRVNTSU9OX19JTlZBTElEX1BBU1NXT1JEKTtcclxuICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIFRTMjMzOTogUHJvcGVydHkgJ1hYWCcgZG9lcyBub3QgZXhpc3Qgb24gdHlwZSAnbmV2ZXInXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdHMucmVqZWN0KG1zZy5yZXF1ZXN0SWQsIFNxdWludFN0cmluZ3MuQ0FOTk9UX0pPSU5fU0VTU0lPTihtc2cuc3RhdHVzKSk7XHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICBjYXNlIFNxdWludE1lc3NhZ2VTdWJqZWN0LlNlc3Npb25MaXN0OiB7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdChTcXVpbnRFdmVudC5TZXNzaW9uTGlzdCwgbXNnLnNlc3Npb25zKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGNhc2UgU3F1aW50TWVzc2FnZVN1YmplY3QuU2Vzc2lvbkluZm86IHtcclxuICAgICAgICAgICAgdGhpcy5lbWl0KFNxdWludEV2ZW50LlNlc3Npb25JbmZvLCBtc2cuaW5mbyk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICBjYXNlIFNxdWludE1lc3NhZ2VTdWJqZWN0LlN5bmNocm9uaXplVGltZXI6IHtcclxuICAgICAgICAgICAgdGhpcy5lbWl0KFNxdWludEV2ZW50LlN5bmNocm9uaXplVGltZXIsIG1zZy5pbmZvKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGNhc2UgdW5kZWZpbmVkOlxyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIE1lc3NhZ2U6IFxcJ3N1YmplY3RcXCcgbm90IGZvdW5kLlxcbicgKyBKU09OLnN0cmluZ2lmeShtc2csIG51bGwsICcgJykpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgTWVzc2FnZTogdW5rbm93biBcXCdzdWJqZWN0XFwnLlxcbicgKyBKU09OLnN0cmluZ2lmeShtc2csIG51bGwsICcgJykpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHJldHJ5Q291bnQ6IG51bWJlcjtcclxuICAgcHJpdmF0ZSB0cnlUb1JlY29ubmVjdChjb25uZWN0aW9uSWQ6IHN0cmluZyk6IHZvaWQge1xyXG5cclxuICAgICAgaWYgKHRoaXMucmVjb25uZWN0U3RvcHdhdGNoID09PSBudWxsKSB7XHJcbiAgICAgICAgIHRoaXMucmVjb25uZWN0U3RvcHdhdGNoID0gbmV3IFN0b3B3YXRjaCgpO1xyXG4gICAgICAgICB0aGlzLnJldHJ5Q291bnQgPSAxO1xyXG4gICAgICAgICB0aGlzLmVtaXQoU3F1aW50RXZlbnQuUmVjb25uZWN0aW5nKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgdGhpcy5yZXRyeUNvdW50Kys7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMgKyAnIFJlY29ubmVjdCB0cnkgJyArIHRoaXMucmV0cnlDb3VudClcclxuICAgICAgdGhpcy5kb0Nvbm5lY3QoY29ubmVjdGlvbklkKVxyXG4gICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVjb25uZWN0U3RvcHdhdGNoID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5lbWl0KFNxdWludEV2ZW50LlJlY29ubmVjdGVkLCB0cnVlKTtcclxuICAgICAgICAgfSlcclxuICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcyArICcgUmVjb25uZWN0IHRyeSAnICsgdGhpcy5yZXRyeUNvdW50ICsgJyBmYWlsZWQ6ICcgKyBlcnIpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGVyciA9PT0gJ3N0cmluZycgJiYgZXJyLmVuZHNXaXRoKCdTZXJ2ZXIgcmVqZWN0ZWQgdGhlIHJlcXVlc3QuJykpIHtcclxuICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcyArICcgVW5hYmxlIHRvIHJlY29ubmVjdCwgc2VydmVyIHJlamVjdGVkIHRoZSByZXF1ZXN0LicpO1xyXG4gICAgICAgICAgICAgICB0aGlzLnJlY29ubmVjdFN0b3B3YXRjaCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgIHRoaXMuc3MgPSBudWxsO1xyXG4gICAgICAgICAgICAgICB0aGlzLmVtaXQoU3F1aW50RXZlbnQuUmVjb25uZWN0ZWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgdGhpcy5lbWl0KFNxdWludEV2ZW50LkNsb3NlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnJlY29ubmVjdFN0b3B3YXRjaC5lbGFwc2VkUyA8IHRoaXMuUmVjb25uZWN0VGltZW91dFMpIHtcclxuICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudHJ5VG9SZWNvbm5lY3QoY29ubmVjdGlvbklkKTtcclxuICAgICAgICAgICAgICAgfSwgMTAwMCAqIHRoaXMuUmVjb25uZWN0UmV0cnlEZWxheVMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzICsgJyBVbmFibGUgdG8gcmVjb25uZWN0LicpO1xyXG4gICAgICAgICAgICAgICB0aGlzLnJlY29ubmVjdFN0b3B3YXRjaCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgIHRoaXMuc3MgPSBudWxsO1xyXG4gICAgICAgICAgICAgICB0aGlzLmVtaXQoU3F1aW50RXZlbnQuUmVjb25uZWN0ZWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgdGhpcy5lbWl0KFNxdWludEV2ZW50LkNsb3NlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNvbm5lY3QodXJsOiBzdHJpbmcsIHVzZXJOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgIHRoaXMuX3VzZXJOYW1lID0gdXNlck5hbWU7XHJcbiAgICAgIHRoaXMuX3VybCA9IHVybDtcclxuICAgICAgdGhpcy5fcmVtb3RlQ2FtZXJhQ29ubmVjdGVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5fcmVtb3RlQ2FtZXJhUGF1c2VkID0gZmFsc2U7XHJcbiAgICAgIHJldHVybiB0aGlzLmRvQ29ubmVjdCgpO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGRvQ29ubmVjdChyZWNvbm5lY3RJZD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7XHJcbiAgICAgICAgIGRlYnVnKCdDb25uZWN0aW5nIGV2ZW4gdGhvdWdoIHByZXZpb3VzIGNvbm5lY3Rpb24gaXMgc3RpbGwgb3BlbicpO1xyXG4gICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ0Nhbm5vdCBjb25uZWN0IHRvIHNlcnZlcjogcHJldmlvdXMgY29ubmVjdGlvbiBpcyBzdGlsbCBvcGVuJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBvbk1lc3NhZ2UgPSAobXNnOiBJU3F1aW50TWVzc2FnZSkgPT4ge1xyXG4gICAgICAgICBpZiAoIXRoaXMuc3MuY29ubmVjdGVkKSB7XHJcbiAgICAgICAgICAgIGRlYnVnKCd3cy5vbk1lc3NhZ2UoKSBtZXNzYWdlIHJlY2VpdmVkLCBidXQgc29ja2V0IG5vdCBvcGVuJyk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIC8vIHByb2Nlc3MgdGhlIGltYWdlXHJcbiAgICAgICAgIHRoaXMucHJvY2Vzc01lc3NhZ2UobXNnKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGxldCBvbkltYWdlID0gKGJsb2I6IEJsb2IpID0+IHtcclxuICAgICAgICAgaWYgKCF0aGlzLnNzLmNvbm5lY3RlZCkge1xyXG4gICAgICAgICAgICBkZWJ1Zygnc3Mub25JbWFnZSgpIG1lc3NhZ2UgcmVjZWl2ZWQsIGJ1dCBzb2NrZXQgbm90IG9wZW4nKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgdGhpcy5fcmVtb3RlQ2FtZXJhUGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgIHRoaXMuX3JlbW90ZUNhbWVyYUNvbm5lY3RlZCA9IHRydWU7XHJcbiAgICAgICAgIHRoaXMuZW1pdChTcXVpbnRFdmVudC5JbWFnZSwgYmxvYik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBvbkNsb3NlID0gKGNvZGU6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICBjb25zdCBjb25uZWN0aW9uSWQgPSB0aGlzLnNzLmNvbm5lY3Rpb25JZDtcclxuICAgICAgICAgaWYgKGNvZGUgPT09IFNxdWludFNvY2tldC5DTE9TRV9DT0RFX05PUk1BTCkge1xyXG4gICAgICAgICAgICB0aGlzLnNzID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5lbWl0KFNxdWludEV2ZW50LkNsb3NlKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBlbHNlIGlmIChjb2RlID09PSBTcXVpbnQuQ0xPU0VfQ09ERV9GQUlMX05PX1JFQ09OTkVDVCkge1xyXG4gICAgICAgICAgICB0aGlzLnNzID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5lbWl0KFNxdWludEV2ZW50LkNsb3NlKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcyArICcgV2ViU29ja2V0IGNsb3NlZCB3aXRoIGNvZGU6ICcgKyBjb2RlICsgJywgdHJ5aW5nIHRvIHJlY29ubmVjdCcpO1xyXG4gICAgICAgICAgICB0aGlzLnRyeVRvUmVjb25uZWN0KGNvbm5lY3Rpb25JZCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIFNxdWludFNvY2tldC5jb25uZWN0KFxyXG4gICAgICAgICB0aGlzLl91cmwsXHJcbiAgICAgICAgIHRoaXMudXNlck5hbWUsXHJcbiAgICAgICAgIG9uTWVzc2FnZSxcclxuICAgICAgICAgb25JbWFnZSxcclxuICAgICAgICAgb25DbG9zZSxcclxuICAgICAgICAgKHNzKSA9PiB7IHRoaXMuc3MgPSBzczsgfSxcclxuICAgICAgICAgcmVjb25uZWN0SWQsXHJcbiAgICAgICkgYXMgdW5rbm93biBhcyBQcm9taXNlPHZvaWQ+O1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY2xvc2UoKTogdm9pZCB7XHJcbiAgICAgIGlmICghdGhpcy5jb25uZWN0ZWQpIHtcclxuICAgICAgICAgZGVidWcoJ1NxdWludC5jbG9zZSgpIGNhbGxlZCBidXQgbm8gY29ubmVjdGlvbiBleGlzdHMnKTtcclxuICAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBAdHMtaWdub3JlOiBjYW5ub3QgYmUgbnVsbCAtIHdlIGNoZWNrIGFib3ZlXHJcbiAgICAgIHRoaXMuc3MuY2xvc2UoKTtcclxuICAgICAgdGhpcy5zcyA9IG51bGw7XHJcblxyXG4gICAgICB0aGlzLmVtaXQoU3F1aW50RXZlbnQuQ2xvc2UpO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHNlbmQobXNnOiBJU3F1aW50TWVzc2FnZSkge1xyXG4gICAgICBpZiAoIXRoaXMuY29ubmVjdGVkKSB7XHJcbiAgICAgICAgIGRlYnVnKCdTcXVpbnQuc2VuZCgpIGNhbGxlZCwgYnV0IG5vdCBjb25uZWN0ZWQ6ICcgKyBKU09OLnN0cmluZ2lmeShtc2cpKTtcclxuICAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBAdHMtaWdub3JlOiBjYW5ub3QgYmUgbnVsbCAtIHdlIGNoZWNrIGFib3ZlXHJcbiAgICAgIHRoaXMuc3Muc2VuZChtc2cpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc2VuZEltYWdlKGJsb2I6IEJsb2IpOiB2b2lkIHtcclxuICAgICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkge1xyXG4gICAgICAgICBkZWJ1ZygnU3F1aW50LnNlbmRJbWFnZSgpIGNhbGxlZCwgYnV0IG5vdCBjb25uZWN0ZWQnKTtcclxuICAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5idWZmZXJSZWFkeSkge1xyXG4gICAgICAgICAvLyBAdHMtaWdub3JlOiBjYW5ub3QgYmUgbnVsbCAtIHdlIGNoZWNrIGFib3ZlXHJcbiAgICAgICAgIHRoaXMuc3Muc2VuZEltYWdlKGJsb2IpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICAvLyBAdHMtaWdub3JlOiBjYW5ub3QgYmUgbnVsbCAtIHdlIGNoZWNrIGFib3ZlXHJcbiAgICAgICAgIC8vIFRPRE8gZmlndXJlIG91dCB3aGF0IHRoaXMgaGFwcGVuc1xyXG4gICAgICAgICAvLyBjb25zb2xlLmVycm9yKCdTa2lwcGluZyB1cGxvYWQsIGJ1ZmZlciBub3QgZW1wdHk6ICcgKyB0aGlzLnNzLmJ1ZmZlcmVkQW1vdW50KTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgcmVxdWVzdE5leHRJbWFnZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zZW5kKHtcclxuICAgICAgICAgc3ViamVjdDogU3F1aW50TWVzc2FnZVN1YmplY3QuUmVhZHlGb3JOZXh0SW1hZ2UsXHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY3JlYXRlU2Vzc2lvbihwYXNzd29yZD86IHN0cmluZywgdGltZW91dE1zID0gNTAwMCk6IFByb21pc2U8c3RyaW5nPiB7XHJcblxyXG4gICAgICBpZiAocGFzc3dvcmQgJiYgcGFzc3dvcmQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICBwYXNzd29yZCA9IHVuZGVmaW5lZDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbFxyXG4gICAgICBsZXQgaWQgPSB1dWlkdjQoKTsgLy8g4oeoICc5YjFkZWI0ZC0zYjdkLTRiYWQtOWJkZC0yYjBkN2IzZGNiNmQnXHJcblxyXG4gICAgICB0aGlzLnNlbmQoe1xyXG4gICAgICAgICBzdWJqZWN0OiBTcXVpbnRNZXNzYWdlU3ViamVjdC5DcmVhdGVTZXNzaW9uLFxyXG4gICAgICAgICByZXF1ZXN0SWQ6IGlkLFxyXG4gICAgICAgICBwYXNzd29yZFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgdGhpcy5yZXF1ZXN0cy5wdXQoaWQsIHRpbWVvdXRNcywgcmVzb2x2ZSwgcmVqZWN0LCBTcXVpbnRTdHJpbmdzLkNBTk5PVF9DUkVBVEVfU0VTU0lPTl9fVElNRU9VVCk7XHJcbiAgICAgIH0pXHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBqb2luU2Vzc2lvbihzZXNzaW9uSWQ6IHN0cmluZywgcGFzc3dvcmQ/OiBzdHJpbmcsIHRpbWVvdXRNcyA9IDUwMDApOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGxcclxuICAgICAgbGV0IGlkID0gdXVpZHY0KCk7IC8vIOKHqCAnOWIxZGViNGQtM2I3ZC00YmFkLTliZGQtMmIwZDdiM2RjYjZkJ1xyXG5cclxuICAgICAgdGhpcy5zZW5kKHtcclxuICAgICAgICAgc3ViamVjdDogU3F1aW50TWVzc2FnZVN1YmplY3QuSm9pblNlc3Npb24sXHJcbiAgICAgICAgIHJlcXVlc3RJZDogaWQsXHJcbiAgICAgICAgIHNlc3Npb25JZCxcclxuICAgICAgICAgcGFzc3dvcmQsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPGJvb2xlYW4+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgdGhpcy5yZXF1ZXN0cy5wdXQoaWQsIHRpbWVvdXRNcywgcmVzb2x2ZSwgcmVqZWN0LCBTcXVpbnRTdHJpbmdzLkNBTk5PVF9KT0lOX1NFU1NJT05fX1RJTUVPVVQpO1xyXG4gICAgICB9KVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHVwZGF0ZUNvbm5lY3Rpb25JbmZvKHVzZXJOYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgdGhpcy5fdXNlck5hbWUgPSB1c2VyTmFtZTtcclxuICAgICAgdGhpcy5zZW5kKHtcclxuICAgICAgICAgc3ViamVjdDogU3F1aW50TWVzc2FnZVN1YmplY3QuQ29ubmVjdGlvbkluZm9VcGRhdGUsXHJcbiAgICAgICAgIHVzZXJOYW1lOiB0aGlzLmNvbm5lY3Rpb25JbmZvLnVzZXJOYW1lLFxyXG4gICAgICAgICBjb25uZWN0aW9uSWQ6IHRoaXMuY29ubmVjdGlvbkluZm8uY29ubmVjdGlvbklkLFxyXG4gICAgICB9KVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc2VuZENoYXRNZXNzYWdlKG1zZzogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2VuZCh7XHJcbiAgICAgICAgIHN1YmplY3Q6IFNxdWludE1lc3NhZ2VTdWJqZWN0LkNoYXRNZXNzYWdlLFxyXG4gICAgICAgICBtZXNzYWdlOiBtc2csXHJcbiAgICAgICAgIGNvbm5lY3Rpb246IHRoaXMuY29ubmVjdGlvbkluZm8sXHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgbG9nKG1zZzogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgIGlmICh0aGlzLmNvbm5lY3RlZCkge1xyXG4gICAgICAgICB0aGlzLnNlbmQoe1xyXG4gICAgICAgICAgICBzdWJqZWN0OiBTcXVpbnRNZXNzYWdlU3ViamVjdC5Mb2csXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1zZyxcclxuICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIHNlbmRDYW1lcmFSZXF1ZXN0KHJlc29sdXRpb246IG51bWJlciwganBlZ1F1YWxpdHk6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICB0aGlzLnNlbmQoe1xyXG4gICAgICAgICBzdWJqZWN0OiBTcXVpbnRNZXNzYWdlU3ViamVjdC5DYW1lcmFSZXF1ZXN0LFxyXG4gICAgICAgICByZXNvbHV0aW9uLFxyXG4gICAgICAgICBqcGVnUXVhbGl0eSxcclxuICAgICAgfSlcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNhbWVyYVBhdXNlZCgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zZW5kKHtcclxuICAgICAgICAgc3ViamVjdDogU3F1aW50TWVzc2FnZVN1YmplY3QuQ2FtZXJhUGF1c2VkLFxyXG4gICAgICB9KVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgcmVxdWVzdFRvQmVIb3N0KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNlbmQoe1xyXG4gICAgICAgICBzdWJqZWN0OiBTcXVpbnRNZXNzYWdlU3ViamVjdC5Ib3N0Q2hhbmdlUmVxdWVzdFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIHJlc2V0IGZsYWdzXHJcbiAgICAgIHRoaXMuX3JlbW90ZUNhbWVyYUNvbm5lY3RlZCA9IHRydWU7XHJcbiAgICAgIHRoaXMuX3JlbW90ZUNhbWVyYVBhdXNlZCA9IGZhbHNlO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc3luY2hyb25pemVUaW1lcihpbmZvPzogSVRpbWVySW5mbyk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNlbmQoe1xyXG4gICAgICAgICBzdWJqZWN0OiBTcXVpbnRNZXNzYWdlU3ViamVjdC5TeW5jaHJvbml6ZVRpbWVyLFxyXG4gICAgICAgICBpbmZvLFxyXG4gICAgICB9KTtcclxuXHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzdGF0aWMgaW5zcGVjdCh1cmw6IHN0cmluZyk6IFByb21pc2U8SVNxdWludEluZm8+IHtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPElTcXVpbnRJbmZvPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgIGxldCB3cyA9IFdlYlNvY2tldEZhY3RvcnkuY3JlYXRlKHVybCk7XHJcblxyXG4gICAgICAgICB3cy5vbm9wZW4gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHdzLnNlbmQoJ2luc3BlY3QnKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgd3Mub25tZXNzYWdlID0gKG1zZykgPT4ge1xyXG4gICAgICAgICAgICB3cy5vbm9wZW4gPSBudWxsO1xyXG4gICAgICAgICAgICAvL3dzLm9uY2xvc2UgPSBudWxsO1xyXG4gICAgICAgICAgICB3cy5vbmVycm9yID0gbnVsbDtcclxuICAgICAgICAgICAgd3Mub25tZXNzYWdlID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZShtc2cuZGF0YSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgcmVqZWN0KCdJbnZhbGlkIGluc3BlY3QgcmVzcG9uc2U6ICcgKyBlcnIgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICdNZXNzYWdlOiAnICsgbXNnLmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIHdzLm9uY2xvc2UgPSAoZXZlbnQ6IENsb3NlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KCdXZWJTb2NrZXQgY2xvc2VkIHdpdGggY29kZSAnICsgZXZlbnQuY29kZSk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIHdzLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdCgnV2ViU29ja2V0IGVycm9yJyk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzdGF0aWMgZHVtcCh1cmw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgbGV0IHdzID0gV2ViU29ja2V0RmFjdG9yeS5jcmVhdGUodXJsKTtcclxuXHJcbiAgICAgICAgIHdzLm9ub3BlbiA9ICgpID0+IHtcclxuICAgICAgICAgICAgd3Muc2VuZCgnZHVtcCcpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICB3cy5vbm1lc3NhZ2UgPSAobXNnKSA9PiB7XHJcbiAgICAgICAgICAgIHdzLm9ub3BlbiA9IG51bGw7XHJcbiAgICAgICAgICAgIHdzLm9uY2xvc2UgPSBudWxsO1xyXG4gICAgICAgICAgICB3cy5vbmVycm9yID0gbnVsbDtcclxuICAgICAgICAgICAgd3Mub25tZXNzYWdlID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHJlc29sdmUobXNnLmRhdGEpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICB3cy5vbmNsb3NlID0gKGV2ZW50OiBDbG9zZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdCgnV2ViU29ja2V0IGNsb3NlZCB3aXRoIGNvZGUgJyArIGV2ZW50LmNvZGUpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICB3cy5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZWplY3QoJ1dlYlNvY2tldCBlcnJvcicpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc3RhdGljIGxvZyh1cmw6IHN0cmluZywgbXNnOiBzdHJpbmcpOiB2b2lkIHtcclxuXHJcbiAgICAgIGxldCB3cyA9IFdlYlNvY2tldEZhY3RvcnkuY3JlYXRlKHVybCk7XHJcblxyXG4gICAgICB3cy5vbm9wZW4gPSAoKSA9PiB7XHJcbiAgICAgICAgIHdzLnNlbmQoJ2xvZyAnICsgbXNnKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgaWYgKHRoaXMuc3MpIHtcclxuICAgICAgICAgcmV0dXJuICdbJyArIHRoaXMuc3MucmVhZHlTdGF0ZVN0ciArICddJztcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgcmV0dXJuICdbd2Vic29ja2V0PW51bGxdJztcclxuICAgICAgfVxyXG4gICB9XHJcbn0iLCJpbXBvcnQgJ3dlYnJ0Yy1hZGFwdGVyJztcclxuaW1wb3J0IHsgSUFwcCB9IGZyb20gJy4uLy4uL0lBcHAnO1xyXG5pbXBvcnQgeyBQb2ludGVyRXZlbnRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vR1VJL1BvaW50ZXJFdmVudEhhbmRsZXInO1xyXG5pbXBvcnQgeyBJVmlkZW9Db25zdHJhaW50LCBDYW1lcmEsIElNZWRpYVNldHRpbmdzUmFuZ2UsIElWaWRlb1RyYWNrQWR2YW5jZWRDYXBhYmlsaXRpZXMsIElWaWRlb1RyYWNrQWR2YW5jZWRTZXR0aW5ncywgQWR2YW5jZWRDb25zdHJhaW50TmFtZSwgSUFkdmFuY2VkQ29uc3RyYWludCwgQ2FtZXJhUm90YXRpb24gfSBmcm9tICcuL0NhbWVyYSc7XHJcbmltcG9ydCB7IFVwbG9hZGVyIH0gZnJvbSAnLi9VcGxvYWRlcic7XHJcbmltcG9ydCB7IFNsaWRlciB9IGZyb20gJy4uLy4uL0dVSS9TbGlkZXInO1xyXG5pbXBvcnQgeyBJQ3RybCB9IGZyb20gJy4uLy4uL0dVSS9JQ3RybCc7XHJcbmltcG9ydCB7IHRvU2l6ZVN0ciwgaXNNb2JpbGUsIGJhc2VVcmwgfSBmcm9tICcuLi8uLi9VdGlsL0dsb2JhbHMnO1xyXG5pbXBvcnQgeyBWZWMyIH0gZnJvbSAnLi4vLi4vVXRpbDNEL1ZlYyc7XHJcbmltcG9ydCB7IE1lbnViYXIsIFN1Yk1lbnUgfSBmcm9tICcuLi8uLi9HVUkvTWVudSc7XHJcbmltcG9ydCB7IENvbnNvbGVDYXB0dXJlIH0gZnJvbSAnLi4vLi4vVXRpbC9Db25zb2xlQ2FwdHVyZSc7XHJcbmltcG9ydCB7IFN0YXJ0RGlhbG9nIH0gZnJvbSAnLi9TdGFydERpYWxvZyc7XHJcbmltcG9ydCB7IFZlcnNpb24gfSBmcm9tICcuL1ZlcnNpb24nO1xyXG5pbXBvcnQgeyBTcXVpbnQgfSBmcm9tICcuL1NxdWludCc7XHJcbmltcG9ydCB7IFdlbGNvbWVEaWFsb2cgfSBmcm9tICcuL1dlbGNvbWVEaWFsb2cnO1xyXG5pbXBvcnQgeyBVc2VyTmFtZURpYWxvZyB9IGZyb20gJy4vVXNlck5hbWVEaWFsb2cnO1xyXG5pbXBvcnQgeyBHVUkgfSBmcm9tICcuLi8uLi9HVUkvR1VJJztcclxuaW1wb3J0IHsgQ2hhdFBhbmVsIH0gZnJvbSAnLi9DaGF0UGFuZWwnO1xyXG5pbXBvcnQgeyBCYW5kd2lkdGhUcmFja2VyIH0gZnJvbSAnLi9CYW5kd2lkdGhUcmFja2VyJztcclxuaW1wb3J0IHsgU3F1aW50RXZlbnQgfSBmcm9tICcuL1NxdWludEV2ZW50cyc7XHJcbmltcG9ydCBOb1NsZWVwIGZyb20gJ25vc2xlZXAuanMnO1xyXG5pbXBvcnQgeyBXZWJTb2NrZXRGYWN0b3J5IH0gZnJvbSAnLi9XZWJTb2NrZXRGYWN0b3J5JztcclxuaW1wb3J0IHsgSUNvbm5lY3Rpb25JbmZvQmFzaWMgfSBmcm9tICcuL1NxdWludE1lc3NhZ2UnO1xyXG5pbXBvcnQgeyBTdG9yYWdlV2l0aEV2ZW50cywgU3RvcmFnZUl0ZW0gfSBmcm9tICcuL1N0b3JhZ2VXaXRoRXZlbnRzJztcclxuaW1wb3J0IHsgU3F1aW50U3RyaW5ncyB9IGZyb20gJy4vU3F1aW50U3RyaW5ncyc7XHJcbmltcG9ydCB7IFBhc3N3b3JkRGlhbG9nIH0gZnJvbSAnLi9QYXNzd29yZERpYWxvZyc7XHJcbmltcG9ydCB7IEltYWdlQ2FudmFzIH0gZnJvbSAnLi9JbWFnZUNhbnZhcyc7XHJcbmltcG9ydCB7IExldmVsc1BhbmVsIH0gZnJvbSAnLi9MZXZlbHNQYW5lbCc7XHJcbmltcG9ydCB7IE1vZGVsVGltZXJQYW5lbCB9IGZyb20gJy4vTW9kZWxUaW1lclBhbmVsJztcclxuaW1wb3J0IHsgU291bmRzIH0gZnJvbSAnLi9Tb3VuZHMnO1xyXG5pbXBvcnQgeyBab29tUGFuZWwgfSBmcm9tICcuL1pvb21QYW5lbCc7XHJcblxyXG5XZWJTb2NrZXRGYWN0b3J5LmNyZWF0ZSA9ICh1cmw6IHN0cmluZykgPT4gbmV3IFdlYlNvY2tldCh1cmwpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRlYnVnKG1zZzogc3RyaW5nKTogdm9pZCB7XHJcbiAgIGNvbnNvbGUuZXJyb3IobXNnKTtcclxuICAgLy9hbGVydCgnZGVidWcgZXJyb3I6ICcgKyBtc2cpO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgSUNvbnN0cmFpbnRJdGVtIHtcclxuICAgY29uc3RyYWludDogQWR2YW5jZWRDb25zdHJhaW50TmFtZSxcclxuICAgbGFiZWw6IHN0cmluZyxcclxufVxyXG5cclxuaW50ZXJmYWNlIElQcmVmZXJyZWRDYW1lcmEge1xyXG4gICBkZXZpY2VJZDogc3RyaW5nLFxyXG4gICAvLyBjYXB0dXJlIGFyZWFcclxuICAgLy8gcm90YXRpb25cclxuICAgLy8gbWVnYXBpeGVsc1xyXG4gICAvLyBqcGVnXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTcXVpbnRBcHAgaW1wbGVtZW50cyBJQXBwIHtcclxuICAgcHJpdmF0ZSBkaXY6IEhUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkO1xyXG4gICBwcml2YXRlIHVzZXJOYW1lTWVudUl0ZW1EaXY6IEhUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkO1xyXG4gICBwcml2YXRlIGltZzogSFRNTEltYWdlRWxlbWVudCB8IHVuZGVmaW5lZDtcclxuICAgcHJpdmF0ZSBkaXJ0eSA9IHRydWU7XHJcbiAgIHByaXZhdGUgY2hhdFBhbmVsOiBDaGF0UGFuZWwgfCB1bmRlZmluZWQ7XHJcbiAgIHByaXZhdGUgbGV2ZWxzUGFuZWw6IExldmVsc1BhbmVsO1xyXG4gICBwcml2YXRlIG5vdGlmaWNhdGlvbkRpdjogSFRNTERpdkVsZW1lbnQgfCB1bmRlZmluZWQ7XHJcbiAgIHByaXZhdGUgY2FtZXJhTWVudTogU3ViTWVudSB8IHVuZGVmaW5lZDtcclxuICAgcHJpdmF0ZSByZW1vdGVDYW1lcmFNZW51OiBTdWJNZW51IHwgdW5kZWZpbmVkO1xyXG4gICBwcml2YXRlIHN0b3JhZ2UgPSBuZXcgU3RvcmFnZVdpdGhFdmVudHMoKTtcclxuXHJcbiAgIHByaXZhdGUgY2FtZXJhOiBDYW1lcmEgfCB1bmRlZmluZWQ7XHJcbiAgIHByaXZhdGUgY2FudmFzOiBJbWFnZUNhbnZhcztcclxuICAgcHJpdmF0ZSBvdmVybGF5Q2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgcHJpdmF0ZSBkZXNpcmVkOiBJVmlkZW9Db25zdHJhaW50ID0ge1xyXG4gICAgICBsYWJlbDogJycsXHJcbiAgICAgIHdpZHRoOiAwLFxyXG4gICAgICBoZWlnaHQ6IDAsXHJcbiAgICAgIGZyYW1lUmF0ZTogMCxcclxuICAgICAgZmFjaW5nTW9kZTogJycsXHJcbiAgICAgIGRldmljZUlkOiAnJyxcclxuICAgfTtcclxuICAgcHJpdmF0ZSB1cGxvYWRlcjogVXBsb2FkZXIgfCBudWxsID0gbnVsbDtcclxuICAgcHJpdmF0ZSBkb3dubG9hZFRyYWNrZXIgPSBuZXcgQmFuZHdpZHRoVHJhY2tlcigpO1xyXG5cclxuICAgcHJpdmF0ZSBqcGVnUXVhbGl0eTogU2xpZGVyIHwgdW5kZWZpbmVkO1xyXG4gICBwcml2YXRlIG1lZ2FQaXhlbHM6IFNsaWRlciB8IHVuZGVmaW5lZDtcclxuICAgcHJpdmF0ZSBjYW1lcmFDdHJsczogSUN0cmxbXSA9IFtdO1xyXG4gICBwcml2YXRlIHRpbWVyUGFuZWw6IE1vZGVsVGltZXJQYW5lbDtcclxuICAgcHJpdmF0ZSB6b29tUGFuZWw6IFpvb21QYW5lbDtcclxuXHJcblxyXG4gICBwcml2YXRlIGFkdmFuY2VkQ29uc3RyYWludHM6IElBZHZhbmNlZENvbnN0cmFpbnRbXSA9IFtdO1xyXG4gICBwcml2YXRlIGFkdmFuY2VkU3ViTWVudT86IFN1Yk1lbnU7XHJcblxyXG4gICBwcml2YXRlIHNxdWludCA9IG5ldyBTcXVpbnQoKTtcclxuXHJcbiAgIHByaXZhdGUgc3RhcnREaWFsb2c6IFN0YXJ0RGlhbG9nIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgcHJpdmF0ZSBjb25zb2xlOiBDb25zb2xlQ2FwdHVyZTtcclxuXHJcbiAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnQsIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbFxyXG4gICBwcml2YXRlIG5vU2xlZXAgPSBuZXcgTm9TbGVlcCgpO1xyXG5cclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGwsIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xyXG4gICAgICB0aGlzLm5vU2xlZXAuZW5hYmxlKCk7XHJcblxyXG4gICAgICBkb2N1bWVudC50aXRsZSArPSAoJyAnICsgVmVyc2lvbi5CdWlsZCk7XHJcblxyXG4gICAgICAvL2xvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFN0b3JhZ2VJdGVtLlVzZXJOYW1lKTsgLy8gc2ltdWxhdGVzIHN0YXJ0aW5nIHVwIHRoZSBmaXJzdCB0aW1lXHJcblxyXG4gICAgICB0aGlzLnNxdWludC5vbih7XHJcbiAgICAgICAgIGV2ZW50OiBTcXVpbnRFdmVudC5JbWFnZSxcclxuICAgICAgICAgaGFuZGxlcjogKChibG9iOiBCbG9iKSA9PiB7IHRoaXMub25Eb3dubG9hZChibG9iKTsgfSlcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLnNxdWludC5vbih7XHJcbiAgICAgICAgIGV2ZW50OiBTcXVpbnRFdmVudC5DbG9zZSxcclxuICAgICAgICAgaGFuZGxlcjogKCgpID0+IHsgdGhpcy5jbG9zZUNvbm5lY3Rpb24oKTsgfSlcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLnNxdWludC5vbih7XHJcbiAgICAgICAgIGV2ZW50OiBTcXVpbnRFdmVudC5DaGF0TWVzc2FnZSxcclxuICAgICAgICAgaGFuZGxlcjogKChjb25uZWN0aW9uLCBtc2cpID0+IHsgdGhpcy5vbkNoYXRNZXNzYWdlKGNvbm5lY3Rpb24sIG1zZyk7IH0pXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5zcXVpbnQub24oe1xyXG4gICAgICAgICBldmVudDogU3F1aW50RXZlbnQuUmVjb25uZWN0aW5nLFxyXG4gICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjb25uZWN0aW9uIGxvc3QsIHJlY29ubmVjdGluZy4uLicpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dOb3RpZmljYXRpb24oJ0Nvbm5lY3Rpb24gbG9zdCwgcmVjb25uZWN0aW5nJyk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5zcXVpbnQub24oe1xyXG4gICAgICAgICBldmVudDogU3F1aW50RXZlbnQuUmVjb25uZWN0ZWQsXHJcbiAgICAgICAgIGhhbmRsZXI6IChzdWNjZXNzOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZWNvbm5lY3RlZDogc3VjY2Vzcz0nICsgc3VjY2Vzcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc3VjY2VzcyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgdGhpcy5zaG93Tm90aWZpY2F0aW9uKCdDb3VsZCBub3QgcmVjb25uZWN0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgIHRoaXMuc2hvd05vdGlmaWNhdGlvbignUmVjb25uZWN0ZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuc3F1aW50Lm9uKHtcclxuICAgICAgICAgZXZlbnQ6IFNxdWludEV2ZW50LkNhbWVyYVJlcXVlc3QsXHJcbiAgICAgICAgIGhhbmRsZXI6IChtZWdhUGl4ZWxzOiBudW1iZXIsIGpwZWdRdWFsaXR5OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tZWdhUGl4ZWxzLnZhbHVlID0gbWVnYVBpeGVsc1xyXG4gICAgICAgICAgICB0aGlzLmpwZWdRdWFsaXR5LnZhbHVlID0ganBlZ1F1YWxpdHk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLnNxdWludC5vbih7XHJcbiAgICAgICAgIGV2ZW50OiBTcXVpbnRFdmVudC5Ib3N0RGlzY29ubmVjdGVkLFxyXG4gICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5zcXVpbnQub24oe1xyXG4gICAgICAgICBldmVudDogU3F1aW50RXZlbnQuSG9zdENoYW5nZWQsXHJcbiAgICAgICAgIGhhbmRsZXI6IChuZXdIb3N0Q29ubmVjdGlvbklkOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgLy8gVE9ETyBtYWtlIHN1cmUgd2UncmUgbm90IGNhbGxpbmcgdGhpbmdzIHR3aWNlXHJcbiAgICAgICAgICAgIGlmIChuZXdIb3N0Q29ubmVjdGlvbklkID09PSB0aGlzLnNxdWludC5jb25uZWN0aW9uSWQpIHtcclxuICAgICAgICAgICAgICAgdGhpcy5lbmFibGVWaWRlbyh0cnVlKTtcclxuICAgICAgICAgICAgICAgdGhpcy5zdGFydFVwbG9hZGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgIHRoaXMuc3RvcFVwbG9hZGVyKCk7XHJcbiAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlVmlkZW8oZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIHRoaXMuc3RvcmFnZS5vbihTdG9yYWdlSXRlbS5Vc2VyTmFtZSwgKHVzZXJOYW1lKSA9PiB7XHJcblxyXG4gICAgICAgICB0aGlzLnVzZXJOYW1lTWVudUl0ZW1EaXYuaW5uZXJUZXh0ID0gJ0hpICcgKyB1c2VyTmFtZTtcclxuICAgICAgICAgdGhpcy5zcXVpbnQudXNlck5hbWUgPSB1c2VyTmFtZTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZScpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudXBsb2FkZXIpIHtcclxuICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5yZXN1bWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmRvd25sb2FkVHJhY2tlci5yZXN1bWUoKTtcclxuICAgICAgICAgICAgdGhpcy5zcXVpbnQuc3luY2hyb25pemVUaW1lcigpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy51cGxvYWRlcikge1xyXG4gICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kb3dubG9hZFRyYWNrZXIucGF1c2UoKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcblxyXG4gICAgICAvLyBIb3cgZG8geW91IGtub3cgd2hlbiB0byBjbG9zZSB0aGUgc29ja2V0PyBwYWdlSGlkZSBvbiBzb21lIGJyb3dzZXJzIGFuZCBiZWZvcmV1bmxvYWQvdW5sb2FkIG9uXHJcbiAgICAgIC8vIG90aGVycy4gU2FmYXJpIHNlZW1zIG1vc3QgcHJvYmxlbWF0aWMgYXMgdGhlIGFjdHVhbCBTb2NrZXRDbG9zZSBvbmx5IHJhbmRvbWx5IG1ha2VzIGl0IGJhY2sgdG9cclxuICAgICAgLy8gdGhlIHNlcnZlciBzbyB0aGUgc2VydmVyIGRvZXNuJ3Qga25vdyBpdCBoYXMgYmVlbiBhIGdyYWNlZnVsbCBleGl0LlxyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZWhpZGUnLCAoKSA9PiB7XHJcbiAgICAgICAgIGlmICh0aGlzLnNxdWludC5jb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zcXVpbnQuY2xvc2UoKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsICgpID0+IHtcclxuICAgICAgICAgaWYgKHRoaXMuc3F1aW50LmNvbm5lY3RlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNxdWludC5jbG9zZSgpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2VzaG93JywgKCkgPT4ge1xyXG4gICAgICAgICBpZiAodGhpcy5zcXVpbnQuY29ubmVjdGVkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BVcGxvYWRlcigpO1xyXG4gICAgICAgICAgICB0aGlzLmVuYWJsZVZpZGVvKGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5zdGFydERpYWxvZy52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICAvLyBUT0RPIHJlbW92ZVxyXG4gICAgICAgICBjb25zb2xlLmxvZygncGFnZXNob3cnKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc3VtZScsICgpID0+IHtcclxuICAgICAgICAgaWYgKHRoaXMuc3F1aW50LmNvbm5lY3RlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wVXBsb2FkZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVWaWRlbyhmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnREaWFsb2cudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VtZScpO1xyXG4gICAgICB9KTtcclxuICAgICAgLypcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2VzaG93JywgKCkgPT4ge1xyXG4gICAgICAgICBjb25zb2xlLmxvZygncGFnZXNob3cnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmcmVlemUnLCAoKSA9PiB7XHJcbiAgICAgICAgIGNvbnNvbGUubG9nKCdmcmVlemUnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdyZXN1bWUnLCAoKSA9PiB7XHJcbiAgICAgICAgIGNvbnNvbGUubG9nKCdyZXN1bWUnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgKCkgPT4ge1xyXG4gICAgICAgICBjb25zb2xlLmxvZygnYmVmb3JldW5sb2FkJyk7XHJcbiAgICAgIH0pO1xyXG4gICBcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2VoaWRlJywgKCkgPT4ge1xyXG4gICAgICAgICBjb25zb2xlLmxvZygncGFnZWhpZGUnKTtcclxuICAgICAgfSk7XHJcbiAgIFxyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgKCkgPT4ge1xyXG4gICAgICAgICBjb25zb2xlLmxvZygndW5sb2FkJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgICAqL1xyXG5cclxuICAgfVxyXG5cclxuICAgcHVibGljIGNyZWF0ZShkaXY6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XHJcblxyXG4gICAgICBkaXYuaWQgPSAnU3F1aW50QXBwJztcclxuXHJcbiAgICAgIGxldCBvbkpvaW5TZXNzaW9uID0gKHNlc3Npb25JZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgIHRoaXMuam9pbihzZXNzaW9uSWQpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgbGV0IG9uU3RhcnRTZXNzaW9uID0gKHBhc3N3b3JkOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgdGhpcy5zcXVpbnQuY3JlYXRlU2Vzc2lvbihwYXNzd29yZClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICB0aGlzLmVuYWJsZVZpZGVvKHRydWUpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICBhbGVydChlcnIpO1xyXG4gICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGlhbG9nLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5zdGFydERpYWxvZyA9IG5ldyBTdGFydERpYWxvZyhcclxuICAgICAgICAgZGl2LFxyXG4gICAgICAgICB0aGlzLnNxdWludCxcclxuICAgICAgICAgb25Kb2luU2Vzc2lvbixcclxuICAgICAgICAgb25TdGFydFNlc3Npb24sXHJcbiAgICAgICAgIHRoaXMuc3RvcmFnZVxyXG4gICAgICApO1xyXG5cclxuICAgICAgdGhpcy5kaXYgPSBHVUkuY3JlYXRlKCdkaXYnLCAnQm9keURpdicsIGRpdik7XHJcblxyXG4gICAgICB0aGlzLmNvbnNvbGUgPSBuZXcgQ29uc29sZUNhcHR1cmUodGhpcy5kaXYpO1xyXG4gICAgICB0aGlzLmNvbnNvbGUub25NZXNzYWdlID0gKG1zZzogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgIHRoaXMuc3F1aW50LmxvZyhtc2cpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmNhbnZhcyA9IG5ldyBJbWFnZUNhbnZhcyh0aGlzLmRpdiwgJ0NhbnZhcycpO1xyXG4gICAgICB0aGlzLm92ZXJsYXlDYW52YXMgPSBHVUkuY3JlYXRlKCdjYW52YXMnLCAnT3ZlcmxheUNhbnZhcycsIHRoaXMuZGl2LCAnT3ZlcmxheScpO1xyXG5cclxuICAgICAgdGhpcy5jYW1lcmEgPSBuZXcgQ2FtZXJhKHRoaXMuZGl2KTtcclxuICAgICAgdGhpcy5jYW1lcmEudmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgdGhpcy5jYW1lcmEub25QYXVzZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgIHRoaXMuc3F1aW50LmNhbWVyYVBhdXNlZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc3F1aW50Lm9uKHtcclxuICAgICAgICAgZXZlbnQ6IFNxdWludEV2ZW50LkNhbWVyYVBhdXNlZCxcclxuICAgICAgICAgaGFuZGxlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMudGltZXJQYW5lbCA9IG5ldyBNb2RlbFRpbWVyUGFuZWwodGhpcy5zcXVpbnQubW9kZWxUaW1lciwgdGhpcy5kaXYpO1xyXG4gICAgICB0aGlzLnpvb21QYW5lbCA9IG5ldyBab29tUGFuZWwodGhpcy5kaXYpO1xyXG5cclxuICAgICAgdGhpcy56b29tUGFuZWwub25DaGFuZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgIGxldCBjaGFuZ2UgPSB0aGlzLnpvb21QYW5lbC56b29tIC8gdGhpcy5jYW52YXMuem9vbVxyXG4gICAgICAgICB0aGlzLmNhbnZhcy56b29tICo9IGNoYW5nZTtcclxuICAgICAgICAgdGhpcy5jYW52YXMueE9mZnNldCAqPSBjaGFuZ2U7XHJcbiAgICAgICAgIHRoaXMuY2FudmFzLnlPZmZzZXQgKj0gY2hhbmdlO1xyXG4gICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5jaGF0UGFuZWwgPSBuZXcgQ2hhdFBhbmVsKHRoaXMuc3F1aW50LCB0aGlzLmRpdik7XHJcbiAgICAgIGlmICh0aGlzLmNoYXRQYW5lbC5oYXNTYXZlZFNldHRpbmdzKSB7XHJcbiAgICAgICAgIHRoaXMuY2hhdFBhbmVsLnJlc3RvcmVTZXR0aW5ncygpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICBpZiAoaXNNb2JpbGUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhdFBhbmVsLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMubGV2ZWxzUGFuZWwgPSBuZXcgTGV2ZWxzUGFuZWwodGhpcy5kaXYpO1xyXG4gICAgICBpZiAodGhpcy5sZXZlbHNQYW5lbC5oYXNTYXZlZFNldHRpbmdzKSB7XHJcbiAgICAgICAgIHRoaXMubGV2ZWxzUGFuZWwucmVzdG9yZVNldHRpbmdzKCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5sZXZlbHNQYW5lbC5vbkNoYW5nZSA9ICgpID0+IHtcclxuICAgICAgICAgdGhpcy5jYW52YXMud2hpdGUgPSB0aGlzLmxldmVsc1BhbmVsLndoaXRlO1xyXG4gICAgICAgICB0aGlzLmNhbnZhcy5ibGFjayA9IHRoaXMubGV2ZWxzUGFuZWwuYmxhY2s7XHJcbiAgICAgICAgIHRoaXMuY2FudmFzLm1pZFB0ID0gdGhpcy5sZXZlbHNQYW5lbC5taWRQb2ludDtcclxuICAgICAgICAgdGhpcy5jYW52YXMubWlkVmFsdWUgPSB0aGlzLmxldmVsc1BhbmVsLm1pZFZhbHVlO1xyXG4gICAgICAgICB0aGlzLmNhbnZhcy5udW1MZXZlbHMgPSB0aGlzLmxldmVsc1BhbmVsLm51bUxldmVscztcclxuICAgICAgICAgdGhpcy5jYW52YXMuY2hyb21hID0gdGhpcy5sZXZlbHNQYW5lbC5jaHJvbWE7XHJcbiAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLm5vdGlmaWNhdGlvbkRpdiA9IEdVSS5jcmVhdGUoJ2RpdicsICdOb3RpZmljYXRpb25EaXYnLCB0aGlzLmRpdik7XHJcblxyXG4gICAgICBsZXQgaGFuZGxlciA9IG5ldyBQb2ludGVyRXZlbnRIYW5kbGVyKHRoaXMuY2FudmFzLmVsZW1lbnQpO1xyXG4gICAgICBoYW5kbGVyLm9uU2NhbGUgPSAoc2NhbGU6IG51bWJlciwgY2hhbmdlOiBudW1iZXIpID0+IHRoaXMub25TY2FsZShzY2FsZSwgY2hhbmdlKTtcclxuICAgICAgaGFuZGxlci5vblRyYW5zbGF0ZSA9IChkZWx0YTogVmVjMikgPT4gdGhpcy5vblRyYW5zbGF0ZShkZWx0YSk7XHJcbiAgICAgIGhhbmRsZXIub25EcmFnID0gKHBvczogVmVjMiwgZGVsdGE6IFZlYzIpID0+IHRoaXMub25EcmFnKHBvcywgZGVsdGEpO1xyXG5cclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHRoaXMudXBkYXRlU2l6ZXMoKSk7XHJcbiAgICAgIHRoaXMudXBkYXRlU2l6ZXMoKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLnN0b3JhZ2UuaGFzKFN0b3JhZ2VJdGVtLlVzZXJOYW1lKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgdGhpcy5zaG93V2VsY29tZURpYWxvZygpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICB0aGlzLnN0YXJ0RGlhbG9nLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZG9jdW1lbnQub25rZXlkb3duID0gKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcbiAgICAgICAgIGlmICh0aGlzLnNxdWludC5jb25uZWN0ZWQgJiYgZXZlbnQudGFyZ2V0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChldmVudC5rZXkpIHtcclxuXHJcbiAgICAgICAgICAgICAgIGNhc2UgJ3gnOlxyXG4gICAgICAgICAgICAgICAgICAvLyBzaW11bGF0ZSBraWxsaW5nIHRoZSBjb25uZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc3F1aW50LndzLmNsb3NlKDMwMDApO1xyXG4gICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgIGNhc2UgJzEnOlxyXG4gICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuYWx0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlQ2FtZXJhTWVudS5oaWRkZW4gPSAhdGhpcy5yZW1vdGVDYW1lcmFNZW51LmhpZGRlbjtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGtpY2sgb2ZmIHRoZSByZW5kZXJpbmcgbG9vcFxyXG4gICAgICB0aGlzLmRyYXdJbWcoKTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBqb2luKHNlc3Npb25JZDogc3RyaW5nLCBwYXNzd29yZD86IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNxdWludC5qb2luU2Vzc2lvbihzZXNzaW9uSWQsIHBhc3N3b3JkKVxyXG4gICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnREaWFsb2cudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICB9KVxyXG4gICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBpZiAocGFzc3dvcmQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICBhbGVydCgnSW5jb3JyZWN0IFBhc3N3b3JkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChlcnIgPT09IFNxdWludFN0cmluZ3MuQ0FOTk9UX0pPSU5fU0VTU0lPTl9fSU5WQUxJRF9QQVNTV09SRCkge1xyXG4gICAgICAgICAgICAgICBsZXQgZGxnOiBQYXNzd29yZERpYWxvZztcclxuICAgICAgICAgICAgICAgbGV0IG9rSGFuZGxlciA9IChwYXNzd29yZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuam9pbihzZXNzaW9uSWQsIHBhc3N3b3JkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIC8vIGRvIHRoaXMgbGFzdCBhcyBpdCBzdG9wcyBleGVjdXRpb24gb2YgdGhpcyBoYW5kbGVyIHdoZW4gY29udGVudCBcclxuICAgICAgICAgICAgICAgICAgLy8gaXMgcmVtb3ZlZCBmcm9tIHRoZSBET01cclxuICAgICAgICAgICAgICAgICAgZGxnLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBsZXQgY2FuY2VsSGFuZGxlciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgZGxnLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBkbGcgPSBuZXcgUGFzc3dvcmREaWFsb2codGhpcy5kaXYsIG9rSGFuZGxlciwgY2FuY2VsSGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgIGFsZXJ0KGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zdGFydERpYWxvZy52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgfSk7XHJcblxyXG4gICB9XHJcbiAgIHByaXZhdGUgc2hvd1dlbGNvbWVEaWFsb2coKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IHdlbGNvbWVEaWFsb2cgPSBuZXcgV2VsY29tZURpYWxvZyh0aGlzLmRpdiwgKHVzZXJOYW1lKSA9PiB7XHJcbiAgICAgICAgIHRoaXMuc3RvcmFnZS5zZXQoU3RvcmFnZUl0ZW0uVXNlck5hbWUsIHVzZXJOYW1lKTtcclxuICAgICAgICAgdGhpcy5zdGFydERpYWxvZy52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgfSk7XHJcbiAgICAgIHdlbGNvbWVEaWFsb2cudmlzaWJsZSA9IHRydWU7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBjbG9zZUNvbm5lY3Rpb24oKTogdm9pZCB7XHJcbiAgICAgIGlmICh0aGlzLnNxdWludC5jb25uZWN0ZWQpIHtcclxuICAgICAgICAgdGhpcy5zcXVpbnQuY2xvc2UoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5zdG9wVXBsb2FkZXIoKTtcclxuICAgICAgdGhpcy5lbmFibGVWaWRlbyhmYWxzZSk7XHJcbiAgICAgIHRoaXMuc3RhcnREaWFsb2cudmlzaWJsZSA9IHRydWU7XHJcblxyXG4gICAgICB0aGlzLmNhbnZhcy5jbGVhcigpO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHN0YXJ0U2Vzc2lvbigpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zdGFydFVwbG9hZGVyKCk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgc3RhcnRVcGxvYWRlcigpOiB2b2lkIHtcclxuICAgICAgaWYgKHRoaXMudXBsb2FkZXIgPT09IG51bGwpIHtcclxuICAgICAgICAgdGhpcy51cGxvYWRlciA9IG5ldyBVcGxvYWRlcihcclxuICAgICAgICAgICAgdGhpcy5zcXVpbnQsXHJcbiAgICAgICAgICAgICgpID0+IHRoaXMudGFrZVBpY3R1cmUoKVxyXG4gICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgc3RvcFVwbG9hZGVyKCk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy51cGxvYWRlcikge1xyXG4gICAgICAgICB0aGlzLnVwbG9hZGVyLnN0b3AoKTtcclxuICAgICAgICAgdGhpcy51cGxvYWRlciA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgcHJpdmF0ZSBlbmFibGVDYW1lcmFDdHJscyhmbGFnOiBib29sZWFuKSB7XHJcbiAgICAgIHRoaXMuY2FtZXJhTWVudS5lbmFibGVkID0gZmxhZztcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNhbWVyYUN0cmxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgIHRoaXMuY2FtZXJhQ3RybHNbaV0uZW5hYmxlZCA9IGZsYWc7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIGJ1aWxkTWVudShtZW51YmFyOiBNZW51YmFyKTogdm9pZCB7XHJcblxyXG4gICAgICBjb25zdCBvcHRpb25zTWVudSA9IG1lbnViYXIuYWRkU3ViTWVudSgnT3B0aW9ucycpO1xyXG5cclxuICAgICAgdGhpcy5jYW1lcmFNZW51ID0gb3B0aW9uc01lbnUuYWRkU3ViTWVudSgnQ2FtZXJhJyk7XHJcblxyXG4gICAgICAvLyBUT0RPIGp1c3QgZnVsbHkgZGlzYWJsZSBhbGwgdGhlIG1lbnUgaXRlbXMgaW5zdGVhZCBvZiB0aGUgbWVudSBpdHNlbGYuXHJcbiAgICAgIHRoaXMuY2FtZXJhTWVudS5lbmFibGVkID0gZmFsc2U7XHJcblxyXG4gICAgICBsZXQgcHJlZmVycmVkQ2FtZXJhOiBJUHJlZmVycmVkQ2FtZXJhID0ge1xyXG4gICAgICAgICBkZXZpY2VJZDogdW5kZWZpbmVkLFxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnN0b3JhZ2UuaGFzKFN0b3JhZ2VJdGVtLkNhbWVyYSkpIHtcclxuICAgICAgICAgcHJlZmVycmVkQ2FtZXJhID0gSlNPTi5wYXJzZSh0aGlzLnN0b3JhZ2UuZ2V0KFN0b3JhZ2VJdGVtLkNhbWVyYSkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgcHJlZmVycmVkRm91bmQgPSBmYWxzZTtcclxuICAgICAgQ2FtZXJhLmdldENhbWVyYXMoKGNvbnN0cmFpbnQsIGNhbWVyYUluZGV4LCBudW1DYW1lcmFzKSA9PiB7XHJcblxyXG4gICAgICAgICBsZXQgc2VsZWN0ZWQgPSBwcmVmZXJyZWRDYW1lcmEuZGV2aWNlSWQgJiYgY29uc3RyYWludC5kZXZpY2VJZCA9PT0gcHJlZmVycmVkQ2FtZXJhLmRldmljZUlkO1xyXG5cclxuICAgICAgICAgaWYgKHByZWZlcnJlZEZvdW5kID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgcHJlZmVycmVkRm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNhbWVyYUluZGV4ID09PSAobnVtQ2FtZXJhcyAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgIC8vIGlmIGEgcHJlZmVycmVkIGNhbWVyYSB3YXMgbm90IGZvdW5kIGFuZCB0aGlzIGlzIHRoZSBsYXN0IGVudHJ5LCBtYWtlIGl0IHRoZSBwcmVmZXJyZWQgb25lXHJcbiAgICAgICAgICAgICAgIHByZWZlcnJlZEZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGNvbnN0IHJhZGlvQnV0dG9uID0gdGhpcy5jYW1lcmFNZW51LmFkZFJhZGlvYnV0dG9uKFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgIGxhYmVsOiBjb25zdHJhaW50LmxhYmVsLFxyXG4gICAgICAgICAgICAgICBvbmNoZWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGVzaXJlZCA9IGNvbnN0cmFpbnQ7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlVmlkZW8odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgIGNoZWNrZWQ6IHNlbGVjdGVkLFxyXG4gICAgICAgICAgICAgICBncm91cDogJ0NhbWVyYXNHcm91cCcsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICBpZiAoc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5kZXNpcmVkID0gY29uc3RyYWludDtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgdGhpcy5jYW1lcmFDdHJscy5wdXNoKHJhZGlvQnV0dG9uKTtcclxuICAgICAgfSlcclxuXHJcbiAgICAgIHRoaXMuanBlZ1F1YWxpdHkgPSB0aGlzLmNhbWVyYU1lbnUuYWRkU2xpZGVyKHtcclxuICAgICAgICAgbGFiZWw6ICdKUGVnIFBob3RvIFF1YWxpdHknLFxyXG4gICAgICAgICBtaW46IDAuMSxcclxuICAgICAgICAgbWF4OiAxLFxyXG4gICAgICAgICB2YWx1ZTogMC41LFxyXG4gICAgICAgICBvbkdldFRleHQ6IChzbGlkZXIpID0+ICgxMDAgKiBzbGlkZXIudmFsdWUpLnRvRml4ZWQoKSArICclJyxcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuY2FtZXJhQ3RybHMucHVzaCh0aGlzLmpwZWdRdWFsaXR5KTtcclxuXHJcbiAgICAgIHRoaXMubWVnYVBpeGVscyA9IHRoaXMuY2FtZXJhTWVudS5hZGRTbGlkZXIoe1xyXG4gICAgICAgICBsYWJlbDogJ0NhbWVyYSBNZWdhLVBpeGVscycsXHJcbiAgICAgICAgIG1pbjogMC4yNSxcclxuICAgICAgICAgbWF4OiA1LFxyXG4gICAgICAgICB2YWx1ZTogMS4yNSxcclxuICAgICAgICAgb25HZXRUZXh0OiAoc2xpZGVyKSA9PiBzbGlkZXIudmFsdWUudG9GaXhlZCgyKSxcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuY2FtZXJhQ3RybHMucHVzaCh0aGlzLm1lZ2FQaXhlbHMpO1xyXG5cclxuICAgICAgbGV0IHJvdGF0aW9uU3ViTWVudSA9IHRoaXMuY2FtZXJhTWVudS5hZGRTdWJNZW51KCdSb3RhdGlvbicpO1xyXG4gICAgICByb3RhdGlvblN1Yk1lbnUuYWRkUmFkaW9idXR0b24oe1xyXG4gICAgICAgICBsYWJlbDogJzDCsCcsXHJcbiAgICAgICAgIGdyb3VwOiAncm90YXRpb24nLFxyXG4gICAgICAgICBjaGVja2VkOiB0cnVlLFxyXG4gICAgICAgICBvbmNoZWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnJvdGF0aW9uID0gQ2FtZXJhUm90YXRpb24uREVHXzA7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHJvdGF0aW9uU3ViTWVudS5hZGRSYWRpb2J1dHRvbih7XHJcbiAgICAgICAgIGxhYmVsOiAnOTDCsCcsXHJcbiAgICAgICAgIGdyb3VwOiAncm90YXRpb24nLFxyXG4gICAgICAgICBjaGVja2VkOiBmYWxzZSxcclxuICAgICAgICAgb25jaGVjazogKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS5yb3RhdGlvbiA9IENhbWVyYVJvdGF0aW9uLkRFR185MDtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgcm90YXRpb25TdWJNZW51LmFkZFJhZGlvYnV0dG9uKHtcclxuICAgICAgICAgbGFiZWw6ICcxODDCsCcsXHJcbiAgICAgICAgIGdyb3VwOiAncm90YXRpb24nLFxyXG4gICAgICAgICBjaGVja2VkOiBmYWxzZSxcclxuICAgICAgICAgb25jaGVjazogKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS5yb3RhdGlvbiA9IENhbWVyYVJvdGF0aW9uLkRFR18xODA7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHJvdGF0aW9uU3ViTWVudS5hZGRSYWRpb2J1dHRvbih7XHJcbiAgICAgICAgIGxhYmVsOiAnMjcwwrAnLFxyXG4gICAgICAgICBncm91cDogJ3JvdGF0aW9uJyxcclxuICAgICAgICAgY2hlY2tlZDogZmFsc2UsXHJcbiAgICAgICAgIG9uY2hlY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmEucm90YXRpb24gPSBDYW1lcmFSb3RhdGlvbi5ERUdfMjcwO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIHRoaXMuYWR2YW5jZWRTdWJNZW51ID0gdGhpcy5jYW1lcmFNZW51LmFkZFN1Yk1lbnUoJ0FkdmFuY2VkJyk7XHJcblxyXG4gICAgICB0aGlzLmVuYWJsZUNhbWVyYUN0cmxzKGZhbHNlKTtcclxuXHJcbiAgICAgIGNvbnN0IHNlc3Npb25NZW51ID0gbWVudWJhci5hZGRTdWJNZW51KCdTZXNzaW9uJyk7XHJcblxyXG4gICAgICBzZXNzaW9uTWVudS5hZGRJdGVtKCdFeGl0JywgKCkgPT4ge1xyXG4gICAgICAgICB0aGlzLmNsb3NlQ29ubmVjdGlvbigpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHNlc3Npb25NZW51LmFkZEl0ZW0oJ01ha2UgbWUgSG9zdCcsICgpID0+IHtcclxuICAgICAgICAgdGhpcy5zcXVpbnQucmVxdWVzdFRvQmVIb3N0KCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgc2Vzc2lvbk1lbnUuYWRkQ2hlY2tib3goe1xyXG4gICAgICAgICBsYWJlbDogJ0xvZ3MnLFxyXG4gICAgICAgICBvbmNoZWNrOiAoY2hlY2tib3gpID0+IHsgdGhpcy5jb25zb2xlLnZpc2libGUgPSBjaGVja2JveC5jaGVja2VkIH0sXHJcbiAgICAgICAgIGNoZWNrZWQ6ICgpID0+IHsgcmV0dXJuIHRoaXMuY29uc29sZS52aXNpYmxlOyB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3Qgc291bmRNZW51ID0gb3B0aW9uc01lbnUuYWRkU3ViTWVudSgnU291bmRzJyk7XHJcbiAgICAgIGZvciAobGV0IHNvdW5kU3RyIGluIFNvdW5kcykge1xyXG4gICAgICAgICBjb25zdCBzb3VuZDogU291bmRzID0gU291bmRzW3NvdW5kU3RyIGFzIGtleW9mIHR5cGVvZiBTb3VuZHNdO1xyXG4gICAgICAgICBzb3VuZE1lbnUuYWRkUmFkaW9idXR0b24oe1xyXG4gICAgICAgICAgICBsYWJlbDogc291bmRTdHIucmVwbGFjZSgnXycsICcgJyksXHJcbiAgICAgICAgICAgIGdyb3VwOiAnU291bmRzJyxcclxuICAgICAgICAgICAgY2hlY2tlZDogdGhpcy50aW1lclBhbmVsLnNvdW5kID09PSBzb3VuZCxcclxuICAgICAgICAgICAgb25jaGVjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICB0aGlzLnRpbWVyUGFuZWwuc291bmQgPSBzb3VuZDtcclxuICAgICAgICAgICAgICAgdGhpcy50aW1lclBhbmVsLnRlc3RTb3VuZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgICB0aGlzLnJlbW90ZUNhbWVyYU1lbnUgPSBtZW51YmFyLmFkZFN1Yk1lbnUoJ1JlbW90ZSBDYW1lcmEnKTtcclxuICAgICAgdGhpcy5yZW1vdGVDYW1lcmFNZW51LmhpZGRlbiA9IHRydWU7XHJcbiAgICAgIGNvbnN0IHJlbW90ZUpwZWdRdWFsaXR5ID0gdGhpcy5yZW1vdGVDYW1lcmFNZW51LmFkZFNsaWRlcih7XHJcbiAgICAgICAgIGxhYmVsOiAnSlBlZyBQaG90byBRdWFsaXR5JyxcclxuICAgICAgICAgbWluOiAwLjEsXHJcbiAgICAgICAgIG1heDogMSxcclxuICAgICAgICAgdmFsdWU6IDAuNSxcclxuICAgICAgICAgb25HZXRUZXh0OiAoc2xpZGVyKSA9PiAoMTAwICogc2xpZGVyLnZhbHVlKS50b0ZpeGVkKCkgKyAnJScsXHJcbiAgICAgICAgIG9uaW5wdXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zcXVpbnQuc2VuZENhbWVyYVJlcXVlc3QocmVtb3RlTWVnYVBpeGVscy52YWx1ZSwgcmVtb3RlSnBlZ1F1YWxpdHkudmFsdWUpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVtb3RlTWVnYVBpeGVscyA9IHRoaXMucmVtb3RlQ2FtZXJhTWVudS5hZGRTbGlkZXIoe1xyXG4gICAgICAgICBsYWJlbDogJ0NhbWVyYSBNZWdhIFBpeGVscycsXHJcbiAgICAgICAgIG1pbjogdGhpcy5tZWdhUGl4ZWxzLm1pbixcclxuICAgICAgICAgbWF4OiB0aGlzLm1lZ2FQaXhlbHMubWF4LFxyXG4gICAgICAgICB2YWx1ZTogdGhpcy5tZWdhUGl4ZWxzLnZhbHVlLFxyXG4gICAgICAgICBvbkdldFRleHQ6IChzbGlkZXIpID0+IHNsaWRlci52YWx1ZS50b0ZpeGVkKDIpLFxyXG4gICAgICAgICBvbmlucHV0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3F1aW50LnNlbmRDYW1lcmFSZXF1ZXN0KHJlbW90ZU1lZ2FQaXhlbHMudmFsdWUsIHJlbW90ZUpwZWdRdWFsaXR5LnZhbHVlKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcblxyXG5cclxuICAgICAgbGV0IHRyYW5zcGFyZW50V2hpdGUgPSAncmdiYSgyNTUsMjU1LDI1NSwwLjUpJztcclxuICAgICAgbGV0IGNoYXRJbWcgPSBtZW51YmFyLmFkZEltYWdlKGJhc2VVcmwoKSArICdpbWcvY2hhdC5zdmcnLFxyXG4gICAgICAgICAoKSA9PiB7IHRoaXMuY2hhdFBhbmVsLnZpc2libGUgPSAhdGhpcy5jaGF0UGFuZWwudmlzaWJsZTsgfVxyXG4gICAgICApO1xyXG4gICAgICBjaGF0SW1nLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuY2hhdFBhbmVsLnZpc2libGUgPyB0cmFuc3BhcmVudFdoaXRlIDogJ3RyYW5zcGFyZW50JztcclxuICAgICAgdGhpcy5jaGF0UGFuZWwub25WaXNpYmxlID0gKHZpc2libGUpID0+IHtcclxuICAgICAgICAgY2hhdEltZy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB2aXNpYmxlID8gdHJhbnNwYXJlbnRXaGl0ZSA6ICd0cmFuc3BhcmVudCc7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IGxldmVsc0ltZyA9IG1lbnViYXIuYWRkSW1hZ2UoYmFzZVVybCgpICsgJ2ltZy9sZXZlbHMuc3ZnJyxcclxuICAgICAgICAgKCkgPT4geyB0aGlzLmxldmVsc1BhbmVsLnZpc2libGUgPSAhdGhpcy5sZXZlbHNQYW5lbC52aXNpYmxlOyB9XHJcbiAgICAgICk7XHJcbiAgICAgIGxldmVsc0ltZy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmxldmVsc1BhbmVsLnZpc2libGUgPyB0cmFuc3BhcmVudFdoaXRlIDogJ3RyYW5zcGFyZW50JztcclxuICAgICAgdGhpcy5sZXZlbHNQYW5lbC5vblZpc2libGUgPSAodmlzaWJsZSkgPT4ge1xyXG4gICAgICAgICBsZXZlbHNJbWcuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdmlzaWJsZSA/IHRyYW5zcGFyZW50V2hpdGUgOiAndHJhbnNwYXJlbnQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnVzZXJOYW1lTWVudUl0ZW1EaXYgPSBtZW51YmFyLmFkZEl0ZW0oXHJcbiAgICAgICAgICdIaSAnICsgKHRoaXMuc3RvcmFnZS5oYXMoU3RvcmFnZUl0ZW0uVXNlck5hbWUpID8gdGhpcy5zdG9yYWdlLmdldChTdG9yYWdlSXRlbS5Vc2VyTmFtZSkgOiAnJyksXHJcbiAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgbmV3IFVzZXJOYW1lRGlhbG9nKHRoaXMuZGl2LCB0aGlzLnN0b3JhZ2UpO1xyXG4gICAgICAgICB9KTtcclxuICAgICAgdGhpcy51c2VyTmFtZU1lbnVJdGVtRGl2LmlkID0gJ1VzZXJOYW1lSXRlbURpdic7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgb25Eb3dubG9hZChibG9iOiBCbG9iKSB7XHJcblxyXG4gICAgICBpZiAoIWJsb2IpIHtcclxuICAgICAgICAgZGVidWcoJ29uRG93bmxvYWQoKSBibG9iIGlzIG51bGwnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gbGV0IHRoZSBzZXJ2ZXIga25vdyB3ZSdyZSByZWFkeSBmb3IgdGhlIG5leHQgZG93bmxvYWRcclxuICAgICAgdGhpcy5zcXVpbnQucmVxdWVzdE5leHRJbWFnZSgpO1xyXG4gICAgICB0aGlzLmRyYXdCbG9iKGJsb2IpO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGRyYXdCbG9iKGJsb2I6IEJsb2IpIHtcclxuICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcblxyXG4gICAgICBpbWcuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgLy8gVE9ETyBob3cgZG8gd2Uga25vdyB0aGF0IHRoaXMgY29ubmVjdGlvbiBpcyB0aGUgc2FtZSBhcyB0aGUgb25lIHRoYXRcclxuICAgICAgICAgLy8gaW5pdGlhdGVkIHRoZSByZXF1ZXN0P1xyXG4gICAgICAgICBpZiAodGhpcy5zcXVpbnQuY29ubmVjdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW1nID0gaW1nO1xyXG4gICAgICAgICAgICB0aGlzLmRvd25sb2FkVHJhY2tlci50aWNrKGJsb2Iuc2l6ZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChpbWcuc3JjKTtcclxuICAgICAgfVxyXG4gICAgICBpbWcub25lcnJvciA9IChyZWFzb24pID0+IHtcclxuICAgICAgICAgYWxlcnQoJ0Nhbm5vdCBsb2FkIGltYWdlOiAnICsgcmVhc29uKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGJ1aWxkQWR2YW5jZWRTdWJNZW51KHRyYWNrOiBNZWRpYVN0cmVhbVRyYWNrKSB7XHJcbiAgICAgIHRoaXMuYWR2YW5jZWRTdWJNZW51LmNsZWFyKCk7XHJcblxyXG4gICAgICB0aGlzLmFkdmFuY2VkU3ViTWVudS5hZGRJdGVtKCdDYW1lcmEgQ2FwYWJpbGl0aWVzLi4uJywgKCkgPT4ge1xyXG4gICAgICAgICBjb25zdCBjYXBhYmlsaXRpZXMgPSB0aGlzLmNhbWVyYS5nZXRDYXBhYmlsaXRpZXMoKTtcclxuICAgICAgICAgbGV0IG1zZyA9ICdDYW1lcmEgQ2FwYWJpbGl0aWVzOlxcbic7XHJcbiAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGNhcGFiaWxpdGllcykge1xyXG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnZGV2aWNlSWQnIHx8IGtleSA9PT0gJ2dyb3VwSWQnKSB7XHJcbiAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1zZyArPSBDYW1lcmEuY2FwYWJpbGl0eVRvU3RyaW5nKGNhcGFiaWxpdGllcywga2V5KSArICdcXG4nO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGFsZXJ0KG1zZyk7XHJcbiAgICAgIH0pXHJcblxyXG5cclxuXHJcbiAgICAgIHRoaXMuYWR2YW5jZWRDb25zdHJhaW50cyA9IFtdO1xyXG5cclxuICAgICAgLy8gZ2V0Q2FwYWJpbGl0aWVzKCkgbm90IHN1cHBvcnRlZCBvbiBGaXJlZm94XHJcbiAgICAgIGlmICh0cmFjay5nZXRDYXBhYmlsaXRpZXMpIHtcclxuICAgICAgICAgY29uc3QgY2FwYWJpbGl0aWVzID0gdHJhY2suZ2V0Q2FwYWJpbGl0aWVzKCkgYXMgSVZpZGVvVHJhY2tBZHZhbmNlZENhcGFiaWxpdGllcztcclxuICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0cmFjay5nZXRTZXR0aW5ncygpIGFzIElWaWRlb1RyYWNrQWR2YW5jZWRTZXR0aW5ncztcclxuXHJcbiAgICAgICAgIGNvbnN0IHdoaXRlQmFsYW5jZU1vZGU6IElDb25zdHJhaW50SXRlbSA9IHtcclxuICAgICAgICAgICAgY29uc3RyYWludDogJ3doaXRlQmFsYW5jZU1vZGUnLFxyXG4gICAgICAgICAgICBsYWJlbDogJ0F1dG8gV2hpdGUgQmxhbmNlJ1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGNvbnN0IGNvbG9yVGVtcGVyYXR1cmU6IElDb25zdHJhaW50SXRlbSA9IHtcclxuICAgICAgICAgICAgY29uc3RyYWludDogJ2NvbG9yVGVtcGVyYXR1cmUnLFxyXG4gICAgICAgICAgICBsYWJlbDogJ1RlbXBlcmF0dXJlJ1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGNvbnN0IGV4cG9zdXJlTW9kZTogSUNvbnN0cmFpbnRJdGVtID0ge1xyXG4gICAgICAgICAgICBjb25zdHJhaW50OiAnZXhwb3N1cmVNb2RlJyxcclxuICAgICAgICAgICAgbGFiZWw6ICdBdXRvIEV4cG9zdXJlJ1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGNvbnN0IGV4cG9zdXJlQ29tcGVuc2F0aW9uOiBJQ29uc3RyYWludEl0ZW0gPSB7XHJcbiAgICAgICAgICAgIGNvbnN0cmFpbnQ6ICdleHBvc3VyZUNvbXBlbnNhdGlvbicsXHJcbiAgICAgICAgICAgIGxhYmVsOiAnRi1TdG9wJ1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGNvbnN0IGV4cG9zdXJlVGltZTogSUNvbnN0cmFpbnRJdGVtID0ge1xyXG4gICAgICAgICAgICBjb25zdHJhaW50OiAnZXhwb3N1cmVUaW1lJyxcclxuICAgICAgICAgICAgbGFiZWw6ICdFeHBvc3VyZSdcclxuICAgICAgICAgfVxyXG4gICAgICAgICBjb25zdCBpc286IElDb25zdHJhaW50SXRlbSA9IHtcclxuICAgICAgICAgICAgY29uc3RyYWludDogJ2lzbycsXHJcbiAgICAgICAgICAgIGxhYmVsOiAnSVNPJ1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGNvbnN0IGZvY3VzTW9kZTogSUNvbnN0cmFpbnRJdGVtID0ge1xyXG4gICAgICAgICAgICBjb25zdHJhaW50OiAnZm9jdXNNb2RlJyxcclxuICAgICAgICAgICAgbGFiZWw6ICdBdXRvIEZvY3VzJ1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGNvbnN0IGZvY3VzRGlzdGFuY2U6IElDb25zdHJhaW50SXRlbSA9IHtcclxuICAgICAgICAgICAgY29uc3RyYWludDogJ2ZvY3VzRGlzdGFuY2UnLFxyXG4gICAgICAgICAgICBsYWJlbDogJ0ZvY3VzJ1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGNvbnN0IHpvb206IElDb25zdHJhaW50SXRlbSA9IHtcclxuICAgICAgICAgICAgY29uc3RyYWludDogJ3pvb20nLFxyXG4gICAgICAgICAgICBsYWJlbDogJ1pvb20nXHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGlmIChjYXBhYmlsaXRpZXMud2hpdGVCYWxhbmNlTW9kZSAmJiBjYXBhYmlsaXRpZXMuY29sb3JUZW1wZXJhdHVyZSkge1xyXG4gICAgICAgICAgICB0aGlzLmFkZEFkdmFuY2VkSXRlbXMoXHJcbiAgICAgICAgICAgICAgIHNldHRpbmdzLFxyXG4gICAgICAgICAgICAgICBjYXBhYmlsaXRpZXMsXHJcbiAgICAgICAgICAgICAgIHdoaXRlQmFsYW5jZU1vZGUsXHJcbiAgICAgICAgICAgICAgIFtjb2xvclRlbXBlcmF0dXJlXVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGNhcGFiaWxpdGllcy5leHBvc3VyZU1vZGUgJiZcclxuICAgICAgICAgICAgKGNhcGFiaWxpdGllcy5leHBvc3VyZUNvbXBlbnNhdGlvbiB8fCBjYXBhYmlsaXRpZXMuZXhwb3N1cmVUaW1lIHx8IGNhcGFiaWxpdGllcy5pc28pXHJcbiAgICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLmFkZEFkdmFuY2VkSXRlbXMoXHJcbiAgICAgICAgICAgICAgIHNldHRpbmdzLFxyXG4gICAgICAgICAgICAgICBjYXBhYmlsaXRpZXMsXHJcbiAgICAgICAgICAgICAgIGV4cG9zdXJlTW9kZSxcclxuICAgICAgICAgICAgICAgW2V4cG9zdXJlQ29tcGVuc2F0aW9uLCBleHBvc3VyZVRpbWUsIGlzb11cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgaWYgKGNhcGFiaWxpdGllcy5mb2N1c01vZGUgJiYgY2FwYWJpbGl0aWVzLmZvY3VzRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRBZHZhbmNlZEl0ZW1zKFxyXG4gICAgICAgICAgICAgICBzZXR0aW5ncyxcclxuICAgICAgICAgICAgICAgY2FwYWJpbGl0aWVzLFxyXG4gICAgICAgICAgICAgICBmb2N1c01vZGUsXHJcbiAgICAgICAgICAgICAgIFtmb2N1c0Rpc3RhbmNlXVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBpZiAoY2FwYWJpbGl0aWVzLnpvb20pIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRBZHZhbmNlZFNsaWRlcihzZXR0aW5ncywgY2FwYWJpbGl0aWVzLCB6b29tKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgYWRkQWR2YW5jZWRJdGVtcyhcclxuICAgICAgc2V0dGluZ3M6IElWaWRlb1RyYWNrQWR2YW5jZWRTZXR0aW5ncyxcclxuICAgICAgY2FwYWJpbGl0aWVzOiBJVmlkZW9UcmFja0FkdmFuY2VkQ2FwYWJpbGl0aWVzLFxyXG4gICAgICBjaGVja2JveFNldHVwOiBJQ29uc3RyYWludEl0ZW0sXHJcbiAgICAgIHNsaWRlclNldHVwczogSUNvbnN0cmFpbnRJdGVtW11cclxuICAgKSB7XHJcblxyXG4gICAgICBjb25zdCBzbGlkZXJzOiBTbGlkZXJbXSA9IFtdO1xyXG4gICAgICBjb25zdCBjaGVja2JveCA9IHRoaXMuYWR2YW5jZWRTdWJNZW51LmFkZENoZWNrYm94KHtcclxuICAgICAgICAgbGFiZWw6IGNoZWNrYm94U2V0dXAubGFiZWwsXHJcbiAgICAgICAgIG9uY2hlY2s6IChjaGVja2JveCkgPT4ge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNsaWRlciBvZiBzbGlkZXJzKSB7XHJcbiAgICAgICAgICAgICAgIHNsaWRlci5lbmFibGVkID0gIWNoZWNrYm94LmNoZWNrZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jYW1lcmEuYXBwbHlBZHZhbmNlZENvbnN0cmFpbnRzKHRoaXMuYWR2YW5jZWRDb25zdHJhaW50cyk7XHJcbiAgICAgICAgIH0sXHJcbiAgICAgICAgIGNoZWNrZWQ6IHNldHRpbmdzW2NoZWNrYm94U2V0dXAuY29uc3RyYWludF0gPT09ICdjb250aW51b3VzJyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLmFkdmFuY2VkQ29uc3RyYWludHMucHVzaCh7XHJcbiAgICAgICAgIGNvbnN0cmFpbnQ6IGNoZWNrYm94U2V0dXAuY29uc3RyYWludCxcclxuICAgICAgICAgdmFsdWU6ICgpID0+IHsgcmV0dXJuIGNoZWNrYm94LmNoZWNrZWQgPyAnY29udGludW91cycgOiAnbWFudWFsJzsgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBzbGlkZXJTZXR1cHMpIHtcclxuXHJcbiAgICAgICAgIGlmIChjYXBhYmlsaXRpZXNbaXRlbS5jb25zdHJhaW50XSkge1xyXG4gICAgICAgICAgICBjb25zdCBzbGlkZXIgPSB0aGlzLmFkZEFkdmFuY2VkU2xpZGVyKHNldHRpbmdzLCBjYXBhYmlsaXRpZXMsIGl0ZW0pO1xyXG4gICAgICAgICAgICBzbGlkZXIuZW5hYmxlZCA9ICFjaGVja2JveC5jaGVja2VkO1xyXG5cclxuICAgICAgICAgICAgc2xpZGVycy5wdXNoKHNsaWRlcik7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGFkZEFkdmFuY2VkU2xpZGVyKFxyXG4gICAgICBzZXR0aW5nczogSVZpZGVvVHJhY2tBZHZhbmNlZFNldHRpbmdzLFxyXG4gICAgICBjYXBhYmlsaXRpZXM6IElWaWRlb1RyYWNrQWR2YW5jZWRDYXBhYmlsaXRpZXMsXHJcbiAgICAgIGl0ZW06IElDb25zdHJhaW50SXRlbSxcclxuICAgKTogU2xpZGVyIHtcclxuXHJcbiAgICAgIGNvbnN0IHJhbmdlID0gY2FwYWJpbGl0aWVzW2l0ZW0uY29uc3RyYWludF0gYXMgSU1lZGlhU2V0dGluZ3NSYW5nZTtcclxuICAgICAgY29uc3Qgc2xpZGVyID0gdGhpcy5hZHZhbmNlZFN1Yk1lbnUuYWRkU2xpZGVyKHtcclxuICAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwsXHJcbiAgICAgICAgIG1pbjogcmFuZ2UubWluLFxyXG4gICAgICAgICBtYXg6IHJhbmdlLm1heCxcclxuICAgICAgICAgdmFsdWU6IHNldHRpbmdzW2l0ZW0uY29uc3RyYWludF0gYXMgbnVtYmVyLFxyXG4gICAgICAgICBvbkdldFRleHQ6IChzbGlkZXIpID0+IHsgcmV0dXJuIHNsaWRlci52YWx1ZS50b0ZpeGVkKCk7IH0sXHJcbiAgICAgICAgIG9uaW5wdXQ6ICgpID0+IHsgdGhpcy5jYW1lcmEuYXBwbHlBZHZhbmNlZENvbnN0cmFpbnRzKHRoaXMuYWR2YW5jZWRDb25zdHJhaW50cyk7IH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIHRoaXMuYWR2YW5jZWRDb25zdHJhaW50cy5wdXNoKHtcclxuICAgICAgICAgY29uc3RyYWludDogaXRlbS5jb25zdHJhaW50LFxyXG4gICAgICAgICB2YWx1ZTogKCkgPT4geyByZXR1cm4gc2xpZGVyLnZhbHVlOyB9XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gc2xpZGVyO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGVuYWJsZVZpZGVvKGVuYWJsZTogYm9vbGVhbikge1xyXG5cclxuICAgICAgLy8gc3RvcCB0aGUgbGFzdCB2aWRlb1xyXG4gICAgICB0aGlzLmNhbWVyYS5zdG9wKCk7XHJcblxyXG4gICAgICB0aGlzLmVuYWJsZUNhbWVyYUN0cmxzKGVuYWJsZSk7XHJcblxyXG4gICAgICBpZiAoZW5hYmxlKSB7XHJcbiAgICAgICAgIHRoaXMuY2FtZXJhLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICB0aGlzLmNhbWVyYS5zdGFydCh0aGlzLmRlc2lyZWQpXHJcbiAgICAgICAgICAgIC50aGVuKCh0cmFjazogTWVkaWFTdHJlYW1UcmFjaykgPT4ge1xyXG4gICAgICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRyYWNrLmdldFNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgIGNvbnN0IG1heE1QID0gc2V0dGluZ3Mud2lkdGggKiBzZXR0aW5ncy5oZWlnaHQgLyAxMDAwMDAwO1xyXG4gICAgICAgICAgICAgICB0aGlzLm1lZ2FQaXhlbHMubWF4ID0gbWF4TVA7XHJcblxyXG4gICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZGVvU2l6ZShzZXR0aW5ncy53aWR0aCwgc2V0dGluZ3MuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgICAgIHRoaXMuYnVpbGRBZHZhbmNlZFN1Yk1lbnUodHJhY2spO1xyXG4gICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZGVvU2l6ZSh0aGlzLmNhbWVyYS52aWRlb1dpZHRoLCB0aGlzLmNhbWVyYS52aWRlb0hlaWdodCk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBzYXZlIHRoZSBzZWxlY3RlZCBjYW1lcmFcclxuICAgICAgICAgICAgICAgbGV0IG9iajogSVByZWZlcnJlZENhbWVyYSA9IHtcclxuICAgICAgICAgICAgICAgICAgZGV2aWNlSWQ6IHRoaXMuY2FtZXJhLmRldmljZUlkLFxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5zZXQoU3RvcmFnZUl0ZW0uQ2FtZXJhLCBKU09OLnN0cmluZ2lmeShvYmopKTtcclxuXHJcbiAgICAgICAgICAgICAgIGlmICghdGhpcy51cGxvYWRlcikge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0U2Vzc2lvbigpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgocmVhc29uKSA9PiB7XHJcbiAgICAgICAgICAgICAgIGFsZXJ0KHJlYXNvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICB0aGlzLnN0b3BVcGxvYWRlcigpO1xyXG4gICAgICAgICB0aGlzLmNhbWVyYS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgIHRoaXMuYWR2YW5jZWRTdWJNZW51LmNsZWFyKCk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSB0YWtlUGljdHVyZSgpOiBQcm9taXNlPEJsb2I+IHtcclxuXHJcbiAgICAgIGlmICghdGhpcy5zcXVpbnQuY29ubmVjdGVkKSB7XHJcbiAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3Rha2VQaWN0dXJlKCkgYWZ0ZXIgY2xvc2UnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHRoaXMuY2FtZXJhLnRha2VQaWN0dXJlKHRoaXMubWVnYVBpeGVscy52YWx1ZSwgdGhpcy5qcGVnUXVhbGl0eS52YWx1ZSlcclxuICAgICAgICAgLnRoZW4oKGJsb2I6IEJsb2IpID0+IHtcclxuICAgICAgICAgICAgLy8gZHJhdyB3aGF0IHdhcyB1cGxvYWRlZCwgaS5lLiBzaW11bGF0ZSBhIGRvd25sb2FkXHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0Jsb2IoYmxvYik7XHJcbiAgICAgICAgICAgIHJldHVybiBibG9iO1xyXG4gICAgICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSB1cGRhdGVWaWRlb1NpemUodmlkZW9XaWR0aDogbnVtYmVyLCB2aWRlb0hlaWdodDogbnVtYmVyKSB7XHJcbiAgICAgIGlmICh0aGlzLmNhbWVyYS52aXNpYmxlKSB7XHJcbiAgICAgICAgIGNvbnN0IHZpZGVvU2l6ZSA9IE1hdGgubWF4KHRoaXMuY2FtZXJhLmNsaWVudFdpZHRoLCB0aGlzLmNhbWVyYS5jbGllbnRIZWlnaHQpO1xyXG4gICAgICAgICBpZiAodmlkZW9XaWR0aCA+IHZpZGVvSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLndpZHRoID0gdmlkZW9TaXplO1xyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS5oZWlnaHQgPSAodmlkZW9TaXplICogdmlkZW9IZWlnaHQgLyB2aWRlb1dpZHRoKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmEuaGVpZ2h0ID0gdmlkZW9TaXplO1xyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS53aWR0aCA9ICh2aWRlb1NpemUgKiB2aWRlb1dpZHRoIC8gdmlkZW9IZWlnaHQpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSB1cGRhdGVTaXplcygpIHtcclxuICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgIH1cclxuXHJcblxyXG5cclxuICAgcHJpdmF0ZSBkcmF3SW1nKCkge1xyXG5cclxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuZHJhd0ltZygpKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmRpcnR5ID09PSBmYWxzZSkge1xyXG4gICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdGhpcy5pbWcpIHtcclxuICAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmNhbnZhcy5kcmF3KHRoaXMuaW1nKTtcclxuXHJcblxyXG4gICAgICB0aGlzLm92ZXJsYXlDYW52YXMud2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aDtcclxuICAgICAgdGhpcy5vdmVybGF5Q2FudmFzLmhlaWdodCA9IHRoaXMuY2FudmFzLmhlaWdodDtcclxuICAgICAgY29uc3QgY3R4ID0gdGhpcy5vdmVybGF5Q2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgICBsZXQgbXNnOiBzdHJpbmc7XHJcblxyXG5cclxuICAgICAgY29uc3QgY2FudmFzV2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aDtcclxuICAgICAgY29uc3QgY2FudmFzSGVpZ2h0ID0gdGhpcy5jYW52YXMuaGVpZ2h0O1xyXG4gICAgICBjb25zdCBjYW52YXNBUiA9IGNhbnZhc1dpZHRoIC8gY2FudmFzSGVpZ2h0O1xyXG5cclxuICAgICAgY29uc3QgaW1nV2lkdGggPSB0aGlzLmltZy53aWR0aDtcclxuICAgICAgY29uc3QgaW1nSGVpZ2h0ID0gdGhpcy5pbWcuaGVpZ2h0O1xyXG4gICAgICBjb25zdCBpbWdBUiA9IGltZ1dpZHRoIC8gaW1nSGVpZ2h0O1xyXG5cclxuICAgICAgbGV0IHdpZHRoOiBudW1iZXI7XHJcbiAgICAgIGxldCBoZWlnaHQ6IG51bWJlcjtcclxuXHJcbiAgICAgIGlmIChjYW52YXNBUiA+IGltZ0FSKSB7XHJcbiAgICAgICAgIGhlaWdodCA9IHRoaXMuY2FudmFzLnpvb20gKiBjYW52YXNIZWlnaHQ7XHJcbiAgICAgICAgIHdpZHRoID0gaGVpZ2h0ICogaW1nQVI7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHdpZHRoID0gdGhpcy5jYW52YXMuem9vbSAqIGNhbnZhc1dpZHRoO1xyXG4gICAgICAgICBoZWlnaHQgPSB3aWR0aCAvIGltZ0FSO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQpO1xyXG5cclxuXHJcbiAgICAgIGNvbnN0IGZvbnRTaXplID0gaXNNb2JpbGUgPyAzMCA6IDE1O1xyXG4gICAgICBjdHguZmlsbFN0eWxlID0gJ2JsYWNrJztcclxuICAgICAgY3R4LmZvbnQgPSBmb250U2l6ZSArICdweCBzYW5zLXNlcmlmJztcclxuXHJcbiAgICAgIC8qXHJcbiAgICAgIC8vIHNxdWludCBzZXJ2ZXIgdXJsXHJcbiAgICAgIGN0eC50ZXh0QWxpZ24gPSAnbGVmdCc7XHJcbiAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAndG9wJztcclxuICAgICAgY3R4LmZpbGxUZXh0KFNxdWludC51cmwsIDUsIDUpO1xyXG4gICAgICAqL1xyXG5cclxuXHJcbiAgICAgIC8vIGxpc3RlbmVyc1xyXG4gICAgICBjdHgudGV4dEFsaWduID0gJ2xlZnQnO1xyXG4gICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ2JvdHRvbSc7XHJcbiAgICAgIGxldCBsaW5lSGVpZ2h0ID0gZm9udFNpemUgKyA1O1xyXG5cclxuICAgICAgbGV0IHkgPSBjYW52YXNIZWlnaHQgLSA1O1xyXG4gICAgICB0aGlzLmNoYXRQYW5lbC52aWV3ZXJzLmZvckVhY2goKHZpZXdlcjogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgIGN0eC5maWxsVGV4dCh2aWV3ZXIsIDUsIHkpO1xyXG4gICAgICAgICB5IC09IGxpbmVIZWlnaHQ7XHJcbiAgICAgIH0pXHJcbiAgICAgIGN0eC5maWxsVGV4dCh0aGlzLmNoYXRQYW5lbC52aWV3ZXJzLmxlbmd0aCArICcgdmlld2VyKHMpJywgNSwgeSk7XHJcblxyXG4gICAgICAvLyBzdGF0c1xyXG4gICAgICBjdHgudGV4dEFsaWduID0gJ3JpZ2h0JztcclxuICAgICAgY3R4LnRleHRCYXNlbGluZSA9ICdib3R0b20nO1xyXG5cclxuXHJcbiAgICAgIC8vIGltYWdlIHNpemVcclxuICAgICAgbXNnID0gaW1nV2lkdGggKyAneCcgKyBpbWdIZWlnaHQ7XHJcbiAgICAgIGN0eC5maWxsVGV4dChtc2csIGNhbnZhc1dpZHRoIC0gNSwgY2FudmFzSGVpZ2h0IC0gKDQgKiBmb250U2l6ZSArIDUpKTtcclxuXHJcbiAgICAgIC8vIGltYWdlIHNpemVcclxuICAgICAgY29uc3QgbXAgPSAoaW1nV2lkdGggKiBpbWdIZWlnaHQgLyAxMDAwMDAwKTtcclxuICAgICAgaWYgKG1wIDwgMS41KSB7XHJcbiAgICAgICAgIG1zZyA9IG1wLnRvRml4ZWQoMikgKyAnTVAnO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICBtc2cgPSBtcC50b0ZpeGVkKDEpICsgJ01QJztcclxuICAgICAgfVxyXG4gICAgICBjdHguZmlsbFRleHQobXNnLCBjYW52YXNXaWR0aCAtIDUsIGNhbnZhc0hlaWdodCAtICgzICogZm9udFNpemUgKyA1KSk7XHJcblxyXG4gICAgICBsZXQgZnBzOiBudW1iZXI7XHJcbiAgICAgIGxldCBiYW5kd2lkdGg6IG51bWJlcjtcclxuICAgICAgaWYgKHRoaXMudXBsb2FkZXIpIHtcclxuICAgICAgICAgYmFuZHdpZHRoID0gdGhpcy51cGxvYWRlci5tZWdhQml0c1BlclNlYztcclxuICAgICAgICAgZnBzID0gdGhpcy51cGxvYWRlci5mcHM7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIGJhbmR3aWR0aCA9IHRoaXMuZG93bmxvYWRUcmFja2VyLm1lZ2FCaXRzUGVyU2VjO1xyXG4gICAgICAgICBmcHMgPSB0aGlzLmRvd25sb2FkVHJhY2tlci5mcHM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEZQU1xyXG4gICAgICBtc2cgPSBmcHMudG9GaXhlZCgxKSArICcgZnBzJztcclxuICAgICAgY3R4LmZpbGxUZXh0KG1zZywgY2FudmFzV2lkdGggLSA1LCBjYW52YXNIZWlnaHQgLSAoMiAqIGZvbnRTaXplICsgNSkpO1xyXG5cclxuICAgICAgLy8gYmFuZHdpZHRoXHJcbiAgICAgIGlmIChiYW5kd2lkdGggPCA1KSB7XHJcbiAgICAgICAgIG1zZyA9IGJhbmR3aWR0aC50b0ZpeGVkKDIpICsgJyBNYnNwJztcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgbXNnID0gYmFuZHdpZHRoLnRvRml4ZWQoMSkgKyAnIE1ic3AnO1xyXG4gICAgICB9XHJcbiAgICAgIGN0eC5maWxsVGV4dChtc2csIGNhbnZhc1dpZHRoIC0gNSwgY2FudmFzSGVpZ2h0IC0gKGZvbnRTaXplICsgNSkpO1xyXG5cclxuICAgICAgLy8gYnl0ZXNcclxuICAgICAgbXNnID0gdG9TaXplU3RyKHRoaXMuZG93bmxvYWRUcmFja2VyLmxhc3RUcmFuc2ZlckJ5dGVzKTtcclxuICAgICAgY3R4LmZpbGxUZXh0KG1zZywgY2FudmFzV2lkdGggLSA1LCBjYW52YXNIZWlnaHQgLSA1KTtcclxuXHJcbiAgICAgIC8vIG1lc3NhZ2VzXHJcbiAgICAgIG1zZyA9ICcnO1xyXG4gICAgICBpZiAodGhpcy5zcXVpbnQucmVjb25uZWN0aW5nKSB7XHJcbiAgICAgICAgIG1zZyA9ICdSZWNvbm5lY3RpbmcuLi4nO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnNxdWludC5yZW1vdGVDYW1lcmFQYXVzZWQgfHwgdGhpcy5zcXVpbnQucmVtb3RlQ2FtZXJhQ29ubmVjdGVkID09PSBmYWxzZSkge1xyXG4gICAgICAgICBpZiAodGhpcy5zcXVpbnQucmVtb3RlQ2FtZXJhQ29ubmVjdGVkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBtc2cgPSAnQ2FtZXJhIERpc2Nvbm5lY3RlZCc7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG1zZyA9ICdDYW1lcmEgUGF1c2VkJztcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAobXNnLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSAwO1xyXG5cclxuICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsMCwwLDAuNSknO1xyXG4gICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XHJcblxyXG4gICAgICAgICBsZXQgZm9udFNpemUgPSAxMDtcclxuICAgICAgICAgY3R4LmZvbnQgPSBmb250U2l6ZSArICdweCBzYW5zLXNlcmlmJztcclxuXHJcbiAgICAgICAgIGNvbnN0IHRleHRNZXRyaWNzID0gY3R4Lm1lYXN1cmVUZXh0KG1zZyk7XHJcbiAgICAgICAgIGZvbnRTaXplICo9ICgwLjggKiBNYXRoLm1pbih3aWR0aCwgY2FudmFzV2lkdGgpIC8gdGV4dE1ldHJpY3Mud2lkdGgpO1xyXG4gICAgICAgICBjdHguZm9udCA9IGZvbnRTaXplICsgJ3B4IHNhbnMtc2VyaWYnO1xyXG5cclxuICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwyNTUsMjU1LDAuNSknO1xyXG4gICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcclxuICAgICAgICAgY3R4LmZpbGxUZXh0KG1zZywgY2FudmFzV2lkdGggLyAyLCBjYW52YXNIZWlnaHQgLyAyKTtcclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBvblNjYWxlKHNjYWxlOiBudW1iZXIsIGNoYW5nZTogbnVtYmVyKSB7XHJcblxyXG4gICAgICAvLyBUT0RPOiBjZW50ZXIgc2NhbGluZyBhYm91dCB5b3VyIHR3byBmaW5nZXJzXHJcblxyXG4gICAgICB0aGlzLmNhbnZhcy56b29tICo9IGNoYW5nZTtcclxuICAgICAgdGhpcy5jYW52YXMueE9mZnNldCAqPSBjaGFuZ2U7XHJcbiAgICAgIHRoaXMuY2FudmFzLnlPZmZzZXQgKj0gY2hhbmdlO1xyXG4gICAgICB0aGlzLnpvb21QYW5lbC56b29tID0gdGhpcy5jYW52YXMuem9vbTtcclxuXHJcbiAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIG9uVHJhbnNsYXRlKGRlbHRhOiBWZWMyKSB7XHJcblxyXG4gICAgICB0aGlzLmNhbnZhcy54T2Zmc2V0ICs9IGRlbHRhLng7XHJcbiAgICAgIHRoaXMuY2FudmFzLnlPZmZzZXQgKz0gZGVsdGEueTtcclxuXHJcbiAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIG9uRHJhZyhwb3M6IFZlYzIsIGRlbHRhOiBWZWMyKSB7XHJcbiAgICAgIC8vIFRPRE8gZGVsdGEgaXMgb3Bwb3NpdGUgb2YgdHJhbnNsYXRlIGluIFkgZGlyZWN0aW9uXHJcbiAgICAgIHRoaXMuY2FudmFzLnhPZmZzZXQgKz0gZGVsdGEueDtcclxuICAgICAgdGhpcy5jYW52YXMueU9mZnNldCAtPSBkZWx0YS55O1xyXG5cclxuICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgb25DaGF0TWVzc2FnZShjb25uZWN0aW9uOiBJQ29ubmVjdGlvbkluZm9CYXNpYywgbXNnOiBzdHJpbmcpIHtcclxuICAgICAgdGhpcy5zaG93Tm90aWZpY2F0aW9uKCc8Yj4nICsgY29ubmVjdGlvbi51c2VyTmFtZSArICc8L2I+OiAnICsgbXNnKTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBzaG93Tm90aWZpY2F0aW9uKGh0bWw6IHN0cmluZykge1xyXG4gICAgICB0aGlzLm5vdGlmaWNhdGlvbkRpdi5pbm5lckhUTUwgPSBodG1sO1xyXG5cclxuICAgICAgLy8gZm9yY2UgdGhlIGFuaW1hdGlvbiB0byBydW4gYnkgcmVtb3ZpbmcgYW5kIGFkZGluZyB0aGUgZWxlbWVudFxyXG4gICAgICB0aGlzLmRpdi5yZW1vdmVDaGlsZCh0aGlzLm5vdGlmaWNhdGlvbkRpdik7XHJcbiAgICAgIHRoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMubm90aWZpY2F0aW9uRGl2KTtcclxuICAgfVxyXG59XHJcbiIsImltcG9ydCB7IElUaW1lckluZm8gfSBmcm9tICcuL0lUaW1lckluZm8nO1xyXG5pbXBvcnQgeyBJQ29ubmVjdGlvbkluZm9CYXNpYywgSVNlc3Npb25JbmZvQmFzaWMsIElTZXNzaW9uSW5mb0Z1bGwgfSBmcm9tICcuL1NxdWludE1lc3NhZ2UnO1xyXG5cclxuZXhwb3J0IHR5cGUgQ2FtZXJhUGF1c2VIYW5kbGVyID0gKCkgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgQ2FtZXJhUmVxdWVzdEhhbmRsZXIgPSAobWVnYVBpeGVsczogbnVtYmVyLCBqcGVnUXVhbGl0eTogbnVtYmVyKSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBDaGF0TWVzc2FnZUhhbmRsZXIgPSAoc291cmNlOiBJQ29ubmVjdGlvbkluZm9CYXNpYywgbXNnOiBzdHJpbmcpID0+IHZvaWQ7XHJcbmV4cG9ydCB0eXBlIENsb3NlSGFuZGxlciA9ICgpID0+IHZvaWQ7XHJcbmV4cG9ydCB0eXBlIENvbm5lY3Rpb25JbmZvVXBkYXRlSGFuZGxlciA9IChpbmZvOiBJQ29ubmVjdGlvbkluZm9CYXNpYykgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgSG9zdENoYW5nZWRIYW5kbGVyID0gKG5ld0hvc3RDb25uZWN0aW9uSWQ6IHN0cmluZykgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgSG9zdERpc2Nvbm5lY3RlZEhhbmRsZXIgPSAoKSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBJbWFnZUhhbmRsZXIgPSAoaW1nOiBCbG9iKSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBSZWNvbm5lY3RpbmdIYW5kbGVyID0gKCkgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgUmVjb25uZWN0ZWRIYW5kbGVyID0gKHN1Y2Nlc3M6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbmV4cG9ydCB0eXBlIFNlc3Npb25JbmZvSGFuZGxlciA9IChpbmZvOiBJU2Vzc2lvbkluZm9GdWxsKSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBTZXNzaW9uTGlzdEhhbmRsZXIgPSAoc2Vzc2lvbjogSVNlc3Npb25JbmZvQmFzaWNbXSkgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgVGltZXJIYW5kbGVyID0gKHRpbWVySW5mbzogSVRpbWVySW5mbykgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCBlbnVtIFNxdWludEV2ZW50IHtcclxuICAgQ2FtZXJhUGF1c2VkID0gJ2NhbWVyYVBhdXNlZCcsXHJcbiAgIENhbWVyYVJlcXVlc3QgPSAnY2FtZXJhUmVxdWVzdCcsXHJcbiAgIENoYXRNZXNzYWdlID0gJ2NoYXRNZXNzYWdlJyxcclxuICAgQ2xvc2UgPSAnY2xvc2UnLFxyXG4gICBDb25uZWN0aW9uSW5mb1VwZGF0ZSA9ICdjb25uZWN0aW9uSW5mb1VwZGF0ZScsXHJcbiAgIEhvc3RDaGFuZ2VkID0gJ2hvc3RDaGFuZ2VkJyxcclxuICAgSG9zdERpc2Nvbm5lY3RlZCA9ICdob3N0RGlzY29ubmVjdGVkJyxcclxuICAgSW1hZ2UgPSAnaW1hZ2UnLFxyXG4gICBSZWNvbm5lY3RpbmcgPSAncmVjb25uZWN0aW5nJyxcclxuICAgUmVjb25uZWN0ZWQgPSAncmVjb25uZWN0ZWQnLFxyXG4gICBTZXNzaW9uSW5mbyA9ICdzZXNzaW9uSW5mbycsXHJcbiAgIFNlc3Npb25MaXN0ID0gJ3Nlc3Npb25MaXN0JyxcclxuICAgU3luY2hyb25pemVUaW1lciA9ICdzeW5jaHJvbml6ZVRpbWVyJyxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3F1aW50Q2FtZXJhUGF1c2VkRXZlbnQge1xyXG4gICBldmVudDogU3F1aW50RXZlbnQuQ2FtZXJhUGF1c2VkLFxyXG4gICBoYW5kbGVyOiBDYW1lcmFQYXVzZUhhbmRsZXIsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNxdWludENhbWVyYVJlcXVlc3RFdmVudCB7XHJcbiAgIGV2ZW50OiBTcXVpbnRFdmVudC5DYW1lcmFSZXF1ZXN0LFxyXG4gICBoYW5kbGVyOiBDYW1lcmFSZXF1ZXN0SGFuZGxlcixcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3F1aW50Q2hhdE1lc3NhZ2VFdmVudCB7XHJcbiAgIGV2ZW50OiBTcXVpbnRFdmVudC5DaGF0TWVzc2FnZSxcclxuICAgaGFuZGxlcjogQ2hhdE1lc3NhZ2VIYW5kbGVyLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTcXVpbnRDbG9zZUV2ZW50IHtcclxuICAgZXZlbnQ6IFNxdWludEV2ZW50LkNsb3NlLFxyXG4gICBoYW5kbGVyOiBDbG9zZUhhbmRsZXIsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNxdWludENvbm5lY3Rpb25JbmZvVXBkYXRlRXZlbnQge1xyXG4gICBldmVudDogU3F1aW50RXZlbnQuQ29ubmVjdGlvbkluZm9VcGRhdGUsXHJcbiAgIGhhbmRsZXI6IENvbm5lY3Rpb25JbmZvVXBkYXRlSGFuZGxlcixcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3F1aW50SG9zdENoYW5nZWRFdmVudCB7XHJcbiAgIGV2ZW50OiBTcXVpbnRFdmVudC5Ib3N0Q2hhbmdlZCxcclxuICAgaGFuZGxlcjogSG9zdENoYW5nZWRIYW5kbGVyLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTcXVpbnRIb3N0RGlzY29ubmVjdGVkRXZlbnQge1xyXG4gICBldmVudDogU3F1aW50RXZlbnQuSG9zdERpc2Nvbm5lY3RlZCxcclxuICAgaGFuZGxlcjogSG9zdERpc2Nvbm5lY3RlZEhhbmRsZXIsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNxdWludEltYWdlRXZlbnQge1xyXG4gICBldmVudDogU3F1aW50RXZlbnQuSW1hZ2UsXHJcbiAgIGhhbmRsZXI6IEltYWdlSGFuZGxlcixcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3F1aW50UmVjb25uZWN0ZWRFdmVudCB7XHJcbiAgIGV2ZW50OiBTcXVpbnRFdmVudC5SZWNvbm5lY3RlZCxcclxuICAgaGFuZGxlcjogUmVjb25uZWN0ZWRIYW5kbGVyLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTcXVpbnRSZWNvbm5lY3RpbmdFdmVudCB7XHJcbiAgIGV2ZW50OiBTcXVpbnRFdmVudC5SZWNvbm5lY3RpbmcsXHJcbiAgIGhhbmRsZXI6IFJlY29ubmVjdGluZ0hhbmRsZXIsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNxdWludFNlc3Npb25JbmZvRXZlbnQge1xyXG4gICBldmVudDogU3F1aW50RXZlbnQuU2Vzc2lvbkluZm8sXHJcbiAgIGhhbmRsZXI6IFNlc3Npb25JbmZvSGFuZGxlcixcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3F1aW50U2Vzc2lvbkxpc3RFdmVudCB7XHJcbiAgIGV2ZW50OiBTcXVpbnRFdmVudC5TZXNzaW9uTGlzdCxcclxuICAgaGFuZGxlcjogU2Vzc2lvbkxpc3RIYW5kbGVyLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTcXVpbnRTeW5jaHJvbml6ZVRpbWVyRXZlbnQge1xyXG4gICBldmVudDogU3F1aW50RXZlbnQuU3luY2hyb25pemVUaW1lcixcclxuICAgaGFuZGxlcjogVGltZXJIYW5kbGVyLFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBJU3F1aW50RXZlbnRIYW5kbGVyID1cclxuICAgSVNxdWludENhbWVyYVBhdXNlZEV2ZW50IHxcclxuICAgSVNxdWludENhbWVyYVJlcXVlc3RFdmVudCB8XHJcbiAgIElTcXVpbnRDbG9zZUV2ZW50IHxcclxuICAgSVNxdWludENoYXRNZXNzYWdlRXZlbnQgfFxyXG4gICBJU3F1aW50Q29ubmVjdGlvbkluZm9VcGRhdGVFdmVudCB8XHJcbiAgIElTcXVpbnRIb3N0Q2hhbmdlZEV2ZW50IHxcclxuICAgSVNxdWludEhvc3REaXNjb25uZWN0ZWRFdmVudCB8XHJcbiAgIElTcXVpbnRJbWFnZUV2ZW50IHxcclxuICAgSVNxdWludFJlY29ubmVjdGVkRXZlbnQgfFxyXG4gICBJU3F1aW50UmVjb25uZWN0aW5nRXZlbnQgfFxyXG4gICBJU3F1aW50U2Vzc2lvbkluZm9FdmVudCB8XHJcbiAgIElTcXVpbnRTZXNzaW9uTGlzdEV2ZW50IHxcclxuICAgSVNxdWludFN5bmNocm9uaXplVGltZXJFdmVudDtcclxuIiwiLy9cclxuLy8gVGhpcyBmaWxlIHNob3VsZCBiZSB0aGUgc2FtZSBpbiBib3RoIHRoZSBTcXVpbnQgYW5kIFNxdWludFNlcnZlciBwcm9qZWN0c1xyXG4vL1xyXG5cclxuaW1wb3J0IHsgSVRpbWVySW5mbyB9IGZyb20gJy4vSVRpbWVySW5mbyc7XHJcblxyXG5leHBvcnQgZW51bSBDb25uZWN0aW9uU3RhdGUge1xyXG4gICBab21iaWUgPSAnWk9NQklFJyxcclxuICAgT3BlbiA9ICdPUEVOJyxcclxuICAgQ2xvc2VkID0gJ0NMT1NFRCcsXHJcbiAgIENvbm5lY3RpbmcgPSAnQ09OTkVDVElORycsXHJcbiAgIENsb3NpbmcgPSAnQ0xPU0lORycsXHJcbiAgIFVua25vd24gPSAnVU5LTk9XTicsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIENyZWF0ZVNlc3Npb25TdGF0dXMge1xyXG4gICBTdWNjZXNzID0gMCxcclxuICAgQWxyZWFkeUluQVNlc3Npb24sXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEpvaW5TZXNzaW9uU3RhdHVzIHtcclxuICAgU3VjY2VzcyA9IDAsXHJcbiAgIEFscmVhZHlJbkFTZXNzaW9uLFxyXG4gICBTZXNzaW9uTm90Rm91bmQsXHJcbiAgIEludmFsaWRQYXNzd29yZCxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUmVjb25uZWN0ZWRTdGF0dXMge1xyXG4gICBTdWNjZXNzID0gJ1N1Y2Nlc3MnLFxyXG4gICBGYWlsZWQgPSAnRmFpbGVkJ1xyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgSUNvbm5lY3Rpb25JbmZvQmFzaWMge1xyXG4gICB1c2VyTmFtZTogc3RyaW5nLFxyXG4gICBjb25uZWN0aW9uSWQ6IHN0cmluZyxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQ29ubmVjdGlvbkluZm9GdWxsIGV4dGVuZHMgSUNvbm5lY3Rpb25JbmZvQmFzaWMge1xyXG4gICBzdGF0ZTogQ29ubmVjdGlvblN0YXRlXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNlc3Npb25JbmZvQmFzaWMge1xyXG4gICB0aXRsZTogc3RyaW5nLFxyXG4gICBzZXNzaW9uSWQ6IHN0cmluZyxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU2Vzc2lvbkluZm9GdWxsIGV4dGVuZHMgSVNlc3Npb25JbmZvQmFzaWMge1xyXG4gICBob3N0PzogSUNvbm5lY3Rpb25JbmZvRnVsbCxcclxuICAgdmlld2VyczogSUNvbm5lY3Rpb25JbmZvRnVsbFtdXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNxdWludEluZm8ge1xyXG4gICBjb25uZWN0aW9uczogSUNvbm5lY3Rpb25JbmZvRnVsbFtdLFxyXG4gICBzZXNzaW9uczogSVNlc3Npb25JbmZvRnVsbFtdLFxyXG4gICBzZXNzaW9uVGltZW91dE1zOiBudW1iZXIsXHJcbiAgIHpvbWJpZVRpbWVvdXRNczogbnVtYmVyLFxyXG4gICBpbnRlcnZhbE1zOiBudW1iZXIsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFNxdWludE1lc3NhZ2VTdWJqZWN0IHtcclxuICAgQ2FtZXJhUGF1c2VkID0gJ0NhbWVyYVBhdXNlZCcsXHJcbiAgIENhbWVyYVJlcXVlc3QgPSAnQ2FtZXJhUmVxdWVzdCcsXHJcbiAgIENoYXRNZXNzYWdlID0gJ0NoYXRNZXNzYWdlJyxcclxuICAgQ29ubmVjdGlvbkluZm9VcGRhdGUgPSAnQ29ubmVjdGlvbkluZm9VcGRhdGUnLFxyXG4gICBDcmVhdGVTZXNzaW9uID0gJ0NyZWF0ZVNlc3Npb24nLFxyXG4gICBIZWxsbyA9ICdIZWxsbycsXHJcbiAgIEhvc3RDaGFuZ2VkID0gJ0hvc3RDaGFuZ2VkJyxcclxuICAgSG9zdENoYW5nZVJlcXVlc3QgPSAnSG9zdENoYW5nZVJlcXVlc3QnLFxyXG4gICBIb3N0RGlzY29ubmVjdGVkID0gJ0hvc3REaXNjb25uZWN0ZWQnLFxyXG4gICBKb2luU2Vzc2lvbiA9ICdKb2luU2Vzc2lvbicsXHJcbiAgIExvZyA9ICdMb2cnLFxyXG4gICBSZWFkeUZvck5leHRJbWFnZSA9ICdSZWFkeUZvck5leHRJbWFnZScsXHJcbiAgIFJlY29ubmVjdGVkID0gJ1JlY29ubmVjdGVkJyxcclxuICAgU2Vzc2lvbkNyZWF0ZWQgPSAnU2Vzc2lvbkNyZWF0ZWQnLFxyXG4gICBTZXNzaW9uSW5mbyA9ICdTZXNzaW9uSW5mbycsXHJcbiAgIFNlc3Npb25Kb2luZWQgPSAnU2Vzc2lvbkpvaW5lZCcsXHJcbiAgIFNlc3Npb25MaXN0ID0gJ1Nlc3Npb25MaXN0JyxcclxuICAgU3luY2hyb25pemVUaW1lciA9ICdTeW5jaHJvbml6ZVRpbWVyJyxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3F1aW50Q2FtZXJhUGF1c2VkTWVzc2FnZSB7XHJcbiAgIHN1YmplY3Q6IFNxdWludE1lc3NhZ2VTdWJqZWN0LkNhbWVyYVBhdXNlZCxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3F1aW50Q2FtZXJhUmVxdWVzdE1lc3NhZ2Uge1xyXG4gICBzdWJqZWN0OiBTcXVpbnRNZXNzYWdlU3ViamVjdC5DYW1lcmFSZXF1ZXN0LFxyXG4gICByZXNvbHV0aW9uOiBudW1iZXIgLy8gMC0xXHJcbiAgIGpwZWdRdWFsaXR5OiBudW1iZXIgLy8gMC4xLTFcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3F1aW50Q2hhdE1lc3NhZ2Uge1xyXG4gICBzdWJqZWN0OiBTcXVpbnRNZXNzYWdlU3ViamVjdC5DaGF0TWVzc2FnZSxcclxuICAgY29ubmVjdGlvbjogSUNvbm5lY3Rpb25JbmZvQmFzaWMsXHJcbiAgIG1lc3NhZ2U6IHN0cmluZyxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3F1aW50Q29ubmVjdGlvbkluZm9VcGRhdGVNZXNzYWdlIHtcclxuICAgc3ViamVjdDogU3F1aW50TWVzc2FnZVN1YmplY3QuQ29ubmVjdGlvbkluZm9VcGRhdGUsXHJcbiAgIHVzZXJOYW1lOiBzdHJpbmcsXHJcbiAgIGNvbm5lY3Rpb25JZDogc3RyaW5nLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTcXVpbnRIZWxsb0Zyb21DbGllbnRNZXNzYWdlIHtcclxuICAgc3ViamVjdDogU3F1aW50TWVzc2FnZVN1YmplY3QuSGVsbG8sXHJcbiAgIHVzZXJOYW1lOiBzdHJpbmcsXHJcbiAgIHJlY29ubmVjdElkOiBzdHJpbmcsXHJcbiAgIHVzZXJBZ2VudDogc3RyaW5nLFxyXG4gICBwbGF0Zm9ybTogc3RyaW5nLFxyXG4gICB2ZXJzaW9uOiBzdHJpbmcsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNxdWludEhlbGxvRnJvbVNlcnZlck1lc3NhZ2Uge1xyXG4gICBzdWJqZWN0OiBTcXVpbnRNZXNzYWdlU3ViamVjdC5IZWxsbyxcclxuICAgdmVyc2lvbjogc3RyaW5nLFxyXG4gICBjb25uZWN0aW9uSWQ6IHN0cmluZyxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3F1aW50SG9zdENoYW5nZWRNZXNzYWdlIHtcclxuICAgc3ViamVjdDogU3F1aW50TWVzc2FnZVN1YmplY3QuSG9zdENoYW5nZWQsXHJcbiAgIHNlc3Npb25JZDogc3RyaW5nLFxyXG4gICBuZXdIb3N0Q29ubmVjdGlvbklkOiBzdHJpbmcsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNxdWludEhvc3RDaGFuZ2VSZXF1ZXN0TWVzc2FnZSB7XHJcbiAgIHN1YmplY3Q6IFNxdWludE1lc3NhZ2VTdWJqZWN0Lkhvc3RDaGFuZ2VSZXF1ZXN0LFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTcXVpbnRIb3N0RGlzY29ubmVjdGVkTWVzc2FnZSB7XHJcbiAgIHN1YmplY3Q6IFNxdWludE1lc3NhZ2VTdWJqZWN0Lkhvc3REaXNjb25uZWN0ZWRcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3F1aW50Sm9pblNlc3Npb25NZXNzYWdlIHtcclxuICAgc3ViamVjdDogU3F1aW50TWVzc2FnZVN1YmplY3QuSm9pblNlc3Npb24sXHJcbiAgIHJlcXVlc3RJZDogc3RyaW5nLCAvLyB2YWx1ZSByZXR1cm5lZCBpbiB0aGUgSm9pbmVkIHJlc3BvbnNlXHJcbiAgIHNlc3Npb25JZDogc3RyaW5nLFxyXG4gICBwYXNzd29yZD86IHN0cmluZyxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3F1aW50TG9nTWVzc2FnZSB7XHJcbiAgIHN1YmplY3Q6IFNxdWludE1lc3NhZ2VTdWJqZWN0LkxvZyxcclxuICAgbWVzc2FnZTogc3RyaW5nLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTcXVpbnRSZWFkeUZvck5leHRJbWFnZU1lc3NhZ2Uge1xyXG4gICBzdWJqZWN0OiBTcXVpbnRNZXNzYWdlU3ViamVjdC5SZWFkeUZvck5leHRJbWFnZSxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3F1aW50UmVjb25uZWN0ZWRNZXNzYWdlIHtcclxuICAgc3ViamVjdDogU3F1aW50TWVzc2FnZVN1YmplY3QuUmVjb25uZWN0ZWQsXHJcbiAgIHN0YXR1czogUmVjb25uZWN0ZWRTdGF0dXMsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNxdWludFNlc3Npb25DcmVhdGVNZXNzYWdlIHtcclxuICAgc3ViamVjdDogU3F1aW50TWVzc2FnZVN1YmplY3QuQ3JlYXRlU2Vzc2lvbixcclxuICAgcmVxdWVzdElkOiBzdHJpbmcsXHJcbiAgIHBhc3N3b3JkPzogc3RyaW5nLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTcXVpbnRTZXNzaW9uQ3JlYXRlZE1lc3NhZ2Uge1xyXG4gICBzdWJqZWN0OiBTcXVpbnRNZXNzYWdlU3ViamVjdC5TZXNzaW9uQ3JlYXRlZCxcclxuICAgcmVxdWVzdElkOiBzdHJpbmcsXHJcbiAgIHN0YXR1czogQ3JlYXRlU2Vzc2lvblN0YXR1cyxcclxuICAgc2Vzc2lvbklkPzogc3RyaW5nLCAvLyB1bmRlZmluZWQgaWYgY3JlYXRpb24gZmFpbHNcclxuICAgdGltZXJJbmZvPzogSVRpbWVySW5mbyxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3F1aW50U2Vzc2lvbkluZm9NZXNzYWdlIHtcclxuICAgc3ViamVjdDogU3F1aW50TWVzc2FnZVN1YmplY3QuU2Vzc2lvbkluZm8sXHJcbiAgIGluZm86IElTZXNzaW9uSW5mb0Z1bGwsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNxdWludFNlc3Npb25Kb2luZWRNZXNzYWdlIHtcclxuICAgc3ViamVjdDogU3F1aW50TWVzc2FnZVN1YmplY3QuU2Vzc2lvbkpvaW5lZCxcclxuICAgcmVxdWVzdElkOiBzdHJpbmcsIC8vIHNhbWUgdmFsdWUgZnJvbSB0aGUgSm9pbiByZXF1ZXN0XHJcbiAgIHN0YXR1czogSm9pblNlc3Npb25TdGF0dXMsXHJcbiAgIHRpbWVySW5mbz86IElUaW1lckluZm8sXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNxdWludFNlc3Npb25MaXN0TWVzc2FnZSB7XHJcbiAgIHN1YmplY3Q6IFNxdWludE1lc3NhZ2VTdWJqZWN0LlNlc3Npb25MaXN0LFxyXG4gICBzZXNzaW9uczogSVNlc3Npb25JbmZvQmFzaWNbXSxcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3F1aW50U3luY2hyb25pemVUaW1lck1lc3NhZ2Uge1xyXG4gICBzdWJqZWN0OiBTcXVpbnRNZXNzYWdlU3ViamVjdC5TeW5jaHJvbml6ZVRpbWVyLFxyXG4gICBpbmZvPzogSVRpbWVySW5mbyxcclxufVxyXG5cclxuLy8gZm9yIHR5cGUgaW5mZXJlbmNlIGluIFR5cGVTY3JpcHRcclxuZXhwb3J0IHR5cGUgSVNxdWludE1lc3NhZ2UgPVxyXG4gICBJU3F1aW50Q2FtZXJhUGF1c2VkTWVzc2FnZSB8XHJcbiAgIElTcXVpbnRDYW1lcmFSZXF1ZXN0TWVzc2FnZSB8XHJcbiAgIElTcXVpbnRDaGF0TWVzc2FnZSB8XHJcbiAgIElTcXVpbnRDb25uZWN0aW9uSW5mb1VwZGF0ZU1lc3NhZ2UgfFxyXG4gICBJU3F1aW50SGVsbG9Gcm9tQ2xpZW50TWVzc2FnZSB8XHJcbiAgIElTcXVpbnRIZWxsb0Zyb21TZXJ2ZXJNZXNzYWdlIHxcclxuICAgSVNxdWludEhvc3RDaGFuZ2VkTWVzc2FnZSB8XHJcbiAgIElTcXVpbnRIb3N0Q2hhbmdlUmVxdWVzdE1lc3NhZ2UgfFxyXG4gICBJU3F1aW50SG9zdERpc2Nvbm5lY3RlZE1lc3NhZ2UgfFxyXG4gICBJU3F1aW50Sm9pblNlc3Npb25NZXNzYWdlIHxcclxuICAgSVNxdWludExvZ01lc3NhZ2UgfFxyXG4gICBJU3F1aW50UmVhZHlGb3JOZXh0SW1hZ2VNZXNzYWdlIHxcclxuICAgSVNxdWludFJlY29ubmVjdGVkTWVzc2FnZSB8XHJcbiAgIElTcXVpbnRTZXNzaW9uQ3JlYXRlTWVzc2FnZSB8XHJcbiAgIElTcXVpbnRTZXNzaW9uQ3JlYXRlZE1lc3NhZ2UgfFxyXG4gICBJU3F1aW50U2Vzc2lvbkluZm9NZXNzYWdlIHxcclxuICAgSVNxdWludFNlc3Npb25Kb2luZWRNZXNzYWdlIHxcclxuICAgSVNxdWludFNlc3Npb25MaXN0TWVzc2FnZSB8XHJcbiAgIElTcXVpbnRTeW5jaHJvbml6ZVRpbWVyTWVzc2FnZTtcclxuXHJcbiIsImltcG9ydCB7IElTcXVpbnRNZXNzYWdlLCBJU3F1aW50SGVsbG9Gcm9tU2VydmVyTWVzc2FnZSwgUmVjb25uZWN0ZWRTdGF0dXMsIElTcXVpbnRIZWxsb0Zyb21DbGllbnRNZXNzYWdlLCBTcXVpbnRNZXNzYWdlU3ViamVjdCB9IGZyb20gJy4vU3F1aW50TWVzc2FnZSc7XHJcbmltcG9ydCB7IGRlYnVnIH0gZnJvbSAnLi9TcXVpbnRBcHAnO1xyXG5pbXBvcnQgeyBXZWJTb2NrZXRGYWN0b3J5LCBXZWJTb2NrZXRSZWFkeVN0YXRlIH0gZnJvbSAnLi9XZWJTb2NrZXRGYWN0b3J5JztcclxuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vLi4vVXRpbC9HbG9iYWxzJztcclxuaW1wb3J0IHsgVmVyc2lvbiB9IGZyb20gJy4vVmVyc2lvbic7XHJcblxyXG5leHBvcnQgdHlwZSBJbWFnZUhhbmRsZXIgPSAoaW1nOiBCbG9iKSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBNZXNzYWdlSGFuZGxlciA9IChtc2c6IElTcXVpbnRNZXNzYWdlKSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBDbG9zZUhhbmRsZXIgPSAoY29kZTogbnVtYmVyKSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBJbml0SGFuZGxlciA9IChzczogU3F1aW50U29ja2V0KSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNxdWludFNvY2tldCB7XHJcblxyXG4gICBwcml2YXRlIF93czogV2ViU29ja2V0IHwgbnVsbCA9IG51bGw7XHJcbiAgIHB1YmxpYyByZWFkb25seSBjb25uZWN0aW9uSWQ6IHN0cmluZztcclxuXHJcbiAgIHByaXZhdGUgb25JbWFnZTogSW1hZ2VIYW5kbGVyO1xyXG4gICBwcml2YXRlIG9uTWVzc2FnZTogTWVzc2FnZUhhbmRsZXI7XHJcbiAgIHByaXZhdGUgb25DbG9zZTogQ2xvc2VIYW5kbGVyO1xyXG5cclxuICAgcHVibGljIHN0YXRpYyByZWFkb25seSBDTE9TRV9DT0RFX05PUk1BTCA9IDEwMDA7XHJcblxyXG4gICAvKipcclxuICAgICogRm9yIGRlYnVnZ2luZyBvbmx5XHJcbiAgICAqL1xyXG4gICBwdWJsaWMgZ2V0IHdzKCk6IFdlYlNvY2tldCB7XHJcbiAgICAgIHJldHVybiB0aGlzLl93cztcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCB1cmwoKTogc3RyaW5nIHtcclxuICAgICAgaWYgKHRoaXMuX3dzKSB7XHJcbiAgICAgICAgIHJldHVybiB0aGlzLl93cy51cmw7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0IHJlYWR5U3RhdGUoKTogbnVtYmVyIHtcclxuICAgICAgaWYgKHRoaXMuX3dzID09PSBudWxsKSB7XHJcbiAgICAgICAgIHJldHVybiBXZWJTb2NrZXRSZWFkeVN0YXRlLkNMT1NFRDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgcmV0dXJuIHRoaXMuX3dzLnJlYWR5U3RhdGU7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCByZWFkeVN0YXRlU3RyKCk6IHN0cmluZyB7XHJcbiAgICAgIGlmICh0aGlzLl93cyA9PT0gbnVsbCkge1xyXG4gICAgICAgICByZXR1cm4gJ0NMT1NFRCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHN3aXRjaCAodGhpcy5fd3MucmVhZHlTdGF0ZSkge1xyXG4gICAgICAgICBjYXNlIFdlYlNvY2tldFJlYWR5U3RhdGUuT1BFTjpcclxuICAgICAgICAgICAgcmV0dXJuICdPUEVOJztcclxuXHJcbiAgICAgICAgIGNhc2UgV2ViU29ja2V0UmVhZHlTdGF0ZS5DTE9TRUQ6XHJcbiAgICAgICAgICAgIHJldHVybiAnQ0xPU0VEJztcclxuXHJcbiAgICAgICAgIGNhc2UgV2ViU29ja2V0UmVhZHlTdGF0ZS5DT05ORUNUSU5HOlxyXG4gICAgICAgICAgICByZXR1cm4gJ0NPTk5FQ1RJTkcnO1xyXG5cclxuICAgICAgICAgY2FzZSBXZWJTb2NrZXRSZWFkeVN0YXRlLkNMT1NJTkc6XHJcbiAgICAgICAgICAgIHJldHVybiAnQ0xPU0lORyc7XHJcblxyXG4gICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gJ1VOS05PV04nO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgYnVmZmVyZWRBbW91bnQoKTogbnVtYmVyIHtcclxuICAgICAgaWYgKHRoaXMuX3dzKSB7XHJcbiAgICAgICAgIHJldHVybiB0aGlzLl93cy5idWZmZXJlZEFtb3VudDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgZGVidWcoJ1NxdWludFNvY2tldC5idWZmZXJlZEFtb3VudCBjYWxsZWQsIGJ1dCBub3QgY29ubmVjdGVkJyk7XHJcbiAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgY29ubmVjdGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gKHRoaXMuX3dzICE9PSBudWxsICYmIHRoaXMuX3dzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldFJlYWR5U3RhdGUuT1BFTik7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgYnVmZmVyUmVhZHkoKTogYm9vbGVhbiB7XHJcbiAgICAgIGlmICghdGhpcy5jb25uZWN0ZWQpIHtcclxuICAgICAgICAgZGVidWcoJ1NxdWludFNvY2tldC5idWZmZXJSZWFkeSgpIGNhbGxlZCBhZnRlciB3ZWJzb2NrZXQgd2FzIGRpc2Nvbm5lY3RlZCcpO1xyXG4gICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzLmJ1ZmZlcmVkQW1vdW50ID09PSAwO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGNvbnN0cnVjdG9yKFxyXG4gICAgICB3czogV2ViU29ja2V0LFxyXG4gICAgICBjb25uZWN0aW9uSWQ6IHN0cmluZyxcclxuICAgICAgb25NZXNzYWdlOiBNZXNzYWdlSGFuZGxlcixcclxuICAgICAgb25JbWFnZTogSW1hZ2VIYW5kbGVyLFxyXG4gICAgICBvbkNsb3NlOiBDbG9zZUhhbmRsZXJcclxuICAgKSB7XHJcblxyXG4gICAgICB0aGlzLl93cyA9IHdzO1xyXG4gICAgICB0aGlzLmNvbm5lY3Rpb25JZCA9IGNvbm5lY3Rpb25JZDtcclxuICAgICAgdGhpcy5vbk1lc3NhZ2UgPSBvbk1lc3NhZ2U7XHJcbiAgICAgIHRoaXMub25JbWFnZSA9IG9uSW1hZ2U7XHJcbiAgICAgIHRoaXMub25DbG9zZSA9IG9uQ2xvc2U7XHJcblxyXG4gICAgICB3cy5vbm9wZW4gPSBudWxsO1xyXG5cclxuICAgICAgd3Mub25jbG9zZSA9IChldmVudDogQ2xvc2VFdmVudCkgPT4ge1xyXG4gICAgICAgICBpZiAodGhpcy5fd3MpIHtcclxuICAgICAgICAgICAgdGhpcy5fd3Mub25jbG9zZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX3dzLm9uZXJyb3IgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl93cy5vbm1lc3NhZ2UgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl93cy5vbm9wZW4gPSBudWxsO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHRoaXMuX3dzID0gbnVsbDtcclxuICAgICAgICAgdGhpcy5vbkNsb3NlKGV2ZW50LmNvZGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB3cy5vbmVycm9yID0gKGV2ZW50OiBFdmVudCkgPT4ge1xyXG4gICAgICAgICBkZWJ1ZygnU3F1aW50U29ja2V0Lm9uRXJyb3I6ICcgKyBKU09OLnN0cmluZ2lmeShldmVudCwgbnVsbCwgJyAnKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHdzLm9ubWVzc2FnZSA9IChtZXNzYWdlOiBNZXNzYWdlRXZlbnQpID0+IHtcclxuICAgICAgICAgaWYgKHdzLnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldFJlYWR5U3RhdGUuT1BFTikge1xyXG4gICAgICAgICAgICBkZWJ1Zygnd3Mub25tZXNzYWdlKCkgbWVzc2FnZSByZWNlaXZlZCwgYnV0IHNvY2tldCBub3Qgb3BlbicpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICAvLyBwcm9jZXNzIHRoZSBpbWFnZVxyXG4gICAgICAgICBpZiAobWVzc2FnZS5kYXRhIGluc3RhbmNlb2YgQmxvYikge1xyXG4gICAgICAgICAgICB0aGlzLm9uSW1hZ2UobWVzc2FnZS5kYXRhKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVzc2FnZS5kYXRhID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICBsZXQgbXNnID0gSlNPTi5wYXJzZShtZXNzYWdlLmRhdGEpIGFzIElTcXVpbnRNZXNzYWdlO1xyXG5cclxuICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5vbk1lc3NhZ2UobXNnKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTcXVpbnRTb2NrZXQub25NZXNzYWdlKCkgZXhjZXB0aW9uOiAnICsgZXJyKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ludmFsaWQgbWVzc2FnZSByZWNlaXZlZDogSW52YWxpZCBKU09OLlxcbicgKyBlcnIgKyAnXFxuJyArIG1lc3NhZ2UuZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSGF0ZSB0byBtb2RpZnkgb3VyIGNvZGUgdG8gbWFrZSBpdCB3b3JrIHdpdGggdGVzdHMsIGJ1dCBJIGRvbid0IGtub3cgaG93IGVsc2UgdG9cclxuICAgICAgICAgICAgLy8gYWRkcmVzcyB0aGlzIHNpdHVhdGlvbi4gV2UncmUgdGVzdGluZyB1c2luZyBOb2RlSlMgd2hpY2ggdXNlcyBkaWZmZXJlbnQgdHlwZXNcclxuICAgICAgICAgICAgLy8gdGhhbiBhIGJyb3dzZXIuIEluIHBhcnRpY3VsYXIgaXQgZG9lc24ndCBzdXBwb3J0IEJsb2JzIHNvIHdoZW4gd2UgdGVzdCBzZW5kaW5nXHJcbiAgICAgICAgICAgIC8vIGFuIGltYWdlLCBpdCBpcyBub3QgcmVjb2duaXplZCBhcyBhIEJsb2IgdHlwZS4gVWdoLlxyXG4gICAgICAgICAgICBpZiAoZW52LmlzVGVzdGluZykge1xyXG4gICAgICAgICAgICAgICB0aGlzLm9uSW1hZ2UobWVzc2FnZS5kYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgZGVidWcoJ1NxdWludFNvY2tldDogdW5rbm93biBtZXNzYWdlIHJlY2VpdmVkOiAnICsgSlNPTi5zdHJpbmdpZnkobWVzc2FnZSwgbnVsbCwgJyAnKS5zdWJzdHJpbmcoMCwgMTAwMDApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBjbG9zZShjb2RlID0gU3F1aW50U29ja2V0LkNMT1NFX0NPREVfTk9STUFMKTogdm9pZCB7XHJcbiAgICAgIGlmICghdGhpcy5jb25uZWN0ZWQpIHtcclxuICAgICAgICAgZGVidWcoJ1NxdWludFNvY2tldC5jbG9zZSgpIGNhbGxlZCBidXQgbm8gY29ubmVjdGlvbiBleGlzdHMnKTtcclxuICAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5fd3MpIHtcclxuICAgICAgICAgdGhpcy5fd3Mub25jbG9zZSA9IG51bGw7XHJcbiAgICAgICAgIHRoaXMuX3dzLm9uZXJyb3IgPSBudWxsO1xyXG4gICAgICAgICB0aGlzLl93cy5vbm1lc3NhZ2UgPSBudWxsO1xyXG4gICAgICAgICB0aGlzLl93cy5vbm9wZW4gPSBudWxsO1xyXG5cclxuICAgICAgICAgdGhpcy5fd3MuY2xvc2UoY29kZSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5fd3MgPSBudWxsO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc2VuZChtc2c6IElTcXVpbnRNZXNzYWdlKTogdm9pZCB7XHJcbiAgICAgIGlmICghKHRoaXMuY29ubmVjdGVkKSkge1xyXG4gICAgICAgICBkZWJ1ZygnU3F1aW50U29ja2V0LnNlbmQoKSBjYWxsZWQsIGJ1dCBub3QgY29ubmVjdGVkJyk7XHJcbiAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQHRzLWlnbm9yZTogY2FuJ3QgYmUgbnVsbCBwZXIgYWJvdmUgY2hlY2tcclxuICAgICAgdGhpcy5fd3Muc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHNlbmRJbWFnZShibG9iOiBCbG9iKTogdm9pZCB7XHJcbiAgICAgIGlmICghdGhpcy5jb25uZWN0ZWQpIHtcclxuICAgICAgICAgZGVidWcoJ1NxdWludFNvY2tldC5zZW5kSW1hZ2UoKSBjYWxsZWQsIGJ1dCBub3QgY29ubmVjdGVkJyk7XHJcbiAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQHRzLWlnbm9yZTogY2FuJ3QgYmUgbnVsbCBwZXIgYWJvdmUgY2hlY2tcclxuICAgICAgdGhpcy5fd3Muc2VuZChibG9iKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHN0YXRpYyBjb25uZWN0KFxyXG4gICAgICB1cmw6IHN0cmluZyxcclxuICAgICAgdXNlck5hbWU6IHN0cmluZyxcclxuICAgICAgb25NZXNzYWdlOiBNZXNzYWdlSGFuZGxlcixcclxuICAgICAgb25JbWFnZTogSW1hZ2VIYW5kbGVyLFxyXG4gICAgICBvbkNsb3NlOiBDbG9zZUhhbmRsZXIsXHJcbiAgICAgIG9uSW5pdDogSW5pdEhhbmRsZXIsXHJcbiAgICAgIHJlY29ubmVjdElkPzogc3RyaW5nXHJcbiAgICk6IFByb21pc2U8U3F1aW50U29ja2V0PiB7XHJcblxyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2U8U3F1aW50U29ja2V0PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblxyXG4gICAgICAgICAvLyBjcmVhdGUgdGVtcG9yYXJ5IGhhbmRsZXJzIHRoYXQgcHJvY2VzcyB0aGUgc2VydmVyIGhhbmRzaGFrZVxyXG4gICAgICAgICBjb25zdCB3cyA9IFdlYlNvY2tldEZhY3RvcnkuY3JlYXRlKHVybCk7XHJcblxyXG4gICAgICAgICB3cy5vbm9wZW4gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHNlbmQgaGFuZHNoYWtlIG1lc3NhZ2VcclxuICAgICAgICAgICAgbGV0IG1zZzogSVNxdWludEhlbGxvRnJvbUNsaWVudE1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgICAgIHN1YmplY3Q6IFNxdWludE1lc3NhZ2VTdWJqZWN0LkhlbGxvLFxyXG4gICAgICAgICAgICAgICB1c2VyTmFtZTogdXNlck5hbWUsXHJcbiAgICAgICAgICAgICAgIHJlY29ubmVjdElkOiByZWNvbm5lY3RJZCxcclxuICAgICAgICAgICAgICAgdXNlckFnZW50OiBuYXZpZ2F0b3IudXNlckFnZW50LFxyXG4gICAgICAgICAgICAgICBwbGF0Zm9ybTogbmF2aWdhdG9yLnBsYXRmb3JtLFxyXG4gICAgICAgICAgICAgICB2ZXJzaW9uOiBWZXJzaW9uLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd3Muc2VuZChcclxuICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkobXNnKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICB9O1xyXG5cclxuICAgICAgICAgd3Mub25jbG9zZSA9IChldmVudDogQ2xvc2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICB3cy5vbm9wZW4gPSBudWxsO1xyXG4gICAgICAgICAgICB3cy5vbmNsb3NlID0gbnVsbDtcclxuICAgICAgICAgICAgd3Mub25tZXNzYWdlID0gbnVsbDtcclxuICAgICAgICAgICAgcmVqZWN0KCdDYW5ub3QgY29ubmVjdCB0byBzZXJ2ZXI6ICcgKyBldmVudC5jb2RlKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICB3cy5vbmVycm9yID0gKGV2ZW50OiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBkZWJ1ZygnU3F1aW50U29ja2V0Lm9uRXJyb3IoKSAnICsgSlNPTi5zdHJpbmdpZnkoZXZlbnQsIG51bGwsICcgJykpO1xyXG4gICAgICAgICAgICB3cy5vbm9wZW4gPSBudWxsO1xyXG4gICAgICAgICAgICB3cy5vbmNsb3NlID0gbnVsbDtcclxuICAgICAgICAgICAgd3Mub25tZXNzYWdlID0gbnVsbDtcclxuICAgICAgICAgICAgcmVqZWN0KCdDYW5ub3QgY29ubmVjdCB0byAnICsgdXJsKTtcclxuICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgIHdzLm9ubWVzc2FnZSA9IChtZXNzYWdlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlY29ubmVjdElkKSB7XHJcbiAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1zZyA9IEpTT04ucGFyc2UobWVzc2FnZUV2ZW50LmRhdGEpIGFzIElTcXVpbnRNZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICBpZiAobXNnLnN1YmplY3QgJiYgbXNnLnN1YmplY3QgPT09ICdSZWNvbm5lY3RlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5zdGF0dXMgPT09IFJlY29ubmVjdGVkU3RhdHVzLlN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNzID0gbmV3IFNxdWludFNvY2tldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgd3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29ubmVjdElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uSW1hZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Jbml0KHNzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgnQ2Fubm90IHJlY29ubmVjdCB0byAnICsgdXJsICsgJ1xcblxcblNlcnZlciByZWplY3RlZCB0aGUgcmVxdWVzdC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICBkZWJ1ZygnRXhwZWN0ZWQgUmVjb25uZWN0ZWQgcmVzcG9uc2UsIGdvdDogJyArIEpTT04uc3RyaW5naWZ5KG1zZywgbnVsbCwgJyAnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgnQ2Fubm90IHJlY29ubmVjdCB0byAnICsgdXJsICsgJ1xcblxcbkludmFsaWQgc2VydmVyIGhhbmRzaGFrZS4nKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgZGVidWcoJ0V4cGVjdGVkIFJlY29ubmVjdCByZXNwb25zZSwgZ290OiAnICsgbWVzc2FnZUV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICByZWplY3QoJ0Nhbm5vdCByZWNvbm5lY3QgdG8gJyArIHVybCArICdcXG5cXG5JbnZhbGlkIHNlcnZlciBoYW5kc2hha2UuJyk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgbGV0IG1zZyA9IEpTT04ucGFyc2UobWVzc2FnZUV2ZW50LmRhdGEpIGFzIElTcXVpbnRNZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICBpZiAobXNnLnN1YmplY3QgJiYgbXNnLnN1YmplY3QgPT09ICdIZWxsbycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgbXNnID0gbXNnIGFzIElTcXVpbnRIZWxsb0Zyb21TZXJ2ZXJNZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3F1aW50IGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQuIElEPScgKyBtc2cuY29ubmVjdGlvbklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgbGV0IHNzID0gbmV3IFNxdWludFNvY2tldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZy5jb25uZWN0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25JbWFnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZVxyXG4gICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAvLyB0aGVyZSBpcyBhIHZlcnkgdHJpY2t5IHBvdGVudGlhbCBidWcgaGVyZS4gQWZ0ZXIgcmVzb2x2ZSgpIGlzIGNhbGxlZCxcclxuICAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGJlZm9yZSB0aGUgYXNzb2NpYXRlZCB0aGVuKCkgbWV0aG9kIGlzIGNhbGxlZCwgYSBtZXNzYWdlIG1heSBiZVxyXG4gICAgICAgICAgICAgICAgICAgICAvLyByZWNlaXZlZCBvbiB0aGUgc29ja2V0LiBUaGF0J3Mgd2h5IHdlIG5lZWQgdGhlIG9uSW5pdCgpIGhhbmRsZXJcclxuICAgICAgICAgICAgICAgICAgICAgb25Jbml0KHNzKTtcclxuICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShzcyk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIGRlYnVnKCdFeHBlY3RlZCBIZWxsbyByZXNwb25zZSwgZ290OiAnICsgSlNPTi5zdHJpbmdpZnkobXNnLCBudWxsLCAnICcpKTtcclxuICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdDYW5ub3QgY29ubmVjdCB0byAnICsgdXJsICsgJ1xcblxcbkludmFsaWQgc2VydmVyIGhhbmRzaGFrZS4nKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgZGVidWcoJ0V4cGVjdGVkIEhlbGxvIHJlc3BvbnNlLCBnb3Q6ICcgKyBtZXNzYWdlRXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgIHJlamVjdCgnQ2Fubm90IGNvbm5lY3QgdG8gJyArIHVybCArICdcXG5cXG5JbnZhbGlkIHNlcnZlciBoYW5kc2hha2UuJyk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgU3F1aW50U3RyaW5ncyB7XHJcbiAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQ0FNRVJBX05PVF9SRUFEWSA9ICdDYW1lcmEgbm90IHJlYWR5JztcclxuXHJcbiAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQ0FOTk9UX0pPSU5fU0VTU0lPTl9fSU5fU0VTU0lPTiA9ICdDYW5ub3Qgam9pbiBzZXNzaW9uOiBjdXJyZW50bHkgaW4gYW5vdGhlciBzZXNzaW9uLic7XHJcbiAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQ0FOTk9UX0pPSU5fU0VTU0lPTl9fU0VTU0lPTl9OT1RfRk9VTkQgPSAnQ2Fubm90IGpvaW4gc2Vzc2lvbjogc2Vzc2lvbiBub3QgZm91bmQuJztcclxuICAgcHVibGljIHN0YXRpYyByZWFkb25seSBDQU5OT1RfSk9JTl9TRVNTSU9OX19USU1FT1VUID0gJ0Nhbm5vdCBqb2luIHNlc3Npb246IHJlcXVlc3QgdGltZWQgb3V0Lic7XHJcbiAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQ0FOTk9UX0pPSU5fU0VTU0lPTl9fSU5WQUxJRF9QQVNTV09SRCA9ICdDYW5ub3Qgam9pbiBzZXNzaW9uOiBpbnZhbGlkIHBhc3N3b3JkLic7XHJcbiAgIHB1YmxpYyBzdGF0aWMgQ0FOTk9UX0pPSU5fU0VTU0lPTihjb2RlOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gKCdDYW5ub3Qgam9pbiBzZXNzaW9uOiBFcnJvciBjb2RlOiAnICsgY29kZSk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQ0FOTk9UX0NSRUFURV9TRVNTSU9OX19JTl9TRVNTSU9OID0gJ0Nhbm5vdCBjcmVhdGUgc2Vzc2lvbjogY3VycmVudGx5IGluIGFub3RoZXIgc2Vzc2lvbi4nO1xyXG4gICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IENBTk5PVF9DUkVBVEVfU0VTU0lPTl9fVElNRU9VVCA9ICdDYW5ub3QgY3JlYXRlIHNlc3Npb246IHJlcXVlc3QgdGltZWQgb3V0Lic7XHJcbiAgIHB1YmxpYyBzdGF0aWMgQ0FOTk9UX0NSRUFURV9TRVNTSU9OKGNvZGU6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiAoJ0Nhbm5vdCBjcmVhdGUgc2Vzc2lvbjogRXJyb3IgY29kZTogJyArIGNvZGUpO1xyXG4gICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IExpc3RCb3ggfSBmcm9tICcuLi8uLi9HVUkvTGlzdEJveCc7XHJcbmltcG9ydCB7IFZlcnNpb24gfSBmcm9tICcuL1ZlcnNpb24nO1xyXG5pbXBvcnQgeyBTcXVpbnQgfSBmcm9tICcuL1NxdWludCc7XHJcbmltcG9ydCB7IEdVSSB9IGZyb20gJy4uLy4uL0dVSS9HVUknO1xyXG5pbXBvcnQgeyBVc2VyTmFtZURpYWxvZyB9IGZyb20gJy4vVXNlck5hbWVEaWFsb2cnO1xyXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tICcuLi8uLi9HVUkvRGlhbG9nJztcclxuaW1wb3J0IHsgU3F1aW50RXZlbnQgfSBmcm9tICcuL1NxdWludEV2ZW50cyc7XHJcbmltcG9ydCB7IElTZXNzaW9uSW5mb0Jhc2ljLCBJQ29ubmVjdGlvbkluZm9CYXNpYyB9IGZyb20gJy4vU3F1aW50TWVzc2FnZSc7XHJcbmltcG9ydCB7IFN0b3JhZ2VXaXRoRXZlbnRzLCBTdG9yYWdlSXRlbSB9IGZyb20gJy4vU3RvcmFnZVdpdGhFdmVudHMnO1xyXG5pbXBvcnQgeyBTZXNzaW9uU2V0dXBEaWFsb2cgfSBmcm9tICcuL1Nlc3Npb25TZXR1cERpYWxvZyc7XHJcblxyXG5leHBvcnQgdHlwZSBKb2luU2Vzc2lvbkhhbmRsZXIgPSAoc2Vzc2lvbklkOiBzdHJpbmcpID0+IHZvaWQ7XHJcbmV4cG9ydCB0eXBlIFN0YXJ0U2Vzc2lvbkhhbmRsZXIgPSAocGFzc3dvcmQ6IHN0cmluZyB8IHVuZGVmaW5lZCkgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdGFydERpYWxvZyBleHRlbmRzIERpYWxvZyB7XHJcbiAgIHByaXZhdGUgdmlld0xpc3RCb3g6IExpc3RCb3g8c3RyaW5nPjtcclxuICAgcHJpdmF0ZSBib2R5RGl2OiBIVE1MRGl2RWxlbWVudDtcclxuICAgcHJpdmF0ZSBjb25uZWN0aW5nRGl2OiBIVE1MRGl2RWxlbWVudDtcclxuICAgcHJpdmF0ZSBjb25uZWN0aW5nQW5pbWF0aW9uRGl2OiBIVE1MRGl2RWxlbWVudDtcclxuICAgcHJpdmF0ZSB1c2VyTmFtZUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgIHByaXZhdGUgZ29Ib3N0QnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgcHJpdmF0ZSBzcXVpbnQ6IFNxdWludDtcclxuICAgcHJpdmF0ZSBvblN0YXJ0VmlldzogSm9pblNlc3Npb25IYW5kbGVyO1xyXG4gICBwcml2YXRlIG9uU3RhcnRTZXNzaW9uOiBTdGFydFNlc3Npb25IYW5kbGVyO1xyXG4gICBwcml2YXRlIHN0b3JhZ2U6IFN0b3JhZ2VXaXRoRXZlbnRzO1xyXG5cclxuICAgcHJpdmF0ZSBzZXQgc2hvd0Nvbm5lY3RpbmdNc2coZmxhZzogYm9vbGVhbikge1xyXG4gICAgICB0aGlzLmJvZHlEaXYuc3R5bGUucG9pbnRlckV2ZW50cyA9IGZsYWcgPyAnbm9uZScgOiAnYXV0byc7XHJcbiAgICAgIHRoaXMuYm9keURpdi5zdHlsZS5maWx0ZXIgPSBmbGFnID8gJ2dyYXlzY2FsZSgxKSBjb250cmFzdCgwLjQpJyA6ICcnO1xyXG4gICAgICB0aGlzLmNvbm5lY3RpbmdEaXYuc3R5bGUuZGlzcGxheSA9IGZsYWcgPyAnYmxvY2snIDogJ25vbmUnO1xyXG4gICAgICB0aGlzLmNvbm5lY3RpbmdBbmltYXRpb25EaXYuc3R5bGUuZGlzcGxheSA9IGZsYWcgPyAnYmxvY2snIDogJ25vbmUnO1xyXG4gICAgICB0aGlzLnVzZXJOYW1lQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBmbGFnID8gJ25vbmUnIDogJ2Jsb2NrJztcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKFxyXG4gICAgICBwYXJlbnQ6IEhUTUxEaXZFbGVtZW50LFxyXG4gICAgICBzcXVpbnQ6IFNxdWludCxcclxuICAgICAgb25Kb2luU2Vzc2lvbjogSm9pblNlc3Npb25IYW5kbGVyLFxyXG4gICAgICBvblN0YXJ0U2Vzc2lvbjogU3RhcnRTZXNzaW9uSGFuZGxlcixcclxuICAgICAgc3RvcmFnZTogU3RvcmFnZVdpdGhFdmVudHMsXHJcbiAgICkge1xyXG4gICAgICBzdXBlcihwYXJlbnQsICdTdGFydCcpO1xyXG5cclxuICAgICAgdGhpcy5zcXVpbnQgPSBzcXVpbnQ7XHJcbiAgICAgIHRoaXMuc3RvcmFnZSA9IHN0b3JhZ2U7XHJcblxyXG4gICAgICB0aGlzLnNxdWludC5vbih7XHJcbiAgICAgICAgIGV2ZW50OiBTcXVpbnRFdmVudC5TZXNzaW9uTGlzdCxcclxuICAgICAgICAgaGFuZGxlcjogKHNlc3Npb25zOiBJU2Vzc2lvbkluZm9CYXNpY1tdKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25TZXNzaW9uTGlzdChzZXNzaW9ucyk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBsZXQgdGltZW91dDogbnVtYmVyO1xyXG4gICAgICB0aGlzLnNxdWludC5vbih7XHJcbiAgICAgICAgIGV2ZW50OiBTcXVpbnRFdmVudC5SZWNvbm5lY3RpbmcsXHJcbiAgICAgICAgIGhhbmRsZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgdGltZW91dCA9IC0xO1xyXG4gICAgICAgICAgICAgICAvLyBnaXZlIHRoZSBzeXN0ZW0gYSBsaXR0bGUgdGltZSB0byByZWNvbm5lY3QgYmVmb3JlIHNob3dpbmcgYSBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgIHRoaXMuc2hvd0Nvbm5lY3RpbmdNc2cgPSB0cnVlO1xyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5zcXVpbnQub24oe1xyXG4gICAgICAgICBldmVudDogU3F1aW50RXZlbnQuUmVjb25uZWN0ZWQsXHJcbiAgICAgICAgIGhhbmRsZXI6IChzdWNjZXNzOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aW1lb3V0ICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgIHRoaXMuc2hvd0Nvbm5lY3RpbmdNc2cgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMub25TdGFydFZpZXcgPSBvbkpvaW5TZXNzaW9uO1xyXG4gICAgICB0aGlzLm9uU3RhcnRTZXNzaW9uID0gb25TdGFydFNlc3Npb247XHJcblxyXG4gICAgICBjb25zdCBkaWFsb2dUaXRsZURpdiA9IEdVSS5jcmVhdGUoJ2RpdicsICdEaWFsb2dUaXRsZURpdicsIHRoaXMuZGlhbG9nRGl2KTtcclxuICAgICAgY29uc3QgdGl0bGVEaXYgPSBHVUkuY3JlYXRlKCdkaXYnLCAnVGl0bGVEaXYnLCBkaWFsb2dUaXRsZURpdik7XHJcbiAgICAgIHRpdGxlRGl2LmNsYXNzTmFtZSA9ICdEaWFsb2dUaXRsZUNsYXNzJztcclxuICAgICAgdGl0bGVEaXYuaW5uZXJUZXh0ID0gJ1NxdWludCB2MC4xLicgKyBWZXJzaW9uLkJ1aWxkO1xyXG5cclxuICAgICAgdGhpcy5jb25uZWN0aW5nRGl2ID0gR1VJLmNyZWF0ZSgnZGl2JywgJ0Nvbm5lY3RpbmdUZXh0RGl2JywgZGlhbG9nVGl0bGVEaXYpO1xyXG4gICAgICB0aGlzLmNvbm5lY3RpbmdEaXYuaW5uZXJUZXh0ID0gJ2Nvbm5lY3RpbmcuLi4nO1xyXG5cclxuICAgICAgdGhpcy5jb25uZWN0aW5nQW5pbWF0aW9uRGl2ID0gR1VJLmNyZWF0ZUFuaW1hdGlvbignQ29ubmVjdGluZ0FuaW1hdGlvbkRpdicsIGRpYWxvZ1RpdGxlRGl2KTtcclxuXHJcbiAgICAgIHRoaXMudXNlck5hbWVCdXR0b24gPSBHVUkuY3JlYXRlKCdidXR0b24nLCAnVXNlck5hbWVCdXR0b24nLCBkaWFsb2dUaXRsZURpdik7XHJcbiAgICAgIHRoaXMudXNlck5hbWVCdXR0b24uY2xhc3NOYW1lID0gJ0J1dHRvbkNsYXNzJztcclxuICAgICAgdGhpcy51c2VyTmFtZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICB0aGlzLnVzZXJOYW1lQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgIG5ldyBVc2VyTmFtZURpYWxvZyhwYXJlbnQsIHN0b3JhZ2UpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmJvZHlEaXYgPSBHVUkuY3JlYXRlKCdkaXYnLCAnRGlhbG9nQm9keURpdicsIHRoaXMuZGlhbG9nRGl2KTtcclxuXHJcbiAgICAgIC8vXHJcbiAgICAgIC8vIFZpZXcgYSBzZXNzaW9uIHBhbmVsXHJcbiAgICAgIC8vXHJcbiAgICAgIGNvbnN0IHZpZXdQYW5lbERpdiA9IEdVSS5jcmVhdGUoJ2RpdicsICdWaWV3UGFuZWxEaXYnLCB0aGlzLmJvZHlEaXYpO1xyXG5cclxuICAgICAgdGhpcy52aWV3TGlzdEJveCA9IG5ldyBMaXN0Qm94PHN0cmluZz4odmlld1BhbmVsRGl2LCAnVmlld0xpc3RCb3gnKTtcclxuICAgICAgdGhpcy52aWV3TGlzdEJveC5vblNlbGVjdGVkQ2hhbmdlZCA9ICgpID0+IHtcclxuICAgICAgICAgZ29WaWV3QnV0dG9uLmRpc2FibGVkID0gKHRoaXMudmlld0xpc3RCb3guc2VsZWN0ZWQgPT09IG51bGwpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBidXR0b25EaXYgPSBHVUkuY3JlYXRlKCdkaXYnLCAnQnV0dG9uRGl2Jywgdmlld1BhbmVsRGl2KTtcclxuICAgICAgYnV0dG9uRGl2LmNsYXNzTmFtZSA9ICdCdXR0b25EaXZDbGFzcyc7XHJcblxyXG4gICAgICBjb25zdCBnb1ZpZXdCdXR0b24gPSBHVUkuY3JlYXRlKCdidXR0b24nLCAnVmlld0J1dHRvbicsIGJ1dHRvbkRpdik7XHJcbiAgICAgIGdvVmlld0J1dHRvbi5jbGFzc05hbWUgPSAnQnV0dG9uQ2xhc3MnO1xyXG4gICAgICBnb1ZpZXdCdXR0b24uaW5uZXJUZXh0ID0gJ1ZpZXcgYSBjYW1lcmEuLi4nO1xyXG4gICAgICBnb1ZpZXdCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICBnb1ZpZXdCdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICAgY29uc3QgY29ubmVjdGlvbklkID0gdGhpcy52aWV3TGlzdEJveC5zZWxlY3RlZDtcclxuICAgICAgICAgdGhpcy5vblN0YXJ0Vmlldyhjb25uZWN0aW9uSWQpO1xyXG4gICAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgLy9cclxuICAgICAgLy8gT3IgcGFuZWxcclxuICAgICAgLy9cclxuICAgICAgY29uc3Qgb3JQYW5lbERpdiA9IEdVSS5jcmVhdGUoJ2RpdicsICdPclBhbmVsRGl2JywgdGhpcy5ib2R5RGl2KTtcclxuICAgICAgY29uc3Qgb3JEaXYgPSBHVUkuY3JlYXRlKCdkaXYnLCAnT3JEaXYnLCBvclBhbmVsRGl2KTtcclxuICAgICAgb3JEaXYuaW5uZXJUZXh0ID0gJ09SJztcclxuXHJcblxyXG5cclxuXHJcbiAgICAgIC8vXHJcbiAgICAgIC8vIEhvc3QgYSBzZXNzaW9uIHBhbmVsXHJcbiAgICAgIC8vXHJcbiAgICAgIGNvbnN0IGhvc3RQYW5lbERpdiA9IEdVSS5jcmVhdGUoJ2RpdicsICdIb3N0UGFuZWxEaXYnLCB0aGlzLmJvZHlEaXYpO1xyXG5cclxuICAgICAgLy8gY2FtZXJhIGljb24gY3NzXHJcbiAgICAgIGNvbnN0IGljb25EaXYgPSBHVUkuY3JlYXRlKCdkaXYnLCAnSWNvbkRpdicsIGhvc3RQYW5lbERpdik7XHJcbiAgICAgIGljb25EaXYuY2xhc3NOYW1lID0gJ2ljb24nO1xyXG4gICAgICBjb25zdCBjYW1lcmFJY29uRGl2ID0gR1VJLmNyZWF0ZSgnZGl2JywgJ0NhbWVyYURpdicsIGljb25EaXYpO1xyXG4gICAgICBjYW1lcmFJY29uRGl2LmNsYXNzTmFtZSA9ICdjYW1lcmEtaWNvbic7XHJcbiAgICAgIGNvbnN0IGNpcmNsZVNtYWxsRGl2ID0gR1VJLmNyZWF0ZSgnZGl2JywgJ0NpcmNsZVNtYWxsRGl2JywgY2FtZXJhSWNvbkRpdik7XHJcbiAgICAgIGNpcmNsZVNtYWxsRGl2LmNsYXNzTmFtZSA9ICdjYW1lcmEtY2lyY2xlJztcclxuICAgICAgY29uc3QgY2lyY2xlQmlnRGl2ID0gR1VJLmNyZWF0ZSgnZGl2JywgJ0NpcmNsZUJpZ0RpdicsIGNhbWVyYUljb25EaXYpO1xyXG4gICAgICBjaXJjbGVCaWdEaXYuY2xhc3NOYW1lID0gJ2NhbWVyYS1idG4nO1xyXG5cclxuXHJcbiAgICAgIGNvbnN0IGJ1dHRvbkRpdjIgPSBHVUkuY3JlYXRlKCdkaXYnLCAnQnV0dG9uRGl2JywgaG9zdFBhbmVsRGl2KTtcclxuICAgICAgYnV0dG9uRGl2Mi5jbGFzc05hbWUgPSAnQnV0dG9uRGl2Q2xhc3MnO1xyXG5cclxuICAgICAgdGhpcy5nb0hvc3RCdXR0b24gPSBHVUkuY3JlYXRlKCdidXR0b24nLCAnSG9zdEJ1dHRvbicsIGJ1dHRvbkRpdjIpO1xyXG4gICAgICB0aGlzLmdvSG9zdEJ1dHRvbi5jbGFzc05hbWUgPSAnQnV0dG9uQ2xhc3MnO1xyXG4gICAgICB0aGlzLmdvSG9zdEJ1dHRvbi5pbm5lclRleHQgPSAnU2hhcmUgeW91ciBjYW1lcmEuLi4nO1xyXG4gICAgICB0aGlzLmdvSG9zdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG5cclxuICAgICAgICAgbGV0IGRsZzogU2Vzc2lvblNldHVwRGlhbG9nO1xyXG4gICAgICAgICBsZXQgb25PayA9IChwYXNzd29yZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIGRsZy5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLm9uU3RhcnRTZXNzaW9uKHBhc3N3b3JkKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgZGxnID0gbmV3IFNlc3Npb25TZXR1cERpYWxvZyh0aGlzLmJvZHlEaXYsIG9uT2spO1xyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgc3RvcmFnZS5vbihTdG9yYWdlSXRlbS5Vc2VyTmFtZSwgKHVzZXJOYW1lKSA9PiB7XHJcbiAgICAgICAgIHRoaXMudXNlck5hbWVCdXR0b24uaW5uZXJUZXh0ID0gJ0hpICcgKyB1c2VyTmFtZTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLm9uU2hvdyA9ICgpID0+IHtcclxuICAgICAgICAgdGhpcy51c2VyTmFtZUJ1dHRvbi5pbm5lclRleHQgPSAnSGkgJyArIHRoaXMuc3RvcmFnZS5nZXQoU3RvcmFnZUl0ZW0uVXNlck5hbWUpO1xyXG5cclxuICAgICAgICAgaWYgKHRoaXMuc3F1aW50LmNvbm5lY3RlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0KCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY29ubmVjdCgpOiB2b2lkIHtcclxuICAgICAgaWYgKHRoaXMuc3F1aW50LmNvbm5lY3RlZCkge1xyXG4gICAgICAgICBjb25zb2xlLmVycm9yKCdTdGFydERpYWxvZy5jb25uZWN0KCkgY2FsbGVkLCBidXQgYWxyZWFkeSBjb25uZWN0ZWQnKTtcclxuICAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnNob3dDb25uZWN0aW5nTXNnID0gdHJ1ZTtcclxuICAgICAgdGhpcy52aWV3TGlzdEJveC5jbGVhcigpO1xyXG5cclxuICAgICAgdGhpcy5zcXVpbnQuY29ubmVjdChTcXVpbnQudXJsLCB0aGlzLnN0b3JhZ2UuZ2V0KFN0b3JhZ2VJdGVtLlVzZXJOYW1lKSlcclxuICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDb25uZWN0aW5nTXNnID0gZmFsc2U7XHJcbiAgICAgICAgIH0pXHJcbiAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDYW5ub3QgY29ubmVjdCB0byBzZXJ2ZXIsIHRyeWluZyBhZ2FpbiBpbiAxIHNlYzogJyArIGVycik7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICB0aGlzLmNvbm5lY3QoKTtcclxuICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIG9uU2Vzc2lvbkxpc3Qoc2Vzc2lvbnM6IElTZXNzaW9uSW5mb0Jhc2ljW10pIHtcclxuXHJcbiAgICAgIHRoaXMudmlld0xpc3RCb3guY2xlYXIoKTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXNzaW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICB0aGlzLnZpZXdMaXN0Qm94LmFkZEl0ZW0oc2Vzc2lvbnNbaV0udGl0bGUsIHNlc3Npb25zW2ldLnNlc3Npb25JZCk7XHJcbiAgICAgIH1cclxuICAgfVxyXG59IiwiaW1wb3J0IHsgRXZlbnRNYW5hZ2VyIH0gZnJvbSAnLi9FdmVudE1hbmFnZXInO1xyXG5cclxuZXhwb3J0IGVudW0gU3RvcmFnZUl0ZW0ge1xyXG4gICBVc2VyTmFtZSA9ICdVc2VyTmFtZScsXHJcbiAgIFNvdW5kID0gJ1NvdW5kJyxcclxuICAgQ2FtZXJhID0gJ0NhbWVyYScsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFN0b3JhZ2VJdGVtQ2hhbmdlSGFuZGxlciA9ICh2YWx1ZTogc3RyaW5nLCBvbGRWYWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0b3JhZ2VXaXRoRXZlbnRzIHtcclxuICAgcHJpdmF0ZSBldmVudE1hbmFnZXIgPSBuZXcgRXZlbnRNYW5hZ2VyKCk7XHJcblxyXG4gICBwdWJsaWMgb24oaXRlbTogc3RyaW5nLCBoYW5kbGVyOiBTdG9yYWdlSXRlbUNoYW5nZUhhbmRsZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5ldmVudE1hbmFnZXIub24oaXRlbSwgaGFuZGxlcik7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzZXQoaXRlbTogU3RvcmFnZUl0ZW0sIHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuXHJcbiAgICAgIGxldCBvbGRWYWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGl0ZW0pO1xyXG5cclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oaXRlbSwgdmFsdWUpO1xyXG5cclxuICAgICAgaWYgKHZhbHVlICE9PSBvbGRWYWx1ZSkge1xyXG4gICAgICAgICB0aGlzLmV2ZW50TWFuYWdlci5lbWl0KGl0ZW0sIHZhbHVlLCBvbGRWYWx1ZSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldChpdGVtOiBTdG9yYWdlSXRlbSk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShpdGVtKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGhhcyhpdGVtOiBTdG9yYWdlSXRlbSk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXQoaXRlbSkgIT09IG51bGw7XHJcbiAgIH1cclxufSIsImltcG9ydCB7IGRlYnVnIH0gZnJvbSAnLi9TcXVpbnRBcHAnO1xyXG5pbXBvcnQgeyBTcXVpbnQgfSBmcm9tICcuL1NxdWludCc7XHJcbmltcG9ydCB7IFN0b3B3YXRjaCB9IGZyb20gJy4uLy4uL1V0aWwvU3RvcHdhdGNoJztcclxuaW1wb3J0IHsgQmFuZHdpZHRoVHJhY2tlciB9IGZyb20gJy4vQmFuZHdpZHRoVHJhY2tlcic7XHJcbmltcG9ydCB7IFNxdWludFN0cmluZ3MgfSBmcm9tICcuL1NxdWludFN0cmluZ3MnO1xyXG5cclxuY29uc3QgTUFYX0ZQUyA9IDEwO1xyXG5cclxuZXhwb3J0IHR5cGUgVGFrZVBpY3R1cmVIYW5kbGVyID0gKCkgPT4gUHJvbWlzZTxCbG9iPjtcclxuXHJcbmV4cG9ydCBjbGFzcyBVcGxvYWRlciB7XHJcbiAgIHByaXZhdGUgdGFrZVBpY3R1cmU6IFRha2VQaWN0dXJlSGFuZGxlcjtcclxuXHJcbiAgIHByaXZhdGUgcnVubmluZyA9IHRydWU7XHJcbiAgIHByaXZhdGUgcGF1c2VkID0gZmFsc2U7XHJcbiAgIHByaXZhdGUgYnVzeSA9IGZhbHNlO1xyXG4gICBwcml2YXRlIHNxdWludDogU3F1aW50O1xyXG4gICBwcml2YXRlIHRpbWVyID0gbmV3IFN0b3B3YXRjaCgpO1xyXG4gICBwcml2YXRlIGJhbmR3aWR0aFRyYWNrZXIgPSBuZXcgQmFuZHdpZHRoVHJhY2tlcigpO1xyXG4gICBwcml2YXRlIGJvb3N0RnBzID0gZmFsc2U7XHJcbiAgIHByaXZhdGUgaGFkVG9XYWl0ID0gZmFsc2U7XHJcblxyXG4gICBwdWJsaWMgZ2V0IGZwcygpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5iYW5kd2lkdGhUcmFja2VyLmZwcztcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBtZWdhQml0c1BlclNlYygpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5iYW5kd2lkdGhUcmFja2VyLm1lZ2FCaXRzUGVyU2VjO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGdldCByZWNvbW1lbmRlZE1zUGVyRnJhbWUoKTogbnVtYmVyIHtcclxuICAgICAgLy8gaWYgd2UgaGF2ZW4ndCBjb21wdXRlZCBhIGJhbmR3aWR0aCB5ZXQsIGp1c3QgZ28gd2l0aCAxMCBGUFNcclxuICAgICAgaWYgKHRoaXMuYmFuZHdpZHRoVHJhY2tlci5udW1TYW1wbGVzID09PSAwKSB7XHJcbiAgICAgICAgIHJldHVybiAxMDAwIC8gTUFYX0ZQUztcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gY29udmVydCBieXRlcyB0byBiaXRzIHRvIGdldCBNYnBzXHJcbiAgICAgIGNvbnN0IGxhc3RTaXplQml0cyA9IDggKiB0aGlzLmJhbmR3aWR0aFRyYWNrZXIubGFzdFRyYW5zZmVyQnl0ZXM7XHJcbiAgICAgIGNvbnN0IGJpdHNQZXJNcyA9ICgxMDAwICogMTAwMCkgKiB0aGlzLmJhbmR3aWR0aFRyYWNrZXIubWVnYUJpdHNQZXJTZWMgLyAxMDAwO1xyXG5cclxuICAgICAgbGV0IGNhbGNNcyA9IGxhc3RTaXplQml0cyAvIGJpdHNQZXJNcztcclxuXHJcbiAgICAgIGlmICh0aGlzLmJvb3N0RnBzKSB7XHJcbiAgICAgICAgIGNhbGNNcyA9IDAuNSAqIGNhbGNNcztcclxuICAgICAgfVxyXG4gICAgICBjYWxjTXMgPSBNYXRoLm1pbihjYWxjTXMsIDMwMCk7XHJcblxyXG4gICAgICAvLyB0aGUgYWN0dWFsIHJhdGUsIG9yIGEgbWF4IEZQUyBvZiAxMFxyXG4gICAgICByZXR1cm4gTWF0aC5tYXgoMTAwMCAvIE1BWF9GUFMsIGNhbGNNcyk7XHJcblxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3Ioc3F1aW50OiBTcXVpbnQsIHRha2VQaWN0dXJlOiBUYWtlUGljdHVyZUhhbmRsZXIpIHtcclxuICAgICAgdGhpcy5zcXVpbnQgPSBzcXVpbnQ7XHJcbiAgICAgIHRoaXMudGFrZVBpY3R1cmUgPSB0YWtlUGljdHVyZTtcclxuXHJcbiAgICAgIHRoaXMudXBsb2FkKCk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzdG9wKCk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy5ydW5uaW5nKSB7XHJcbiAgICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBwYXVzZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5wYXVzZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLmJhbmR3aWR0aFRyYWNrZXIucGF1c2UoKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHJlc3VtZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5wYXVzZWQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5iYW5kd2lkdGhUcmFja2VyLnJlc3VtZSgpO1xyXG4gICAgICB0aGlzLnVwbG9hZCgpO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHVwbG9hZChkZWxheSA9IDApIHtcclxuXHJcbiAgICAgIGlmICghdGhpcy5ydW5uaW5nKSB7XHJcbiAgICAgICAgIC8vIHRoaXMgY2FuIGhhcHBlbiBmb3IgYSBudW1iZXIgb2YgcmVhc29ucywgZS5nLiB3aGlsZSB3ZSB3ZXJlIHdhaXRpbmcgZm9yIHRoZVxyXG4gICAgICAgICAvLyBuZXh0IGFuaW1hdGlvbiBmcmFtZSB0aGUgc29ja2V0IHdhcyBjbG9zZWQuXHJcbiAgICAgICAgIC8vZGVidWcoJ3VwbG9hZCgpIHRoaXMucnVubmluZz09PWZhbHNlLCByZXR1cm5pbmcnKTtcclxuICAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnBhdXNlZCkge1xyXG4gICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuYnVzeSkge1xyXG4gICAgICAgICBkZWJ1ZygndXBsb2FkKCkgY2FsbGVkIGJlZm9yZSBwcmV2aW91cyBjYWxsIHJldHVybmVkJyk7XHJcbiAgICAgICAgIC8vcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHsgdGhpcy51cGxvYWQoMTAwMCkgfSk7XHJcbiAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZGVsYXkgPiAwKSB7XHJcbiAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnVwbG9hZCgwKTtcclxuICAgICAgICAgfSwgZGVsYXkpO1xyXG4gICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuc3F1aW50LmNvbm5lY3RlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgdGhpcy51cGxvYWQoMTAwMCk7XHJcbiAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy50aW1lci5lbGFwc2VkTXMgPCB0aGlzLnJlY29tbWVuZGVkTXNQZXJGcmFtZSkge1xyXG4gICAgICAgICB0aGlzLnVwbG9hZCh0aGlzLnJlY29tbWVuZGVkTXNQZXJGcmFtZSAtIHRoaXMudGltZXIuZWxhcHNlZE1zKTtcclxuICAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICB0aGlzLnRpbWVyLnJlc3RhcnQoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gaWYgdGhpcyBpcyB0aGUgZmlyc3QgdGltZSB3ZSBnZXQgaGVyZSBhbmQgYnVmZmVyIGlzIHJlYWR5LCBib29zdC5cclxuICAgICAgaWYgKHRoaXMuaGFkVG9XYWl0ID09PSBmYWxzZSAmJiB0aGlzLnNxdWludC5idWZmZXJSZWFkeSkge1xyXG4gICAgICAgICB0aGlzLmJvb3N0RnBzID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCF0aGlzLnNxdWludC5idWZmZXJSZWFkeSkge1xyXG4gICAgICAgICB0aGlzLmhhZFRvV2FpdCA9IHRydWU7XHJcbiAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7IHRoaXMudXBsb2FkKCkgfSk7XHJcbiAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5oYWRUb1dhaXQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5idXN5ID0gdHJ1ZTtcclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgIGxldCBuZXh0RGVsYXkgPSAwO1xyXG4gICAgICAgICB0aGlzLnRha2VQaWN0dXJlKClcclxuICAgICAgICAgICAgLnRoZW4oKGJsb2I6IEJsb2IpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgIGlmIChibG9iID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgIG5leHREZWxheSA9IDEwMDA7XHJcbiAgICAgICAgICAgICAgICAgIGRlYnVnKCd0YWtlUGljdHVyZSBnZW5lcmF0ZWQgYSBudWxsIEJsb2InKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3F1aW50LmNvbm5lY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICB0aGlzLnNxdWludC5zZW5kSW1hZ2UoYmxvYik7XHJcbiAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFuZHdpZHRoVHJhY2tlci50aWNrKGJsb2Iuc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICBpZiAoZXJyID09PSBTcXVpbnRTdHJpbmdzLkNBTUVSQV9OT1RfUkVBRFkpIHtcclxuICAgICAgICAgICAgICAgICAgLy8gdGhpcyBoYXBwZW5zIHdoZW4gdGhlIGNhbWVyYSBpcyBiZWluZyBpbml0aWFsaXplZC4gSnVzdCB0cnlcclxuICAgICAgICAgICAgICAgICAgLy8gYWdhaW4gaW4gYSBzZWNvbmRcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgZGVidWcoJ0Nhbm5vdCBnZW5lcmF0ZSBpbWFnZSBmcm9tIHZpZGVvOiAnICsgZXJyKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBuZXh0RGVsYXkgPSAxMDAwO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgIHRoaXMuYnVzeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4geyB0aGlzLnVwbG9hZChuZXh0RGVsYXkpIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuZXhwZWN0ZWQgZXhjZXB0aW9uIGluIFVwbG9hZGVyLnVwbG9hZCgpOiAnICsgZXJyICsgJ1xcbicgKyBKU09OLnN0cmluZ2lmeShlcnIsIG51bGwsICcgJykpO1xyXG4gICAgICAgICB0aGlzLmJ1c3kgPSBmYWxzZTtcclxuICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHsgdGhpcy51cGxvYWQoMTAwMCkgfSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG59IiwiaW1wb3J0IHsgR1VJIH0gZnJvbSAnLi4vLi4vR1VJL0dVSSc7XHJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gJy4uLy4uL0dVSS9EaWFsb2cnO1xyXG5pbXBvcnQgeyBTdG9yYWdlV2l0aEV2ZW50cywgU3RvcmFnZUl0ZW0gfSBmcm9tICcuL1N0b3JhZ2VXaXRoRXZlbnRzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBVc2VyTmFtZURpYWxvZyBleHRlbmRzIERpYWxvZyB7XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IoXHJcbiAgICAgIHBhcmVudDogSFRNTERpdkVsZW1lbnQsXHJcbiAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VXaXRoRXZlbnRzLFxyXG4gICApIHtcclxuICAgICAgLy8gVXNlck5hbWVCYWNrZ3JvdW5kRGl2IGFuZCBVc2VyTmFtZURpYWxvZ0RpdlxyXG4gICAgICBzdXBlcihwYXJlbnQsICdVc2VyTmFtZScpO1xyXG5cclxuICAgICAgY29uc3QgdXNlck5hbWVHcm91cERpdiA9IEdVSS5jcmVhdGUoJ2RpdicsICdVc2VyTmFtZUdyb3VwRGl2JywgdGhpcy5kaWFsb2dEaXYpO1xyXG4gICAgICBjb25zdCB1c2VyTmFtZUxhYmVsID0gR1VJLmNyZWF0ZSgnbGFiZWwnLCAnVXNlck5hbWVMYWJlbCcsIHVzZXJOYW1lR3JvdXBEaXYpO1xyXG4gICAgICB1c2VyTmFtZUxhYmVsLmh0bWxGb3IgPSAnVXNlck5hbWVUZXh0SW5wdXQnO1xyXG4gICAgICB1c2VyTmFtZUxhYmVsLmlubmVyVGV4dCA9ICdOYW1lOic7XHJcbiAgICAgIGNvbnN0IHVzZXJOYW1lVGV4dElucHV0ID0gR1VJLmNyZWF0ZSgnaW5wdXQnLCAnVXNlck5hbWVUZXh0SW5wdXQnLCB1c2VyTmFtZUdyb3VwRGl2KTtcclxuICAgICAgdXNlck5hbWVUZXh0SW5wdXQudHlwZSA9ICd0ZXh0JztcclxuICAgICAgdXNlck5hbWVUZXh0SW5wdXQucGxhY2Vob2xkZXIgPSAnWW91ciBOYW1lJztcclxuICAgICAgdXNlck5hbWVUZXh0SW5wdXQudmFsdWUgPSBzdG9yYWdlLmdldChTdG9yYWdlSXRlbS5Vc2VyTmFtZSk7XHJcblxyXG4gICAgICB1c2VyTmFtZVRleHRJbnB1dC5vbmlucHV0ID0gKCkgPT4ge1xyXG4gICAgICAgICBva0J1dHRvbi5kaXNhYmxlZCA9ICh1c2VyTmFtZVRleHRJbnB1dC52YWx1ZS50cmltKCkubGVuZ3RoID09PSAwKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHVzZXJOYW1lVGV4dElucHV0Lm9ua2V5cHJlc3MgPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIG9rQnV0dG9uLmNsaWNrKCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIHRoaXMub25TaG93ID0gKCkgPT4ge1xyXG4gICAgICAgICB1c2VyTmFtZVRleHRJbnB1dC5mb2N1cygpO1xyXG4gICAgICAgICB1c2VyTmFtZVRleHRJbnB1dC5zZWxlY3QoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgb2tCdXR0b24gPSBHVUkuY3JlYXRlKCdidXR0b24nLCAnT2tCdXR0b24nLCB1c2VyTmFtZUdyb3VwRGl2KTtcclxuICAgICAgb2tCdXR0b24uY2xhc3NOYW1lID0gJ0J1dHRvbkNsYXNzJztcclxuICAgICAgb2tCdXR0b24uaW5uZXJUZXh0ID0gJ09LJztcclxuICAgICAgb2tCdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgIHN0b3JhZ2Uuc2V0KFN0b3JhZ2VJdGVtLlVzZXJOYW1lLCB1c2VyTmFtZVRleHRJbnB1dC52YWx1ZS50cmltKCkpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcclxuICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFZlcnNpb24ge1xyXG4gICBwdWJsaWMgc3RhdGljIE1ham9yID0gMDtcclxuICAgcHVibGljIHN0YXRpYyBNaW5vciA9IDA7XHJcbiAgIHB1YmxpYyBzdGF0aWMgQnVpbGQgPSAnMTEyYic7XHJcblxyXG4gICBwdWJsaWMgc3RhdGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiB0aGlzLk1ham9yICsgJy4nICsgdGhpcy5NaW5vciArICcuJyArIHRoaXMuQnVpbGQ7XHJcbiAgIH1cclxufSIsImV4cG9ydCB0eXBlIFdlYlNvY2tldENyZWF0ZUZ1bmN0aW9uID0gKHVybDogc3RyaW5nKSA9PiBXZWJTb2NrZXQ7XHJcblxyXG4vLyBXZWJTb2NrZXQgaXNuJ3QgZGVmaW5lZCBmb3IgdGVzdGluZy4gQ2FuIHdlIGRlZmluZSBhIHNoaW0/XHJcbmV4cG9ydCBlbnVtIFdlYlNvY2tldFJlYWR5U3RhdGUge1xyXG4gICBDT05ORUNUSU5HID0gMCxcclxuICAgT1BFTiA9IDEsXHJcbiAgIENMT1NJTkcgPSAyLFxyXG4gICBDTE9TRUQgPSAzXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBXZWJTb2NrZXRGYWN0b3J5IHtcclxuICAgcHVibGljIHN0YXRpYyBjcmVhdGU6IFdlYlNvY2tldENyZWF0ZUZ1bmN0aW9uO1xyXG59IiwiaW1wb3J0IHsgR1VJIH0gZnJvbSAnLi4vLi4vR1VJL0dVSSc7XHJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gJy4uLy4uL0dVSS9EaWFsb2cnO1xyXG5pbXBvcnQgeyBiYXNlVXJsIH0gZnJvbSAnLi4vLi4vVXRpbC9HbG9iYWxzJztcclxuXHJcbmV4cG9ydCB0eXBlIG9rSGFuZGxlciA9ICh1c2VyTmFtZTogc3RyaW5nKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIFdlbGNvbWVEaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKFxyXG4gICAgICBwYXJlbnQ6IEhUTUxEaXZFbGVtZW50LFxyXG4gICAgICBvbk9rOiBva0hhbmRsZXJcclxuICAgKSB7XHJcbiAgICAgIHN1cGVyKHBhcmVudCwgJ1dlbGNvbWUnKTtcclxuXHJcbiAgICAgIGNvbnN0IHRpdGxlRGl2ID0gR1VJLmNyZWF0ZSgnZGl2JywgJ1RpdGxlRGl2JywgdGhpcy5kaWFsb2dEaXYpO1xyXG4gICAgICB0aXRsZURpdi5jbGFzc05hbWUgPSAnRGlhbG9nVGl0bGVDbGFzcyc7XHJcbiAgICAgIHRpdGxlRGl2LmlubmVyVGV4dCA9ICdXZWxjb21lIHRvIFNxdWludCEnO1xyXG5cclxuICAgICAgLy9jb25zdCBib2R5RGl2ID0gR1VJLmNyZWF0ZSgnZGl2JywgJ0JvZHlEaXYnLCB0aGlzLmRpYWxvZ0Rpdik7XHJcbiAgICAgIGNvbnN0IGltZyA9IEdVSS5jcmVhdGUoJ2ltZycsICdTcXVpbnRJbWcnLCB0aGlzLmRpYWxvZ0Rpdik7XHJcbiAgICAgIGltZy5zcmMgPSBiYXNlVXJsKCkgKyAnaW1nL3NxdWludC5qcGcnO1xyXG5cclxuICAgICAgY29uc3QgdXNlck5hbWVHcm91cERpdiA9IEdVSS5jcmVhdGUoJ2RpdicsICdVc2VyTmFtZUdyb3VwRGl2JywgdGhpcy5kaWFsb2dEaXYpO1xyXG4gICAgICBjb25zdCB1c2VyTmFtZVRleHRJbnB1dCA9IEdVSS5jcmVhdGUoJ2lucHV0JywgJ1VzZXJOYW1lVGV4dElucHV0JywgdXNlck5hbWVHcm91cERpdik7XHJcbiAgICAgIHVzZXJOYW1lVGV4dElucHV0LnR5cGUgPSAndGV4dCc7XHJcbiAgICAgIHVzZXJOYW1lVGV4dElucHV0LnBsYWNlaG9sZGVyID0gJ1lvdXIgTmFtZSc7XHJcblxyXG4gICAgICB1c2VyTmFtZVRleHRJbnB1dC5vbmlucHV0ID0gKCkgPT4ge1xyXG4gICAgICAgICBva0J1dHRvbi5kaXNhYmxlZCA9ICh1c2VyTmFtZVRleHRJbnB1dC52YWx1ZS50cmltKCkubGVuZ3RoID09PSAwKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHVzZXJOYW1lVGV4dElucHV0Lm9ua2V5cHJlc3MgPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIG9rQnV0dG9uLmNsaWNrKCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5vblNob3cgPSAoKSA9PiB7XHJcbiAgICAgICAgIHVzZXJOYW1lVGV4dElucHV0LnNlbGVjdCgpO1xyXG4gICAgICAgICB1c2VyTmFtZVRleHRJbnB1dC5mb2N1cygpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBva0J1dHRvbiA9IEdVSS5jcmVhdGUoJ2J1dHRvbicsICdPa0J1dHRvbicsIHVzZXJOYW1lR3JvdXBEaXYpO1xyXG4gICAgICBva0J1dHRvbi5pbm5lclRleHQgPSAnU3RhcnQgU3F1aW50aW5nLi4uJztcclxuICAgICAgb2tCdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICAgY29uc3QgdXNlck5hbWUgPSB1c2VyTmFtZVRleHRJbnB1dC52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgIGlmICh1c2VyTmFtZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBvbk9rKHVzZXJOYW1lVGV4dElucHV0LnZhbHVlLnRyaW0oKSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgb2tCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICBva0J1dHRvbi5jbGFzc05hbWUgPSAnQnV0dG9uQ2xhc3MnO1xyXG4gICB9XHJcbn0iLCJpbXBvcnQgeyBHVUkgfSBmcm9tICcuLi8uLi9HVUkvR1VJJztcclxuaW1wb3J0IHsgUG9pbnRlckV2ZW50SGFuZGxlciB9IGZyb20gJy4uLy4uL0dVSS9Qb2ludGVyRXZlbnRIYW5kbGVyJztcclxuaW1wb3J0IHsgVmVjMiB9IGZyb20gJy4uLy4uL1V0aWwzRC9WZWMnO1xyXG5cclxuZXhwb3J0IHR5cGUgQ2hhbmdlSGFuZGxlciA9ICgpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgY2xhc3MgWm9vbVBhbmVsIHtcclxuICAgcHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG5cclxuICAgcHVibGljIG9uQ2hhbmdlOiBDaGFuZ2VIYW5kbGVyID0gbnVsbDtcclxuXHJcbiAgIHByaXZhdGUgX3pvb20gPSAxO1xyXG4gICBwcml2YXRlIG1pblpvb20gPSAwLjU7XHJcbiAgIHByaXZhdGUgbWF4Wm9vbSA9IDU7XHJcblxyXG4gICBwdWJsaWMgZ2V0IHpvb20oKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3pvb207XHJcbiAgIH1cclxuICAgcHVibGljIHNldCB6b29tKHZhbHVlOiBudW1iZXIpIHtcclxuXHJcbiAgICAgIGlmICh0aGlzLl96b29tICE9PSB2YWx1ZSkge1xyXG4gICAgICAgICB0aGlzLl96b29tID0gdmFsdWU7XHJcbiAgICAgICAgIHRoaXMuZHJhdygpO1xyXG5cclxuICAgICAgICAgaWYgKHRoaXMub25DaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZSgpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKHBhcmVudDogSFRNTEVsZW1lbnQpIHtcclxuXHJcbiAgICAgIHRoaXMuY2FudmFzID0gR1VJLmNyZWF0ZSgnY2FudmFzJywgJ1pvb21DYW52YXMnLCBwYXJlbnQpO1xyXG5cclxuICAgICAgbGV0IGhhbmRsZXIgPSBuZXcgUG9pbnRlckV2ZW50SGFuZGxlcih0aGlzLmNhbnZhcyk7XHJcblxyXG4gICAgICBsZXQgZHJhZ2dpbmcgPSBmYWxzZTtcclxuICAgICAgbGV0IG9mZnNldCA9IC0xO1xyXG4gICAgICBoYW5kbGVyLm9uRG93biA9IChwb3M6IFZlYzIpID0+IHtcclxuICAgICAgICAgZHJhZ2dpbmcgPSB0cnVlO1xyXG4gICAgICAgICBvZmZzZXQgPSBwb3MueSAtIHRoaXMuem9vbVRvWSh0aGlzLl96b29tKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaGFuZGxlci5vbk1vdmUgPSAocG9zOiBWZWMyKSA9PiB7XHJcbiAgICAgICAgIGxldCBjZW50ZXIgPSBuZXcgVmVjMihbdGhpcy5jYW52YXMud2lkdGggLyAyLCB0aGlzLnpvb21Ub1kodGhpcy5fem9vbSldKTtcclxuICAgICAgICAgbGV0IHJhZGl1cyA9IHRoaXMuY2FudmFzLndpZHRoIC8gMjtcclxuICAgICAgICAgaWYgKHBvcy5kaXN0YW5jZShjZW50ZXIpIDwgcmFkaXVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmN1cnNvciA9ICducy1yZXNpemUnO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaGFuZGxlci5vbkRyYWcgPSAocG9zOiBWZWMyLCBkZWx0YTogVmVjMikgPT4ge1xyXG5cclxuICAgICAgICAgaWYgKGRyYWdnaW5nKSB7XHJcbiAgICAgICAgICAgIGxldCB5ID0gcG9zLnkgLSBvZmZzZXQ7XHJcbiAgICAgICAgICAgIHRoaXMuem9vbSA9IHRoaXMueVRvWm9vbSh5KTtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBoYW5kbGVyLm9uVXAgPSAocG9zOiBWZWMyKSA9PiB7XHJcbiAgICAgICAgIGRyYWdnaW5nID0gZmFsc2U7XHJcbiAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuZHJhdygpO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHpvb21Ub1koem9vbTogbnVtYmVyKTogbnVtYmVyIHtcclxuXHJcbiAgICAgIHpvb20gPSBNYXRoLm1pbih0aGlzLm1heFpvb20sIE1hdGgubWF4KHRoaXMubWluWm9vbSwgdGhpcy56b29tKSk7XHJcblxyXG4gICAgICBsZXQgaGVpZ2h0ID0gdGhpcy5jYW52YXMuaGVpZ2h0O1xyXG4gICAgICBsZXQgcmFkaXVzID0gdGhpcy5jYW52YXMud2lkdGggLyAyO1xyXG4gICAgICBsZXQgem9vbVJhbmdlID0gdGhpcy5tYXhab29tIC0gdGhpcy5taW5ab29tO1xyXG5cclxuICAgICAgcmV0dXJuIHJhZGl1cyArICgodGhpcy5tYXhab29tIC0gem9vbSkgLyAoem9vbVJhbmdlKSkgKiAoaGVpZ2h0IC0gMiAqIHJhZGl1cyk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgeVRvWm9vbSh5OiBudW1iZXIpOiBudW1iZXIge1xyXG5cclxuICAgICAgbGV0IGhlaWdodCA9IHRoaXMuY2FudmFzLmhlaWdodDtcclxuICAgICAgbGV0IHJhZGl1cyA9IHRoaXMuY2FudmFzLndpZHRoIC8gMjtcclxuICAgICAgbGV0IHpvb21SYW5nZSA9IHRoaXMubWF4Wm9vbSAtIHRoaXMubWluWm9vbTtcclxuXHJcbiAgICAgIGxldCB6b29tID0gdGhpcy5tYXhab29tIC0gKHkgLSByYWRpdXMpIC8gKGhlaWdodCAtIDIgKiByYWRpdXMpICogKHpvb21SYW5nZSk7XHJcbiAgICAgIHJldHVybiBNYXRoLm1pbih0aGlzLm1heFpvb20sIE1hdGgubWF4KHRoaXMubWluWm9vbSwgem9vbSkpO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGRyYXcoKTogdm9pZCB7XHJcblxyXG4gICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMuY2FudmFzLmNsaWVudFdpZHRoO1xyXG4gICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmNhbnZhcy5jbGllbnRIZWlnaHQ7XHJcbiAgICAgIGxldCB3aWR0aCA9IHRoaXMuY2FudmFzLndpZHRoO1xyXG5cclxuICAgICAgbGV0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNhbnZhcyk7XHJcblxyXG4gICAgICAvLyBjbGVhciBldmVyeXRoaW5nXHJcbiAgICAgIGxldCBjdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuYmFja2dyb3VuZENvbG9yID8/ICdsaWdodGdyYXknO1xyXG4gICAgICBjdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAvLyBkcmF3IG1hZ25pZnlpbmcgZ2xhc3NcclxuICAgICAgbGV0IHggPSB3aWR0aCAvIDI7XHJcbiAgICAgIGxldCB5ID0gdGhpcy56b29tVG9ZKHRoaXMuX3pvb20pO1xyXG4gICAgICBsZXQgcmFkaXVzID0gd2lkdGggLyAyO1xyXG5cclxuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xyXG4gICAgICBjdHguZmlsbFN0eWxlID0gJ3doaXRlJztcclxuICAgICAgY3R4Lm1vdmVUbyh4LCB5KTtcclxuICAgICAgY3R4LmxpbmVUbyh4ICsgMC40NSAqIHJhZGl1cywgeSArIDAuNDUgKiByYWRpdXMpO1xyXG4gICAgICBjdHguc3Ryb2tlKCk7XHJcblxyXG4gICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgIGN0eC5hcmMoeCAtIDAuMiAqIHJhZGl1cywgeSAtIDAuMiAqIHJhZGl1cywgMC40ICogcmFkaXVzLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgY3R4LmZpbGwoKTtcclxuICAgfVxyXG59IiwiaW1wb3J0IHsgZ2xPYmplY3QgfSBmcm9tICcuL2dsT2JqZWN0JztcclxuaW1wb3J0IHsgVmVjMywgVmVjMiB9IGZyb20gJy4uLy4uL1V0aWwzRC9WZWMnO1xyXG5pbXBvcnQgeyBJUGVyc3BlY3RpdmVQcm92aWRlciB9IGZyb20gJy4vUGVyc3BlY3RpdmVDdHJsJztcclxuaW1wb3J0IHsgSU5JVElBTF9FWUUgfSBmcm9tICcuL1JlbmRlcmVyJztcclxuaW1wb3J0IHsgTWF0NCB9IGZyb20gJy4uLy4uL1V0aWwzRC9NYXQnO1xyXG5pbXBvcnQgeyB0b0RlZyB9IGZyb20gJy4uLy4uL1V0aWwvR2xvYmFscyc7XHJcbmltcG9ydCB7IGdsU3BhY2UgfSBmcm9tICcuLi8uLi9nbC9nbFNwYWNlJztcclxuXHJcbi8vIFdoZW4gdmlld2luZyBhbiBvYmplY3QsIHZpZXcgdGhpcyBtdWNoIG1vcmUgdGhhbiB0aGUgb2JqZWN0XHJcbmNvbnN0IEJVRkZFUl9GQUNUT1IgPSAxLjE7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTaXplUHJvdmlkZXIge1xyXG4gICByZWFkb25seSBtYXhXaWR0aDogbnVtYmVyO1xyXG4gICByZWFkb25seSBtYXhIZWlnaHQ6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9ialNpemVQcm92aWRlciBpbXBsZW1lbnRzIElTaXplUHJvdmlkZXIge1xyXG4gICBwcml2YXRlIG9iajogZ2xPYmplY3Q7XHJcblxyXG4gICBwdWJsaWMgZ2V0IG1heFdpZHRoKCk6IG51bWJlciB7XHJcbiAgICAgIC8vbGV0IHhCb3ggPSB0aGlzLm9iai5nZXRCb3VuZGluZ1B0cygpO1xyXG4gICAgICBjb25zdCB4Qm94ID0gdGhpcy5vYmouZ2V0Qm91bmRpbmdCb3goKTtcclxuICAgICAgcmV0dXJuIEJVRkZFUl9GQUNUT1IgKiBNYXRoLnNxcnQoeEJveC53aWR0aCAqIHhCb3gud2lkdGggKyB4Qm94LmRlcHRoICogeEJveC5kZXB0aCk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgbWF4SGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgIGNvbnN0IHhCb3ggPSB0aGlzLm9iai5nZXRCb3VuZGluZ0JveCgpO1xyXG4gICAgICByZXR1cm4gQlVGRkVSX0ZBQ1RPUiAqIE1hdGguc3FydCh4Qm94LmhlaWdodCAqIHhCb3guaGVpZ2h0ICsgeEJveC5kZXB0aCAqIHhCb3guZGVwdGgpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3Iob2JqOiBnbE9iamVjdCkge1xyXG4gICAgICB0aGlzLm9iaiA9IG9iajtcclxuICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRml4ZWRTaXplUHJvdmlkZXIgaW1wbGVtZW50cyBJU2l6ZVByb3ZpZGVyIHtcclxuICAgcHVibGljIHJlYWRvbmx5IG1heFdpZHRoOiBudW1iZXI7XHJcbiAgIHB1YmxpYyByZWFkb25seSBtYXhIZWlnaHQ6IG51bWJlcjtcclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihtYXhXaWR0aDogbnVtYmVyLCBtYXhIZWlnaHQ6IG51bWJlcikge1xyXG4gICAgICB0aGlzLm1heFdpZHRoID0gbWF4V2lkdGg7XHJcbiAgICAgIHRoaXMubWF4SGVpZ2h0ID0gbWF4SGVpZ2h0O1xyXG4gICB9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUNhbWVyYVNldHRpbmdzIHtcclxuICAgc2l6ZVByb3ZpZGVyPzogSVNpemVQcm92aWRlcixcclxuICAgZXllPzogVmVjMyxcclxuICAgbG9va0F0PzogVmVjMyxcclxuICAgem9vbUZhY3Rvcj86IG51bWJlcixcclxuICAgdXNlT3J0aG9ncmFwaGljPzogYm9vbGVhbixcclxuICAgZm92PzogbnVtYmVyLFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FtZXJhIGltcGxlbWVudHMgSVBlcnNwZWN0aXZlUHJvdmlkZXIge1xyXG5cclxuICAgcHVibGljIGV5ZSA9IG5ldyBWZWMzKElOSVRJQUxfRVlFKTtcclxuICAgcHVibGljIGxvb2tBdCA9IFZlYzMub3JpZ2luO1xyXG4gICBwdWJsaWMgem9vbUZhY3RvciA9IDE7XHJcbiAgIHB1YmxpYyB1c2VPcnRob2dyYXBoaWMgPSBmYWxzZTtcclxuICAgcHVibGljIGZvdjogbnVtYmVyO1xyXG4gICBwdWJsaWMgc2l6ZVByb3ZpZGVyOiBJU2l6ZVByb3ZpZGVyO1xyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKHNldHRpbmdzPzogSUNhbWVyYVNldHRpbmdzKSB7XHJcbiAgICAgIGlmIChzZXR0aW5ncykge1xyXG4gICAgICAgICB0aGlzLnNpemVQcm92aWRlciA9IHNldHRpbmdzLnNpemVQcm92aWRlciA/PyB0aGlzLnNpemVQcm92aWRlcjtcclxuICAgICAgICAgdGhpcy5leWUgPSBzZXR0aW5ncy5leWUgPz8gdGhpcy5leWU7XHJcbiAgICAgICAgIHRoaXMubG9va0F0ID0gc2V0dGluZ3MubG9va0F0ID8/IHRoaXMubG9va0F0O1xyXG4gICAgICAgICB0aGlzLnpvb21GYWN0b3IgPSBzZXR0aW5ncy56b29tRmFjdG9yID8/IHRoaXMuem9vbUZhY3RvcjtcclxuICAgICAgICAgdGhpcy51c2VPcnRob2dyYXBoaWMgPSBzZXR0aW5ncy51c2VPcnRob2dyYXBoaWMgPz8gdGhpcy51c2VPcnRob2dyYXBoaWM7XHJcbiAgICAgICAgIHRoaXMuZm92ID0gc2V0dGluZ3MuZm92ID8/IHRoaXMuZm92O1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXRQcm9qZWN0aW9uKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpOiBNYXQ0IHtcclxuXHJcbiAgICAgIGxldCBwcm9qZWN0aW9uOiBNYXQ0O1xyXG4gICAgICBsZXQgc3BhY2UgPSB0aGlzLmdldFZpZXdTcGFjZShnbCk7XHJcblxyXG4gICAgICBpZiAodGhpcy51c2VPcnRob2dyYXBoaWMpIHtcclxuICAgICAgICAgcHJvamVjdGlvbiA9IE1hdDQubWFrZU9ydGhvKFxyXG4gICAgICAgICAgICBzcGFjZS5taW4ueCxcclxuICAgICAgICAgICAgc3BhY2UubWF4LngsXHJcbiAgICAgICAgICAgIHNwYWNlLm1pbi55LFxyXG4gICAgICAgICAgICBzcGFjZS5tYXgueSxcclxuICAgICAgICAgICAgc3BhY2UubWluLnosXHJcbiAgICAgICAgICAgIHNwYWNlLm1heC56XHJcbiAgICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIGNvbnN0IGV5ZSA9IHRoaXMuZXllO1xyXG4gICAgICAgICBjb25zdCB1cCA9IG5ldyBWZWMzKFswLCAxLCAwXSk7XHJcbiAgICAgICAgIGNvbnN0IG1hdCA9IE1hdDQubWFrZUxvb2tBdChleWUsIHRoaXMubG9va0F0LCB1cCk7XHJcblxyXG4gICAgICAgICB0aGlzLmZvdiA9IDIgKiB0b0RlZyhNYXRoLmF0YW4yKHNwYWNlLmhlaWdodCAvIDIsIGV5ZS56KSk7XHJcbiAgICAgICAgIGNvbnN0IG5lYXIgPSAwLjE7XHJcbiAgICAgICAgIGNvbnN0IGZhciA9IDIwO1xyXG4gICAgICAgICBjb25zdCBhciA9IHNwYWNlLndpZHRoIC8gc3BhY2UuaGVpZ2h0O1xyXG4gICAgICAgICBwcm9qZWN0aW9uID0gTWF0NC5tYWtlUGVyc3BlY3RpdmUodGhpcy5mb3YsIGFyLCBuZWFyLCBmYXIpLm11bHRNKG1hdCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBwcm9qZWN0aW9uO1xyXG4gICB9XHJcblxyXG4gICAvL1xyXG4gICAvLyBUaGUgZnVuY3Rpb25zIGJlbG93IGNoYW5nZSBvdXIgdmlldyBvZiB0aGUgbW9kZWxcclxuICAgLy9cclxuICAgcHVibGljIHpvb20oem9vbTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuem9vbUZhY3RvciAqPSB6b29tO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgdHJhbnNsYXRlKGRlbHRhOiBWZWMyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZXllLnggLT0gZGVsdGEueCAvIHRoaXMuem9vbUZhY3RvcjtcclxuICAgICAgdGhpcy5leWUueSAtPSBkZWx0YS55IC8gdGhpcy56b29tRmFjdG9yO1xyXG4gICAgICB0aGlzLmxvb2tBdC54IC09IGRlbHRhLnggLyB0aGlzLnpvb21GYWN0b3I7XHJcbiAgICAgIHRoaXMubG9va0F0LnkgLT0gZGVsdGEueSAvIHRoaXMuem9vbUZhY3RvcjtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENsaXBzcGFjZSBpcyBkZWZpbmVkIGFzIGEgcmFuZ2Ugb2YgWy0xLDFdIGluIHRoZSBzbWFsbGVyIG9mIHRoZSB3aWR0aCBhbmQgaGVpZ2h0LlxyXG4gICAgKiBUaGUgb3RoZXIgZGltZW5zaW9ucyBpcyBzY2FsZWQgdG8gbWF0Y2ggdGhlIGFzcGVjdCByYXRpbyBvZiB0aGUgY2FudmFzXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgZ2V0Q2xpcFNwYWNlKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpOiBnbFNwYWNlIHtcclxuXHJcbiAgICAgIGNvbnN0IGFyID0gZ2wuY2FudmFzLndpZHRoIC8gZ2wuY2FudmFzLmhlaWdodDtcclxuXHJcbiAgICAgIGlmIChhciA+IDEpIHtcclxuICAgICAgICAgcmV0dXJuIG5ldyBnbFNwYWNlKG5ldyBWZWMzKFstYXIsIC0xLCAxMDBdKSwgbmV3IFZlYzMoW2FyLCAxLCAtMTAwXSkpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICByZXR1cm4gbmV3IGdsU3BhY2UobmV3IFZlYzMoWy0xLCAtKDEgLyBhciksIDEwMF0pLCBuZXcgVmVjMyhbMSwgKDEgLyBhciksIC0xMDBdKSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFZpZXcgc3BhY2UgaXMgdGhlIHdvcmxkIGNvb3JkaW5hdGUgc3BhY2Ugb2Ygd2hhdCBjYW4gYmUgY3VycmVudGx5IHZpZXdlZC5cclxuICAgICovXHJcbiAgIHB1YmxpYyBnZXRWaWV3U3BhY2UoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCk6IGdsU3BhY2Uge1xyXG4gICAgICBjb25zdCB3aW5BUiA9IGdsLmNhbnZhcy53aWR0aCAvIGdsLmNhbnZhcy5oZWlnaHQ7XHJcblxyXG4gICAgICBjb25zdCBvYmpNYXhXaWR0aCA9IHRoaXMuc2l6ZVByb3ZpZGVyLm1heFdpZHRoO1xyXG4gICAgICBjb25zdCBvYmpNYXhIZWlnaHQgPSB0aGlzLnNpemVQcm92aWRlci5tYXhIZWlnaHQ7XHJcbiAgICAgIGNvbnN0IG9iakFSID0gb2JqTWF4V2lkdGggLyBvYmpNYXhIZWlnaHQ7XHJcblxyXG4gICAgICBsZXQgZGVzaXJlZFdpZHRoO1xyXG4gICAgICBsZXQgZGVzaXJlZEhlaWdodDtcclxuICAgICAgaWYgKG9iakFSIDwgd2luQVIpIHtcclxuICAgICAgICAgLy8gbWFrZSB0aGUgb2JqZWN0IGhlaWdodCBmaXRcclxuICAgICAgICAgZGVzaXJlZEhlaWdodCA9IG9iak1heEhlaWdodDtcclxuICAgICAgICAgZGVzaXJlZFdpZHRoID0gb2JqTWF4SGVpZ2h0ICogd2luQVI7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIC8vIG1ha2UgdGhlIG9iamVjdCB3aWR0aCBmaXRcclxuICAgICAgICAgZGVzaXJlZEhlaWdodCA9IG9iak1heFdpZHRoIC8gd2luQVI7XHJcbiAgICAgICAgIGRlc2lyZWRXaWR0aCA9IG9iak1heFdpZHRoO1xyXG4gICAgICB9XHJcbiAgICAgIGRlc2lyZWRIZWlnaHQgLz0gdGhpcy56b29tRmFjdG9yO1xyXG4gICAgICBkZXNpcmVkV2lkdGggLz0gdGhpcy56b29tRmFjdG9yO1xyXG5cclxuICAgICAgY29uc3QgY2xpcFNwYWNlID0gdGhpcy5nZXRDbGlwU3BhY2UoZ2wpO1xyXG4gICAgICBjb25zdCBtaW4gPSBuZXcgVmVjMyhbXHJcbiAgICAgICAgIC1kZXNpcmVkV2lkdGggLyAyIC0gdGhpcy5sb29rQXQueCxcclxuICAgICAgICAgLWRlc2lyZWRIZWlnaHQgLyAyIC0gdGhpcy5sb29rQXQueSxcclxuICAgICAgICAgY2xpcFNwYWNlLm5lYXIgKyB0aGlzLmxvb2tBdC56LFxyXG4gICAgICBdKTtcclxuICAgICAgY29uc3QgbWF4ID0gbmV3IFZlYzMoW1xyXG4gICAgICAgICBkZXNpcmVkV2lkdGggLyAyIC0gdGhpcy5sb29rQXQueCxcclxuICAgICAgICAgZGVzaXJlZEhlaWdodCAvIDIgLSB0aGlzLmxvb2tBdC55LFxyXG4gICAgICAgICBjbGlwU3BhY2UuZmFyICsgdGhpcy5sb29rQXQueixcclxuICAgICAgXSlcclxuICAgICAgcmV0dXJuIG5ldyBnbFNwYWNlKG1pbiwgbWF4KTtcclxuICAgfVxyXG59XHJcbiIsIi8vIHNwZWNpZnkgbG9hZGVyIGFuZCBvcHRpb25zIGhlcmUuIFRoaXMgdmFsdWUgbXVzdCBtYXRjaCB0aGVcclxuLy8gY29udGVudHMgb2Ygd29ya2VyLmQudHNcclxuaW1wb3J0IExvYWRlcldvcmtlciBmcm9tICd3b3JrZXItbG9hZGVyP25hbWU9TG9hZGVyV29ya2VyLndvcmtlci5qcyEuL0xvYWRlcldvcmtlcic7XHJcbmltcG9ydCB7IFN0YXR1c0Z1bmN0aW9uLCB0b1JhZCB9IGZyb20gJy4uLy4uL1V0aWwvR2xvYmFscyc7XHJcbmltcG9ydCB7IFRyaWFuZ2xlT2JqIH0gZnJvbSAnLi4vLi4vVXRpbDNEL1RyaWFuZ2xlT2JqJztcclxuaW1wb3J0IHsgZ2xPYmplY3QgfSBmcm9tICcuL2dsT2JqZWN0JztcclxuXHJcbi8qKlxyXG4gKiBDbGFzcyBmb3IgZG9pbmcgdGhlIHdvcmsgb2YgbG9hZGluZyBhIGZpbGUgaW50byBhIGdsT2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTW9kZWxMb2FkZXIge1xyXG5cclxuICAgcHJpdmF0ZSBfbG9hZGluZyA9IGZhbHNlO1xyXG5cclxuICAgLyoqXHJcbiAgICAqIFJldHVybnMgdHJ1ZSBpZiBhIGZpbGUgaXMgY3VycmVudGx5IGJlaW5nIGxvYWRlZFxyXG4gICAgKi9cclxuICAgcHVibGljIGdldCBsb2FkaW5nKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fbG9hZGluZztcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFRoZSBXZWJXb3JrZXIgdGhhdCBkb2VzIHRoZSBkb3dubG9hZCBhbmQgcHJvY2Vzc2luZ1xyXG4gICAgKi9cclxuICAgcHJpdmF0ZSB3b3JrZXI6IExvYWRlcldvcmtlcjtcclxuXHJcbiAgIC8qKlxyXG4gICAgKiBMb2FkcyBhIGZpbGVcclxuICAgICogXHJcbiAgICAqIEBwYXJhbSBmaWxlIFRoZSBmaWxlIHVybCB0byBsb2FkXHJcbiAgICAqIEBwYXJhbSB1cGRhdGVTdGF0dXMgQ2FsbGJhY2sgdGhhdCBpcyBub3RpZmllZCBvZiBwcm9ncmVzc1xyXG4gICAgKiBAcmV0dXJucyBUcmlhbmdsZU9iaiBwcm9taXNlXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgbG9hZE1vZGVsRmlsZShmaWxlOiBzdHJpbmcsIHVwZGF0ZVN0YXR1czogU3RhdHVzRnVuY3Rpb24pOiBQcm9taXNlPFRyaWFuZ2xlT2JqPiB7XHJcblxyXG4gICAgICB0aGlzLl9sb2FkaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxUcmlhbmdsZU9iaj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cclxuICAgICAgICAgLy8gaWYgYSBwcmV2aW91cyB3b3JrZXIgZXhpc3RzLCBjbG9zZSBpdFxyXG4gICAgICAgICBpZiAodGhpcy53b3JrZXIpIHtcclxuICAgICAgICAgICAgdGhpcy53b3JrZXIudGVybWluYXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMud29ya2VyID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICB0aGlzLndvcmtlciA9IG5ldyBMb2FkZXJXb3JrZXIoKTtcclxuICAgICAgICAgbGV0IHRTdGFydCA9IERhdGUubm93KCk7XHJcbiAgICAgICAgIHRoaXMud29ya2VyLm9ubWVzc2FnZSA9ICh7IGRhdGEgfTogeyBkYXRhOiBhbnkgfSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAvLyBhdm9pZCBmbGFzaGluZyBtZXNzYWdlcyBmb3IgdGhpbmdzIHRoYXQgaGFwcGVuIHZlcnkgcXVpY2tseS5cclxuICAgICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSB0U3RhcnQgPiA1MDApIHtcclxuICAgICAgICAgICAgICAgICAgdXBkYXRlU3RhdHVzKGRhdGEpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgIHRoaXMuX2xvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgIGxldCB0T2JqID0gVHJpYW5nbGVPYmouZnJvbURhdGEoZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICB1cGRhdGVTdGF0dXMoJycpO1xyXG5cclxuICAgICAgICAgICAgICAgdGhpcy53b3JrZXIudGVybWluYXRlKCk7XHJcbiAgICAgICAgICAgICAgIHRoaXMud29ya2VyID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAgICAgICAgcmVzb2x2ZSh0T2JqKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9O1xyXG5cclxuICAgICAgICAgdGhpcy53b3JrZXIucG9zdE1lc3NhZ2UoZmlsZSk7XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgb3JpZW50KG1vZGVsOiBnbE9iamVjdCkge1xyXG5cclxuICAgICAgLy8gb3JpZW50IGVhY2ggZmlsZSBzbyB0aGF0IGl0IGlzIGZhY2luZyBmb3J3YXJkXHJcbiAgICAgIGxldCBuYW1lID0gbW9kZWwubmFtZS5zcGxpdCgnLicpWzBdLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIHN3aXRjaCAobmFtZSkge1xyXG4gICAgICAgICBjYXNlICd3b2xmJzpcclxuICAgICAgICAgICAgbW9kZWwubm9ybWFsaXplLnJvdFkodG9SYWQoLTE0MCkpO1xyXG4gICAgICAgICAgICBtb2RlbC5ub3JtYWxpemUucm90WCh0b1JhZCg1KSk7XHJcbiAgICAgICAgICAgIG1vZGVsLm5vcm1hbGl6ZS5yb3RZKHRvUmFkKDE4MCkpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGNhc2UgJ3NoZWVwaGVhZCc6XHJcbiAgICAgICAgICAgIG1vZGVsLm5vcm1hbGl6ZS5yb3RZKHRvUmFkKDIwKSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgfVxyXG59IiwiaW1wb3J0IHsgTWVudWJhciB9IGZyb20gXCIuLi8uLi9HVUkvTWVudVwiO1xyXG5cclxudHlwZSBMb2FkTW9kZWxGdW5jdGlvbiA9IChmaWxlOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG5pbnRlcmZhY2UgaVN1Yk1lbnUge1xyXG4gICBsYWJlbDogc3RyaW5nLFxyXG4gICBpZDogc3RyaW5nLFxyXG4gICBtZW51SXRlbXM6IChpU3ViTWVudSB8IElNZW51SXRlbVNldHVwKVtdXHJcbn1cclxuaW50ZXJmYWNlIElNZW51SXRlbVNldHVwIHtcclxuICAgbGFiZWw6IHN0cmluZyxcclxuICAgZmlsZTogc3RyaW5nLFxyXG59XHJcblxyXG5sZXQgbWVudUl0ZW1zOiAoaVN1Yk1lbnUgfCBJTWVudUl0ZW1TZXR1cClbXSA9IFtcclxuICAge1xyXG4gICAgICBsYWJlbDogJ09iamVjdHMnLCBpZDogJ09iamVjdHNTdWJNZW51JywgbWVudUl0ZW1zOiBbXHJcbiAgICAgICAgIHsgbGFiZWw6ICdTcGhlcmUnLCBmaWxlOiAnU3BoZXJlJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnRm9vdGJhbGwnLCBmaWxlOiAnRm9vdGJhbGwuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1BpbGwnLCBmaWxlOiAnUGlsbC5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnUGlsbCBCb3R0bGUnLCBmaWxlOiAnUGlsbEJvdHRsZS5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnU29kYSBDYW4nLCBmaWxlOiAnU29kYUNhbi5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnU29jY2VyIEJhbGwnLCBmaWxlOiAnU29jY2VyQmFsbC5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnU3Bvb24nLCBmaWxlOiAnU3Bvb24uYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1RlYXBvdCcsIGZpbGU6ICdUZWFwb3QuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1RvcnVzIChEb251dCknLCBmaWxlOiAnVG9ydXMuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1RvcnVzIEtub3QnLCBmaWxlOiAnVG9ydXNLbm90LmJsb2InIH0sXHJcbiAgICAgICAgIHsgbGFiZWw6ICdWYXNlJywgZmlsZTogJ1Zhc2UuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1ZpdGFtaW4nLCBmaWxlOiAnVml0YW1pbi5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnV2luZSBCb3R0bGUnLCBmaWxlOiAnV2luZUJvdHRsZS5ibG9iJyB9LFxyXG4gICAgICBdXHJcbiAgIH0sXHJcbiAgIHtcclxuICAgICAgbGFiZWw6ICdTY3VscHR1cmVzJywgaWQ6ICdTY3VscHR1cmVzU3ViTWVudScsIG1lbnVJdGVtczogW1xyXG4gICAgICAgICB7IGxhYmVsOiAnQmVsdmVkZXJlIFRvcnNvJywgZmlsZTogJ0JlbHZlZGVyZVRvcnNvLmJsb2InIH0sXHJcbiAgICAgICAgIHsgbGFiZWw6ICdEYXZpZCcsIGZpbGU6ICdEYXZpZC5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnSGVhZCBvZiBEYXZpZCcsIGZpbGU6ICdIZWFkT2ZEYXZpZC5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnTGFjb29uIGFuZCBIaXMgU29ucycsIGZpbGU6ICdMYW9jb29uQW5kSGlzU29ucy5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnTmVmZXJ0aXRpJywgZmlsZTogJ05lZmVydGl0aS5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnVGhpbmtlcicsIGZpbGU6ICdUaGlua2VyLmJsb2InIH0sXHJcbiAgICAgICAgIHsgbGFiZWw6ICdWZW51cyBkZSBNaWxvJywgZmlsZTogJ1ZlbnVzRGVNaWxvLmJsb2InIH0sXHJcbiAgICAgICAgIHsgbGFiZWw6ICdWZW51cyBvZiBXaWxsZW5kb3JmJywgZmlsZTogJ1ZlbnVzT2ZXaWxsZW5kb3JmLmJsb2InIH0sXHJcbiAgICAgICAgIHsgbGFiZWw6ICdXaW5nZWQgVmljdG9yeSBvZiBTYW1vdGhyYWNlJywgZmlsZTogJ1dpbmdlZFZpY3RvcnkuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1dpbmdlZCBWaWN0b3J5IG9mIFNhbW90aHJhY2Ugdy9CYXNlJywgZmlsZTogJ1dpbmdlZFZpY3RvcnlXaXRoQmFzZS5ibG9iJyB9LFxyXG4gICAgICBdXHJcbiAgIH0sXHJcbiAgIHtcclxuICAgICAgbGFiZWw6ICdBbmF0b215JywgaWQ6ICdBbmF0b215U3ViTWVudScsIG1lbnVJdGVtczogW1xyXG4gICAgICAgICB7IGxhYmVsOiAnU2t1bGwgMScsIGZpbGU6ICdTa3VsbDEuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1NrdWxsIDInLCBmaWxlOiAnU2t1bGwyLmJsb2InIH0sXHJcbiAgICAgICAgIHsgbGFiZWw6ICdTa3VsbCAzJywgZmlsZTogJ1NrdWxsMy5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnU2t1bGwgNCcsIGZpbGU6ICdTa3VsbDQuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1BlbHZpcycsIGZpbGU6ICdQZWx2aXMuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ0NsYXZpY2xlJywgZmlsZTogJ0NsYXZpY2xlLmJsb2InIH0sXHJcbiAgICAgICAgIHsgbGFiZWw6ICdTY2FwdWxhJywgZmlsZTogJ1NjYXB1bGEuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ0h1bWVydXMnLCBmaWxlOiAnSHVtZXJ1cy5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnSGVhZCBFY29yY2hlJywgZmlsZTogJ0hlYWRFY29yY2hlLmJsb2InIH0sXHJcbiAgICAgICAgIHsgbGFiZWw6ICdIZWFkIEVjb3JjaGUgMicsIGZpbGU6ICdIZWFkRWNvcmNoZTIuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ0hlYWQgRWNvcmNoZSAzJywgZmlsZTogJ0hlYWRFY29yY2hlMy5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnSGVhZCBFY29yY2hlIDQnLCBmaWxlOiAnSGVhZEVjb3JjaGU0LmJsb2InIH0sXHJcbiAgICAgIF1cclxuICAgfSxcclxuICAge1xyXG4gICAgICBsYWJlbDogJ1Bvc2VzJywgaWQ6ICdQb3Nlc1N1Yk1lbnUnLCBtZW51SXRlbXM6IFtcclxuICAgICAgICAgeyBsYWJlbDogJ1Bvc2UgMScsIGZpbGU6ICdQb3NlXzAxLmJsb2InIH0sXHJcbiAgICAgICAgIHsgbGFiZWw6ICdQb3NlIDInLCBmaWxlOiAnUG9zZV8wMi5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnUG9zZSAzJywgZmlsZTogJ1Bvc2VfMDMuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1Bvc2UgNCcsIGZpbGU6ICdQb3NlXzA0LmJsb2InIH0sXHJcbiAgICAgICAgIHsgbGFiZWw6ICdQb3NlIDUnLCBmaWxlOiAnUG9zZV8wNS5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnUG9zZSA2JywgZmlsZTogJ1Bvc2VfMDYuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1Bvc2UgNycsIGZpbGU6ICdQb3NlXzA3LmJsb2InIH0sXHJcbiAgICAgICAgIHsgbGFiZWw6ICdQb3NlIDgnLCBmaWxlOiAnUG9zZV8wOC5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnUG9zZSA5JywgZmlsZTogJ1Bvc2VfMDkuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1Bvc2UgMTAnLCBmaWxlOiAnUG9zZV8wMTAuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1Bvc2UgMTEnLCBmaWxlOiAnUG9zZV8wMTEuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1Bvc2UgMTInLCBmaWxlOiAnUG9zZV8wMTIuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1Bvc2UgMTMnLCBmaWxlOiAnUG9zZV8wMTMuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1Bvc2UgMTQnLCBmaWxlOiAnUG9zZV8wMTQuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1Bvc2UgMTUnLCBmaWxlOiAnUG9zZV8wMTUuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ1Bvc2UgMTYnLCBmaWxlOiAnUG9zZV8wMTYuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ0ZlbWFsZSBQb3NlJywgZmlsZTogJ1Bvc2UxLmJsb2InIH0sXHJcbiAgICAgIF1cclxuICAgfSxcclxuICAge1xyXG4gICAgICBsYWJlbDogJ0hlYWRzJywgaWQ6ICdIZWFkc1N1Yk1lbnUnLCBtZW51SXRlbXM6IFtcclxuICAgICAgICAgeyBsYWJlbDogJ0hlYWQgMScsIGZpbGU6ICdIZWFkMS5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnSGVhZCAyJywgZmlsZTogJ0hlYWQyLmJsb2InIH0sXHJcbiAgICAgICAgIHsgbGFiZWw6ICdIZWFkIDMnLCBmaWxlOiAnSGVhZDMuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ0hlYWQgNCcsIGZpbGU6ICdIZWFkNC5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnSGVhZCA1JywgZmlsZTogJ0hlYWQ1LmJsb2InIH0sXHJcbiAgICAgICAgIHsgbGFiZWw6ICdIZWFkIDYnLCBmaWxlOiAnSGVhZDYuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ0hlYWQgNycsIGZpbGU6ICdIZWFkNy5ibG9iJyB9LFxyXG4gICAgICAgICB7IGxhYmVsOiAnSGVhZCA4JywgZmlsZTogJ0hlYWQ4LmJsb2InIH0sXHJcbiAgICAgICAgIHsgbGFiZWw6ICdIZWFkIDknLCBmaWxlOiAnSGVhZDkuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ0hlYWQgMTAnLCBmaWxlOiAnSGVhZDEwLmJsb2InIH0sXHJcbiAgICAgICAgIHsgbGFiZWw6ICdIZWFkIDExJywgZmlsZTogJ0hlYWQuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ0ZlbWFsZSBIZWFkJywgZmlsZTogJ0ZlbWFsZUhlYWQuYmxvYicgfSxcclxuICAgICAgICAgeyBsYWJlbDogJ0Fybm9sZCcsIGZpbGU6ICdBcm5vbGQuYmxvYicgfSxcclxuICAgICAgXVxyXG4gICB9LFxyXG4gICB7XHJcbiAgICAgIGxhYmVsOiAnRXhwcmVzc2lvbnMnLCBpZDogJ0V4cHJlc3Npb25zU3ViTWVudScsIG1lbnVJdGVtczogW1xyXG4gICAgICAgICB7XHJcbiAgICAgICAgICAgIGxhYmVsOiAnTmV1dHJhbCcsIGlkOiAnTmV1dHJhbFN1Yk1lbnUnLCBtZW51SXRlbXM6IFtcclxuICAgICAgICAgICAgICAgeyBsYWJlbDogJ05ldXRyYWwnLCBmaWxlOiAnTWFsZV8wMl8wMV9OZXV0cmFsLmJsb2InIH0sXHJcbiAgICAgICAgICAgICAgIHsgbGFiZWw6ICdOZXV0cmFsLCBFeWVzIENsb3NlZCcsIGZpbGU6ICdNYWxlXzAyXzAyX05ldXRyYWxfRXllc19DbG9zZWQuYmxvYicgfSxcclxuICAgICAgICAgICAgICAgeyBsYWJlbDogJ05ldXRyYWwsIExpcHMgUGFydGVkJywgZmlsZTogJ01hbGVfMDJfMDM4X05ldXRyYWxfTGlwc19QYXJ0ZWQuYmxvYicgfSxcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgICB9LFxyXG4gICAgICAgICB7XHJcbiAgICAgICAgICAgIGxhYmVsOiAnRXllcycsIGlkOiAnRXllc1N1Yk1lbnUnLCBtZW51SXRlbXM6IFtcclxuICAgICAgICAgICAgICAgeyBsYWJlbDogJ0xvb2sgVXAnLCBmaWxlOiAnTWFsZV8wMl8wNV9Mb29rX1VwLmJsb2InIH0sXHJcbiAgICAgICAgICAgICAgIHsgbGFiZWw6ICdMb29rIERvd24nLCBmaWxlOiAnTWFsZV8wMl8wNl9Mb29rX0Rvd24uYmxvYicgfSxcclxuICAgICAgICAgICAgICAgeyBsYWJlbDogJ0xvb2sgTGVmdCcsIGZpbGU6ICdNYWxlXzAyXzA3X0xvb2tfTGVmdC5ibG9iJyB9LFxyXG4gICAgICAgICAgICAgICB7IGxhYmVsOiAnTG9vayBSaWdodCcsIGZpbGU6ICdNYWxlXzAyXzA4X0xvb2tfUmlnaHQuYmxvYicgfSxcclxuICAgICAgICAgICAgICAgeyBsYWJlbDogJ0Jyb3dzIFVwJywgZmlsZTogJ01hbGVfMDJfMDE2X0Jyb3dzX1VwLmJsb2InIH0sXHJcbiAgICAgICAgICAgICAgIHsgbGFiZWw6ICdCcm93cyBEb3duJywgZmlsZTogJ01hbGVfMDJfMDE3X0Jyb3dzX0Rvd24uYmxvYicgfSxcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgICB9LFxyXG4gICAgICAgICB7XHJcbiAgICAgICAgICAgIGxhYmVsOiAnSmF3JywgaWQ6ICdKYXdTdWJNZW51JywgbWVudUl0ZW1zOiBbXHJcbiAgICAgICAgICAgICAgIHsgbGFiZWw6ICdXaWRlIE9wZW4nLCBmaWxlOiAnTWFsZV8wMl8wOV9KYXdfV2lkZV9PcGVuLmJsb2InIH0sXHJcbiAgICAgICAgICAgICAgIHsgbGFiZWw6ICdTaWRlIFJpZ2h0JywgZmlsZTogJ01hbGVfMDJfMDE4X0phd19TaWRlX1JpZ2h0LmJsb2InIH0sXHJcbiAgICAgICAgICAgICAgIHsgbGFiZWw6ICdTaWRlIExlZnQnLCBmaWxlOiAnTWFsZV8wMl8wMTlfSmF3X1NpZGVfTGVmdC5ibG9iJyB9LFxyXG4gICAgICAgICAgICAgICB7IGxhYmVsOiAnVGhydXN0JywgZmlsZTogJ01hbGVfMDJfMDIwX0phd19UaHJ1c3QuYmxvYicgfSxcclxuICAgICAgICAgICAgICAgeyBsYWJlbDogJ0NsZW5jaCcsIGZpbGU6ICdNYWxlXzAyXzAyMV9KYXdfQ2xlbmNoLmJsb2InIH0sXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICAgfSxcclxuICAgICAgICAge1xyXG4gICAgICAgICAgICBsYWJlbDogJ0NoZWVrcycsIGlkOiAnQ2hlZWtzU3ViTWVudScsIG1lbnVJdGVtczogW1xyXG4gICAgICAgICAgICAgICB7IGxhYmVsOiAnUHVmZicsIGZpbGU6ICdNYWxlXzAyXzAyMl9DaGVla19QdWZmLmJsb2InIH0sXHJcbiAgICAgICAgICAgICAgIHsgbGFiZWw6ICdTdWNrJywgZmlsZTogJ01hbGVfMDJfMDIzX0NoZWVrX1N1Y2suYmxvYicgfSxcclxuICAgICAgICAgICAgICAgeyBsYWJlbDogJ0RpbXBsZScsIGZpbGU6ICdNYWxlXzAyXzAyN19EaW1wbGVfQ2hlZWtzLmJsb2InIH0sXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICAgfSxcclxuICAgICAgICAge1xyXG4gICAgICAgICAgICBsYWJlbDogJ0xpcHMnLCBpZDogJ0xpcHNTdWJNZW51JywgbWVudUl0ZW1zOiBbXHJcbiAgICAgICAgICAgICAgIHsgbGFiZWw6ICdUaWdodGVuJywgZmlsZTogJ01hbGVfMDJfMDEwX1RpZ2h0ZW4gTGlwcy5ibG9iJyB9LFxyXG4gICAgICAgICAgICAgICB7IGxhYmVsOiAnUHVja2VyJywgZmlsZTogJ01hbGVfMDJfMDEyX1B1Y2tlci5ibG9iJyB9LFxyXG4gICAgICAgICAgICAgICB7IGxhYmVsOiAnRmxhcmUnLCBmaWxlOiAnTWFsZV8wMl8wMjZfRmxhcmVfTGlwcy5ibG9iJyB9LFxyXG4gICAgICAgICAgICAgICB7IGxhYmVsOiAnU291bmRzOiBcIkNIXCInLCBmaWxlOiAnTWFsZV8wMl8wMjRfUGhvbmVtZV9DSC5ibG9iJyB9LFxyXG4gICAgICAgICAgICAgICB7IGxhYmVsOiAnU291bmRzOiBcIkZWXCInLCBmaWxlOiAnTWFsZV8wMl8wMjVfUGhvbmVtZV9GVi5ibG9iJyB9LFxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgIH0sXHJcbiAgICAgICAgIHtcclxuICAgICAgICAgICAgbGFiZWw6ICdFbW90aW9ucycsIGlkOiAnRW1vdGlvbnNTdWJNZW51JywgbWVudUl0ZW1zOiBbXHJcbiAgICAgICAgICAgICAgIHsgbGFiZWw6ICdTbWlsZSwgTW91dGggQ2xvc2VkJywgZmlsZTogJ01hbGVfMDJfMDNfU21pbGVfTW91dGhfQ2xvc2VkLmJsb2InIH0sXHJcbiAgICAgICAgICAgICAgIHsgbGFiZWw6ICdTbWlsZSwgTW91dGggT3BlbicsIGZpbGU6ICdNYWxlXzAyXzA0X1NtaWxlX01vdXRoX09wZW4uYmxvYicgfSxcclxuICAgICAgICAgICAgICAgeyBsYWJlbDogJ1NuYXJsJywgZmlsZTogJ01hbGVfMDJfMDEzX1NuYXJsLmJsb2InIH0sXHJcbiAgICAgICAgICAgICAgIHsgbGFiZWw6ICdGcm93bicsIGZpbGU6ICdNYWxlXzAyXzAxNF9Gcm93bi5ibG9iJyB9LFxyXG4gICAgICAgICAgICAgICB7IGxhYmVsOiAnSGFwcHknLCBmaWxlOiAnTWFsZV8wMl8wMjhfSGFwcHkuYmxvYicgfSxcclxuICAgICAgICAgICAgICAgeyBsYWJlbDogJ1N1cnByaXNlJywgZmlsZTogJ01hbGVfMDJfMDI5X1N1cnByaXNlLmJsb2InIH0sXHJcbiAgICAgICAgICAgICAgIHsgbGFiZWw6ICdTYWQnLCBmaWxlOiAnTWFsZV8wMl8wMzBfU2FkLmJsb2InIH0sXHJcbiAgICAgICAgICAgICAgIHsgbGFiZWw6ICdBbmdyeScsIGZpbGU6ICdNYWxlXzAyXzAzMV9BbmdyeS5ibG9iJyB9LFxyXG4gICAgICAgICAgICAgICB7IGxhYmVsOiAnUGFpbicsIGZpbGU6ICdNYWxlXzAyXzAzMl9QYWluLmJsb2InIH0sXHJcbiAgICAgICAgICAgICAgIHsgbGFiZWw6ICdGZWFyJywgZmlsZTogJ01hbGVfMDJfMDMzX0ZlYXIuYmxvYicgfSxcclxuICAgICAgICAgICAgICAgeyBsYWJlbDogJ0Rpc2d1c3QnLCBmaWxlOiAnTWFsZV8wMl8wMzRfRGlzZ3VzdC5ibG9iJyB9LFxyXG4gICAgICAgICAgICAgICB7IGxhYmVsOiAnU2hvY2snLCBmaWxlOiAnTWFsZV8wMl8wMzVfU2hvY2suYmxvYicgfSxcclxuICAgICAgICAgICAgICAgeyBsYWJlbDogJ1JhZ2UnLCBmaWxlOiAnTWFsZV8wMl8wMzZfUmFnZS5ibG9iJyB9LFxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgIH0sXHJcbiAgICAgICAgIHtcclxuICAgICAgICAgICAgbGFiZWw6ICdPdGhlcicsIGlkOiAnT3RoZXJTdWJNZW51JywgbWVudUl0ZW1zOiBbXHJcbiAgICAgICAgICAgICAgIHsgbGFiZWw6ICdGYWNlIENvbXByZXNzaW9uJywgZmlsZTogJ01hbGVfMDJfMDExX0ZhY2VfQ29tcHJlc3Npb24uYmxvYicgfSxcclxuICAgICAgICAgICAgICAgeyBsYWJlbDogJ05lY2sgVGlnaHRlbicsIGZpbGU6ICdNYWxlXzAyXzAxNV9OZWNrX1RpZ2h0ZW4uYmxvYicgfSxcclxuICAgICAgICAgICAgICAgeyBsYWJlbDogJ1Rvbmd1ZScsIGZpbGU6ICdNYWxlXzAyXzAzN19Ub25ndWUuYmxvYicgfSxcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgICB9LFxyXG4gICAgICBdXHJcbiAgIH0sXHJcblxyXG5dO1xyXG5cclxuZnVuY3Rpb24gYWRkSXRlbXMobWVudTogTWVudWJhciwgaXRlbXM6IChJTWVudUl0ZW1TZXR1cCB8IGlTdWJNZW51KVtdLCBsb2FkTW9kZWw6IExvYWRNb2RlbEZ1bmN0aW9uKSB7XHJcbiAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgaWYgKCdtZW51SXRlbXMnIGluIGl0ZW0pIHtcclxuICAgICAgICAgbGV0IHN1Yk1lbnUgPSBtZW51LmFkZFN1Yk1lbnUoaXRlbS5sYWJlbCwgaXRlbS5pZCk7XHJcbiAgICAgICAgIGFkZEl0ZW1zKHN1Yk1lbnUsIGl0ZW0ubWVudUl0ZW1zLCBsb2FkTW9kZWwpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICBtZW51LmFkZEl0ZW0oaXRlbS5sYWJlbCwgKCkgPT4geyBsb2FkTW9kZWwoaXRlbS5maWxlKSB9KTtcclxuICAgICAgfVxyXG4gICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1vZGVsc01lbnUobWVudWJhcjogTWVudWJhciwgbG9hZE1vZGVsOiBMb2FkTW9kZWxGdW5jdGlvbikge1xyXG5cclxuICAgbGV0IG1lbnUgPSBtZW51YmFyLmFkZFN1Yk1lbnUoJ01vZGVscycsICdNb2RlbHMnKTtcclxuXHJcbiAgIGFkZEl0ZW1zKG1lbnUsIG1lbnVJdGVtcywgbG9hZE1vZGVsKTtcclxufVxyXG4iLCJpbXBvcnQgeyBWZWMzLCBWZWMyIH0gZnJvbSBcIi4uLy4uL1V0aWwzRC9WZWNcIjtcclxuaW1wb3J0IHsgT3ZlcmxheUNhbnZhcyB9IGZyb20gXCIuLi8uLi9HVUkvT3ZlcmxheUNhbnZhc1wiO1xyXG5pbXBvcnQgeyBQb2ludGVyRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL0dVSS9Qb2ludGVyRXZlbnRIYW5kbGVyXCI7XHJcbmltcG9ydCB7IFJlbmRlcmVyIH0gZnJvbSBcIi4vUmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgQ2FtZXJhLCBGaXhlZFNpemVQcm92aWRlciB9IGZyb20gXCIuL0NhbWVyYVwiO1xyXG5pbXBvcnQgeyBNYXQ0IH0gZnJvbSBcIi4uLy4uL1V0aWwzRC9NYXRcIjtcclxuaW1wb3J0IHsgdG9SYWQsIGNsYW1wLCBpc01vYmlsZSwgdG9EZWcgfSBmcm9tIFwiLi4vLi4vVXRpbC9HbG9iYWxzXCI7XHJcbmltcG9ydCB7IGdsU3BhY2UgfSBmcm9tIFwiLi4vLi4vZ2wvZ2xTcGFjZVwiO1xyXG5pbXBvcnQgeyBUcmlhbmdsZU9iaiB9IGZyb20gXCIuLi8uLi9VdGlsM0QvVHJpYW5nbGVPYmpcIjtcclxuXHJcbmV4cG9ydCB0eXBlIFBlcnNwZWN0aXZlQ2hhbmdlRnVuY3Rpb24gPSAoKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUGVyc3BlY3RpdmVQcm92aWRlciB7XHJcbiAgIHJlYWRvbmx5IGZvdjogbnVtYmVyO1xyXG4gICBleWU6IFZlYzM7XHJcbiAgIHJlYWRvbmx5IGxvb2tBdDogVmVjMztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBlcnNwZWN0aXZlQ3RybCB7XHJcbiAgIHByaXZhdGUgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dDtcclxuICAgcHJpdmF0ZSBvdmVybGF5OiBPdmVybGF5Q2FudmFzO1xyXG4gICBwcml2YXRlIGhhbmRsZXI6IFBvaW50ZXJFdmVudEhhbmRsZXI7XHJcbiAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyO1xyXG4gICBwcml2YXRlIHByb3ZpZGVyOiBJUGVyc3BlY3RpdmVQcm92aWRlcjtcclxuXHJcbiAgIHB1YmxpYyBvbkNoYW5nZTogUGVyc3BlY3RpdmVDaGFuZ2VGdW5jdGlvbjtcclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuICAgICAgcGFyZW50OiBIVE1MRWxlbWVudCxcclxuICAgICAgcHJvdmlkZXI6IElQZXJzcGVjdGl2ZVByb3ZpZGVyXHJcbiAgICkge1xyXG5cclxuICAgICAgdGhpcy5wcm92aWRlciA9IHByb3ZpZGVyO1xyXG5cclxuICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICBjYW52YXMuaWQgPSAnUGVyc3BlY3RpdmVDYW52YXMnO1xyXG4gICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoY2FudmFzKTtcclxuXHJcbiAgICAgIC8vIGRvbid0IHRyeSB0byBtYWtlIHRoZSBjYW52YXMgdHJhbnNwYXJlbnQgdG8gdGhlIHVuZGVybHlpbmcgaHRtbC4gVGhpc1xyXG4gICAgICAvLyBzZWVtcyB0byBsaW1pdCB0aGUgYWxwaGEgdmFsdWVzIHdlIGNhbiB1c2UgaW4gb3VyIHNjZW5lLlxyXG4gICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcsIHsgYWxwaGE6IGZhbHNlIH0pIGFzIFdlYkdMUmVuZGVyaW5nQ29udGV4dDtcclxuXHJcbiAgICAgIGlmICghY29udGV4dCkge1xyXG4gICAgICAgICAvLyBUT0RPIGRpc3BsYXkgYSBtZXNzYWdlIGFib3V0IG5vdCBiZWluZyBhYmxlIHRvIGNyZWF0ZSBhIFdlYkdMIGNvbnRleHRcclxuICAgICAgICAgY29uc29sZS5sb2coXCJVbmFibGUgdG8gZ2V0IFdlYkdMIGNvbnRleHRcIik7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5nbCA9IGNvbnRleHQ7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIoY29udGV4dCk7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuc2hvd01pbmlWaWV3ID0gZmFsc2U7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuc2hvd0JhbGwgPSBmYWxzZTtcclxuICAgICAgdGhpcy5yZW5kZXJlci5vcHRpb25zLmNhbWVyYSA9IG5ldyBDYW1lcmEoe1xyXG4gICAgICAgICBzaXplUHJvdmlkZXI6IG5ldyBGaXhlZFNpemVQcm92aWRlcigyLCAyKVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5yZW5kZXJlci5vcHRpb25zLmNhbWVyYS51c2VPcnRob2dyYXBoaWMgPSB0cnVlO1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLnNob3dGbG9vciA9IGZhbHNlO1xyXG5cclxuICAgICAgdGhpcy5vdmVybGF5ID0gbmV3IE92ZXJsYXlDYW52YXMocGFyZW50LCAnUGVyc3BlY3RpdmVPdmVybGF5Q2FudmFzJyk7XHJcblxyXG4gICAgICB0aGlzLmhhbmRsZXIgPSBuZXcgUG9pbnRlckV2ZW50SGFuZGxlcihjYW52YXMpO1xyXG4gICAgICB0aGlzLmhhbmRsZXIub25Eb3duID0gKHBvczogVmVjMikgPT4gdGhpcy5vbkRvd24ocG9zKTtcclxuICAgICAgdGhpcy5oYW5kbGVyLm9uRHJhZyA9IChwb3M6IFZlYzIsIGRlbHRhOiBWZWMyKSA9PiB0aGlzLm9uRHJhZyhwb3MsIGRlbHRhKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuZGlzcG9zZSgpO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHNldEV5ZVBvcyhwb3M6IFZlYzIpIHtcclxuXHJcbiAgICAgIC8vIGNvbnZlcnQgdG8gbW9kZWwgc3BhY2VcclxuICAgICAgdGhpcy5wcm92aWRlci5leWUgPSB0aGlzLmZyb21TY3JlZW4ocG9zKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLm9uQ2hhbmdlKSB7XHJcbiAgICAgICAgIHRoaXMub25DaGFuZ2UoKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIG9uRG93bihwb3M6IFZlYzIpIHtcclxuICAgICAgdGhpcy5zZXRFeWVQb3MocG9zKTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBvbkRyYWcocG9zOiBWZWMyLCBkZWx0YTogVmVjMikge1xyXG4gICAgICB0aGlzLnNldEV5ZVBvcyhwb3MpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc2V0U2l6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xyXG4gICAgICBsZXQgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICBnbC5jYW52YXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgZ2wuY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHJlbmRlcihtb2RlbE1hdDogTWF0NCkge1xyXG4gICAgICAvLyBzZXQgdGhlIG1vZGVsIG1hdHJpeCBvZiB0aGUgb2JqZWN0IHRvIHRoYXQgb2YgdGhlIHByaW1hcnlcclxuICAgICAgLy8gb2JqIHdpdGggYW4gYWRkaXRpb25hbCA5MCBkZWcgcm90YXRpb25cclxuICAgICAgdGhpcy5yZW5kZXJlci5vYmoubW9kZWwgPSBtb2RlbE1hdC5jbG9uZSgpLnJvdFkodG9SYWQoOTApKTtcclxuXHJcbiAgICAgIC8vIHNoaWZ0IHRoZSB2aWV3IHNvIHRoYXQgdGhlIG9iamVjdCBpcyBvbiB0aGUgZmFyIHJpZ2h0LiBGYXIgZW5vdWdoIHRoYXQgdGhlcmUgaXNcclxuICAgICAgLy8gYSBzcXVhcmUgc3BhY2Ugb24gdGhlIGVuZCB0aGF0IGNvbnRhaW5zIHRoZSBvcmlnaW4gKGNlbnRlciBvZiBvYmplY3Qgd2UncmUgdmlld2luZylcclxuICAgICAgbGV0IHZpZXdTcGFjZSA9IHRoaXMucmVuZGVyZXIub3B0aW9ucy5jYW1lcmEuZ2V0Vmlld1NwYWNlKHRoaXMuZ2wpO1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLm9wdGlvbnMuY2FtZXJhLmxvb2tBdCA9IG5ldyBWZWMzKFstdmlld1NwYWNlLndpZHRoIC8gMiArIHZpZXdTcGFjZS5oZWlnaHQgLyAyLCAwLCAwXSk7XHJcblxyXG4gICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcigpO1xyXG5cclxuICAgICAgdGhpcy5kcmF3RXllKCk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgZnJvbVNjcmVlbihwdDogVmVjMik6IFZlYzMge1xyXG4gICAgICBsZXQgY2FudmFzID0gdGhpcy5nbC5jYW52YXM7XHJcbiAgICAgIGxldCBhciA9IGNhbnZhcy53aWR0aCAvIGNhbnZhcy5oZWlnaHQ7XHJcblxyXG4gICAgICAvLyB0aGUgc3BhY2Ugd2UncmUgdmlld2luZyBpcyBhIDJ4MiBib3ggb24gdGhlIHJpZ2h0XHJcbiAgICAgIGxldCB3aWR0aCA9IDIgKiBhcjsgLy8gc3BhY2Uud2lkdGggKiAoMi4wIC8gc3BhY2UuaGVpZ2h0KTtcclxuICAgICAgbGV0IGhlaWdodCA9IDIuMDtcclxuICAgICAgbGV0IHNwYWNlID0gbmV3IGdsU3BhY2UobmV3IFZlYzMoWy13aWR0aCAvIDIsIC1oZWlnaHQgLyAyLCAtMTAwXSksIG5ldyBWZWMzKFt3aWR0aCAvIDIsIGhlaWdodCAvIDIsIDEwMF0pKTtcclxuXHJcbiAgICAgIGxldCBib3hTaXplID0gc3BhY2UuaGVpZ2h0O1xyXG4gICAgICBsZXQgeiA9IGNsYW1wKCgxIC0gcHQueCAvIGNhbnZhcy53aWR0aCkgKiBzcGFjZS53aWR0aCAtIGJveFNpemUgLyAyLCBib3hTaXplIC8gMiwgMTAwKTtcclxuICAgICAgbGV0IHkgPSBjbGFtcChzcGFjZS5ib3R0b20gKyAoMSAtIHB0LnkgLyBjYW52YXMuaGVpZ2h0KSAqIHNwYWNlLmhlaWdodCwgLTEsIDEpO1xyXG5cclxuICAgICAgcmV0dXJuIG5ldyBWZWMzKFt0aGlzLnByb3ZpZGVyLmV5ZS54LCB5LCB6XSk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgdG9TY3JlZW4ocHQ6IFZlYzMpOiBWZWMyIHtcclxuICAgICAgbGV0IGNhbnZhcyA9IHRoaXMuZ2wuY2FudmFzO1xyXG4gICAgICBsZXQgYXIgPSBjYW52YXMud2lkdGggLyBjYW52YXMuaGVpZ2h0O1xyXG5cclxuICAgICAgLy8gdGhlIHNwYWNlIHdlJ3JlIHZpZXdpbmcgaXMgYSAyeDIgYm94IG9uIHRoZSByaWdodFxyXG4gICAgICBsZXQgd2lkdGggPSAyICogYXI7IC8vIHNwYWNlLndpZHRoICogKDIuMCAvIHNwYWNlLmhlaWdodCk7XHJcbiAgICAgIGxldCBoZWlnaHQgPSAyLjA7XHJcbiAgICAgIGxldCBzcGFjZSA9IG5ldyBnbFNwYWNlKG5ldyBWZWMzKFstd2lkdGggLyAyLCAtaGVpZ2h0IC8gMiwgLTEwMF0pLCBuZXcgVmVjMyhbd2lkdGggLyAyLCBoZWlnaHQgLyAyLCAxMDBdKSk7XHJcblxyXG4gICAgICBsZXQgYm94U2l6ZSA9IHNwYWNlLmhlaWdodDtcclxuICAgICAgbGV0IHggPSAoMSAtIChwdC56ICsgYm94U2l6ZSAvIDIpIC8gc3BhY2Uud2lkdGgpICogY2FudmFzLndpZHRoO1xyXG4gICAgICBsZXQgeSA9ICgxIC0gKHB0LnkgLSBzcGFjZS5ib3R0b20pIC8gc3BhY2UuaGVpZ2h0KSAqIGNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjMihbeCwgeV0pO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGRyYXdMaW5lKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBwdDE6IFZlYzMsIHB0MjogVmVjMykge1xyXG4gICAgICBsZXQgcDEgPSB0aGlzLnRvU2NyZWVuKHB0MSk7XHJcbiAgICAgIGxldCBwMiA9IHRoaXMudG9TY3JlZW4ocHQyKTtcclxuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICBjdHgubW92ZVRvKHAxLngsIHAxLnkpO1xyXG4gICAgICBjdHgubGluZVRvKHAyLngsIHAyLnkpO1xyXG4gICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgZHJhd0V5ZSgpIHtcclxuICAgICAgbGV0IGdsID0gdGhpcy5nbDtcclxuICAgICAgbGV0IGN0eCA9IHRoaXMub3ZlcmxheS5jb250ZXh0O1xyXG4gICAgICBjdHguY2FudmFzLndpZHRoID0gZ2wuY2FudmFzLndpZHRoO1xyXG4gICAgICBjdHguY2FudmFzLmhlaWdodCA9IGdsLmNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgIGN0eC5saW5lV2lkdGggPSAyO1xyXG5cclxuICAgICAgaWYgKGlzTW9iaWxlKSB7XHJcbiAgICAgICAgIGN0eC5saW5lV2lkdGggPSAyICogY3R4LmxpbmVXaWR0aDtcclxuICAgICAgfVxyXG5cclxuICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmdsLmNhbnZhcy53aWR0aCwgdGhpcy5nbC5jYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgIGxldCBzcGFjZSA9IHRoaXMucmVuZGVyZXIub3B0aW9ucy5jYW1lcmEuZ2V0Vmlld1NwYWNlKHRoaXMuZ2wpO1xyXG4gICAgICAvLyBkcmF3IHRoZSBmcm9udCAndmlldycgbGluZVxyXG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgyNTUsMjU1LDI1NSwwLjIpJztcclxuICAgICAgdGhpcy5kcmF3TGluZShjdHgsIG5ldyBWZWMzKFswLCBzcGFjZS50b3AsIHNwYWNlLmhlaWdodCAvIDJdKSwgbmV3IFZlYzMoWzAsIHNwYWNlLmJvdHRvbSwgc3BhY2UuaGVpZ2h0IC8gMl0pKTtcclxuXHJcbiAgICAgIC8vIGRyYXcgbGluZSBmcm9tIHRoZSBleWUgdG8gdGhlIGxvb2sgYXQgY2VudGVyXHJcbiAgICAgIHRoaXMuZHJhd0xpbmUoY3R4LCB0aGlzLnByb3ZpZGVyLmV5ZSwgdGhpcy5wcm92aWRlci5sb29rQXQpO1xyXG5cclxuICAgICAgbGV0IHAxID0gdGhpcy50b1NjcmVlbih0aGlzLnByb3ZpZGVyLmV5ZSk7XHJcbiAgICAgIGxldCBwMiA9IHRoaXMudG9TY3JlZW4odGhpcy5wcm92aWRlci5sb29rQXQpO1xyXG5cclxuICAgICAgbGV0IGFuZ2xlID0gdG9EZWcoTWF0aC5hdGFuMihwMi55IC0gcDEueSwgcDIueCAtIHAxLngpKTtcclxuXHJcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgY3R4Lm1vdmVUbyhwMS54LCBwMS55KTtcclxuICAgICAgcDIueCA9IHAxLnggKyBjdHguY2FudmFzLndpZHRoICogTWF0aC5jb3ModG9SYWQoYW5nbGUgKyB0aGlzLnByb3ZpZGVyLmZvdiAvIDIpKTtcclxuICAgICAgcDIueSA9IHAxLnkgKyBjdHguY2FudmFzLndpZHRoICogTWF0aC5zaW4odG9SYWQoYW5nbGUgKyB0aGlzLnByb3ZpZGVyLmZvdiAvIDIpKTtcclxuICAgICAgY3R4LmxpbmVUbyhwMi54LCBwMi55KTtcclxuICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgIGN0eC5tb3ZlVG8ocDEueCwgcDEueSk7XHJcbiAgICAgIHAyLnggPSBwMS54ICsgY3R4LmNhbnZhcy53aWR0aCAqIE1hdGguY29zKHRvUmFkKGFuZ2xlIC0gdGhpcy5wcm92aWRlci5mb3YgLyAyKSk7XHJcbiAgICAgIHAyLnkgPSBwMS55ICsgY3R4LmNhbnZhcy53aWR0aCAqIE1hdGguc2luKHRvUmFkKGFuZ2xlIC0gdGhpcy5wcm92aWRlci5mb3YgLyAyKSk7XHJcbiAgICAgIGN0eC5saW5lVG8ocDIueCwgcDIueSk7XHJcbiAgICAgIGN0eC5zdHJva2UoKTtcclxuXHJcbiAgICAgIGxldCBjZW50ZXIgPSB0aGlzLnRvU2NyZWVuKHRoaXMucHJvdmlkZXIuZXllKTtcclxuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3doaXRlJztcclxuICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwyNTUsMjU1LDAuNiknO1xyXG5cclxuICAgICAgLy8gZHJhdyB0aGUgYWN0dWFsIGV5ZVxyXG4gICAgICBsZXQgb3BlbkFuZ2xlID0gNzA7XHJcbiAgICAgIGxldCByYWRpdXMgPSAwLjEyICogY3R4LmNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgIGxldCBzdGFydEFuZ2xlID0gYW5nbGUgKyBvcGVuQW5nbGUgLyAyO1xyXG4gICAgICBsZXQgZW5kQW5nbGUgPSBzdGFydEFuZ2xlICsgKDM2MCAtIG9wZW5BbmdsZSk7XHJcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgY3R4Lm1vdmVUbyhjZW50ZXIueCwgY2VudGVyLnkpO1xyXG4gICAgICBjdHguYXJjKGNlbnRlci54LCBjZW50ZXIueSwgcmFkaXVzLCB0b1JhZChzdGFydEFuZ2xlKSwgdG9SYWQoZW5kQW5nbGUpKTtcclxuICAgICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICBjdHguZmlsbCgpXHJcbiAgICAgIGN0eC5zdHJva2UoKTtcclxuXHJcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICd0cmFuc3BhcmVudCc7XHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsMjU1LDI1NSwwLjMpJztcclxuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICBjdHgubW92ZVRvKGNlbnRlci54LCBjZW50ZXIueSk7XHJcbiAgICAgIGN0eC5hcmMoY2VudGVyLngsIGNlbnRlci55LCByYWRpdXMsIHRvUmFkKHN0YXJ0QW5nbGUpLCB0b1JhZChlbmRBbmdsZSksIHRydWUpO1xyXG4gICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgIGN0eC5maWxsKClcclxuICAgICAgY3R4LnN0cm9rZSgpO1xyXG5cclxuICAgICAgLy8gZHJhdyB0aGUgbG9vayBhdCBwb2ludCAoY2VudGVyIG9mIG9iamVjdClcclxuICAgICAgY2VudGVyID0gdGhpcy50b1NjcmVlbih0aGlzLnByb3ZpZGVyLmxvb2tBdCk7XHJcbiAgICAgIHJhZGl1cyA9IDI7XHJcblxyXG4gICAgICBjdHguZmlsbFN0eWxlID0gJ3doaXRlJztcclxuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICBjdHguYXJjKGNlbnRlci54LCBjZW50ZXIueSwgcmFkaXVzLCAwLCB0b1JhZCgzNjApKTtcclxuICAgICAgY3R4LmZpbGwoKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHNldE1vZGVsKHRPYmo6IFRyaWFuZ2xlT2JqKSB7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0TW9kZWwodE9iaik7XHJcbiAgIH1cclxufSIsImltcG9ydCB7IFBhbmVsIH0gZnJvbSAnLi4vLi4vR1VJL1BhbmVsJztcclxuaW1wb3J0IHsgUGVyc3BlY3RpdmVDdHJsLCBQZXJzcGVjdGl2ZUNoYW5nZUZ1bmN0aW9uIH0gZnJvbSAnLi9QZXJzcGVjdGl2ZUN0cmwnO1xyXG5pbXBvcnQgeyBDYW1lcmEgfSBmcm9tICcuL0NhbWVyYSc7XHJcbmltcG9ydCB7IE1hdDQgfSBmcm9tICcuLi8uLi9VdGlsM0QvTWF0JztcclxuaW1wb3J0IHsgVHJpYW5nbGVPYmogfSBmcm9tICcuLi8uLi9VdGlsM0QvVHJpYW5nbGVPYmonO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBlcnNwZWN0aXZlUGFuZWwgZXh0ZW5kcyBQYW5lbCB7XHJcblxyXG4gICBwcml2YXRlIHBlcnNwZWN0aXZlQ3RybDogUGVyc3BlY3RpdmVDdHJsO1xyXG4gICBwcml2YXRlIHJlc2l6ZUxpc3RlbmVyID0gKCkgPT4gdGhpcy5vblJlc2l6ZSgpO1xyXG5cclxuICAgcHVibGljIG9uQ2hhbmdlOiBQZXJzcGVjdGl2ZUNoYW5nZUZ1bmN0aW9uIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IocGFyZW50OiBIVE1MRWxlbWVudCwgaWQ6IHN0cmluZywgY2FtZXJhOiBDYW1lcmEpIHtcclxuICAgICAgc3VwZXIocGFyZW50LCBpZCk7XHJcblxyXG4gICAgICB0aGlzLnBlcnNwZWN0aXZlQ3RybCA9IG5ldyBQZXJzcGVjdGl2ZUN0cmwodGhpcy5kaXYsIGNhbWVyYSk7XHJcbiAgICAgIHRoaXMucGVyc3BlY3RpdmVDdHJsLm9uQ2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICAgICBpZiAodGhpcy5vbkNoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVzaXplTGlzdGVuZXIpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVzaXplTGlzdGVuZXIpO1xyXG4gICAgICB0aGlzLnBlcnNwZWN0aXZlQ3RybC5kaXNwb3NlKCk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyByZW5kZXIobW9kZWw6IE1hdDQpOiB2b2lkIHtcclxuICAgICAgdGhpcy5wZXJzcGVjdGl2ZUN0cmwucmVuZGVyKG1vZGVsKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHNldE1vZGVsKHRPYmo6IFRyaWFuZ2xlT2JqKTogdm9pZCB7XHJcbiAgICAgIHRoaXMucGVyc3BlY3RpdmVDdHJsLnNldE1vZGVsKHRPYmopO1xyXG4gICB9XHJcblxyXG4gICBwcm90ZWN0ZWQgc2hvdyh2YWx1ZTogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICBpZiAodmFsdWUgPT09IHRydWUpIHtcclxuICAgICAgICAgdGhpcy5vblJlc2l6ZSgpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgb25SZXNpemUoKSB7XHJcbiAgICAgIHRoaXMucGVyc3BlY3RpdmVDdHJsLnNldFNpemUodGhpcy5kaXYuY2xpZW50V2lkdGgsIHRoaXMuZGl2LmNsaWVudEhlaWdodCk7XHJcbiAgIH1cclxufSIsImltcG9ydCB7IFZlYzMgfSBmcm9tICcuLi8uLi9VdGlsM0QvVmVjJztcclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgcGxhbmUgZGVmaW5lZCBieSBhKnggKyBiKnkgKyBjKnogPSBkXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUGxhbmUge1xyXG4gICBwcml2YXRlIGE6IG51bWJlcjtcclxuICAgcHJpdmF0ZSBiOiBudW1iZXI7XHJcbiAgIHByaXZhdGUgYzogbnVtYmVyO1xyXG4gICBwcml2YXRlIGQ6IG51bWJlcjtcclxuICAgcHJpdmF0ZSBvcmlnaW46IFZlYzM7XHJcbiAgIHByaXZhdGUgZGlzdGFuY2VUZXJtOiBudW1iZXI7XHJcblxyXG4gICAvKipcclxuICAgICogQHBhcmFtIHB0IEEgcG9pbnQgb24gdGhlIHBsYW5lIHBlcnBlbmRpY3VsYXIgdG8gdGhlIG9yaWdpblxyXG4gICAgKiBAcGFyYW0gb3JpZ2luIElmIHRoZSBwZXJwZW5kaWN1bGFyIHBvaW50IGlzIG5vdCB0aGUgb3JpZ2luLCBzcGVjaWZ5IGl0IGhlcmVcclxuICAgICovXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwdDogVmVjMywgb3JpZ2luPzogVmVjMykge1xyXG4gICAgICBpZiAoIW9yaWdpbikge1xyXG4gICAgICAgICBvcmlnaW4gPSBWZWMzLm9yaWdpbjtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLm9yaWdpbiA9IG9yaWdpbjtcclxuICAgICAgdGhpcy5hID0gb3JpZ2luLnggLSBwdC54O1xyXG4gICAgICB0aGlzLmIgPSBvcmlnaW4ueSAtIHB0Lnk7XHJcbiAgICAgIHRoaXMuYyA9IG9yaWdpbi56IC0gcHQuejtcclxuICAgICAgdGhpcy5kID0gdGhpcy5hICogdGhpcy5hICsgdGhpcy5iICogdGhpcy5iICsgdGhpcy5jICogdGhpcy5jO1xyXG4gICAgICB0aGlzLmRpc3RhbmNlVGVybSA9IE1hdGguc3FydCh0aGlzLmQpO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogQ29tcHV0ZXMgdGhlIGRpc3RhbmNlIHRvIGEgcG9pbnQuXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gcHQgVGhlIHBvaW50LlxyXG4gICAgKiBAcmV0dXJucyB0aGUgRGlzdGFuY2UuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgZGlzdFRvUHQocHQ6IFZlYzMpOiBudW1iZXIge1xyXG4gICAgICBjb25zdCB4ID0gcHQueCAtIHRoaXMub3JpZ2luLng7XHJcbiAgICAgIGNvbnN0IHkgPSBwdC55IC0gdGhpcy5vcmlnaW4ueTtcclxuICAgICAgY29uc3QgeiA9IHB0LnogLSB0aGlzLm9yaWdpbi56O1xyXG4gICAgICByZXR1cm4gTWF0aC5hYnModGhpcy5hICogeCArIHRoaXMuYiAqIHkgKyB0aGlzLmMgKiB6ICsgdGhpcy5kKSAvIHRoaXMuZGlzdGFuY2VUZXJtO1xyXG4gICB9XHJcbn0iLCJpbXBvcnQgdmVydGV4U291cmNlIGZyb20gJy4uLy4uL3NoYWRlcnMvVmlld2VyVmVydGV4Lmdsc2wnO1xyXG5pbXBvcnQgZnJhZ21lbnRTb3VyY2UgZnJvbSAnLi4vLi4vc2hhZGVycy9WaWV3ZXJGcmFnbWVudC5nbHNsJztcclxuaW1wb3J0IHsgVmVjMywgVmVjNCB9IGZyb20gJy4uLy4uL1V0aWwzRC9WZWMnO1xyXG5pbXBvcnQgeyBNYXQ0IH0gZnJvbSAnLi4vLi4vVXRpbDNEL01hdCc7XHJcbmltcG9ydCB7IGdsQ29sb3IzIH0gZnJvbSAnLi4vLi4vZ2wvZ2xDb2xvcic7XHJcbmltcG9ydCB7IFZhbHVlUmFuZ2UgfSBmcm9tICcuL1ZhbHVlUmFuZ2UnO1xyXG5pbXBvcnQgeyBDYW1lcmEsIEZpeGVkU2l6ZVByb3ZpZGVyLCBPYmpTaXplUHJvdmlkZXIgfSBmcm9tICcuL0NhbWVyYSc7XHJcbmltcG9ydCB7IGdsUHJvZ3JhbSB9IGZyb20gJy4uLy4uL2dsL2dsUHJvZ3JhbSc7XHJcbmltcG9ydCB7IGh0bWxDb2xvciB9IGZyb20gJy4uLy4uL1V0aWwvaHRtbENvbG9yJztcclxuaW1wb3J0IHsgZ2xPYmplY3QgfSBmcm9tICcuL2dsT2JqZWN0JztcclxuaW1wb3J0IHsgZ2xGcmFtZUJ1ZmZlciB9IGZyb20gJy4uLy4uL2dsL2dsRnJhbWVCdWZmZXInO1xyXG5pbXBvcnQgeyBnbFRleHR1cmUsIGdsVGV4dHVyZVN0eWxlIH0gZnJvbSAnLi4vLi4vZ2wvZ2xUZXh0dXJlJztcclxuaW1wb3J0IHsgVHJpYW5nbGVPYmpCdWlsZGVyIH0gZnJvbSAnLi4vLi4vVXRpbDNEL1RyaWFuZ2xlT2JqQnVpbGRlcic7XHJcbmltcG9ydCB7IE5vcm1hbFR5cGUsIFRyaWFuZ2xlT2JqIH0gZnJvbSAnLi4vLi4vVXRpbDNEL1RyaWFuZ2xlT2JqJztcclxuaW1wb3J0IHsgZ2xVbmlmb3JtIH0gZnJvbSAnLi4vLi4vZ2wvZ2xVbmlmb3JtJztcclxuaW1wb3J0IHsgSU1pbk1heCB9IGZyb20gJy4uLy4uL1V0aWwzRC9Cb3VuZGluZ0JveCc7XHJcbmltcG9ydCB7IFBsYW5lIH0gZnJvbSAnLi9QbGFuZSc7XHJcbmltcG9ydCB7IFRleHR1cmVSZW5kZXJlciB9IGZyb20gJy4vVGV4dHVyZVJlbmRlcmVyJztcclxuaW1wb3J0IHsgdG9SYWQgfSBmcm9tICcuLi8uLi9VdGlsL0dsb2JhbHMnO1xyXG5cclxuY29uc3QgQkFMTF9SQURJVVMgPSAwLjU7XHJcbmNvbnN0IElOSVRJQUxfTElHSFRfUE9TID0gbmV3IFZlYzMoWy0xLjAsIDEuMCwgMS41XSk7XHJcbmNvbnN0IElOSVRJQUxfVklFVyA9IE1hdDQuaWRlbnRpdHk7XHJcbmNvbnN0IElOSVRJQUxfU0hJTklORVNTID0gMTU7XHJcbmNvbnN0IElOSVRJQUxfTElHSFRfSU5URU5TSVRZID0gMS4wO1xyXG5jb25zdCBJTklUSUFMX0ZBTExPRkYgPSAwLjU7XHJcbmV4cG9ydCBjb25zdCBJTklUSUFMX0VZRSA9IFswLCAwLCA2XTsgLy8gMyB0aW1lcyB0aGUgbWF4IG9iamVjdCBkaW1lbnNpb24gb2YgMi4gRm9yIGEgbW9kZWwsIGFib3V0IDE1IGZ0IGF3YXlcclxuXHJcbmV4cG9ydCBjbGFzcyBDb250b3VyIHtcclxuICAgcHVibGljIGNvbG9yOiBnbENvbG9yMztcclxuICAgcHVibGljIGFuZ2xlOiBudW1iZXI7IC8vIGRlZ3JlZXNcclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihjb2xvcjogZ2xDb2xvcjMgfCBudW1iZXIsIGFuZ2xlOiBudW1iZXIpIHtcclxuXHJcbiAgICAgIGlmIChjb2xvciBpbnN0YW5jZW9mIGdsQ29sb3IzKSB7XHJcbiAgICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgdGhpcy5jb2xvciA9IG5ldyBnbENvbG9yMyhbY29sb3IsIGNvbG9yLCBjb2xvcl0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmFuZ2xlID0gYW5nbGU7XHJcbiAgIH1cclxufVxyXG5cclxuLy8gUmVuZGVyaW5nIG1vZGVzLiBNdXN0IG1hdGNoIHZhbHVlcyBpbiBWaWV3ZXJGcmFnbWVudC5nbHNsXHJcbmV4cG9ydCBlbnVtIFJlbmRlck1vZGUge1xyXG4gICBOb3JtYWwgPSAwLFxyXG4gICBDb250b3VyUGxhbmVzID0gMSxcclxuICAgQ29udG91clZhbHVlcyA9IDIsXHJcbiAgIExpZ2h0QW5kU2hhZG93ID0gMyxcclxuICAgSGlnaGxpZ2h0VGVybWluYXRvciA9IDQsXHJcbiAgIEhpZ2hsaWdodFNoYWRvdyA9IDUsXHJcbiAgIEVtcGhhc2l6ZUhpZ2hsaWdodHMgPSA2LFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBSZXNldCB7XHJcbiAgIEFsbCxcclxuICAgVmlldyxcclxuICAgTGlnaHRzLFxyXG4gICBSZW5kZXJpbmdcclxufVxyXG5cclxuZXhwb3J0IGVudW0gTGlnaHRUeXBlIHtcclxuICAgUG9pbnQsXHJcbiAgIERpcmVjdGlvbmFsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVJlbmRlck9wdGlvbnMge1xyXG4gICB2aWV3OiBNYXQ0O1xyXG4gICB2YWx1ZVJhbmdlOiBWYWx1ZVJhbmdlO1xyXG4gICBsaWdodFBvczogVmVjMztcclxuICAgbGlnaHRUeXBlOiBMaWdodFR5cGU7XHJcbiAgIGZhbGxvZmY6IG51bWJlcjtcclxuICAgbGlnaHRJbnRlbnNpdHk6IG51bWJlcjtcclxuICAgY29udG91cnM6IENvbnRvdXJbXTtcclxuICAgdXNlQ3VsbGluZzogYm9vbGVhbjtcclxuICAgc2hvd0hpZ2hsaWdodHM6IGJvb2xlYW47XHJcbiAgIHNoaW5pbmVzczogbnVtYmVyO1xyXG4gICBjYW1lcmE6IENhbWVyYTtcclxuICAgcmVuZGVyTW9kZTogUmVuZGVyTW9kZTtcclxuICAgd2hpdGVDb2xvcjogZ2xDb2xvcjM7XHJcbiAgIGJsYWNrQ29sb3I6IGdsQ29sb3IzO1xyXG4gICB1c2VTaGFkb3dzOiBib29sZWFuO1xyXG59XHJcblxyXG4vKipcclxuICogQ2xhc3MgdGhhdCByZW5kZXJzIHRyaWFuZ2xlcyBhbmQgYSBsaWdodCBzb3VyY2VcclxuICovXHJcbmV4cG9ydCBjbGFzcyBSZW5kZXJlciB7XHJcblxyXG4gICBwcml2YXRlIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQgfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gbnVsbDtcclxuICAgcHJpdmF0ZSBwcm9ncmFtOiBnbFByb2dyYW07XHJcbiAgIHB1YmxpYyByZWFkb25seSB5ZWxsb3cgPSBuZXcgZ2xDb2xvcjMoWzEuMCwgMC45LCAwLjddKTtcclxuXHJcbiAgIHB1YmxpYyBvcHRpb25zOiBJUmVuZGVyT3B0aW9ucyA9IHtcclxuICAgICAgdmlldzogTWF0NC5pZGVudGl0eSxcclxuICAgICAgdmFsdWVSYW5nZTogVmFsdWVSYW5nZS5TdGFuZGFyZCxcclxuICAgICAgbGlnaHRQb3M6IElOSVRJQUxfTElHSFRfUE9TLmNsb25lKCksXHJcbiAgICAgIGxpZ2h0VHlwZTogTGlnaHRUeXBlLlBvaW50LFxyXG4gICAgICBmYWxsb2ZmOiBJTklUSUFMX0ZBTExPRkYsXHJcbiAgICAgIGxpZ2h0SW50ZW5zaXR5OiBJTklUSUFMX0xJR0hUX0lOVEVOU0lUWSxcclxuICAgICAgY29udG91cnM6IFtdLFxyXG5cclxuICAgICAgdXNlQ3VsbGluZzogdHJ1ZSxcclxuICAgICAgc2hvd0hpZ2hsaWdodHM6IHRydWUsXHJcbiAgICAgIHNoaW5pbmVzczogSU5JVElBTF9TSElOSU5FU1MsXHJcbiAgICAgIGNhbWVyYTogbmV3IENhbWVyYSgpLFxyXG4gICAgICB3aGl0ZUNvbG9yOiBnbENvbG9yMy5tb2RlbFdoaXRlLFxyXG4gICAgICBibGFja0NvbG9yOiBnbENvbG9yMy5tb2RlbEJsYWNrLFxyXG4gICAgICB1c2VTaGFkb3dzOiB0cnVlLFxyXG5cclxuICAgICAgcmVuZGVyTW9kZTogUmVuZGVyTW9kZS5Ob3JtYWwsXHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgYXJyb3dPcHRpb25zOiBJUmVuZGVyT3B0aW9ucyA9IHtcclxuICAgICAgdmlldzogTWF0NC5pZGVudGl0eSxcclxuICAgICAgdmFsdWVSYW5nZTogbmV3IFZhbHVlUmFuZ2UoMS4wLCAwLjQsIDAuMSksXHJcbiAgICAgIGxpZ2h0UG9zOiBuZXcgVmVjMyhbLTEsIDAuNSwgMC41XSksXHJcbiAgICAgIGxpZ2h0VHlwZTogTGlnaHRUeXBlLkRpcmVjdGlvbmFsLFxyXG4gICAgICBmYWxsb2ZmOiAwLjAsXHJcbiAgICAgIGxpZ2h0SW50ZW5zaXR5OiBJTklUSUFMX0xJR0hUX0lOVEVOU0lUWSxcclxuICAgICAgY29udG91cnM6IFtdLFxyXG4gICAgICB1c2VDdWxsaW5nOiB0cnVlLFxyXG4gICAgICBzaG93SGlnaGxpZ2h0czogZmFsc2UsXHJcbiAgICAgIHNoaW5pbmVzczogSU5JVElBTF9TSElOSU5FU1MsXHJcbiAgICAgIGNhbWVyYTogbmV3IENhbWVyYSh7XHJcbiAgICAgICAgIHNpemVQcm92aWRlcjogbmV3IEZpeGVkU2l6ZVByb3ZpZGVyKDIsIDIpLFxyXG4gICAgICAgICB1c2VPcnRob2dyYXBoaWM6IHRydWUsXHJcbiAgICAgIH0pLFxyXG4gICAgICB3aGl0ZUNvbG9yOiB0aGlzLnllbGxvdyxcclxuICAgICAgYmxhY2tDb2xvcjogaHRtbENvbG9yLmJsYWNrLnRvR2xDb2xvcigpLFxyXG4gICAgICB1c2VTaGFkb3dzOiBmYWxzZSxcclxuXHJcbiAgICAgIHJlbmRlck1vZGU6IFJlbmRlck1vZGUuTm9ybWFsLFxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGJhbGxPcHRpb25zOiBJUmVuZGVyT3B0aW9ucyA9IHtcclxuICAgICAgdmlldzogTWF0NC5pZGVudGl0eSxcclxuICAgICAgdmFsdWVSYW5nZTogVmFsdWVSYW5nZS5TdGFuZGFyZCxcclxuICAgICAgbGlnaHRQb3M6IG5ldyBWZWMzKFstMSwgMC41LCAwLjVdKSxcclxuICAgICAgbGlnaHRUeXBlOiBMaWdodFR5cGUuRGlyZWN0aW9uYWwsXHJcbiAgICAgIGZhbGxvZmY6IDAuMCxcclxuICAgICAgbGlnaHRJbnRlbnNpdHk6IElOSVRJQUxfTElHSFRfSU5URU5TSVRZLFxyXG4gICAgICBjb250b3VyczogW10sXHJcbiAgICAgIHVzZUN1bGxpbmc6IHRydWUsXHJcbiAgICAgIHNob3dIaWdobGlnaHRzOiBmYWxzZSxcclxuICAgICAgc2hpbmluZXNzOiBJTklUSUFMX1NISU5JTkVTUyxcclxuICAgICAgY2FtZXJhOiBuZXcgQ2FtZXJhKHtcclxuICAgICAgICAgc2l6ZVByb3ZpZGVyOiBuZXcgRml4ZWRTaXplUHJvdmlkZXIoMiwgMiksXHJcbiAgICAgICAgIHVzZU9ydGhvZ3JhcGhpYzogdHJ1ZSxcclxuICAgICAgfSksXHJcbiAgICAgIHdoaXRlQ29sb3I6IGdsQ29sb3IzLm1vZGVsV2hpdGUsXHJcbiAgICAgIGJsYWNrQ29sb3I6IGdsQ29sb3IzLm1vZGVsQmxhY2ssXHJcbiAgICAgIHVzZVNoYWRvd3M6IGZhbHNlLFxyXG5cclxuICAgICAgcmVuZGVyTW9kZTogUmVuZGVyTW9kZS5Ob3JtYWwsXHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzZXQgYmFsbENvbG9yKGNvbG9yOiBnbENvbG9yMykge1xyXG4gICAgICB0aGlzLmJhbGxPcHRpb25zLndoaXRlQ29sb3IgPSBjb2xvcjtcclxuICAgfVxyXG5cclxuICAgLy8gc2l6ZSBvZiB0aGUgc21hbGxlciB2aWV3XHJcbiAgIHB1YmxpYyByZWFkb25seSBtaW5pU2l6ZSA9IDAuMjtcclxuXHJcbiAgIHByaXZhdGUgYmFsbDogZ2xPYmplY3Q7XHJcbiAgIHByaXZhdGUgYXJyb3c6IGdsT2JqZWN0O1xyXG4gICBwdWJsaWMgZmxvb3I6IGdsT2JqZWN0O1xyXG4gICBwdWJsaWMgb2JqOiBnbE9iamVjdDtcclxuXHJcbiAgIHByaXZhdGUgbGlnaHRWaWV3OiBNYXQ0O1xyXG4gICBwcml2YXRlIHNoYWRvd0ZyYW1lQnVmZmVyOiBnbEZyYW1lQnVmZmVyO1xyXG4gICBwcml2YXRlIHNoYWRvd0NvbG9yVGV4dHVyZTogZ2xUZXh0dXJlO1xyXG4gICBwcml2YXRlIHNoYWRvd0RlcHRoVGV4dHVyZTogZ2xUZXh0dXJlO1xyXG5cclxuICAgcHVibGljIHNob3dTaGFkb3dNYXAgPSBmYWxzZTtcclxuICAgcHVibGljIHNob3dNaW5pVmlldyA9IHRydWU7XHJcbiAgIHB1YmxpYyBzaG93QmFsbCA9IHRydWU7XHJcbiAgIHB1YmxpYyBzaG93Rmxvb3IgPSB0cnVlO1xyXG4gICBwdWJsaWMgc2hvd0dyaWQgPSBmYWxzZTtcclxuICAgcHVibGljIG1pbmlWaWV3U2hvd0NvbnRvdXJzID0gZmFsc2U7XHJcbiAgIHB1YmxpYyBsb2NrRmxvb3IgPSBmYWxzZTtcclxuXHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IoZ2xDdHg6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xyXG5cclxuICAgICAgdGhpcy5nbCA9IGdsQ3R4O1xyXG4gICAgICBsZXQgZ2wgPSB0aGlzLmdsO1xyXG5cclxuICAgICAgLy8gZW5hYmxlIHotYnVmZmVyXHJcbiAgICAgIGdsLmVuYWJsZShnbC5ERVBUSF9URVNUKTtcclxuXHJcbiAgICAgIC8vIGVuYWJsZSBhbHBoYSB2YWx1ZXNcclxuICAgICAgZ2wuZW5hYmxlKGdsLkJMRU5EKTtcclxuICAgICAgZ2wuYmxlbmRGdW5jKGdsLlNSQ19BTFBIQSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7XHJcblxyXG4gICAgICB0aGlzLnByb2dyYW0gPSBuZXcgZ2xQcm9ncmFtKGdsLCB2ZXJ0ZXhTb3VyY2UsIGZyYWdtZW50U291cmNlKTtcclxuXHJcbiAgICAgIGxldCB0QmFsbCA9IG5ldyBUcmlhbmdsZU9iakJ1aWxkZXIoJ0JhbGwnKTtcclxuICAgICAgdEJhbGwuYWRkU3BoZXJlKDUwLCBCQUxMX1JBRElVUywgbmV3IFZlYzMoWzAsIDAsIDBdKSk7XHJcbiAgICAgIHRCYWxsLm9wdGltaXplKE5vcm1hbFR5cGUuU21vb3RoKTtcclxuICAgICAgdGhpcy5iYWxsID0gbmV3IGdsT2JqZWN0KGdsLCB0QmFsbCwgdGhpcy5wcm9ncmFtKTtcclxuXHJcbiAgICAgIGxldCB0QXJyb3cgPSBuZXcgVHJpYW5nbGVPYmpCdWlsZGVyKCdMaWdodCBBcnJvdycpO1xyXG4gICAgICB0QXJyb3cuYWRkQXJyb3coKTtcclxuICAgICAgdGhpcy5hcnJvdyA9IG5ldyBnbE9iamVjdChnbCwgdEFycm93LCB0aGlzLnByb2dyYW0pO1xyXG4gICAgICB0aGlzLmFycm93T3B0aW9ucy5jYW1lcmEudXNlT3J0aG9ncmFwaGljID0gdHJ1ZTtcclxuXHJcbiAgICAgIGxldCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoPEVsZW1lbnQ+Z2wuY2FudmFzKTtcclxuICAgICAgbGV0IGNvbG9yID0gaHRtbENvbG9yLmZyb21Dc3Moc3R5bGUuYmFja2dyb3VuZENvbG9yKS50b0dsQ29sb3IoKTtcclxuICAgICAgZ2wuY2xlYXJDb2xvcihjb2xvci5yLCBjb2xvci5nLCBjb2xvci5iLCAxKTtcclxuICAgICAgZ2wuY2xlYXIoZ2wuREVQVEhfQlVGRkVSX0JJVCB8IGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xyXG5cclxuXHJcbiAgICAgIC8vIHRlc3RzXHJcbiAgICAgIC8qXHJcbiAgICAgIGxldCBsaWdodCA9IG5ldyBWZWMzKFswLCAxMCwgMF0pO1xyXG4gICAgICBsZXQgcHQgPSBuZXcgVmVjMyhbMiwgMCwgMF0pO1xyXG4gICAgICBsZXQgbWF0ID0gbmV3IE1hdDQoKTtcclxuICAgICAgbWF0LnRyYW5zbGF0ZShuZXcgVmVjMyhbMCwgLTEwMCwgMF0pKTtcclxuICAgICAgbWF0LnNjYWxlKDAuNSk7XHJcbiAgICAgIG1hdC5yb3RaKHRvUmFkKC05MCkpO1xyXG4gICAgICBtYXQucm90WSh0b1JhZCg0NSkpO1xyXG4gICAgICBsZXQgeHB0ID0gbWF0Lm11bHRWZWMzKHB0KTtcclxuICAgICAgbGV0IHhMaWdodCA9IG1hdC5pbnZlcnNlKCkubXVsdFZlYzMobGlnaHQpO1xyXG4gICAgICBsZXQgeE9yaWdpbiA9IG1hdC5pbnZlcnNlKCkubXVsdFZlYzMobmV3IFZlYzMoWzAsIDAsIDBdKSk7XHJcbiAgICAgIGxldCBwbGFuZSA9IG5ldyBQbGFuZShsaWdodCk7XHJcbiAgICAgIGxldCBwbGFuZTIgPSBuZXcgUGxhbmUoeExpZ2h0LCB4T3JpZ2luKTtcclxuICAgICAgY29uc29sZS5sb2coJ1xcblxcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nKTtcclxuICAgICAgY29uc29sZS5sb2coJ3B0OiAnICsgcHQudG9TdHJpbmcoMikgKyAnICAgICAgeGxpZ2h0OiAnICsgeExpZ2h0LnRvU3RyaW5nKDIpICsgJyAgICcgKyAocGxhbmUyLmRpc3RUb1B0KHB0KSAqIG1hdC5zY2FsZUZhY3RvcnMueCkpO1xyXG4gICAgICBjb25zb2xlLmxvZygneHB0OiAnICsgeHB0LnRvU3RyaW5nKDIpICsgJyAgICBsaWdodDogJyArIGxpZ2h0LnRvU3RyaW5nKDIpICsgJyAgICcgKyBwbGFuZS5kaXN0VG9QdCh4cHQpKTtcclxuICAgICAgY29uc29sZS5sb2coJ3hPcmlnaW46ICcgKyB4T3JpZ2luLnRvU3RyaW5nKDIpKTtcclxuICAgICAgKi9cclxuICAgfVxyXG5cclxuICAgcHVibGljIGRpc3Bvc2UoKSB7XHJcbiAgICAgIHRoaXMub2JqLmRpc3Bvc2UoKTtcclxuICAgICAgdGhpcy5mbG9vci5kaXNwb3NlKCk7XHJcbiAgICAgIHRoaXMuYmFsbC5kaXNwb3NlKCk7XHJcbiAgICAgIHRoaXMuYXJyb3cuZGlzcG9zZSgpO1xyXG5cclxuICAgICAgaWYgKHRoaXMuc2hhZG93RnJhbWVCdWZmZXIpIHtcclxuICAgICAgICAgdGhpcy5zaGFkb3dGcmFtZUJ1ZmZlci5kaXNwb3NlKCk7XHJcbiAgICAgICAgIHRoaXMuc2hhZG93Q29sb3JUZXh0dXJlLmRpc3Bvc2UoKTtcclxuICAgICAgICAgdGhpcy5zaGFkb3dEZXB0aFRleHR1cmUuZGlzcG9zZSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLm9iaiA9IG51bGw7XHJcbiAgICAgIHRoaXMuZmxvb3IgPSBudWxsO1xyXG4gICAgICB0aGlzLmJhbGwgPSBudWxsO1xyXG4gICAgICB0aGlzLmFycm93ID0gbnVsbDtcclxuICAgICAgdGhpcy5zaGFkb3dGcmFtZUJ1ZmZlciA9IG51bGw7XHJcbiAgICAgIHRoaXMuc2hhZG93Q29sb3JUZXh0dXJlID0gbnVsbDtcclxuICAgICAgdGhpcy5zaGFkb3dEZXB0aFRleHR1cmUgPSBudWxsO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgcmVuZGVyTW9kZUNhblRvZ2dsZUhpZ2hsaWdodHMoKTogYm9vbGVhbiB7XHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVuZGVyTW9kZSA9PT0gUmVuZGVyTW9kZS5FbXBoYXNpemVIaWdobGlnaHRzIHx8IHRoaXMub3B0aW9ucy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkxpZ2h0QW5kU2hhZG93KSB7XHJcbiAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIHJvdFgoYW5nbGU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLm9iai5yb3RYKGFuZ2xlKTtcclxuICAgICAgaWYgKHRoaXMubG9ja0Zsb29yID09IGZhbHNlKSB7XHJcbiAgICAgICAgIHRoaXMuZmxvb3Iucm90WChhbmdsZSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG4gICBwdWJsaWMgcm90WShhbmdsZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMub2JqLnJvdFkoYW5nbGUpO1xyXG4gICAgICBpZiAodGhpcy5sb2NrRmxvb3IgPT0gZmFsc2UpIHtcclxuICAgICAgICAgdGhpcy5mbG9vci5yb3RZKGFuZ2xlKTtcclxuICAgICAgfVxyXG4gICB9XHJcbiAgIHB1YmxpYyByb3RaKGFuZ2xlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5vYmoucm90WihhbmdsZSk7XHJcbiAgICAgIGlmICh0aGlzLmxvY2tGbG9vciA9PSBmYWxzZSkge1xyXG4gICAgICAgICB0aGlzLmZsb29yLnJvdFooYW5nbGUpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuICAgcHVibGljIHByZVJvdFgoYW5nbGU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLm9iai5wcmVSb3RYKGFuZ2xlKTtcclxuICAgICAgaWYgKHRoaXMubG9ja0Zsb29yID09IGZhbHNlKSB7XHJcbiAgICAgICAgIHRoaXMuZmxvb3IucHJlUm90WChhbmdsZSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG4gICBwdWJsaWMgcHJlUm90WShhbmdsZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMub2JqLnByZVJvdFkoYW5nbGUpO1xyXG4gICAgICBpZiAodGhpcy5sb2NrRmxvb3IgPT0gZmFsc2UpIHtcclxuICAgICAgICAgdGhpcy5mbG9vci5wcmVSb3RZKGFuZ2xlKTtcclxuICAgICAgfVxyXG4gICB9XHJcbiAgIHB1YmxpYyBwcmVSb3RaKGFuZ2xlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5vYmoucHJlUm90WihhbmdsZSk7XHJcbiAgICAgIGlmICh0aGlzLmxvY2tGbG9vciA9PSBmYWxzZSkge1xyXG4gICAgICAgICB0aGlzLmZsb29yLnByZVJvdFooYW5nbGUpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuICAgcHVibGljIHNjYWxlKHNjYWxlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5vYmouc2NhbGUoc2NhbGUpO1xyXG4gICAgICBpZiAodGhpcy5sb2NrRmxvb3IgPT0gZmFsc2UpIHtcclxuICAgICAgICAgdGhpcy5mbG9vci5zY2FsZShzY2FsZSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG4gICBwdWJsaWMgdHJhbnNsYXRlKG9mZnNldDogVmVjMykge1xyXG4gICAgICB0aGlzLm9iai50cmFuc2xhdGUob2Zmc2V0KTtcclxuICAgICAgaWYgKHRoaXMubG9ja0Zsb29yID09IGZhbHNlKSB7XHJcbiAgICAgICAgIHRoaXMuZmxvb3IudHJhbnNsYXRlKG9mZnNldCk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIHJvdGF0ZUxpZ2h0KHhSYWQ6IG51bWJlciwgeVJhZDogbnVtYmVyKSB7XHJcbiAgICAgIGxldCBtYXRYID0gTWF0NC5mcm9tUm90WCh5UmFkKTtcclxuICAgICAgbGV0IG1hdFkgPSBNYXQ0LmZyb21Sb3RZKHhSYWQpO1xyXG4gICAgICBsZXQgdmVjID0gVmVjNC5mcm9tVmVjMyh0aGlzLm9wdGlvbnMubGlnaHRQb3MsIDEpO1xyXG4gICAgICB2ZWMgPSBtYXRYLm11bHRWKHZlYyk7XHJcbiAgICAgIHZlYyA9IG1hdFkubXVsdFYodmVjKTtcclxuICAgICAgdGhpcy5vcHRpb25zLmxpZ2h0UG9zID0gdmVjLnh5ejtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCB0T2JqKCk6IFRyaWFuZ2xlT2JqIHtcclxuICAgICAgcmV0dXJuIHRoaXMub2JqLnRPYmo7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzZXRNb2RlbCh0T2JqOiBUcmlhbmdsZU9iaikge1xyXG4gICAgICBpZiAodGhpcy5vYmopIHtcclxuICAgICAgICAgdGhpcy5vYmouZGlzcG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMub2JqID0gbmV3IGdsT2JqZWN0KHRoaXMuZ2wsIHRPYmosIHRoaXMucHJvZ3JhbSk7XHJcbiAgICAgIHRoaXMub3B0aW9ucy5jYW1lcmEuc2l6ZVByb3ZpZGVyID0gbmV3IE9ialNpemVQcm92aWRlcih0aGlzLm9iaik7XHJcblxyXG4gICAgICAvLyBtb3ZlIHRoZSBvYmplY3Qgc28gdGhhdCB0aGUgY2VudGVyIGlzIGF0IFswLDAsMF0gYW5kIGl0IGlzIHNjYWxlZFxyXG4gICAgICAvLyBzbyB0aGF0IGl0J3MgZGlhZ29uYWwgaXMgMiB1bml0cyBhY3Jvc3NcclxuICAgICAgbGV0IG9ialNjYWxlID0gMi4wIC8gdE9iai5kaWFnb25hbDtcclxuICAgICAgdGhpcy5vYmouYXV0b1NpemUobmV3IFZlYzMoWzAsIDAsIDBdKSwgMik7XHJcblxyXG4gICAgICBpZiAodGhpcy5mbG9vcikge1xyXG4gICAgICAgICB0aGlzLmZsb29yLmRpc3Bvc2U7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IHRGbG9vciA9IG5ldyBUcmlhbmdsZU9iakJ1aWxkZXIoJ0Zsb29yJyk7XHJcblxyXG4gICAgICAvLyBtYWtlIHRoZSBmbG9vciBzaXplIHNsaWdodGx5IGxhcmdlciB0aGFuIHRoZSBvYmplY3QsIGNlbnRlcmVkIGF0IHRoZSBib3R0b21cclxuICAgICAgbGV0IHJhZGl1cyA9IDQ7XHJcbiAgICAgIGxldCBwb3MgPSBuZXcgVmVjMyhbMCwgLW9ialNjYWxlICogdE9iai5oZWlnaHQgLyAyLCAwXSk7XHJcbiAgICAgIHRGbG9vci5hZGREaXNrKDUwLCByYWRpdXMsIHBvcyk7XHJcbiAgICAgIHRoaXMuZmxvb3IgPSBuZXcgZ2xPYmplY3QodGhpcy5nbCwgdEZsb29yLCB0aGlzLnByb2dyYW0pO1xyXG5cclxuICAgICAgbGV0IHVuaSA9IG5ldyBnbFVuaWZvcm0odGhpcy5nbCwgdGhpcy5wcm9ncmFtKTtcclxuICAgICAgdW5pLnNldCgndUZsb29yQ2VudGVyJywgdEZsb29yLmNlbnRlcik7XHJcbiAgICAgIHVuaS5zZXQoJ3VGbG9vclJhZGl1cycsIHJhZGl1cyk7XHJcblxyXG4gICAgICAvLyByZXNldCB0aGUgdmlldyBhbmQgdGhlIGxpZ2h0XHJcbiAgICAgIHRoaXMucmVzZXQoUmVzZXQuQWxsKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHJlc2V0KHdoYXQ6IFJlc2V0KSB7XHJcbiAgICAgIHN3aXRjaCAod2hhdCkge1xyXG4gICAgICAgICBjYXNlIFJlc2V0LkFsbDpcclxuICAgICAgICAgICAgdGhpcy5yZXNldChSZXNldC5MaWdodHMpO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0KFJlc2V0LlJlbmRlcmluZyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXQoUmVzZXQuVmlldyk7XHJcblxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgY2FzZSBSZXNldC5MaWdodHM6XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5saWdodFBvcyA9IElOSVRJQUxfTElHSFRfUE9TLmNsb25lKCk7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5mYWxsb2ZmID0gSU5JVElBTF9GQUxMT0ZGO1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMubGlnaHRJbnRlbnNpdHkgPSBJTklUSUFMX0xJR0hUX0lOVEVOU0lUWTtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnZhbHVlUmFuZ2UuYW1iaWVudEludGVuc2l0eSA9IFZhbHVlUmFuZ2UuU3RhbmRhcmQuYW1iaWVudEludGVuc2l0eTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICBjYXNlIFJlc2V0LlZpZXc6XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy52aWV3ID0gSU5JVElBTF9WSUVXLmNsb25lKCk7XHJcbiAgICAgICAgICAgIHRoaXMub2JqLmNsZWFyVHJhbnNmb3JtcygpO1xyXG4gICAgICAgICAgICB0aGlzLmZsb29yLmNsZWFyVHJhbnNmb3JtcygpO1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuY2FtZXJhLmV5ZSA9IG5ldyBWZWMzKElOSVRJQUxfRVlFKTtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmNhbWVyYS5sb29rQXQgPSBWZWMzLm9yaWdpbjtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmNhbWVyYS56b29tRmFjdG9yID0gMTtcclxuXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgY2FzZSBSZXNldC5SZW5kZXJpbmc6XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5yZW5kZXJNb2RlID0gUmVuZGVyTW9kZS5Ob3JtYWw7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zaG93SGlnaGxpZ2h0cyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zaGluaW5lc3MgPSBJTklUSUFMX1NISU5JTkVTUztcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnZhbHVlUmFuZ2UgPSBWYWx1ZVJhbmdlLlN0YW5kYXJkO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgcmVuZGVyKCk6IHZvaWQge1xyXG5cclxuICAgICAgdGhpcy5wcm9ncmFtLnVzZSgpO1xyXG4gICAgICB0aGlzLnJlbmRlclRvU2hhZG93TWFwKCk7XHJcbiAgICAgIHRoaXMucmVuZGVyVG9TY3JlZW4oKTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBzZXRWYWx1ZVJhbmdlVW5pZm9ybXModmFsdWVSYW5nZTogVmFsdWVSYW5nZSkge1xyXG4gICAgICBsZXQgdW5pID0gbmV3IGdsVW5pZm9ybSh0aGlzLmdsLCB0aGlzLnByb2dyYW0pO1xyXG4gICAgICB1bmkuc2V0KCd1RGlmZnVzZUludGVuc2l0eScsIHZhbHVlUmFuZ2UuZGlmZnVzZUludGVuc2l0eSk7XHJcbiAgICAgIHVuaS5zZXQoJ3VBbWJpZW50SW50ZW5zaXR5JywgdmFsdWVSYW5nZS5zaGFkb3cpO1xyXG4gICAgICB1bmkuc2V0KCd1U3BlY3VsYXJJbnRlbnNpdHknLCB2YWx1ZVJhbmdlLnNwZWN1bGFySW50ZW5zaXR5KTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBzZXRPcHRpb25zKG9wdGlvbnM6IElSZW5kZXJPcHRpb25zKTogZ2xVbmlmb3JtIHtcclxuXHJcbiAgICAgIGxldCBnbCA9IHRoaXMuZ2w7XHJcbiAgICAgIG9wdGlvbnMudXNlQ3VsbGluZyA/IGdsLmVuYWJsZShnbC5DVUxMX0ZBQ0UpIDogZ2wuZGlzYWJsZShnbC5DVUxMX0ZBQ0UpO1xyXG4gICAgICBnbC5jdWxsRmFjZShnbC5CQUNLKTtcclxuXHJcbiAgICAgIGxldCB1bmkgPSBuZXcgZ2xVbmlmb3JtKHRoaXMuZ2wsIHRoaXMucHJvZ3JhbSk7XHJcbiAgICAgIHVuaS5zZXQoJ3ZpZXcnLCBvcHRpb25zLnZpZXcpO1xyXG4gICAgICB1bmkuc2V0KCdsaWdodFZpZXcnLCB0aGlzLmxpZ2h0Vmlldyk7XHJcbiAgICAgIHVuaS5zZXQoJ3Byb2plY3Rpb24nLCBvcHRpb25zLmNhbWVyYS5nZXRQcm9qZWN0aW9uKHRoaXMuZ2wpKTtcclxuICAgICAgdW5pLnNldCgndUV5ZScsIG9wdGlvbnMuY2FtZXJhLmV5ZSk7XHJcbiAgICAgIHVuaS5zZXQoJ3VPcnRob2dyYXBoaWMnLCBvcHRpb25zLmNhbWVyYS51c2VPcnRob2dyYXBoaWMpO1xyXG4gICAgICB1bmkuc2V0KCd1VXNlU2hhZG93cycsIG9wdGlvbnMudXNlU2hhZG93cyk7XHJcbiAgICAgIHVuaS5zZXRpKCd1UmVuZGVyTW9kZScsIG9wdGlvbnMucmVuZGVyTW9kZSk7XHJcbiAgICAgIHVuaS5zZXQoJ3VTaG93SGlnaGxpZ2h0cycsIG9wdGlvbnMuc2hvd0hpZ2hsaWdodHMgfHwgb3B0aW9ucy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkVtcGhhc2l6ZUhpZ2hsaWdodHMpO1xyXG4gICAgICB1bmkuc2V0KCd1U2hpbmluZXNzJywgb3B0aW9ucy5zaGluaW5lc3MpO1xyXG5cclxuICAgICAgbGV0IHZhbHVlUmFuZ2U7XHJcbiAgICAgIGlmIChvcHRpb25zLnJlbmRlck1vZGUgPT09IFJlbmRlck1vZGUuRW1waGFzaXplSGlnaGxpZ2h0cykge1xyXG4gICAgICAgICB2YWx1ZVJhbmdlID0gVmFsdWVSYW5nZS5FbXBoYXNpemVIaWdobGlnaHRzO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICB2YWx1ZVJhbmdlID0gb3B0aW9ucy52YWx1ZVJhbmdlO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2V0VmFsdWVSYW5nZVVuaWZvcm1zKHZhbHVlUmFuZ2UpO1xyXG5cclxuICAgICAgdW5pLnNldCgndVdoaXRlQ29sb3InLCBvcHRpb25zLndoaXRlQ29sb3IpO1xyXG4gICAgICB1bmkuc2V0KCd1QmxhY2tDb2xvcicsIG9wdGlvbnMuYmxhY2tDb2xvcik7XHJcblxyXG4gICAgICB1bmkuc2V0aSgndU51bUNvbnRvdXJzJywgb3B0aW9ucy5jb250b3Vycy5sZW5ndGgpO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdGlvbnMuY29udG91cnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgdW5pLnNldCgndUNvbnRvdXJDb2xvcnNbJyArIGkgKyAnXScsIG9wdGlvbnMuY29udG91cnNbaV0uY29sb3IpO1xyXG4gICAgICAgICB1bmkuc2V0KCd1Q29udG91ckFuZ2xlc1snICsgaSArICddJywgb3B0aW9ucy5jb250b3Vyc1tpXS5hbmdsZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHVuaS5zZXQoJ3VQb2ludExpZ2h0Jywgb3B0aW9ucy5saWdodFR5cGUgPT09IExpZ2h0VHlwZS5Qb2ludCk7XHJcbiAgICAgIHVuaS5zZXQoJ3VGYWxsb2ZmJywgb3B0aW9ucy5mYWxsb2ZmKTtcclxuICAgICAgdW5pLnNldCgndUxpZ2h0SW50ZW5zaXR5Jywgb3B0aW9ucy5saWdodEludGVuc2l0eSk7XHJcbiAgICAgIGlmIChvcHRpb25zLmZhbGxvZmYgPT09IDApIHtcclxuICAgICAgICAgdW5pLnNldCgndUxpZ2h0UG9zJywgb3B0aW9ucy5saWdodFBvcyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIC8vIGNvbXB1dGUgdGhlIG1pbmltdW0gZGlzdGFuY2UgdG8gdGhlIGxpZ2h0LiBXZSdsbCB1c2UgdGhpcyB2YWx1ZSB0byBhdXRvLWFkanVzdFxyXG4gICAgICAgICAvLyB0aGUgbGlnaHRcclxuICAgICAgICAgbGV0IGRpc3Q6IElNaW5NYXg7XHJcblxyXG4gICAgICAgICAvLyBXZSBjYW4gZ2V0IHRoZSBkaXN0YW5jZSBpbiB0d28gd2F5cy4gMTogdHJhbnNmb3JtIGFsbCB0aGUgcG9pbnRzIGJ5IHRoZSBtb2RlbFxyXG4gICAgICAgICAvLyBtYXRyaXggYW5kIGNvbXB1dGUgZGlzdGFuY2VzLiBUaGlzIGlzIGV4cGVuc2l2ZSBzaW5jZSB3ZSBoYXZlIHRvIHRyYW5zZm9ybSBlYWNoXHJcbiAgICAgICAgIC8vIHBvaW50IHNvIHdlIGluc3RlYWQsIDI6IGRvIHRoZSBpbnZlcnNlIHRyYW5zZm9ybSB0byB0aGUgbGlnaHQgYW5kIGNvbXB1dGUgdGhlXHJcbiAgICAgICAgIC8vIGRpc3RhbmNlIHRvIHRoZSB1bnRyYW5zZm9ybWVkIHBvaW50cy5cclxuICAgICAgICAgbGV0IGJvdW5kaW5nUHRzID0gdGhpcy5vYmoudE9iai5nZXRCb3VuZGluZ1B0cygpO1xyXG5cclxuICAgICAgICAgLy8gZ2V0IHRoZSBpbnZlcnNlIHRyYW5zZm9ybSBvZiB0aGUgbGlnaHQgcG9zaXRpb25cclxuICAgICAgICAgbGV0IG9iaiA9IHRoaXMub2JqO1xyXG4gICAgICAgICBsZXQgbWF0ID0gb2JqLm1vZGVsLm11bHRNKG9iai5ub3JtYWxpemUpO1xyXG4gICAgICAgICBsZXQgaW52ZXJzZSA9IG1hdC5pbnZlcnNlKCk7XHJcbiAgICAgICAgIGxldCB4TGlnaHRQb3MgPSBpbnZlcnNlLm11bHRWZWMzKG9wdGlvbnMubGlnaHRQb3MpO1xyXG5cclxuICAgICAgICAgaWYgKG9wdGlvbnMubGlnaHRUeXBlID09PSBMaWdodFR5cGUuUG9pbnQpIHtcclxuXHJcbiAgICAgICAgICAgIGRpc3QgPSBib3VuZGluZ1B0cy5kaXN0VG9Qb2ludCh4TGlnaHRQb3MpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBmaWd1cmUgb3V0IHRoZSBsaWdodCBwbGFuZSBmb3IgdGhlIGludmVyc2UgbGlnaHRcclxuICAgICAgICAgICAgbGV0IHhPcmlnaW4gPSBpbnZlcnNlLm11bHRWZWMzKFZlYzMub3JpZ2luKTtcclxuICAgICAgICAgICAgbGV0IHhQbGFuZSA9IG5ldyBQbGFuZSh4TGlnaHRQb3MsIHhPcmlnaW4pO1xyXG5cclxuICAgICAgICAgICAgLy8gZGlzdGFuY2UgdG8gdGhlIHJhdyBvYmplY3QgcG9pbnRzXHJcbiAgICAgICAgICAgIGRpc3QgPSBib3VuZGluZ1B0cy5kaXN0VG9QbGFuZSh4UGxhbmUpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICAvLyB0byBnZXQgdGhlIGFjdHVhbCBkaXN0YW5jZSwgd2Ugbm93IG5lZWQgdG8gcmVhcHBseSB0aGUgc2NhbGUgZmFjdG9yIHRvXHJcbiAgICAgICAgIC8vIGdldCB0aGUgdHJ1ZSBkaXN0YW5jZS4gVGhlIHNjYWxlIGZhY3RvciBpcyB0aGUgc2FtZSBpbiBhbGwgZGlyZWN0aW9uc1xyXG4gICAgICAgICAvLyBzbyBqdXN0IHVzZSB0aGUgeCB2YWx1ZVxyXG4gICAgICAgICBsZXQgcyA9IG9iai5tb2RlbC5tdWx0TShvYmoubm9ybWFsaXplKS5zY2FsZUZhY3RvcnMueDtcclxuICAgICAgICAgZGlzdCA9IHtcclxuICAgICAgICAgICAgbWluOiBkaXN0Lm1pbiAqIHMsXHJcbiAgICAgICAgICAgIG1heDogZGlzdC5tYXggKiBzLFxyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICAvLyB3ZSBuZWVkIHRvIGNvbXB1dGUgdGhlIGRpc3RhbmNlIHRvIHRoZSBsaWdodCBhbmQgdGhlIGxpZ2h0IGludGVuc2l0eSBzdWNoIHRoYXRcclxuICAgICAgICAgLy8gdGhlIGNsb3Nlc3QgcG9pbnQgZ2V0cyBsaXQgd2l0aCB2YWx1ZSAxIGFuZCB0aGUgZnVydGhlc3QgcG9pbnQgbWF0Y2hlcyB0aGVcclxuICAgICAgICAgLy8gdGFyZ2V0IGZhbGxvZmYuXHJcbiAgICAgICAgIC8vXHJcbiAgICAgICAgIC8vIC0gZCBpcyB0aGUgZGlzdGFuY2UgdGhlIGxpZ2h0IG5lZWRzIHRvIGJlIGZyb20gdGhlIGNsb3Nlc3QgcG9pbnQuIExpZ2h0IGZhbGxzIG9mZlxyXG4gICAgICAgICAvLyB3aXRoIHRoZSBzcXVhcmUgb2YgZGlzdGFuY2UuXHJcbiAgICAgICAgIC8vIC0gZmFsbG9mZkRpc3RhbmNlIGlzIHRoZSBzaXplIG9mIHRoZSBvYmplY3RcclxuICAgICAgICAgbGV0IGZhbGxvZmZEaXN0YW5jZSA9IGRpc3QubWF4IC0gZGlzdC5taW47XHJcbiAgICAgICAgIGxldCBkID0gKGZhbGxvZmZEaXN0YW5jZSAqIE1hdGguc3FydCgxLjAgLSBvcHRpb25zLmZhbGxvZmYpKSAvICgxLjAgLSBNYXRoLnNxcnQoMS4wIC0gb3B0aW9ucy5mYWxsb2ZmKSk7XHJcblxyXG4gICAgICAgICAvLyBpbnRlbnNpdHkgPSBkXjIgc28gdGhhdCBpbnRlbnNpdHkgYXQgZCAoMS9kXjIpID0gMS4wXHJcbiAgICAgICAgIGxldCBsaWdodEludGVuc2l0eUF0U291cmNlID0gZCAqIGQ7XHJcbiAgICAgICAgIHVuaS5zZXQoJ3VMaWdodEludGVuc2l0eUF0U291cmNlJywgbGlnaHRJbnRlbnNpdHlBdFNvdXJjZSk7XHJcblxyXG4gICAgICAgICAvLyBhY3R1YWwgbGlnaHQgcG9zaXRpb24gaXMgbWVhc3VyZWQgZnJvbSB0aGUgb2JqZWN0LCBub3QgdGhlIG9yaWdpbi4gU2hpZnQgXHJcbiAgICAgICAgIC8vIGl0IGJhY2tcclxuICAgICAgICAgbGV0IG9ialRvT3JpZ2luID0gb3B0aW9ucy5saWdodFBvcy5tYWduaXR1ZGUoKSAtIGRpc3QubWluO1xyXG4gICAgICAgICBvcHRpb25zLmxpZ2h0UG9zID0gb3B0aW9ucy5saWdodFBvcy5ub3JtYWxpemUoKS5tdWx0KGQgKyBvYmpUb09yaWdpbik7XHJcbiAgICAgICAgIHVuaS5zZXQoJ3VMaWdodFBvcycsIG9wdGlvbnMubGlnaHRQb3MpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdW5pO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHJlbmRlclRvU2hhZG93TWFwKCk6IHZvaWQge1xyXG5cclxuICAgICAgbGV0IGdsID0gdGhpcy5nbDtcclxuICAgICAgbGV0IG1heFRleHR1cmVTaXplID0gTWF0aC5taW4oZ2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9URVhUVVJFX1NJWkUpKTtcclxuICAgICAgbGV0IGRlc2lyZWRTaXplID0gdGhpcy5vcHRpb25zLmNhbWVyYS56b29tRmFjdG9yICogTWF0aC5taW4oZ2wuY2FudmFzLndpZHRoLCBnbC5jYW52YXMuaGVpZ2h0KTtcclxuICAgICAgbGV0IHNpemUgPSAyNTY7XHJcbiAgICAgIHdoaWxlIChzaXplIDwgZGVzaXJlZFNpemUgJiYgc2l6ZSAqIDIgPD0gbWF4VGV4dHVyZVNpemUpIHtcclxuICAgICAgICAgc2l6ZSAqPSAyO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXRoaXMuc2hhZG93RnJhbWVCdWZmZXIgfHwgc2l6ZSAhPT0gdGhpcy5zaGFkb3dGcmFtZUJ1ZmZlci5zaXplKSB7XHJcblxyXG4gICAgICAgICBpZiAodGhpcy5zaGFkb3dGcmFtZUJ1ZmZlcikge1xyXG4gICAgICAgICAgICB0aGlzLnNoYWRvd0ZyYW1lQnVmZmVyLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5zaGFkb3dDb2xvclRleHR1cmUuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNoYWRvd0RlcHRoVGV4dHVyZS5kaXNwb3NlKCk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIHRoaXMuc2hhZG93RnJhbWVCdWZmZXIgPSBuZXcgZ2xGcmFtZUJ1ZmZlcihnbCwgc2l6ZSwgc2l6ZSk7XHJcbiAgICAgICAgIHRoaXMuc2hhZG93Q29sb3JUZXh0dXJlID0gdGhpcy5zaGFkb3dGcmFtZUJ1ZmZlci5jcmVhdGVUZXh0dXJlKGdsVGV4dHVyZVN0eWxlLkNvbG9yKTtcclxuICAgICAgICAgdGhpcy5zaGFkb3dEZXB0aFRleHR1cmUgPSB0aGlzLnNoYWRvd0ZyYW1lQnVmZmVyLmNyZWF0ZVRleHR1cmUoZ2xUZXh0dXJlU3R5bGUuRGVwdGgpO1xyXG5cclxuICAgICAgICAgdGhpcy5zaGFkb3dGcmFtZUJ1ZmZlci5hdHRhY2hUZXh0dXJlKGdsLkNPTE9SX0FUVEFDSE1FTlQwLCB0aGlzLnNoYWRvd0NvbG9yVGV4dHVyZSk7XHJcbiAgICAgICAgIHRoaXMuc2hhZG93RnJhbWVCdWZmZXIuYXR0YWNoVGV4dHVyZShnbC5ERVBUSF9BVFRBQ0hNRU5ULCB0aGlzLnNoYWRvd0RlcHRoVGV4dHVyZSk7XHJcblxyXG4gICAgICAgICB0aGlzLnNoYWRvd0ZyYW1lQnVmZmVyLmNoZWNrKCk7XHJcbiAgICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIG51bGwpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBnbC52aWV3cG9ydCgwLCAwLCB0aGlzLnNoYWRvd0ZyYW1lQnVmZmVyLndpZHRoLCB0aGlzLnNoYWRvd0ZyYW1lQnVmZmVyLmhlaWdodCk7XHJcbiAgICAgIHRoaXMuc2hhZG93RnJhbWVCdWZmZXIuYmluZCgpO1xyXG5cclxuICAgICAgZ2wuY2xlYXIoZ2wuREVQVEhfQlVGRkVSX0JJVCB8IGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xyXG5cclxuICAgICAgbGV0IGNlbnRlciA9IG5ldyBWZWMzKFswLCAwLCAwXSk7XHJcbiAgICAgIGxldCB1cCA9IG5ldyBWZWMzKFswLCAxLCAwXSk7XHJcbiAgICAgIGxldCBleWUgPSB0aGlzLm9wdGlvbnMubGlnaHRQb3M7XHJcbiAgICAgIGxldCBtYXQgPSBNYXQ0Lm1ha2VMb29rQXQoZXllLCBjZW50ZXIsIHVwKTtcclxuICAgICAgbWF0LnNldCgwLCAzLCAwKTtcclxuICAgICAgbWF0LnNldCgxLCAzLCAwKTtcclxuICAgICAgbWF0LnNldCgyLCAzLCAwKTtcclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5saWdodFR5cGUgPT09IExpZ2h0VHlwZS5EaXJlY3Rpb25hbCkge1xyXG4gICAgICAgICAvLyB0byBhdm9pZCBjbGlwcGluZywgZXhwYW5kIHRoZSB6IHJhbmdlIHRvIGFsbG93IGZ1bGwgcm90YXRpb24gb2ZcclxuICAgICAgICAgLy8gYW55dGhpbmcgaW4gYSAzLTMtMyBjdWJlLlxyXG4gICAgICAgICBsZXQgbWF4U2l6ZSA9IE1hdGguc3FydCgyNyk7XHJcbiAgICAgICAgIG1hdCA9IE1hdDQubWFrZU9ydGhvKC0xLCAxLCAtMSwgMSwgbWF4U2l6ZSwgLW1heFNpemUpLm11bHRNKG1hdCk7XHJcbiAgICAgICAgIHRoaXMubGlnaHRWaWV3ID0gbWF0O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICAvLyBUT0RPIG1ha2UgcG9pbnQgbGlnaHQgc291cmNlcyB3b3JrIGZvciBzaGFkb3cgbWFwc1xyXG4gICAgICAgICAvKlxyXG4gICAgICAgICBsZXQgZm92ID0gMiAqIHRvRGVnKE1hdGguYXRhbjIoMyAvIDIsIGV5ZS56KSk7XHJcbiAgICAgICAgIGNvbnNvbGUubG9nKCdmb3Y9JyArIGZvdik7XHJcbiAgICAgICAgIG1hdCA9IE1hdDQubWFrZVBlcnNwZWN0aXZlKGZvdiwgMSwgMC4xLCAyMCkubXVsdE0obWF0KTtcclxuICAgICAgICAgdGhpcy5saWdodFZpZXcgPSBtYXQ7XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgIGxldCBtYXhTaXplID0gTWF0aC5zcXJ0KDI3KTtcclxuICAgICAgICAgbWF0ID0gTWF0NC5tYWtlT3J0aG8oLTEsIDEsIC0xLCAxLCBtYXhTaXplLCAtbWF4U2l6ZSkubXVsdE0obWF0KTtcclxuICAgICAgICAgdGhpcy5saWdodFZpZXcgPSBtYXQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCB1bmkgPSB0aGlzLnNldE9wdGlvbnModGhpcy5vcHRpb25zKTtcclxuXHJcbiAgICAgIC8vIGNoYW5nZSB0aGUgdmlldyBtYXRyaXggc28gdGhhdCBvdXIgdmlldyBpcyBmcm9tIHRoZSBsaWdodFxyXG4gICAgICB1bmkuc2V0KCd2aWV3JywgdGhpcy5saWdodFZpZXcpO1xyXG4gICAgICB1bmkuc2V0KCdwcm9qZWN0aW9uJywgTWF0NC5pZGVudGl0eSk7XHJcblxyXG4gICAgICAvLyBkb24ndCB0cnkgdG8gdXNlIHRoZSBzaGFkb3cgdGV4dHVyZSB3aGlsZSB3ZSdyZSBjcmVhdGluZyBpdFxyXG4gICAgICB1bmkuc2V0KCd1VXNlU2hhZG93cycsIGZhbHNlKTtcclxuICAgICAgdW5pLnNldGkoJ3VSZW5kZXJNb2RlJywgUmVuZGVyTW9kZS5Ob3JtYWwpO1xyXG5cclxuICAgICAgZ2wuZGlzYWJsZShnbC5DVUxMX0ZBQ0UpO1xyXG5cclxuICAgICAgdGhpcy5vYmouZHJhdygpO1xyXG5cclxuICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgbnVsbCk7XHJcbiAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgcmVuZGVyVG9TY3JlZW4oKTogdm9pZCB7XHJcblxyXG4gICAgICBsZXQgZ2wgPSB0aGlzLmdsO1xyXG5cclxuICAgICAgZ2wudmlld3BvcnQoMCwgMCwgZ2wuY2FudmFzLndpZHRoLCBnbC5jYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgIC8vIGRpc3BsYXkgdGhlIGRlcHRoIGJ1ZmZlciBmb3IgdGVzdGluZyBwdXJwb3Nlc1xyXG4gICAgICBpZiAodGhpcy5zaG93U2hhZG93TWFwKSB7XHJcbiAgICAgICAgIGdsLmRpc2FibGUoZ2wuQ1VMTF9GQUNFKTtcclxuICAgICAgICAgbGV0IHRyID0gbmV3IFRleHR1cmVSZW5kZXJlcihnbCk7XHJcbiAgICAgICAgIHRyLnJlbmRlcihcclxuICAgICAgICAgICAgdGhpcy5zaGFkb3dEZXB0aFRleHR1cmUsXHJcbiAgICAgICAgICAgIHRoaXMuc2hhZG93RnJhbWVCdWZmZXIud2lkdGgsXHJcbiAgICAgICAgICAgIHRoaXMuc2hhZG93RnJhbWVCdWZmZXIuaGVpZ2h0XHJcbiAgICAgICAgICk7XHJcbiAgICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIG51bGwpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICB0aGlzLnNoYWRvd0RlcHRoVGV4dHVyZS5iaW5kKCk7XHJcblxyXG4gICAgICAgICBsZXQgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKDxFbGVtZW50PmdsLmNhbnZhcyk7XHJcbiAgICAgICAgIGxldCBjb2xvciA9IGh0bWxDb2xvci5mcm9tQ3NzKHN0eWxlLmJhY2tncm91bmRDb2xvcikudG9HbENvbG9yKCk7XHJcbiAgICAgICAgIGdsLmNsZWFyQ29sb3IoY29sb3IuciwgY29sb3IuZywgY29sb3IuYiwgMSk7XHJcbiAgICAgICAgIGdsLmNsZWFyKGdsLkRFUFRIX0JVRkZFUl9CSVQgfCBnbC5DT0xPUl9CVUZGRVJfQklUKTtcclxuXHJcbiAgICAgICAgIHRoaXMuZHJhd0Zsb29yKCk7XHJcblxyXG4gICAgICAgICAvLyBkcmF3IHRoZSBtYWluIG9iamVjdFxyXG4gICAgICAgICB0aGlzLnNldE9wdGlvbnModGhpcy5vcHRpb25zKTtcclxuICAgICAgICAgdGhpcy5vYmouZHJhdygpO1xyXG5cclxuICAgICAgICAgZ2wuY2xlYXIoZ2wuREVQVEhfQlVGRkVSX0JJVCk7XHJcblxyXG4gICAgICAgICB0aGlzLmRyYXdNaW5pVmlldygpO1xyXG4gICAgICAgICB0aGlzLmRyYXdCYWxsKCk7XHJcblxyXG4gICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBudWxsKTtcclxuICAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBudWxsKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGRyYXdGbG9vcigpIHtcclxuICAgICAgaWYgKHRoaXMuc2hvd0Zsb29yKSB7XHJcblxyXG4gICAgICAgICBsZXQgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICAgICBsZXQgdW5pID0gdGhpcy5zZXRPcHRpb25zKHRoaXMub3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAvLyBzZXQgdGhlIHNwZWNpYWwgbW9kZSBmb3IgdGhlIGZsb29yXHJcbiAgICAgICAgIHVuaS5zZXQoJ3VSZW5kZXJpbmdGbG9vcicsIHRydWUpO1xyXG4gICAgICAgICB1bmkuc2V0KCd1U2hvd0dyaWQnLCB0aGlzLnNob3dHcmlkKTtcclxuXHJcbiAgICAgICAgIC8vIGN1bGwgcG9seWdvbnMgc28gd2UgZG9uJ3Qgc2VlIHRoZSBmbG9vciBmcm9tIGJlbG93XHJcbiAgICAgICAgIGdsLmVuYWJsZShnbC5DVUxMX0ZBQ0UpO1xyXG4gICAgICAgICBnbC5jdWxsRmFjZShnbC5CQUNLKTtcclxuICAgICAgICAgdW5pLnNldGkoJ3VSZW5kZXJNb2RlJywgUmVuZGVyTW9kZS5Ob3JtYWwpO1xyXG4gICAgICAgICAvL3RoaXMuc2V0VmFsdWVSYW5nZVVuaWZvcm1zKFZhbHVlUmFuZ2UuU3RhbmRhcmQpO1xyXG5cclxuICAgICAgICAgdGhpcy5mbG9vci5kcmF3KCk7XHJcblxyXG4gICAgICAgICB1bmkuc2V0KCd1UmVuZGVyaW5nRmxvb3InLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBkcmF3TWluaVZpZXcoKSB7XHJcblxyXG4gICAgICBpZiAodGhpcy5zaG93TWluaVZpZXcpIHtcclxuICAgICAgICAgbGV0IGdsID0gdGhpcy5nbDtcclxuICAgICAgICAgZ2wuZW5hYmxlKGdsLkNVTExfRkFDRSk7XHJcblxyXG4gICAgICAgICBsZXQgdW5pID0gdGhpcy5zZXRPcHRpb25zKHRoaXMub3B0aW9ucyk7XHJcblxyXG4gICAgICAgICBsZXQgY2xpcFNwYWNlID0gdGhpcy5vcHRpb25zLmNhbWVyYS5nZXRDbGlwU3BhY2UoZ2wpO1xyXG4gICAgICAgICBsZXQgcHJvamVjdGlvbiA9IE1hdDQubWFrZU9ydGhvKFxyXG4gICAgICAgICAgICBjbGlwU3BhY2UubGVmdCxcclxuICAgICAgICAgICAgY2xpcFNwYWNlLnJpZ2h0LFxyXG4gICAgICAgICAgICBjbGlwU3BhY2UuYm90dG9tLFxyXG4gICAgICAgICAgICBjbGlwU3BhY2UudG9wLFxyXG4gICAgICAgICAgICBjbGlwU3BhY2UubmVhcixcclxuICAgICAgICAgICAgY2xpcFNwYWNlLmZhclxyXG4gICAgICAgICApO1xyXG5cclxuICAgICAgICAgdW5pLnNldCgncHJvamVjdGlvbicsIHByb2plY3Rpb24pO1xyXG4gICAgICAgICB1bmkuc2V0KCd1T3Rocm9ncmFwaGljJywgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAvLyBkcmF3IHRoZSBvYmplY3QgaW4gdGhlIHVwcGVyIHJpZ2h0IGF0IGEgcmVkdWNlZCBzaXplXHJcbiAgICAgICAgIGxldCB2aWV3ID0gTWF0NC5pZGVudGl0eTtcclxuICAgICAgICAgdmlldy5zY2FsZSh0aGlzLm1pbmlTaXplKTtcclxuICAgICAgICAgdmlldy50cmFuc2xhdGUobmV3IFZlYzMoW2NsaXBTcGFjZS5tYXgueCAtIHRoaXMubWluaVNpemUsIGNsaXBTcGFjZS5tYXgueSAtIHRoaXMubWluaVNpemUsIDBdKSk7XHJcbiAgICAgICAgIHVuaS5zZXQoJ3ZpZXcnLCB2aWV3KTtcclxuICAgICAgICAgdW5pLnNldGkoJ3VSZW5kZXJNb2RlJywgdGhpcy5taW5pVmlld1Nob3dDb250b3VycyA/IFJlbmRlck1vZGUuQ29udG91clBsYW5lcyA6IFJlbmRlck1vZGUuTm9ybWFsKTtcclxuICAgICAgICAgdGhpcy5vYmouZHJhdygpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgZHJhd0JhbGwoKSB7XHJcblxyXG4gICAgICBpZiAodGhpcy5zaG93QmFsbCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgZ2wgPSB0aGlzLmdsO1xyXG5cclxuICAgICAgLy8gY3JlYXRlIGEgdmlldyBtYXRyaXggdGhhdCByZW5kZXJzIGluIHRoZSB1cHBlciBsZWZ0XHJcbiAgICAgIGxldCBjbGlwU3BhY2UgPSB0aGlzLm9wdGlvbnMuY2FtZXJhLmdldENsaXBTcGFjZShnbCk7XHJcbiAgICAgIGxldCB2aWV3ID0gTWF0NC5pZGVudGl0eTtcclxuICAgICAgdmlldy5zY2FsZSh0aGlzLm1pbmlTaXplKTtcclxuICAgICAgdmlldy50cmFuc2xhdGUobmV3IFZlYzMoW2NsaXBTcGFjZS5taW4ueCArIHRoaXMubWluaVNpemUsIGNsaXBTcGFjZS5tYXgueSAtIHRoaXMubWluaVNpemUsIDBdKSk7XHJcbiAgICAgIHRoaXMuYmFsbE9wdGlvbnMudmlldyA9IHZpZXcuY2xvbmUoKTtcclxuXHJcbiAgICAgIHRoaXMuYmFsbE9wdGlvbnMudmFsdWVSYW5nZSA9IHRoaXMub3B0aW9ucy52YWx1ZVJhbmdlLmNsb25lKCk7XHJcbiAgICAgIHRoaXMuYmFsbE9wdGlvbnMubGlnaHRQb3MgPSB0aGlzLm9wdGlvbnMubGlnaHRQb3MuY2xvbmUoKTtcclxuICAgICAgdGhpcy5iYWxsT3B0aW9ucy5saWdodFR5cGUgPSB0aGlzLm9wdGlvbnMubGlnaHRUeXBlO1xyXG4gICAgICB0aGlzLmJhbGxPcHRpb25zLmZhbGxvZmYgPSB0aGlzLm9wdGlvbnMuZmFsbG9mZjtcclxuXHJcbiAgICAgIC8vIFRPRE8gY29tcHV0ZSBkaXN0YW5jZSBhbmQgaW50ZW5zaXR5IGZvciBsaWdodCBmb3IgdGhlIGJhbGxcclxuICAgICAgdGhpcy5iYWxsT3B0aW9ucy5saWdodEludGVuc2l0eSA9IHRoaXMub3B0aW9ucy5saWdodEludGVuc2l0eTtcclxuXHJcbiAgICAgIHRoaXMuYmFsbE9wdGlvbnMuc2hvd0hpZ2hsaWdodHMgPSB0aGlzLm9wdGlvbnMuc2hvd0hpZ2hsaWdodHM7XHJcbiAgICAgIHRoaXMuYmFsbE9wdGlvbnMuc2hpbmluZXNzID0gdGhpcy5vcHRpb25zLnNoaW5pbmVzcztcclxuICAgICAgdGhpcy5iYWxsT3B0aW9ucy5yZW5kZXJNb2RlID0gdGhpcy5vcHRpb25zLnJlbmRlck1vZGU7XHJcbiAgICAgIHRoaXMuYmFsbE9wdGlvbnMuY29udG91cnMgPSB0aGlzLm9wdGlvbnMuY29udG91cnM7XHJcbiAgICAgIGxldCB1bmkgPSB0aGlzLnNldE9wdGlvbnModGhpcy5iYWxsT3B0aW9ucyk7XHJcblxyXG4gICAgICBpZiAodGhpcy5iYWxsT3B0aW9ucy5mYWxsb2ZmID4gMCkge1xyXG4gICAgICAgICAvLyBUT0RPIHRoaXMgY29kZSBpcyBzaW1pbGFyIHRvIHRoZSBjb2RlIGluIHNldE9wdGlvbnMuIENvbWJpbmUgaXQuXHJcbiAgICAgICAgIGxldCBmYWxsb2ZmRGlzdGFuY2UgPSAxLjA7IC8vIGJhbGwgZGlhbWV0ZXJcclxuICAgICAgICAgbGV0IGQgPSAoZmFsbG9mZkRpc3RhbmNlICogTWF0aC5zcXJ0KDEuMCAtIHRoaXMuYmFsbE9wdGlvbnMuZmFsbG9mZikpIC8gKDEuMCAtIE1hdGguc3FydCgxLjAgLSB0aGlzLmJhbGxPcHRpb25zLmZhbGxvZmYpKTtcclxuXHJcbiAgICAgICAgIC8vIGludGVuc2l0eSA9IGReMiBzbyB0aGF0IGludGVuc2l0eSBhdCBkICgxL2ReMikgPSAxLjBcclxuICAgICAgICAgbGV0IGxpZ2h0SW50ZW5zaXR5QXRTb3VyY2UgPSBkICogZDtcclxuICAgICAgICAgdW5pLnNldCgndUxpZ2h0SW50ZW5zaXR5QXRTb3VyY2UnLCBsaWdodEludGVuc2l0eUF0U291cmNlKTtcclxuXHJcbiAgICAgICAgIC8vIGFjdHVhbCBsaWdodCBwb3NpdGlvbiBpcyBtZWFzdXJlZCBmcm9tIHRoZSBvYmplY3QsIG5vdCB0aGUgb3JpZ2luLiBTaGlmdCBcclxuICAgICAgICAgLy8gaXQgYmFja1xyXG4gICAgICAgICBsZXQgb2JqVG9PcmlnaW4gPSAwLjU7XHJcbiAgICAgICAgIHRoaXMuYmFsbE9wdGlvbnMubGlnaHRQb3MgPSB0aGlzLmJhbGxPcHRpb25zLmxpZ2h0UG9zLm5vcm1hbGl6ZSgpLm11bHQoZCArIG9ialRvT3JpZ2luKTtcclxuICAgICAgICAgdW5pLnNldCgndUxpZ2h0UG9zJywgdGhpcy5iYWxsT3B0aW9ucy5saWdodFBvcyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuYmFsbC5kcmF3KCk7XHJcblxyXG4gICAgICAvLyBiYWNrIG91dCBhbmdsZXMgYXMgaWYgbG9va2luZyBkb3duIHRoZSB6LWF4aXNcclxuICAgICAgbGV0IHggPSAtdGhpcy5vcHRpb25zLmxpZ2h0UG9zLng7XHJcbiAgICAgIGxldCB5ID0gLXRoaXMub3B0aW9ucy5saWdodFBvcy55O1xyXG4gICAgICBsZXQgeiA9IC10aGlzLm9wdGlvbnMubGlnaHRQb3MuejtcclxuXHJcbiAgICAgIC8vIHN0YXJ0IGJ5IGxvb2tpbmcgZG93biBmcm9tIHRoZSBaIGRpcmVjdGlvblxyXG4gICAgICBsZXQgcmFkaXVzID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7XHJcbiAgICAgIGxldCBlbGV2YXRpb25BbmdsZSA9IE1hdGguYWNvcyh6IC8gcmFkaXVzKTtcclxuICAgICAgbGV0IHJvdGF0aW9uQW5nbGUgPSBNYXRoLmF0YW4yKHksIHgpO1xyXG5cclxuICAgICAgLy8gZmlyc3QgcmVzZXQgdGhpbmdzIHNvIHRoYXQgd2UncmUgbG9va2luZyBkb3duIHRoZSB6LWF4aXNcclxuICAgICAgdGhpcy5hcnJvdy5jbGVhclRyYW5zZm9ybXMoKTtcclxuICAgICAgdGhpcy5hcnJvdy50cmFuc2xhdGUobmV3IFZlYzMoWzAuMCwgMC41NSwgMC4wXSkpO1xyXG4gICAgICB0aGlzLmFycm93LnJvdFgodG9SYWQoOTApKTtcclxuXHJcbiAgICAgIC8vIHJvdGF0ZSB0byBtYXRjaCB0aGUgbGlnaHQgc291cmNlXHJcbiAgICAgIHRoaXMuYXJyb3cucm90WSgtZWxldmF0aW9uQW5nbGUpO1xyXG4gICAgICB0aGlzLmFycm93LnJvdFooLXJvdGF0aW9uQW5nbGUpO1xyXG5cclxuICAgICAgdGhpcy5hcnJvd09wdGlvbnMudmlldyA9IHZpZXcuY2xvbmUoKTtcclxuICAgICAgdGhpcy5zZXRPcHRpb25zKHRoaXMuYXJyb3dPcHRpb25zKTtcclxuICAgICAgdGhpcy5hcnJvdy5kcmF3KCk7XHJcbiAgIH1cclxufSIsImltcG9ydCB2ZXJ0ZXhTb3VyY2UgZnJvbSAnLi4vLi4vc2hhZGVycy9UZXh0dXJlUmVuZGVyZXJWZXJ0ZXguZ2xzbCc7XHJcbmltcG9ydCBmcmFnbWVudFNvdXJjZSBmcm9tICcuLi8uLi9zaGFkZXJzL1RleHR1cmVSZW5kZXJlckZyYWdtZW50Lmdsc2wnO1xyXG5pbXBvcnQgeyBnbFByb2dyYW0gfSBmcm9tICcuLi8uLi9nbC9nbFByb2dyYW0nO1xyXG5pbXBvcnQgeyBnbEJ1ZmZlciB9IGZyb20gJy4uLy4uL2dsL2dsQnVmZmVyJztcclxuaW1wb3J0IHsgZ2xUZXh0dXJlIH0gZnJvbSAnLi4vLi4vZ2wvZ2xUZXh0dXJlJztcclxuXHJcbi8qKlxyXG4gKiBDbGFzcyB0aGF0IGRvZXMgdGhlIHdvcmsgb2YgYnVpbGRpbmcgdGhlIFBhdGggVHJhY2VkIHRleHR1cmVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBUZXh0dXJlUmVuZGVyZXIge1xyXG5cclxuICAgcHJpdmF0ZSBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0IHwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dDtcclxuICAgcHJpdmF0ZSBwcm9ncmFtOiBnbFByb2dyYW07XHJcbiAgIHByaXZhdGUgdmVydGV4QnVmZmVyOiBnbEJ1ZmZlcjtcclxuXHJcbiAgIHByaXZhdGUgdmVydGljZXMgPSBbXHJcbiAgICAgIC0xLCAtMSxcclxuICAgICAgLTEsICsxLFxyXG4gICAgICArMSwgLTEsXHJcbiAgICAgICsxLCArMVxyXG4gICBdO1xyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKGdsQ3R4OiBXZWJHTFJlbmRlcmluZ0NvbnRleHQgfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0KSB7XHJcblxyXG4gICAgICB0aGlzLmdsID0gZ2xDdHg7XHJcbiAgICAgIGxldCBnbCA9IHRoaXMuZ2w7XHJcblxyXG4gICAgICAvLyBjcmVhdGUgc2hhZGVyXHJcbiAgICAgIHRoaXMucHJvZ3JhbSA9IG5ldyBnbFByb2dyYW0oZ2wsIHZlcnRleFNvdXJjZSwgZnJhZ21lbnRTb3VyY2UpO1xyXG5cclxuICAgICAgLy8gY3JlYXRlIHZlcnRleCBidWZmZXIgLSB0aGUgYmxvY2sgd2UnbGwgZHJhdyBvdXIgcmVuZGVyZWQgdGV4dHVyZSBvblxyXG4gICAgICB0aGlzLnZlcnRleEJ1ZmZlciA9IG5ldyBnbEJ1ZmZlcihnbCwgdGhpcy5wcm9ncmFtLCAndmVydGV4Jyk7XHJcbiAgICAgIHRoaXMudmVydGV4QnVmZmVyLnVwbG9hZCh0aGlzLnZlcnRpY2VzKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHJlbmRlcih0ZXh0dXJlOiBnbFRleHR1cmUsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XHJcblxyXG4gICAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XHJcblxyXG4gICAgICBnbC52aWV3cG9ydChcclxuICAgICAgICAgKGdsLmNhbnZhcy53aWR0aCAtIHdpZHRoKSAvIDIsXHJcbiAgICAgICAgIChnbC5jYW52YXMuaGVpZ2h0IC0gaGVpZ2h0KSAvIDIsXHJcbiAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICBoZWlnaHRcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHRoaXMucHJvZ3JhbS51c2UoKTtcclxuICAgICAgdGV4dHVyZS5iaW5kKCk7XHJcbiAgICAgIHRoaXMudmVydGV4QnVmZmVyLmJpbmQoMik7XHJcblxyXG4gICAgICAvLyBkaXNwbGF5IHRoZSBtYWluIHNjcmVlblxyXG4gICAgICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFX1NUUklQLCAwLCA0KTtcclxuICAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBWYWx1ZVJhbmdlIH0gZnJvbSAnLi9WYWx1ZVJhbmdlJztcclxuaW1wb3J0IHsgY2xhbXAsIG1peCwgdG9SYWQgfSBmcm9tICcuLi8uLi9VdGlsL0dsb2JhbHMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfVEhSRVNIT0xEMSA9IDQwO1xyXG5leHBvcnQgY29uc3QgREVGQVVMVF9USFJFU0hPTEQyID0gNzA7XHJcblxyXG4vKipcclxuICogS2VlcHMgdHJhY2sgb2YgMyB2YWx1ZXMgaW4gdGhlIGxpZ2h0IGJhc2VkIG9uIHRocmVzaG9sZCBhbmdsZXNcclxuICogZm9yIHRoZSBwbGFuZXMgKHN0b3JlZCBpbiBkZWdyZWVzKSBhbmQgdGhlIGxpZ2h0IHJhbmdlIChoaWdobGlnaHRcclxuICogdG8gc2hhZG93IGNvbG9ycykuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVmFsdWVQbGFuZXMge1xyXG4gICBwcml2YXRlIF90aHJlc2hvbGQxID0gREVGQVVMVF9USFJFU0hPTEQxO1xyXG4gICBwcml2YXRlIF90aHJlc2hvbGQyID0gREVGQVVMVF9USFJFU0hPTEQyO1xyXG4gICBwcml2YXRlIHZhbHVlUmFuZ2U6IFZhbHVlUmFuZ2U7XHJcblxyXG4gICBwcml2YXRlIF9saWdodExpZ2h0OiBudW1iZXI7XHJcbiAgIHByaXZhdGUgX21pZExpZ2h0OiBudW1iZXI7XHJcbiAgIHByaXZhdGUgX2RhcmtMaWdodDogbnVtYmVyO1xyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKHZhbHVlUmFuZ2U6IFZhbHVlUmFuZ2UpIHtcclxuICAgICAgdGhpcy52YWx1ZVJhbmdlID0gdmFsdWVSYW5nZTtcclxuICAgICAgdGhpcy5jb21wdXRlQ29sb3JzKCk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgdGhyZXNob2xkMSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5fdGhyZXNob2xkMTtcclxuICAgfVxyXG4gICBwdWJsaWMgc2V0IHRocmVzaG9sZDEoYW5nbGVJbkRlZzogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuX3RocmVzaG9sZDEgPSBhbmdsZUluRGVnO1xyXG4gICAgICB0aGlzLl90aHJlc2hvbGQyID0gTWF0aC5tYXgodGhpcy5fdGhyZXNob2xkMiwgYW5nbGVJbkRlZyk7XHJcbiAgICAgIHRoaXMuY29tcHV0ZUNvbG9ycygpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0IHRocmVzaG9sZDIoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3RocmVzaG9sZDI7XHJcbiAgIH1cclxuICAgcHVibGljIHNldCB0aHJlc2hvbGQyKGFuZ2xlSW5EZWc6IG51bWJlcikge1xyXG4gICAgICB0aGlzLl90aHJlc2hvbGQyID0gYW5nbGVJbkRlZztcclxuICAgICAgdGhpcy5fdGhyZXNob2xkMSA9IE1hdGgubWluKHRoaXMuX3RocmVzaG9sZDEsIGFuZ2xlSW5EZWcpO1xyXG4gICAgICB0aGlzLmNvbXB1dGVDb2xvcnMoKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBoaWdobGlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMudmFsdWVSYW5nZS5tYXhJbnRlbnNpdHk7XHJcbiAgIH1cclxuICAgcHVibGljIHNldCBoaWdobGlnaHQodmFsOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy52YWx1ZVJhbmdlLm1heEludGVuc2l0eSA9IHZhbDtcclxuICAgICAgdGhpcy5jb21wdXRlQ29sb3JzKCk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgc2hhZG93KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlUmFuZ2UuYW1iaWVudEludGVuc2l0eTtcclxuICAgfVxyXG4gICBwdWJsaWMgc2V0IHNoYWRvdyh2YWw6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnZhbHVlUmFuZ2UuYW1iaWVudEludGVuc2l0eSA9IHZhbDtcclxuICAgICAgdGhpcy5jb21wdXRlQ29sb3JzKCk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgbGlnaHRMaWdodCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5fbGlnaHRMaWdodDtcclxuICAgfVxyXG4gICBwdWJsaWMgZ2V0IG1pZExpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9taWRMaWdodDtcclxuICAgfVxyXG4gICBwdWJsaWMgZ2V0IGRhcmtMaWdodCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5fZGFya0xpZ2h0O1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGNvbG9yQXQoZGVnOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICBkZWcgPSBjbGFtcChkZWcsIDAsIDkwKTtcclxuICAgICAgcmV0dXJuIG1peCh0aGlzLnNoYWRvdywgdGhpcy5oaWdobGlnaHQgLSB0aGlzLnZhbHVlUmFuZ2Uuc3BlY3VsYXJJbnRlbnNpdHksIE1hdGguY29zKHRvUmFkKGRlZykpKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNvbXB1dGVDb2xvcnMoKSB7XHJcbiAgICAgIHRoaXMuX2xpZ2h0TGlnaHQgPSB0aGlzLmNvbG9yQXQoMC41ICogdGhpcy50aHJlc2hvbGQxKTtcclxuICAgICAgdGhpcy5fbWlkTGlnaHQgPSB0aGlzLmNvbG9yQXQobWl4KHRoaXMudGhyZXNob2xkMSwgdGhpcy50aHJlc2hvbGQyLCAwLjUpKTtcclxuICAgICAgdGhpcy5fZGFya0xpZ2h0ID0gdGhpcy5jb2xvckF0KCh0aGlzLnRocmVzaG9sZDIgKyA5MCkgLyAyKTtcclxuICAgfVxyXG59IiwiaW1wb3J0IHZlcnRleFNvdXJjZSBmcm9tICcuLi8uLi9zaGFkZXJzL1ZpZXdlclZlcnRleC5nbHNsJztcclxuaW1wb3J0IGZyYWdtZW50U291cmNlIGZyb20gJy4uLy4uL3NoYWRlcnMvVmlld2VyRnJhZ21lbnQuZ2xzbCc7XHJcbmltcG9ydCB7IFZlYzMsIFZlYzIgfSBmcm9tICcuLi8uLi9VdGlsM0QvVmVjJztcclxuaW1wb3J0IHsgZ2xQcm9ncmFtIH0gZnJvbSAnLi4vLi4vZ2wvZ2xQcm9ncmFtJztcclxuaW1wb3J0IHsgUG9pbnRlckV2ZW50SGFuZGxlciB9IGZyb20gJy4uLy4uL0dVSS9Qb2ludGVyRXZlbnRIYW5kbGVyJztcclxuaW1wb3J0IHsgVmFsdWVQbGFuZXMgfSBmcm9tICcuL1ZhbHVlUGxhbmVzJztcclxuaW1wb3J0IHsgZ2xPYmplY3QgfSBmcm9tICcuL2dsT2JqZWN0JztcclxuaW1wb3J0IHsgaXNNb2JpbGUsIGNsYW1wLCB0b0RlZywgdG9SYWQgfSBmcm9tICcuLi8uLi9VdGlsL0dsb2JhbHMnO1xyXG5pbXBvcnQgeyBUcmlhbmdsZU9iakJ1aWxkZXIgfSBmcm9tICcuLi8uLi9VdGlsM0QvVHJpYW5nbGVPYmpCdWlsZGVyJztcclxuaW1wb3J0IHsgTm9ybWFsVHlwZSB9IGZyb20gJy4uLy4uL1V0aWwzRC9UcmlhbmdsZU9iaic7XHJcbmltcG9ydCB7IGdsQ29sb3IzIH0gZnJvbSAnLi4vLi4vZ2wvZ2xDb2xvcic7XHJcbmltcG9ydCB7IGdsVW5pZm9ybSB9IGZyb20gJy4uLy4uL2dsL2dsVW5pZm9ybSc7XHJcbmltcG9ydCB7IE1hdDQgfSBmcm9tICcuLi8uLi9VdGlsM0QvTWF0JztcclxuaW1wb3J0IHsgVmFsdWVSYW5nZSB9IGZyb20gJy4vVmFsdWVSYW5nZSc7XHJcbmltcG9ydCB7IFJlbmRlck1vZGUgfSBmcm9tICcuL1JlbmRlcmVyJztcclxuaW1wb3J0IHsgaHRtbENvbG9yIH0gZnJvbSAnLi4vLi4vVXRpbC9odG1sQ29sb3InO1xyXG5cclxuZXhwb3J0IHR5cGUgVGhyZXNob2xkQ2hhbmdlRnVuY3Rpb24gPSAodmFsdWU6IG51bWJlcikgPT4gdm9pZDtcclxuXHJcbmNvbnN0IEJBTExfUkFESVVTID0gMC44NzU7XHJcbmNvbnN0IEJBTExfQ0VOVEVSID0gbmV3IFZlYzMoWy0wLjYsIC0wLjYsIDBdKTtcclxuXHJcblxyXG5sZXQgQ1RSTF9TSVpFID0gMTUwO1xyXG5jb25zdCBOT01JTkFMX0RJU1BMQVlfU0laRSA9IDE1MDtcclxuY29uc3QgTk9NSU5BTF9LTk9CX0xFTkdUSCA9IDI1O1xyXG5jb25zdCBOT01JTkFMX0tOT0JfUkFESVVTID0gMTA7XHJcblxyXG5leHBvcnQgY2xhc3MgVmFsdWVQbGFuZXNDdHJsIHtcclxuICAgcHJpdmF0ZSBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0O1xyXG4gICBwcml2YXRlIHByb2dyYW06IGdsUHJvZ3JhbTtcclxuICAgcHJpdmF0ZSBvdmVybGF5OiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgcHJpdmF0ZSBtb3VzZU9mZnNldCA9IG5ldyBWZWMyKCk7XHJcbiAgIHByaXZhdGUgaGl0ID0gMDtcclxuICAgcHJpdmF0ZSBoYW5kbGVyOiBQb2ludGVyRXZlbnRIYW5kbGVyO1xyXG4gICBwcml2YXRlIHByb3ZpZGVyOiBWYWx1ZVBsYW5lcztcclxuXHJcbiAgIHByaXZhdGUgYmFsbDogZ2xPYmplY3Q7XHJcbiAgIHByaXZhdGUgYXJyb3c6IGdsT2JqZWN0O1xyXG4gICBwcml2YXRlIGJhbGxDZW50ZXI6IFZlYzI7XHJcbiAgIHByaXZhdGUgcDE6IFZlYzI7XHJcbiAgIHByaXZhdGUgcDI6IFZlYzI7XHJcblxyXG4gICBwcml2YXRlIG9uVGhyZXNob2xkMUNoYW5nZTogVGhyZXNob2xkQ2hhbmdlRnVuY3Rpb247XHJcbiAgIHByaXZhdGUgb25UaHJlc2hvbGQyQ2hhbmdlOiBUaHJlc2hvbGRDaGFuZ2VGdW5jdGlvbjtcclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuICAgICAgcGFyZW50OiBIVE1MRWxlbWVudCxcclxuICAgICAgcHJvdmlkZXI6IFZhbHVlUGxhbmVzLFxyXG4gICAgICBvblRocmVzaG9sZDFDaGFuZ2U6IFRocmVzaG9sZENoYW5nZUZ1bmN0aW9uLFxyXG4gICAgICBvblRocmVzaG9sZDJDaGFuZ2U6IFRocmVzaG9sZENoYW5nZUZ1bmN0aW9uXHJcbiAgICkge1xyXG5cclxuICAgICAgaWYgKGlzTW9iaWxlKSB7XHJcbiAgICAgICAgIENUUkxfU0laRSA9IDMwMDtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5wcm92aWRlciA9IHByb3ZpZGVyO1xyXG4gICAgICB0aGlzLm9uVGhyZXNob2xkMUNoYW5nZSA9IG9uVGhyZXNob2xkMUNoYW5nZTtcclxuICAgICAgdGhpcy5vblRocmVzaG9sZDJDaGFuZ2UgPSBvblRocmVzaG9sZDJDaGFuZ2U7XHJcblxyXG4gICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgY2FudmFzLmlkID0gJ1ZhbHVlUGxhbmVzQ2FudmFzJztcclxuICAgICAgY2FudmFzLndpZHRoID0gQ1RSTF9TSVpFO1xyXG4gICAgICBjYW52YXMuaGVpZ2h0ID0gQ1RSTF9TSVpFO1xyXG4gICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoY2FudmFzKTtcclxuXHJcbiAgICAgIC8vIGRvbid0IHRyeSB0byBtYWtlIHRoZSBjYW52YXMgdHJhbnNwYXJlbnQgdG8gdGhlIHVuZGVybHlpbmcgaHRtbC4gVGhpc1xyXG4gICAgICAvLyBzZWVtcyB0byBsaW1pdCB0aGUgYWxwaGEgdmFsdWVzIHdlIGNhbiB1c2UgaW4gb3VyIHNjZW5lLlxyXG4gICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJykgYXMgV2ViR0xSZW5kZXJpbmdDb250ZXh0O1xyXG5cclxuICAgICAgaWYgKCFjb250ZXh0KSB7XHJcbiAgICAgICAgIC8vIFRPRE8gZGlzcGxheSBhIG1lc3NhZ2UgYWJvdXQgbm90IGJlaW5nIGFibGUgdG8gY3JlYXRlIGEgV2ViR0wgY29udGV4dFxyXG4gICAgICAgICBjb25zb2xlLmxvZyhcIlVuYWJsZSB0byBnZXQgV2ViR0wgY29udGV4dFwiKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmdsID0gY29udGV4dDtcclxuXHJcbiAgICAgIHRoaXMub3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICB0aGlzLm92ZXJsYXkuaWQgPSAnVmFsdWVQbGFuZXNPdmVybGF5Q2FudmFzJztcclxuICAgICAgdGhpcy5vdmVybGF5LndpZHRoID0gQ1RSTF9TSVpFO1xyXG4gICAgICB0aGlzLm92ZXJsYXkuaGVpZ2h0ID0gQ1RSTF9TSVpFO1xyXG5cclxuICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMub3ZlcmxheSk7XHJcblxyXG4gICAgICB0aGlzLmhhbmRsZXIgPSBuZXcgUG9pbnRlckV2ZW50SGFuZGxlcih0aGlzLm92ZXJsYXkpO1xyXG4gICAgICB0aGlzLmhhbmRsZXIub25Eb3duID0gKHBvczogVmVjMikgPT4gdGhpcy5vbkRvd24ocG9zKTtcclxuICAgICAgdGhpcy5oYW5kbGVyLm9uRHJhZyA9IChwb3M6IFZlYzIsIGRlbHRhOiBWZWMyKSA9PiB0aGlzLm9uRHJhZyhwb3MsIGRlbHRhKTtcclxuXHJcbiAgICAgIGNvbnN0IGdsID0gdGhpcy5nbDtcclxuICAgICAgZ2wuZW5hYmxlKGdsLkRFUFRIX1RFU1QpO1xyXG5cclxuICAgICAgdGhpcy5wcm9ncmFtID0gbmV3IGdsUHJvZ3JhbShnbCwgdmVydGV4U291cmNlLCBmcmFnbWVudFNvdXJjZSk7XHJcblxyXG4gICAgICBjb25zdCB0QmFsbCA9IG5ldyBUcmlhbmdsZU9iakJ1aWxkZXIoJ0JhbGwnKTtcclxuICAgICAgdEJhbGwuYWRkU3BoZXJlKDUwLCBCQUxMX1JBRElVUywgQkFMTF9DRU5URVIpO1xyXG4gICAgICB0QmFsbC5vcHRpbWl6ZShOb3JtYWxUeXBlLlNtb290aCk7XHJcbiAgICAgIHRoaXMuYmFsbCA9IG5ldyBnbE9iamVjdChnbCwgdEJhbGwsIHRoaXMucHJvZ3JhbSk7XHJcblxyXG4gICAgICBjb25zdCB0QXJyb3cgPSBuZXcgVHJpYW5nbGVPYmpCdWlsZGVyKCdMaWdodCBBcnJvdycpO1xyXG4gICAgICB0QXJyb3cuYWRkQXJyb3coKTtcclxuICAgICAgdGhpcy5hcnJvdyA9IG5ldyBnbE9iamVjdChnbCwgdEFycm93LCB0aGlzLnByb2dyYW0pO1xyXG5cclxuICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgb25Eb3duKHBvczogVmVjMikge1xyXG5cclxuICAgICAgdGhpcy5oaXRUZXN0KHBvcyk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgaGl0VGVzdChwb3M6IFZlYzIpIHtcclxuICAgICAgY29uc3QgZDEgPSB0aGlzLnAxLmRpc3RhbmNlKHBvcyk7XHJcbiAgICAgIGNvbnN0IGQyID0gdGhpcy5wMi5kaXN0YW5jZShwb3MpO1xyXG5cclxuICAgICAgY29uc3QgSElUX1JBRElVUyA9IE5PTUlOQUxfS05PQl9SQURJVVMgKiAoQ1RSTF9TSVpFIC8gTk9NSU5BTF9ESVNQTEFZX1NJWkUpO1xyXG4gICAgICBpZiAoZDEgPCBISVRfUkFESVVTICYmIGQxIDw9IGQyKSB7XHJcbiAgICAgICAgIHRoaXMuaGl0ID0gMTtcclxuICAgICAgICAgdGhpcy5tb3VzZU9mZnNldCA9IG5ldyBWZWMyKFt0aGlzLnAxLnggLSBwb3MueCwgdGhpcy5wMS55IC0gcG9zLnldKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChkMiA8IEhJVF9SQURJVVMgJiYgZDIgPD0gZDEpIHtcclxuICAgICAgICAgdGhpcy5oaXQgPSAyO1xyXG4gICAgICAgICB0aGlzLm1vdXNlT2Zmc2V0ID0gbmV3IFZlYzIoW3RoaXMucDIueCAtIHBvcy54LCB0aGlzLnAyLnkgLSBwb3MueV0pO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICB0aGlzLmhpdCA9IDA7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBvbkRyYWcocG9zOiBWZWMyLCBkZWx0YTogVmVjMikge1xyXG4gICAgICBpZiAodGhpcy5oaXQgPiAwKSB7XHJcbiAgICAgICAgIGNvbnN0IGhpdFB0ID0gbmV3IFZlYzIoW3Bvcy54ICsgdGhpcy5tb3VzZU9mZnNldC54LCBwb3MueSArIHRoaXMubW91c2VPZmZzZXQueV0pO1xyXG4gICAgICAgICBoaXRQdC54ID0gTWF0aC5tYXgoaGl0UHQueCwgdGhpcy5iYWxsQ2VudGVyLngpO1xyXG4gICAgICAgICBoaXRQdC55ID0gTWF0aC5taW4oaGl0UHQueSwgdGhpcy5iYWxsQ2VudGVyLnkpO1xyXG4gICAgICAgICBjb25zdCByYWRpdXMgPSB0aGlzLmJhbGxDZW50ZXIuZGlzdGFuY2UoaGl0UHQpO1xyXG4gICAgICAgICBjb25zdCBhbmdsZSA9IGNsYW1wKHRvRGVnKE1hdGguYXNpbigoaGl0UHQueCAtIHRoaXMuYmFsbENlbnRlci54KSAvIHJhZGl1cykpLCAwLCA5MCk7XHJcbiAgICAgICAgIGlmICh0aGlzLmhpdCA9PSAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvdmlkZXIudGhyZXNob2xkMSA9IGFuZ2xlO1xyXG4gICAgICAgICAgICB0aGlzLm9uVGhyZXNob2xkMUNoYW5nZShhbmdsZSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvdmlkZXIudGhyZXNob2xkMiA9IGFuZ2xlO1xyXG4gICAgICAgICAgICB0aGlzLm9uVGhyZXNob2xkMkNoYW5nZShhbmdsZSk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgdG9HTENvbG9yKHZhbDogbnVtYmVyKTogZ2xDb2xvcjMge1xyXG4gICAgICByZXR1cm4gbmV3IGdsQ29sb3IzKFt2YWwsIHZhbCwgdmFsXSk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgc2V0U3RkVW5pZm9ybXMoKTogZ2xVbmlmb3JtIHtcclxuXHJcbiAgICAgIGNvbnN0IHVuaSA9IG5ldyBnbFVuaWZvcm0odGhpcy5nbCwgdGhpcy5wcm9ncmFtKTtcclxuICAgICAgdW5pLnNldCgndmlldycsIE1hdDQuaWRlbnRpdHkpO1xyXG4gICAgICB1bmkuc2V0KCdwcm9qZWN0aW9uJywgTWF0NC5vcnRobyk7XHJcbiAgICAgIHVuaS5zZXQoJ3VFeWUnLCBuZXcgVmVjMyhbMCwgMCwgMV0pKTtcclxuICAgICAgdW5pLnNldCgndU9ydGhvZ3JhcGhpYycsIHRydWUpO1xyXG5cclxuICAgICAgdW5pLnNldCgndURpZmZ1c2VJbnRlbnNpdHknLCBWYWx1ZVJhbmdlLlN0YW5kYXJkLmRpZmZ1c2VJbnRlbnNpdHkpO1xyXG4gICAgICB1bmkuc2V0KCd1QW1iaWVudEludGVuc2l0eScsIFZhbHVlUmFuZ2UuU3RhbmRhcmQuc2hhZG93KTtcclxuICAgICAgdW5pLnNldCgndVNwZWN1bGFySW50ZW5zaXR5JywgVmFsdWVSYW5nZS5TdGFuZGFyZC5zcGVjdWxhckludGVuc2l0eSk7XHJcbiAgICAgIHVuaS5zZXQoJ3VMaWdodEludGVuc2l0eScsIDEuMCk7XHJcbiAgICAgIHVuaS5zZXQoJ3VGYWxsb2ZmJywgMCk7XHJcblxyXG4gICAgICB1bmkuc2V0KCd1V2hpdGVDb2xvcicsIGdsQ29sb3IzLm1vZGVsV2hpdGUpO1xyXG4gICAgICB1bmkuc2V0KCd1QmxhY2tDb2xvcicsIGdsQ29sb3IzLm1vZGVsQmxhY2spO1xyXG5cclxuICAgICAgY29uc3QgY29udG91ckNvbG9ycyA9IFtcclxuICAgICAgICAgdGhpcy50b0dMQ29sb3IodGhpcy5wcm92aWRlci5saWdodExpZ2h0KSxcclxuICAgICAgICAgdGhpcy50b0dMQ29sb3IodGhpcy5wcm92aWRlci5taWRMaWdodCksXHJcbiAgICAgICAgIHRoaXMudG9HTENvbG9yKHRoaXMucHJvdmlkZXIuZGFya0xpZ2h0KSxcclxuICAgICAgXVxyXG4gICAgICB1bmkuc2V0aSgndU51bUNvbnRvdXJzJywgY29udG91ckNvbG9ycy5sZW5ndGgpO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRvdXJDb2xvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgdW5pLnNldCgndUNvbnRvdXJDb2xvcnNbJyArIGkgKyAnXScsIGNvbnRvdXJDb2xvcnNbaV0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB1bmkuc2V0KCd1Q29udG91ckFuZ2xlc1swXScsIHRoaXMucHJvdmlkZXIudGhyZXNob2xkMSk7XHJcbiAgICAgIHVuaS5zZXQoJ3VDb250b3VyQW5nbGVzWzFdJywgdGhpcy5wcm92aWRlci50aHJlc2hvbGQyKTtcclxuICAgICAgdW5pLnNldCgndUNvbnRvdXJBbmdsZXNbMl0nLCA5MCk7XHJcblxyXG4gICAgICByZXR1cm4gdW5pO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZHJhdygpIHtcclxuXHJcbiAgICAgIHRoaXMuZHJhd0JhbGwoKTtcclxuICAgICAgdGhpcy5kcmF3T3ZlcmxheSgpO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGRyYXdCYWxsKCkge1xyXG4gICAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XHJcbiAgICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xyXG5cclxuICAgICAgY29uc3QgdW5pID0gdGhpcy5zZXRTdGRVbmlmb3JtcygpO1xyXG5cclxuICAgICAgLy8gYWx3YXlzIHJlbmRlciB3aXRoIGJhbmRzXHJcbiAgICAgIHVuaS5zZXRpKCd1UmVuZGVyTW9kZScsIFJlbmRlck1vZGUuQ29udG91clBsYW5lcyk7XHJcblxyXG4gICAgICAvLyBzaG9vdCB0aGUgbGlnaHQgc3RyYWlnaHQgZG93blxyXG4gICAgICB1bmkuc2V0KCd1TGlnaHRQb3MnLCBuZXcgVmVjMyhbMCwgMSwgMF0pKTtcclxuXHJcbiAgICAgIC8vIGRvbid0IGNhc3Qgc2hhZG93c1xyXG4gICAgICB1bmkuc2V0KCd1VXNlU2hhZG93cycsIGZhbHNlKTtcclxuXHJcbiAgICAgIC8vIHJlbmRlciB0aGUgYmFsbFxyXG4gICAgICB0aGlzLmJhbGwuZHJhdygpO1xyXG5cclxuICAgICAgLy8gZHJhdyB0aGUgYXJyb3dcclxuICAgICAgdW5pLnNldCgndUxpZ2h0UG9zJywgbmV3IFZlYzMoWy0xLCAtMC41LCAwLjVdKSk7XHJcbiAgICAgIHVuaS5zZXRpKCd1UmVuZGVyTW9kZScsIFJlbmRlck1vZGUuTm9ybWFsKTtcclxuXHJcbiAgICAgIC8vIGZpcnN0IHJlc2V0IHRoaW5ncyBzbyB0aGF0IHdlJ3JlIGxvb2tpbmcgZG93biB0aGUgei1heGlzXHJcbiAgICAgIHRoaXMuYXJyb3cuY2xlYXJUcmFuc2Zvcm1zKCk7XHJcbiAgICAgIHRoaXMuYXJyb3cuc2NhbGUoMS4yNSlcclxuICAgICAgdGhpcy5hcnJvdy50cmFuc2xhdGUobmV3IFZlYzMoW0JBTExfQ0VOVEVSLngsIEJBTExfQ0VOVEVSLnkgKyBCQUxMX1JBRElVUyArIDAuMSwgMC4wXSkpO1xyXG5cclxuICAgICAgdW5pLnNldCgndVdoaXRlQ29sb3InLCBuZXcgZ2xDb2xvcjMoWzEuMCwgMS4wLCAwLjVdKSk7XHJcbiAgICAgIHVuaS5zZXQoJ3VCbGFja0NvbG9yJywgaHRtbENvbG9yLmJsYWNrLnRvR2xDb2xvcigpKTtcclxuICAgICAgdW5pLnNldCgndUFtYmllbnRJbnRlbnNpdHknLCAwLjQpO1xyXG4gICAgICB1bmkuc2V0KCd1RGlmZnVzZUludGVuc2l0eScsIDAuNik7XHJcbiAgICAgIHRoaXMuYXJyb3cuZHJhdygpO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGRyYXdPdmVybGF5KCkge1xyXG4gICAgICBjb25zdCBjdHggPSB0aGlzLm92ZXJsYXkuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgdGhpcy5iYWxsQ2VudGVyID0gbmV3IFZlYzIoW1xyXG4gICAgICAgICBDVFJMX1NJWkUgKiAoMSArIEJBTExfQ0VOVEVSLngpIC8gMixcclxuICAgICAgICAgQ1RSTF9TSVpFICogKDEgLSBCQUxMX0NFTlRFUi55KSAvIDJcclxuICAgICAgXSk7XHJcblxyXG4gICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIENUUkxfU0laRSwgQ1RSTF9TSVpFKTtcclxuICAgICAgY3R4LmZpbGxTdHlsZSA9ICdsaW1lZ3JlZW4nO1xyXG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnYmxhY2snXHJcblxyXG4gICAgICBjb25zdCBLTk9CX0xFTkdUSCA9IE5PTUlOQUxfS05PQl9MRU5HVEggKiAoQ1RSTF9TSVpFIC8gTk9NSU5BTF9ESVNQTEFZX1NJWkUpO1xyXG4gICAgICBjb25zdCBLTk9CX1JBRElVUyA9IE5PTUlOQUxfS05PQl9SQURJVVMgKiAoQ1RSTF9TSVpFIC8gTk9NSU5BTF9ESVNQTEFZX1NJWkUpO1xyXG4gICAgICBjb25zdCByID0gQ1RSTF9TSVpFICogQkFMTF9SQURJVVMgLyAyO1xyXG4gICAgICBjb25zdCBzMSA9IHRoaXMuZ2V0UHQodGhpcy5iYWxsQ2VudGVyLCB0aGlzLnByb3ZpZGVyLnRocmVzaG9sZDEsIHIpO1xyXG4gICAgICB0aGlzLnAxID0gdGhpcy5nZXRQdCh0aGlzLmJhbGxDZW50ZXIsIHRoaXMucHJvdmlkZXIudGhyZXNob2xkMSwgciArIEtOT0JfTEVOR1RIKTtcclxuICAgICAgY29uc3QgczIgPSB0aGlzLmdldFB0KHRoaXMuYmFsbENlbnRlciwgdGhpcy5wcm92aWRlci50aHJlc2hvbGQyLCByKTtcclxuICAgICAgdGhpcy5wMiA9IHRoaXMuZ2V0UHQodGhpcy5iYWxsQ2VudGVyLCB0aGlzLnByb3ZpZGVyLnRocmVzaG9sZDIsIHIgKyBLTk9CX0xFTkdUSCk7XHJcblxyXG4gICAgICBjdHgubGluZVdpZHRoID0gKDEgLyAxNTApICogQ1RSTF9TSVpFO1xyXG4gICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgIGN0eC5tb3ZlVG8oczEueCwgczEueSk7XHJcbiAgICAgIGN0eC5saW5lVG8odGhpcy5wMS54LCB0aGlzLnAxLnkpO1xyXG4gICAgICBjdHguc3Ryb2tlKCk7XHJcblxyXG4gICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgIGN0eC5hcmModGhpcy5wMS54LCB0aGlzLnAxLnksIEtOT0JfUkFESVVTLCAwLCB0b1JhZCgzNjApKTtcclxuICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgY3R4LnN0cm9rZSgpO1xyXG5cclxuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICBjdHgubW92ZVRvKHMyLngsIHMyLnkpO1xyXG4gICAgICBjdHgubGluZVRvKHRoaXMucDIueCwgdGhpcy5wMi55KTtcclxuICAgICAgY3R4LnN0cm9rZSgpO1xyXG5cclxuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICBjdHguYXJjKHRoaXMucDIueCwgdGhpcy5wMi55LCBLTk9CX1JBRElVUywgMCwgdG9SYWQoMzYwKSk7XHJcbiAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBnZXRQdChjZW50ZXI6IFZlYzIsIHRocmVzaG9sZDogbnVtYmVyLCByYWRpdXM6IG51bWJlcik6IFZlYzIge1xyXG5cclxuICAgICAgY29uc3Qgb3kgPSByYWRpdXMgKiBNYXRoLnNpbih0b1JhZCg5MCAtIHRocmVzaG9sZCkpO1xyXG4gICAgICBjb25zdCBveCA9IHJhZGl1cyAqIE1hdGguY29zKHRvUmFkKDkwIC0gdGhyZXNob2xkKSk7XHJcblxyXG4gICAgICByZXR1cm4gbmV3IFZlYzIoW2NlbnRlci54ICsgb3gsIGNlbnRlci55IC0gb3ldKTtcclxuICAgfVxyXG59IiwiaW1wb3J0IHsgUGFuZWwgfSBmcm9tICcuLi8uLi9HVUkvUGFuZWwnO1xyXG5pbXBvcnQgeyBWYWx1ZVBsYW5lcyB9IGZyb20gJy4vVmFsdWVQbGFuZXMnO1xyXG5pbXBvcnQgeyBTbGlkZXIgfSBmcm9tICcuLi8uLi9HVUkvU2xpZGVyJztcclxuaW1wb3J0IHsgVmFsdWVQbGFuZXNDdHJsIH0gZnJvbSAnLi9WYWx1ZVBsYW5lc0N0cmwnO1xyXG5pbXBvcnQgeyBWYWx1ZVJhbmdlIH0gZnJvbSAnLi9WYWx1ZVJhbmdlJztcclxuaW1wb3J0IHsgZ2xDb2xvcjMgfSBmcm9tICcuLi8uLi9nbC9nbENvbG9yJztcclxuaW1wb3J0IHsgUmVuZGVyZXIsIENvbnRvdXIgfSBmcm9tICcuL1JlbmRlcmVyJztcclxuXHJcbmV4cG9ydCB0eXBlIFZhbHVlUGxhbmVzQ2hhbmdlRnVuY3Rpb24gPSAocGFuZWw6IFZhbHVlUGxhbmVzUGFuZWwpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgY2xhc3MgVmFsdWVQbGFuZXNQYW5lbCBleHRlbmRzIFBhbmVsIHtcclxuXHJcbiAgIHB1YmxpYyB2YWx1ZVBsYW5lczogVmFsdWVQbGFuZXM7XHJcbiAgIHByaXZhdGUgaGlnaGxpZ2h0U2xpZGVyOiBTbGlkZXJcclxuICAgcHJpdmF0ZSBsaWdodExpZ2h0U2xpZGVyOiBTbGlkZXI7XHJcbiAgIHByaXZhdGUgbWlkTGlnaHRTbGlkZXI6IFNsaWRlcjtcclxuICAgcHJpdmF0ZSBkYXJrTGlnaHRTbGlkZXI6IFNsaWRlcjtcclxuICAgcHJpdmF0ZSBzaGFkb3dTbGlkZXI6IFNsaWRlcjtcclxuICAgcHJpdmF0ZSB2YWx1ZVBsYW5lc0N0cmw6IFZhbHVlUGxhbmVzQ3RybDtcclxuICAgcHVibGljIG9uQ2hhbmdlOiBWYWx1ZVBsYW5lc0NoYW5nZUZ1bmN0aW9uO1xyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKHBhcmVudDogSFRNTEVsZW1lbnQsIGlkOiBzdHJpbmcsIHZhbHVlUmFuZ2U6IFZhbHVlUmFuZ2UpIHtcclxuICAgICAgc3VwZXIocGFyZW50LCBpZCk7XHJcblxyXG4gICAgICB0aGlzLnZhbHVlUGxhbmVzID0gbmV3IFZhbHVlUGxhbmVzKHZhbHVlUmFuZ2UpO1xyXG5cclxuICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICBkaXYuY2xhc3NOYW1lID0gJ1NsaWRlcnNEaXYnO1xyXG4gICAgICB0aGlzLmRpdi5hcHBlbmRDaGlsZChkaXYpO1xyXG5cclxuICAgICAgdGhpcy5jcmVhdGVDdHJsc0VsZW1lbnRzKGRpdik7XHJcblxyXG4gICAgICB0aGlzLnZhbHVlUGxhbmVzQ3RybCA9IG5ldyBWYWx1ZVBsYW5lc0N0cmwoXHJcbiAgICAgICAgIHRoaXMuZGl2LFxyXG4gICAgICAgICB0aGlzLnZhbHVlUGxhbmVzLFxyXG4gICAgICAgICAodmFsdWU6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNsaWRlcnMoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMub25DaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgdGhpcy5vbkNoYW5nZSh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9LFxyXG4gICAgICAgICAodmFsdWU6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNsaWRlcnMoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMub25DaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgdGhpcy5vbkNoYW5nZSh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgY3JlYXRlQ3RybHNFbGVtZW50cyhwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XHJcblxyXG4gICAgICB0aGlzLmhpZ2hsaWdodFNsaWRlciA9IG5ldyBTbGlkZXIocGFyZW50LCB7XHJcbiAgICAgICAgIGlkOiAnSGlnaGxpZ2h0JyxcclxuICAgICAgICAgbGFiZWw6ICdIaWdobGlnaHQnLFxyXG4gICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgIG1heDogMSxcclxuICAgICAgICAgdmFsdWU6IHRoaXMudmFsdWVQbGFuZXMuaGlnaGxpZ2h0LFxyXG4gICAgICAgICBjb2xvcnM6IFtnbENvbG9yMy5tb2RlbEJsYWNrLnRvSHRtbENvbG9yKCksIGdsQ29sb3IzLm1vZGVsV2hpdGUudG9IdG1sQ29sb3IoKV0sXHJcbiAgICAgICAgIG9uaW5wdXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZVBsYW5lcy5oaWdobGlnaHQgPSB0aGlzLmhpZ2hsaWdodFNsaWRlci52YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVTbGlkZXJzKCk7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVQbGFuZXNDdHJsLmRyYXcoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMub25DaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgdGhpcy5vbkNoYW5nZSh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9LFxyXG4gICAgICAgICBvbkdldFRleHQ6IChzbGlkZXI6IFNsaWRlcikgPT4geyByZXR1cm4gKDEwMCAqIHNsaWRlci52YWx1ZSkudG9GaXhlZCgwKSArICclJyB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5saWdodExpZ2h0U2xpZGVyID0gbmV3IFNsaWRlcihwYXJlbnQsIHtcclxuICAgICAgICAgaWQ6ICdMaWdodExpZ2h0JyxcclxuICAgICAgICAgbGFiZWw6ICdMaWdodCBMaWdodCcsXHJcbiAgICAgICAgIG1pbjogMCxcclxuICAgICAgICAgbWF4OiAxLFxyXG4gICAgICAgICB2YWx1ZTogdGhpcy52YWx1ZVBsYW5lcy5saWdodExpZ2h0LFxyXG4gICAgICAgICBjb2xvcnM6IFtnbENvbG9yMy5tb2RlbEJsYWNrLnRvSHRtbENvbG9yKCksIGdsQ29sb3IzLm1vZGVsV2hpdGUudG9IdG1sQ29sb3IoKV0sXHJcbiAgICAgICAgIG9uR2V0VGV4dDogKHNsaWRlcjogU2xpZGVyKSA9PiB7IHJldHVybiAoMTAwICogc2xpZGVyLnZhbHVlKS50b0ZpeGVkKDApICsgJyUnIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMubGlnaHRMaWdodFNsaWRlci5yYW5nZS5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgICB0aGlzLm1pZExpZ2h0U2xpZGVyID0gbmV3IFNsaWRlcihwYXJlbnQsIHtcclxuICAgICAgICAgaWQ6ICdNaWRMaWdodCcsXHJcbiAgICAgICAgIGxhYmVsOiAnTWlkIExpZ2h0JyxcclxuICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICBtYXg6IDEsXHJcbiAgICAgICAgIHZhbHVlOiB0aGlzLnZhbHVlUGxhbmVzLm1pZExpZ2h0LFxyXG4gICAgICAgICBjb2xvcnM6IFtnbENvbG9yMy5tb2RlbEJsYWNrLnRvSHRtbENvbG9yKCksIGdsQ29sb3IzLm1vZGVsV2hpdGUudG9IdG1sQ29sb3IoKV0sXHJcbiAgICAgICAgIG9uR2V0VGV4dDogKHNsaWRlcjogU2xpZGVyKSA9PiB7IHJldHVybiAoMTAwICogc2xpZGVyLnZhbHVlKS50b0ZpeGVkKDApICsgJyUnIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMubWlkTGlnaHRTbGlkZXIucmFuZ2UuZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgdGhpcy5kYXJrTGlnaHRTbGlkZXIgPSBuZXcgU2xpZGVyKHBhcmVudCwge1xyXG4gICAgICAgICBpZDogJ0RhcmtMaWdodCcsXHJcbiAgICAgICAgIGxhYmVsOiAnRGFyayBMaWdodCcsXHJcbiAgICAgICAgIG1pbjogMCxcclxuICAgICAgICAgbWF4OiAxLFxyXG4gICAgICAgICB2YWx1ZTogdGhpcy52YWx1ZVBsYW5lcy5kYXJrTGlnaHQsXHJcbiAgICAgICAgIGNvbG9yczogW2dsQ29sb3IzLm1vZGVsQmxhY2sudG9IdG1sQ29sb3IoKSwgZ2xDb2xvcjMubW9kZWxXaGl0ZS50b0h0bWxDb2xvcigpXSxcclxuICAgICAgICAgb25HZXRUZXh0OiAoc2xpZGVyOiBTbGlkZXIpID0+IHsgcmV0dXJuICgxMDAgKiBzbGlkZXIudmFsdWUpLnRvRml4ZWQoMCkgKyAnJScgfVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5kYXJrTGlnaHRTbGlkZXIucmFuZ2UuZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgdGhpcy5zaGFkb3dTbGlkZXIgPSBuZXcgU2xpZGVyKHBhcmVudCwge1xyXG4gICAgICAgICBpZDogJ1NoYWRvdycsXHJcbiAgICAgICAgIGxhYmVsOiAnU2hhZG93JyxcclxuICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICBtYXg6IDEsXHJcbiAgICAgICAgIHZhbHVlOiB0aGlzLnZhbHVlUGxhbmVzLnNoYWRvdyxcclxuICAgICAgICAgY29sb3JzOiBbZ2xDb2xvcjMubW9kZWxCbGFjay50b0h0bWxDb2xvcigpLCBnbENvbG9yMy5tb2RlbFdoaXRlLnRvSHRtbENvbG9yKCldLFxyXG4gICAgICAgICBvbmlucHV0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVQbGFuZXMuc2hhZG93ID0gdGhpcy5zaGFkb3dTbGlkZXIudmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2xpZGVycygpO1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlUGxhbmVzQ3RybC5kcmF3KCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9uQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgIHRoaXMub25DaGFuZ2UodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfSxcclxuICAgICAgICAgb25HZXRUZXh0OiAoc2xpZGVyOiBTbGlkZXIpID0+IHsgcmV0dXJuICgxMDAgKiBzbGlkZXIudmFsdWUpLnRvRml4ZWQoMCkgKyAnJScgfVxyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSB1cGRhdGVTbGlkZXJzKCkge1xyXG4gICAgICB0aGlzLmhpZ2hsaWdodFNsaWRlci52YWx1ZSA9IHRoaXMudmFsdWVQbGFuZXMuaGlnaGxpZ2h0O1xyXG4gICAgICB0aGlzLmxpZ2h0TGlnaHRTbGlkZXIudmFsdWUgPSB0aGlzLnZhbHVlUGxhbmVzLmxpZ2h0TGlnaHQ7XHJcbiAgICAgIHRoaXMubWlkTGlnaHRTbGlkZXIudmFsdWUgPSB0aGlzLnZhbHVlUGxhbmVzLm1pZExpZ2h0O1xyXG4gICAgICB0aGlzLmRhcmtMaWdodFNsaWRlci52YWx1ZSA9IHRoaXMudmFsdWVQbGFuZXMuZGFya0xpZ2h0O1xyXG4gICAgICB0aGlzLnNoYWRvd1NsaWRlci52YWx1ZSA9IHRoaXMudmFsdWVQbGFuZXMuc2hhZG93O1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgdG9SZW5kZXJlcihyZW5kZXJlcjogUmVuZGVyZXIpIHtcclxuICAgICAgcmVuZGVyZXIub3B0aW9ucy5jb250b3VycyA9IFtcclxuICAgICAgICAgbmV3IENvbnRvdXIodGhpcy52YWx1ZVBsYW5lcy5saWdodExpZ2h0LCB0aGlzLnZhbHVlUGxhbmVzLnRocmVzaG9sZDEpLFxyXG4gICAgICAgICBuZXcgQ29udG91cih0aGlzLnZhbHVlUGxhbmVzLm1pZExpZ2h0LCB0aGlzLnZhbHVlUGxhbmVzLnRocmVzaG9sZDIpLFxyXG4gICAgICAgICBuZXcgQ29udG91cih0aGlzLnZhbHVlUGxhbmVzLmRhcmtMaWdodCwgOTApXHJcbiAgICAgIF07XHJcbiAgICAgIHJlbmRlcmVyLm9wdGlvbnMudmFsdWVSYW5nZSA9IG5ldyBWYWx1ZVJhbmdlKFxyXG4gICAgICAgICB0aGlzLnZhbHVlUGxhbmVzLmhpZ2hsaWdodCxcclxuICAgICAgICAgdGhpcy52YWx1ZVBsYW5lcy5zaGFkb3csXHJcbiAgICAgICAgIHRoaXMudmFsdWVQbGFuZXMuaGlnaGxpZ2h0IC0gdGhpcy52YWx1ZVBsYW5lcy5saWdodExpZ2h0XHJcbiAgICAgICk7XHJcblxyXG4gICB9XHJcbn0iLCIvKipcclxuICogS2VlcHMgdHJhY2sgb2YgYSB2YWx1ZSByYW5nZSAtIGhpZ2hsaWdodCB0byBzaGFkb3cgY29sb3IuIEEgbWluaW11bVxyXG4gKiBkaWZmZXJlbnRpYWwgaXMga2VwdCBiZXR3ZWVuIHRoZSB0d28gd2hlbiBvbmUgaXMgY2hhbmdlZFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZhbHVlUmFuZ2Uge1xyXG5cclxuICAgcHVibGljIHN0YXRpYyBnZXQgU3RhbmRhcmQoKTogVmFsdWVSYW5nZSB7XHJcbiAgICAgIHJldHVybiBuZXcgVmFsdWVSYW5nZSgxLjAsIDAuMiwgMC4xKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHN0YXRpYyBnZXQgRW1waGFzaXplSGlnaGxpZ2h0cygpOiBWYWx1ZVJhbmdlIHtcclxuICAgICAgcmV0dXJuIG5ldyBWYWx1ZVJhbmdlKDEuMCwgMC4yLCAwLjc1KTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBfbWF4SW50ZW5zaXR5OiBudW1iZXI7XHJcbiAgIHByaXZhdGUgX2FtYmllbnRJbnRlbnNpdHk6IG51bWJlcjtcclxuICAgcHJpdmF0ZSBfc3BlY3VsYXJJbnRlbnNpdHk6IG51bWJlcjtcclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuICAgICAgbWF4SW50ZW5zaXR5OiBudW1iZXIsXHJcbiAgICAgIGFtYmllbnRJbnRlbnNpdHk6IG51bWJlcixcclxuICAgICAgc3BlY3VsYXJJbnRlbnNpdHk6IG51bWJlclxyXG4gICApIHtcclxuICAgICAgdGhpcy5fbWF4SW50ZW5zaXR5ID0gbWF4SW50ZW5zaXR5O1xyXG4gICAgICB0aGlzLl9hbWJpZW50SW50ZW5zaXR5ID0gYW1iaWVudEludGVuc2l0eTtcclxuICAgICAgdGhpcy5fc3BlY3VsYXJJbnRlbnNpdHkgPSBzcGVjdWxhckludGVuc2l0eTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNsb25lKCk6IFZhbHVlUmFuZ2Uge1xyXG4gICAgICByZXR1cm4gbmV3IFZhbHVlUmFuZ2UoXHJcbiAgICAgICAgIHRoaXMubWF4SW50ZW5zaXR5LFxyXG4gICAgICAgICB0aGlzLmFtYmllbnRJbnRlbnNpdHksXHJcbiAgICAgICAgIHRoaXMuc3BlY3VsYXJJbnRlbnNpdHlcclxuICAgICAgKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBzcGVjdWxhckludGVuc2l0eSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc3BlY3VsYXJJbnRlbnNpdHk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgbWF4SW50ZW5zaXR5KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9tYXhJbnRlbnNpdHk7XHJcbiAgIH1cclxuICAgcHVibGljIHNldCBtYXhJbnRlbnNpdHkodmFsOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5fbWF4SW50ZW5zaXR5ID0gTWF0aC5taW4oTWF0aC5tYXgodmFsLCB0aGlzLl9zcGVjdWxhckludGVuc2l0eSksIDEuMCk7XHJcbiAgICAgIHRoaXMuX2FtYmllbnRJbnRlbnNpdHkgPSBNYXRoLm1pbih0aGlzLl9hbWJpZW50SW50ZW5zaXR5LCB0aGlzLl9tYXhJbnRlbnNpdHkgLSB0aGlzLl9zcGVjdWxhckludGVuc2l0eSk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgYW1iaWVudEludGVuc2l0eSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5fYW1iaWVudEludGVuc2l0eTtcclxuICAgfVxyXG4gICBwdWJsaWMgc2V0IGFtYmllbnRJbnRlbnNpdHkodmFsOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5zaGFkb3cgPSB2YWw7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgc2hhZG93KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9hbWJpZW50SW50ZW5zaXR5O1xyXG4gICB9XHJcbiAgIHB1YmxpYyBzZXQgc2hhZG93KHZhbDogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuX2FtYmllbnRJbnRlbnNpdHkgPSBNYXRoLm1heChNYXRoLm1pbih2YWwsIDEgLSB0aGlzLl9zcGVjdWxhckludGVuc2l0eSksIDApO1xyXG4gICAgICB0aGlzLl9tYXhJbnRlbnNpdHkgPSBNYXRoLm1heCh0aGlzLl9tYXhJbnRlbnNpdHksIHRoaXMuX2FtYmllbnRJbnRlbnNpdHkgKyB0aGlzLl9zcGVjdWxhckludGVuc2l0eSk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgZGlmZnVzZUludGVuc2l0eSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5tYXhJbnRlbnNpdHkgLSB0aGlzLl9hbWJpZW50SW50ZW5zaXR5IC0gdGhpcy5fc3BlY3VsYXJJbnRlbnNpdHk7XHJcbiAgIH1cclxufSIsImltcG9ydCB7IENvbnRvdXIsIFJlbmRlcmVyLCBMaWdodFR5cGUsIFJlc2V0LCBSZW5kZXJNb2RlIH0gZnJvbSAnLi9SZW5kZXJlcic7XHJcbmltcG9ydCB7IGdsQ29sb3IzIH0gZnJvbSAnLi4vLi4vZ2wvZ2xDb2xvcic7XHJcbmltcG9ydCB7IElBcHAgfSBmcm9tICcuLi8uLi9JQXBwJztcclxuaW1wb3J0IHsgT3ZlcmxheUNhbnZhcywgVGV4dExvY2F0aW9uIH0gZnJvbSAnLi4vLi4vR1VJL092ZXJsYXlDYW52YXMnO1xyXG5pbXBvcnQgeyBQb2ludGVyRXZlbnRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vR1VJL1BvaW50ZXJFdmVudEhhbmRsZXInO1xyXG5pbXBvcnQgeyBQZXJzcGVjdGl2ZVBhbmVsIH0gZnJvbSAnLi9QZXJzcGVjdGl2ZVBhbmVsJztcclxuaW1wb3J0IHsgVmFsdWVQbGFuZXNQYW5lbCB9IGZyb20gJy4vVmFsdWVQbGFuZXNQYW5lbCc7XHJcbmltcG9ydCB7IGhzdkNvbG9yIH0gZnJvbSAnLi4vLi4vVXRpbC9oc3ZDb2xvcic7XHJcbmltcG9ydCB7IEZQUyB9IGZyb20gJy4uLy4uL1V0aWwvRlBTJztcclxuaW1wb3J0IHsgTW9kZWxMb2FkZXIgfSBmcm9tICcuL01vZGVsTG9hZGVyJztcclxuaW1wb3J0IHsgaHRtbENvbG9yIH0gZnJvbSAnLi4vLi4vVXRpbC9odG1sQ29sb3InO1xyXG5pbXBvcnQgeyBWZWMyLCBWZWMzLCBWZWM0IH0gZnJvbSAnLi4vLi4vVXRpbDNEL1ZlYyc7XHJcbmltcG9ydCB7IHRvUmFkLCBpc01vYmlsZSB9IGZyb20gJy4uLy4uL1V0aWwvR2xvYmFscyc7XHJcbmltcG9ydCB7IE5vcm1hbFR5cGUgfSBmcm9tICcuLi8uLi9VdGlsM0QvVHJpYW5nbGVPYmonO1xyXG5pbXBvcnQgeyBQYW5lbCB9IGZyb20gJy4uLy4uL0dVSS9QYW5lbCc7XHJcbmltcG9ydCB7IFZhbHVlUmFuZ2UgfSBmcm9tICcuL1ZhbHVlUmFuZ2UnO1xyXG5pbXBvcnQgeyBNZW51YmFyLCBTdWJNZW51IH0gZnJvbSAnLi4vLi4vR1VJL01lbnUnO1xyXG5pbXBvcnQgeyBjcmVhdGVNb2RlbHNNZW51IH0gZnJvbSAnLi9Nb2RlbHNNZW51JztcclxuaW1wb3J0IHsgUmFkaW9idXR0b24gfSBmcm9tICcuLi8uLi9HVUkvUmFkaW9idXR0b24nO1xyXG5pbXBvcnQgeyBTbGlkZXIgfSBmcm9tICcuLi8uLi9HVUkvU2xpZGVyJztcclxuaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tICcuLi8uLi9HVUkvQ2hlY2tib3gnO1xyXG5pbXBvcnQgeyBUcmlhbmdsZU9iakJ1aWxkZXIgfSBmcm9tICcuLi8uLi9VdGlsM0QvVHJpYW5nbGVPYmpCdWlsZGVyJztcclxuaW1wb3J0IHNhdmVBcyBmcm9tICdmaWxlLXNhdmVyJztcclxuXHJcbmVudW0gUG9pbnRlck1vZGUge1xyXG4gICBWaWV3LFxyXG4gICBMaWdodCxcclxufVxyXG5cclxuY29uc3QgQ09MT1JfQ09OVE9VUlMgPSBbXHJcbiAgIG5ldyBDb250b3VyKG5ldyBnbENvbG9yMyhbMS4wMCwgMC4yMCwgMC4yMF0pLCAxMCksIC8vIHJlZFxyXG4gICBuZXcgQ29udG91cihuZXcgZ2xDb2xvcjMoWzEuMDAsIDAuNTUsIDAuMjVdKSwgMjApLCAvLyBvcmFuZ2VcclxuICAgbmV3IENvbnRvdXIobmV3IGdsQ29sb3IzKFsxLjAwLCAwLjgxLCAwLjI1XSksIDMwKSwgLy8gbGlnaHQgb3JhbmdlXHJcbiAgIG5ldyBDb250b3VyKG5ldyBnbENvbG9yMyhbMS4wMCwgMS4wMCwgMC4wMF0pLCA0MCksIC8vIHllbGxvd1xyXG4gICBuZXcgQ29udG91cihuZXcgZ2xDb2xvcjMoWzAuMzAsIDEuMDAsIDAuMTBdKSwgNTApLCAvLyBncmVlblxyXG4gICBuZXcgQ29udG91cihuZXcgZ2xDb2xvcjMoWzAuMjUsIDAuOTAsIDAuOTBdKSwgNjApLCAvLyBjeWFuXHJcbiAgIG5ldyBDb250b3VyKG5ldyBnbENvbG9yMyhbMC41MCwgMC41MCwgMS4wMF0pLCA3MCksIC8vIGxpZ2h0IGJsdWVcclxuICAgbmV3IENvbnRvdXIobmV3IGdsQ29sb3IzKFswLjIwLCAwLjIwLCAxLjAwXSksIDgwKSwgLy8gYmx1ZVxyXG4gICBuZXcgQ29udG91cihuZXcgZ2xDb2xvcjMoWzAuMzAsIDAuMTEsIDAuNDBdKSwgOTApLCAvLyBwdXJwbGVcclxuXVxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBWaWV3ZXJBcHAgaW1wbGVtZW50cyBJQXBwIHtcclxuICAgcHJpdmF0ZSBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0IHwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IG51bGw7XHJcbiAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyO1xyXG4gICBwcml2YXRlIHBvaW50ZXJNb2RlOiBQb2ludGVyTW9kZSA9IFBvaW50ZXJNb2RlLlZpZXc7XHJcbiAgIHByaXZhdGUgb3ZlcmxheTogT3ZlcmxheUNhbnZhcztcclxuICAgcHJpdmF0ZSBoYW5kbGVyOiBQb2ludGVyRXZlbnRIYW5kbGVyO1xyXG4gICBwcml2YXRlIHJvdGF0ZUxpZ2h0V2l0aE9iamVjdCA9IGZhbHNlO1xyXG4gICBwcml2YXRlIHBlcnNwZWN0aXZlUGFuZWw6IFBlcnNwZWN0aXZlUGFuZWw7XHJcbiAgIHByaXZhdGUgdmFsdWVQbGFuZXNQYW5lbDogVmFsdWVQbGFuZXNQYW5lbDtcclxuICAgcHJpdmF0ZSBiYXNlQmFja2dyb3VuZENvbG9yOiBoc3ZDb2xvcjtcclxuXHJcbiAgIHByaXZhdGUgZGlydHkgPSB0cnVlO1xyXG4gICBwcml2YXRlIGFuaW1hdGUgPSBmYWxzZTtcclxuICAgcHJpdmF0ZSBhbmltYXRpb25GcmFtZTogbnVtYmVyO1xyXG4gICBwcml2YXRlIGZwcyA9IG5ldyBGUFMoKTtcclxuXHJcbiAgIHByaXZhdGUgaW5pdGlhbEZpbGU6IHN0cmluZztcclxuXHJcbiAgIHByaXZhdGUgbG9hZGVyID0gbmV3IE1vZGVsTG9hZGVyKCk7XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IoZmlsZTogc3RyaW5nKSB7XHJcbiAgICAgIGlmICghZmlsZSkge1xyXG4gICAgICAgICBjb25zdCBudW0gPSBNYXRoLnJvdW5kKDAuNSArIDE2ICogTWF0aC5yYW5kb20oKSk7XHJcbiAgICAgICAgIGZpbGUgPSAnUG9zZV8wJyArIG51bSArICcuYmxvYic7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuaW5pdGlhbEZpbGUgPSBmaWxlO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY3JlYXRlKGRpdjogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcclxuXHJcbiAgICAgIGRpdi5pZCA9ICdWaWV3ZXJBcHAnO1xyXG5cclxuICAgICAgY29uc3Qgdmlld0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICB2aWV3Q29udGFpbmVyLmlkID0gJ1ZpZXdDb250YWluZXInO1xyXG4gICAgICB2aWV3Q29udGFpbmVyLmNsYXNzTmFtZSA9ICdDb250YWluZXInO1xyXG4gICAgICBkaXYuYXBwZW5kQ2hpbGQodmlld0NvbnRhaW5lcik7XHJcblxyXG4gICAgICB0aGlzLmNyZWF0ZVZpZXdFbGVtZW50cyh2aWV3Q29udGFpbmVyKTtcclxuICAgICAgdGhpcy5jcmVhdGVQZXJzcGVjdGl2ZVBhbmVsKGRpdik7XHJcbiAgICAgIHRoaXMuY3JlYXRlVmFsdWVQbGFuZXNQYW5lbChkaXYpO1xyXG4gICAgICB0aGlzLnVwZGF0ZVNpemUoKTtcclxuXHJcbiAgICAgIHRoaXMubG9hZE1vZGVsKHRoaXMuaW5pdGlhbEZpbGUpO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGNyZWF0ZVZpZXdFbGVtZW50cyhwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XHJcblxyXG4gICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgY2FudmFzLmlkID0gJ01haW5DYW52YXMnO1xyXG4gICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoY2FudmFzKTtcclxuXHJcbiAgICAgIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShjYW52YXMpO1xyXG4gICAgICB0aGlzLmJhc2VCYWNrZ3JvdW5kQ29sb3IgPSBoc3ZDb2xvci5mcm9tSHRtbENvbG9yKGh0bWxDb2xvci5mcm9tQ3NzKHN0eWxlLmJhY2tncm91bmRDb2xvcikpO1xyXG5cclxuICAgICAgdGhpcy5vdmVybGF5ID0gbmV3IE92ZXJsYXlDYW52YXMocGFyZW50KTtcclxuXHJcbiAgICAgIC8vIGRvbid0IHRyeSB0byBtYWtlIHRoZSBjYW52YXMgdHJhbnNwYXJlbnQgdG8gdGhlIHVuZGVybHlpbmcgaHRtbC4gVGhpc1xyXG4gICAgICAvLyBzZWVtcyB0byBsaW1pdCB0aGUgYWxwaGEgdmFsdWVzIHdlIGNhbiB1c2UgaW4gb3VyIHNjZW5lLlxyXG4gICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJywgeyBhbHBoYTogZmFsc2UgfSk7XHJcblxyXG4gICAgICBpZiAoIWNvbnRleHQpIHtcclxuICAgICAgICAgLy8gVE9ETyBkaXNwbGF5IGEgbWVzc2FnZSBhYm91dCBub3QgYmVpbmcgYWJsZSB0byBjcmVhdGUgYSBXZWJHTCBjb250ZXh0XHJcbiAgICAgICAgIGNvbnNvbGUubG9nKCdVbmFibGUgdG8gZ2V0IFdlYkdMIGNvbnRleHQnKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmdsID0gY29udGV4dDtcclxuXHJcbiAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIodGhpcy5nbCk7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuc2hvd01pbmlWaWV3ID0gZmFsc2U7XHJcblxyXG4gICAgICB0aGlzLmhhbmRsZXIgPSBuZXcgUG9pbnRlckV2ZW50SGFuZGxlcihjYW52YXMpO1xyXG4gICAgICB0aGlzLmhhbmRsZXIub25EcmFnID0gKHBvczogVmVjMiwgZGVsdGE6IFZlYzIpID0+IHRoaXMub25EcmFnKHBvcywgZGVsdGEpO1xyXG4gICAgICB0aGlzLmhhbmRsZXIub25Eb3duID0gKCkgPT4ge1xyXG4gICAgICAgICB0aGlzLmFuaW1hdGUgPSBmYWxzZTtcclxuICAgICAgICAgdGhpcy5vdmVybGF5LmNsZWFyKCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5oYW5kbGVyLm9uQ2xpY2sgPSAocG9zOiBWZWMyKSA9PiB0aGlzLm9uQ2xpY2socG9zKTtcclxuICAgICAgdGhpcy5oYW5kbGVyLm9uRGJsQ2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgIHRoaXMuYW5pbWF0ZSA9IHRydWU7XHJcbiAgICAgICAgIHRoaXMuZnBzID0gbmV3IEZQUygpO1xyXG4gICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5oYW5kbGVyLm9uU2NhbGUgPSAoc2NhbGU6IG51bWJlciwgY2hhbmdlOiBudW1iZXIpID0+IHRoaXMub25TY2FsZShzY2FsZSwgY2hhbmdlKTtcclxuICAgICAgdGhpcy5oYW5kbGVyLm9uUm90YXRlID0gKGFuZ2xlOiBudW1iZXIsIGRlbHRhOiBudW1iZXIpID0+IHRoaXMub25Sb3RhdGUoYW5nbGUsIGRlbHRhKTtcclxuICAgICAgdGhpcy5oYW5kbGVyLm9uVHJhbnNsYXRlID0gKGRlbHRhOiBWZWMyKSA9PiB0aGlzLm9uVHJhbnNsYXRlKGRlbHRhKTtcclxuXHJcbiAgICAgIGRvY3VtZW50Lm9ua2V5ZG93biA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4gICAgICAgICBsZXQgYW5nbGUgPSA5MDtcclxuICAgICAgICAgaWYgKGV2ZW50LmN0cmxLZXkpIHtcclxuICAgICAgICAgICAgYW5nbGUgPSAxO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xyXG4gICAgICAgICAgICBjYXNlIDM3OiAvLyBsZWZ0XHJcbiAgICAgICAgICAgICAgIHRoaXMucm90YXRlT2JqZWN0cyh0b1JhZChhbmdsZSksIDApO1xyXG4gICAgICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzg6IC8vIHVwXHJcbiAgICAgICAgICAgICAgIHRoaXMucm90YXRlT2JqZWN0cygwLCB0b1JhZChhbmdsZSkpO1xyXG4gICAgICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzk6IC8vIHJpZ2h0XHJcbiAgICAgICAgICAgICAgIHRoaXMucm90YXRlT2JqZWN0cyh0b1JhZCgtYW5nbGUpLCAwKTtcclxuICAgICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDQwOiAvLyBkb3duXHJcbiAgICAgICAgICAgICAgIHRoaXMucm90YXRlT2JqZWN0cygwLCB0b1JhZCgtYW5nbGUpKTtcclxuICAgICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRvY3VtZW50Lm9ua2V5cHJlc3MgPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgc3dpdGNoIChldmVudC5rZXkpIHtcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ2EnOlxyXG4gICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLm9iai5hcHBseVhGb3JtKCk7XHJcbiAgICAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ2QnOlxyXG4gICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNob3dTaGFkb3dNYXAgPSAhdGhpcy5yZW5kZXJlci5zaG93U2hhZG93TWFwO1xyXG4gICAgICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdnJzpcclxuICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zaG93R3JpZCA9ICF0aGlzLnJlbmRlcmVyLnNob3dHcmlkO1xyXG4gICAgICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdoJzpcclxuICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5vcHRpb25zLnNob3dIaWdobGlnaHRzID0gIXRoaXMucmVuZGVyZXIub3B0aW9ucy5zaG93SGlnaGxpZ2h0cztcclxuICAgICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnaSc6XHJcbiAgICAgICAgICAgICAgIGFsZXJ0KFxyXG4gICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnRPYmoubmFtZSArICdcXG4nICtcclxuICAgICAgICAgICAgICAgICAgJ051bSBUcmlhbmdsZXM6ICcgKyB0aGlzLnJlbmRlcmVyLnRPYmoubnVtVHJpYW5nbGVzLnRvTG9jYWxlU3RyaW5nKCkgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICdOdW0gVmVydGljZXM6ICcgKyB0aGlzLnJlbmRlcmVyLnRPYmoubnVtVmVydGljZXMudG9Mb2NhbGVTdHJpbmcoKSArICdcXG4nXHJcbiAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnbCc6XHJcbiAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmVyLm9wdGlvbnMubGlnaHRUeXBlID09PSBMaWdodFR5cGUuUG9pbnQpIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5vcHRpb25zLmxpZ2h0VHlwZSA9IExpZ2h0VHlwZS5EaXJlY3Rpb25hbDtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5vcHRpb25zLmxpZ2h0VHlwZSA9IExpZ2h0VHlwZS5Qb2ludDtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdvJzpcclxuICAgICAgICAgICAgICAgdGhpcy5vcHRpbWl6ZShOb3JtYWxUeXBlLlNtb290aCk7XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAncCc6XHJcbiAgICAgICAgICAgICAgIHRoaXMub3B0aW1pemUoTm9ybWFsVHlwZS5GbGF0KTtcclxuICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdyJzpcclxuICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci50T2JqLnJldmVyc2UoKTtcclxuICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5vYmoudXBsb2FkVHJpYW5nbGVzKCk7XHJcbiAgICAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ3MnOlxyXG4gICAgICAgICAgICAgICB0aGlzLnNhdmUoKTtcclxuICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICd0JzpcclxuICAgICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAndic6XHJcbiAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIub3B0aW9ucy5jYW1lcmEudXNlT3J0aG9ncmFwaGljID0gIXRoaXMucmVuZGVyZXIub3B0aW9ucy5jYW1lcmEudXNlT3J0aG9ncmFwaGljO1xyXG4gICAgICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG5cclxuICAgICAgICAgdGhpcy51cGRhdGVTaXplKCk7XHJcbiAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBjcmVhdGVQZXJzcGVjdGl2ZVBhbmVsKGRpdjogSFRNTERpdkVsZW1lbnQpIHtcclxuXHJcbiAgICAgIHRoaXMucGVyc3BlY3RpdmVQYW5lbCA9IG5ldyBQZXJzcGVjdGl2ZVBhbmVsKGRpdiwgJ1BlcnNwZWN0aXZlUGFuZWwnLCB0aGlzLnJlbmRlcmVyLm9wdGlvbnMuY2FtZXJhKTtcclxuICAgICAgdGhpcy5wZXJzcGVjdGl2ZVBhbmVsLm9uU2hvdyA9IChwYW5lbDogUGFuZWwpID0+IHtcclxuICAgICAgICAgdGhpcy52YWx1ZVBsYW5lc1BhbmVsLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgdGhpcy51cGRhdGVTaXplKCk7XHJcbiAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucGVyc3BlY3RpdmVQYW5lbC5vbkhpZGUgPSAoKSA9PiB7XHJcbiAgICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xyXG4gICAgICAgICB0aGlzLnBvaW50ZXJNb2RlID0gUG9pbnRlck1vZGUuVmlldztcclxuICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucGVyc3BlY3RpdmVQYW5lbC5vbkNoYW5nZSA9ICgpID0+IHtcclxuICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBjcmVhdGVWYWx1ZVBsYW5lc1BhbmVsKGRpdjogSFRNTERpdkVsZW1lbnQpIHtcclxuXHJcbiAgICAgIHRoaXMudmFsdWVQbGFuZXNQYW5lbCA9IG5ldyBWYWx1ZVBsYW5lc1BhbmVsKGRpdiwgJ1ZhbHVlUGxhbmVzUGFuZWwnLCB0aGlzLnJlbmRlcmVyLm9wdGlvbnMudmFsdWVSYW5nZSk7XHJcbiAgICAgIHRoaXMudmFsdWVQbGFuZXNQYW5lbC5vblNob3cgPSAocGFuZWw6IFBhbmVsKSA9PiB7XHJcbiAgICAgICAgIHRoaXMucGVyc3BlY3RpdmVQYW5lbC52aXNpYmxlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICB0aGlzLnVwZGF0ZVNpemUoKTtcclxuICAgICAgICAgdGhpcy5yZW5kZXJlci5vcHRpb25zLnJlbmRlck1vZGUgPSBSZW5kZXJNb2RlLkNvbnRvdXJQbGFuZXM7XHJcbiAgICAgICAgIHRoaXMudmFsdWVQbGFuZXNQYW5lbC50b1JlbmRlcmVyKHRoaXMucmVuZGVyZXIpO1xyXG5cclxuICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy52YWx1ZVBsYW5lc1BhbmVsLm9uSGlkZSA9ICgpID0+IHtcclxuICAgICAgICAgdGhpcy51cGRhdGVTaXplKCk7XHJcbiAgICAgICAgIHRoaXMucmVuZGVyZXIub3B0aW9ucy5yZW5kZXJNb2RlID0gUmVuZGVyTW9kZS5Ob3JtYWw7XHJcbiAgICAgICAgIHRoaXMucmVuZGVyZXIub3B0aW9ucy52YWx1ZVJhbmdlID0gVmFsdWVSYW5nZS5TdGFuZGFyZDtcclxuICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy52YWx1ZVBsYW5lc1BhbmVsLm9uQ2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICAgICB0aGlzLnZhbHVlUGxhbmVzUGFuZWwudG9SZW5kZXJlcih0aGlzLnJlbmRlcmVyKTtcclxuICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIGJ1aWxkTWVudShtZW51YmFyOiBNZW51YmFyKTogdm9pZCB7XHJcbiAgICAgIGNyZWF0ZU1vZGVsc01lbnUobWVudWJhciwgKGZpbGUpID0+IHRoaXMubG9hZE1vZGVsKGZpbGUpKTtcclxuXHJcbiAgICAgIGxldCBzdWJNZW51OiBTdWJNZW51O1xyXG4gICAgICBzdWJNZW51ID0gbWVudWJhci5hZGRTdWJNZW51KCdUb29scycsICdUb29scycpO1xyXG5cclxuICAgICAgY29uc3QgY29udG91cnNTdWJNZW51ID0gc3ViTWVudS5hZGRTdWJNZW51KCdDb2xvciBDb250b3VycycpO1xyXG4gICAgICBjb250b3Vyc1N1Yk1lbnUuYWRkUmFkaW9idXR0b24oe1xyXG4gICAgICAgICBsYWJlbDogJ05vbmUnLFxyXG4gICAgICAgICBncm91cDogJ0NvbnRvdXJHcm91cCcsXHJcbiAgICAgICAgIGNoZWNrZWQ6ICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyZXIub3B0aW9ucy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkNvbnRvdXJQbGFuZXMgfHxcclxuICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5vcHRpb25zLnJlbmRlck1vZGUgPT09IFJlbmRlck1vZGUuQ29udG91clZhbHVlcykge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH0sXHJcbiAgICAgICAgIG9uY2hlY2s6IChidXR0b246IFJhZGlvYnV0dG9uKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVQbGFuZXNQYW5lbC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIub3B0aW9ucy5yZW5kZXJNb2RlID0gUmVuZGVyTW9kZS5Ob3JtYWw7XHJcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBjb250b3Vyc1N1Yk1lbnUuYWRkUmFkaW9idXR0b24oe1xyXG4gICAgICAgICBsYWJlbDogJ1BsYW5lcycsXHJcbiAgICAgICAgIGdyb3VwOiAnQ29udG91ckdyb3VwJyxcclxuICAgICAgICAgY2hlY2tlZDogKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMucmVuZGVyZXIub3B0aW9ucy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkNvbnRvdXJQbGFuZXMgJiYgdGhpcy52YWx1ZVBsYW5lc1BhbmVsLnZpc2libGUgPT09IGZhbHNlKTtcclxuICAgICAgICAgfSxcclxuICAgICAgICAgb25jaGVjazogKGJ1dHRvbjogUmFkaW9idXR0b24pID0+IHtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZVBsYW5lc1BhbmVsLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5vcHRpb25zLmNvbnRvdXJzID0gQ09MT1JfQ09OVE9VUlM7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIub3B0aW9ucy5yZW5kZXJNb2RlID0gYnV0dG9uLmNoZWNrZWQgPyBSZW5kZXJNb2RlLkNvbnRvdXJQbGFuZXMgOiBSZW5kZXJNb2RlLk5vcm1hbDtcclxuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGNvbnRvdXJzU3ViTWVudS5hZGRSYWRpb2J1dHRvbih7XHJcbiAgICAgICAgIGxhYmVsOiAnVmFsdWVzJyxcclxuICAgICAgICAgZ3JvdXA6ICdDb250b3VyR3JvdXAnLFxyXG4gICAgICAgICBjaGVja2VkOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5yZW5kZXJlci5vcHRpb25zLnJlbmRlck1vZGUgPT09IFJlbmRlck1vZGUuQ29udG91clZhbHVlcyAmJiB0aGlzLnZhbHVlUGxhbmVzUGFuZWwudmlzaWJsZSA9PT0gZmFsc2UpO1xyXG4gICAgICAgICB9LFxyXG4gICAgICAgICBvbmNoZWNrOiAoYnV0dG9uOiBSYWRpb2J1dHRvbikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlUGxhbmVzUGFuZWwudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLm9wdGlvbnMuY29udG91cnMgPSBDT0xPUl9DT05UT1VSUztcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5vcHRpb25zLnJlbmRlck1vZGUgPSBidXR0b24uY2hlY2tlZCA/IFJlbmRlck1vZGUuQ29udG91clZhbHVlcyA6IFJlbmRlck1vZGUuTm9ybWFsO1xyXG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGhpZ2hsaWdodFN1Yk1lbnUgPSBzdWJNZW51LmFkZFN1Yk1lbnUoJ0hpZ2hsaWdodHMnKTtcclxuXHJcbiAgICAgIGhpZ2hsaWdodFN1Yk1lbnUuYWRkUmFkaW9idXR0b24oe1xyXG4gICAgICAgICBsYWJlbDogJ1Nob3cnLFxyXG4gICAgICAgICBncm91cDogJ0hpZ2hsaWdodHNHcm91cCcsXHJcbiAgICAgICAgIGNoZWNrZWQ6ICgpID0+IHRoaXMucmVuZGVyZXIub3B0aW9ucy5zaG93SGlnaGxpZ2h0cyAmJiB0aGlzLnJlbmRlcmVyLnJlbmRlck1vZGVDYW5Ub2dnbGVIaWdobGlnaHRzKCksXHJcbiAgICAgICAgIG9uY2hlY2s6IChidXR0b246IFJhZGlvYnV0dG9uKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIub3B0aW9ucy5zaG93SGlnaGxpZ2h0cyA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmVyLm9wdGlvbnMucmVuZGVyTW9kZSA9PT0gUmVuZGVyTW9kZS5FbXBoYXNpemVIaWdobGlnaHRzKSB7XHJcbiAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIub3B0aW9ucy5yZW5kZXJNb2RlID0gUmVuZGVyTW9kZS5Ob3JtYWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBoaWdobGlnaHRTdWJNZW51LmFkZFJhZGlvYnV0dG9uKHtcclxuICAgICAgICAgbGFiZWw6ICdIaWRlJyxcclxuICAgICAgICAgZ3JvdXA6ICdIaWdobGlnaHRzR3JvdXAnLFxyXG4gICAgICAgICBjaGVja2VkOiAoKSA9PiAhdGhpcy5yZW5kZXJlci5vcHRpb25zLnNob3dIaWdobGlnaHRzICYmIHRoaXMucmVuZGVyZXIucmVuZGVyTW9kZUNhblRvZ2dsZUhpZ2hsaWdodHMoKSxcclxuICAgICAgICAgb25jaGVjazogKGJ1dHRvbjogUmFkaW9idXR0b24pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5vcHRpb25zLnNob3dIaWdobGlnaHRzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmVyLm9wdGlvbnMucmVuZGVyTW9kZSA9PT0gUmVuZGVyTW9kZS5FbXBoYXNpemVIaWdobGlnaHRzKSB7XHJcbiAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIub3B0aW9ucy5yZW5kZXJNb2RlID0gUmVuZGVyTW9kZS5Ob3JtYWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBoaWdobGlnaHRTdWJNZW51LmFkZFJhZGlvYnV0dG9uKHtcclxuICAgICAgICAgbGFiZWw6ICdFbXBoYXNpemUnLFxyXG4gICAgICAgICBncm91cDogJ0hpZ2hsaWdodHNHcm91cCcsXHJcbiAgICAgICAgIGNoZWNrZWQ6ICgpID0+IHRoaXMucmVuZGVyZXIub3B0aW9ucy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkVtcGhhc2l6ZUhpZ2hsaWdodHMsXHJcbiAgICAgICAgIG9uY2hlY2s6IChidXR0b246IFJhZGlvYnV0dG9uKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIub3B0aW9ucy5zaG93SGlnaGxpZ2h0cyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIub3B0aW9ucy5yZW5kZXJNb2RlID0gUmVuZGVyTW9kZS5FbXBoYXNpemVIaWdobGlnaHRzO1xyXG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGhpZ2hsaWdodFN1Yk1lbnUuYWRkU2xpZGVyKHtcclxuICAgICAgICAgbGFiZWw6ICdTaGluaW5lc3MnLFxyXG4gICAgICAgICBtaW46IDEsXHJcbiAgICAgICAgIG1heDogNTAsXHJcbiAgICAgICAgIHZhbHVlOiB0aGlzLnJlbmRlcmVyLm9wdGlvbnMuc2hpbmluZXNzLFxyXG4gICAgICAgICBvbmlucHV0OiAoc2xpZGVyOiBTbGlkZXIpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5vcHRpb25zLnNoaW5pbmVzcyA9IHNsaWRlci52YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgbGV0IHNoYWRvd3NTdWJNZW51ID0gc3ViTWVudS5hZGRTdWJNZW51KCdTaGFkb3dzJyk7XHJcbiAgICAgIHNoYWRvd3NTdWJNZW51LmFkZFJhZGlvYnV0dG9uKHtcclxuICAgICAgICAgbGFiZWw6ICdOb3JtYWwnLFxyXG4gICAgICAgICBncm91cDogJ1NoYWRvd0dyb3VwJyxcclxuICAgICAgICAgY2hlY2tlZDogKCkgPT4gdGhpcy5yZW5kZXJlci5vcHRpb25zLnJlbmRlck1vZGUgPT0gUmVuZGVyTW9kZS5Ob3JtYWwsXHJcbiAgICAgICAgIG9uY2hlY2s6IChidXR0b246IFJhZGlvYnV0dG9uKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIub3B0aW9ucy5yZW5kZXJNb2RlID0gUmVuZGVyTW9kZS5Ob3JtYWw7XHJcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBzaGFkb3dzU3ViTWVudS5hZGRSYWRpb2J1dHRvbih7XHJcbiAgICAgICAgIGxhYmVsOiAnSGlnaGxpZ2h0IFRlcm1pbmF0b3InLFxyXG4gICAgICAgICBncm91cDogJ1NoYWRvd0dyb3VwJyxcclxuICAgICAgICAgY2hlY2tlZDogKCkgPT4gdGhpcy5yZW5kZXJlci5vcHRpb25zLnJlbmRlck1vZGUgPT0gUmVuZGVyTW9kZS5IaWdobGlnaHRUZXJtaW5hdG9yLFxyXG4gICAgICAgICBvbmNoZWNrOiAoYnV0dG9uOiBSYWRpb2J1dHRvbikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLm9wdGlvbnMucmVuZGVyTW9kZSA9IFJlbmRlck1vZGUuSGlnaGxpZ2h0VGVybWluYXRvcjtcclxuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHNoYWRvd3NTdWJNZW51LmFkZFJhZGlvYnV0dG9uKHtcclxuICAgICAgICAgbGFiZWw6ICdIaWdobGlnaHQgU2hhZG93JyxcclxuICAgICAgICAgZ3JvdXA6ICdTaGFkb3dHcm91cCcsXHJcbiAgICAgICAgIGNoZWNrZWQ6ICgpID0+IHRoaXMucmVuZGVyZXIub3B0aW9ucy5yZW5kZXJNb2RlID09IFJlbmRlck1vZGUuSGlnaGxpZ2h0U2hhZG93LFxyXG4gICAgICAgICBvbmNoZWNrOiAoYnV0dG9uOiBSYWRpb2J1dHRvbikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLm9wdGlvbnMucmVuZGVyTW9kZSA9IFJlbmRlck1vZGUuSGlnaGxpZ2h0U2hhZG93O1xyXG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgc2hhZG93c1N1Yk1lbnUuYWRkUmFkaW9idXR0b24oe1xyXG4gICAgICAgICBsYWJlbDogJ0xpZ2h0IGFuZCBTaGFkb3cgT25seScsXHJcbiAgICAgICAgIGdyb3VwOiAnU2hhZG93R3JvdXAnLFxyXG4gICAgICAgICBjaGVja2VkOiAoKSA9PiB0aGlzLnJlbmRlcmVyLm9wdGlvbnMucmVuZGVyTW9kZSA9PSBSZW5kZXJNb2RlLkxpZ2h0QW5kU2hhZG93LFxyXG4gICAgICAgICBvbmNoZWNrOiAoYnV0dG9uOiBSYWRpb2J1dHRvbikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLm9wdGlvbnMucmVuZGVyTW9kZSA9IFJlbmRlck1vZGUuTGlnaHRBbmRTaGFkb3c7XHJcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgc3ViTWVudS5hZGRJdGVtKCdQZXJzcGVjdGl2ZS4uLicsICgpID0+IHtcclxuICAgICAgICAgdGhpcy5wZXJzcGVjdGl2ZVBhbmVsLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHN1Yk1lbnUuYWRkSXRlbSgnVmFsdWUgUGxhbmVzLi4uJywgKCkgPT4ge1xyXG4gICAgICAgICB0aGlzLnZhbHVlUGxhbmVzUGFuZWwudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgbGlnaHRTdWJNZW51ID0gc3ViTWVudS5hZGRTdWJNZW51KCdMaWdodCcpO1xyXG4gICAgICBsaWdodFN1Yk1lbnUuYWRkUmFkaW9idXR0b24oe1xyXG4gICAgICAgICBsYWJlbDogJ0RpcmVjdGlvbmFsIExpZ2h0JyxcclxuICAgICAgICAgZ3JvdXA6ICdMaWdodFR5cGVHcm91cCcsXHJcbiAgICAgICAgIGNoZWNrZWQ6ICgpID0+IHRoaXMucmVuZGVyZXIub3B0aW9ucy5saWdodFR5cGUgPT09IExpZ2h0VHlwZS5EaXJlY3Rpb25hbCxcclxuICAgICAgICAgb25jaGVjazogKGJ1dHRvbjogUmFkaW9idXR0b24pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5vcHRpb25zLmxpZ2h0VHlwZSA9IExpZ2h0VHlwZS5EaXJlY3Rpb25hbDtcclxuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGxpZ2h0U3ViTWVudS5hZGRSYWRpb2J1dHRvbih7XHJcbiAgICAgICAgIGxhYmVsOiAnUG9pbnQgTGlnaHQnLFxyXG4gICAgICAgICBncm91cDogJ0xpZ2h0VHlwZUdyb3VwJyxcclxuICAgICAgICAgY2hlY2tlZDogKCkgPT4gdGhpcy5yZW5kZXJlci5vcHRpb25zLmxpZ2h0VHlwZSA9PT0gTGlnaHRUeXBlLlBvaW50LFxyXG4gICAgICAgICBvbmNoZWNrOiAoYnV0dG9uOiBSYWRpb2J1dHRvbikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLm9wdGlvbnMubGlnaHRUeXBlID0gTGlnaHRUeXBlLlBvaW50O1xyXG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgbGlnaHRTdWJNZW51LmFkZFNsaWRlcih7XHJcbiAgICAgICAgIGxhYmVsOiAnRmFsbG9mZicsXHJcbiAgICAgICAgIG1pbjogMCxcclxuICAgICAgICAgbWF4OiAwLjksXHJcbiAgICAgICAgIHZhbHVlOiB0aGlzLnJlbmRlcmVyLm9wdGlvbnMuZmFsbG9mZixcclxuICAgICAgICAgb25pbnB1dDogKHNsaWRlcjogU2xpZGVyKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIub3B0aW9ucy5mYWxsb2ZmID0gc2xpZGVyLnZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBsaWdodFN1Yk1lbnUuYWRkU2xpZGVyKHtcclxuICAgICAgICAgbGFiZWw6ICdJbnRlbnNpdHknLFxyXG4gICAgICAgICBtaW46IDAuNSxcclxuICAgICAgICAgbWF4OiAxLjUsXHJcbiAgICAgICAgIHZhbHVlOiB0aGlzLnJlbmRlcmVyLm9wdGlvbnMubGlnaHRJbnRlbnNpdHksXHJcbiAgICAgICAgIG9uaW5wdXQ6IChzbGlkZXI6IFNsaWRlcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLm9wdGlvbnMubGlnaHRJbnRlbnNpdHkgPSBzbGlkZXIudmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGxpZ2h0U3ViTWVudS5hZGRTbGlkZXIoe1xyXG4gICAgICAgICBsYWJlbDogJ0FtYmllbnQgSW50ZW5zaXR5JyxcclxuICAgICAgICAgbWluOiAwLjAsXHJcbiAgICAgICAgIG1heDogMC40LFxyXG4gICAgICAgICB2YWx1ZTogdGhpcy5yZW5kZXJlci5vcHRpb25zLnZhbHVlUmFuZ2UuYW1iaWVudEludGVuc2l0eSxcclxuICAgICAgICAgb25pbnB1dDogKHNsaWRlcjogU2xpZGVyKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIub3B0aW9ucy52YWx1ZVJhbmdlLmFtYmllbnRJbnRlbnNpdHkgPSBzbGlkZXIudmFsdWU7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByYW5nZSA9IDAuNjtcclxuICAgICAgICAgICAgY29uc3QgYmFzZVZhbCA9IHRoaXMuYmFzZUJhY2tncm91bmRDb2xvci52O1xyXG4gICAgICAgICAgICBjb25zdCBuZXdWYWwgPSAoYmFzZVZhbCAtIHJhbmdlIC8gMikgKyByYW5nZSAqIHNsaWRlci52YWx1ZUFzUGVyY2VudDtcclxuICAgICAgICAgICAgY29uc3QgbmV3Q29sb3IgPSBuZXcgaHN2Q29sb3IoW3RoaXMuYmFzZUJhY2tncm91bmRDb2xvci5oLCB0aGlzLmJhc2VCYWNrZ3JvdW5kQ29sb3IucywgbmV3VmFsXSk7XHJcbiAgICAgICAgICAgICg8SFRNTENhbnZhc0VsZW1lbnQ+dGhpcy5nbC5jYW52YXMpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG5ld0NvbG9yLnRvSHRtbENvbG9yKCkudG9Dc3MoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHN1Yk1lbnUgPSBtZW51YmFyLmFkZFN1Yk1lbnUoJ09wdGlvbnMnLCAnT3B0aW9ucycpO1xyXG5cclxuICAgICAgbGV0IHJlc2V0U3ViTWVudSA9IHN1Yk1lbnUuYWRkU3ViTWVudSgnUmVzZXQnKTtcclxuICAgICAgcmVzZXRTdWJNZW51LmFkZEl0ZW0oJ0FsbCcsICgpID0+IHtcclxuICAgICAgICAgdGhpcy5yZW5kZXJlci5yZXNldChSZXNldC5BbGwpO1xyXG4gICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJlc2V0U3ViTWVudS5hZGRJdGVtKCdMaWdodHMnLCAoKSA9PiB7XHJcbiAgICAgICAgIHRoaXMucmVuZGVyZXIucmVzZXQoUmVzZXQuTGlnaHRzKTtcclxuICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXNldFN1Yk1lbnUuYWRkSXRlbSgnVmlldycsICgpID0+IHtcclxuICAgICAgICAgdGhpcy5yZW5kZXJlci5yZXNldChSZXNldC5WaWV3KTtcclxuICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXNldFN1Yk1lbnUuYWRkSXRlbSgnUmVuZGVyaW5nJywgKCkgPT4ge1xyXG4gICAgICAgICB0aGlzLnJlbmRlcmVyLnJlc2V0KFJlc2V0LlJlbmRlcmluZyk7XHJcbiAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGxldCBmbG9vclN1Yk1lbnUgPSBzdWJNZW51LmFkZFN1Yk1lbnUoJ0Zsb29yJyk7XHJcbiAgICAgIGZsb29yU3ViTWVudS5hZGRDaGVja2JveCh7XHJcbiAgICAgICAgIGxhYmVsOiAnU2hvdyBGbG9vcicsXHJcbiAgICAgICAgIGNoZWNrZWQ6ICgpID0+IHRoaXMucmVuZGVyZXIuc2hvd0Zsb29yLFxyXG4gICAgICAgICBvbmNoZWNrOiAoY2hlY2tib3g6IENoZWNrYm94KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2hvd0Zsb29yID0gY2hlY2tib3guY2hlY2tlZDtcclxuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGZsb29yU3ViTWVudS5hZGRDaGVja2JveCh7XHJcbiAgICAgICAgIGxhYmVsOiAnU2hvdyBHcmlkJyxcclxuICAgICAgICAgY2hlY2tlZDogKCkgPT4gdGhpcy5yZW5kZXJlci5zaG93R3JpZCxcclxuICAgICAgICAgb25jaGVjazogKGNoZWNrYm94OiBDaGVja2JveCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNob3dHcmlkID0gY2hlY2tib3guY2hlY2tlZDtcclxuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHN1Yk1lbnUuYWRkSXRlbSgnUmV2ZXJzZSBPYmplY3QnLCAoKSA9PiB7XHJcbiAgICAgICAgIHRoaXMucmVuZGVyZXIudE9iai5yZXZlcnNlKCk7XHJcbiAgICAgICAgIHRoaXMucmVuZGVyZXIub2JqLnVwbG9hZFRyaWFuZ2xlcygpO1xyXG4gICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBsZXQgcm90YXRlU3ViTWVudSA9IHN1Yk1lbnUuYWRkU3ViTWVudSgnUm90YXRpb24nKTtcclxuICAgICAgcm90YXRlU3ViTWVudS5hZGRDaGVja2JveCh7XHJcbiAgICAgICAgIGxhYmVsOiAnS2VlcCB0aGUgbGlnaHQgcG9pbnRpbmcgYXQgdGhlIHNhbWUgc3BvdCBvbiB0aGUgbW9kZWwnLFxyXG4gICAgICAgICBjaGVja2VkOiAoKSA9PiB0aGlzLnJvdGF0ZUxpZ2h0V2l0aE9iamVjdCxcclxuICAgICAgICAgb25jaGVjazogKGNoZWNrYm94OiBDaGVja2JveCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJvdGF0ZUxpZ2h0V2l0aE9iamVjdCA9IGNoZWNrYm94LmNoZWNrZWQ7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHJvdGF0ZVN1Yk1lbnUuYWRkQ2hlY2tib3goe1xyXG4gICAgICAgICBsYWJlbDogJ1JvdGF0ZSBtb2RlbCBpbmRlcGVuZGVudCBvZiB0aGUgZmxvb3InLFxyXG4gICAgICAgICBjaGVja2VkOiAoKSA9PiB0aGlzLnJlbmRlcmVyLmxvY2tGbG9vcixcclxuICAgICAgICAgb25jaGVjazogKGNoZWNrYm94OiBDaGVja2JveCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmxvY2tGbG9vciA9IGNoZWNrYm94LmNoZWNrZWQ7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgb3B0aW1pemUobm9ybWFsVHlwZTogTm9ybWFsVHlwZSkge1xyXG5cclxuICAgICAgbGV0IG9iaiA9IHRoaXMucmVuZGVyZXIub2JqO1xyXG4gICAgICBsZXQgb2xkTnVtVmVydGljZXMgPSBvYmoudE9iai5udW1WZXJ0aWNlcztcclxuXHJcbiAgICAgIG9iai5vcHRpbWl6ZShub3JtYWxUeXBlKTtcclxuXHJcbiAgICAgIGxldCBuZXdOdW1WZXJ0aWNlcyA9IG9iai50T2JqLm51bVZlcnRpY2VzO1xyXG5cclxuICAgICAgLy9sZXQgbXNnID0gJ09wdGltaXplZCAuT0JKIGNvbnRlbnQgY29waWVkIHRvIGNsaXBib2FyZFxcblxcbic7XHJcbiAgICAgIGxldCBtc2cgPSAnT3B0aW1pemVkIC5PQkogY29udGVudFxcblxcbic7XHJcbiAgICAgIG1zZyArPSAnTnVtIFRyaWFuZ2xlczogJyArIG9iai50T2JqLm51bVRyaWFuZ2xlcyArICdcXG4nO1xyXG4gICAgICBtc2cgKz0gJ051bSBWZXJ0aWNlczogJyArIG9sZE51bVZlcnRpY2VzICsgJyB0byAnICsgbmV3TnVtVmVydGljZXMgKyAnLCAnICsgKDEwMCAqIG5ld051bVZlcnRpY2VzIC8gb2xkTnVtVmVydGljZXMpLnRvRml4ZWQoKSArICcgJVxcbic7XHJcbiAgICAgIGFsZXJ0KG1zZyk7XHJcblxyXG4gICAgICAvL2xldCBzdHIgPSBvYmoudE9iai50b09ialN0cmluZyg2KTtcclxuICAgICAgLy9uYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChzdHIpLnRoZW4oKCkgPT4geyBhbGVydChtc2cpIH0pO1xyXG5cclxuICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgdXBkYXRlU2l6ZSgpIHtcclxuXHJcbiAgICAgIGxldCBnbCA9IHRoaXMuZ2w7XHJcblxyXG4gICAgICBsZXQgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgbGV0IGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgbGV0IG1lbnViYXJIZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnTWVudWJhcicpLmNsaWVudEhlaWdodDtcclxuXHJcbiAgICAgIGxldCBwYW5lbEhlaWdodCA9IDA7XHJcbiAgICAgIGlmICh0aGlzLnBlcnNwZWN0aXZlUGFuZWwudmlzaWJsZSkge1xyXG4gICAgICAgICBwYW5lbEhlaWdodCA9IHRoaXMucGVyc3BlY3RpdmVQYW5lbC5kaXYuY2xpZW50SGVpZ2h0O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKHRoaXMudmFsdWVQbGFuZXNQYW5lbC52aXNpYmxlKSB7XHJcbiAgICAgICAgIHBhbmVsSGVpZ2h0ID0gdGhpcy52YWx1ZVBsYW5lc1BhbmVsLmRpdi5jbGllbnRIZWlnaHQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGdsLmNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICBnbC5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0IC0gbWVudWJhckhlaWdodCAtIHBhbmVsSGVpZ2h0O1xyXG4gICAgICB0aGlzLm92ZXJsYXkud2lkdGggPSBnbC5jYW52YXMud2lkdGg7XHJcbiAgICAgIHRoaXMub3ZlcmxheS5oZWlnaHQgPSBnbC5jYW52YXMuaGVpZ2h0O1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGxvYWRNb2RlbChmaWxlOiBzdHJpbmcpIHtcclxuXHJcbiAgICAgIGNvbnN0IGxjID0gZmlsZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICBpZiAobGMuZW5kc1dpdGgoJy5vYmonKSB8fCBsYy5lbmRzV2l0aCgnLmJsb2InKSkge1xyXG5cclxuICAgICAgICAgY29uc3Qgc3RhdHVzRnVuYyA9IChzdGF0dXM6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm92ZXJsYXkuY2xlYXIoKTtcclxuICAgICAgICAgICAgdGhpcy5vdmVybGF5LmZpbGxUZXh0KHN0YXR1cyk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIHRoaXMubG9hZGVyLmxvYWRNb2RlbEZpbGUoZmlsZSwgc3RhdHVzRnVuYylcclxuICAgICAgICAgICAgLnRoZW4oKHRPYmopID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgIHRoaXMucGVyc3BlY3RpdmVQYW5lbC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgIHRoaXMudmFsdWVQbGFuZXNQYW5lbC52aXNpYmxlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldE1vZGVsKHRPYmopO1xyXG4gICAgICAgICAgICAgICB0aGlzLnBlcnNwZWN0aXZlUGFuZWwuc2V0TW9kZWwodE9iaik7XHJcbiAgICAgICAgICAgICAgIHRoaXMubG9hZGVyLm9yaWVudCh0aGlzLnJlbmRlcmVyLm9iaik7XHJcblxyXG4gICAgICAgICAgICAgICBpZiAoZmlsZS5zdGFydHNXaXRoKCdIZWFkJykgfHwgZmlsZS5zdGFydHNXaXRoKCdUZWFwb3QnKSB8fCBmaWxlLnN0YXJ0c1dpdGgoJ01hbGVfMDInKSkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLm9wdGlvbnMudXNlQ3VsbGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICB0aGlzLmFuaW1hdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgIHRoaXMucG9pbnRlck1vZGUgPSBQb2ludGVyTW9kZS5WaWV3O1xyXG4gICAgICAgICAgICAgICBpZiAoIXRoaXMuYW5pbWF0aW9uRnJhbWUpIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25GcmFtZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLnRpY2soKSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgIGxldCBib3ggPSBCb3VuZGluZ0JveC5pbmZpbml0ZTtcclxuICAgICAgICAgICAgICAgYm94Lm1heC54ID0gNjIuMTtcclxuICAgICAgICAgICAgICAgdGhpcy50cmltKHRPYmosIGJveCk7XHJcblxyXG4gICAgICAgICAgICAgICB0aGlzLmxvYWRlci5sb2FkTW9kZWxGaWxlKCdTdWJUb29sMy5ibG9iJywgc3RhdHVzRnVuYykudGhlbigodE9iajIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgdE9iai5jb21iaW5lKHRPYmoyKTtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRPYmo7XHJcbiAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldE1vZGVsKHRPYmopO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLnRpY2soKSk7XHJcbiAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChsYyA9PT0gJ3NwaGVyZScpIHtcclxuICAgICAgICAgbGV0IHRPYmogPSBuZXcgVHJpYW5nbGVPYmpCdWlsZGVyKCk7XHJcbiAgICAgICAgIHRPYmouYWRkU3BoZXJlKDEwMCwgMSwgbmV3IFZlYzMoWzAsIDAsIDBdKSk7XHJcbiAgICAgICAgIHRPYmoub3B0aW1pemUoTm9ybWFsVHlwZS5TbW9vdGgpO1xyXG4gICAgICAgICB0aGlzLnJlbmRlcmVyLnNldE1vZGVsKHRPYmopO1xyXG4gICAgICAgICB0aGlzLnBlcnNwZWN0aXZlUGFuZWwuc2V0TW9kZWwodE9iaik7XHJcbiAgICAgICAgIHRoaXMuYW5pbWF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgdGhpcy5wb2ludGVyTW9kZSA9IFBvaW50ZXJNb2RlLlZpZXc7XHJcbiAgICAgICAgIGlmICghdGhpcy5hbmltYXRpb25GcmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMudGljaygpKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgLy8gVE9ETyBtdWx0aSBsaW5lIGVycm9yIG1lc3NhZ2VzIG5vdCBzdXBwb3J0ZWRcclxuICAgICAgICAgdGhpcy5vdmVybGF5LmNsZWFyKCk7XHJcbiAgICAgICAgIHRoaXMub3ZlcmxheS5maWxsVGV4dCgnVW5rbm93biBNb2RlbDonICsgZmlsZSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSB0b2dnbGVNb2RlKCkge1xyXG4gICAgICBzd2l0Y2ggKHRoaXMucG9pbnRlck1vZGUpIHtcclxuICAgICAgICAgY2FzZSBQb2ludGVyTW9kZS5WaWV3OlxyXG4gICAgICAgICAgICB0aGlzLnBvaW50ZXJNb2RlID0gUG9pbnRlck1vZGUuTGlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYmFsbENvbG9yID0gdGhpcy5yZW5kZXJlci55ZWxsb3c7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgY2FzZSBQb2ludGVyTW9kZS5MaWdodDpcclxuICAgICAgICAgICAgdGhpcy5wb2ludGVyTW9kZSA9IFBvaW50ZXJNb2RlLlZpZXc7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYmFsbENvbG9yID0gZ2xDb2xvcjMubW9kZWxXaGl0ZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgcm90YXRlTGlnaHQoeFJhZDogbnVtYmVyLCB5UmFkOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5yZW5kZXJlci5yb3RhdGVMaWdodCh4UmFkLCB5UmFkKTtcclxuXHJcbiAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHJvdGF0ZU9iamVjdHMoeFJhZDogbnVtYmVyLCB5UmFkOiBudW1iZXIpIHtcclxuXHJcbiAgICAgIC8vIGdldCB0aGUgbGlnaHQgdmVjdG9yIHdpdGggbW9kZWwgdHJhbnNmb3JtYXRpb24gdW5kb25lXHJcbiAgICAgIGxldCB2ZWMgPSBWZWM0LmZyb21WZWMzKHRoaXMucmVuZGVyZXIub3B0aW9ucy5saWdodFBvcywgMSk7XHJcbiAgICAgIHZlYyA9IHRoaXMucmVuZGVyZXIub2JqLm1vZGVsLmludmVyc2UoKS5tdWx0Vih2ZWMpO1xyXG5cclxuICAgICAgaWYgKHRoaXMucmVuZGVyZXIubG9ja0Zsb29yKSB7XHJcblxyXG4gICAgICAgICAvLyByb3RhdGUgaW4gYWxsIGRpcmVjdGlvbnMgaWYgd2UncmUganVzdCByb3RhdGluZyB0aGUgb2JqZWN0IGluIHNwYWNlXHJcbiAgICAgICAgIHRoaXMucmVuZGVyZXIucm90WCh5UmFkKTtcclxuICAgICAgICAgdGhpcy5yZW5kZXJlci5yb3RZKHhSYWQpO1xyXG5cclxuICAgICAgICAgaWYgKHRoaXMucm90YXRlTGlnaHRXaXRoT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIC8vIGFwcGx5IHRoZSBjaGFuZ2VzIHRvIHRoZSBsaWdodFxyXG4gICAgICAgICAgICB2ZWMgPSB0aGlzLnJlbmRlcmVyLm9iai5tb2RlbC5tdWx0Vih2ZWMpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLm9wdGlvbnMubGlnaHRQb3MgPSB2ZWMueHl6O1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgICAvLyBpZiB0aGUgZmxvb3IgbW92ZXMgd2l0aCB0aGUgb2JqZWN0LCB0aGVuIHVwLWRvd24gbW92ZW1lbnQgdGlsdHMgdGhlXHJcbiAgICAgICAgIC8vIHdob2xlIHNjZW5lIHdoaWxlIGxlZnQtcmlnaHQgbW92ZW1lbnQgb25seSBzcGlucyB0aGUgbW9kZWxcclxuICAgICAgICAgdGhpcy5yZW5kZXJlci5yb3RYKHlSYWQpO1xyXG5cclxuICAgICAgICAgaWYgKHRoaXMucm90YXRlTGlnaHRXaXRoT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucHJlUm90WSh4UmFkKTtcclxuICAgICAgICAgICAgdmVjID0gdGhpcy5yZW5kZXJlci5vYmoubW9kZWwubXVsdFYodmVjKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmVjID0gdGhpcy5yZW5kZXJlci5vYmoubW9kZWwubXVsdFYodmVjKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5wcmVSb3RZKHhSYWQpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICAvLyBhcHBseSB0aGUgY2hhbmdlcyB0byB0aGUgbGlnaHRcclxuICAgICAgICAgdGhpcy5yZW5kZXJlci5vcHRpb25zLmxpZ2h0UG9zID0gdmVjLnh5ejtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIG9uRHJhZyhwb3M6IFZlYzIsIGRlbHRhOiBWZWMyKSB7XHJcbiAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG5cclxuICAgICAgaWYgKHRoaXMucG9pbnRlck1vZGUgPT09IFBvaW50ZXJNb2RlLlZpZXcpIHtcclxuICAgICAgICAgdGhpcy5yb3RhdGVPYmplY3RzKC1kZWx0YS54ICogMC4wMSwgLWRlbHRhLnkgKiAwLjAxKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmICh0aGlzLnBvaW50ZXJNb2RlID09PSBQb2ludGVyTW9kZS5MaWdodCkge1xyXG4gICAgICAgICB0aGlzLnJvdGF0ZUxpZ2h0KC1kZWx0YS54ICogMC4wMSwgLWRlbHRhLnkgKiAwLjAxKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogUHJvY2Vzc2VzIGEgY2xpY2svdG91Y2ggZXZlbnQgYXQgdGhlIGRlc2lnbmF0ZWQgY29vcmRpbmF0ZXMuXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0geCBUaGUgeCBjb29yZGluYXRlLlxyXG4gICAgKiBAcGFyYW0geSBUaGUgeSBjb29yZGluYXRlLlxyXG4gICAgKiBAcmV0dXJucyB0cnVlIGlmIGEgaGl0IG9uIG9uZSBvZiB0aGUgdmlld3Mgb2NjdXJzLlxyXG4gICAgKi9cclxuICAgcHJpdmF0ZSBvbkNsaWNrKHBvczogVmVjMik6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgbGV0IGNhbnZhc1dpZHRoID0gdGhpcy5nbC5jYW52YXMud2lkdGg7XHJcbiAgICAgIGxldCBjYW52YXNIZWlnaHQgPSB0aGlzLmdsLmNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgIGxldCBjbGlwU3BhY2UgPSB0aGlzLnJlbmRlcmVyLm9wdGlvbnMuY2FtZXJhLmdldENsaXBTcGFjZSh0aGlzLmdsKTtcclxuICAgICAgbGV0IG1pbmlXaWR0aCA9IHRoaXMucmVuZGVyZXIubWluaVNpemUgKiAoMiAvIGNsaXBTcGFjZS53aWR0aCkgKiBjYW52YXNXaWR0aDtcclxuICAgICAgbGV0IG1pbmlIZWlnaHQgPSB0aGlzLnJlbmRlcmVyLm1pbmlTaXplICogKDIgLyBjbGlwU3BhY2UuaGVpZ2h0KSAqIGNhbnZhc0hlaWdodDtcclxuXHJcbiAgICAgIGlmIChwb3MueCA8IG1pbmlXaWR0aCAmJiBwb3MueSA8IG1pbmlIZWlnaHQpIHtcclxuICAgICAgICAgdGhpcy50b2dnbGVNb2RlKCk7XHJcbiAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBub3QgaGFuZGxlZFxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgb25TY2FsZShzY2FsZTogbnVtYmVyLCBjaGFuZ2U6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLm9wdGlvbnMuY2FtZXJhLnpvb20oY2hhbmdlKTtcclxuICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgb25Sb3RhdGUoYW5nbGU6IG51bWJlciwgZGVsdGE6IG51bWJlcikge1xyXG4gICAgICAvLyBnZXQgdGhlIGxpZ2h0IHZlY3RvciB3aXRoIG1vZGVsIHRyYW5zZm9ybWF0aW9uIHVuZG9uZVxyXG4gICAgICBsZXQgdmVjID0gVmVjNC5mcm9tVmVjMyh0aGlzLnJlbmRlcmVyLm9wdGlvbnMubGlnaHRQb3MsIDEpO1xyXG4gICAgICB2ZWMgPSB0aGlzLnJlbmRlcmVyLm9iai5tb2RlbC5pbnZlcnNlKCkubXVsdFYodmVjKTtcclxuXHJcbiAgICAgIHRoaXMucmVuZGVyZXIucm90WihkZWx0YSk7XHJcblxyXG4gICAgICAvLyBhcHBseSB0aGUgdXBkYXRlZCB0cmFuc2Zvcm0gXHJcbiAgICAgIGlmICh0aGlzLnJvdGF0ZUxpZ2h0V2l0aE9iamVjdCkge1xyXG4gICAgICAgICB2ZWMgPSB0aGlzLnJlbmRlcmVyLm9iai5tb2RlbC5tdWx0Vih2ZWMpO1xyXG4gICAgICAgICB0aGlzLnJlbmRlcmVyLm9wdGlvbnMubGlnaHRQb3MgPSB2ZWMueHl6O1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBvblRyYW5zbGF0ZShkZWx0YTogVmVjMikge1xyXG5cclxuICAgICAgLy8gVE9ETyBob3cgY2FuIHRoaXMgc2NhbGluZyBiZSBkZXRlY3RlZCBmcm9tIGphdmFzY3JpcHQ/XHJcbiAgICAgIGxldCBmYWN0b3IgPSAxO1xyXG4gICAgICBpZiAoaXNNb2JpbGUpIHtcclxuICAgICAgICAgZmFjdG9yID0gMjtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IGNsaXBTcGFjZSA9IHRoaXMucmVuZGVyZXIub3B0aW9ucy5jYW1lcmEuZ2V0Q2xpcFNwYWNlKHRoaXMuZ2wpO1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLm9wdGlvbnMuY2FtZXJhLnRyYW5zbGF0ZShuZXcgVmVjMihbXHJcbiAgICAgICAgIGZhY3RvciAqIGNsaXBTcGFjZS53aWR0aCAqIGRlbHRhLnggLyB0aGlzLmdsLmNhbnZhcy53aWR0aCxcclxuICAgICAgICAgZmFjdG9yICogY2xpcFNwYWNlLmhlaWdodCAqIGRlbHRhLnkgLyB0aGlzLmdsLmNhbnZhcy5oZWlnaHRcclxuICAgICAgXSkpO1xyXG4gICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHRpY2soKSB7XHJcblxyXG4gICAgICB0aGlzLmZwcy50aWNrKCk7XHJcblxyXG4gICAgICBpZiAodGhpcy5kaXJ0eSkge1xyXG4gICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcigpO1xyXG4gICAgICAgICBpZiAodGhpcy5wZXJzcGVjdGl2ZVBhbmVsLnZpc2libGUpIHtcclxuICAgICAgICAgICAgLy8gc3luY2hyb25pemUgdGhlIHJvdGF0aW9uIG1hdHJpY2VzXHJcbiAgICAgICAgICAgIHRoaXMucGVyc3BlY3RpdmVQYW5lbC5yZW5kZXIodGhpcy5yZW5kZXJlci5vYmoubW9kZWwuY2xvbmUoKSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5hbmltYXRlKSB7XHJcbiAgICAgICAgIGlmICh0aGlzLmxvYWRlci5sb2FkaW5nID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0aGlzLm92ZXJsYXkuY2xlYXIoKTtcclxuICAgICAgICAgICAgdGhpcy5vdmVybGF5LmZpbGxUZXh0KHRoaXMuZnBzLnJhdGUudG9GaXhlZCgpICsgJyBmcHMgJyArIHRoaXMuZnBzLm1zLnRvRml4ZWQoMSkgKyAnIG1zJywgVGV4dExvY2F0aW9uLkJvdHRvbUxlZnQpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICAvLyBnZXQgdGhlIGxpZ2h0IHZlY3RvciB3aXRoIG1vZGVsIHRyYW5zZm9ybWF0aW9uIHVuZG9uZVxyXG4gICAgICAgICBsZXQgdmVjID0gVmVjNC5mcm9tVmVjMyh0aGlzLnJlbmRlcmVyLm9wdGlvbnMubGlnaHRQb3MsIDEpO1xyXG4gICAgICAgICB2ZWMgPSB0aGlzLnJlbmRlcmVyLm9iai5tb2RlbC5pbnZlcnNlKCkubXVsdFYodmVjKTtcclxuXHJcbiAgICAgICAgIC8vIGFuaW1hdGVcclxuICAgICAgICAgdGhpcy5yZW5kZXJlci5wcmVSb3RZKHRvUmFkKC0xKSk7XHJcblxyXG4gICAgICAgICAvLyBhcHBseSB0aGUgdXBkYXRlZCB0cmFuc2Zvcm0gXHJcbiAgICAgICAgIGlmICh0aGlzLnJvdGF0ZUxpZ2h0V2l0aE9iamVjdCkge1xyXG4gICAgICAgICAgICB2ZWMgPSB0aGlzLnJlbmRlcmVyLm9iai5tb2RlbC5tdWx0Vih2ZWMpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLm9wdGlvbnMubGlnaHRQb3MgPSB2ZWMueHl6O1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMudGljaygpKTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBzYXZlKCkge1xyXG4gICAgICBsZXQgdE9iaiA9IHRoaXMucmVuZGVyZXIudE9iajtcclxuXHJcbiAgICAgIGxldCBuYW1lID0gdE9iai5uYW1lLnNwbGl0KCcuJylbMF0gKyAnLmJsb2InO1xyXG4gICAgICB0T2JqLm5hbWUgPSBuYW1lO1xyXG4gICAgICBzYXZlQXModE9iai50b0Jsb2IoKSwgbmFtZSk7XHJcbiAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBUcmlhbmdsZU9iaiwgTm9ybWFsVHlwZSB9IGZyb20gJy4uLy4uL1V0aWwzRC9UcmlhbmdsZU9iaic7XHJcbmltcG9ydCB7IGdsQXR0cmlidXRlQnVmZmVyIH0gZnJvbSAnLi4vLi4vZ2wvZ2xBdHRyaWJ1dGVCdWZmZXInO1xyXG5pbXBvcnQgeyBnbEluZGV4QnVmZmVyIH0gZnJvbSAnLi4vLi4vZ2wvZ2xJbmRleEJ1ZmZlcic7XHJcbmltcG9ydCB7IE1hdDQgfSBmcm9tICcuLi8uLi9VdGlsM0QvTWF0JztcclxuaW1wb3J0IHsgQm91bmRpbmdCb3ggfSBmcm9tICcuLi8uLi9VdGlsM0QvQm91bmRpbmdCb3gnO1xyXG5pbXBvcnQgeyBWZWMzLCBWZWM0IH0gZnJvbSAnLi4vLi4vVXRpbDNEL1ZlYyc7XHJcbmltcG9ydCB7IGdsVW5pZm9ybSB9IGZyb20gJy4uLy4uL2dsL2dsVW5pZm9ybSc7XHJcblxyXG5leHBvcnQgY2xhc3MgZ2xPYmplY3Qge1xyXG4gICBwcml2YXRlIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQgfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0O1xyXG4gICBwdWJsaWMgcmVhZG9ubHkgdE9iajogVHJpYW5nbGVPYmo7XHJcbiAgIHByaXZhdGUgcHJvZ3JhbTogV2ViR0xQcm9ncmFtO1xyXG4gICBwcml2YXRlIHZlcnRleEJ1ZmZlcjogZ2xBdHRyaWJ1dGVCdWZmZXI7XHJcbiAgIHByaXZhdGUgbm9ybWFsQnVmZmVyOiBnbEF0dHJpYnV0ZUJ1ZmZlcjtcclxuICAgcHJpdmF0ZSBpbmRleEJ1ZmZlcjogZ2xJbmRleEJ1ZmZlcjtcclxuXHJcbiAgIC8vIHRoaXMgbWF0cml4IG5vcm1hbHMgdGhlIG9iamVjdCBzbyB0aGF0IGFsbCBvYmplY3QgYXJlIGNlbnRlcmVkXHJcbiAgIC8vIGFib3V0IHRoZSBvcmlnaW4gd2l0aCBkaWFnb25hbCBsZW5ndGggb2YgMiB1bml0c1xyXG4gICBwdWJsaWMgbm9ybWFsaXplID0gTWF0NC5pZGVudGl0eTtcclxuXHJcbiAgIC8vIHRoaXMgaXMgdGhlIHN0YW5kYXJkIFwibW9kZWxcIiBtYXRyaXhcclxuICAgcHVibGljIG1vZGVsID0gTWF0NC5pZGVudGl0eTtcclxuXHJcbiAgIHB1YmxpYyBnZXQgbmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy50T2JqLm5hbWU7XHJcbiAgIH1cclxuXHJcbiAgIC8qXHJcbiAgIHB1YmxpYyBnZXRCb3VuZGluZ1B0cygpOiBCb3VuZGluZ1B0cyB7XHJcbiAgICAgIC8vcmV0dXJuIHRoaXMudE9iai5nZXRCb3VuZGluZ1B0cygpO1xyXG4gICAgICBsZXQgcHRzID0gdGhpcy50T2JqLmdldEJvdW5kaW5nUHRzKCk7XHJcbiAgICAgIGxldCBwID0gbmV3IFByb2ZpbGVyKCk7XHJcbiAgICAgIC8vbGV0IGJwID0gcHRzLm11bHRNKHRoaXMubm9ybWFsaXplLm11bHRNKHRoaXMubW9kZWwpKTtcclxuICAgICAgLy9sZXQgYnAgPSBwdHMubXVsdE0odGhpcy5tb2RlbC5tdWx0TSh0aGlzLm5vcm1hbGl6ZSkpO1xyXG4gICAgICBsZXQgYnAgPSBwdHMubXVsdE0odGhpcy5ub3JtYWxpemUpLm11bHRNKHRoaXMubW9kZWwpO1xyXG4gICAgICAvL3AubG9nKCdtdWx0Jyk7XHJcbiAgICAgIHJldHVybiBicDtcclxuICAgfVxyXG4gICAqL1xyXG5cclxuICAgcHVibGljIGdldEJvdW5kaW5nQm94KCk6IEJvdW5kaW5nQm94IHtcclxuICAgICAgcmV0dXJuIHRoaXMudE9iai5ib3gubXVsdE0odGhpcy5ub3JtYWxpemUpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IoXHJcbiAgICAgIGdsQ3R4OiBXZWJHTFJlbmRlcmluZ0NvbnRleHQgfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LFxyXG4gICAgICB0T2JqOiBUcmlhbmdsZU9iaixcclxuICAgICAgcHJvZ3JhbTogV2ViR0xQcm9ncmFtXHJcbiAgICkge1xyXG5cclxuICAgICAgdGhpcy5nbCA9IGdsQ3R4O1xyXG4gICAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XHJcblxyXG4gICAgICBjb25zdCBleHQgPSBnbC5nZXRFeHRlbnNpb24oJ09FU19lbGVtZW50X2luZGV4X3VpbnQnKTtcclxuXHJcbiAgICAgIHRoaXMudE9iaiA9IHRPYmo7XHJcbiAgICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07XHJcblxyXG4gICAgICB0aGlzLmNyZWF0ZUJ1ZmZlcnMoKTtcclxuICAgICAgdGhpcy51cGxvYWRUcmlhbmdsZXMoKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGF1dG9TaXplKGNlbnRlcjogVmVjMywgc2l6ZTogbnVtYmVyKTogdm9pZCB7XHJcblxyXG4gICAgICBjb25zdCBvYmpDZW50ZXIgPSB0aGlzLnRPYmouY2VudGVyO1xyXG4gICAgICB0aGlzLm5vcm1hbGl6ZSA9IE1hdDQuaWRlbnRpdHk7XHJcbiAgICAgIHRoaXMubm9ybWFsaXplLnRyYW5zbGF0ZShuZXcgVmVjMyhbY2VudGVyLnggLSBvYmpDZW50ZXIueCwgY2VudGVyLnkgLSBvYmpDZW50ZXIueSwgY2VudGVyLnogLSBvYmpDZW50ZXIuel0pKTtcclxuICAgICAgdGhpcy5ub3JtYWxpemUuc2NhbGUoc2l6ZSAvIHRoaXMudE9iai5kaWFnb25hbCk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgY3JlYXRlQnVmZmVycygpIHtcclxuICAgICAgY29uc3QgZ2wgPSB0aGlzLmdsO1xyXG5cclxuICAgICAgLy8gY3JlYXRlIGJ1ZmZlcnMgKGFuZCBhc3NvY2lhdGVkIGF0dHJpYnV0ZXMpXHJcbiAgICAgIHRoaXMudmVydGV4QnVmZmVyID0gbmV3IGdsQXR0cmlidXRlQnVmZmVyKGdsLCB0aGlzLnByb2dyYW0sICdhVmVydGV4Jyk7XHJcbiAgICAgIHRoaXMubm9ybWFsQnVmZmVyID0gbmV3IGdsQXR0cmlidXRlQnVmZmVyKGdsLCB0aGlzLnByb2dyYW0sICdhTm9ybWFsJyk7XHJcbiAgICAgIHRoaXMuaW5kZXhCdWZmZXIgPSBuZXcgZ2xJbmRleEJ1ZmZlcihnbCk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnZlcnRleEJ1ZmZlci5kaXNwb3NlKCk7XHJcbiAgICAgIHRoaXMubm9ybWFsQnVmZmVyLmRpc3Bvc2UoKTtcclxuICAgICAgdGhpcy5pbmRleEJ1ZmZlci5kaXNwb3NlKCk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgcmVidWlsZEJ1ZmZlcnMoKSB7XHJcbiAgICAgIHRoaXMuZGlzcG9zZSgpO1xyXG4gICAgICB0aGlzLmNyZWF0ZUJ1ZmZlcnMoKTtcclxuICAgICAgdGhpcy51cGxvYWRUcmlhbmdsZXMoKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHJvdFgoYW5nbGU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICB0aGlzLm1vZGVsLnJvdFgoYW5nbGUpO1xyXG4gICB9XHJcbiAgIHB1YmxpYyByb3RZKGFuZ2xlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5tb2RlbC5yb3RZKGFuZ2xlKTtcclxuICAgfVxyXG4gICBwdWJsaWMgcm90WihhbmdsZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMubW9kZWwucm90WihhbmdsZSk7XHJcbiAgIH1cclxuICAgcHVibGljIHByZVJvdFgoYW5nbGU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICB0aGlzLm1vZGVsLnByZVJvdFgoYW5nbGUpO1xyXG4gICB9XHJcbiAgIHB1YmxpYyBwcmVSb3RZKGFuZ2xlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5tb2RlbC5wcmVSb3RZKGFuZ2xlKTtcclxuICAgfVxyXG4gICBwdWJsaWMgcHJlUm90WihhbmdsZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMubW9kZWwucHJlUm90WihhbmdsZSk7XHJcbiAgIH1cclxuICAgcHVibGljIHNjYWxlKHNjYWxlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5tb2RlbC5zY2FsZShzY2FsZSk7XHJcbiAgIH1cclxuICAgcHVibGljIHRyYW5zbGF0ZShvZmZzZXQ6IFZlYzMpOiB2b2lkIHtcclxuICAgICAgdGhpcy5tb2RlbC50cmFuc2xhdGUob2Zmc2V0KTtcclxuICAgfVxyXG4gICBwdWJsaWMgY2xlYXJUcmFuc2Zvcm1zKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLm1vZGVsID0gTWF0NC5pZGVudGl0eTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHVwbG9hZFRyaWFuZ2xlcygpOiB2b2lkIHtcclxuXHJcbiAgICAgIHRoaXMudmVydGV4QnVmZmVyLnVwbG9hZCh0aGlzLnRPYmoudmVydGljZXMpO1xyXG4gICAgICB0aGlzLm5vcm1hbEJ1ZmZlci51cGxvYWQodGhpcy50T2JqLm5vcm1hbHMpO1xyXG4gICAgICB0aGlzLmluZGV4QnVmZmVyLnVwbG9hZCh0aGlzLnRPYmouaW5kaWNlcyk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBkcmF3KCk6IHZvaWQge1xyXG5cclxuICAgICAgY29uc3QgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICBjb25zdCB1bmkgPSBuZXcgZ2xVbmlmb3JtKGdsLCB0aGlzLnByb2dyYW0pO1xyXG4gICAgICB1bmkuc2V0KCdtb2RlbCcsIHRoaXMubW9kZWwubXVsdE0odGhpcy5ub3JtYWxpemUpKTtcclxuXHJcbiAgICAgIHRoaXMudmVydGV4QnVmZmVyLmJpbmQoKTtcclxuICAgICAgdGhpcy5pbmRleEJ1ZmZlci5iaW5kKCk7XHJcbiAgICAgIHRoaXMubm9ybWFsQnVmZmVyLmJpbmQoKTtcclxuXHJcbiAgICAgIGdsLmRyYXdFbGVtZW50cyhnbC5UUklBTkdMRVMsIDMgKiB0aGlzLnRPYmoubnVtVHJpYW5nbGVzLCBnbC5VTlNJR05FRF9JTlQsIDApO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgb3B0aW1pemUobm9ybWFsVHlwZTogTm9ybWFsVHlwZSk6IHZvaWQge1xyXG4gICAgICB0aGlzLnRPYmoub3B0aW1pemUobm9ybWFsVHlwZSk7XHJcbiAgICAgIHRoaXMucmVidWlsZEJ1ZmZlcnMoKTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBhcHBseVRvVmVjcyhub3JtYWxzOiBib29sZWFuKSB7XHJcblxyXG4gICAgICBjb25zdCB2ZWNzID0gbm9ybWFscyA/IHRoaXMudE9iai5ub3JtYWxzIDogdGhpcy50T2JqLnZlcnRpY2VzO1xyXG5cclxuICAgICAgLy8gaWYgd2UncmUgdXBkYXRpbmcgbm9ybWFscywgaWdub3JlIHRyYW5zbGF0aW9uIGJ5IHNldHRpbmcgdz0wXHJcbiAgICAgIGxldCB2ZWMgPSBuZXcgVmVjNChbMCwgMCwgMCwgbm9ybWFscyA/IDAgOiAxXSk7XHJcblxyXG4gICAgICBjb25zdCB4Rm9ybSA9IHRoaXMubW9kZWwubXVsdE0odGhpcy5ub3JtYWxpemUpO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlY3MubGVuZ3RoIC8gMzsgaSsrKSB7XHJcbiAgICAgICAgIHZlYy54ID0gdmVjc1szICogaSArIDBdO1xyXG4gICAgICAgICB2ZWMueSA9IHZlY3NbMyAqIGkgKyAxXTtcclxuICAgICAgICAgdmVjLnogPSB2ZWNzWzMgKiBpICsgMl07XHJcbiAgICAgICAgIHZlYyA9IHhGb3JtLm11bHRWKHZlYyk7XHJcblxyXG4gICAgICAgICBpZiAobm9ybWFscykge1xyXG4gICAgICAgICAgICB2ZWMgPSB2ZWMubm9ybWFsaXplKCk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIHZlY3NbMyAqIGkgKyAwXSA9IHZlYy54O1xyXG4gICAgICAgICB2ZWNzWzMgKiBpICsgMV0gPSB2ZWMueTtcclxuICAgICAgICAgdmVjc1szICogaSArIDJdID0gdmVjLno7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIGFwcGx5WEZvcm0oKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuYXBwbHlUb1ZlY3MoZmFsc2UpO1xyXG4gICAgICB0aGlzLmFwcGx5VG9WZWNzKHRydWUpO1xyXG5cclxuICAgICAgdGhpcy5ub3JtYWxpemUgPSBNYXQ0LmlkZW50aXR5O1xyXG4gICAgICB0aGlzLm1vZGVsID0gTWF0NC5pZGVudGl0eTtcclxuICAgICAgdGhpcy50T2JqLmZpbmRCb3VuZHMoKTtcclxuICAgICAgdGhpcy5yZWJ1aWxkQnVmZmVycygpO1xyXG4gICB9XHJcbn0iLCJpbXBvcnQgeyBJQ3RybCB9IGZyb20gJy4vSUN0cmwnO1xyXG5pbXBvcnQgeyBnZXRCb29sZWFuVmFsdWUgfSBmcm9tICcuLi9VdGlsL0dsb2JhbHMnO1xyXG5cclxuLyoqXHJcbiAqIEludGVyZmFjZSBmb3IgZGF0YSBwYXNzZWQgdG8gdGhlIENoZWNrYm94IGNvbnN0cnVjdG9yXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIElDaGVja2JveFNldHVwIHtcclxuICAgaWQ/OiBzdHJpbmcsXHJcbiAgIGxhYmVsOiBzdHJpbmcsXHJcbiAgIGNoZWNrZWQ/OiBib29sZWFuIHwgKCgpID0+IGJvb2xlYW4pLFxyXG4gICBvbmNoZWNrPzogKGNoZWNrYm94OiBDaGVja2JveCkgPT4gdm9pZCxcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBDaGVja2JveCBpbXBsZW1lbnRzIElDdHJsIHtcclxuICAgcHJpdmF0ZSBib3g6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgIHByaXZhdGUgZ2V0U3RhdGU6ICgoKSA9PiBib29sZWFuKSB8IHVuZGVmaW5lZDtcclxuXHJcbiAgIHB1YmxpYyBnZXQgY2hlY2tlZCgpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHRoaXMuYm94LmNoZWNrZWQ7XHJcbiAgIH1cclxuICAgcHVibGljIHNldCBjaGVja2VkKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgIHRoaXMuYm94LmNoZWNrZWQgPSB2YWx1ZTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBlbmFibGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gIXRoaXMuYm94LmRpc2FibGVkO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc2V0IGVuYWJsZWQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgdGhpcy5ib3guZGlzYWJsZWQgPSAhdmFsdWU7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBAcGFyYW0gcGFyZW50IFRoZSBwYXJlbnQgaHRtbCBvYmplY3QuXHJcbiAgICAqIEBwYXJhbSBzZXR1cCBUaGUgc2V0dXAgZGF0YSBvYmplY3RcclxuICAgICovXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwYXJlbnQ6IEhUTUxFbGVtZW50LCBzZXR1cDogSUNoZWNrYm94U2V0dXApIHtcclxuXHJcbiAgICAgIGlmICh0eXBlb2Ygc2V0dXAuY2hlY2tlZCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICB0aGlzLmdldFN0YXRlID0gc2V0dXAuY2hlY2tlZDtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIGlmIChzZXR1cC5pZCkge1xyXG4gICAgICAgICBkaXYuaWQgPSBzZXR1cC5pZDtcclxuICAgICAgfVxyXG4gICAgICBkaXYuY2xhc3NOYW1lID0gJ0NoZWNrYm94RGl2JztcclxuICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGRpdik7XHJcblxyXG4gICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XHJcbiAgICAgIGxhYmVsLmlkID0gc2V0dXAuaWQgKyAnTGFiZWwnO1xyXG4gICAgICBsYWJlbC5jbGFzc05hbWUgPSAnQ2hlY2tib3hMYWJlbCc7XHJcbiAgICAgIGxhYmVsLmlubmVyVGV4dCA9IHNldHVwLmxhYmVsID8/ICcnO1xyXG4gICAgICBkaXYuYXBwZW5kQ2hpbGQobGFiZWwpO1xyXG5cclxuICAgICAgdGhpcy5ib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgICB0aGlzLmJveC5jbGFzc05hbWUgPSAnQ2hlY2tib3gnO1xyXG4gICAgICB0aGlzLmJveC50eXBlID0gJ2NoZWNrYm94JztcclxuICAgICAgdGhpcy5ib3guaWQgPSBzZXR1cC5pZCArICdDaGVja2JveCc7XHJcbiAgICAgIHRoaXMuYm94LmNoZWNrZWQgPSBnZXRCb29sZWFuVmFsdWUoc2V0dXAuY2hlY2tlZCk7XHJcbiAgICAgIHRoaXMuYm94Lm9uY2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICAgICBpZiAoc2V0dXAub25jaGVjaykge1xyXG4gICAgICAgICAgICBzZXR1cC5vbmNoZWNrKHRoaXMpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQodGhpcy5ib3gpO1xyXG5cclxuICAgICAgY29uc3QgbWFyayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgbWFyay5jbGFzc05hbWUgPSAnQ2hlY2ttYXJrJztcclxuICAgICAgbWFyay5pZCA9IHNldHVwLmlkICsgJ0NoZWNrbWFyayc7XHJcbiAgICAgIGxhYmVsLmFwcGVuZENoaWxkKG1hcmspO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgcmVmcmVzaCgpOiB2b2lkIHtcclxuICAgICAgaWYgKHRoaXMuZ2V0U3RhdGUpIHtcclxuICAgICAgICAgdGhpcy5ib3guY2hlY2tlZCA9IHRoaXMuZ2V0U3RhdGUoKTtcclxuICAgICAgfVxyXG4gICB9XHJcbn0iLCJpbXBvcnQgeyBodG1sQ29sb3IgfSBmcm9tICcuLi9VdGlsL2h0bWxDb2xvcic7XHJcblxyXG4vKipcclxuICogSW50ZXJwb2xhdGVzIGFuZCBhcnJheSBvZiBjb2xvcnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb2xvclJhbmdlIHtcclxuICAgLyoqXHJcbiAgICAqIFRoZSBjb2xvcnNcclxuICAgICovXHJcbiAgIHByaXZhdGUgY29sb3JzOiBodG1sQ29sb3JbXTtcclxuXHJcbiAgIC8qKlxyXG4gICAgKiBDb25zdHJ1Y3RvclxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIGNvbG9ycyBUaGUgY29sb3JzIHRvIGludGVycG9sYXRlXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgY29uc3RydWN0b3IoY29sb3JzOiBodG1sQ29sb3JbXSkge1xyXG4gICAgICB0aGlzLmNvbG9ycyA9IGNvbG9ycztcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIEdldHMgYW4gaW50ZXJwb2xhdGVkIGNvbG9yLlxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIHZhbHVlIEEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxLlxyXG4gICAgKi9cclxuICAgcHVibGljIGdldCh2YWx1ZTogbnVtYmVyKTogaHRtbENvbG9yIHtcclxuXHJcbiAgICAgIGlmICh2YWx1ZSA8IDApIHtcclxuICAgICAgICAgcmV0dXJuIHRoaXMuY29sb3JzWzBdO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKHZhbHVlID49IDEpIHtcclxuICAgICAgICAgcmV0dXJuIHRoaXMuY29sb3JzW3RoaXMuY29sb3JzLmxlbmd0aCAtIDFdO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICBjb25zdCBpbmRleCA9IE1hdGguZmxvb3IoKHRoaXMuY29sb3JzLmxlbmd0aCAtIDEpICogdmFsdWUpO1xyXG4gICAgICAgICBjb25zdCBwYXJ0aWFsID0gKHRoaXMuY29sb3JzLmxlbmd0aCAtIDEpICogdmFsdWUgLSBpbmRleDtcclxuXHJcbiAgICAgICAgIGNvbnN0IHIgPSBNYXRoLnJvdW5kKHRoaXMuY29sb3JzW2luZGV4XS5yICsgcGFydGlhbCAqICh0aGlzLmNvbG9yc1tpbmRleCArIDFdLnIgLSB0aGlzLmNvbG9yc1tpbmRleF0ucikpO1xyXG4gICAgICAgICBjb25zdCBnID0gTWF0aC5yb3VuZCh0aGlzLmNvbG9yc1tpbmRleF0uZyArIHBhcnRpYWwgKiAodGhpcy5jb2xvcnNbaW5kZXggKyAxXS5nIC0gdGhpcy5jb2xvcnNbaW5kZXhdLmcpKTtcclxuICAgICAgICAgY29uc3QgYiA9IE1hdGgucm91bmQodGhpcy5jb2xvcnNbaW5kZXhdLmIgKyBwYXJ0aWFsICogKHRoaXMuY29sb3JzW2luZGV4ICsgMV0uYiAtIHRoaXMuY29sb3JzW2luZGV4XS5iKSk7XHJcblxyXG4gICAgICAgICByZXR1cm4gbmV3IGh0bWxDb2xvcihbciwgZywgYl0pO1xyXG4gICAgICB9XHJcbiAgIH1cclxufSIsImltcG9ydCB7IEdVSSB9IGZyb20gJy4vR1VJJztcclxuXHJcbmV4cG9ydCB0eXBlIFNob3dIYW5kbGVyID0gKCkgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgSGlkZUhhbmRsZXIgPSAoKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIERpYWxvZyB7XHJcbiAgIHByb3RlY3RlZCBiYWNrZ3JvdW5kRGl2OiBIVE1MRGl2RWxlbWVudDtcclxuICAgcHJvdGVjdGVkIGRpYWxvZ0RpdjogSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICBwdWJsaWMgb25TaG93OiBTaG93SGFuZGxlciB8IG51bGwgPSBudWxsO1xyXG4gICBwdWJsaWMgb25IaWRlOiBIaWRlSGFuZGxlciB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgcHVibGljIGdldCB2aXNpYmxlKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gKGdldENvbXB1dGVkU3R5bGUodGhpcy5iYWNrZ3JvdW5kRGl2KS5kaXNwbGF5ICE9PSAnbm9uZScpO1xyXG4gICB9XHJcbiAgIHB1YmxpYyBzZXQgdmlzaWJsZShmbGFnOiBib29sZWFuKSB7XHJcbiAgICAgIGlmIChmbGFnID09PSB0aGlzLnZpc2libGUpIHtcclxuICAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZmxhZykge1xyXG4gICAgICAgICB0aGlzLmJhY2tncm91bmREaXYuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICAgaWYgKHRoaXMub25TaG93KSB7XHJcbiAgICAgICAgICAgIHRoaXMub25TaG93KCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kRGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgIGlmICh0aGlzLm9uSGlkZSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uSGlkZSgpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKHBhcmVudDogSFRNTERpdkVsZW1lbnQsIGJhc2VOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgdGhpcy5iYWNrZ3JvdW5kRGl2ID0gR1VJLmNyZWF0ZSgnZGl2JywgYmFzZU5hbWUgKyAnRGlhbG9nQmFja2dyb3VuZERpdicsIHBhcmVudCk7XHJcbiAgICAgIHRoaXMuYmFja2dyb3VuZERpdi5jbGFzc05hbWUgPSAnRGlhbG9nQmFja2dyb3VuZENsYXNzJztcclxuXHJcbiAgICAgIHRoaXMuZGlhbG9nRGl2ID0gR1VJLmNyZWF0ZSgnZGl2JywgYmFzZU5hbWUgKyAnRGlhbG9nRGl2JywgdGhpcy5iYWNrZ3JvdW5kRGl2KTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICAgIGxldCBwYXJlbnQgPSB0aGlzLmJhY2tncm91bmREaXYucGFyZW50RWxlbWVudDtcclxuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMuYmFja2dyb3VuZERpdik7XHJcbiAgIH1cclxufVxyXG4iLCJcclxuZXhwb3J0IGNsYXNzIEdVSSB7XHJcbiAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlPEsgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXA+KFxyXG4gICAgICB0eXBlOiBLLFxyXG4gICAgICBpZDogc3RyaW5nLFxyXG4gICAgICBwYXJlbnQ6IEhUTUxFbGVtZW50LFxyXG4gICAgICBjbGFzc05hbWU/OiBzdHJpbmdcclxuICAgKTogSFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdIHtcclxuICAgICAgY29uc3QgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XHJcbiAgICAgIGVsZW0uaWQgPSBpZDtcclxuICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGVsZW0pO1xyXG4gICAgICBpZiAoY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgIGVsZW0uY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBlbGVtO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc3RhdGljIGNyZWF0ZUFuaW1hdGlvbihpZDogc3RyaW5nLCBwYXJlbnQ6IEhUTUxFbGVtZW50KTogSFRNTERpdkVsZW1lbnQge1xyXG4gICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgZGl2LmlkID0gaWQ7XHJcbiAgICAgIGRpdi5jbGFzc05hbWUgPSAnbGRzLXJpbmcnO1xyXG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xyXG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xyXG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xyXG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xyXG4gICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgcmV0dXJuIGRpdjtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHN0YXRpYyBkcmF3SGFuZGxlKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB4OiBudW1iZXIsIHk6IG51bWJlciwgb3V0ZXJSYWRpdXM6IG51bWJlcik6IHZvaWQge1xyXG5cclxuICAgICAgY3R4LmZpbGxTdHlsZSA9ICdsaWdodGdyZWVuJztcclxuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ2RhcmtncmVlbidcclxuXHJcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgbGV0IGxpbmVXaWR0aCA9IG91dGVyUmFkaXVzIC8gMTA7XHJcbiAgICAgIGN0eC5saW5lV2lkdGggPSBsaW5lV2lkdGg7XHJcbiAgICAgIGN0eC5hcmMoeCwgeSwgb3V0ZXJSYWRpdXMgLSBsaW5lV2lkdGggLyAyLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgIGN0eC5zdHJva2UoKTtcclxuXHJcbiAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgSUN0cmwgfSBmcm9tICcuL0lDdHJsJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUxpc3RCb3hJdGVtPFQ+IHtcclxuICAgZGl2OiBIVE1MRGl2RWxlbWVudCxcclxuICAgdXNlckRhdGE6IFQsXHJcbn1cclxuXHJcbmVudW0gU3R5bGVDbGFzc2VzIHtcclxuICAgTGlzdEJveENsYXNzID0gJ0xpc3RCb3hDbGFzcycsXHJcbiAgIExpc3RCb3hJdGVtQ2xhc3MgPSAnTGlzdEJveEl0ZW1DbGFzcycsXHJcbiAgIExpc3RCb3hJdGVtU2VsZWN0ZWRDbGFzcyA9ICdMaXN0Qm94SXRlbVNlbGVjdGVkQ2xhc3MnLFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTGlzdEJveDxUID0gYW55PiBpbXBsZW1lbnRzIElDdHJsIHtcclxuICAgcHJpdmF0ZSBib3g6IEhUTUxEaXZFbGVtZW50O1xyXG4gICBwcml2YXRlIF9pdGVtczogSUxpc3RCb3hJdGVtPFQ+W10gPSBbXTtcclxuICAgcHVibGljIG9uU2VsZWN0ZWRDaGFuZ2VkOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgIHB1YmxpYyBnZXQgc2VsZWN0ZWQoKTogVCB8IG51bGwge1xyXG5cclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9pdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5faXRlbXNbaV07XHJcbiAgICAgICAgIGlmIChpdGVtLmRpdi5jbGFzc0xpc3QuY29udGFpbnMoU3R5bGVDbGFzc2VzLkxpc3RCb3hJdGVtU2VsZWN0ZWRDbGFzcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0udXNlckRhdGE7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgaXRlbXMoKTogSUxpc3RCb3hJdGVtPFQ+W10ge1xyXG4gICAgICByZXR1cm4gdGhpcy5faXRlbXM7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgZW5hYmxlZCgpOiBib29sZWFuIHtcclxuICAgICAgYWxlcnQoJ05vdCBJbXBsZW1lbnRlZCBZZXQ6IExpc3RCb3guZW5hYmxlZCcpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzZXQgZW5hYmxlZCh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICBhbGVydCgnTm90IEltcGxlbWVudGVkIFlldDogTGlzdEJveC5lbmFibGVkJyk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBAcGFyYW0gcGFyZW50IFRoZSBwYXJlbnQgaHRtbCBvYmplY3QuXHJcbiAgICAqIEBwYXJhbSBzZXR1cCBUaGUgc2V0dXAgZGF0YSBvYmplY3RcclxuICAgICovXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwYXJlbnQ6IEhUTUxFbGVtZW50LCBpZD86IHN0cmluZykge1xyXG5cclxuICAgICAgdGhpcy5ib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgIHRoaXMuYm94LmlkID0gaWQ7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5ib3guY2xhc3NOYW1lID0gU3R5bGVDbGFzc2VzLkxpc3RCb3hDbGFzcztcclxuICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMuYm94KTtcclxuXHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBhZGRJdGVtKHRleHQ/OiBzdHJpbmcsIHVzZXJEYXRhPzogYW55LCBpZD86IHN0cmluZyk6IEhUTUxEaXZFbGVtZW50IHtcclxuICAgICAgY29uc3Qgb2xkU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkO1xyXG5cclxuICAgICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICBpZiAoaWQpIHtcclxuICAgICAgICAgaXRlbS5pZCA9IGlkO1xyXG4gICAgICB9XHJcbiAgICAgIGl0ZW0uY2xhc3NOYW1lID0gU3R5bGVDbGFzc2VzLkxpc3RCb3hJdGVtQ2xhc3M7XHJcbiAgICAgIGlmICh0ZXh0KSB7XHJcbiAgICAgICAgIGl0ZW0uaW5uZXJUZXh0ID0gdGV4dDtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmJveC5hcHBlbmRDaGlsZChpdGVtKTtcclxuXHJcbiAgICAgIGl0ZW0ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICAgY29uc3Qgb2xkU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkO1xyXG5cclxuICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9pdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLl9pdGVtc1tpXS5kaXYuY2xhc3NMaXN0LnJlbW92ZShTdHlsZUNsYXNzZXMuTGlzdEJveEl0ZW1TZWxlY3RlZENsYXNzKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBpdGVtLmNsYXNzTGlzdC50b2dnbGUoU3R5bGVDbGFzc2VzLkxpc3RCb3hJdGVtU2VsZWN0ZWRDbGFzcyk7XHJcblxyXG4gICAgICAgICBpZiAob2xkU2VsZWN0ZWQgIT09IHRoaXMuc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub25TZWxlY3RlZENoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgdGhpcy5vblNlbGVjdGVkQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5faXRlbXMucHVzaCh7XHJcbiAgICAgICAgIGRpdjogaXRlbSxcclxuICAgICAgICAgdXNlckRhdGE6IHVzZXJEYXRhLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkID09PSBudWxsKSB7XHJcbiAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChTdHlsZUNsYXNzZXMuTGlzdEJveEl0ZW1TZWxlY3RlZENsYXNzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKG9sZFNlbGVjdGVkICE9PSB0aGlzLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgIGlmICh0aGlzLm9uU2VsZWN0ZWRDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25TZWxlY3RlZENoYW5nZWQoKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gaXRlbTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgICBjb25zdCBvbGRTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWQ7XHJcblxyXG4gICAgICB0aGlzLmJveC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgdGhpcy5faXRlbXMgPSBbXTtcclxuXHJcbiAgICAgIGlmIChvbGRTZWxlY3RlZCAhPT0gdGhpcy5zZWxlY3RlZCkge1xyXG4gICAgICAgICBpZiAodGhpcy5vblNlbGVjdGVkQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uU2VsZWN0ZWRDaGFuZ2VkKCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgcmVmcmVzaCgpOiB2b2lkIHtcclxuICAgICAgLy8gbm90aGluZyB0byBkb1xyXG4gICB9XHJcbn0iLCJpbXBvcnQgeyBJU2xpZGVyU2V0dXAsIFNsaWRlciB9IGZyb20gJy4vU2xpZGVyJztcclxuaW1wb3J0IHsgQ2hlY2tib3gsIElDaGVja2JveFNldHVwIH0gZnJvbSAnLi9DaGVja2JveCc7XHJcbmltcG9ydCB7IElDdHJsIH0gZnJvbSAnLi9JQ3RybCc7XHJcbmltcG9ydCB7IElSYWRpb2J1dHRvblNldHVwLCBSYWRpb2J1dHRvbiB9IGZyb20gJy4vUmFkaW9idXR0b24nO1xyXG5pbXBvcnQgeyBpc01vYmlsZSB9IGZyb20gJy4uL1V0aWwvR2xvYmFscyc7XHJcbmltcG9ydCB7IEdVSSB9IGZyb20gJy4vR1VJJztcclxuXHJcbmV4cG9ydCB0eXBlIE1lbnVJdGVtRnVuY3Rpb24gPSAoaXRlbT86IEhUTUxEaXZFbGVtZW50KSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBNZW51SXRlbUZ1bmN0aW9uQm9vbCA9ICh2YWx1ZTogYm9vbGVhbikgPT4gdm9pZDtcclxuXHJcbmVudW0gTWVudUxvY2F0aW9uIHtcclxuICAgQmVsb3csXHJcbiAgIFJpZ2h0LFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElNZW51SXRlbU9wdGlvbnMge1xyXG4gICBjbG9zZU9uQ2xpY2s6IGJvb2xlYW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb21tb24gYmFzZSBjbGFzc2VzIGZvciB0aGluZ3MgdGhhdCBhcmUgbWVudXMgLSBtZW51YmFyLCBwdWxsZG93biBtZW51LCBldGNcclxuICovXHJcbmNsYXNzIE1lbnUge1xyXG4gICBwcml2YXRlIHBhcmVudDogTWVudSB8IG51bGwgPSBudWxsO1xyXG4gICBwcml2YXRlIGNoaWxkcmVuOiBNZW51W10gPSBbXTtcclxuICAgcHJpdmF0ZSBjdHJsczogSUN0cmxbXSA9IFtdO1xyXG5cclxuICAgLy8gdGhlIGRpdiB0aGF0IGlzIHRoZSBjb250YWluZXIgZm9yIG1lbnUgaXRlbXNcclxuICAgcHVibGljIGRpdjogSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAvLyB0aGUgaXRlbSB0aGF0IGxhdW5jaGVzIHVzXHJcbiAgIHByaXZhdGUgcGFyZW50SXRlbTogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgIHB1YmxpYyBzZXQgaGlkZGVuKGZsYWc6IGJvb2xlYW4pIHtcclxuICAgICAgaWYgKHRoaXMucGFyZW50SXRlbSkge1xyXG4gICAgICAgICBpZiAoZmxhZykge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudEl0ZW0uY2xhc3NMaXN0LmFkZCgnTWVudUl0ZW1IaWRkZW5DbGFzcycpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudEl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnTWVudUl0ZW1IaWRkZW5DbGFzcycpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBoaWRkZW4oKTogYm9vbGVhbiB7XHJcbiAgICAgIGlmICh0aGlzLnBhcmVudEl0ZW0pIHtcclxuICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50SXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ01lbnVJdGVtSGlkZGVuQ2xhc3MnKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzZXQgZW5hYmxlZChmbGFnOiBib29sZWFuKSB7XHJcbiAgICAgIGlmICh0aGlzLnBhcmVudEl0ZW0pIHtcclxuICAgICAgICAgaWYgKGZsYWcpIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnRJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ01lbnVJdGVtRGlzYWJsZWRDbGFzcycpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudEl0ZW0uY2xhc3NMaXN0LmFkZCgnTWVudUl0ZW1EaXNhYmxlZENsYXNzJyk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0IGVuYWJsZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgIGlmICh0aGlzLnBhcmVudEl0ZW0pIHtcclxuICAgICAgICAgcmV0dXJuICF0aGlzLnBhcmVudEl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdNZW51SXRlbURpc2FibGVkQ2xhc3MnKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKFxyXG4gICAgICBwYXJlbnQ6IE1lbnUgfCBudWxsLFxyXG4gICAgICBwYXJlbnRJdGVtOiBIVE1MRGl2RWxlbWVudCB8IG51bGwsXHJcbiAgICAgIGlkOiBzdHJpbmcsXHJcbiAgICAgIGNsYXNzTmFtZTogc3RyaW5nXHJcbiAgICkge1xyXG4gICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgdGhpcy5wYXJlbnRJdGVtID0gcGFyZW50SXRlbTtcclxuXHJcbiAgICAgIHRoaXMuZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIHRoaXMuZGl2LmlkID0gaWQ7XHJcbiAgICAgIHRoaXMuZGl2LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuXHJcbiAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgcGFyZW50LmRpdi5hcHBlbmRDaGlsZCh0aGlzLmRpdik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghcGFyZW50KSB7XHJcbiAgICAgICAgIC8vIGlmIHRoaXMgaXMgdGhlIHJvb3QgbWVudSwgYWRkIGEgZ2xvYmFsIGNsaWNrIGhhbmRsZXIgZm9yIGNsb3NpbmcgbWVudXNcclxuICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNNZW51SXRlbShldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgIHRoaXMuaGlkZURvd24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGV2ZW50OiBUb3VjaEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc01lbnVJdGVtKGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudCkpIHtcclxuICAgICAgICAgICAgICAgdGhpcy5oaWRlRG93bigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHByb3RlY3RlZCBpc01lbnVJdGVtKGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCk6IGJvb2xlYW4ge1xyXG4gICAgICB3aGlsZSAoZWxlbWVudCkge1xyXG4gICAgICAgICBpZiAoZWxlbWVudC5jbGFzc05hbWUgPT09ICdNZW51SXRlbScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzaG93KCkge1xyXG4gICAgICB0aGlzLmN0cmxzLmZvckVhY2goKGN0cmwpID0+IGN0cmwucmVmcmVzaCgpKTtcclxuICAgICAgaWYgKHRoaXMuZGl2LmNsYXNzTGlzdC5jb250YWlucygnTWVudVNob3cnKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgdGhpcy5kaXYuY2xhc3NMaXN0LmFkZCgnTWVudVNob3cnKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgaGlkZSgpIHtcclxuICAgICAgaWYgKHRoaXMuZGl2LmNsYXNzTGlzdC5jb250YWlucygnTWVudVNob3cnKSkge1xyXG4gICAgICAgICB0aGlzLmRpdi5jbGFzc0xpc3QucmVtb3ZlKCdNZW51U2hvdycpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBoaWRlVXAoKSB7XHJcbiAgICAgIGxldCBtZW51ID0gdGhpcyBhcyBNZW51O1xyXG4gICAgICB3aGlsZSAobWVudS5wYXJlbnQpIHtcclxuICAgICAgICAgbWVudS5oaWRlKCk7XHJcbiAgICAgICAgIG1lbnUgPSBtZW51LnBhcmVudDtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgaGlkZURvd24oKSB7XHJcbiAgICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcclxuICAgICAgICAgY2hpbGQuaGlkZSgpO1xyXG4gICAgICAgICBjaGlsZC5oaWRlRG93bigpO1xyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNsZWFyKCkge1xyXG4gICAgICB0aGlzLmNoaWxkcmVuID0gW107XHJcbiAgICAgIHRoaXMuY3RybHMgPSBbXTtcclxuICAgICAgdGhpcy5kaXYuaW5uZXJIVE1MID0gJyc7XHJcbiAgIH1cclxuXHJcbiAgIHByb3RlY3RlZCBpbnRlcm5hbEFkZFN1Yk1lbnUoaW5uZXJIdG1sOiBzdHJpbmcsIGlkOiBzdHJpbmcsIGxvY2F0aW9uOiBNZW51TG9jYXRpb24pOiBTdWJNZW51IHtcclxuXHJcbiAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgaXRlbS5pZCA9IGlkICsgJ01lbnVJdGVtJztcclxuICAgICAgaXRlbS5jbGFzc05hbWUgPSAnTWVudUl0ZW0nO1xyXG4gICAgICBpdGVtLmlubmVySFRNTCA9IGlubmVySHRtbDtcclxuXHJcbiAgICAgIGl0ZW0ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICAgdGhpcy5zaG93U3ViTWVudShpdGVtLCBzdWJNZW51LCBsb2NhdGlvbik7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5kaXYuYXBwZW5kQ2hpbGQoaXRlbSk7XHJcblxyXG4gICAgICBjb25zdCBzdWJNZW51ID0gbmV3IFN1Yk1lbnUodGhpcywgaXRlbSwgaWQpO1xyXG4gICAgICB0aGlzLmNoaWxkcmVuLnB1c2goc3ViTWVudSk7XHJcbiAgICAgIHJldHVybiBzdWJNZW51O1xyXG4gICB9XHJcblxyXG4gICBwcm90ZWN0ZWQgc2hvd1N1Yk1lbnUobWVudUl0ZW06IEhUTUxEaXZFbGVtZW50LCBzdWJNZW51OiBTdWJNZW51LCBsb2NhdGlvbjogTWVudUxvY2F0aW9uKSB7XHJcblxyXG4gICAgICBpZiAoc3ViTWVudS5lbmFibGVkID09PSBmYWxzZSkge1xyXG4gICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHBvc2l0aW9uIHRoZSBtZW51IG9mZiBzY3JlZW4gc28gdGhhdCB3ZSBjYW4gcXVlcnkgaXQncyBoZWlnaHQgd2hlblxyXG4gICAgICAvLyB3ZSBtYWtlIGl0IHZpc2libGUuIFRoZW4gcG9zaXRpb24gaXQgcHJvcGVybHlcclxuICAgICAgc3ViTWVudS5kaXYuc3R5bGUubGVmdCA9IC01MDAgKyAncHgnXHJcbiAgICAgIHN1Yk1lbnUuZGl2LnN0eWxlLnRvcCA9IDAgKyAncHgnXHJcblxyXG4gICAgICAvLyBoaWRlIHNpYmxpbmcgbWVudXMgdGhhdCBhcmUgb3BlblxyXG4gICAgICB0aGlzLmhpZGVEb3duKCk7XHJcblxyXG4gICAgICAvLyBzaG93IHRoZSBkZXNpcmVkIHN1Ym1lbnVcclxuICAgICAgc3ViTWVudS5zaG93KCk7XHJcblxyXG4gICAgICAvLyBwb3NpdGlvbiB0aGUgbmV3IG1lbnVcclxuICAgICAgY29uc3QgYnJvd3NlcldpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xyXG4gICAgICBjb25zdCBicm93c2VySGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcclxuICAgICAgY29uc3QgbWVudUl0ZW1SZWN0ID0gbWVudUl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIGNvbnN0IHN1Yk1lbnVSZWN0ID0gc3ViTWVudS5kaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIGlmIChsb2NhdGlvbiA9PT0gTWVudUxvY2F0aW9uLkJlbG93KSB7XHJcbiAgICAgICAgIHN1Yk1lbnUuZGl2LnN0eWxlLmxlZnQgPSBtZW51SXRlbVJlY3QubGVmdCArICdweCdcclxuICAgICAgICAgc3ViTWVudS5kaXYuc3R5bGUudG9wID0gbWVudUl0ZW1SZWN0LmJvdHRvbSArICdweCdcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChsb2NhdGlvbiA9PT0gTWVudUxvY2F0aW9uLlJpZ2h0KSB7XHJcblxyXG4gICAgICAgICBsZXQgbGVmdCA9IG1lbnVJdGVtUmVjdC5sZWZ0ICsgMC41ICogbWVudUl0ZW1SZWN0LndpZHRoO1xyXG4gICAgICAgICBpZiAobGVmdCArIHN1Yk1lbnVSZWN0LndpZHRoID4gYnJvd3NlcldpZHRoKSB7XHJcbiAgICAgICAgICAgIGxlZnQgPSBtZW51SXRlbVJlY3QubGVmdCAtIHN1Yk1lbnVSZWN0LndpZHRoO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHN1Yk1lbnUuZGl2LnN0eWxlLmxlZnQgPSBsZWZ0ICsgJ3B4JztcclxuXHJcbiAgICAgICAgIGxldCB0b3AgPSBtZW51SXRlbVJlY3QudG9wO1xyXG4gICAgICAgICBpZiAodG9wICsgc3ViTWVudVJlY3QuaGVpZ2h0ID4gYnJvd3NlckhlaWdodCkge1xyXG4gICAgICAgICAgICB0b3AgPSBicm93c2VySGVpZ2h0IC0gc3ViTWVudVJlY3QuaGVpZ2h0O1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHN1Yk1lbnUuZGl2LnN0eWxlLnRvcCA9IHRvcCArICdweCdcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgYWRkSXRlbSh0ZXh0OiBzdHJpbmcsIGNhbGxiYWNrOiBNZW51SXRlbUZ1bmN0aW9uLCBvcHRpb25zPzogSU1lbnVJdGVtT3B0aW9ucyk6IEhUTUxEaXZFbGVtZW50IHtcclxuXHJcbiAgICAgIC8vIGNyZWF0ZSBhIGRpdiBmb3IgdGhpcyBpdGVtXHJcbiAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgaXRlbS5jbGFzc05hbWUgPSAnTWVudUl0ZW0nO1xyXG4gICAgICBpdGVtLmlubmVyVGV4dCA9IHRleHQ7XHJcblxyXG4gICAgICBpdGVtLm9uY2xpY2sgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcblxyXG4gICAgICAgICAvLyBoaWRlIG9wZW4gbWVudXMgaW4gb3VyIGhpZXJhcmNoeVxyXG4gICAgICAgICBpZiAoIShvcHRpb25zICYmIG9wdGlvbnMuY2xvc2VPbkNsaWNrID09IGZhbHNlKSkge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVVcCgpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICAvLyBmaXJlIHRoZSBldmVudFxyXG4gICAgICAgICBjYWxsYmFjayhpdGVtKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmRpdi5hcHBlbmRDaGlsZChpdGVtKTtcclxuXHJcbiAgICAgIGl0ZW0ub25tb3VzZWVudGVyID0gKCkgPT4ge1xyXG4gICAgICAgICB0aGlzLmhpZGVEb3duKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBpdGVtO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgYWRkU2xpZGVyKHNldHVwOiBJU2xpZGVyU2V0dXApOiBTbGlkZXIge1xyXG4gICAgICBjb25zdCBkaXYgPSB0aGlzLmFkZEl0ZW0oXHJcbiAgICAgICAgIHNldHVwLmxhYmVsLFxyXG4gICAgICAgICAoKSA9PiB7IHJldHVybjsgfSwgLy8gZG8gbm90aGluZyBvbiBjbGlja1xyXG4gICAgICAgICB7IGNsb3NlT25DbGljazogZmFsc2UgfVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgY3RybCA9IG5ldyBTbGlkZXIoZGl2LCBzZXR1cCk7XHJcbiAgICAgIHRoaXMuY3RybHMucHVzaChjdHJsKTtcclxuXHJcbiAgICAgIHJldHVybiBjdHJsO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgYWRkQ2hlY2tib3goc2V0dXA6IElDaGVja2JveFNldHVwKTogQ2hlY2tib3gge1xyXG4gICAgICBjb25zdCBkaXYgPSB0aGlzLmFkZEl0ZW0oXHJcbiAgICAgICAgICcnLFxyXG4gICAgICAgICAoKSA9PiB7IHJldHVybiB9LCAvLyBkbyBub3RoaW5nIG9uIGNsaWNrXHJcbiAgICAgICAgIHsgY2xvc2VPbkNsaWNrOiBmYWxzZSB9XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBjdHJsID0gbmV3IENoZWNrYm94KGRpdiwgc2V0dXApO1xyXG4gICAgICB0aGlzLmN0cmxzLnB1c2goY3RybCk7XHJcblxyXG4gICAgICByZXR1cm4gY3RybDtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGFkZFJhZGlvYnV0dG9uKHNldHVwOiBJUmFkaW9idXR0b25TZXR1cCk6IFJhZGlvYnV0dG9uIHtcclxuICAgICAgY29uc3QgZGl2ID0gdGhpcy5hZGRJdGVtKFxyXG4gICAgICAgICAnJyxcclxuICAgICAgICAgKCkgPT4geyByZXR1cm4gfSwgLy8gZG8gbm90aGluZyBvbiBjbGlja1xyXG4gICAgICAgICB7IGNsb3NlT25DbGljazogZmFsc2UgfVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgY3RybCA9IG5ldyBSYWRpb2J1dHRvbihkaXYsIHNldHVwKTtcclxuICAgICAgdGhpcy5jdHJscy5wdXNoKGN0cmwpO1xyXG5cclxuICAgICAgcmV0dXJuIGN0cmw7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBhZGRJbWFnZShzcmM6IHN0cmluZywgY2FsbGJhY2s6IE1lbnVJdGVtRnVuY3Rpb24pOiBIVE1MSW1hZ2VFbGVtZW50IHtcclxuICAgICAgY29uc3QgZGl2ID0gdGhpcy5hZGRJdGVtKFxyXG4gICAgICAgICAnJyxcclxuICAgICAgICAgY2FsbGJhY2tcclxuICAgICAgKTtcclxuICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ0ltYWdlTWVudUl0ZW0nKTtcclxuXHJcbiAgICAgIGNvbnN0IGltZyA9IEdVSS5jcmVhdGUoJ2ltZycsICcnLCBkaXYpO1xyXG4gICAgICBpbWcuY2xhc3NOYW1lID0gJ01lbnVJdGVtSW1hZ2UnO1xyXG4gICAgICBpbWcuc3JjID0gc3JjO1xyXG4gICAgICByZXR1cm4gaW1nO1xyXG4gICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBIb3Jpem9udGFsIG1lbnViYXIgYWNyb3NzIHRoZSB0b3Agb2YgdGhlIHNjcmVlblxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1lbnViYXIgZXh0ZW5kcyBNZW51IHtcclxuICAgcHVibGljIGNvbnN0cnVjdG9yKHBhcmVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgc3VwZXIobnVsbCwgbnVsbCwgJ01lbnViYXInLCAnTWVudWJhcicpO1xyXG4gICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5kaXYpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgYWRkU3ViTWVudSh0ZXh0OiBzdHJpbmcsIGlkPzogc3RyaW5nKTogU3ViTWVudSB7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbEFkZFN1Yk1lbnUodGV4dCwgaWQgPz8gKHRleHQgKyAnTWVudScpLCBNZW51TG9jYXRpb24uQmVsb3cpO1xyXG4gICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIEEgY2hpbGQgbWVudSBvZiBhIG1lbnUsIGkuZS4gdGhlIGl0ZW0gdGhhdCBhcHBlYXJzIHdoZW4geW91IGNsaWNrIG9uIHNvbWV0aGluZyBpbiB0aGUgbWVudWJhclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFN1Yk1lbnUgZXh0ZW5kcyBNZW51IHtcclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwYXJlbnQ6IE1lbnUsIHBhcmVudEl0ZW06IEhUTUxEaXZFbGVtZW50LCBpZDogc3RyaW5nKSB7XHJcbiAgICAgIHN1cGVyKHBhcmVudCwgcGFyZW50SXRlbSwgaWQgKyAnTWVudScsICdNZW51Jyk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBhZGRTdWJNZW51KHRleHQ6IHN0cmluZywgaWQ/OiBzdHJpbmcpOiBTdWJNZW51IHtcclxuXHJcbiAgICAgIGlmICghaWQpIHtcclxuICAgICAgICAgaWQgPSB0ZXh0LnJlcGxhY2UoL1xccysvZywgJycpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBzcGFuSWQgPSBpZCArICdTcGFuJztcclxuICAgICAgY29uc3Qgc3ViTWVudSA9IHRoaXMuaW50ZXJuYWxBZGRTdWJNZW51KHRleHQgKyAnPHNwYW4gaWQ9XCInICsgc3BhbklkICsgJ1wiIHN0eWxlPVwiZmxvYXQ6cmlnaHRcIj4+PC9zcGFuPicsIGlkLCBNZW51TG9jYXRpb24uUmlnaHQpO1xyXG5cclxuICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNwYW5JZCkgYXMgSFRNTFNwYW5FbGVtZW50O1xyXG4gICAgICBjb25zdCBkaXYgPSBzcGFuLnBhcmVudEVsZW1lbnQgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgIGRpdi5vbm1vdXNlZW50ZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgIGlmIChpc01vYmlsZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgLy8gVE9ETyB0aGlzIGV2ZW50IGlzIHRyaWdnZXJpbmcgb24gYSB0b3VjaHNjcmVlbiBsYXB0b3Agd2hlbiB3ZSBkb24ndCB3YW50IGl0IHRvLlxyXG4gICAgICAgICAgICB0aGlzLmhpZGVEb3duKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1N1Yk1lbnUoZGl2LCBzdWJNZW51LCBNZW51TG9jYXRpb24uUmlnaHQpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXR1cm4gc3ViTWVudTtcclxuICAgfVxyXG59IiwiZXhwb3J0IGVudW0gVGV4dExvY2F0aW9uIHtcclxuICAgQ2VudGVyLFxyXG4gICBUb3BMZWZ0LFxyXG4gICBUb3BSaWdodCxcclxuICAgQm90dG9tTGVmdCxcclxuICAgQm90dG9tUmlnaHRcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE92ZXJsYXlDYW52YXMge1xyXG4gICBwcml2YXRlIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgIHByaXZhdGUgc21hbGxGb250OiBzdHJpbmc7XHJcbiAgIHByaXZhdGUgbGFyZ2VGb250OiBzdHJpbmc7XHJcblxyXG4gICBwdWJsaWMgZ2V0IGhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5jYW52YXMuaGVpZ2h0O1xyXG4gICB9XHJcbiAgIHB1YmxpYyBzZXQgaGVpZ2h0KHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdmFsdWU7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgd2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY2FudmFzLndpZHRoO1xyXG4gICB9XHJcbiAgIHB1YmxpYyBzZXQgd2lkdGgodmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHZhbHVlO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0IGNvbnRleHQoKTogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHtcclxuICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgIGlmIChjb250ZXh0ID09PSBudWxsKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW50ZXJuYWwgRXJyb3I6IGNvbnRleHQ9bnVsbCcpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBjb250ZXh0O1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IocGFyZW50OiBIVE1MRWxlbWVudCwgaWQ/OiBzdHJpbmcpIHtcclxuICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgIHRoaXMuY2FudmFzLmlkID0gaWQ7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jYW52YXMuY2xhc3NOYW1lID0gJ092ZXJsYXknO1xyXG4gICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xyXG5cclxuICAgICAgY29uc3QgZHVtbXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGR1bW15KTtcclxuICAgICAgZHVtbXkuY2xhc3NOYW1lID0gJ092ZXJsYXknXHJcbiAgICAgIHRoaXMubGFyZ2VGb250ID0gZ2V0Q29tcHV0ZWRTdHlsZShkdW1teSkuZm9udDtcclxuICAgICAgZHVtbXkuY2xhc3NOYW1lID0gJ092ZXJsYXlBbm5vdGF0aW9uJztcclxuICAgICAgdGhpcy5zbWFsbEZvbnQgPSBnZXRDb21wdXRlZFN0eWxlKGR1bW15KS5mb250O1xyXG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoZHVtbXkpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZmlsbFRleHQobXNnOiBzdHJpbmcsIGxvY2F0aW9uOiBUZXh0TG9jYXRpb24gPSBUZXh0TG9jYXRpb24uQ2VudGVyKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IGN0eCA9IHRoaXMuY29udGV4dDtcclxuXHJcbiAgICAgIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNhbnZhcyk7XHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5jb2xvcjtcclxuXHJcbiAgICAgIGxldCB4OiBudW1iZXI7XHJcbiAgICAgIGxldCB5OiBudW1iZXI7XHJcblxyXG4gICAgICBzd2l0Y2ggKGxvY2F0aW9uKSB7XHJcbiAgICAgICAgIGNhc2UgVGV4dExvY2F0aW9uLkNlbnRlcjpcclxuICAgICAgICAgICAgY3R4LmZvbnQgPSB0aGlzLmxhcmdlRm9udDtcclxuICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XHJcbiAgICAgICAgICAgIHggPSB0aGlzLndpZHRoIC8gMjtcclxuICAgICAgICAgICAgeSA9IHRoaXMuaGVpZ2h0IC8gMjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICBjYXNlIFRleHRMb2NhdGlvbi5Cb3R0b21MZWZ0OlxyXG4gICAgICAgICAgICBjdHguZm9udCA9IHRoaXMuc21hbGxGb250O1xyXG4gICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ2xlZnQnO1xyXG4gICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ2JvdHRvbSc7XHJcbiAgICAgICAgICAgIHggPSAwO1xyXG4gICAgICAgICAgICB5ID0gdGhpcy5oZWlnaHQ7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgY2FzZSBUZXh0TG9jYXRpb24uQm90dG9tUmlnaHQ6XHJcbiAgICAgICAgICAgIGN0eC5mb250ID0gdGhpcy5zbWFsbEZvbnQ7XHJcbiAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAncmlnaHQnO1xyXG4gICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ2JvdHRvbSc7XHJcbiAgICAgICAgICAgIHggPSB0aGlzLndpZHRoO1xyXG4gICAgICAgICAgICB5ID0gdGhpcy5oZWlnaHQ7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgY2FzZSBUZXh0TG9jYXRpb24uVG9wTGVmdDpcclxuICAgICAgICAgICAgY3R4LmZvbnQgPSB0aGlzLnNtYWxsRm9udDtcclxuICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdsZWZ0JztcclxuICAgICAgICAgICAgY3R4LnRleHRCYXNlbGluZSA9ICd0b3AnO1xyXG4gICAgICAgICAgICB4ID0gMDtcclxuICAgICAgICAgICAgeSA9IDA7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgY2FzZSBUZXh0TG9jYXRpb24uVG9wUmlnaHQ6XHJcbiAgICAgICAgICAgIGN0eC5mb250ID0gdGhpcy5zbWFsbEZvbnQ7XHJcbiAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAncmlnaHQnO1xyXG4gICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ3RvcCc7XHJcbiAgICAgICAgICAgIHggPSB0aGlzLndpZHRoO1xyXG4gICAgICAgICAgICB5ID0gMDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY3R4LmZpbGxUZXh0KG1zZywgeCwgeSk7XHJcbiAgIH1cclxufSIsImV4cG9ydCB0eXBlIFBhbmVsU2hvd0hpZGVGdW5jdGlvbiA9IChwYW5lbDogUGFuZWwpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgY2xhc3MgUGFuZWwge1xyXG5cclxuICAgcHVibGljIHJlYWRvbmx5IGRpdjogSFRNTERpdkVsZW1lbnQ7XHJcbiAgIHB1YmxpYyBvblNob3c6IFBhbmVsU2hvd0hpZGVGdW5jdGlvbiB8IG51bGwgPSBudWxsO1xyXG4gICBwdWJsaWMgb25IaWRlOiBQYW5lbFNob3dIaWRlRnVuY3Rpb24gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgIHByb3RlY3RlZCBzaG93KHZhbHVlOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgIC8vIHZpcnR1YWwgZnVuY3Rpb25cclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCB2aXNpYmxlKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmRpdikuZGlzcGxheSA9PT0gJ2Jsb2NrJztcclxuICAgfVxyXG5cclxuICAgcHVibGljIHNldCB2aXNpYmxlKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy52aXNpYmxlKSB7XHJcbiAgICAgICAgIHRoaXMuZGl2LnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/ICdibG9jaycgOiAnbm9uZSc7XHJcblxyXG4gICAgICAgICAvLyBsZXQgZGVyaXZlZCBjbGFzc2VzIGtub3dcclxuICAgICAgICAgdGhpcy5zaG93KHZhbHVlKTtcclxuXHJcbiAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vblNob3cpIHtcclxuICAgICAgICAgICAgICAgdGhpcy5vblNob3codGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub25IaWRlKSB7XHJcbiAgICAgICAgICAgICAgIHRoaXMub25IaWRlKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IocGFyZW50OiBIVE1MRWxlbWVudCwgaWQ6IHN0cmluZykge1xyXG4gICAgICB0aGlzLmRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICB0aGlzLmRpdi5pZCA9IGlkO1xyXG4gICAgICB0aGlzLmRpdi5jbGFzc05hbWUgPSAnUGFuZWwnO1xyXG4gICAgICB0aGlzLmRpdi5jbGFzc0xpc3QuYWRkKCdDb250YWluZXInKTtcclxuXHJcbiAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmRpdik7XHJcblxyXG4gICAgICBjb25zdCBleGl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIGV4aXRCdXR0b24uaWQgPSAnRXhpdEJ1dHRvbic7XHJcbiAgICAgIGV4aXRCdXR0b24uY2xhc3NOYW1lID0gJ0RpdkJ1dHRvbic7XHJcbiAgICAgIGV4aXRCdXR0b24uaW5uZXJUZXh0ID0gJ1gnO1xyXG4gICAgICBleGl0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZGl2LmFwcGVuZENoaWxkKGV4aXRCdXR0b24pO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgICAgLy8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBpbiBkZXJpdmVkIGNsYXNzZXMgaWYgbmVlZGVkXHJcbiAgIH1cclxufSIsImltcG9ydCB7IFZlYzIgfSBmcm9tICcuLi9VdGlsM0QvVmVjJztcclxuXHJcbnR5cGUgUG9pbnRlclJvdGF0ZUZ1bmN0aW9uID0gKGFuZ2xlOiBudW1iZXIsIGRlbHRhOiBudW1iZXIpID0+IHZvaWQ7XHJcbnR5cGUgUG9pbnRlclRyYW5zbGF0ZUZ1bmN0aW9uID0gKGRlbHRhOiBWZWMyKSA9PiB2b2lkO1xyXG50eXBlIFBvaW50ZXJTY2FsZUZ1bmN0aW9uID0gKHNjYWxlOiBudW1iZXIsIGNoYW5nZTogbnVtYmVyKSA9PiB2b2lkO1xyXG50eXBlIFBvaW50ZXJEcmFnRnVuY3Rpb24gPSAocG9zOiBWZWMyLCBkZWx0YTogVmVjMikgPT4gdm9pZDtcclxudHlwZSBQb2ludGVyTW92ZUZ1bmN0aW9uID0gKHBvczogVmVjMiwgZGVsdGE6IFZlYzIpID0+IHZvaWQ7XHJcbnR5cGUgUG9pbnRlclVwRnVuY3Rpb24gPSAocG9zOiBWZWMyKSA9PiB2b2lkO1xyXG50eXBlIFBvaW50ZXJEb3duRnVuY3Rpb24gPSAocG9zOiBWZWMyKSA9PiB2b2lkO1xyXG50eXBlIFBvaW50ZXJEYmxDbGlja0Z1bmN0aW9uID0gKHBvczogVmVjMikgPT4gYm9vbGVhbjtcclxudHlwZSBQb2ludGVyQ2xpY2tGdW5jdGlvbiA9IChwb3M6IFZlYzIpID0+IGJvb2xlYW47XHJcblxyXG5jb25zdCBEQkxfQ0xJQ0tfVElNRSA9IDMwMDsgLy8gbXNcclxuXHJcbi8qKlxyXG4gKiBVdGlsaXR5IGNsYXNzIGZvciBtYW5hZ2luZyB0b3VjaC9tb3VzZSBldmVudHMgb3ZlciBhIGh0bWwgZWxlbWVudFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFBvaW50ZXJFdmVudEhhbmRsZXIge1xyXG5cclxuICAgcHJpdmF0ZSBlbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgcHJpdmF0ZSBtb3VzZURvd24gPSBmYWxzZTtcclxuXHJcbiAgIHB1YmxpYyBvblVwOiBQb2ludGVyVXBGdW5jdGlvbiB8IG51bGwgPSBudWxsO1xyXG4gICBwdWJsaWMgb25Eb3duOiBQb2ludGVyRG93bkZ1bmN0aW9uIHwgbnVsbCA9IG51bGw7XHJcbiAgIHB1YmxpYyBvblNjYWxlOiBQb2ludGVyU2NhbGVGdW5jdGlvbiB8IG51bGwgPSBudWxsO1xyXG4gICBwdWJsaWMgb25Sb3RhdGU6IFBvaW50ZXJSb3RhdGVGdW5jdGlvbiB8IG51bGwgPSBudWxsO1xyXG4gICBwdWJsaWMgb25UcmFuc2xhdGU6IFBvaW50ZXJUcmFuc2xhdGVGdW5jdGlvbiB8IG51bGwgPSBudWxsO1xyXG4gICBwdWJsaWMgb25DbGljazogUG9pbnRlckNsaWNrRnVuY3Rpb24gfCBudWxsID0gbnVsbDtcclxuICAgcHVibGljIG9uRGJsQ2xpY2s6IFBvaW50ZXJEYmxDbGlja0Z1bmN0aW9uIHwgbnVsbCA9IG51bGw7XHJcbiAgIHB1YmxpYyBvbkRyYWc6IFBvaW50ZXJEcmFnRnVuY3Rpb24gfCBudWxsID0gbnVsbDtcclxuICAgcHVibGljIG9uTW92ZTogUG9pbnRlck1vdmVGdW5jdGlvbiB8IG51bGwgPSBudWxsO1xyXG4gICBwdWJsaWMgY3RybEtleSA9IGZhbHNlO1xyXG5cclxuICAgcHVibGljIGxhc3RQb3MgPSBuZXcgVmVjMihbMCwgMF0pO1xyXG4gICBwcml2YXRlIGxhc3RUb3VjaFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICBwcml2YXRlIHByaW1hcnlUb3VjaElkOiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuICAgcHJpdmF0ZSBzZWNvbmRhcnlUb3VjaElkOiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuICAgcHJpdmF0ZSBpbml0aWFsVG91Y2hEaXN0YW5jZSA9IC0xO1xyXG4gICBwcml2YXRlIGxhc3RUb3VjaERpc3RhbmNlID0gLTE7XHJcbiAgIHByaXZhdGUgbGFzdFRvdWNoQW5nbGUgPSAtMTtcclxuICAgcHJpdmF0ZSBsYXN0VG91Y2hDZW50ZXIgPSBuZXcgVmVjMihbLTEsIC0xXSk7XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuXHJcbiAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcblxyXG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMudG91Y2hzdGFydCk7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm1vdXNlZG93bik7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm1vdXNlbW92ZSk7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIHRoaXMuZGJsY2xpY2spO1xyXG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLm9uV2hlZWwpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLnRvdWNoc3RhcnQpO1xyXG4gICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5tb3VzZWRvd24pO1xyXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5tb3VzZW1vdmUpO1xyXG4gICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCB0aGlzLmRibGNsaWNrKTtcclxuICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5vbldoZWVsKTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBkYmxjbGljayA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG5cclxuICAgICAgdGhpcy5jdHJsS2V5ID0gZXZlbnQuY3RybEtleTtcclxuXHJcbiAgICAgIGNvbnN0IHBvcyA9IHRoaXMuZ2V0UG9zKGV2ZW50KTtcclxuICAgICAgdGhpcy5vdXJEYmxDbGljayhwb3MpO1xyXG4gICB9O1xyXG5cclxuICAgcHJpdmF0ZSBtb3VzZWRvd24gPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHJcbiAgICAgIHRoaXMuY3RybEtleSA9IGV2ZW50LmN0cmxLZXk7XHJcblxyXG4gICAgICAvLyBpZiB0aGlzIHZhbHVlIGlzIHNldCwgaXQgbWVhbnMgYW5vdGhlciBoYW5kbGVyIGFscmVhZHkgZGlkIHNvbWV0aGluZ1xyXG4gICAgICAvLyB3aXRoIHRoZSBldmVudCBhbmQgd2Ugc2hvdWxkIG5vdCBjb250aW51ZSB0byBwcm9jZXNzIGl0LlxyXG4gICAgICAvL1xyXG4gICAgICAvLyBTb21lIHVzZSBjYXNlczpcclxuICAgICAgLy8gICAxKSBMZXZlbHMgUGFuZWwuIERyYWdnaW5nIHRoZSBwYW5lbCBzaG91bGQgbW92ZSBpdCBhcm91bmQgdW5sZXNzIHRoZVxyXG4gICAgICAvLyAgICAgIHVzZXIgY2xpY2tzIG9uIG9uZSBvZiB0aGUgaXRlbXMgdG8gZHJhZyBpdCB3aXRoaW4gdGhlIHBhbmVsXHJcbiAgICAgIC8vICAgMikgTWVudXMgY2xvc2luZy4gV2hlbiBjbGlja2luZyBvdXRzaWRlIG9mIGEgbWVudSwgdGhlIG1lbnUgc2hvdWxkIGNsb3NlXHJcbiAgICAgIC8vXHJcbiAgICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XHJcbiAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGV2ZW50LnRhcmdldCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgPT09IGZhbHNlICYmXHJcbiAgICAgICAgIGV2ZW50LnRhcmdldCBpbnN0YW5jZW9mIEhUTUxCdXR0b25FbGVtZW50ID09PSBmYWxzZSkge1xyXG5cclxuICAgICAgICAgY29uc3QgcG9zID0gdGhpcy5nZXRQb3MoZXZlbnQpO1xyXG4gICAgICAgICB0aGlzLm91ck9uRG93bihwb3MpO1xyXG5cclxuICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm1vdXNldXApO1xyXG5cclxuICAgICAgICAgLy8gZGlzYWJsZSBzZWxlY3Rpb24gYmVjYXVzZSB3ZSdyZSBkb2luZyBzb21ldGhpbmcgZWxzZSB3aXRoIGRyYWdnaW5nXHJcbiAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIH1cclxuICAgfTtcclxuXHJcbiAgIHByaXZhdGUgbW91c2Vtb3ZlID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcblxyXG4gICAgICB0aGlzLmN0cmxLZXkgPSBldmVudC5jdHJsS2V5O1xyXG5cclxuICAgICAgY29uc3QgcG9zID0gdGhpcy5nZXRQb3MoZXZlbnQpO1xyXG4gICAgICBpZiAodGhpcy5tb3VzZURvd24pIHtcclxuICAgICAgICAgdGhpcy5vdXJPbkRyYWcocG9zKTtcclxuICAgICAgICAgdGhpcy5sYXN0UG9zID0gdGhpcy5nZXRQb3MoZXZlbnQpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICB0aGlzLm91ck9uTW92ZShwb3MpO1xyXG4gICAgICAgICB0aGlzLmxhc3RQb3MgPSB0aGlzLmdldFBvcyhldmVudCk7XHJcbiAgICAgIH1cclxuICAgfTtcclxuXHJcbiAgIHByaXZhdGUgbW91c2V1cCA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG5cclxuICAgICAgdGhpcy5jdHJsS2V5ID0gZXZlbnQuY3RybEtleTtcclxuXHJcbiAgICAgIHRoaXMub3VyT25VcCh0aGlzLmdldFBvcyhldmVudCkpO1xyXG5cclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm1vdXNldXApO1xyXG4gICB9O1xyXG5cclxuICAgcHJpdmF0ZSB0b3VjaHN0YXJ0ID0gKGV2ZW50OiBUb3VjaEV2ZW50KSA9PiB7XHJcblxyXG4gICAgICB0aGlzLmN0cmxLZXkgPSBldmVudC5jdHJsS2V5O1xyXG5cclxuICAgICAgLy8gc2VlIG1vdXNlZG93biBmb3IgY29tbWVudHNcclxuICAgICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcclxuICAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCA9PT0gZmFsc2UgJiZcclxuICAgICAgICAgZXZlbnQudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEJ1dHRvbkVsZW1lbnQgPT09IGZhbHNlKSB7XHJcblxyXG4gICAgICAgICAvLyBwcmV2ZW50IHRoZSBicm93c2VyIGZyb20gdXNpbmcgdGhlIGV2ZW50XHJcbiAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAvLyBpZiB0aGlzIGlzIHRoZSBmaXJzdCB0b3VjaFxyXG4gICAgICAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT09IDEpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIHJlY29yZCB0aGUgcHJpbWFyeSB0b3VjaCBpZFxyXG4gICAgICAgICAgICB0aGlzLnByaW1hcnlUb3VjaElkID0gZXZlbnQudG91Y2hlc1swXS5pZGVudGlmaWVyO1xyXG5cclxuICAgICAgICAgICAgLy8gc2VuZCBvdXQgb25Eb3duKCkgYW5kIHBvdGVudGlhbGx5IG9uRGJsQ2xpY2soKSBldmVudHNcclxuICAgICAgICAgICAgY29uc3QgcG9zID0gdGhpcy5nZXRQb3MoZXZlbnQudG91Y2hlc1swXSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgaWYgKHRpbWUgLSB0aGlzLmxhc3RUb3VjaFRpbWUgPCBEQkxfQ0xJQ0tfVElNRSkge1xyXG4gICAgICAgICAgICAgICB0aGlzLm91ckRibENsaWNrKHBvcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLnRvdWNobW92ZSk7XHJcbiAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMudG91Y2hlbmQpO1xyXG5cclxuICAgICAgICAgICAgICAgdGhpcy5vdXJPbkRvd24ocG9zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmxhc3RUb3VjaFRpbWUgPSB0aW1lO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIC8vIGlmIHRoaXMgaXMgdGhlIHNlY29uZCB0b3VjaFxyXG4gICAgICAgICBlbHNlIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA9PT0gMiAmJiB0aGlzLnByaW1hcnlUb3VjaElkICE9PSBudWxsKSB7XHJcblxyXG4gICAgICAgICAgICAvLyByZWNvcmQgdGhlIHNlY29uZGFyeSB0b3VjaCBpZC4gSXQgd2lsbCBhbHdheXMgYmUgdGhlIHNlY29uZCBlbGVtZW50IHdoZW5cclxuICAgICAgICAgICAgLy8gdGhlcmUgYXJlIG9ubHkgdHdvIGVsZW1lbnRzXHJcbiAgICAgICAgICAgIHRoaXMuc2Vjb25kYXJ5VG91Y2hJZCA9IGV2ZW50LnRvdWNoZXNbMV0uaWRlbnRpZmllcjtcclxuXHJcbiAgICAgICAgICAgIC8vIHNldCB2YWx1ZXMgZm9yIGdlc3R1cmVzXHJcbiAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gdGhpcy5jb21wdXRlVG91Y2hEaXN0YW5jZShldmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbFRvdWNoRGlzdGFuY2UgPSBkaXN0YW5jZTtcclxuICAgICAgICAgICAgdGhpcy5sYXN0VG91Y2hEaXN0YW5jZSA9IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RUb3VjaEFuZ2xlID0gdGhpcy5jb21wdXRlVG91Y2hBbmdsZShldmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdFRvdWNoQ2VudGVyID0gdGhpcy5jb21wdXRlVG91Y2hDZW50ZXIoZXZlbnQpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgfTtcclxuXHJcbiAgIHByaXZhdGUgdG91Y2htb3ZlID0gKGV2ZW50OiBUb3VjaEV2ZW50KSA9PiB7XHJcblxyXG4gICAgICB0aGlzLmN0cmxLZXkgPSBldmVudC5jdHJsS2V5O1xyXG5cclxuICAgICAgLy8gcHJldmVudCB0aGUgYnJvd3NlciBmcm9tIHVzaW5nIHRoZSBldmVudFxyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgLy8gaWYgdGhlIGluaXRpYWwgdHdvIHRvdWNoZXMgYXJlIGFjdGl2ZVxyXG4gICAgICBpZiAodGhpcy5wcmltYXJ5VG91Y2hJZCAhPT0gbnVsbCAmJiB0aGlzLnNlY29uZGFyeVRvdWNoSWQgIT09IG51bGwpIHtcclxuXHJcbiAgICAgICAgIC8vIHNlbmQgb3V0IGdlc3R1cmUgZXZlbnRzXHJcbiAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gdGhpcy5jb21wdXRlVG91Y2hEaXN0YW5jZShldmVudCk7XHJcbiAgICAgICAgIGNvbnN0IHNjYWxlID0gZGlzdGFuY2UgLyB0aGlzLmluaXRpYWxUb3VjaERpc3RhbmNlO1xyXG4gICAgICAgICBjb25zdCBjaGFuZ2UgPSBkaXN0YW5jZSAvIHRoaXMubGFzdFRvdWNoRGlzdGFuY2U7XHJcbiAgICAgICAgIHRoaXMub3VyT25TY2FsZShzY2FsZSwgY2hhbmdlKTtcclxuICAgICAgICAgdGhpcy5sYXN0VG91Y2hEaXN0YW5jZSA9IGRpc3RhbmNlO1xyXG5cclxuICAgICAgICAgY29uc3QgYW5nbGUgPSB0aGlzLmNvbXB1dGVUb3VjaEFuZ2xlKGV2ZW50KTtcclxuICAgICAgICAgdGhpcy5vdXJPblJvdGF0ZShhbmdsZSwgYW5nbGUgLSB0aGlzLmxhc3RUb3VjaEFuZ2xlKTtcclxuICAgICAgICAgdGhpcy5sYXN0VG91Y2hBbmdsZSA9IGFuZ2xlO1xyXG5cclxuICAgICAgICAgY29uc3QgY2VudGVyID0gdGhpcy5jb21wdXRlVG91Y2hDZW50ZXIoZXZlbnQpO1xyXG4gICAgICAgICAvLyByZXZlcnNlIFkgdmFsdWVzIHNvIHRoZSBib3R0b20gaXMgemVybyBpbnN0ZWFkIG9mIHRoZSB0b3BcclxuICAgICAgICAgY29uc3QgZGVsdGEgPSBbY2VudGVyLnggLSB0aGlzLmxhc3RUb3VjaENlbnRlci54LCB0aGlzLmxhc3RUb3VjaENlbnRlci55IC0gY2VudGVyLnldO1xyXG4gICAgICAgICB0aGlzLm91ck9uVHJhbnNsYXRlKG5ldyBWZWMyKGRlbHRhKSk7XHJcbiAgICAgICAgIHRoaXMubGFzdFRvdWNoQ2VudGVyID0gY2VudGVyO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGlmIG9ubHkgdGhlIGluaXRpYWwgdG91Y2ggaXMgYWN0aXZlXHJcbiAgICAgIGVsc2UgaWYgKHRoaXMucHJpbWFyeVRvdWNoSWQgIT09IG51bGwpIHtcclxuXHJcbiAgICAgICAgIC8vIHNlbmQgb3V0IHRoZSBkcmFnIGV2ZW50XHJcbiAgICAgICAgIGlmICh0aGlzLm1vdXNlRG93bikge1xyXG4gICAgICAgICAgICBjb25zdCB0b3VjaCA9IHRoaXMuZ2V0VG91Y2goZXZlbnQsIHRoaXMucHJpbWFyeVRvdWNoSWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRvdWNoID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW50ZXJuYWwgRXJyb3I6IHRvdWNoPW51bGwnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcG9zID0gdGhpcy5nZXRQb3ModG91Y2gpO1xyXG4gICAgICAgICAgICB0aGlzLm91ck9uRHJhZyhwb3MpO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RQb3MgPSB0aGlzLmdldFBvcyh0b3VjaCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9O1xyXG5cclxuICAgcHJpdmF0ZSB0b3VjaGVuZCA9IChldmVudDogVG91Y2hFdmVudCkgPT4ge1xyXG5cclxuICAgICAgdGhpcy5jdHJsS2V5ID0gZXZlbnQuY3RybEtleTtcclxuXHJcbiAgICAgIC8vIHByZXZlbnQgdGhlIGJyb3dzZXIgZnJvbSB1c2luZyB0aGUgZXZlbnRcclxuICAgICAgLy8gbmVlZGVkIHRvIHNlbGVjdCBhbiBpbnB1dCBlbGVtZW50XHJcbiAgICAgIC8vZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLnNlY29uZGFyeVRvdWNoSWQgIT09IG51bGwpIHtcclxuICAgICAgICAgaWYgKHRoaXMuZ2V0VG91Y2goZXZlbnQsIHRoaXMuc2Vjb25kYXJ5VG91Y2hJZCkgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWNvbmRhcnlUb3VjaElkID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIC8vIGlmIHdlIGxpZnRlZCB0aGUgc2Vjb25kIGZpbmdlciwgYnV0IG5vdCB0aGUgZmlyc3QsIGdvIGJhY2tcclxuICAgICAgICAgICAgLy8gdG8gdGhlIGRyYWcgZ2VzdHVyZSwgYnV0IGFkanVzdCB0aGUgcmVtZW1iZXJkIHBvc2l0aW9uIHRvXHJcbiAgICAgICAgICAgIC8vIGJlIHRoZSBjdXJyZW50IG9uZSBzbyB0aGF0IHRoaW5ncyBkb24ndCBqdW1wXHJcbiAgICAgICAgICAgIGNvbnN0IHRvdWNoID0gdGhpcy5nZXRUb3VjaChldmVudCwgdGhpcy5wcmltYXJ5VG91Y2hJZCk7XHJcbiAgICAgICAgICAgIGlmICh0b3VjaCkge1xyXG4gICAgICAgICAgICAgICB0aGlzLmxhc3RQb3MgPSB0aGlzLmdldFBvcyh0b3VjaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5wcmltYXJ5VG91Y2hJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICBpZiAodGhpcy5nZXRUb3VjaChldmVudCwgdGhpcy5wcmltYXJ5VG91Y2hJZCkgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmltYXJ5VG91Y2hJZCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm91ck9uVXAodGhpcy5sYXN0UG9zKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5zZWNvbmRhcnlUb3VjaElkID09PSBudWxsIHx8IHRoaXMucHJpbWFyeVRvdWNoSWQgPT09IG51bGwpIHtcclxuICAgICAgICAgdGhpcy5pbml0aWFsVG91Y2hEaXN0YW5jZSA9IC0xO1xyXG4gICAgICAgICB0aGlzLmxhc3RUb3VjaERpc3RhbmNlID0gLTE7XHJcbiAgICAgICAgIHRoaXMubGFzdFRvdWNoQW5nbGUgPSAtMTtcclxuICAgICAgICAgdGhpcy5sYXN0VG91Y2hDZW50ZXIgPSBuZXcgVmVjMihbLTEsIC0xXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLnNlY29uZGFyeVRvdWNoSWQgPT09IG51bGwgJiYgdGhpcy5wcmltYXJ5VG91Y2hJZCA9PT0gbnVsbCkge1xyXG4gICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy50b3VjaG1vdmUpO1xyXG4gICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLnRvdWNoZW5kKTtcclxuICAgICAgfVxyXG4gICB9O1xyXG5cclxuICAgcHJpdmF0ZSBnZXRUb3VjaChldmVudDogVG91Y2hFdmVudCwgaWQ6IG51bWJlcik6IFRvdWNoIHwgbnVsbCB7XHJcblxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50LnRvdWNoZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgY29uc3QgdG91Y2ggPSBldmVudC50b3VjaGVzW2ldO1xyXG4gICAgICAgICBpZiAodG91Y2guaWRlbnRpZmllciA9PT0gaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRvdWNoO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIG5vIG1hdGNoIHdhcyBmb3VuZFxyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBnZXRQb3ModG91Y2hPckV2ZW50OiBUb3VjaCB8IE1vdXNlRXZlbnQpOiBWZWMyIHtcclxuICAgICAgY29uc3QgcmVjdCA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgcmV0dXJuIG5ldyBWZWMyKFt0b3VjaE9yRXZlbnQuY2xpZW50WCAtIHJlY3QueCwgdG91Y2hPckV2ZW50LmNsaWVudFkgLSByZWN0LnldKTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBnZXRUb3VjaGVzKGV2ZW50OiBUb3VjaEV2ZW50KTogeyBwcmltYXJ5VG91Y2g6IFRvdWNoIHwgbnVsbCwgc2Vjb25kYXJ5VG91Y2g6IFRvdWNoIHwgbnVsbCB9IHtcclxuXHJcbiAgICAgIGlmICh0aGlzLnByaW1hcnlUb3VjaElkID09PSBudWxsIHx8IHRoaXMuc2Vjb25kYXJ5VG91Y2hJZCA9PT0gbnVsbCkge1xyXG4gICAgICAgICB0aHJvdyBFcnJvcignVHdvIHRvdWNoZXMgZXhwZWN0ZWQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgcHJpbWFyeVRvdWNoOiB0aGlzLmdldFRvdWNoKGV2ZW50LCB0aGlzLnByaW1hcnlUb3VjaElkKSxcclxuICAgICAgICAgc2Vjb25kYXJ5VG91Y2g6IHRoaXMuZ2V0VG91Y2goZXZlbnQsIHRoaXMuc2Vjb25kYXJ5VG91Y2hJZCksXHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBjb21wdXRlVG91Y2hEaXN0YW5jZShldmVudDogVG91Y2hFdmVudCk6IG51bWJlciB7XHJcblxyXG4gICAgICBjb25zdCB0b3VjaGVzID0gdGhpcy5nZXRUb3VjaGVzKGV2ZW50KTtcclxuXHJcbiAgICAgIGlmICh0b3VjaGVzLnByaW1hcnlUb3VjaCA9PT0gbnVsbCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludGVybmFsIEVycm9yOiBjb21wdXRlVG91Y2hEaXN0YW5jZSgpIHByaW1hcnlUb3VjaD1udWxsJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRvdWNoZXMuc2Vjb25kYXJ5VG91Y2ggPT09IG51bGwpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnRlcm5hbCBFcnJvcjogY29tcHV0ZVRvdWNoRGlzdGFuY2UoKSBzZWNvbmRhcnlUb3VjaD1udWxsJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHgxID0gdG91Y2hlcy5wcmltYXJ5VG91Y2guc2NyZWVuWDtcclxuICAgICAgY29uc3QgeTEgPSB0b3VjaGVzLnByaW1hcnlUb3VjaC5zY3JlZW5ZO1xyXG4gICAgICBjb25zdCB4MiA9IHRvdWNoZXMuc2Vjb25kYXJ5VG91Y2guc2NyZWVuWDtcclxuICAgICAgY29uc3QgeTIgPSB0b3VjaGVzLnNlY29uZGFyeVRvdWNoLnNjcmVlblk7XHJcblxyXG4gICAgICByZXR1cm4gTWF0aC5zcXJ0KCh4MiAtIHgxKSAqICh4MiAtIHgxKSArICh5MiAtIHkxKSAqICh5MiAtIHkxKSk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgY29tcHV0ZVRvdWNoQW5nbGUoZXZlbnQ6IFRvdWNoRXZlbnQpOiBudW1iZXIge1xyXG5cclxuICAgICAgY29uc3QgdG91Y2hlcyA9IHRoaXMuZ2V0VG91Y2hlcyhldmVudCk7XHJcblxyXG4gICAgICBpZiAodG91Y2hlcy5wcmltYXJ5VG91Y2ggPT09IG51bGwpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnRlcm5hbCBFcnJvcjogY29tcHV0ZVRvdWNoQW5nbGUoKSBwcmltYXJ5VG91Y2g9bnVsbCcpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0b3VjaGVzLnNlY29uZGFyeVRvdWNoID09PSBudWxsKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW50ZXJuYWwgRXJyb3I6IGNvbXB1dGVUb3VjaEFuZ2xlKCkgc2Vjb25kYXJ5VG91Y2g9bnVsbCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB4MSA9IHRvdWNoZXMucHJpbWFyeVRvdWNoLnNjcmVlblg7XHJcbiAgICAgIGNvbnN0IHkxID0gdG91Y2hlcy5wcmltYXJ5VG91Y2guc2NyZWVuWTtcclxuICAgICAgY29uc3QgeDIgPSB0b3VjaGVzLnNlY29uZGFyeVRvdWNoLnNjcmVlblg7XHJcbiAgICAgIGNvbnN0IHkyID0gdG91Y2hlcy5zZWNvbmRhcnlUb3VjaC5zY3JlZW5ZO1xyXG5cclxuICAgICAgcmV0dXJuIE1hdGguYXRhbjIoeTIgLSB5MSwgeDIgLSB4MSk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgY29tcHV0ZVRvdWNoQ2VudGVyKGV2ZW50OiBUb3VjaEV2ZW50KTogVmVjMiB7XHJcblxyXG4gICAgICBjb25zdCB0b3VjaGVzID0gdGhpcy5nZXRUb3VjaGVzKGV2ZW50KTtcclxuICAgICAgaWYgKHRvdWNoZXMucHJpbWFyeVRvdWNoID09PSBudWxsKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW50ZXJuYWwgRXJyb3I6IGNvbXB1dGVUb3VjaENlbnRlcigpIHByaW1hcnlUb3VjaD1udWxsJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRvdWNoZXMuc2Vjb25kYXJ5VG91Y2ggPT09IG51bGwpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnRlcm5hbCBFcnJvcjogY29tcHV0ZVRvdWNoQ2VudGVyKCkgc2Vjb25kYXJ5VG91Y2g9bnVsbCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB4MSA9IHRvdWNoZXMucHJpbWFyeVRvdWNoLnNjcmVlblg7XHJcbiAgICAgIGNvbnN0IHkxID0gdG91Y2hlcy5wcmltYXJ5VG91Y2guc2NyZWVuWTtcclxuICAgICAgY29uc3QgeDIgPSB0b3VjaGVzLnNlY29uZGFyeVRvdWNoLnNjcmVlblg7XHJcbiAgICAgIGNvbnN0IHkyID0gdG91Y2hlcy5zZWNvbmRhcnlUb3VjaC5zY3JlZW5ZO1xyXG5cclxuICAgICAgcmV0dXJuIG5ldyBWZWMyKFsoeDEgKyB4MikgLyAyLCAoeTEgKyB5MikgLyAyXSk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgb25XaGVlbCA9IChldmVudDogV2hlZWxFdmVudCkgPT4ge1xyXG4gICAgICBpZiAoZXZlbnQuZGVsdGFZID4gMCkge1xyXG4gICAgICAgICB0aGlzLm91ck9uU2NhbGUoMSwgMS4wMyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHRoaXMub3VyT25TY2FsZSgxLCAwLjk3KTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIG91ck9uRG93bihwb3M6IFZlYzIpIHtcclxuXHJcbiAgICAgIC8vIGNoZWNrIGZvciBhIGNsaWNrIGhhbmRsZXJcclxuICAgICAgaWYgKHRoaXMub25DbGljayAmJiB0aGlzLm9uQ2xpY2socG9zLmNsb25lKCkpKSB7XHJcbiAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICAvLyBpZiBub3QgaGFuZGxlZCBieSBhIGNsaWNrIGhhbmRlciwgc2VuZCB0aGUgb25Eb3duIGV2ZW50XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICB0aGlzLm1vdXNlRG93biA9IHRydWU7XHJcbiAgICAgICAgIHRoaXMubGFzdFBvcyA9IHBvcy5jbG9uZSgpO1xyXG5cclxuICAgICAgICAgaWYgKHRoaXMub25Eb3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Eb3duKHBvcy5jbG9uZSgpKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgb3VyT25VcChwb3M6IFZlYzIpIHtcclxuXHJcbiAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XHJcblxyXG4gICAgICBpZiAodGhpcy5vblVwKSB7XHJcbiAgICAgICAgIHRoaXMub25VcChwb3MuY2xvbmUoKSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBvdXJPbkRyYWcocG9zOiBWZWMyKSB7XHJcbiAgICAgIGlmICh0aGlzLm9uRHJhZykge1xyXG4gICAgICAgICBjb25zdCBkZWx0YSA9IG5ldyBWZWMyKFtwb3MueCAtIHRoaXMubGFzdFBvcy54LCBwb3MueSAtIHRoaXMubGFzdFBvcy55XSk7XHJcbiAgICAgICAgIHRoaXMub25EcmFnKHBvcy5jbG9uZSgpLCBkZWx0YSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBvdXJPbk1vdmUocG9zOiBWZWMyKSB7XHJcbiAgICAgIGlmICh0aGlzLm9uTW92ZSkge1xyXG4gICAgICAgICBjb25zdCBkZWx0YSA9IG5ldyBWZWMyKFtwb3MueCAtIHRoaXMubGFzdFBvcy54LCBwb3MueSAtIHRoaXMubGFzdFBvcy55XSk7XHJcbiAgICAgICAgIHRoaXMub25Nb3ZlKHBvcy5jbG9uZSgpLCBkZWx0YSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBvdXJEYmxDbGljayhwb3M6IFZlYzIpIHtcclxuICAgICAgaWYgKHRoaXMub25EYmxDbGljaykge1xyXG4gICAgICAgICB0aGlzLm9uRGJsQ2xpY2socG9zKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIG91ck9uU2NhbGUoc2NhbGU6IG51bWJlciwgY2hhbmdlOiBudW1iZXIpIHtcclxuICAgICAgaWYgKHRoaXMub25TY2FsZSkge1xyXG4gICAgICAgICB0aGlzLm9uU2NhbGUoc2NhbGUsIGNoYW5nZSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBvdXJPblJvdGF0ZShhbmdsZTogbnVtYmVyLCBkZWx0YTogbnVtYmVyKSB7XHJcbiAgICAgIGlmICh0aGlzLm9uUm90YXRlKSB7XHJcbiAgICAgICAgIHRoaXMub25Sb3RhdGUoYW5nbGUsIGRlbHRhKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIG91ck9uVHJhbnNsYXRlKGRlbHRhOiBWZWMyKSB7XHJcbiAgICAgIGlmICh0aGlzLm9uVHJhbnNsYXRlKSB7XHJcbiAgICAgICAgIHRoaXMub25UcmFuc2xhdGUoZGVsdGEpO1xyXG4gICAgICB9XHJcbiAgIH1cclxufSIsImltcG9ydCB7IElDdHJsIH0gZnJvbSAnLi9JQ3RybCc7XHJcbmltcG9ydCB7IGdldEJvb2xlYW5WYWx1ZSB9IGZyb20gJy4uL1V0aWwvR2xvYmFscyc7XHJcblxyXG50eXBlIEJvb2xlYW5GdW5jID0gKCkgPT4gYm9vbGVhbjtcclxuXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgZm9yIGRhdGEgcGFzc2VkIHRvIHRoZSBSYWRpb2J1dHRvbiBjb25zdHJ1Y3RvclxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJUmFkaW9idXR0b25TZXR1cCB7XHJcbiAgIGlkPzogc3RyaW5nLFxyXG4gICBsYWJlbDogc3RyaW5nLFxyXG4gICBncm91cDogc3RyaW5nLFxyXG4gICBjaGVja2VkPzogYm9vbGVhbiB8ICgoKSA9PiBib29sZWFuKSxcclxuICAgb25jaGVjaz86IChyYWRpbzogUmFkaW9idXR0b24pID0+IHZvaWQsXHJcbiAgIG9udW5jaGVjaz86IChyYWRpbzogUmFkaW9idXR0b24pID0+IHZvaWQsXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSYWRpb2J1dHRvbiBpbXBsZW1lbnRzIElDdHJsIHtcclxuICAgcHJpdmF0ZSBib3g6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgIHByaXZhdGUgZ2V0U3RhdGU6ICgoKSA9PiBib29sZWFuKSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgcHVibGljIGdldCBjaGVja2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5ib3guY2hlY2tlZDtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBlbmFibGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gIXRoaXMuYm94LmRpc2FibGVkO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc2V0IGVuYWJsZWQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgdGhpcy5ib3guZGlzYWJsZWQgPSAhdmFsdWU7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBAcGFyYW0gcGFyZW50IFRoZSBwYXJlbnQgaHRtbCBvYmplY3QuXHJcbiAgICAqIEBwYXJhbSBzZXR1cCBUaGUgc2V0dXAgZGF0YSBvYmplY3RcclxuICAgICovXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwYXJlbnQ6IEhUTUxFbGVtZW50LCBzZXR1cDogSVJhZGlvYnV0dG9uU2V0dXApIHtcclxuXHJcbiAgICAgIGNvbnN0IGlkID0gc2V0dXAuaWQgPz8gJ1JhZGlvYnV0dG9uJztcclxuICAgICAgaWYgKHR5cGVvZiBzZXR1cC5jaGVja2VkID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgIHRoaXMuZ2V0U3RhdGUgPSBzZXR1cC5jaGVja2VkO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgZGl2LmlkID0gaWQ7XHJcbiAgICAgIGRpdi5jbGFzc05hbWUgPSAnUmFkaW9idXR0b25EaXYnO1xyXG4gICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZGl2KTtcclxuXHJcbiAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuICAgICAgbGFiZWwuaWQgPSBpZCArICdMYWJlbCc7XHJcbiAgICAgIGxhYmVsLmNsYXNzTmFtZSA9ICdSYWRpb2J1dHRvbkxhYmVsJztcclxuICAgICAgbGFiZWwuaW5uZXJUZXh0ID0gc2V0dXAubGFiZWwgPz8gJyc7XHJcbiAgICAgIGRpdi5hcHBlbmRDaGlsZChsYWJlbCk7XHJcblxyXG4gICAgICB0aGlzLmJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgIHRoaXMuYm94LmNsYXNzTmFtZSA9ICdSYWRpb2J1dHRvbic7XHJcbiAgICAgIHRoaXMuYm94LnR5cGUgPSAncmFkaW8nO1xyXG4gICAgICB0aGlzLmJveC5uYW1lID0gc2V0dXAuZ3JvdXA7XHJcbiAgICAgIHRoaXMuYm94LmlkID0gaWQgKyAnUmFkaW9idXR0b24nO1xyXG4gICAgICB0aGlzLmJveC5jaGVja2VkID0gZ2V0Qm9vbGVhblZhbHVlKHNldHVwLmNoZWNrZWQpO1xyXG4gICAgICB0aGlzLmJveC5vbmNoYW5nZSA9ICgpID0+IHtcclxuICAgICAgICAgaWYgKHRoaXMuYm94LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgaWYgKHNldHVwLm9uY2hlY2spIHtcclxuICAgICAgICAgICAgICAgc2V0dXAub25jaGVjayh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoc2V0dXAub251bmNoZWNrKSB7XHJcbiAgICAgICAgICAgICAgIHNldHVwLm9udW5jaGVjayh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQodGhpcy5ib3gpO1xyXG5cclxuICAgICAgY29uc3QgbWFyayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgbWFyay5jbGFzc05hbWUgPSAnUmFkaW9DaGVja21hcmsnO1xyXG4gICAgICBtYXJrLmlkID0gaWQgKyAnUmFkaW9DaGVja21hcmsnO1xyXG4gICAgICBsYWJlbC5hcHBlbmRDaGlsZChtYXJrKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNoZWNrKHZhbHVlID0gdHJ1ZSk6IHZvaWQge1xyXG4gICAgICB0aGlzLmJveC5jaGVja2VkID0gdmFsdWU7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyByZWZyZXNoKCk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy5nZXRTdGF0ZSkge1xyXG4gICAgICAgICB0aGlzLmJveC5jaGVja2VkID0gdGhpcy5nZXRTdGF0ZSgpO1xyXG4gICAgICB9XHJcbiAgIH1cclxufSIsImltcG9ydCB7IGh0bWxDb2xvciB9IGZyb20gJy4uL1V0aWwvaHRtbENvbG9yJztcclxuaW1wb3J0IHsgSUN0cmwgfSBmcm9tICcuL0lDdHJsJztcclxuaW1wb3J0IHsgQ29sb3JSYW5nZSB9IGZyb20gJy4vQ29sb3JSYW5nZSc7XHJcbmltcG9ydCB7IGh0bWxDb2xvcldpdGhBbHBoYSB9IGZyb20gJy4uL1V0aWwvaHRtbENvbG9yV2l0aEFscGhhJztcclxuaW1wb3J0IHsgZ2xDb2xvcjMgfSBmcm9tICcuLi9nbC9nbENvbG9yJztcclxuXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgZm9yIGRhdGEgcGFzc2VkIHRvIHRoZSBTbGlkZXIgY29uc3RydWN0b3JcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNsaWRlclNldHVwIHtcclxuICAgaWQ/OiBzdHJpbmcsXHJcbiAgIGxhYmVsOiBzdHJpbmcsXHJcbiAgIG1pbjogbnVtYmVyLFxyXG4gICBtYXg6IG51bWJlcixcclxuICAgdmFsdWU6IG51bWJlcixcclxuICAgY29sb3JzPzogaHRtbENvbG9yW10sXHJcbiAgIG9uaW5wdXQ/OiAoc2xpZGVyOiBTbGlkZXIpID0+IHZvaWQsXHJcbiAgIG9uR2V0VGV4dD86IChzbGlkZXI6IFNsaWRlcikgPT4gc3RyaW5nLFxyXG59XHJcblxyXG5jbGFzcyBSYW5nZU1hcHBlciB7XHJcbiAgIHB1YmxpYyByZWFkb25seSBzbGlkZXJNaW4gPSAwO1xyXG4gICBwdWJsaWMgcmVhZG9ubHkgc2xpZGVyTWF4ID0gMTAwMDtcclxuICAgcHVibGljIHJlYWxNaW46IG51bWJlcjtcclxuICAgcHVibGljIHJlYWxNYXg6IG51bWJlcjtcclxuXHJcbiAgIHB1YmxpYyBnZXQgcmVhbFJhbmdlKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnJlYWxNYXggLSB0aGlzLnJlYWxNaW47XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgc2xpZGVyUmFuZ2UoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc2xpZGVyTWF4IC0gdGhpcy5zbGlkZXJNaW47XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihyZWFsTWluOiBudW1iZXIsIHJlYWxNYXg6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnJlYWxNaW4gPSByZWFsTWluO1xyXG4gICAgICB0aGlzLnJlYWxNYXggPSByZWFsTWF4O1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc2xpZGVyVG9SZWFsKHNsaWRlclZhbHVlOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5yZWFsTWluICsgKChzbGlkZXJWYWx1ZSAtIHRoaXMuc2xpZGVyTWluKSAvIHRoaXMuc2xpZGVyUmFuZ2UpICogdGhpcy5yZWFsUmFuZ2U7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyByZWFsVG9TbGlkZXIocmVhbFZhbHVlOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5zbGlkZXJNaW4gKyAoKHJlYWxWYWx1ZSAtIHRoaXMucmVhbE1pbikgLyB0aGlzLnJlYWxSYW5nZSkgKiB0aGlzLnNsaWRlclJhbmdlO1xyXG4gICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYSBzbGlkZXIgY29tcG9zZWQgb2YgYSBsYWJlbCwgaW5wdXQgcmFuZ2UsIGNvbG9yIHNwYW4gYW5kIHZhbHVlIHNwYW5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTbGlkZXIgaW1wbGVtZW50cyBJQ3RybCB7XHJcblxyXG4gICBwcml2YXRlIF9sYWJlbDogSFRNTExhYmVsRWxlbWVudDtcclxuICAgcHJpdmF0ZSBfcmFuZ2U6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgIHByaXZhdGUgX2NvbG9yU3BhbjogSFRNTFNwYW5FbGVtZW50O1xyXG4gICBwcml2YXRlIF92YWx1ZVNwYW46IEhUTUxTcGFuRWxlbWVudDtcclxuICAgcHJpdmF0ZSBfY29sb3JzOiBDb2xvclJhbmdlO1xyXG4gICBwcml2YXRlIF9nZXRUZXh0OiAoc2xpZGVyOiBTbGlkZXIpID0+IHN0cmluZztcclxuICAgcHJpdmF0ZSBfcmFuZ2VNYXBwZXI6IFJhbmdlTWFwcGVyO1xyXG5cclxuICAgcHVibGljIHJlYWRvbmx5IGRpdjogSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICBwdWJsaWMgc2V0IGVuYWJsZWQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgdGhpcy5fcmFuZ2UuZGlzYWJsZWQgPSAhdmFsdWU7XHJcbiAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICB0aGlzLl9sYWJlbC5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICB0aGlzLl92YWx1ZVNwYW4uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcclxuICAgICAgICAgdGhpcy5fcmFuZ2UuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgdGhpcy5fbGFiZWwuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgICAgdGhpcy5fdmFsdWVTcGFuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgIHRoaXMuX3JhbmdlLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH1cclxuICAgfVxyXG4gICBwdWJsaWMgZ2V0IGVuYWJsZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiAhdGhpcy5fcmFuZ2UuZGlzYWJsZWQ7XHJcbiAgIH1cclxuXHJcblxyXG4gICAvKipcclxuICAgICogQHBhcmFtIHBhcmVudCBUaGUgcGFyZW50IGh0bWwgb2JqZWN0LlxyXG4gICAgKiBAcGFyYW0gc2V0dXAgVGhlIHNldHVwIGRhdGEgb2JqZWN0XHJcbiAgICAqL1xyXG4gICBwdWJsaWMgY29uc3RydWN0b3IocGFyZW50OiBIVE1MRWxlbWVudCwgc2V0dXA6IElTbGlkZXJTZXR1cCkge1xyXG5cclxuICAgICAgY29uc3QgaWQgPSBzZXR1cC5pZCA/PyAnU2xpZGVyJztcclxuICAgICAgdGhpcy5fZ2V0VGV4dCA9IHNldHVwLm9uR2V0VGV4dDtcclxuXHJcbiAgICAgIHRoaXMuZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIHRoaXMuZGl2LmlkID0gaWQ7XHJcbiAgICAgIHRoaXMuZGl2LmNsYXNzTmFtZSA9ICdTbGlkZXJEaXYnO1xyXG4gICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5kaXYpO1xyXG5cclxuICAgICAgdGhpcy5fbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gICAgICB0aGlzLl9sYWJlbC5pZCA9IGlkICsgJ0xhYmVsJztcclxuICAgICAgdGhpcy5fbGFiZWwuY2xhc3NOYW1lID0gJ1NsaWRlckxhYmVsJztcclxuICAgICAgdGhpcy5fbGFiZWwuaW5uZXJUZXh0ID0gc2V0dXAubGFiZWwgPz8gJyc7XHJcbiAgICAgIHRoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMuX2xhYmVsKTtcclxuXHJcbiAgICAgIHRoaXMuX3JhbmdlTWFwcGVyID0gbmV3IFJhbmdlTWFwcGVyKHNldHVwLm1pbiwgc2V0dXAubWF4KTtcclxuXHJcbiAgICAgIHRoaXMuX3JhbmdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgdGhpcy5fcmFuZ2UudHlwZSA9ICdyYW5nZSc7XHJcbiAgICAgIHRoaXMuX3JhbmdlLmlkID0gaWQgKyAnUmFuZ2UnO1xyXG4gICAgICB0aGlzLl9yYW5nZS5jbGFzc05hbWUgPSAnU2xpZGVyUmFuZ2UnO1xyXG4gICAgICB0aGlzLl9yYW5nZS5taW4gPSB0aGlzLl9yYW5nZU1hcHBlci5zbGlkZXJNaW4udG9TdHJpbmcoKTtcclxuICAgICAgdGhpcy5fcmFuZ2UubWF4ID0gdGhpcy5fcmFuZ2VNYXBwZXIuc2xpZGVyTWF4LnRvU3RyaW5nKCk7XHJcbiAgICAgIHRoaXMuX3JhbmdlLnZhbHVlID0gdGhpcy5fcmFuZ2VNYXBwZXIucmVhbFRvU2xpZGVyKHNldHVwLnZhbHVlKS50b1N0cmluZygpO1xyXG4gICAgICB0aGlzLl9yYW5nZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgdGhpcy51cGRhdGVTcGFuQ29sb3IoKTtcclxuICAgICAgICAgdGhpcy51cGRhdGVTcGFuVGV4dCgpXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLl9sYWJlbC5odG1sRm9yID0gdGhpcy5fcmFuZ2UuaWQ7XHJcbiAgICAgIHRoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMuX3JhbmdlKTtcclxuXHJcbiAgICAgIGlmIChzZXR1cC5jb2xvcnMpIHtcclxuICAgICAgICAgdGhpcy5fY29sb3JTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgICB0aGlzLl9jb2xvclNwYW4uaWQgPSBpZCArICdDb2xvclNwYW4nO1xyXG4gICAgICAgICB0aGlzLl9jb2xvclNwYW4uY2xhc3NOYW1lID0gJ1NsaWRlckNvbG9yU3Bhbic7XHJcbiAgICAgICAgIHRoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMuX2NvbG9yU3Bhbik7XHJcblxyXG4gICAgICAgICAvLyBzZXQgdGhlIGluaXRpYWwgY29sb3IuXHJcbiAgICAgICAgIHRoaXMuY29sb3JzID0gc2V0dXAuY29sb3JzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLl92YWx1ZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgIHRoaXMuX3ZhbHVlU3Bhbi5pZCA9IGlkICsgJ1ZhbHVlU3Bhbic7XHJcbiAgICAgIHRoaXMuX3ZhbHVlU3Bhbi5jbGFzc05hbWUgPSAnU2xpZGVyVmFsdWVTcGFuJztcclxuICAgICAgLy8gICAgICB0aGlzLl92YWx1ZVNwYW4uaW5uZXJUZXh0ID0gc2V0dXAudmFsdWUudG9TdHJpbmcoKTtcclxuICAgICAgdGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy5fdmFsdWVTcGFuKTtcclxuXHJcbiAgICAgIC8vIHNldCB0aGUgaW5pdGlhbCBzcGFuIHRleHRcclxuICAgICAgdGhpcy51cGRhdGVTcGFuVGV4dCgpO1xyXG5cclxuICAgICAgaWYgKHNldHVwLm9uaW5wdXQpIHtcclxuICAgICAgICAgdGhpcy5fcmFuZ2Uub25pbnB1dCA9ICgpID0+IHNldHVwLm9uaW5wdXQodGhpcyk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFNldHMgdGhlIHNwYW4gY29sb3IgdG8gdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBjb2xvci5cclxuICAgICovXHJcbiAgIHByaXZhdGUgdXBkYXRlU3BhbkNvbG9yKCk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy5fY29sb3JzKSB7XHJcbiAgICAgICAgIGNvbnN0IHZhbCA9ICh0aGlzLnZhbHVlIC0gdGhpcy5taW4pIC8gKHRoaXMubWF4IC0gdGhpcy5taW4pO1xyXG4gICAgICAgICBjb25zdCBjb2xvciA9IGh0bWxDb2xvci5mcm9tQ29sb3IodGhpcy5fY29sb3JzLmdldCh2YWwpKTtcclxuICAgICAgICAgdGhpcy5fY29sb3JTcGFuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yLnRvSGV4KClcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogU2V0cyB0aGUgc3BhbiBjb2xvciB0byB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGNvbG9yLlxyXG4gICAgKi9cclxuICAgcHJpdmF0ZSB1cGRhdGVTcGFuVGV4dCgpOiB2b2lkIHtcclxuICAgICAgaWYgKHRoaXMuX2dldFRleHQpIHtcclxuICAgICAgICAgdGhpcy5fdmFsdWVTcGFuLmlubmVyVGV4dCA9IHRoaXMuX2dldFRleHQodGhpcyk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIEdldHMgdGhlIGh0bWwgcmFuZ2Ugb2JqZWN0XHJcbiAgICAqIFxyXG4gICAgKiBAcmV0dXJucyBUaGUgaHRtbCByYW5nZSBvYmplY3QuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgZ2V0IHJhbmdlKCk6IEhUTUxJbnB1dEVsZW1lbnQge1xyXG4gICAgICByZXR1cm4gdGhpcy5fcmFuZ2U7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBHZXRzIHRoZSBjdXJyZW50IHNsaWRlciB2YWx1ZVxyXG4gICAgKiBcclxuICAgICogQHJldHVybnMgdGhlIGN1cnJlbnQgc2xpZGVyIHZhbHVlXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgZ2V0IHZhbHVlKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9yYW5nZU1hcHBlci5zbGlkZXJUb1JlYWwodGhpcy5fcmFuZ2UudmFsdWVBc051bWJlcik7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBTZXRzIHRoZSB2YWx1ZSBvZiB0aGUgc2xpZGVyIChhbmQgYXNzb2NpYXRlZCBjb250ZW50KVxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIHZhbCB0aGUgZGVzaXJlZCBzbGlkZXIgdmFsdWVcclxuICAgICovXHJcbiAgIHB1YmxpYyBzZXQgdmFsdWUodmFsOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5fcmFuZ2UudmFsdWVBc051bWJlciA9IHRoaXMuX3JhbmdlTWFwcGVyLnJlYWxUb1NsaWRlcih2YWwpO1xyXG4gICAgICB0aGlzLnVwZGF0ZVNwYW5Db2xvcigpO1xyXG4gICAgICB0aGlzLnVwZGF0ZVNwYW5UZXh0KCk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBHZXRzIHRoZSB2YWx1ZSBvZiB0aGUgc2xpZGVyIGFzIGEgcGVyY2VudCBbMC0xXSBvZiB0aGUgcmFuZ2VcclxuICAgICogXHJcbiAgICAqIEByZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgc2xpZGVyIGFzIGEgcGVyY2VudFxyXG4gICAgKi9cclxuICAgcHVibGljIGdldCB2YWx1ZUFzUGVyY2VudCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy52YWx1ZSAvICh0aGlzLm1heCAtIHRoaXMubWluKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIEdldHMgdGhlIG1pbiBzbGlkZXIgdmFsdWUuXHJcbiAgICAqIFxyXG4gICAgKiBAcmV0dXJucyBUaGUgbWluIHNsaWRlciB2YWx1ZS5cclxuICAgICovXHJcbiAgIHB1YmxpYyBnZXQgbWluKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9yYW5nZU1hcHBlci5yZWFsTWluO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogR2V0cyB0aGUgbWF4IHNsaWRlciB2YWx1ZS5cclxuICAgICpcclxuICAgICogQHJldHVybnMgVGhlIG1heCBzbGlkZXIgdmFsdWUuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgZ2V0IG1heCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5fcmFuZ2VNYXBwZXIucmVhbE1heDtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFNldHMgdGhlIG1heCBzbGlkZXIgdmFsdWUuXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gdmFsdWUgVGhlIG1heCBzbGlkZXIgdmFsdWUuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc2V0IG1heCh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIC8vIGdldCB0aGUgdmFsdWUgYmVmb3JlIHdlIGNoYW5nZSByYW5nZSB2YWx1ZXNcclxuICAgICAgbGV0IGN1cnJlbnRWYWx1ZSA9IE1hdGgubWluKHRoaXMudmFsdWUsIHZhbHVlKTtcclxuXHJcbiAgICAgIC8vIGNoYW5nZSB0aGUgcmFuZ2VcclxuICAgICAgdGhpcy5fcmFuZ2VNYXBwZXIucmVhbE1heCA9IHZhbHVlO1xyXG4gICAgICB0aGlzLl9yYW5nZS52YWx1ZUFzTnVtYmVyID0gdGhpcy5fcmFuZ2VNYXBwZXIucmVhbFRvU2xpZGVyKGN1cnJlbnRWYWx1ZSk7XHJcblxyXG4gICAgICAvLyB1cGRhdGUgR1VJXHJcbiAgICAgIHRoaXMudXBkYXRlU3BhbkNvbG9yKCk7XHJcbiAgICAgIHRoaXMudXBkYXRlU3BhblRleHQoKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFNldHMgdGhlIGNvbG9yIGZvciB0aGUgc2xpZGVyXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc2V0IGNvbG9ycyhjb2xvcnM6IGh0bWxDb2xvcltdKSB7XHJcblxyXG4gICAgICAvLyBzdG9yZSB0aGUgY29sb3JzXHJcbiAgICAgIHRoaXMuX2NvbG9ycyA9IG5ldyBDb2xvclJhbmdlKGNvbG9ycyk7XHJcblxyXG4gICAgICAvLyBidWlsZCB0aGUgZ3JhZGllbnQgc3R5bGUgZm9yIHRoZSByYW5nZSBvYmplY3RcclxuICAgICAgbGV0IGdyYWRpZW50U3RyID0gJzkwZGVnJztcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgZ3JhZGllbnRTdHIgKz0gJywgJyArIGNvbG9yc1tpXS50b0NzcygpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuX3JhbmdlLnN0eWxlLmJhY2tncm91bmQgPSAnbGluZWFyLWdyYWRpZW50KCcgKyBncmFkaWVudFN0ciArICcpJztcclxuXHJcbiAgICAgIC8vIHVwZGF0ZSB0aGUgc3BhbiBjb2xvciB0b29cclxuICAgICAgdGhpcy51cGRhdGVTcGFuQ29sb3IoKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIEdldHMgdGhlIGN1cnJlbnQgY29sb3IgYXMgYW4gaHRtbENvbG9yIG9iamVjdC5cclxuICAgICpcclxuICAgICogQHJldHVybnMgVGhlIGN1cnJlbnQgY29sb3IuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgZ2V0IGh0bWxDb2xvcigpOiBodG1sQ29sb3Ige1xyXG4gICAgICBpZiAodGhpcy5fY29sb3JzKSB7XHJcbiAgICAgICAgIGNvbnN0IHZhbCA9ICh0aGlzLnZhbHVlIC0gdGhpcy5taW4pIC8gKHRoaXMubWF4IC0gdGhpcy5taW4pO1xyXG4gICAgICAgICByZXR1cm4gdGhpcy5fY29sb3JzLmdldCh2YWwpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICByZXR1cm4gaHRtbENvbG9yV2l0aEFscGhhLnRyYW5zcGFyZW50O1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBHZXRzIHRoZSBjdXJyZW50IGNvbG9yIGFzIGEgZ2xDb2xvciBvYmplY3QuXHJcbiAgICAqIFxyXG4gICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCBjb2xvci5cclxuICAgICovXHJcbiAgIHB1YmxpYyBnZXQgZ2xDb2xvcigpOiBnbENvbG9yMyB7XHJcbiAgICAgIGlmICh0aGlzLl9jb2xvcnMpIHtcclxuICAgICAgICAgY29uc3QgdmFsID0gKHRoaXMudmFsdWUgLSB0aGlzLm1pbikgLyAodGhpcy5tYXggLSB0aGlzLm1pbik7XHJcbiAgICAgICAgIHJldHVybiB0aGlzLl9jb2xvcnMuZ2V0KHZhbCkudG9HbENvbG9yKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHJldHVybiBuZXcgZ2xDb2xvcjMoWzAsIDAsIDBdKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgcmVmcmVzaCgpOiB2b2lkIHtcclxuICAgICAgLy8gVE9ETyBpbXBsZW1lbnRcclxuICAgfVxyXG59IiwiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1jYWxsICovXHJcbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2VzcyAqL1xyXG5pbXBvcnQgeyBJQXBwIH0gZnJvbSAnLi9JQXBwJztcclxuaW1wb3J0IHsgTWVudWJhciB9IGZyb20gJy4vR1VJL01lbnUnO1xyXG5pbXBvcnQgeyBQYXRoVHJhY2VyQXBwIH0gZnJvbSAnLi9BcHBzL1BhdGhUcmFjZXIvUGF0aFRyYWNlckFwcCc7XHJcbmltcG9ydCB7IFZpZXdlckFwcCB9IGZyb20gJy4vQXBwcy9WaWV3ZXIvVmlld2VyQXBwJztcclxuaW1wb3J0IHsgU3F1aW50QXBwIH0gZnJvbSAnLi9BcHBzL1NxdWludC9TcXVpbnRBcHAnO1xyXG5pbXBvcnQgeyBiYXNlVXJsIH0gZnJvbSAnLi9VdGlsL0dsb2JhbHMnO1xyXG5pbXBvcnQgeyBTZWVBcHAgfSBmcm9tICcuL0FwcHMvU3F1aW50L0FydFNlZUFwcCc7XHJcbmltcG9ydCB7IERldmljZSB9IGZyb20gJy4vVXRpbC9EZXZpY2UnO1xyXG5pbXBvcnQgeyBNb2RlbFRpbWVyQXBwIH0gZnJvbSAnLi9BcHBzL1NxdWludC9Nb2RlbFRpbWVyQXBwJztcclxuXHJcbmVudW0gQXBwVHlwZSB7XHJcbiAgIEFydGlzdHNCYWxsID0gJ0FydGlzdHNCYWxsJyxcclxuICAgVmlld2VyID0gJ1ZpZXdlcicsXHJcbiAgIFNxdWludCA9ICdTcXVpbnQnLFxyXG4gICBBcnRTZWUgPSAnQXJ0LVNlZScsXHJcbiAgIE1vZGVsVGltZXIgPSAnTW9kZWxUaW1lcicsXHJcbn1cclxuXHJcbmludGVyZmFjZSBJUGFyYW0ge1xyXG4gICBuYW1lOiBzdHJpbmcsXHJcbiAgIHZhbHVlOiBzdHJpbmcsXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMYXVuY2hlciB7XHJcbiAgIHByaXZhdGUgZGl2OiBIVE1MRGl2RWxlbWVudCB8IHVuZGVmaW5lZDtcclxuICAgcHJpdmF0ZSBhcHA6IElBcHAgfCBudWxsID0gbnVsbDtcclxuICAgcHJpdmF0ZSBtZW51YmFyOiBNZW51YmFyIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICAgICAgdGhpcy5zZXRGb250U2l6ZSgpO1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCAoKSA9PiB0aGlzLnNldEZvbnRTaXplKCkpO1xyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuY2hhbmdlJywgKCkgPT4gdGhpcy5zZXRGb250U2l6ZSgpKTtcclxuXHJcbiAgICAgIC8vIGRlZmF1bHQgYXBwIHR5cGUgaWYgb25lIGlzbid0IHNwZWNpZmllZCB2aWEgYSBVUkwgcGFyYW1ldGVyXHJcbiAgICAgIGxldCB0eXBlID0gQXBwVHlwZS5TcXVpbnQ7XHJcblxyXG4gICAgICAvLyBjcmVhdGUgdGhlIG1haW4gZGl2XHJcbiAgICAgIHRoaXMuZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5kaXYpO1xyXG5cclxuICAgICAgdGhpcy5tZW51YmFyID0gbmV3IE1lbnViYXIodGhpcy5kaXYpO1xyXG4gICAgICBsZXQgaHRtbCA9ICc8aW1nIHN0eWxlPVwid2lkdGg6IDFlbVwiIHNyYz1cIicgKyBiYXNlVXJsKCkgKyAnaW1nL2FwcHMuc3ZnJyArICdcIiAvPic7XHJcbiAgICAgIGNvbnN0IHN1Yk1lbnUgPSB0aGlzLm1lbnViYXIuYWRkU3ViTWVudShodG1sLCAnQXBwcycpO1xyXG4gICAgICBzdWJNZW51LmFkZEl0ZW0oJzNEIFZpZXdlcicsICgpID0+IGxvY2F0aW9uLmhyZWYgPSB0aGlzLmdldFVybChBcHBUeXBlLlZpZXdlcikpO1xyXG4gICAgICBzdWJNZW51LmFkZEl0ZW0oJ1NxdWludCcsICgpID0+IGxvY2F0aW9uLmhyZWYgPSB0aGlzLmdldFVybChBcHBUeXBlLlNxdWludCkpO1xyXG4gICAgICBzdWJNZW51LmFkZEl0ZW0oJ0FydGlzdFxcJ3MgQmFsbCcsICgpID0+IGxvY2F0aW9uLmhyZWYgPSB0aGlzLmdldFVybChBcHBUeXBlLkFydGlzdHNCYWxsKSk7XHJcbiAgICAgIHN1Yk1lbnUuYWRkSXRlbSgnQXJ0LVNlZScsICgpID0+IGxvY2F0aW9uLmhyZWYgPSB0aGlzLmdldFVybChBcHBUeXBlLkFydFNlZSkpO1xyXG4gICAgICBzdWJNZW51LmFkZEl0ZW0oJ01vZGVsVGltZXInLCAoKSA9PiBsb2NhdGlvbi5ocmVmID0gdGhpcy5nZXRVcmwoQXBwVHlwZS5Nb2RlbFRpbWVyKSk7XHJcblxyXG4gICAgICBjb25zdCBwYXJhbVN0cmluZyA9IGxvY2F0aW9uLmhyZWYuc3BsaXQoJz8nKVsxXTtcclxuICAgICAgY29uc3QgcXVlcnkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHBhcmFtU3RyaW5nKTtcclxuXHJcbiAgICAgIC8vIFRPRE8gdGhpcyBjYW4gYmUgZG9uZSB3aXRob3V0IGEgc3dpdGNoIHN0YXRlbWVudCwgYnV0IElcclxuICAgICAgLy8gZG9uJ3QgaGF2ZSB0aW1lIHJpZ2h0IG5vdyB0byBmaWd1cmUgb3V0IGhvdyB0byBtYWtlIGl0XHJcbiAgICAgIC8vIHdvcmsgd2l0aCBzdHJpY3QgVHlwZVNjcmlwdCBhbmQgRVNMaW50XHJcbiAgICAgIGNvbnN0IGFwcFR5cGVTdHIgPSBxdWVyeS5nZXQoJ0FwcCcpO1xyXG4gICAgICBzd2l0Y2ggKGFwcFR5cGVTdHIpIHtcclxuICAgICAgICAgY2FzZSBBcHBUeXBlLkFydGlzdHNCYWxsOlxyXG4gICAgICAgICAgICB0eXBlID0gQXBwVHlwZS5BcnRpc3RzQmFsbDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICBjYXNlIEFwcFR5cGUuU3F1aW50OlxyXG4gICAgICAgICAgICB0eXBlID0gQXBwVHlwZS5TcXVpbnQ7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgY2FzZSBBcHBUeXBlLlZpZXdlcjpcclxuICAgICAgICAgICAgdHlwZSA9IEFwcFR5cGUuVmlld2VyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGNhc2UgQXBwVHlwZS5BcnRTZWU6XHJcbiAgICAgICAgICAgIHR5cGUgPSBBcHBUeXBlLkFydFNlZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICBjYXNlIEFwcFR5cGUuTW9kZWxUaW1lcjpcclxuICAgICAgICAgICAgdHlwZSA9IEFwcFR5cGUuTW9kZWxUaW1lcjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgcXVlcnkuZGVsZXRlKCdBcHAnKTtcclxuXHJcbiAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmdldEZpbGVGcm9tUXVlcnkocXVlcnkpO1xyXG5cclxuICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgIGNhc2UgQXBwVHlwZS5BcnRpc3RzQmFsbDpcclxuICAgICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSAnQXJ0aXN0XFwncyBUb29sczogQXJ0aXN0XFwncyBCYWxsJztcclxuICAgICAgICAgICAgdGhpcy5hcHAgPSBuZXcgUGF0aFRyYWNlckFwcChmaWxlKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICBjYXNlIEFwcFR5cGUuVmlld2VyOlxyXG4gICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9ICdBcnRpc3RcXCdzIFRvb2xzOiBWaWV3ZXInO1xyXG4gICAgICAgICAgICB0aGlzLmFwcCA9IG5ldyBWaWV3ZXJBcHAoZmlsZSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgY2FzZSBBcHBUeXBlLlNxdWludDpcclxuICAgICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSAnU3F1aW50JztcclxuICAgICAgICAgICAgdGhpcy5hcHAgPSBuZXcgU3F1aW50QXBwKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgY2FzZSBBcHBUeXBlLkFydFNlZTpcclxuICAgICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSAnQXJ0LVNlZSc7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwID0gbmV3IFNlZUFwcCgpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGNhc2UgQXBwVHlwZS5Nb2RlbFRpbWVyOlxyXG4gICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9ICdNb2RlbCBUaW1lcic7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwID0gbmV3IE1vZGVsVGltZXJBcHAoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5hcHAuY3JlYXRlKHRoaXMuZGl2KTtcclxuICAgICAgdGhpcy5hcHAuYnVpbGRNZW51KHRoaXMubWVudWJhcik7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgZ2V0RmlsZUZyb21RdWVyeShxdWVyeTogVVJMU2VhcmNoUGFyYW1zKTogc3RyaW5nIHtcclxuICAgICAgY29uc3QgcGFyYW1zOiBJUGFyYW1bXSA9IFtdO1xyXG4gICAgICBxdWVyeS5mb3JFYWNoKCh2YWx1ZTogc3RyaW5nLCBrZXk6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICBwYXJhbXMucHVzaCh7XHJcbiAgICAgICAgICAgIG5hbWU6IGtleSxcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgIH0pXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBpZiAocGFyYW1zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICByZXR1cm4gcGFyYW1zWzBdLm5hbWU7IC8vIHVubmFtZWQgcGFyYW1ldGVyXHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGdldFVybCh0eXBlOiBBcHBUeXBlKTogc3RyaW5nIHtcclxuICAgICAgY29uc3QgYmFzZSA9IGxvY2F0aW9uLmhyZWYuc3BsaXQoJz8nKVswXTtcclxuICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgIGNhc2UgQXBwVHlwZS5BcnRpc3RzQmFsbDpcclxuICAgICAgICAgICAgcmV0dXJuIGJhc2UgKyAnP0FwcD1BcnRpc3RzQmFsbCc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgY2FzZSBBcHBUeXBlLlNxdWludDpcclxuICAgICAgICAgICAgcmV0dXJuIGJhc2UgKyAnP0FwcD1TcXVpbnQnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGNhc2UgQXBwVHlwZS5WaWV3ZXI6XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlICsgJz9BcHA9Vmlld2VyJztcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICBjYXNlIEFwcFR5cGUuQXJ0U2VlOlxyXG4gICAgICAgICAgICByZXR1cm4gYmFzZSArICc/QXBwPUFydC1TZWUnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGNhc2UgQXBwVHlwZS5Nb2RlbFRpbWVyOlxyXG4gICAgICAgICAgICByZXR1cm4gYmFzZSArICc/QXBwPU1vZGVsVGltZXInO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgc2V0Rm9udFNpemUoKSB7XHJcbiAgICAgIC8vIHN1cHBvc2VkIHRvIGJlIGFibGUgdG8gZG8gdGhpcyBzdHVmZiB3aXRoIG1lZGlhIHF1ZXJpZXMsIGJ1dCBJIGdpdmUgdXAhIEJyb3dzZXJzXHJcbiAgICAgIC8vIGJlaGF2ZSBkaWZmZXJlbnRseSBvbiBtb2JpbGUgZGV2aWNlcyBhbmQgc29tZSBhbHRlciBzY2FsaW5nIGZvciBwb3J0cmFpdCBhbmRcclxuICAgICAgLy8gbGFuZHNjYXBlIHRvbyFcclxuICAgICAgbGV0IGRldmljZSA9IG5ldyBEZXZpY2UoKTtcclxuXHJcbiAgICAgIGxldCBmb250U2l6ZSA9IDE0O1xyXG4gICAgICBpZiAoZGV2aWNlLmlzRmlyZWZveCkge1xyXG4gICAgICAgICBmb250U2l6ZSA9IDE0O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICBpZiAoZGV2aWNlLmlzTW9iaWxlICYmIGRldmljZS5pc1BvcnRyYWl0KSB7XHJcbiAgICAgICAgICAgIGlmIChkZXZpY2UuaXNJUGhvbmUpIHtcclxuICAgICAgICAgICAgICAgZm9udFNpemUgPSAzMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgZm9udFNpemUgPSAyNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZGV2aWNlLmlzSVBob25lKSB7XHJcbiAgICAgICAgICAgICAgIGZvbnRTaXplID0gMTY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgIGZvbnRTaXplID0gMTQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgJiYgZGV2aWNlLmlzUG9ydHJhaXQgJiYgZGV2aWNlLmlzTW9iaWxlICYmIGRldmljZS5pc1NhZmFyaSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgZm9udFNpemUgLz0gMjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gc2V0IHRoZSB2YXJpYWJsZSBpbnRvIHRoZSBDU1MgY29kZVxyXG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tZm9udFNpemUnLCBmb250U2l6ZSArICdwdCcpO1xyXG5cclxuICAgICAgLy9hbGVydCgnc2V0dGluZyBmb250IHNpemUgdG8gJyArIGZvbnRTaXplICsgJ3B0Jyk7XHJcbiAgIH1cclxufSIsImltcG9ydCAnLi9CbG9iU2hpbSc7XHJcblxyXG4vKipcclxuICogSW50ZXJuYWwgY2xhc3MgZm9yIHNsaWNpbmcgdXAgQmxvYnNcclxuICovXHJcbmNsYXNzIEJsb2JTbGljZXIge1xyXG5cclxuICAgLy8gVGhlIHN0YXJ0IGJ5dGUgdmFsdWUgZm9yIHRoZSBuZXh0IHNsaWNlXHJcbiAgIHByaXZhdGUgc3RhcnQgPSAwO1xyXG5cclxuICAgLy8gVGhlIEJsb2Igd2UncmUgc2xpY2luZyBcclxuICAgcHJpdmF0ZSBibG9iOiBCbG9iO1xyXG5cclxuICAgLyoqXHJcbiAgICAqIEBwYXJhbSBibG9iIFRoZSBCbG9iIHRvIGJlIHNsaWNlZFxyXG4gICAgKi9cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKGJsb2I6IEJsb2IpIHtcclxuICAgICAgdGhpcy5ibG9iID0gYmxvYjtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIEdldHMgdGhlIG5leHQgc2xpY2UuXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gbGVuIFRoZSBsZW5ndGggb2YgdGhlIHNsaWNlLlxyXG4gICAgKiBAcmV0dXJucyBUaGUgc2xpY2VkIEJsb2IuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgbmV4dChsZW46IG51bWJlcik6IEJsb2Ige1xyXG4gICAgICBjb25zdCBiID0gdGhpcy5ibG9iLnNsaWNlKHRoaXMuc3RhcnQsIHRoaXMuc3RhcnQgKyBsZW4pO1xyXG4gICAgICB0aGlzLnN0YXJ0ICs9IGxlbjtcclxuICAgICAgcmV0dXJuIGI7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBTbGljZXMgdGhlIEJsb2IgYW5kIHJldHVybnMgaXQgYXMgYW4gQXJyYXlCdWZmZXIuXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gbGVuIFRoZSBsZW5ndGggb2YgdGhlIHNsaWNlLlxyXG4gICAgKiBAcmV0dXJucyBBbiBBcnJheUJ1ZmZlciBwcm9taXNlLlxyXG4gICAgKi9cclxuICAgcHVibGljIG5leHRBcnJheUJ1ZmZlcihsZW46IG51bWJlcik6IFByb21pc2U8QXJyYXlCdWZmZXI+IHtcclxuICAgICAgcmV0dXJuIHRoaXMubmV4dChsZW4pLmFycmF5QnVmZmVyKCk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBTbGljZXMgdGhlIEJsb2IgYW5kIHJldHVybnMgaXQgYXMgYW4gSW50MzJBcnJheVxyXG4gICAgKlxyXG4gICAgKiBAcGFyYW0gbGVuIFRoZSBsZW5ndGggb2YgdGhlIHNsaWNlLlxyXG4gICAgKiBAcmV0dXJucyBBbiBJbnQzMkFycmF5IHByb21pc2UuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgYXN5bmMgbmV4dEludDMyQXJyYXkobGVuOiBudW1iZXIpOiBQcm9taXNlPEludDMyQXJyYXk+IHtcclxuICAgICAgcmV0dXJuIG5ldyBJbnQzMkFycmF5KGF3YWl0IHRoaXMubmV4dEFycmF5QnVmZmVyKGxlbikpO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogU2xpY2VzIHRoZSBCbG9iIGFuZCByZXR1cm5zIGl0IGFzIGEgc3RyaW5nXHJcbiAgICAqXHJcbiAgICAqIEBwYXJhbSBsZW4gVGhlIGxlbmd0aCBvZiB0aGUgc2xpY2UuXHJcbiAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHByb21pc2UuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgYXN5bmMgbmV4dFN0cmluZyhsZW46IG51bWJlcik6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgIHJldHVybiB0aGlzLm5leHQobGVuKS50ZXh0KCk7XHJcbiAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE1hbmFnZXMgY3JlYXRpb24gYW5kIGV4dHJhY3Rpb24gb2YgYSBzZWxmIGRlc2NyaWJpbmcgQmxvYi4gRGF0YVxyXG4gKiBpcyBzdG9yZWQgYXM6XHJcbiAqIFxyXG4gKiBbbnVtRW50cmllc10gLSBUaGUgbnVtYmVyIGVudHJpZXMgaW4gdGhlIGZpbGUuIDQgYnl0ZSBJbnQzMlxyXG4gKiBbc2l6ZXNdIC0gU2l6ZXMgb2YgYWxsIHRoZSBlbnRyaWVzLCBpbmNsdWRpbmcgdGhlIGluZm8gb2JqZWN0XHJcbiAqIFtpbmZvXSAtIFVzZXIgc3VwcGxpZWQgZGF0YSBhcyBhIEpTT04gc3RyaW5nXHJcbiAqIFtlbnRyeSAxXSAtIEZpcnN0IHVzZXIgZW50cnlcclxuICogW2VudHJ5IDJdIC0gU2Vjb25kIHVzZXIgZW50cnlcclxuICogWy4uLl1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCbG9iRmlsZSB7XHJcbiAgIHB1YmxpYyBpbmZvOiBhbnk7XHJcbiAgIHB1YmxpYyBwYXJ0czogQmxvYltdID0gW107XHJcblxyXG4gICAvKipcclxuICAgICogQHBhcmFtIGluZm8gVGhlIGluZm9ybWF0aW9uIGhlYWRlciB0byBiZSBzdG9yZWQgd2l0aCB0aGUgQmxvYlxyXG4gICAgKiBAcGFyYW0gcGFydHMgVGhlIGRhdGEgY29udGVudHMgb2YgdGhlIEJsb2JcclxuICAgICovXHJcbiAgIHByaXZhdGUgY29uc3RydWN0b3IoaW5mbzogb2JqZWN0LCBwYXJ0czogQmxvYltdKSB7XHJcbiAgICAgIHRoaXMuaW5mbyA9IGluZm87XHJcbiAgICAgIHRoaXMucGFydHMgPSBwYXJ0cztcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENvbnZlcnRzIGEgcmF3IEJsb2Igb2JqZWN0IGludG8gYSBCbG9iRmlsZVxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIGJsb2IgVGhlIEJsb2IgdG8gcHJvY2Vzcy5cclxuICAgICogQHJldHVybiBBIEJsb2JGaWxlIHByb21pc2UuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc3RhdGljIGFzeW5jIGV4dHJhY3QoYmxvYjogQmxvYik6IFByb21pc2U8QmxvYkZpbGU+IHtcclxuXHJcbiAgICAgIGNvbnN0IGJsb2JTbGljZXIgPSBuZXcgQmxvYlNsaWNlcihibG9iKTtcclxuXHJcbiAgICAgIC8vIGZpcnN0IGV4dHJhY3QgdGhlIG51bWJlciBvZiBlbnRyaWVzXHJcbiAgICAgIGNvbnN0IG51bUVudHJpZXMgPSAoYXdhaXQgYmxvYlNsaWNlci5uZXh0SW50MzJBcnJheSg0KSlbMF07XHJcblxyXG4gICAgICAvLyB0aGUgdGhlIHNpemVzIGFycmF5XHJcbiAgICAgIGNvbnN0IHNpemVzID0gYXdhaXQgYmxvYlNsaWNlci5uZXh0SW50MzJBcnJheSg0ICogKG51bUVudHJpZXMgKyAxKSk7XHJcblxyXG4gICAgICAvLyB0aGVuIHRoZSBpbmZvIG9iamVjdFxyXG4gICAgICBjb25zdCBqc29uSW5mbyA9IGF3YWl0IGJsb2JTbGljZXIubmV4dFN0cmluZyhzaXplc1swXSk7XHJcblxyXG4gICAgICAvLyB0aGVuIGFsbCB0aGUgc3ViIGJsb2JzXHJcbiAgICAgIGNvbnN0IHBhcnRzOiBCbG9iW10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1FbnRyaWVzOyBpKyspIHtcclxuICAgICAgICAgY29uc3Qgc2l6ZSA9IHNpemVzW2kgKyAxXTtcclxuICAgICAgICAgcGFydHMucHVzaChibG9iU2xpY2VyLm5leHQoc2l6ZSkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbmV3IEJsb2JGaWxlKEpTT04ucGFyc2UoanNvbkluZm8pLCBwYXJ0cyk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBDcmVhdGUgYSBCbG9iRmlsZSBCbG9iXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gaW5mbyBUaGUgaW5mb3JtYXRpb24gaGVhZGVyIHRvIGJlIHN0b3JlZCB3aXRoIHRoZSBCbG9iXHJcbiAgICAqIEBwYXJhbSBwYXJ0cyBUaGUgZGF0YSBjb250ZW50cyBvZiB0aGUgQmxvYlxyXG4gICAgKi9cclxuICAgcHVibGljIHN0YXRpYyBjcmVhdGVCbG9iKGluZm86IG9iamVjdCwgcGFydHM6IEJsb2JQYXJ0W10pOiBCbG9iIHtcclxuXHJcbiAgICAgIGNvbnN0IGpzb25JbmZvID0gSlNPTi5zdHJpbmdpZnkoaW5mbyk7XHJcblxyXG4gICAgICAvLyBCdWlsZCB0aGUgYXJyYXkgb2Ygc2l6ZXNcclxuICAgICAgY29uc3Qgc2l6ZXM6IG51bWJlcltdID0gW2pzb25JbmZvLmxlbmd0aF07XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgY29uc3QgcGFydCA9IHBhcnRzW2ldO1xyXG4gICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIEludDMyQXJyYXkpIHtcclxuICAgICAgICAgICAgc2l6ZXMucHVzaCg0ICogcGFydC5sZW5ndGgpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2UgaWYgKHBhcnQgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpIHtcclxuICAgICAgICAgICAgc2l6ZXMucHVzaCg0ICogcGFydC5sZW5ndGgpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2UgaWYgKHBhcnQgaW5zdGFuY2VvZiBTdHJpbmcpIHtcclxuICAgICAgICAgICAgc2l6ZXMucHVzaChwYXJ0Lmxlbmd0aCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9ICdVbnN1cHBvcnRlZCBCbG9iIFBhcnQgVHlwZTogJyArIHR5cGVvZiBwYXJ0O1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKG1zZyk7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGFzc2VtYmxlIHRoZSBibG9iIHBhcnRzXHJcbiAgICAgIGNvbnN0IGFsbFBhcnRzOiBCbG9iUGFydFtdID0gW107XHJcbiAgICAgIGFsbFBhcnRzLnB1c2gobmV3IEludDMyQXJyYXkoW3BhcnRzLmxlbmd0aF0pKTtcclxuICAgICAgYWxsUGFydHMucHVzaChuZXcgSW50MzJBcnJheShzaXplcykpO1xyXG4gICAgICBhbGxQYXJ0cy5wdXNoKGpzb25JbmZvKTtcclxuICAgICAgYWxsUGFydHMucHVzaCguLi5wYXJ0cyk7XHJcblxyXG4gICAgICAvLyBjcmVhdGUgdGhlIGJsb2JcclxuICAgICAgcmV0dXJuIG5ldyBCbG9iKGFsbFBhcnRzKTtcclxuICAgfVxyXG59IiwiLy8gbmVlZGVkIGZvciBTYWZhcmlcclxuaWYgKCFCbG9iLnByb3RvdHlwZS5hcnJheUJ1ZmZlcikge1xyXG4gICBCbG9iLnByb3RvdHlwZS5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uICgpOiBQcm9taXNlPEFycmF5QnVmZmVyPiB7XHJcblxyXG4gICAgICAvLyByZWFkIHRoZSBCbG9iIHRoZSBvbGQgZmFzaGlvbmVkIHdheVxyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2U8QXJyYXlCdWZmZXI+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHJcbiAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcblxyXG4gICAgICAgICAvLyByZWdpc3RlciBldmVudCBoYW5kbGVyc1xyXG4gICAgICAgICByZWFkZXIub25sb2FkZW5kID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQgYXMgQXJyYXlCdWZmZXIpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICByZWFkZXIub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcik7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIC8vIHN0YXJ0IHRoZSByZWFkXHJcbiAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcih0aGlzKTtcclxuICAgICAgfSk7XHJcbiAgIH1cclxufVxyXG5cclxuLy8gbmVlZGVkIGZvciBTYWZhcmlcclxuaWYgKCFCbG9iLnByb3RvdHlwZS50ZXh0KSB7XHJcblxyXG4gICAvLyByZWFkIHRoZSBCbG9iIHRoZSBvbGQgZmFzaGlvbmVkIHdheVxyXG4gICBCbG9iLnByb3RvdHlwZS50ZXh0ID0gZnVuY3Rpb24gKCk6IFByb21pc2U8c3RyaW5nPiB7XHJcblxyXG4gICAgICAvLyByZWFkIHRoZSBCbG9iIHRoZSBvbGQgZmFzaGlvbmVkIHdheVxyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblxyXG4gICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cclxuICAgICAgICAgLy8gcmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnNcclxuICAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgLy8gZGVjb2RlIGludG8gYSBzdHJpbmdcclxuICAgICAgICAgICAgY29uc3QgdHh0ID0gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpLmRlY29kZShyZWFkZXIucmVzdWx0IGFzIEFycmF5QnVmZmVyKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSh0eHQpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICByZWFkZXIub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcik7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIC8vIHN0YXJ0IHRoZSByZWFkXHJcbiAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcih0aGlzKTtcclxuICAgICAgfSk7XHJcbiAgIH1cclxufVxyXG4iLCJcclxuLyoqXHJcbiAqIENsYXNzIGZvciByZXByZXNlbnRpbmcgY29sb3IgdmFsdWVzLiBWYWx1ZXMgbWF5IGJlIG9uIGEgMC0xIG9yIDAtMjU1IHNjYWxlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbG9yIHtcclxuICAgcHVibGljIHI6IG51bWJlcjtcclxuICAgcHVibGljIGc6IG51bWJlcjtcclxuICAgcHVibGljIGI6IG51bWJlcjtcclxuICAgcHVibGljIGE6IG51bWJlcjtcclxuXHJcbiAgIC8qKlxyXG4gICAgKiBAcGFyYW0gY29sb3IgUkdCIHZhbHVlcyB0byBzdG9yZSBpbiB0aGlzIG9iamVjdFxyXG4gICAgKi9cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKGNvbG9yOiBudW1iZXJbXSkge1xyXG4gICAgICB0aGlzLnIgPSBjb2xvclswXTtcclxuICAgICAgdGhpcy5nID0gY29sb3JbMV07XHJcbiAgICAgIHRoaXMuYiA9IGNvbG9yWzJdO1xyXG5cclxuICAgICAgaWYgKGNvbG9yLmxlbmd0aCA9PT0gNCkge1xyXG4gICAgICAgICB0aGlzLmEgPSBjb2xvclszXTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgdGhpcy5hID0gMDtcclxuICAgICAgfVxyXG4gICB9XHJcbn0iLCJjb25zdCBOVU1fQ09MUyA9IDE1MDtcclxuXHJcbmV4cG9ydCB0eXBlIE1lc3NhZ2VIYW5kbGVyID0gKG1zZzogc3RyaW5nKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbnNvbGVDYXB0dXJlIHtcclxuXHJcbiAgIHByaXZhdGUgdGV4dEFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcblxyXG4gICAvLyBUT0RPIHNlcGFyYXRlIHRoaXMgY2xhc3MgaW50byB0d28uIE9uZSBmb3IganVzdCBpbnRlcmNlcHRpbmcgY29uc29sZSBtZXNzYWdlIGFuZFxyXG4gICAvLyBvbmUgZm9yIGJlaW5nIGEgR1VJIHRvIHNlZSBpdFxyXG4gICBwdWJsaWMgb25NZXNzYWdlOiBNZXNzYWdlSGFuZGxlciB8IG51bGw7XHJcblxyXG4gICBwdWJsaWMgZ2V0IHZpc2libGUoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKHRoaXMudGV4dEFyZWEpLmRpc3BsYXkgPT09ICdibG9jayc7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzZXQgdmlzaWJsZShmbGFnOiBib29sZWFuKSB7XHJcbiAgICAgIHRoaXMudGV4dEFyZWEuc3R5bGUuZGlzcGxheSA9IGZsYWcgPyAnYmxvY2snIDogJ25vbmUnO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IocGFyZW50OiBIVE1MRWxlbWVudCwgaWQgPSAnQ29uc29sZScsIG51bUNvbHMgPSBOVU1fQ09MUykge1xyXG4gICAgICB0aGlzLnRleHRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcclxuICAgICAgdGhpcy50ZXh0QXJlYS5pZCA9IGlkO1xyXG4gICAgICB0aGlzLnRleHRBcmVhLmNvbHMgPSBudW1Db2xzO1xyXG4gICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy50ZXh0QXJlYSk7XHJcblxyXG4gICAgICAvLyBUT0RPIHVwZGF0ZSB0aGVzZSBhbGwgdG8gdGFrZSB0aGUgY29ycmVjdCBhcmd1bWVudHMgZm9yIGNvbnNvbGUgZnVuY3Rpb25zXHJcbiAgICAgIGNvbnN0IG9sZExvZyA9IGNvbnNvbGUubG9nO1xyXG4gICAgICBjb25zb2xlLmxvZyA9IChtc2c6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICB0aGlzLmFwcGVuZChtc2cpO1xyXG4gICAgICAgICBvbGRMb2cobXNnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgb2xkVHJhY2UgPSBjb25zb2xlLnRyYWNlO1xyXG4gICAgICBjb25zb2xlLnRyYWNlID0gKG1zZzogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgIHRoaXMuYXBwZW5kKCdUUkFDRSAnICsgbXNnKTtcclxuICAgICAgICAgb2xkVHJhY2UobXNnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgb2xkSW5mbyA9IGNvbnNvbGUuaW5mbztcclxuICAgICAgY29uc29sZS5pbmZvID0gKG1zZzogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgIHRoaXMuYXBwZW5kKCdJTkZPICcgKyBtc2cpO1xyXG4gICAgICAgICBvbGRJbmZvKG1zZyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG9sZFdhcm4gPSBjb25zb2xlLndhcm47XHJcbiAgICAgIGNvbnNvbGUud2FybiA9IChtc2c6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICB0aGlzLmFwcGVuZCgnV0FSTiAnICsgbXNnKTtcclxuICAgICAgICAgb2xkV2Fybihtc2cpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBvbGRFcnJvciA9IGNvbnNvbGUuZXJyb3I7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IgPSAobXNnOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgdGhpcy5hcHBlbmQoJ0VSUk9SICcgKyBtc2cpO1xyXG4gICAgICAgICBvbGRFcnJvcihtc2cpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBvbGRDbGVhciA9IGNvbnNvbGUuY2xlYXI7XHJcbiAgICAgIGNvbnNvbGUuY2xlYXIgPSAoKSA9PiB7XHJcbiAgICAgICAgIHRoaXMudGV4dEFyZWEudGV4dENvbnRlbnQgPSAnJztcclxuICAgICAgICAgb2xkQ2xlYXIoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgd2luZG93Lm9uZXJyb3IgPSAoZXZlbnQ6IHN0cmluZyB8IEV2ZW50LCBzb3VyY2U6IHN0cmluZywgbGluZW5vOiBudW1iZXIsIGNvbG5vOiBudW1iZXIsIGVycm9yOiBFcnJvcikgPT4ge1xyXG4gICAgICAgICBjb25zdCBzdGFja1RyYWNlID0gZXJyb3IgJiYgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/ICdcXG4nICsgZXJyb3Iuc3RhY2sgOiAnJztcclxuICAgICAgICAgY29uc3QgbXNnID0gZXZlbnQgKyAnXFxuJyArIHNvdXJjZSArICcgbGluZTonICsgbGluZW5vICsgJywgY29sOicgKyBjb2xubyArIHN0YWNrVHJhY2U7XHJcbiAgICAgICAgIC8vYWxlcnQobXNnKTtcclxuICAgICAgICAgdGhpcy5hcHBlbmQobXNnKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGFwcGVuZChtc2c6IHN0cmluZykge1xyXG4gICAgICBsZXQgZnVsbG1zZyA9IHRoaXMudGV4dEFyZWEudmFsdWU7XHJcblxyXG4gICAgICBpZiAobXNnID09PSBudWxsIHx8IG1zZyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgIG1zZyA9ICcnICsgbXNnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodHlwZW9mIG1zZyAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgbXNnID0gJycgKyBtc2c7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG1zZyA9IG1zZy5zdWJzdHIoMCwgMTAwICogTlVNX0NPTFMpXHJcbiAgICAgIGZ1bGxtc2cgPSBtc2cgKyAnXFxuXFxuJyArIGZ1bGxtc2c7XHJcbiAgICAgIGZ1bGxtc2cgPSBmdWxsbXNnLnN1YnN0cigwLCAxMCAqIDEwMDAgKiBOVU1fQ09MUyk7XHJcblxyXG4gICAgICB0aGlzLnRleHRBcmVhLnZhbHVlID0gZnVsbG1zZztcclxuXHJcbiAgICAgIGlmICh0aGlzLm9uTWVzc2FnZSkge1xyXG4gICAgICAgICB0aGlzLm9uTWVzc2FnZShtc2cpO1xyXG4gICAgICB9XHJcbiAgIH1cclxufSIsImltcG9ydCB7IFN0b3B3YXRjaCB9IGZyb20gJy4vU3RvcHdhdGNoJztcclxuXHJcbmNvbnN0IFNFQyA9IDEwMDA7XHJcbmNvbnN0IE1JTiA9IDYwICogU0VDO1xyXG5cclxuZXhwb3J0IHR5cGUgT25UaWNrSGFuZGxlciA9ICh0aW1lcjogQ291bnRkb3duVGltZXIpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgY2xhc3MgQ291bnRkb3duVGltZXIge1xyXG4gICBwcml2YXRlIHN3ID0gbmV3IFN0b3B3YXRjaChmYWxzZSk7XHJcbiAgIHByaXZhdGUgX2R1cmF0aW9uTXM6IG51bWJlcjtcclxuICAgcHJpdmF0ZSB0aWNrVGltZW91dEhhbmRsZSA9IE5hTjtcclxuXHJcbiAgIHB1YmxpYyBvblRpY2s6IE9uVGlja0hhbmRsZXIgPSBudWxsO1xyXG5cclxuICAgcHVibGljIGdldCBkdXJhdGlvbk1zKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9kdXJhdGlvbk1zO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc2V0IGR1cmF0aW9uTXModmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnN0b3AoKTtcclxuICAgICAgdGhpcy5fZHVyYXRpb25NcyA9IHZhbHVlO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0IHJ1bm5pbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgIGlmICh0aGlzLnN3LmVsYXBzZWRNcyA+IHRoaXMuX2R1cmF0aW9uTXMpIHtcclxuICAgICAgICAgdGhpcy5zdy5zdG9wKCk7XHJcbiAgICAgICAgIHRoaXMuc3cuZWxhcHNlZE1zID0gdGhpcy5fZHVyYXRpb25NcztcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHRoaXMuc3cucnVubmluZztcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBkdXJhdGlvbk1pbigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5kdXJhdGlvbk1zIC8gTUlOO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0IHJlbWFpbmluZ01zKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBNYXRoLm1heCgwLCB0aGlzLmR1cmF0aW9uTXMgLSB0aGlzLnN3LmVsYXBzZWRNcyk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgdGltZVJlbWFpbmluZ1N0cigpOiBzdHJpbmcge1xyXG4gICAgICBsZXQgcmVtYWluaW5nID0gdGhpcy5yZW1haW5pbmdNcztcclxuICAgICAgbGV0IG1pbiA9IE1hdGguZmxvb3IocmVtYWluaW5nIC8gTUlOKTtcclxuICAgICAgbGV0IHNlYyA9IE1hdGguZmxvb3IoKHJlbWFpbmluZyAtIG1pbiAqIE1JTikgLyBTRUMpO1xyXG4gICAgICBsZXQgbWluU3RyID0gbWluIDwgMTAgPyAnMCcgKyBtaW4gOiBtaW47XHJcbiAgICAgIGxldCBzZWNTdHIgPSBzZWMgPCAxMCA/ICcwJyArIHNlYyA6IHNlYztcclxuICAgICAgcmV0dXJuIG1pblN0ciArICc6JyArIHNlY1N0cjtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBleHBpcmVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gKHRoaXMuc3cuZWxhcHNlZE1zID49IHRoaXMuZHVyYXRpb25Ncyk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihkdXJhdGlvbk1zID0gMjAgKiBNSU4pIHtcclxuICAgICAgdGhpcy5fZHVyYXRpb25NcyA9IGR1cmF0aW9uTXM7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzdGFydCgpOiB2b2lkIHtcclxuICAgICAgaWYgKHRoaXMuc3cucnVubmluZyA9PT0gZmFsc2UgJiYgdGhpcy5leHBpcmVkID09PSBmYWxzZSkge1xyXG4gICAgICAgICB0aGlzLnN3LnN0YXJ0KCk7XHJcbiAgICAgICAgIHRoaXMudGljaygpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzdG9wKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnN3LnN0b3AoKTtcclxuXHJcbiAgICAgIGlmIChpc05hTih0aGlzLnRpY2tUaW1lb3V0SGFuZGxlKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpY2tUaW1lb3V0SGFuZGxlKTtcclxuICAgICAgICAgdGhpcy50aWNrVGltZW91dEhhbmRsZSA9IE5hTjtcclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIGlmICh0aGlzLnN3LmVsYXBzZWRNcyA+IHRoaXMuX2R1cmF0aW9uTXMpIHtcclxuICAgICAgICAgdGhpcy5zdy5lbGFwc2VkTXMgPSB0aGlzLl9kdXJhdGlvbk1zO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zdy5yZXNldChmYWxzZSk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBhZGRPbmUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc3RvcCgpO1xyXG5cclxuICAgICAgdGhpcy5fZHVyYXRpb25NcyA9IHRoaXMucmVtYWluaW5nTXM7XHJcbiAgICAgIHRoaXMuc3cuZWxhcHNlZE1zID0gMDtcclxuXHJcbiAgICAgIC8vIHRoZSBuZXh0IGhpZ2hlc3QgbWludXRlIHZhbHVlXHJcbiAgICAgIHRoaXMuX2R1cmF0aW9uTXMgPSBNSU4gKiBNYXRoLmZsb29yKHRoaXMuZHVyYXRpb25NaW4pICsgTUlOO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc3VidHJhY3RPbmUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc3RvcCgpO1xyXG5cclxuICAgICAgdGhpcy5fZHVyYXRpb25NcyA9IHRoaXMucmVtYWluaW5nTXM7XHJcbiAgICAgIHRoaXMuc3cuZWxhcHNlZE1zID0gMDtcclxuXHJcbiAgICAgIC8vIHRoZSBuZXh0IGxvd2VzdCBtaW51dGUgdmFsdWVcclxuICAgICAgdGhpcy5fZHVyYXRpb25NcyA9IE1JTiAqIE1hdGguZmxvb3IoMC45OTk5ICsgdGhpcy5kdXJhdGlvbk1pbikgLSBNSU47XHJcbiAgICAgIHRoaXMuX2R1cmF0aW9uTXMgPSBNYXRoLm1heCh0aGlzLl9kdXJhdGlvbk1zLCAwKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHN5bmNocm9uaXplKHJ1bm5pbmc6IGJvb2xlYW4sIGR1cmF0aW9uTXM6IG51bWJlciwgcmVtYWluaW5nTXM6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICBkdXJhdGlvbk1zID0gTWF0aC5tYXgoMCwgZHVyYXRpb25Ncyk7XHJcbiAgICAgIHJlbWFpbmluZ01zID0gTWF0aC5taW4ocmVtYWluaW5nTXMsIGR1cmF0aW9uTXMpO1xyXG4gICAgICByZW1haW5pbmdNcyA9IE1hdGgubWF4KDAsIHJlbWFpbmluZ01zKTtcclxuXHJcbiAgICAgIHRoaXMuc3cucmVzZXQoZmFsc2UpO1xyXG4gICAgICB0aGlzLnN3LmVsYXBzZWRNcyA9IGR1cmF0aW9uTXMgLSByZW1haW5pbmdNcztcclxuICAgICAgdGhpcy5fZHVyYXRpb25NcyA9IGR1cmF0aW9uTXM7XHJcblxyXG4gICAgICBpZiAoZHVyYXRpb25NcyA+PSAwICYmIHJlbWFpbmluZ01zID49IDAgJiYgZHVyYXRpb25NcyA+IHJlbWFpbmluZ01zICYmIHJ1bm5pbmcpIHtcclxuICAgICAgICAgdGhpcy5zdy5zdGFydCgpO1xyXG4gICAgICAgICB0aGlzLnRpY2soKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIHRpY2soKTogdm9pZCB7XHJcbiAgICAgIGlmICh0aGlzLm9uVGljaykge1xyXG4gICAgICAgICB0aGlzLm9uVGljayh0aGlzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gaWYgdGhlIHRpbWVyIGlzIHJ1bm5pbmcgcmVxdWVzdCB0aGUgbmV4dCB0aW1lb3V0XHJcbiAgICAgIGlmICh0aGlzLnJ1bm5pbmcpIHtcclxuICAgICAgICAgdGhpcy5yZWdpc3Rlck5leHRUaWNrKCk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSByZWdpc3Rlck5leHRUaWNrKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnRpY2tUaW1lb3V0SGFuZGxlID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG5cclxuICAgICAgICAgLy8gcmVzZXQgdGhlIHRpbWVvdXQgaGFuZGxlXHJcbiAgICAgICAgIHRoaXMudGlja1RpbWVvdXRIYW5kbGUgPSBOYU47XHJcblxyXG4gICAgICAgICAvLyBjYWxsIHRoZSBjYWxsYmFja1xyXG4gICAgICAgICB0aGlzLnRpY2soKTtcclxuXHJcbiAgICAgIH0sIHRoaXMucmVtYWluaW5nTXMgJSAxMDAwICsgMSk7XHJcbiAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBVQVBhcnNlciB9IGZyb20gJ3VhLXBhcnNlci1qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgRGV2aWNlXHJcbntcclxuICAgIHByaXZhdGUgcGFyc2VyID0gbmV3IFVBUGFyc2VyKG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvL2FsZXJ0KEpTT04uc3RyaW5naWZ5KHRoaXMucGFyc2VyLmdldFJlc3VsdCgpLCBudWxsLCAnICcpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGlzTW9iaWxlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlci5nZXREZXZpY2UoKS50eXBlID09PSAnbW9iaWxlJztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGlzRmlyZWZveCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZXIuZ2V0QnJvd3NlcigpLm5hbWUgPT09ICdGaXJlZm94JztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGlzU2FmYXJpKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMucGFyc2VyLmdldEJyb3dzZXIoKS5uYW1lID09PSAnU2FmYXJpJztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGlzUG9ydHJhaXQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh3aW5kb3cub3JpZW50YXRpb24gIT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub3JpZW50YXRpb24gPT09IDAgfHwgd2luZG93Lm9yaWVudGF0aW9uID09PSAxODApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaXNJUGhvbmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VyLmdldERldmljZSgpLm1vZGVsID09PSAnaVBob25lJztcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBGUFMge1xyXG4gICBwcml2YXRlIHRpY2tzOiBudW1iZXJbXSA9IFtdO1xyXG5cclxuICAgcHJpdmF0ZSBnZXQgc3Bhbk1zKCk6IG51bWJlciB7XHJcbiAgICAgIGlmICh0aGlzLnRpY2tzLmxlbmd0aCA8IDIpIHtcclxuICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHJldHVybiAodGhpcy50aWNrc1t0aGlzLnRpY2tzLmxlbmd0aCAtIDFdIC0gdGhpcy50aWNrc1swXSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBtcygpOiBudW1iZXIge1xyXG4gICAgICBpZiAodGhpcy50aWNrcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICByZXR1cm4gdGhpcy5zcGFuTXMgLyB0aGlzLnRpY2tzLmxlbmd0aDtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0IHJhdGUoKTogbnVtYmVyIHtcclxuICAgICAgaWYgKHRoaXMudGlja3MubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgcmV0dXJuIDEwMDAgLyB0aGlzLm1zO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyB0aWNrKCk6IHZvaWQge1xyXG5cclxuICAgICAgdGhpcy50aWNrcy5wdXNoKHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSk7XHJcblxyXG4gICAgICAvLyB0cmltIG9mZiB0aGUgc2l6ZSBhcyBsb25nIGFzIHRoZXJlIGFyZSBhdCBsZWFzdCAyMCBlbnRyaWVzIGFuZCB0aGVcclxuICAgICAgLy8gdGltZSBzcGFuIGJldHdlZW4gYWxsIGVudHJpZXMgaXMgYXQgbGVhc3QgMSBzZWNvbmRcclxuICAgICAgd2hpbGUgKHRoaXMudGlja3MubGVuZ3RoID4gMjAgJiYgdGhpcy5zcGFuTXMgPiAyMDAwKSB7XHJcbiAgICAgICAgIHRoaXMudGlja3Muc2hpZnQoKTtcclxuICAgICAgfVxyXG4gICB9XHJcbn0iLCJcclxuZXhwb3J0IHR5cGUgU3RhdHVzRnVuY3Rpb24gPSAoc3RhdHVzOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgY29uc3QgaXNNb2JpbGUgPSAvaVBob25lfGlQYWR8aVBvZHxBbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuXHJcbmV4cG9ydCBsZXQgZW52ID0ge1xyXG4gICBpc1Rlc3Rpbmc6IGZhbHNlXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiYXNlVXJsKCk6IHN0cmluZyB7XHJcbiAgIGxldCB1cmwgPSBsb2NhdGlvbi5vcmlnaW4gKyBsb2NhdGlvbi5wYXRobmFtZTtcclxuICAgaWYgKHVybC5lbmRzV2l0aCgnaW5kZXguaHRtbCcpKSB7XHJcbiAgICAgIHVybCA9IHVybC5zdWJzdHIoMCwgdXJsLmxlbmd0aCAtIDEwKTtcclxuICAgfVxyXG4gICBpZiAodXJsLmVuZHNXaXRoKCcvJykgPT09IGZhbHNlKSB7XHJcbiAgICAgIHVybCArPSAnLyc7XHJcbiAgIH1cclxuICAgcmV0dXJuIHVybDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRpbWVTdHIoKTogc3RyaW5nIHtcclxuXHJcbiAgIGxldCBkID0gbmV3IERhdGUoKTtcclxuXHJcbiAgIGxldCBob3VycyA9IGQuZ2V0SG91cnMoKTtcclxuICAgbGV0IGhvdXJzU3RyID0gJyc7XHJcbiAgIGlmIChob3VycyA9PT0gMCkge1xyXG4gICAgICBob3Vyc1N0ciA9ICcxMic7XHJcbiAgIH1cclxuICAgZWxzZSBpZiAoaG91cnMgPiAxMikge1xyXG4gICAgICBob3Vyc1N0ciA9IChob3VycyAtIDEyKS50b1N0cmluZygpO1xyXG4gICB9XHJcbiAgIGVsc2Uge1xyXG4gICAgICBob3Vyc1N0ciA9IGhvdXJzLnRvU3RyaW5nKCk7XHJcbiAgIH1cclxuXHJcbiAgIGxldCBtaW5zID0gZC5nZXRNaW51dGVzKCk7XHJcbiAgIGxldCBtaW5zU3RyID0gJyc7XHJcbiAgIGlmIChtaW5zIDwgMTApIHtcclxuICAgICAgbWluc1N0ciA9ICcwJyArIG1pbnM7XHJcbiAgIH1cclxuICAgZWxzZSB7XHJcbiAgICAgIG1pbnNTdHIgPSBtaW5zLnRvU3RyaW5nKCk7XHJcbiAgIH1cclxuXHJcbiAgIHJldHVybiBob3Vyc1N0ciArICc6JyArIG1pbnNTdHIgKyAnICcgKyAoaG91cnMgPiAxMiA/ICdQTScgOiAnQU0nKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVtUGl4ZWxzKCk6IG51bWJlciB7XHJcbiAgIGxldCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSk7XHJcbiAgIHJldHVybiBOdW1iZXIucGFyc2VGbG9hdChzdHlsZS5mb250U2l6ZS5zdWJzdHIoMCwgc3R5bGUuZm9udFNpemUubGVuZ3RoIC0gMikpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHhUb051bWJlcihweFZhbHVlOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICBpZiAocHhWYWx1ZS5lbmRzV2l0aCgncHgnKSkge1xyXG4gICAgICByZXR1cm4gTnVtYmVyLnBhcnNlRmxvYXQocHhWYWx1ZS5zdWJzdHIoMCwgcHhWYWx1ZS5sZW5ndGggLSAyKSk7XHJcbiAgIH1cclxuICAgZWxzZSB7XHJcbiAgICAgIHJldHVybiBOdW1iZXIuTmFOO1xyXG4gICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAodmFsdWU6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgaWYgKHZhbHVlIDwgbWluKSB7XHJcbiAgICAgIHJldHVybiBtaW47XHJcbiAgIH1cclxuICAgZWxzZSBpZiAodmFsdWUgPiBtYXgpIHtcclxuICAgICAgcmV0dXJuIG1heDtcclxuICAgfVxyXG4gICBlbHNlIHtcclxuICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0b0RlZyhyYWQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgIHJldHVybiAoMTgwIC8gTWF0aC5QSSkgKiByYWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0b1JhZChkZWc6IG51bWJlcik6IG51bWJlciB7XHJcbiAgIHJldHVybiAoTWF0aC5QSSAvIDE4MCkgKiBkZWc7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtaXgodjE6IG51bWJlciwgdjI6IG51bWJlciwgbWl4OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICByZXR1cm4gdjEgKyBjbGFtcChtaXgsIDAsIDEpICogKHYyIC0gdjEpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdG9Dc3MocjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYT86IG51bWJlcik6IHN0cmluZyB7XHJcbiAgIHJldHVybiAncmdiKCcgKyByICsgJywnICsgZyArICcsJyArIGIgKyAoYSA9PT0gdW5kZWZpbmVkID8gJycgOiAnLCcgKyBhKSArICcpJztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvU2l6ZVN0cih2YWw6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgIGlmICh2YWwgPCAxMDI0KSB7XHJcbiAgICAgIHJldHVybiB2YWwgKyAnIGJ5dGVzJztcclxuICAgfVxyXG4gICBlbHNlIGlmICh2YWwgPCAxMDI0ICogMTAyNCkge1xyXG4gICAgICByZXR1cm4gKHZhbCAvIDEwMjQpLnRvRml4ZWQoMSkgKyAnIGtiJztcclxuICAgfVxyXG4gICBlbHNlIHtcclxuICAgICAgcmV0dXJuICh2YWwgLyAoMTAyNCAqIDEwMjQpKS50b0ZpeGVkKDEpICsgJyBtYic7XHJcbiAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEJvb2xlYW5WYWx1ZSh2YWx1ZTogYm9vbGVhbiB8ICgoKSA9PiBib29sZWFuKSB8IHVuZGVmaW5lZCB8IG51bGwpOiBib29sZWFuIHtcclxuICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICB9XHJcbiAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgfVxyXG4gICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgcmV0dXJuIHZhbHVlKCk7XHJcbiAgIH1cclxuICAgZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaU9TKCk6IGJvb2xlYW4ge1xyXG4gICByZXR1cm4gW1xyXG4gICAgICAnaVBhZCBTaW11bGF0b3InLFxyXG4gICAgICAnaVBob25lIFNpbXVsYXRvcicsXHJcbiAgICAgICdpUG9kIFNpbXVsYXRvcicsXHJcbiAgICAgICdpUGFkJyxcclxuICAgICAgJ2lQaG9uZScsXHJcbiAgICAgICdpUG9kJ1xyXG4gICBdLmluY2x1ZGVzKG5hdmlnYXRvci5wbGF0Zm9ybSlcclxuICAgICAgLy8gaVBhZCBvbiBpT1MgMTMgZGV0ZWN0aW9uXHJcbiAgICAgIHx8IChuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdNYWMnKSAmJiAnb250b3VjaGVuZCcgaW4gZG9jdW1lbnQpXHJcbn0iLCJpbXBvcnQgeyBTdG9wd2F0Y2ggfSBmcm9tICcuL1N0b3B3YXRjaCc7XHJcblxyXG4vKipcclxuICogVXRpbGl0eSBjbGFzcyBmb3IgbG9nZ2luZyB0aW1pbmcgbWVzc2FnZXMgZm9yIHByb2ZpbGUgY29kZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFByb2ZpbGVyIHtcclxuXHJcbiAgIHByaXZhdGUgc3cgPSBuZXcgU3RvcHdhdGNoKCk7XHJcblxyXG4gICAvKipcclxuICAgICogVGhlIGVsYXBzZWQgdGltZSBpbiBtaWxsaXNlY29uZHNcclxuICAgICovXHJcbiAgIHB1YmxpYyBnZXQgZWxhcHNlZE1zKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnN3LmVsYXBzZWRNcztcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFByaW50cyBhIG1lc3NhZ2UgdG8gY29uc29sZSBvZiB0aGUgZWxhcHNlZCB0aW1lXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gbXNnIFRoZSBtZXNzYWdlIHRvIHByaW50IHdpdGggdGhlIHRpbWVcclxuICAgICovXHJcbiAgIHB1YmxpYyBsb2cobXNnOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgY29uc29sZS5sb2cobXNnICsgJyAnICsgdGhpcy5lbGFwc2VkTXMudG9GaXhlZCgxKSArICcgbXMnKTtcclxuICAgICAgdGhpcy5zdy5yZXN0YXJ0KCk7XHJcbiAgIH1cclxufSIsIi8qKlxyXG4gKiBVdGlsaXR5IGNsYXNzIGZvciB0cmFja2luZyB0aW1lXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3RvcHdhdGNoIHtcclxuXHJcbiAgIHByaXZhdGUgYWNjdW11bGF0ZWRNcyA9IDA7XHJcbiAgIHByaXZhdGUgc3RhcnRUaW1lID0gTmFOO1xyXG4gICBwcml2YXRlIF9wYXVzZWQgPSBmYWxzZTtcclxuXHJcbiAgIHB1YmxpYyBnZXQgcGF1c2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fcGF1c2VkO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0IHJ1bm5pbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiAhdGhpcy5wYXVzZWQ7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBUaGUgZWxhcHNlZCB0aW1lIGluIG1pbGxpc2Vjb25kc1xyXG4gICAgKi9cclxuICAgcHVibGljIGdldCBlbGFwc2VkTXMoKTogbnVtYmVyIHtcclxuICAgICAgaWYgKGlzTmFOKHRoaXMuc3RhcnRUaW1lKSkge1xyXG4gICAgICAgICByZXR1cm4gdGhpcy5hY2N1bXVsYXRlZE1zO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICByZXR1cm4gdGhpcy5hY2N1bXVsYXRlZE1zICsgKHRoaXMuZ2V0VGltZU1zKCkgLSB0aGlzLnN0YXJ0VGltZSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIHNldCBlbGFwc2VkTXModmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLmFjY3VtdWxhdGVkTXMgPSB2YWx1ZTtcclxuICAgICAgaWYgKHRoaXMucnVubmluZykge1xyXG4gICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHRoaXMuZ2V0VGltZU1zKCk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFRoZSBlbGFwc2VkIHRpbWUgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgZ2V0IGVsYXBzZWRTKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmVsYXBzZWRNcyAvIDEwMDA7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgZ2V0VGltZU1zKCk6IG51bWJlciB7XHJcbiAgICAgIC8vIHdpbmRvdy5wZXJmb3JtYW5jZSBpcyBub3QgZGVmaW5lZCBmb3Igbm9kZWpzIHNvIG91ciB0ZXN0IG5lZWRcclxuICAgICAgLy8gdGhpcyB0byBjb21waWxlXHJcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LnBlcmZvcm1hbmNlICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgIHJldHVybiB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHJldHVybiBEYXRlLm5vdygpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzdGFydCA9IHRydWUpIHtcclxuICAgICAgdGhpcy5yZXNldChzdGFydCk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyByZXNldChzdGFydDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICB0aGlzLmFjY3VtdWxhdGVkTXMgPSAwO1xyXG4gICAgICBpZiAoc3RhcnQpIHtcclxuICAgICAgICAgdGhpcy5fcGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gdGhpcy5nZXRUaW1lTXMoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgdGhpcy5fcGF1c2VkID0gdHJ1ZTtcclxuICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBOYU47XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIHJlc3RhcnQoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMucmVzZXQodHJ1ZSk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzdG9wKCk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy5fcGF1c2VkID09PSBmYWxzZSkge1xyXG4gICAgICAgICB0aGlzLl9wYXVzZWQgPSB0cnVlO1xyXG4gICAgICAgICB0aGlzLmFjY3VtdWxhdGVkTXMgPSB0aGlzLmVsYXBzZWRNcztcclxuICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBOYU47XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIHN0YXJ0KCk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy5fcGF1c2VkID09PSB0cnVlKSB7XHJcbiAgICAgICAgIHRoaXMuX3BhdXNlZCA9IGZhbHNlO1xyXG4gICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHRoaXMuZ2V0VGltZU1zKCk7XHJcbiAgICAgIH1cclxuICAgfVxyXG59IiwiaW1wb3J0IHsgaHRtbENvbG9yIH0gZnJvbSAnLi9odG1sQ29sb3InO1xyXG5pbXBvcnQgeyBnbENvbG9yMyB9IGZyb20gJy4uL2dsL2dsQ29sb3InO1xyXG5cclxuLyoqXHJcbiAqIENsYXNzIGZvciByZXByZXNlbnRpbmcgY29sb3IgdmFsdWVzLiBWYWx1ZXMgYXJlIG9uIGEgMC0xIHNjYWxlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIGhzdkNvbG9yIHtcclxuICAgcHVibGljIGg6IG51bWJlcjtcclxuICAgcHVibGljIHM6IG51bWJlcjtcclxuICAgcHVibGljIHY6IG51bWJlcjtcclxuXHJcbiAgIC8qKlxyXG4gICAgKiBAcGFyYW0gY29sb3IgSFNWIHZhbHVlcyB0byBzdG9yZSBpbiB0aGlzIG9iamVjdFxyXG4gICAgKi9cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKGNvbG9yOiBudW1iZXJbXSkge1xyXG4gICAgICB0aGlzLmggPSBjb2xvclswXTtcclxuICAgICAgdGhpcy5zID0gY29sb3JbMV07XHJcbiAgICAgIHRoaXMudiA9IGNvbG9yWzJdO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogU2V0cyB0aGUgSFNWIHZhbHVlcyBmcm9tIGh0bWwgKDAtMjU1KSBSR0IgdmFsdWVzXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gciBSZWQgdmFsdWVcclxuICAgICogQHBhcmFtIGcgR3JlZW4gdmFsdWVcclxuICAgICogQHBhcmFtIGIgQmx1ZSB2YWx1ZVxyXG4gICAgKi9cclxuICAgcHVibGljIGZyb21IdG1sVmFsdWVzKHI6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIpOiB2b2lkIHtcclxuXHJcbiAgICAgIGNvbnN0IG1heCA9IE1hdGgubWF4KHIsIGcsIGIpO1xyXG4gICAgICBjb25zdCBtaW4gPSBNYXRoLm1pbihyLCBnLCBiKTtcclxuICAgICAgY29uc3QgZCA9IG1heCAtIG1pbjtcclxuICAgICAgbGV0IGggPSAwO1xyXG4gICAgICBjb25zdCBzID0gKG1heCA9PT0gMCA/IDAgOiBkIC8gbWF4KTtcclxuICAgICAgY29uc3QgdiA9IG1heCAvIDI1NTtcclxuXHJcbiAgICAgIHN3aXRjaCAobWF4KSB7XHJcbiAgICAgICAgIGNhc2UgbWluOiBoID0gMDsgYnJlYWs7XHJcbiAgICAgICAgIGNhc2UgcjogaCA9IChnIC0gYikgKyBkICogKGcgPCBiID8gNiA6IDApOyBoIC89IDYgKiBkOyBicmVhaztcclxuICAgICAgICAgY2FzZSBnOiBoID0gKGIgLSByKSArIGQgKiAyOyBoIC89IDYgKiBkOyBicmVhaztcclxuICAgICAgICAgY2FzZSBiOiBoID0gKHIgLSBnKSArIGQgKiA0OyBoIC89IDYgKiBkOyBicmVhaztcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5oID0gaDtcclxuICAgICAgdGhpcy5zID0gcztcclxuICAgICAgdGhpcy52ID0gdjtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgUkdCIHZhbHVlc1xyXG4gICAgKiBcclxuICAgICogQHBhcmFtIHJhbmdlIE1heCBSR0IgdmFsdWVcclxuICAgICogQHJldHVybnMgVGhlIFJHQiB2YWx1ZXMgYXMgYW4gYXJyYXlcclxuICAgICovXHJcbiAgIHB1YmxpYyB0b1JHQlZhbHVlcyhyYW5nZSA9IDI1NSk6IG51bWJlcltdIHtcclxuICAgICAgbGV0IHIsIGcsIGI7XHJcbiAgICAgIGNvbnN0IGkgPSBNYXRoLmZsb29yKHRoaXMuaCAqIDYpO1xyXG4gICAgICBjb25zdCBmID0gdGhpcy5oICogNiAtIGk7XHJcbiAgICAgIGNvbnN0IHAgPSB0aGlzLnYgKiAoMSAtIHRoaXMucyk7XHJcbiAgICAgIGNvbnN0IHEgPSB0aGlzLnYgKiAoMSAtIGYgKiB0aGlzLnMpO1xyXG4gICAgICBjb25zdCB0ID0gdGhpcy52ICogKDEgLSAoMSAtIGYpICogdGhpcy5zKTtcclxuICAgICAgc3dpdGNoIChpICUgNikge1xyXG4gICAgICAgICBjYXNlIDA6IHIgPSB0aGlzLnYsIGcgPSB0LCBiID0gcDsgYnJlYWs7XHJcbiAgICAgICAgIGNhc2UgMTogciA9IHEsIGcgPSB0aGlzLnYsIGIgPSBwOyBicmVhaztcclxuICAgICAgICAgY2FzZSAyOiByID0gcCwgZyA9IHRoaXMudiwgYiA9IHQ7IGJyZWFrO1xyXG4gICAgICAgICBjYXNlIDM6IHIgPSBwLCBnID0gcSwgYiA9IHRoaXMudjsgYnJlYWs7XHJcbiAgICAgICAgIGNhc2UgNDogciA9IHQsIGcgPSBwLCBiID0gdGhpcy52OyBicmVhaztcclxuICAgICAgICAgY2FzZSA1OiByID0gdGhpcy52LCBnID0gcCwgYiA9IHE7IGJyZWFrO1xyXG4gICAgICAgICBkZWZhdWx0OiByID0gMDsgZyA9IDA7IGIgPSAwO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gW3JhbmdlICogciwgcmFuZ2UgKiBnLCByYW5nZSAqIGJdO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogQ3JlYXRlcyBhbiBoc3ZDb2xvciBvYmplY3QgZnJvbSBhbiBodG1sQ29sb3Igb2JqZWN0LlxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIGNvbG9yIFRoZSBodG1sQ29sb3Igb2JqZWN0LlxyXG4gICAgKiBAcmV0dXJucyBUaGUgaHN2Q29sb3Igb2JqZWN0LlxyXG4gICAgKi9cclxuICAgcHVibGljIHN0YXRpYyBmcm9tSHRtbENvbG9yKGNvbG9yOiBodG1sQ29sb3IpOiBoc3ZDb2xvciB7XHJcbiAgICAgIGNvbnN0IHIgPSBjb2xvci5yO1xyXG4gICAgICBjb25zdCBnID0gY29sb3IuZztcclxuICAgICAgY29uc3QgYiA9IGNvbG9yLmI7XHJcblxyXG4gICAgICBjb25zdCBtYXggPSBNYXRoLm1heChyLCBnLCBiKTtcclxuICAgICAgY29uc3QgbWluID0gTWF0aC5taW4ociwgZywgYik7XHJcbiAgICAgIGNvbnN0IGQgPSBtYXggLSBtaW47XHJcbiAgICAgIGxldCBoID0gMDtcclxuICAgICAgY29uc3QgcyA9IChtYXggPT09IDAgPyAwIDogZCAvIG1heCk7XHJcbiAgICAgIGNvbnN0IHYgPSBtYXggLyAyNTU7XHJcblxyXG4gICAgICBzd2l0Y2ggKG1heCkge1xyXG4gICAgICAgICBjYXNlIG1pbjogaCA9IDA7IGJyZWFrO1xyXG4gICAgICAgICBjYXNlIHI6IGggPSAoZyAtIGIpICsgZCAqIChnIDwgYiA/IDYgOiAwKTsgaCAvPSA2ICogZDsgYnJlYWs7XHJcbiAgICAgICAgIGNhc2UgZzogaCA9IChiIC0gcikgKyBkICogMjsgaCAvPSA2ICogZDsgYnJlYWs7XHJcbiAgICAgICAgIGNhc2UgYjogaCA9IChyIC0gZykgKyBkICogNDsgaCAvPSA2ICogZDsgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBuZXcgaHN2Q29sb3IoW2gsIHMsIHZdKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgYW4gaHN2Q29sb3Igb2JqZWN0IGZyb20gYSBnbENvbG9yIG9iamVjdC5cclxuICAgICogXHJcbiAgICAqIEBwYXJhbSBjb2xvciBUaGUgZ2xDb2xvciBvYmplY3QuXHJcbiAgICAqIEByZXR1cm5zIFRoZSBoc3ZDb2xvciBvYmplY3QuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc3RhdGljIGZyb21HbENvbG9yKGNvbG9yOiBnbENvbG9yMyk6IGhzdkNvbG9yIHtcclxuICAgICAgcmV0dXJuIGhzdkNvbG9yLmZyb21IdG1sQ29sb3IoY29sb3IudG9IdG1sQ29sb3IoKSk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBDcmVhdGVzIGEgZ2xDb2xvciBvYmplY3QgZnJvbSB0aGlzIG9iamVjdC5cclxuICAgICogXHJcbiAgICAqIEByZXR1cm5zIFRoZSBnbENvbG9yIG9iamVjdC5cclxuICAgICovXHJcbiAgIHB1YmxpYyB0b0dsQ29sb3IoKTogZ2xDb2xvcjMge1xyXG4gICAgICByZXR1cm4gbmV3IGdsQ29sb3IzKHRoaXMudG9SR0JWYWx1ZXMoMSkpO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogQ3JlYXRlcyBhbiBodG1sQ29sb3Igb2JqZWN0IGZyb20gdGhpcyBvYmplY3QuXHJcbiAgICAqIFxyXG4gICAgKiBAcmV0dXJucyBUaGUgZ2xDb2xvciBvYmplY3QuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgdG9IdG1sQ29sb3IoKTogaHRtbENvbG9yIHtcclxuICAgICAgcmV0dXJuIHRoaXMudG9HbENvbG9yKCkudG9IdG1sQ29sb3IoKTtcclxuICAgfVxyXG59IiwiaW1wb3J0IHsgQ29sb3IgfSBmcm9tICcuL0NvbG9yJztcclxuaW1wb3J0IHsgdG9Dc3MgfSBmcm9tICcuL0dsb2JhbHMnO1xyXG5pbXBvcnQgeyBnbENvbG9yMyB9IGZyb20gJy4uL2dsL2dsQ29sb3InO1xyXG5cclxuLyoqXHJcbiAqIENvbG9yIGNsYXNzIHRoYXQgcmVxdWlyZXMgUkdCIHZhbHVlcyB0byBiZSBiZXR3ZWVuIDAgYW5kIDI1NVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIGh0bWxDb2xvciBleHRlbmRzIENvbG9yIHtcclxuXHJcbiAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgd2hpdGUgPSBuZXcgaHRtbENvbG9yKFsyNTUsIDI1NSwgMjU1XSk7XHJcbiAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgYmxhY2sgPSBuZXcgaHRtbENvbG9yKFswLCAwLCAwXSk7XHJcbiAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgcmVkID0gbmV3IGh0bWxDb2xvcihbMjU1LCAwLCAwXSk7XHJcbiAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgZ3JlZW4gPSBuZXcgaHRtbENvbG9yKFswLCAyNTUsIDBdKTtcclxuICAgcHVibGljIHN0YXRpYyByZWFkb25seSBibHVlID0gbmV3IGh0bWxDb2xvcihbMCwgMCwgMjU1XSk7XHJcbiAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgb3JhbmdlID0gbmV3IGh0bWxDb2xvcihbMjU1LCAxNjUsIDBdKTtcclxuXHJcbiAgIHB1YmxpYyBnZXQgbHVtaW5vc2l0eSgpOiBudW1iZXIge1xyXG4gICAgICAvLyBhZG9iZSBZJzIwNCBsdW1pbm9zaXR5XHJcbiAgICAgIHJldHVybiAoMC4zMDg2ICogdGhpcy5yICsgMC42MDk0ICogdGhpcy5nICsgMC4wODIwICogdGhpcy5iKSAvIDI1NTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHNldCBsdW1pbm9zaXR5KHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgbGV0IG9sZEx1bWlub3NpdHkgPSB0aGlzLmx1bWlub3NpdHk7XHJcbiAgICAgIC8qXHJcbiAgICAgIHRoaXMuciArPSAyNTUgKiAwLjMwODYgKiAodmFsdWUgLSBvbGRMdW1pbm9zaXR5KTtcclxuICAgICAgdGhpcy5nICs9IDI1NSAqIDAuNjA5NCAqICh2YWx1ZSAtIG9sZEx1bWlub3NpdHkpO1xyXG4gICAgICB0aGlzLmIgKz0gMjU1ICogMC4wODIwICogKHZhbHVlIC0gb2xkTHVtaW5vc2l0eSk7XHJcbiAgICAgICovXHJcbiAgICAgIC8qXHJcbiAgICAgIHRoaXMuciArPSAyNTUgKiAodmFsdWUgLSBvbGRMdW1pbm9zaXR5KSAvIDAuMzA4NjtcclxuICAgICAgdGhpcy5nICs9IDI1NSAqICh2YWx1ZSAtIG9sZEx1bWlub3NpdHkpIC8gMC42MDk0O1xyXG4gICAgICB0aGlzLmIgKz0gMjU1ICogKHZhbHVlIC0gb2xkTHVtaW5vc2l0eSkgLyAwLjA4MjA7XHJcbiAgICAgICovXHJcbiAgICAgIGxldCBmID0gdmFsdWUgLyBvbGRMdW1pbm9zaXR5O1xyXG4gICAgICB0aGlzLnIgKj0gZjtcclxuICAgICAgdGhpcy5nICs9IGY7XHJcbiAgICAgIHRoaXMuYiArPSBmO1xyXG5cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIEBwYXJhbSBjb2xvciBBbiBSR0IgY29sb3IgYXJyYXlcclxuICAgICovXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihjb2xvcjogbnVtYmVyW10pIHtcclxuXHJcbiAgICAgIGlmIChjb2xvci5sZW5ndGggIT0gMykge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29sb3IgYXJyYXkgbGVuZ3RoIChleHBlY3RlZCAzIGVsZW1lbnRzKScpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChjb2xvclswXSA8IDAgfHwgY29sb3JbMF0gPiAyNTUpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvbG9yIFxcJ3JcXCcgdmFsdWUgKGV4cGVjdGVkIFswLTI1NV0pJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNvbG9yWzFdIDwgMCB8fCBjb2xvclsxXSA+IDI1NSkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29sb3IgXFwnZ1xcJyB2YWx1ZSAoZXhwZWN0ZWQgWzAtMjU1XSknKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY29sb3JbMl0gPCAwIHx8IGNvbG9yWzJdID4gMjU1KSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2xvciBcXCdiXFwnIHZhbHVlIChleHBlY3RlZCBbMC0yNTVdKScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzdXBlcihjb2xvcik7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBDb252ZXJ0cyBhIHZhbHVlIHRvIGEgaGV4IHN0cmluZ1xyXG4gICAgKiBcclxuICAgICogQHBhcmFtIGMgVGhlIG51bWVyaWMgdmFsdWVcclxuICAgICogQHJldHVybnMgVGhlIGhleCBzdHJpbmdcclxuICAgICovXHJcbiAgIHByb3RlY3RlZCBjb21wb25lbnRUb0hleChjOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICBjb25zdCBoZXggPSBjLnRvU3RyaW5nKDE2KTtcclxuICAgICAgcmV0dXJuIGhleC5sZW5ndGggPT0gMSA/ICcwJyArIGhleCA6IGhleDtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENvbnZlcnRzIHRoaXMgb2JqZWN0IHRvIGEgaGV4IHN0cmluZyAoZS5nLiAjMGYwZjBmKS5cclxuICAgICogXHJcbiAgICAqIEByZXR1cm5zIEEgaGV4IHN0cmluZy5cclxuICAgICovXHJcbiAgIHB1YmxpYyB0b0hleCgpOiBzdHJpbmcge1xyXG4gICAgICBjb25zdCBySGV4ID0gdGhpcy5jb21wb25lbnRUb0hleCh0aGlzLnIpO1xyXG4gICAgICBjb25zdCBnSGV4ID0gdGhpcy5jb21wb25lbnRUb0hleCh0aGlzLmcpO1xyXG4gICAgICBjb25zdCBiSGV4ID0gdGhpcy5jb21wb25lbnRUb0hleCh0aGlzLmIpO1xyXG4gICAgICByZXR1cm4gJyMnICsgckhleCArIGdIZXggKyBiSGV4O1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogQ29udmVydHMgdGhpcyBvYmplY3QgdG8gYSBjc3Mgc3RyaW5nIChlLmcuICdyZ2IoMTI4LDIyOCwzMiknKS5cclxuICAgICpcclxuICAgICogQHJldHVybnMgQSBjc3Mgc3RyaW5nLlxyXG4gICAgKi9cclxuICAgcHVibGljIHRvQ3NzKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiB0b0Nzcyh0aGlzLnIsIHRoaXMuZywgdGhpcy5iKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENvbnZlcnRzIGEgY3NzIHN0eWxlIHN0cmluZyAoZS5nLiAncmdiKDI0LDM2LDgzKScpIHRvIGEgY29sb3JcclxuICAgICogXHJcbiAgICAqIEBwYXJhbSBjc3MgVGhlIGNzcyBzdHJpbmcuXHJcbiAgICAqIEByZXR1cm5zIFRoZSBjb2xvci5cclxuICAgICovXHJcbiAgIHB1YmxpYyBzdGF0aWMgZnJvbUNzcyhjc3M6IHN0cmluZyk6IGh0bWxDb2xvciB7XHJcbiAgICAgIGNvbnN0IHJlZ2V4ID0gL1xcZCsvZztcclxuICAgICAgY29uc3QgdmFscyA9IGNzcy5tYXRjaChyZWdleCkuc2xpY2UoMCwgMyk7XHJcbiAgICAgIHJldHVybiBuZXcgaHRtbENvbG9yKFtwYXJzZUludCh2YWxzWzBdKSwgcGFyc2VJbnQodmFsc1sxXSksIHBhcnNlSW50KHZhbHNbMl0pXSk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBDcmVhdGVzIGFuIGh0bWxDb2xvciBvYmplY3QgZnJvbSBhIGhleCBzdHJpbmdcclxuICAgICogXHJcbiAgICAqIEBwYXJhbSBoZXggVGhlIGhleCBzdHJpbmdcclxuICAgICogQHJldHVybnMgVGhlIGh0bWxDb2xvciBvYmplY3RcclxuICAgICovXHJcbiAgIHB1YmxpYyBzdGF0aWMgZnJvbUhleChoZXg6IHN0cmluZyk6IGh0bWxDb2xvciB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IC9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2kuZXhlYyhoZXgpO1xyXG4gICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgIGNvbnN0IHIgPSBwYXJzZUludChyZXN1bHRbMV0sIDE2KTtcclxuICAgICAgICAgY29uc3QgZyA9IHBhcnNlSW50KHJlc3VsdFsyXSwgMTYpO1xyXG4gICAgICAgICBjb25zdCBiID0gcGFyc2VJbnQocmVzdWx0WzNdLCAxNik7XHJcbiAgICAgICAgIHJldHVybiBuZXcgaHRtbENvbG9yKFtyLCBnLCBiXSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHJldHVybiBuZXcgaHRtbENvbG9yKFswLCAwLCAwXSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgYW4gaHRtbENvbG9yIG9iamVjdCB1c2luZyB2YWx1ZXMgaW4gYSBDb2xvciBvYmplY3QuXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gY29sb3IgQSBnZW5lcmljIENvbG9yIG9iamVjdC5cclxuICAgICovXHJcbiAgIHB1YmxpYyBzdGF0aWMgZnJvbUNvbG9yKGNvbG9yOiBDb2xvcik6IGh0bWxDb2xvciB7XHJcbiAgICAgIGNvbnN0IHIgPSBodG1sQ29sb3IuY2xhbXAoY29sb3Iucik7XHJcbiAgICAgIGNvbnN0IGcgPSBodG1sQ29sb3IuY2xhbXAoY29sb3IuZyk7XHJcbiAgICAgIGNvbnN0IGIgPSBodG1sQ29sb3IuY2xhbXAoY29sb3IuYik7XHJcbiAgICAgIHJldHVybiBuZXcgaHRtbENvbG9yKFtyLCBnLCBiXSk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBSb3VuZHMgYSBudW1iZXIgdG8gYSB3aG9sZSBudW1iZXIgYW5kIGNsYW1wcyBpdCBiZXR3ZWVuIDAgYW5kIDI1NS5cclxuICAgICogXHJcbiAgICAqIEBwYXJhbSB2YWwgVGhlIHZhbHVlLlxyXG4gICAgKiBAcmV0dXJucyBUaGUgcm91bmRlZCAmIGNsYW1wZWQgdmFsdWVcclxuICAgICovXHJcbiAgIHByaXZhdGUgc3RhdGljIGNsYW1wKHZhbDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgdmFsID0gTWF0aC5yb3VuZCh2YWwpO1xyXG4gICAgICBpZiAodmFsIDwgMCkge1xyXG4gICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmICh2YWwgPiAyNTUpIHtcclxuICAgICAgICAgcmV0dXJuIDI1NTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgcmV0dXJuIHZhbDtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogQ29udmVydHMgdGhpcyBjb2xvciB0byBhbiBlcXVpdmFsZW50IGdyYXktc2NhbGUgY29sb3JcclxuICAgICogXHJcbiAgICAqIEByZXR1cm5zIFRoZSBncmF5LXNjYWxlIGNvbG9yLlxyXG4gICAgKi9cclxuICAgcHVibGljIHRvR3JheSgpOiBodG1sQ29sb3Ige1xyXG4gICAgICBjb25zdCByZ2IgPSBNYXRoLnJvdW5kKCh0aGlzLnIgKyB0aGlzLmcgKyB0aGlzLmIpIC8gMyk7XHJcbiAgICAgIHJldHVybiBuZXcgaHRtbENvbG9yKFtyZ2IsIHJnYiwgcmdiXSk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBDb252ZXJ0cyB0aGlzIG9iamVjdCB0byBhIFdlYkdMIGNvbG9yIG9iamVjdCAoMC0xIGJhc2VkKVxyXG4gICAgKiBcclxuICAgICogQHJldHVybnMgQSBnbENvbG9yIG9iamVjdC5cclxuICAgICovXHJcbiAgIHB1YmxpYyB0b0dsQ29sb3IoKTogZ2xDb2xvcjMge1xyXG4gICAgICByZXR1cm4gbmV3IGdsQ29sb3IzKFt0aGlzLnIgLyAyNTUsIHRoaXMuZyAvIDI1NSwgdGhpcy5iIC8gMjU1XSk7XHJcbiAgIH1cclxufSIsImltcG9ydCB7IGh0bWxDb2xvciB9IGZyb20gJy4vaHRtbENvbG9yJztcclxuaW1wb3J0IHsgdG9Dc3MgfSBmcm9tICcuL0dsb2JhbHMnO1xyXG5cclxuLyoqXHJcbiAqIEFuIGh0bWwgY29sb3Igd2l0aCBhIHRyYW5zcGFyZW5jeSB2YWx1ZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIGh0bWxDb2xvcldpdGhBbHBoYSBleHRlbmRzIGh0bWxDb2xvciB7XHJcblxyXG4gICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IHRyYW5zcGFyZW50ID0gbmV3IGh0bWxDb2xvcldpdGhBbHBoYShbMCwgMCwgMCwgMF0pO1xyXG5cclxuICAgLyoqIFRoZSB0cmFuc3BhcmVuY3kgKGFscGhhKSB2YWx1ZSAqL1xyXG4gICBwdWJsaWMgYSA9IDI1NTtcclxuXHJcbiAgIC8qKlxyXG4gICAgKiBAcGFyYW0gY29sb3IgQW4gUkdCQSBjb2xvciBhcnJheVxyXG4gICAgKi9cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKGNvbG9yOiBudW1iZXJbXSkge1xyXG5cclxuICAgICAgc3VwZXIoW2NvbG9yWzBdLCBjb2xvclsxXSwgY29sb3JbMl1dKTtcclxuXHJcbiAgICAgIGlmIChjb2xvci5sZW5ndGggIT0gNCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29sb3IgYXJyYXkgbGVuZ3RoIChleHBlY3RlZCA0IGVsZW1lbnRzKScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoY29sb3JbNF0gPCAwIHx8IGNvbG9yWzRdID4gMjU1KSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2xvciBcXCdhXFwnIHZhbHVlIChleHBlY3RlZCBbMC0yNTVdKScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmEgPSBjb2xvclszXTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENvbnZlcnRzIHRoaXMgb2JqZWN0IHRvIGEgY3NzIHN0cmluZyAoZS5nLiAncmdiKDEyOCwyMjgsMzIsMjU1KScpLlxyXG4gICAgKlxyXG4gICAgKiBAcmV0dXJucyBBIGNzcyBzdHJpbmcuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgdG9Dc3MoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIHRvQ3NzKHRoaXMuciwgdGhpcy5nLCB0aGlzLmIsIHRoaXMuYSk7XHJcbiAgIH1cclxufSIsImltcG9ydCB7IFZlYzMsIElWZWMzLCBWZWM0IH0gZnJvbSAnLi9WZWMnO1xyXG5pbXBvcnQgeyBNYXQ0IH0gZnJvbSAnLi9NYXQnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJTWluTWF4IHtcclxuICAgcmVhZG9ubHkgbWluOiBudW1iZXI7XHJcbiAgIHJlYWRvbmx5IG1heDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQm91bmRpbmdCb3gge1xyXG4gICBwdWJsaWMgbWluOiBWZWMzO1xyXG4gICBwdWJsaWMgbWF4OiBWZWMzO1xyXG5cclxuICAgcHVibGljIGdldCB3aWR0aCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5tYXgueCAtIHRoaXMubWluLng7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLm1heC55IC0gdGhpcy5taW4ueTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBkZXB0aCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5tYXgueiAtIHRoaXMubWluLno7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgZGlhZ29uYWwoKTogbnVtYmVyIHtcclxuICAgICAgY29uc3QgdyA9IHRoaXMud2lkdGg7XHJcbiAgICAgIGNvbnN0IGggPSB0aGlzLmhlaWdodDtcclxuICAgICAgY29uc3QgZCA9IHRoaXMuZGVwdGg7XHJcbiAgICAgIHJldHVybiBNYXRoLnNxcnQodyAqIHcgKyBoICogaCArIGQgKiBkKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBjZW50ZXIoKTogVmVjMyB7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjMyhbXHJcbiAgICAgICAgICh0aGlzLm1pbi54ICsgdGhpcy5tYXgueCkgLyAyLFxyXG4gICAgICAgICAodGhpcy5taW4ueSArIHRoaXMubWF4LnkpIC8gMixcclxuICAgICAgICAgKHRoaXMubWluLnogKyB0aGlzLm1heC56KSAvIDIsXHJcbiAgICAgIF0pO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0IGNvcm5lcnMoKTogVmVjM1tdIHtcclxuICAgICAgY29uc3QgY29ybmVyczogVmVjM1tdID0gW107XHJcbiAgICAgIGNvcm5lcnMucHVzaChuZXcgVmVjMyhbdGhpcy5taW4ueCwgdGhpcy5taW4ueSwgdGhpcy5taW4uel0pKTtcclxuICAgICAgY29ybmVycy5wdXNoKG5ldyBWZWMzKFt0aGlzLm1pbi54LCB0aGlzLm1pbi55LCB0aGlzLm1heC56XSkpO1xyXG4gICAgICBjb3JuZXJzLnB1c2gobmV3IFZlYzMoW3RoaXMubWluLngsIHRoaXMubWF4LnksIHRoaXMubWluLnpdKSk7XHJcbiAgICAgIGNvcm5lcnMucHVzaChuZXcgVmVjMyhbdGhpcy5taW4ueCwgdGhpcy5tYXgueSwgdGhpcy5tYXguel0pKTtcclxuICAgICAgY29ybmVycy5wdXNoKG5ldyBWZWMzKFt0aGlzLm1heC54LCB0aGlzLm1pbi55LCB0aGlzLm1pbi56XSkpO1xyXG4gICAgICBjb3JuZXJzLnB1c2gobmV3IFZlYzMoW3RoaXMubWF4LngsIHRoaXMubWluLnksIHRoaXMubWF4LnpdKSk7XHJcbiAgICAgIGNvcm5lcnMucHVzaChuZXcgVmVjMyhbdGhpcy5tYXgueCwgdGhpcy5tYXgueSwgdGhpcy5taW4uel0pKTtcclxuICAgICAgY29ybmVycy5wdXNoKG5ldyBWZWMzKFt0aGlzLm1heC54LCB0aGlzLm1heC55LCB0aGlzLm1heC56XSkpO1xyXG4gICAgICByZXR1cm4gY29ybmVycztcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKG1pbjogVmVjMyA9IG5ldyBWZWMzKFtOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFXSksXHJcbiAgICAgIG1heDogVmVjMyA9IG5ldyBWZWMzKFstTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFXSkpIHtcclxuICAgICAgdGhpcy5taW4gPSBtaW47XHJcbiAgICAgIHRoaXMubWF4ID0gbWF4O1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc3RhdGljIGdldCBpbmZpbml0ZSgpOiBCb3VuZGluZ0JveCB7XHJcbiAgICAgIGNvbnN0IE1BWCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcclxuICAgICAgY29uc3QgTUlOID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO1xyXG4gICAgICByZXR1cm4gbmV3IEJvdW5kaW5nQm94KG5ldyBWZWMzKFtNSU4sIE1JTiwgTUlOXSksIG5ldyBWZWMzKFtNQVgsIE1BWCwgTUFYXSkpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgaW5zaWRlKHZlYzogSVZlYzMpOiBib29sZWFuIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgICB2ZWMueCA+PSB0aGlzLm1pbi54ICYmIHZlYy54IDw9IHRoaXMubWF4LnggJiZcclxuICAgICAgICAgdmVjLnkgPj0gdGhpcy5taW4ueSAmJiB2ZWMueSA8PSB0aGlzLm1heC55ICYmXHJcbiAgICAgICAgIHZlYy56ID49IHRoaXMubWluLnogJiYgdmVjLnogPD0gdGhpcy5tYXguelxyXG4gICAgICApIHtcclxuICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgfVxyXG5cclxuICAgcHVibGljIHRvU3RyaW5nKGRpZ2l0czogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuICdbJyArIHRoaXMubWluLnRvU3RyaW5nKGRpZ2l0cykgKyAnXScgK1xyXG4gICAgICAgICAnWycgKyB0aGlzLm1heC50b1N0cmluZyhkaWdpdHMpICsgJ10nO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgdXBkYXRlKHY6IElWZWMzKTogdm9pZCB7XHJcbiAgICAgIGlmIChpc05hTih2LngpIHx8IGlzTmFOKHYueSkgfHwgaXNOYU4odi56KSkge1xyXG4gICAgICAgICAvL2NvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTmFOJyk7XHJcbiAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLm1pbi54ID0gTWF0aC5taW4odGhpcy5taW4ueCwgdi54KTtcclxuICAgICAgdGhpcy5taW4ueSA9IE1hdGgubWluKHRoaXMubWluLnksIHYueSk7XHJcbiAgICAgIHRoaXMubWluLnogPSBNYXRoLm1pbih0aGlzLm1pbi56LCB2LnopO1xyXG4gICAgICB0aGlzLm1heC54ID0gTWF0aC5tYXgodGhpcy5tYXgueCwgdi54KTtcclxuICAgICAgdGhpcy5tYXgueSA9IE1hdGgubWF4KHRoaXMubWF4LnksIHYueSk7XHJcbiAgICAgIHRoaXMubWF4LnogPSBNYXRoLm1heCh0aGlzLm1heC56LCB2LnopO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgbWVyZ2Uob3RoZXI6IEJvdW5kaW5nQm94KTogdm9pZCB7XHJcbiAgICAgIHRoaXMubWluLnggPSBNYXRoLm1pbih0aGlzLm1pbi54LCBvdGhlci5taW4ueCk7XHJcbiAgICAgIHRoaXMubWluLnkgPSBNYXRoLm1pbih0aGlzLm1pbi55LCBvdGhlci5taW4ueSk7XHJcbiAgICAgIHRoaXMubWluLnogPSBNYXRoLm1pbih0aGlzLm1pbi56LCBvdGhlci5taW4ueik7XHJcbiAgICAgIHRoaXMubWF4LnggPSBNYXRoLm1heCh0aGlzLm1heC54LCBvdGhlci5tYXgueCk7XHJcbiAgICAgIHRoaXMubWF4LnkgPSBNYXRoLm1heCh0aGlzLm1heC55LCBvdGhlci5tYXgueSk7XHJcbiAgICAgIHRoaXMubWF4LnogPSBNYXRoLm1heCh0aGlzLm1heC56LCBvdGhlci5tYXgueik7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBtdWx0TShtYXQ6IE1hdDQpOiBCb3VuZGluZ0JveCB7XHJcbiAgICAgIGNvbnN0IHJldCA9IG5ldyBCb3VuZGluZ0JveCgpO1xyXG4gICAgICBjb25zdCB2MSA9IG1hdC5tdWx0VihuZXcgVmVjNChbdGhpcy5taW4ueCwgdGhpcy5taW4ueSwgdGhpcy5taW4ueiwgMV0pKTtcclxuICAgICAgY29uc3QgdjIgPSBtYXQubXVsdFYobmV3IFZlYzQoW3RoaXMubWF4LngsIHRoaXMubWF4LnksIHRoaXMubWF4LnosIDFdKSk7XHJcbiAgICAgIHJldC5taW4ueCA9IE1hdGgubWluKHYxLngsIHYyLngpO1xyXG4gICAgICByZXQubWluLnkgPSBNYXRoLm1pbih2MS55LCB2Mi55KTtcclxuICAgICAgcmV0Lm1pbi56ID0gTWF0aC5taW4odjEueiwgdjIueik7XHJcbiAgICAgIHJldC5tYXgueCA9IE1hdGgubWF4KHYxLngsIHYyLngpO1xyXG4gICAgICByZXQubWF4LnkgPSBNYXRoLm1heCh2MS55LCB2Mi55KTtcclxuICAgICAgcmV0Lm1heC56ID0gTWF0aC5tYXgodjEueiwgdjIueik7XHJcblxyXG4gICAgICByZXR1cm4gcmV0O1xyXG4gICB9XHJcbn0iLCJpbXBvcnQgeyBWZWMzIH0gZnJvbSAnLi9WZWMnO1xyXG5pbXBvcnQgeyBJTWluTWF4IH0gZnJvbSAnLi9Cb3VuZGluZ0JveCc7XHJcbmltcG9ydCB7IFBsYW5lIH0gZnJvbSAnLi4vQXBwcy9WaWV3ZXIvUGxhbmUnO1xyXG5cclxuLyoqXHJcbiAqIEEgc2V0IG9mIHBvaW50cyB1c2VkIHRvIGRlZmluZSB0aGUgYm91bmRpbmcgZWRnZXMgb2YgYW4gb2JqZWN0LiBBbGwgcG9pbnRzIGFyZVxyXG4gKiBlbmNsb3NlZCBpbiB0aGUgb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQm91bmRpbmdQdHMge1xyXG4gICBwcml2YXRlIHB0czogVmVjM1tdO1xyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKHB0czogVmVjM1tdKSB7XHJcbiAgICAgIHRoaXMucHRzID0gcHRzO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0KGk6IG51bWJlcik6IFZlYzMge1xyXG4gICAgICByZXR1cm4gdGhpcy5wdHNbaV07XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBkaXN0VG9Qb2ludChwdDogVmVjMyk6IElNaW5NYXgge1xyXG4gICAgICBjb25zdCByZXQgPSB7XHJcbiAgICAgICAgIG1pbjogTnVtYmVyLk1BWF9WQUxVRSxcclxuICAgICAgICAgbWF4OiAtTnVtYmVyLk1BWF9WQUxVRSxcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5wdHMuZm9yRWFjaCgocHQyOiBWZWMzKSA9PiB7XHJcbiAgICAgICAgIGNvbnN0IHggPSBwdDIueCAtIHB0Lng7XHJcbiAgICAgICAgIGNvbnN0IHkgPSBwdDIueSAtIHB0Lnk7XHJcbiAgICAgICAgIGNvbnN0IHogPSBwdDIueiAtIHB0Lno7XHJcbiAgICAgICAgIGNvbnN0IGQgPSB4ICogeCArIHkgKiB5ICsgeiAqIHo7XHJcbiAgICAgICAgIHJldC5taW4gPSBNYXRoLm1pbihkLCByZXQubWluKTtcclxuICAgICAgICAgcmV0Lm1heCA9IE1hdGgubWF4KGQsIHJldC5tYXgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIGRvbid0IGJvdGhlciBnZXR0aW5nIHRoZSBzcXVhcmUgcm9vdCBvZiBldmVyeSBjYWxjdWxhdGlvbiwganVzdCB0aGUgbWluIGFuZCBtYXhcclxuICAgICAgcmV0Lm1pbiA9IE1hdGguc3FydChyZXQubWluKTtcclxuICAgICAgcmV0Lm1heCA9IE1hdGguc3FydChyZXQubWF4KTtcclxuXHJcbiAgICAgIHJldHVybiByZXQ7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBkaXN0VG9QbGFuZShwbGFuZTogUGxhbmUpOiBJTWluTWF4IHtcclxuICAgICAgY29uc3QgcmV0ID0ge1xyXG4gICAgICAgICBtaW46IE51bWJlci5NQVhfVkFMVUUsXHJcbiAgICAgICAgIG1heDogLU51bWJlci5NQVhfVkFMVUUsXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucHRzLmZvckVhY2goKHB0OiBWZWMzKSA9PiB7XHJcbiAgICAgICAgIGNvbnN0IGQgPSBwbGFuZS5kaXN0VG9QdChwdCk7XHJcbiAgICAgICAgIHJldC5taW4gPSBNYXRoLm1pbihkLCByZXQubWluKTtcclxuICAgICAgICAgcmV0Lm1heCA9IE1hdGgubWF4KGQsIHJldC5tYXgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiByZXQ7XHJcbiAgIH1cclxufSIsImltcG9ydCB7IEluZGV4ZWRWZWMzIH0gZnJvbSAnLi9JbmRleGVkVmVjMyc7XHJcbmltcG9ydCB7IFZlYzMgfSBmcm9tICcuL1ZlYyc7XHJcblxyXG4vKipcclxuICogTWluaW1hbGlzdCB3cmFwcGVyIGFyb3VuZCBhIFdlYkdMIHRyaWFuZ2xlIGVsZW1lbnRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBJbmRleGVkVHJpYW5nbGUge1xyXG4gICBwdWJsaWMgdjE6IEluZGV4ZWRWZWMzO1xyXG4gICBwdWJsaWMgdjI6IEluZGV4ZWRWZWMzO1xyXG4gICBwdWJsaWMgdjM6IEluZGV4ZWRWZWMzO1xyXG4gICBwdWJsaWMgbjE6IEluZGV4ZWRWZWMzO1xyXG4gICBwdWJsaWMgbjI6IEluZGV4ZWRWZWMzO1xyXG4gICBwdWJsaWMgbjM6IEluZGV4ZWRWZWMzO1xyXG4gICBwdWJsaWMgaTE6IG51bWJlcjtcclxuICAgcHVibGljIGkyOiBudW1iZXI7XHJcbiAgIHB1YmxpYyBpMzogbnVtYmVyO1xyXG5cclxuICAgY29uc3RydWN0b3IoXHJcbiAgICAgIHZlcnRpY2VzOiBudW1iZXJbXSxcclxuICAgICAgbm9ybWFsczogbnVtYmVyW10sXHJcbiAgICAgIGkxOiBudW1iZXIsXHJcbiAgICAgIGkyOiBudW1iZXIsXHJcbiAgICAgIGkzOiBudW1iZXIsXHJcbiAgICkge1xyXG4gICAgICB0aGlzLnYxID0gbmV3IEluZGV4ZWRWZWMzKHZlcnRpY2VzLCBpMSk7XHJcbiAgICAgIHRoaXMudjIgPSBuZXcgSW5kZXhlZFZlYzModmVydGljZXMsIGkyKTtcclxuICAgICAgdGhpcy52MyA9IG5ldyBJbmRleGVkVmVjMyh2ZXJ0aWNlcywgaTMpO1xyXG4gICAgICB0aGlzLm4xID0gbmV3IEluZGV4ZWRWZWMzKG5vcm1hbHMsIGkxKTtcclxuICAgICAgdGhpcy5uMiA9IG5ldyBJbmRleGVkVmVjMyhub3JtYWxzLCBpMik7XHJcbiAgICAgIHRoaXMubjMgPSBuZXcgSW5kZXhlZFZlYzMobm9ybWFscywgaTMpO1xyXG4gICAgICB0aGlzLmkxID0gaTE7XHJcbiAgICAgIHRoaXMuaTIgPSBpMjtcclxuICAgICAgdGhpcy5pMyA9IGkzO1xyXG4gICB9XHJcblxyXG4gICBnZXQgbWluWCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gTWF0aC5taW4odGhpcy52MS54LCB0aGlzLnYyLngsIHRoaXMudjMueCk7XHJcbiAgIH1cclxuICAgZ2V0IG1pblkoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIE1hdGgubWluKHRoaXMudjEueSwgdGhpcy52Mi55LCB0aGlzLnYzLnkpO1xyXG4gICB9XHJcbiAgIGdldCBtaW5aKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBNYXRoLm1pbih0aGlzLnYxLnosIHRoaXMudjIueiwgdGhpcy52My56KTtcclxuICAgfVxyXG5cclxuICAgZ2V0IG1heFgoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIE1hdGgubWF4KHRoaXMudjEueCwgdGhpcy52Mi54LCB0aGlzLnYzLngpO1xyXG4gICB9XHJcbiAgIGdldCBtYXhZKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBNYXRoLm1heCh0aGlzLnYxLnksIHRoaXMudjIueSwgdGhpcy52My55KTtcclxuICAgfVxyXG4gICBnZXQgbWF4WigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gTWF0aC5tYXgodGhpcy52MS56LCB0aGlzLnYyLnosIHRoaXMudjMueik7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBjb21wdXRlTm9ybWFsKCk6IFZlYzMge1xyXG4gICAgICBjb25zdCB2MSA9IHRoaXMudjEudG9WZWMzKCk7XHJcbiAgICAgIGNvbnN0IHYyID0gdGhpcy52Mi50b1ZlYzMoKTtcclxuICAgICAgY29uc3QgdjMgPSB0aGlzLnYzLnRvVmVjMygpO1xyXG5cclxuICAgICAgY29uc3QgYSA9IHYyLnN1YnRyYWN0KHYxKTtcclxuICAgICAgY29uc3QgYiA9IHYzLnN1YnRyYWN0KHYyKTtcclxuICAgICAgcmV0dXJuIGEuY3Jvc3MoYikubm9ybWFsaXplKCk7XHJcbiAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJVmVjMywgVmVjMyB9IGZyb20gJy4vVmVjJztcclxuXHJcbmV4cG9ydCBjbGFzcyBJbmRleGVkVmVjMyBpbXBsZW1lbnRzIElWZWMzIHtcclxuXHJcbiAgIHByaXZhdGUgdmFsdWVzOiBudW1iZXJbXTtcclxuICAgcHJpdmF0ZSBpbmRleDogbnVtYmVyO1xyXG5cclxuICAgY29uc3RydWN0b3IodmFsdWVzOiBudW1iZXJbXSwgaW5kZXg6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlcztcclxuICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0IHgoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMudmFsdWVzWzMgKiB0aGlzLmluZGV4ICsgMF07XHJcbiAgIH1cclxuICAgcHVibGljIHNldCB4KHZhbDogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMudmFsdWVzWzMgKiB0aGlzLmluZGV4ICsgMF0gPSB2YWw7XHJcbiAgIH1cclxuICAgcHVibGljIGdldCB5KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlc1szICogdGhpcy5pbmRleCArIDFdO1xyXG4gICB9XHJcbiAgIHB1YmxpYyBzZXQgeSh2YWw6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnZhbHVlc1szICogdGhpcy5pbmRleCArIDFdID0gdmFsO1xyXG4gICB9XHJcbiAgIHB1YmxpYyBnZXQgeigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMyAqIHRoaXMuaW5kZXggKyAyXTtcclxuICAgfVxyXG4gICBwdWJsaWMgc2V0IHoodmFsOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy52YWx1ZXNbMyAqIHRoaXMuaW5kZXggKyAyXSA9IHZhbDtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHRvVmVjMygpOiBWZWMzIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWMzKFt0aGlzLngsIHRoaXMueSwgdGhpcy56XSk7XHJcbiAgIH1cclxufSIsImltcG9ydCB7IFZlYzQsIFZlYzMgfSBmcm9tICcuL1ZlYyc7XHJcblxyXG4vKipcclxuICogQW4geC15LXotdyBtYXRyaXggZm9yIHVzZSBpbiBXZWJHTCBhcHBsaWNhdGlvbnMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWF0NCB7XHJcblxyXG4gICAvKiogVGhlIG1hdHJpeCB2YWx1ZSBzdG9yZWQgYXMgYSAxNiBlbGVtZW50IGFycmF5ICovXHJcbiAgIHB1YmxpYyB2YWx1ZXM6IG51bWJlcltdO1xyXG5cclxuICAgcHVibGljIGdldCBzY2FsZUZhY3RvcnMoKTogVmVjMyB7XHJcbiAgICAgIGNvbnN0IHNYID0gKG5ldyBWZWMzKFt0aGlzLmdldCgwLCAwKSwgdGhpcy5nZXQoMSwgMCksIHRoaXMuZ2V0KDIsIDApXSkpLm1hZ25pdHVkZSgpO1xyXG4gICAgICBjb25zdCBzWSA9IChuZXcgVmVjMyhbdGhpcy5nZXQoMCwgMCksIHRoaXMuZ2V0KDEsIDApLCB0aGlzLmdldCgyLCAwKV0pKS5tYWduaXR1ZGUoKTtcclxuICAgICAgY29uc3Qgc1ogPSAobmV3IFZlYzMoW3RoaXMuZ2V0KDAsIDApLCB0aGlzLmdldCgxLCAwKSwgdGhpcy5nZXQoMiwgMCldKSkubWFnbml0dWRlKCk7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjMyhbc1gsIHNZLCBzWl0pO1xyXG4gICB9XHJcbiAgIC8qKlxyXG4gICAgKiBAcGFyYW0gdmFsdWVzIElmIHN1cHBsaWVkLCB0aGUgaW5pdGlhbCBtYXRyaXggdmFsdWVzLiBJZiBub3Qgc3VwcGxpZWQsIHRoZSBtYXRyaXggaXMgXHJcbiAgICAqIGluaXRpYWxpemVkIGFzIGFuIGlkZW50aXR5IG1hdHJpeC5cclxuICAgICovXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih2YWx1ZXM/OiBudW1iZXJbXSkge1xyXG4gICAgICBpZiAodmFsdWVzKSB7XHJcbiAgICAgICAgIHRoaXMudmFsdWVzID0gWy4uLnZhbHVlc107XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHRoaXMudmFsdWVzID0gW1xyXG4gICAgICAgICAgICAxLCAwLCAwLCAwLFxyXG4gICAgICAgICAgICAwLCAxLCAwLCAwLFxyXG4gICAgICAgICAgICAwLCAwLCAxLCAwLFxyXG4gICAgICAgICAgICAwLCAwLCAwLCAxXTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogR2V0J3MgYW4gaWRlbnRpdHkgbWF0cml4LiBTYW1lIGFzIGNyZWF0aW5nIGEgbmV3IG1hdHJpeCwgYnV0IHN5bnRhY3RpY2FsbHlcclxuICAgICogc2hvd3Mgd2hhdCBpcyBoYXBwZW5pbmcuXHJcbiAgICAqIFxyXG4gICAgKiBAcmV0dXJucyBBIG5ldyBpZGVuaXR5IG1hdHJpeC5cclxuICAgICovXHJcbiAgIHB1YmxpYyBzdGF0aWMgZ2V0IGlkZW50aXR5KCk6IE1hdDQge1xyXG4gICAgICByZXR1cm4gbmV3IE1hdDQoKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgYW4gb3J0aG9ncmFwaGljIG1hdHJpeCBpbiB0aGUgV2ViR0wgY29vcmRpbmF0ZSBzeXN0ZW0gKHBvc2l0aXZlIHogdG93YXJkcyB5b3UpXHJcbiAgICAqIFxyXG4gICAgKiBAcmV0dXJuIEEgbmV3IG9ydGhvZ3JhcGhpYyBtYXRyaXhcclxuICAgICovXHJcbiAgIHB1YmxpYyBzdGF0aWMgZ2V0IG9ydGhvKCk6IE1hdDQge1xyXG4gICAgICByZXR1cm4gTWF0NC5tYWtlT3J0aG8oLTEsIDEsIC0xLCAxLCAxLCAtMSk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBDcmVhdGVzIGEgY29weSBvZiB0aGUgbWF0cml4LlxyXG4gICAgKiBcclxuICAgICogQHJldHVybnMgQSBjb3B5IG9mIHRoZSBtYXRyaXguXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgY2xvbmUoKTogTWF0NCB7XHJcbiAgICAgIHJldHVybiBuZXcgTWF0NCh0aGlzLnZhbHVlcyk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBHZXRzIGEgdmFsdWUgaW4gdGhlIG1hdHJpeC5cclxuICAgICogXHJcbiAgICAqIEBwYXJhbSByb3cgVGhlIHJvdyBpbmRleC5cclxuICAgICogQHBhcmFtIGNvbCBUaGUgY29sdW1uIGluZGV4LlxyXG4gICAgKiBAcmV0dXJucyBUaGUgbWF0cml4IHZhbHVlLlxyXG4gICAgKi9cclxuICAgcHVibGljIGdldChyb3c6IG51bWJlciwgY29sOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy52YWx1ZXNbNCAqIHJvdyArIGNvbF07XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBTZXRzIGEgdmFsdWUgaW4gdGhlIG1hdHJpeC5cclxuICAgICogXHJcbiAgICAqIEBwYXJhbSByb3cgVGhlIHJvdyBpbmRleC5cclxuICAgICogQHBhcmFtIGNvbCBUaGUgY29sdW1uIGluZGV4LlxyXG4gICAgKiBAcGFyYW0gdmFsIFRoZSB2YWx1ZS5cclxuICAgICovXHJcbiAgIHB1YmxpYyBzZXQocm93OiBudW1iZXIsIGNvbDogbnVtYmVyLCB2YWw6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICB0aGlzLnZhbHVlc1s0ICogcm93ICsgY29sXSA9IHZhbDtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIE11bHRpcGxpZXMgdGhpcyBtYXRyaXggYWdhaW5zdCBhIHZlY3RvciBhbmQgcmV0dXJucyB0aGUgcmVzdWx0LlxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIHZlYyBUaGUgdmVjdG9yLlxyXG4gICAgKiBAcmV0dXJuIFRoZSByZXN1bHQgb2YgdGhlIG11bHRpcGxpY2F0aW9uLiBcclxuICAgICovXHJcbiAgIHB1YmxpYyBtdWx0Vih2ZWM6IFZlYzQpOiBWZWM0IHtcclxuICAgICAgY29uc3QgdmFsczogbnVtYmVyW10gPSBbXTtcclxuXHJcbiAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDQ7IHJvdysrKSB7XHJcbiAgICAgICAgIGxldCBzdW0gPSAwO1xyXG4gICAgICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCA0OyBjb2wrKykge1xyXG4gICAgICAgICAgICBzdW0gKz0gdGhpcy52YWx1ZXNbcm93ICogNCArIGNvbF0gKiB2ZWMudmFsdWVzW2NvbF07XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgdmFscy5wdXNoKHN1bSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG5ldyBWZWM0KHZhbHMpO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogVHJhbnNmb3JtcyBhIDNkIHZlYyBieSB0aGlzIG1hdHJpeC5cclxuICAgICogXHJcbiAgICAqIEBwYXJhbSB2ZWMgQSAzZCB2ZWMuXHJcbiAgICAqIEBwYXJhbSB3IFRoZSB2YWx1ZSB0byB1c2UgZm9yIHcuIDAgPSBpZ25vcmUgdHJhbnNsYXRpb24uIDEgPSBpbmNsdWRlLlxyXG4gICAgKiBAcmV0dXJucyBUaGUgbmV3IDNkIHZlYy5cclxuICAgICovXHJcbiAgIHB1YmxpYyBtdWx0VmVjMyh2ZWM6IFZlYzMsIHcgPSAxKTogVmVjMyB7XHJcbiAgICAgIHJldHVybiB0aGlzLm11bHRWKHZlYy50b1ZlYzQodykpLnh5ejtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIE11bHRpcGxpZXMgdGhpcyBtYXRyaXggYWdhaW5zdCBhbm90aGVyIG1hdHJpeCBhbmQgcmV0dXJucyB0aGUgcmVzdWx0LlxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIG90aGVyIFRoZSBtYXRyaXguXHJcbiAgICAqIEByZXR1cm4gVGhlIHJlc3VsdCBvZiB0aGUgbXVsdGlwbGljYXRpb24uIFxyXG4gICAgKi9cclxuICAgcHVibGljIG11bHRNKG90aGVyOiBNYXQ0KTogTWF0NCB7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBuZXcgTWF0NCgpO1xyXG5cclxuICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgNDsgcm93KyspIHtcclxuICAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgNDsgY29sKyspIHtcclxuICAgICAgICAgICAgbGV0IHN1bSA9IDA7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgIHN1bSArPSB0aGlzLmdldChyb3csIGkpICogb3RoZXIuZ2V0KGksIGNvbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzdWx0LnNldChyb3csIGNvbCwgc3VtKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogSW52ZXJ0cyB0aGlzIG1hdHJpeCBhbmQgcmV0dXJucyB0aGUgcmVzdWx0LlxyXG4gICAgKiBcclxuICAgICogQHJldHVybnMgVGhlIGludmVyc2Ugb2YgdGhpcy5cclxuICAgICovXHJcbiAgIHB1YmxpYyBpbnZlcnNlKCk6IE1hdDQge1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IE1hdDQoKTtcclxuXHJcbiAgICAgIGNvbnN0IGEwMCA9IHRoaXMudmFsdWVzWzBdLCBhMDEgPSB0aGlzLnZhbHVlc1sxXSwgYTAyID0gdGhpcy52YWx1ZXNbMl0sIGEwMyA9IHRoaXMudmFsdWVzWzNdO1xyXG4gICAgICBjb25zdCBhMTAgPSB0aGlzLnZhbHVlc1s0XSwgYTExID0gdGhpcy52YWx1ZXNbNV0sIGExMiA9IHRoaXMudmFsdWVzWzZdLCBhMTMgPSB0aGlzLnZhbHVlc1s3XTtcclxuICAgICAgY29uc3QgYTIwID0gdGhpcy52YWx1ZXNbOF0sIGEyMSA9IHRoaXMudmFsdWVzWzldLCBhMjIgPSB0aGlzLnZhbHVlc1sxMF0sIGEyMyA9IHRoaXMudmFsdWVzWzExXTtcclxuICAgICAgY29uc3QgYTMwID0gdGhpcy52YWx1ZXNbMTJdLCBhMzEgPSB0aGlzLnZhbHVlc1sxM10sIGEzMiA9IHRoaXMudmFsdWVzWzE0XSwgYTMzID0gdGhpcy52YWx1ZXNbMTVdO1xyXG5cclxuICAgICAgY29uc3QgYjAwID0gYTAwICogYTExIC0gYTAxICogYTEwO1xyXG4gICAgICBjb25zdCBiMDEgPSBhMDAgKiBhMTIgLSBhMDIgKiBhMTA7XHJcbiAgICAgIGNvbnN0IGIwMiA9IGEwMCAqIGExMyAtIGEwMyAqIGExMDtcclxuICAgICAgY29uc3QgYjAzID0gYTAxICogYTEyIC0gYTAyICogYTExO1xyXG4gICAgICBjb25zdCBiMDQgPSBhMDEgKiBhMTMgLSBhMDMgKiBhMTE7XHJcbiAgICAgIGNvbnN0IGIwNSA9IGEwMiAqIGExMyAtIGEwMyAqIGExMjtcclxuICAgICAgY29uc3QgYjA2ID0gYTIwICogYTMxIC0gYTIxICogYTMwO1xyXG4gICAgICBjb25zdCBiMDcgPSBhMjAgKiBhMzIgLSBhMjIgKiBhMzA7XHJcbiAgICAgIGNvbnN0IGIwOCA9IGEyMCAqIGEzMyAtIGEyMyAqIGEzMDtcclxuICAgICAgY29uc3QgYjA5ID0gYTIxICogYTMyIC0gYTIyICogYTMxO1xyXG4gICAgICBjb25zdCBiMTAgPSBhMjEgKiBhMzMgLSBhMjMgKiBhMzE7XHJcbiAgICAgIGNvbnN0IGIxMSA9IGEyMiAqIGEzMyAtIGEyMyAqIGEzMjtcclxuXHJcbiAgICAgIC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcclxuICAgICAgbGV0IGRldCA9IGIwMCAqIGIxMSAtIGIwMSAqIGIxMCArIGIwMiAqIGIwOSArIGIwMyAqIGIwOCAtIGIwNCAqIGIwNyArIGIwNSAqIGIwNjtcclxuXHJcbiAgICAgIGlmICghZGV0KSB7XHJcbiAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIGRldCA9IDEuMCAvIGRldDtcclxuXHJcbiAgICAgIHJlc3VsdC52YWx1ZXNbMF0gPSAoYTExICogYjExIC0gYTEyICogYjEwICsgYTEzICogYjA5KSAqIGRldDtcclxuICAgICAgcmVzdWx0LnZhbHVlc1sxXSA9IChhMDIgKiBiMTAgLSBhMDEgKiBiMTEgLSBhMDMgKiBiMDkpICogZGV0O1xyXG4gICAgICByZXN1bHQudmFsdWVzWzJdID0gKGEzMSAqIGIwNSAtIGEzMiAqIGIwNCArIGEzMyAqIGIwMykgKiBkZXQ7XHJcbiAgICAgIHJlc3VsdC52YWx1ZXNbM10gPSAoYTIyICogYjA0IC0gYTIxICogYjA1IC0gYTIzICogYjAzKSAqIGRldDtcclxuICAgICAgcmVzdWx0LnZhbHVlc1s0XSA9IChhMTIgKiBiMDggLSBhMTAgKiBiMTEgLSBhMTMgKiBiMDcpICogZGV0O1xyXG4gICAgICByZXN1bHQudmFsdWVzWzVdID0gKGEwMCAqIGIxMSAtIGEwMiAqIGIwOCArIGEwMyAqIGIwNykgKiBkZXQ7XHJcbiAgICAgIHJlc3VsdC52YWx1ZXNbNl0gPSAoYTMyICogYjAyIC0gYTMwICogYjA1IC0gYTMzICogYjAxKSAqIGRldDtcclxuICAgICAgcmVzdWx0LnZhbHVlc1s3XSA9IChhMjAgKiBiMDUgLSBhMjIgKiBiMDIgKyBhMjMgKiBiMDEpICogZGV0O1xyXG4gICAgICByZXN1bHQudmFsdWVzWzhdID0gKGExMCAqIGIxMCAtIGExMSAqIGIwOCArIGExMyAqIGIwNikgKiBkZXQ7XHJcbiAgICAgIHJlc3VsdC52YWx1ZXNbOV0gPSAoYTAxICogYjA4IC0gYTAwICogYjEwIC0gYTAzICogYjA2KSAqIGRldDtcclxuICAgICAgcmVzdWx0LnZhbHVlc1sxMF0gPSAoYTMwICogYjA0IC0gYTMxICogYjAyICsgYTMzICogYjAwKSAqIGRldDtcclxuICAgICAgcmVzdWx0LnZhbHVlc1sxMV0gPSAoYTIxICogYjAyIC0gYTIwICogYjA0IC0gYTIzICogYjAwKSAqIGRldDtcclxuICAgICAgcmVzdWx0LnZhbHVlc1sxMl0gPSAoYTExICogYjA3IC0gYTEwICogYjA5IC0gYTEyICogYjA2KSAqIGRldDtcclxuICAgICAgcmVzdWx0LnZhbHVlc1sxM10gPSAoYTAwICogYjA5IC0gYTAxICogYjA3ICsgYTAyICogYjA2KSAqIGRldDtcclxuICAgICAgcmVzdWx0LnZhbHVlc1sxNF0gPSAoYTMxICogYjAxIC0gYTMwICogYjAzIC0gYTMyICogYjAwKSAqIGRldDtcclxuICAgICAgcmVzdWx0LnZhbHVlc1sxNV0gPSAoYTIwICogYjAzIC0gYTIxICogYjAxICsgYTIyICogYjAwKSAqIGRldDtcclxuXHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBUcmFuc3Bvc2VzIHRoaXMgbWF0cml4IGFuZCByZXR1cm5zIHRoZSByZXN1bHQgYXMgYSBuZXcgbWF0cml4LlxyXG4gICAgKiBcclxuICAgICogQHJldHVybnMgVGhlIHRyYW5zcG9zZWQgbWF0cml4LlxyXG4gICAgKi9cclxuICAgcHVibGljIHRyYW5zcG9zZSgpOiBNYXQ0IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IE1hdDQoKTtcclxuXHJcbiAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDQ7IHJvdysrKSB7XHJcbiAgICAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IDQ7IGNvbCsrKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5zZXQocm93LCBjb2wsIHRoaXMuZ2V0KGNvbCwgcm93KSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgYSBtYXRyaXggdGhhdCBjb250YWlucyBhIHNjYWxlIG9wZXJhdGlvbi5cclxuICAgICogXHJcbiAgICAqIEBwYXJhbSBzY2FsZSBUaGUgc2NhbGUgZmFjdG9yXHJcbiAgICAqIEByZXR1cm5zIFRoZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXguXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc3RhdGljIGZyb21TY2FsZShzY2FsZTogbnVtYmVyKTogTWF0NCB7XHJcblxyXG4gICAgICByZXR1cm4gbmV3IE1hdDQoW1xyXG4gICAgICAgICBzY2FsZSwgMCwgMCwgMCxcclxuICAgICAgICAgMCwgc2NhbGUsIDAsIDAsXHJcbiAgICAgICAgIDAsIDAsIHNjYWxlLCAwLFxyXG4gICAgICAgICAwLCAwLCAwLCAxXHJcbiAgICAgIF0pO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogQ3JlYXRlcyBhIG1hdHJpeCB0aGF0IGNvbnRhaW5zIGEgdHJhbnNsYXRpb24gb3BlcmF0aW9uLlxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIHZlYyBUaGUgdHJhbnNsYXRpb25zLlxyXG4gICAgKiBAcmV0dXJucyBUaGUgdHJhbnNmb3JtYXRpb24gbWF0cml4LlxyXG4gICAgKi9cclxuICAgcHVibGljIHN0YXRpYyBmcm9tVHJhbnNsYXRpb24odjogVmVjMyk6IE1hdDQge1xyXG5cclxuICAgICAgcmV0dXJuIG5ldyBNYXQ0KFtcclxuICAgICAgICAgMSwgMCwgMCwgdi54LFxyXG4gICAgICAgICAwLCAxLCAwLCB2LnksXHJcbiAgICAgICAgIDAsIDAsIDEsIHYueixcclxuICAgICAgICAgMCwgMCwgMCwgMVxyXG4gICAgICBdKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHN0YXRpYyBmcm9tUm90WChhbmdsZTogbnVtYmVyKTogTWF0NCB7XHJcblxyXG4gICAgICBjb25zdCBjID0gTWF0aC5jb3MoYW5nbGUpXHJcbiAgICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSlcclxuICAgICAgcmV0dXJuIG5ldyBNYXQ0KFtcclxuICAgICAgICAgMSwgMCwgMCwgMCxcclxuICAgICAgICAgMCwgYywgcywgMCxcclxuICAgICAgICAgMCwgLXMsIGMsIDAsXHJcbiAgICAgICAgIDAsIDAsIDAsIDFcclxuICAgICAgXSk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBzdGF0aWMgZnJvbVJvdFkoYW5nbGU6IG51bWJlcik6IE1hdDQge1xyXG5cclxuICAgICAgY29uc3QgYyA9IE1hdGguY29zKGFuZ2xlKVxyXG4gICAgICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGUpXHJcbiAgICAgIHJldHVybiBuZXcgTWF0NChbXHJcbiAgICAgICAgIGMsIDAsIC1zLCAwLFxyXG4gICAgICAgICAwLCAxLCAwLCAwLFxyXG4gICAgICAgICBzLCAwLCBjLCAwLFxyXG4gICAgICAgICAwLCAwLCAwLCAxXHJcbiAgICAgIF0pO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgc3RhdGljIGZyb21Sb3RaKGFuZ2xlOiBudW1iZXIpOiBNYXQ0IHtcclxuXHJcbiAgICAgIGNvbnN0IGMgPSBNYXRoLmNvcyhhbmdsZSlcclxuICAgICAgY29uc3QgcyA9IE1hdGguc2luKGFuZ2xlKVxyXG4gICAgICByZXR1cm4gbmV3IE1hdDQoW1xyXG4gICAgICAgICBjLCBzLCAwLCAwLFxyXG4gICAgICAgICAtcywgYywgMCwgMCxcclxuICAgICAgICAgMCwgMCwgMSwgMCxcclxuICAgICAgICAgMCwgMCwgMCwgMVxyXG4gICAgICBdKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHJvdFgoYW5nbGU6IG51bWJlcik6IE1hdDQge1xyXG4gICAgICB0aGlzLnZhbHVlcyA9IE1hdDQuZnJvbVJvdFgoYW5nbGUpLm11bHRNKHRoaXMpLnZhbHVlcztcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgIH1cclxuICAgcHVibGljIHJvdFkoYW5nbGU6IG51bWJlcik6IE1hdDQge1xyXG4gICAgICB0aGlzLnZhbHVlcyA9IE1hdDQuZnJvbVJvdFkoYW5nbGUpLm11bHRNKHRoaXMpLnZhbHVlcztcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgIH1cclxuICAgcHVibGljIHJvdFooYW5nbGU6IG51bWJlcik6IE1hdDQge1xyXG4gICAgICB0aGlzLnZhbHVlcyA9IE1hdDQuZnJvbVJvdFooYW5nbGUpLm11bHRNKHRoaXMpLnZhbHVlcztcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgIH1cclxuICAgcHVibGljIHByZVJvdFgoYW5nbGU6IG51bWJlcik6IE1hdDQge1xyXG4gICAgICB0aGlzLnZhbHVlcyA9IHRoaXMubXVsdE0oTWF0NC5mcm9tUm90WChhbmdsZSkpLnZhbHVlcztcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgIH1cclxuICAgcHVibGljIHByZVJvdFkoYW5nbGU6IG51bWJlcik6IE1hdDQge1xyXG4gICAgICB0aGlzLnZhbHVlcyA9IHRoaXMubXVsdE0oTWF0NC5mcm9tUm90WShhbmdsZSkpLnZhbHVlcztcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgIH1cclxuICAgcHVibGljIHByZVJvdFooYW5nbGU6IG51bWJlcik6IE1hdDQge1xyXG4gICAgICB0aGlzLnZhbHVlcyA9IHRoaXMubXVsdE0oTWF0NC5mcm9tUm90WihhbmdsZSkpLnZhbHVlcztcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgIH1cclxuICAgcHVibGljIHRyYW5zbGF0ZShvZmZzZXQ6IFZlYzMpOiBNYXQ0IHtcclxuICAgICAgdGhpcy52YWx1ZXMgPSBNYXQ0LmZyb21UcmFuc2xhdGlvbihvZmZzZXQpLm11bHRNKHRoaXMpLnZhbHVlcztcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgIH1cclxuICAgcHVibGljIHNjYWxlKHNjYWxlOiBudW1iZXIpOiBNYXQ0IHtcclxuICAgICAgdGhpcy52YWx1ZXMgPSBNYXQ0LmZyb21TY2FsZShzY2FsZSkubXVsdE0odGhpcykudmFsdWVzO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgYSB2aWV3aW5nIG1hdHJpeC4gU2VlIGdsdUxvb2tBdC5cclxuICAgICogXHJcbiAgICAqIEBwYXJhbSBleWUgVGhlIGV5ZSBwb3NpdGlvbi5cclxuICAgICogQHBhcmFtIGNlbnRlciBUaGUgcG9pbnQgb2YgaW50ZXJlc3QuXHJcbiAgICAqIEBwYXJhbSB1cCBUaGUgdXAgdmVjdG9yLlxyXG4gICAgKiBAcmV0dXJucyBUaGUgdmlld2luZyBtYXRyaXguXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc3RhdGljIG1ha2VMb29rQXQoZXllOiBWZWMzLCBjZW50ZXI6IFZlYzMsIHVwOiBWZWMzLCk6IE1hdDQge1xyXG5cclxuICAgICAgY29uc3QgYSA9IGV5ZS5zdWJ0cmFjdChjZW50ZXIpLm5vcm1hbGl6ZSgpO1xyXG4gICAgICBjb25zdCBiID0gdXAuY3Jvc3MoYSkubm9ybWFsaXplKCk7XHJcbiAgICAgIGNvbnN0IGMgPSBhLmNyb3NzKGIpLm5vcm1hbGl6ZSgpO1xyXG5cclxuICAgICAgY29uc3QgbSA9IG5ldyBNYXQ0KFtcclxuICAgICAgICAgYi54LCBiLnksIGIueiwgMCxcclxuICAgICAgICAgYy54LCBjLnksIGMueiwgMCxcclxuICAgICAgICAgYS54LCBhLnksIGEueiwgMCxcclxuICAgICAgICAgMCwgMCwgMCwgMVxyXG4gICAgICBdKTtcclxuXHJcbiAgICAgIGNvbnN0IHQgPSBuZXcgTWF0NChbXHJcbiAgICAgICAgIDEsIDAsIDAsIC1leWUueCxcclxuICAgICAgICAgMCwgMSwgMCwgLWV5ZS55LFxyXG4gICAgICAgICAwLCAwLCAxLCAtZXllLnosXHJcbiAgICAgICAgIDAsIDAsIDAsIDFcclxuICAgICAgXSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBtLm11bHRNKHQpO1xyXG5cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgYSBwZXJzcGVjdGl2ZSBtYXRyaXguIFNlZSBnbHVQZXJzcGVjdGl2ZS5cclxuICAgICogXHJcbiAgICAqIEBwYXJhbSBmb3Z5IEZpZWxkIG9mIHZpZXcgKGluIGRlZ3JlZXMpLlxyXG4gICAgKiBAcGFyYW0gYXNwZWN0IFZpZXcgYXNwZWN0IHJhdGlvLlxyXG4gICAgKiBAcGFyYW0gem5lYXIgTmVhciBjbGlwcGluZyBwbGFuZS5cclxuICAgICogQHBhcmFtIHpmYXIgRmFyIGNsaXBwaW5nIHBsYW5lLlxyXG4gICAgKi9cclxuICAgcHVibGljIHN0YXRpYyBtYWtlUGVyc3BlY3RpdmUoXHJcbiAgICAgIGZvdnk6IG51bWJlcixcclxuICAgICAgYXNwZWN0OiBudW1iZXIsXHJcbiAgICAgIHpuZWFyOiBudW1iZXIsXHJcbiAgICAgIHpmYXI6IG51bWJlcik6IE1hdDQge1xyXG5cclxuICAgICAgY29uc3QgeW1heCA9IHpuZWFyICogTWF0aC50YW4oZm92eSAqIE1hdGguUEkgLyAzNjAuMCk7XHJcbiAgICAgIGNvbnN0IHltaW4gPSAteW1heDtcclxuICAgICAgY29uc3QgeG1pbiA9IHltaW4gKiBhc3BlY3Q7XHJcbiAgICAgIGNvbnN0IHhtYXggPSB5bWF4ICogYXNwZWN0O1xyXG5cclxuICAgICAgcmV0dXJuIE1hdDQubWFrZUZydXN0dW0oeG1pbiwgeG1heCwgeW1pbiwgeW1heCwgem5lYXIsIHpmYXIpO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogQ3JlYXRlcyBhIHBlcnNwZWN0aXZlIG1hdHJpeC4gU2VlIGdsdUZydXN0dW0uXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjbGlwcGluZyBwbGFuZS5cclxuICAgICogQHBhcmFtIHJpZ2h0IFRoZSByaWdodCBjbGlwcGluZyBwbGFuZS5cclxuICAgICogQHBhcmFtIGJvdHRvbSBUaGUgYm90dG9tIGNsaXBwaW5nIHBsYW5lLlxyXG4gICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY2xpcHBpbmcgcGxhbmUuXHJcbiAgICAqIEBwYXJhbSB6bmVhciBUaGUgbmVhciBjbGlwcGluZyBwbGFuZS5cclxuICAgICogQHBhcmFtIHpmYXIgVGhlIGZhciBjbGlwcGluZyBwbGFuZS5cclxuICAgICogQHJldHVybnMgdGhlIHBlcnNwZWN0aXZlIG1hdHJpeC5cclxuICAgICovXHJcbiAgIHB1YmxpYyBzdGF0aWMgbWFrZUZydXN0dW0oXHJcbiAgICAgIGxlZnQ6IG51bWJlcixcclxuICAgICAgcmlnaHQ6IG51bWJlcixcclxuICAgICAgYm90dG9tOiBudW1iZXIsXHJcbiAgICAgIHRvcDogbnVtYmVyLFxyXG4gICAgICB6bmVhcjogbnVtYmVyLFxyXG4gICAgICB6ZmFyOiBudW1iZXIpOiBNYXQ0IHtcclxuXHJcbiAgICAgIGNvbnN0IFggPSAyICogem5lYXIgLyAocmlnaHQgLSBsZWZ0KTtcclxuICAgICAgY29uc3QgWSA9IDIgKiB6bmVhciAvICh0b3AgLSBib3R0b20pO1xyXG4gICAgICBjb25zdCBBID0gKHJpZ2h0ICsgbGVmdCkgLyAocmlnaHQgLSBsZWZ0KTtcclxuICAgICAgY29uc3QgQiA9ICh0b3AgKyBib3R0b20pIC8gKHRvcCAtIGJvdHRvbSk7XHJcbiAgICAgIGNvbnN0IEMgPSAtKHpmYXIgKyB6bmVhcikgLyAoemZhciAtIHpuZWFyKTtcclxuICAgICAgY29uc3QgRCA9IC0yICogemZhciAqIHpuZWFyIC8gKHpmYXIgLSB6bmVhcik7XHJcblxyXG4gICAgICByZXR1cm4gbmV3IE1hdDQoW1xyXG4gICAgICAgICBYLCAwLCBBLCAwLFxyXG4gICAgICAgICAwLCBZLCBCLCAwLFxyXG4gICAgICAgICAwLCAwLCBDLCBELFxyXG4gICAgICAgICAwLCAwLCAtMSwgMFxyXG4gICAgICBdKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgYSBwZXJzcGVjdGl2ZSBtYXRyaXguIFNlZSBnbHVPcnRoby5cclxuICAgICogXHJcbiAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNsaXBwaW5nIHBsYW5lLlxyXG4gICAgKiBAcGFyYW0gcmlnaHQgVGhlIHJpZ2h0IGNsaXBwaW5nIHBsYW5lLlxyXG4gICAgKiBAcGFyYW0gYm90dG9tIFRoZSBib3R0b20gY2xpcHBpbmcgcGxhbmUuXHJcbiAgICAqIEBwYXJhbSB0b3AgVGhlIHRvcCBjbGlwcGluZyBwbGFuZS5cclxuICAgICogQHBhcmFtIHpuZWFyIFRoZSBuZWFyIGNsaXBwaW5nIHBsYW5lLlxyXG4gICAgKiBAcGFyYW0gemZhciBUaGUgZmFyIGNsaXBwaW5nIHBsYW5lLlxyXG4gICAgKiBAcmV0dXJucyB0aGUgcGVyc3BlY3RpdmUgbWF0cml4LlxyXG4gICAgKi9cclxuICAgcHVibGljIHN0YXRpYyBtYWtlT3J0aG8oXHJcbiAgICAgIGxlZnQ6IG51bWJlcixcclxuICAgICAgcmlnaHQ6IG51bWJlcixcclxuICAgICAgYm90dG9tOiBudW1iZXIsXHJcbiAgICAgIHRvcDogbnVtYmVyLFxyXG4gICAgICBuZWFyOiBudW1iZXIsXHJcbiAgICAgIGZhcjogbnVtYmVyKTogTWF0NCB7XHJcblxyXG4gICAgICByZXR1cm4gbmV3IE1hdDQoW1xyXG4gICAgICAgICAyIC8gKHJpZ2h0IC0gbGVmdCksIDAsIDAsIChyaWdodCArIGxlZnQpIC8gKHJpZ2h0IC0gbGVmdCksXHJcbiAgICAgICAgIDAsIDIgLyAodG9wIC0gYm90dG9tKSwgMCwgKHRvcCArIGJvdHRvbSkgLyAodG9wIC0gYm90dG9tKSxcclxuICAgICAgICAgMCwgMCwgMiAvIChmYXIgLSBuZWFyKSwgKGZhciArIG5lYXIpIC8gKGZhciAtIG5lYXIpLFxyXG4gICAgICAgICAwLCAwLCAwLCAxXHJcbiAgICAgIF0pO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgbG9nKG1zZzogc3RyaW5nLCBkaWdpdHMgPSAyKTogdm9pZCB7XHJcbiAgICAgIGNvbnNvbGUubG9nKG1zZyk7XHJcbiAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgNDsgcisrKSB7XHJcbiAgICAgICAgIGxldCBsaW5lID0gJyc7XHJcbiAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgNDsgYysrKSB7XHJcbiAgICAgICAgICAgIGxpbmUgKz0gdGhpcy5nZXQociwgYykudG9GaXhlZChkaWdpdHMpICsgJyAnO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGNvbnNvbGUubG9nKGxpbmUpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnNvbGUubG9nKCk7XHJcbiAgIH1cclxuXHJcbn0iLCIvKipcclxuICogU3BoZXJpY2FsIGNvb3JkaW5hdGVzIGJhc2VkIG9uIHRoZSBXZWJHTCB2aWV3aW5nIHN5c3RlbTogeD1sZWZ0LXJpZ2h0LCB5PXVwLWRvd24sIHo9bmVhci1mYXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTcGhlcmljYWxDb29yZCB7XHJcbiAgIC8qKlxyXG4gICAgKiBUaGUgZGlzdGFuY2UgZnJvbSB0aGUgb3JpZ2luIHRvIHRoZSBwb2ludFxyXG4gICAgKi9cclxuICAgcHVibGljIHJhZGl1cyA9IDA7XHJcblxyXG4gICAvKipcclxuICAgICogVGhlIGVsZXZhdGlvbiBmcm9tIHRoZSBmbG9vciB0byB0aGUgcG9pbnQuIDAgYW5kIDE4MCBhcmUgb24gdGhlXHJcbiAgICAqIGZsb29yLiA5MCBwb2ludHMgdXAuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgZWxldmF0aW9uQW5nbGUgPSAwO1xyXG5cclxuICAgLyoqXHJcbiAgICAqIFRoZSBhbmdsZSwgd2hlbiBsb29raW5nIGRvd24gZnJvbSB0aGUgdG9wLCB0byB0aGUgcG9pbnQuIDAgcG9pbnRzIHJpZ2h0LlxyXG4gICAgKi9cclxuICAgcHVibGljIHJvdGF0aW9uQW5nbGUgPSAwO1xyXG5cclxuICAgLyoqXHJcbiAgICAqIEBwYXJhbSByYWRpdXNcclxuICAgICogQHBhcmFtIGVsZXZhdGlvbkFuZ2xlIFxyXG4gICAgKiBAcGFyYW0gcm90YXRpb25BbmdsZSBcclxuICAgICovXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihyYWRpdXM6IG51bWJlciwgZWxldmF0aW9uQW5nbGU6IG51bWJlciwgcm90YXRpb25BbmdsZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzO1xyXG4gICAgICB0aGlzLmVsZXZhdGlvbkFuZ2xlID0gZWxldmF0aW9uQW5nbGU7XHJcbiAgICAgIHRoaXMucm90YXRpb25BbmdsZSA9IHJvdGF0aW9uQW5nbGU7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBDcmVhdGVzIGEgc3BoZXJpY2FsIGNvb3JkaW5hdGUgZnJvbSBhIGNhcnRlc2lhbiBwb2ludFxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIHBvcyBUaGUgY2FydGVzaWFuIHBvaW50LlxyXG4gICAgKiBAcmV0dXJucyBUaGUgc3BoZXJpY2FsIGNvb3JkaW5hdGUuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc3RhdGljIGZyb21YWVoocG9zOiBudW1iZXJbXSk6IFNwaGVyaWNhbENvb3JkIHtcclxuXHJcbiAgICAgIGNvbnN0IHggPSBwb3NbMF07XHJcbiAgICAgIGNvbnN0IHkgPSBwb3NbMV07XHJcbiAgICAgIGNvbnN0IHogPSBwb3NbMl07XHJcblxyXG4gICAgICBjb25zdCByYWRpdXMgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTtcclxuICAgICAgY29uc3Qgcm90YXRpb25BbmdsZSA9ICgxODAgLyBNYXRoLlBJKSAqIE1hdGguYXRhbjIoeiwgeCk7XHJcbiAgICAgIGNvbnN0IGVsZXZhdGlvbkFuZ2xlID0gKDE4MCAvIE1hdGguUEkpICogTWF0aC5hc2luKHkgLyByYWRpdXMpO1xyXG5cclxuICAgICAgcmV0dXJuIG5ldyBTcGhlcmljYWxDb29yZChyYWRpdXMsIGVsZXZhdGlvbkFuZ2xlLCByb3RhdGlvbkFuZ2xlKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENvbnZlcnRzIHRoaXMgc3BoZXJpY2FsIGNvb3JkaW5hdGUgdG8gYSBjYXJ0ZXNpYW4gY29vcmRpbmF0ZS5cclxuICAgICogXHJcbiAgICAqIEByZXR1cm5zIFRoZSBjYXJ0ZXNpYW4gY29vcmRpbmF0ZS5cclxuICAgICovXHJcbiAgIHB1YmxpYyB0b1hZWigpOiBudW1iZXJbXSB7XHJcblxyXG4gICAgICBjb25zdCBmbG9vclJhZGl1cyA9IHRoaXMucmFkaXVzICogTWF0aC5jb3MoKE1hdGguUEkgLyAxODApICogdGhpcy5lbGV2YXRpb25BbmdsZSk7XHJcbiAgICAgIGNvbnN0IHggPSBmbG9vclJhZGl1cyAqIE1hdGguY29zKChNYXRoLlBJIC8gMTgwKSAqIHRoaXMucm90YXRpb25BbmdsZSk7XHJcbiAgICAgIGNvbnN0IHkgPSB0aGlzLnJhZGl1cyAqIE1hdGguc2luKChNYXRoLlBJIC8gMTgwKSAqIHRoaXMuZWxldmF0aW9uQW5nbGUpO1xyXG4gICAgICBjb25zdCB6ID0gZmxvb3JSYWRpdXMgKiBNYXRoLnNpbigoTWF0aC5QSSAvIDE4MCkgKiB0aGlzLnJvdGF0aW9uQW5nbGUpO1xyXG5cclxuICAgICAgcmV0dXJuIFt4LCB5LCB6XTtcclxuICAgfVxyXG59XHJcblxyXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MgKi9cclxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50ICovXHJcbmltcG9ydCB7IFZlYzMsIElWZWMzIH0gZnJvbSAnLi9WZWMnO1xyXG5pbXBvcnQgeyBCb3VuZGluZ0JveCB9IGZyb20gJy4vQm91bmRpbmdCb3gnO1xyXG5pbXBvcnQgeyBCb3VuZGluZ1B0cyB9IGZyb20gJy4vQm91bmRpbmdQdHMnO1xyXG5pbXBvcnQgeyBJbmRleGVkVHJpYW5nbGUgfSBmcm9tICcuL0luZGV4ZWRUcmlhbmdsZSc7XHJcbmltcG9ydCB7IEluZGV4ZWRWZWMzIH0gZnJvbSAnLi9JbmRleGVkVmVjMyc7XHJcbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi4vVXRpbC9HbG9iYWxzJztcclxuaW1wb3J0IHsgUHJvZmlsZXIgfSBmcm9tICcuLi9VdGlsL1Byb2ZpbGVyJztcclxuaW1wb3J0IHsgQmxvYkZpbGUgfSBmcm9tICcuLi9VdGlsL0Jsb2JGaWxlJztcclxuXHJcbmV4cG9ydCBlbnVtIE5vcm1hbFR5cGUge1xyXG4gICBTbW9vdGgsXHJcbiAgIEZsYXRcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVHJpYW5nbGVPYmpEYXRhIHtcclxuICAgbmFtZTogc3RyaW5nO1xyXG4gICBzb3VyY2U6IHN0cmluZztcclxuICAgdmVydGljZXM6IEZsb2F0MzJBcnJheTtcclxuICAgbm9ybWFsczogRmxvYXQzMkFycmF5O1xyXG4gICBpbmRpY2VzOiBJbnQzMkFycmF5O1xyXG4gICBib3hNaW46IFZlYzM7XHJcbiAgIGJveE1heDogVmVjMztcclxufVxyXG5cclxuLyoqXHJcbiAqIEJhc2UgY2xhc3MgZm9yIHJlcHJlc2VudGluZyBhbiBvYmplY3QgZnJvbSBhIGJ1bmNoIG9mIHRyaWFuZ2xlcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUcmlhbmdsZU9iaiB7XHJcbiAgIHB1YmxpYyB2ZXJ0aWNlczogbnVtYmVyW10gPSBbXTtcclxuICAgcHVibGljIG5vcm1hbHM6IG51bWJlcltdID0gW107XHJcbiAgIHB1YmxpYyBpbmRpY2VzOiBudW1iZXJbXSA9IFtdO1xyXG4gICBwdWJsaWMgYm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XHJcbiAgIHB1YmxpYyBuYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcbiAgIHB1YmxpYyBzb3VyY2U6IHN0cmluZztcclxuICAgcHJpdmF0ZSBib3VuZGluZ1B0czogQm91bmRpbmdQdHM7XHJcblxyXG4gICBwdWJsaWMgZ2V0IG51bVZlcnRpY2VzKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnZlcnRpY2VzLmxlbmd0aCAvIDM7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgbnVtVHJpYW5nbGVzKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmluZGljZXMubGVuZ3RoIC8gMztcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCB3aWR0aCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5ib3gud2lkdGg7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmJveC5oZWlnaHQ7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgZGVwdGgoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuYm94LmRlcHRoO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0IGRpYWdvbmFsKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmJveC5kaWFnb25hbDtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBjZW50ZXIoKTogVmVjMyB7XHJcbiAgICAgIHJldHVybiB0aGlzLmJveC5jZW50ZXI7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihuYW1lPzogc3RyaW5nKSB7XHJcbiAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXRUcmlhbmdsZShpbmRleDogbnVtYmVyKTogSW5kZXhlZFRyaWFuZ2xlIHtcclxuICAgICAgY29uc3QgaTEgPSB0aGlzLmluZGljZXNbMyAqIGluZGV4ICsgMF07XHJcbiAgICAgIGNvbnN0IGkyID0gdGhpcy5pbmRpY2VzWzMgKiBpbmRleCArIDFdO1xyXG4gICAgICBjb25zdCBpMyA9IHRoaXMuaW5kaWNlc1szICogaW5kZXggKyAyXTtcclxuICAgICAgcmV0dXJuIG5ldyBJbmRleGVkVHJpYW5nbGUodGhpcy52ZXJ0aWNlcywgdGhpcy5ub3JtYWxzLCBpMSwgaTIsIGkzKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHB1c2hRdWFkKHYxOiBJVmVjMywgdjI6IElWZWMzLCB2MzogSVZlYzMsIHY0OiBJVmVjMyk6IHZvaWQge1xyXG5cclxuICAgICAgdGhpcy5wdXNoVHJpYW5nbGUodjEsIHYyLCB2Myk7XHJcbiAgICAgIHRoaXMucHVzaFRyaWFuZ2xlKHYyLCB2NCwgdjMpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgcHVzaFRyaWFuZ2xlKHYxOiBJVmVjMywgdjI6IElWZWMzLCB2MzogSVZlYzMpOiB2b2lkIHtcclxuXHJcbiAgICAgIC8vIGFkZCBpbmRpY2VzXHJcbiAgICAgIGNvbnN0IGkxID0gdGhpcy5udW1WZXJ0aWNlcztcclxuICAgICAgY29uc3QgaTIgPSBpMSArIDE7XHJcbiAgICAgIGNvbnN0IGkzID0gaTEgKyAyO1xyXG4gICAgICB0aGlzLmluZGljZXMucHVzaChpMSwgaTIsIGkzKTtcclxuXHJcbiAgICAgIC8vIGFkZCB2ZXJ0aWNlc1xyXG4gICAgICB0aGlzLnZlcnRpY2VzLnB1c2godjEueCwgdjEueSwgdjEueiwgdjIueCwgdjIueSwgdjIueiwgdjMueCwgdjMueSwgdjMueik7XHJcbiAgICAgIHRoaXMuYm94LnVwZGF0ZSh2MSk7XHJcbiAgICAgIHRoaXMuYm94LnVwZGF0ZSh2Mik7XHJcbiAgICAgIHRoaXMuYm94LnVwZGF0ZSh2Myk7XHJcblxyXG4gICAgICAvLyBhZGQgbm9ybWFsc1xyXG4gICAgICBjb25zdCB0cmkgPSBuZXcgSW5kZXhlZFRyaWFuZ2xlKHRoaXMudmVydGljZXMsIHRoaXMubm9ybWFscywgaTEsIGkyLCBpMyk7XHJcbiAgICAgIGNvbnN0IG5vcm1hbCA9IHRyaS5jb21wdXRlTm9ybWFsKCk7XHJcbiAgICAgIHRoaXMubm9ybWFscy5wdXNoKC4uLm5vcm1hbC52YWx1ZXMpO1xyXG4gICAgICB0aGlzLm5vcm1hbHMucHVzaCguLi5ub3JtYWwudmFsdWVzKTtcclxuICAgICAgdGhpcy5ub3JtYWxzLnB1c2goLi4ubm9ybWFsLnZhbHVlcyk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBjb21wdXRlTm9ybWFscyh0eXBlOiBOb3JtYWxUeXBlKTogdm9pZCB7XHJcblxyXG4gICAgICBpZiAodHlwZSA9PT0gTm9ybWFsVHlwZS5TbW9vdGgpIHtcclxuICAgICAgICAgY29uc3QgbXVsdGlOb3JtVmVydGljZXM6IE11bHRpTm9ybVZlcnRleFtdID0gW107XHJcbiAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1WZXJ0aWNlczsgaSsrKSB7XHJcbiAgICAgICAgICAgIG11bHRpTm9ybVZlcnRpY2VzLnB1c2gobmV3IE11bHRpTm9ybVZlcnRleCgpKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgLy8gc3RvcmUgdGhlIG5vcm1hbHMgd2l0aCBlYWNoIHZlcnRleCAtIHdlJ2xsIGxhdGVyIGF2ZXJhZ2UgdGhlc2VcclxuICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm51bVRyaWFuZ2xlczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyaSA9IHRoaXMuZ2V0VHJpYW5nbGUoaSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0cmkuY29tcHV0ZU5vcm1hbCgpO1xyXG4gICAgICAgICAgICBtdWx0aU5vcm1WZXJ0aWNlc1t0cmkuaTFdLnB1c2gobik7XHJcbiAgICAgICAgICAgIG11bHRpTm9ybVZlcnRpY2VzW3RyaS5pMl0ucHVzaChuKTtcclxuICAgICAgICAgICAgbXVsdGlOb3JtVmVydGljZXNbdHJpLmkzXS5wdXNoKG4pO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICAvLyBwb3B1bGF0ZSB0aGUgbm9ybWFscyBhcnJheVxyXG4gICAgICAgICB0aGlzLm5vcm1hbHMgPSBbXTtcclxuICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtdWx0aU5vcm1WZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLm5vcm1hbHMucHVzaCguLi5tdWx0aU5vcm1WZXJ0aWNlc1tpXS5ub3JtYWwudmFsdWVzKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICAvLyB0byBnbyB0aGlzIHdheSB3ZSBuZWVkIHRvIGhhdmUgYSB1bmlxdWUgdmVjdG9yIGFuZCBub3JtYWwgZm9yIGVhY2ggdHJpYW5nbGVcclxuICAgICAgICAgLy8gY29ybmVyLiBCbG93IGF3YXkgdGhlIG9sZCBzdHVmZiBhbmQgcmVidWlsZFxyXG4gICAgICAgICBjb25zdCBvbGRJbmRpY2VzID0gdGhpcy5pbmRpY2VzO1xyXG4gICAgICAgICBjb25zdCBvbGRWZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7XHJcblxyXG4gICAgICAgICAvLyByZXNldCBldmVyeXRoaW5nXHJcbiAgICAgICAgIHRoaXMudmVydGljZXMgPSBbXTtcclxuICAgICAgICAgdGhpcy5ub3JtYWxzID0gW107XHJcbiAgICAgICAgIHRoaXMuaW5kaWNlcyA9IFtdO1xyXG5cclxuICAgICAgICAgLy8gcmVidWlsZFxyXG4gICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9sZEluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHYxID0gbmV3IEluZGV4ZWRWZWMzKG9sZFZlcnRpY2VzLCBvbGRJbmRpY2VzWzMgKiBpICsgMF0pO1xyXG4gICAgICAgICAgICBjb25zdCB2MiA9IG5ldyBJbmRleGVkVmVjMyhvbGRWZXJ0aWNlcywgb2xkSW5kaWNlc1szICogaSArIDFdKTtcclxuICAgICAgICAgICAgY29uc3QgdjMgPSBuZXcgSW5kZXhlZFZlYzMob2xkVmVydGljZXMsIG9sZEluZGljZXNbMyAqIGkgKyAyXSk7XHJcbiAgICAgICAgICAgIHRoaXMucHVzaFRyaWFuZ2xlKHYxLCB2MiwgdjMpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSB4KGk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnZlcnRpY2VzWzMgKiBpICsgMF07XHJcbiAgIH1cclxuICAgcHJpdmF0ZSB5KGk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnZlcnRpY2VzWzMgKiBpICsgMV07XHJcbiAgIH1cclxuICAgcHJpdmF0ZSB6KGk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnZlcnRpY2VzWzMgKiBpICsgMl07XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBmaW5kQm91bmRzKCk6IHZvaWQge1xyXG4gICAgICBjb25zb2xlLmxvZygnZmluZGluZyBib3VuZHMnKTtcclxuICAgICAgY29uc3QgYm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XHJcblxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtVHJpYW5nbGVzOyBpKyspIHtcclxuICAgICAgICAgY29uc3QgdHJpID0gdGhpcy5nZXRUcmlhbmdsZShpKTtcclxuICAgICAgICAgYm94LnVwZGF0ZSh0cmkudjEpO1xyXG4gICAgICAgICBib3gudXBkYXRlKHRyaS52Mik7XHJcbiAgICAgICAgIGJveC51cGRhdGUodHJpLnYzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5ib3ggPSBib3g7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBCcmVha3MgdGhlIG9iamVjdCBpbnRvIGV2ZW5seSBzcGFjZWQgdm9sdW1lcy4gVGhlIG51bWJlciBvZiB2b2x1bWVzIGlzIGF1dG9tYXRpY2FsbHlcclxuICAgICogZGV0ZXJtaW5lZCBiYXNlZCBvbiB0aGUgbnVtYmVyIG9mIHRyaWFuZ2xlcy5cclxuICAgICovXHJcbiAgIHB1YmxpYyBnZXRCb3VuZGluZ1B0cygpOiBCb3VuZGluZ1B0cyB7XHJcblxyXG4gICAgICBpZiAodGhpcy5ib3VuZGluZ1B0cykge1xyXG4gICAgICAgICByZXR1cm4gdGhpcy5ib3VuZGluZ1B0cztcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbnVtU3RlcHMgPSAxNTtcclxuXHJcbiAgICAgIGNvbnN0IGJveGVzOiBCb3VuZGluZ0JveFtdID0gW107XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5wb3cobnVtU3RlcHMsIDMpOyBpKyspIHtcclxuICAgICAgICAgYm94ZXMucHVzaChuZXcgQm91bmRpbmdCb3goKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHYgPSBuZXcgVmVjMygpO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtVmVydGljZXM7IGkrKykge1xyXG4gICAgICAgICB2LnggPSB0aGlzLnZlcnRpY2VzWzMgKiBpICsgMF07XHJcbiAgICAgICAgIHYueSA9IHRoaXMudmVydGljZXNbMyAqIGkgKyAxXTtcclxuICAgICAgICAgdi56ID0gdGhpcy52ZXJ0aWNlc1szICogaSArIDJdO1xyXG4gICAgICAgICBsZXQgeCA9IE1hdGguZmxvb3IobnVtU3RlcHMgKiAodi54IC0gdGhpcy5ib3gubWluLngpIC8gKHRoaXMuYm94LndpZHRoKSk7XHJcbiAgICAgICAgIGxldCB5ID0gTWF0aC5mbG9vcihudW1TdGVwcyAqICh2LnkgLSB0aGlzLmJveC5taW4ueSkgLyAodGhpcy5ib3guaGVpZ2h0KSk7XHJcbiAgICAgICAgIGxldCB6ID0gTWF0aC5mbG9vcihudW1TdGVwcyAqICh2LnogLSB0aGlzLmJveC5taW4ueikgLyAodGhpcy5ib3guZGVwdGgpKTtcclxuICAgICAgICAgeCA9IGNsYW1wKHgsIDAsIG51bVN0ZXBzIC0gMSk7XHJcbiAgICAgICAgIHkgPSBjbGFtcCh5LCAwLCBudW1TdGVwcyAtIDEpO1xyXG4gICAgICAgICB6ID0gY2xhbXAoeiwgMCwgbnVtU3RlcHMgLSAxKTtcclxuICAgICAgICAgY29uc3QgaW5kZXggPSB4ICsgeSAqIG51bVN0ZXBzICsgeiAqIG51bVN0ZXBzICogbnVtU3RlcHM7XHJcbiAgICAgICAgIGJveGVzW2luZGV4XS51cGRhdGUodik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGJveE1hcCA9IG5ldyBNYXA8bnVtYmVyLCBCb3VuZGluZ0JveD4oKTtcclxuICAgICAgbGV0IGJveENvdW50ID0gMDtcclxuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBudW1TdGVwczsgeCsrKSB7XHJcbiAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgbnVtU3RlcHM7IHkrKykge1xyXG4gICAgICAgICAgICBsZXQgZmlyc3Q6IHtcclxuICAgICAgICAgICAgICAgaW5kZXg6IG51bWJlcixcclxuICAgICAgICAgICAgICAgYm94OiBCb3VuZGluZ0JveCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgbGV0IGxhc3Q6IHtcclxuICAgICAgICAgICAgICAgaW5kZXg6IG51bWJlcixcclxuICAgICAgICAgICAgICAgYm94OiBCb3VuZGluZ0JveCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZm9yIChsZXQgeiA9IDA7IHogPCBudW1TdGVwczsgeisrKSB7XHJcbiAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0geCArIHkgKiBudW1TdGVwcyArIHogKiBudW1TdGVwcyAqIG51bVN0ZXBzO1xyXG4gICAgICAgICAgICAgICBjb25zdCBib3ggPSBib3hlc1tpbmRleF07XHJcbiAgICAgICAgICAgICAgIGlmIChib3gubWluLnggPT09IE51bWJlci5NQVhfVkFMVUUpIHtcclxuICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgYm94Q291bnQrKztcclxuICAgICAgICAgICAgICAgaWYgKCFmaXJzdCkge1xyXG4gICAgICAgICAgICAgICAgICBmaXJzdCA9IHsgaW5kZXg6IGluZGV4LCBib3g6IGJveCB9O1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGxhc3QgPSB7IGluZGV4OiBpbmRleCwgYm94OiBib3ggfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGZpcnN0ICYmIGJveE1hcC5oYXMoZmlyc3QuaW5kZXgpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICBib3hNYXAuc2V0KGZpcnN0LmluZGV4LCBmaXJzdC5ib3gpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsYXN0ICYmIGJveE1hcC5oYXMobGFzdC5pbmRleCkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgIGJveE1hcC5zZXQobGFzdC5pbmRleCwgbGFzdC5ib3gpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcHRzOiBWZWMzW10gPSBbXTtcclxuICAgICAgYm94ZXMuZm9yRWFjaCgoYm94KSA9PiB7XHJcbiAgICAgICAgIGlmIChib3gubWluLnggIT09IE51bWJlci5NQVhfVkFMVUUpIHtcclxuICAgICAgICAgICAgcHRzLnB1c2goLi4uYm94LmNvcm5lcnMpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5ib3VuZGluZ1B0cyA9IG5ldyBCb3VuZGluZ1B0cyhwdHMpO1xyXG4gICAgICByZXR1cm4gdGhpcy5ib3VuZGluZ1B0cztcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgYSBzdHJpbmcgaW4gdGhlIGZvciAuT0JKIGZpbGUgZm9ybWF0XHJcbiAgICAqIFxyXG4gICAgKiBAcmV0dXJucyB0aGUgc3RyaW5nXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgdG9PYmpTdHJpbmcoZGlnaXRzID0gOCk6IHN0cmluZyB7XHJcblxyXG4gICAgICBsZXQgc3RyID0gJyc7XHJcbiAgICAgIHN0ciArPSAnIyBWZXJ0aWNlczogJyArIHRoaXMudmVydGljZXMubGVuZ3RoICsgJ1xcbic7XHJcbiAgICAgIHN0ciArPSAnIyBUcmlhbmdsZXM6ICcgKyB0aGlzLm51bVRyaWFuZ2xlcyArICdcXG4nO1xyXG4gICAgICBzdHIgKz0gJ1xcbic7XHJcblxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtVmVydGljZXM7IGkrKykge1xyXG4gICAgICAgICBjb25zdCB2ID0gdGhpcy52ZXJ0aWNlcztcclxuICAgICAgICAgc3RyICs9ICd2ICcgKyB2WzMgKiBpICsgMF0udG9QcmVjaXNpb24oZGlnaXRzKSArICcgJyArIHZbMyAqIGkgKyAxXS50b1ByZWNpc2lvbihkaWdpdHMpICsgJyAnICsgdlszICogaSArIDJdLnRvUHJlY2lzaW9uKGRpZ2l0cykgKyAnXFxuJztcclxuICAgICAgfVxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtVmVydGljZXM7IGkrKykge1xyXG4gICAgICAgICBjb25zdCBuID0gdGhpcy5ub3JtYWxzO1xyXG4gICAgICAgICBzdHIgKz0gJ3ZuICcgKyBuWzMgKiBpICsgMF0udG9QcmVjaXNpb24oZGlnaXRzKSArICcgJyArIG5bMyAqIGkgKyAxXS50b1ByZWNpc2lvbihkaWdpdHMpICsgJyAnICsgblszICogaSArIDJdLnRvUHJlY2lzaW9uKGRpZ2l0cykgKyAnXFxuJztcclxuICAgICAgfVxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtVHJpYW5nbGVzOyBpKyspIHtcclxuICAgICAgICAgY29uc3QgdCA9IHRoaXMuZ2V0VHJpYW5nbGUoaSk7XHJcbiAgICAgICAgIHN0ciArPSAnZiAnICtcclxuICAgICAgICAgICAgKHQuaTEgKyAxKSArICcvLycgKyAodC5pMSArIDEpICsgJyAnICtcclxuICAgICAgICAgICAgKHQuaTIgKyAxKSArICcvLycgKyAodC5pMiArIDEpICsgJyAnICtcclxuICAgICAgICAgICAgKHQuaTMgKyAxKSArICcvLycgKyAodC5pMyArIDEpICsgJ1xcbic7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBzdHI7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBvcHRpbWl6ZShub3JtYWxUeXBlOiBOb3JtYWxUeXBlKTogdm9pZCB7XHJcblxyXG4gICAgICBpZiAobm9ybWFsVHlwZSA9PT0gTm9ybWFsVHlwZS5TbW9vdGgpIHtcclxuXHJcbiAgICAgICAgIGNvbnN0IHZlcnRleFRvSW5kZXhNYXAgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG4gICAgICAgICBjb25zdCBpbmRleFRvSW5kZXhNYXAgPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPigpO1xyXG5cclxuICAgICAgICAgLy8gZmlyc3QgZ2VuZXJhdGUgYSB1bmlxdWUgc2V0IG9mIHZlcnRpY2VzXHJcbiAgICAgICAgIGNvbnN0IHVuaXF1ZVZlcnRpY2VzOiBJbmRleGVkVmVjM1tdID0gW107XHJcbiAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1WZXJ0aWNlczsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBvbGRWZXJ0ZXggPSBuZXcgSW5kZXhlZFZlYzModGhpcy52ZXJ0aWNlcywgaSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHRoaXMudmVydGljZXNbMyAqIGkgKyAwXS50b0ZpeGVkKDQpICsgJyAnICsgdGhpcy52ZXJ0aWNlc1szICogaSArIDFdLnRvRml4ZWQoNCkgKyAnICcgKyB0aGlzLnZlcnRpY2VzWzMgKiBpICsgMl0udG9GaXhlZCg0KTtcclxuICAgICAgICAgICAgY29uc3Qgb2xkSW5kZXggPSBpICsgMTtcclxuICAgICAgICAgICAgbGV0IG5ld0luZGV4O1xyXG4gICAgICAgICAgICBpZiAodmVydGV4VG9JbmRleE1hcC5oYXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAvLyBqdXN0IG1hcCB0aGUgb2xkIGluZGV4IHRvIHRoZSBleGlzdGluZyBlbnRyeVxyXG4gICAgICAgICAgICAgICBuZXdJbmRleCA9IHZlcnRleFRvSW5kZXhNYXAuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBhIG5ldyBlbnRyeVxyXG4gICAgICAgICAgICAgICBuZXdJbmRleCA9IHVuaXF1ZVZlcnRpY2VzLmxlbmd0aCArIDE7XHJcbiAgICAgICAgICAgICAgIHZlcnRleFRvSW5kZXhNYXAuc2V0KGtleSwgbmV3SW5kZXgpO1xyXG4gICAgICAgICAgICAgICB1bmlxdWVWZXJ0aWNlcy5wdXNoKG9sZFZlcnRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gc3RvcmUgdGhlIHRyYW5zbGF0aW9uXHJcbiAgICAgICAgICAgIGluZGV4VG9JbmRleE1hcC5zZXQob2xkSW5kZXgsIG5ld0luZGV4KTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgLy8gcmVzZXQgYWxsIHRoZSB2ZXJ0aWNlc1xyXG4gICAgICAgICB0aGlzLnZlcnRpY2VzID0gW107XHJcbiAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdW5pcXVlVmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy52ZXJ0aWNlcy5wdXNoKHVuaXF1ZVZlcnRpY2VzW2ldLngpO1xyXG4gICAgICAgICAgICB0aGlzLnZlcnRpY2VzLnB1c2godW5pcXVlVmVydGljZXNbaV0ueSk7XHJcbiAgICAgICAgICAgIHRoaXMudmVydGljZXMucHVzaCh1bmlxdWVWZXJ0aWNlc1tpXS56KTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgLy8gcmVtYXAgYWxsIGluZGljZXNcclxuICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgb2xkSW5kZXggPSB0aGlzLmluZGljZXNbaV07XHJcbiAgICAgICAgICAgIHRoaXMuaW5kaWNlc1tpXSA9IGluZGV4VG9JbmRleE1hcC5nZXQob2xkSW5kZXggKyAxKSAtIDE7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgLy8gbm90aGluZyB0byBkbyBmb3IgZmxhdCBub3JtYWxzLiBOZXcgdmVydGljZXMgYW5kIG5vcm1hbHMgYXJlIGNyZWF0ZWQgaW4gXHJcbiAgICAgICAgIC8vIGNvbXB1dGVOb3JtYWxzKCkgYmVsb3cgaWYgbmVlZGVkXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuY29tcHV0ZU5vcm1hbHMobm9ybWFsVHlwZSk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyB0cmltKGJveDogQm91bmRpbmdCb3gpOiB2b2lkIHtcclxuICAgICAgY29uc3QgcCA9IG5ldyBQcm9maWxlcigpO1xyXG4gICAgICBjb25zdCBpbmRpY2VzOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtVHJpYW5nbGVzOyBpKyspIHtcclxuICAgICAgICAgY29uc3QgdHJpID0gdGhpcy5nZXRUcmlhbmdsZShpKTtcclxuXHJcbiAgICAgICAgIGlmIChib3guaW5zaWRlKHRyaS52MSkgJiYgYm94Lmluc2lkZSh0cmkudjIpICYmIGJveC5pbnNpZGUodHJpLnYzKSkge1xyXG4gICAgICAgICAgICBpbmRpY2VzLnB1c2godHJpLmkxKTtcclxuICAgICAgICAgICAgaW5kaWNlcy5wdXNoKHRyaS5pMik7XHJcbiAgICAgICAgICAgIGluZGljZXMucHVzaCh0cmkuaTMpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgY29uc29sZS5sb2coJ3RyaW1tZWQgJyArICh0aGlzLmluZGljZXMubGVuZ3RoIC0gaW5kaWNlcy5sZW5ndGgpICsgJyB0cmlhbmdsZXMnKTtcclxuICAgICAgdGhpcy5pbmRpY2VzID0gaW5kaWNlcztcclxuICAgICAgdGhpcy5maW5kQm91bmRzKCk7XHJcbiAgICAgIHAubG9nKCdUcmltIENvbXBsZXRlJyk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBtaXJyb3IoeDogbnVtYmVyLCBhZGQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgY29uc3QgcCA9IG5ldyBQcm9maWxlcigpO1xyXG5cclxuICAgICAgaWYgKGFkZCkge1xyXG4gICAgICAgICAvLyBkdXBsaWNhdGUgdmVydGljZXNcclxuICAgICAgICAgY29uc3QgbnVtVmVydGljZXMgPSB0aGlzLm51bVZlcnRpY2VzO1xyXG4gICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVZlcnRpY2VzOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy52ZXJ0aWNlc1szICogaSArIDBdIC09IHg7XHJcbiAgICAgICAgICAgIHRoaXMudmVydGljZXMucHVzaCgtdGhpcy52ZXJ0aWNlc1szICogaSArIDBdKTtcclxuICAgICAgICAgICAgdGhpcy52ZXJ0aWNlcy5wdXNoKHRoaXMudmVydGljZXNbMyAqIGkgKyAxXSk7XHJcbiAgICAgICAgICAgIHRoaXMudmVydGljZXMucHVzaCh0aGlzLnZlcnRpY2VzWzMgKiBpICsgMl0pO1xyXG4gICAgICAgICAgICB0aGlzLm5vcm1hbHMucHVzaCgtdGhpcy5ub3JtYWxzWzMgKiBpICsgMF0pO1xyXG4gICAgICAgICAgICB0aGlzLm5vcm1hbHMucHVzaCh0aGlzLm5vcm1hbHNbMyAqIGkgKyAxXSk7XHJcbiAgICAgICAgICAgIHRoaXMubm9ybWFscy5wdXNoKHRoaXMubm9ybWFsc1szICogaSArIDJdKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgY29uc3QgbnVtSW5kaWNlcyA9IHRoaXMuaW5kaWNlcy5sZW5ndGg7XHJcbiAgICAgICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBudW1WZXJ0aWNlcztcclxuICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1JbmRpY2VzOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5pbmRpY2VzLnB1c2goc3RhcnRJbmRleCArIHRoaXMuaW5kaWNlc1tpXSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgLy8gcmVmbGVjdCB2ZXJ0aWNlc1xyXG4gICAgICAgICBjb25zdCBudW1WZXJ0aWNlcyA9IHRoaXMubnVtVmVydGljZXM7XHJcbiAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVmVydGljZXM7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnZlcnRpY2VzWzMgKiBpICsgMF0gPSB4ICsgKHggLSB0aGlzLnZlcnRpY2VzWzMgKiBpICsgMF0pO1xyXG4gICAgICAgICAgICB0aGlzLm5vcm1hbHNbMyAqIGkgKyAwXSA9IC10aGlzLm5vcm1hbHNbMyAqIGkgKyAwXTtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmZpbmRCb3VuZHMoKTtcclxuXHJcbiAgICAgIHAubG9nKCdNaXJyb3IgQ29tcGxldGUnKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHJldmVyc2UoKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IHAgPSBuZXcgUHJvZmlsZXIoKTtcclxuXHJcbiAgICAgIC8vIHJlZmxlY3QgdmVydGljZXNcclxuICAgICAgY29uc3QgeCA9IHRoaXMuY2VudGVyLng7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1WZXJ0aWNlczsgaSsrKSB7XHJcbiAgICAgICAgIHRoaXMudmVydGljZXNbMyAqIGkgKyAwXSA9IHggKyAoeCAtIHRoaXMudmVydGljZXNbMyAqIGkgKyAwXSk7XHJcbiAgICAgICAgIHRoaXMubm9ybWFsc1szICogaSArIDBdID0gLXRoaXMubm9ybWFsc1szICogaSArIDBdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyByZW9yZGVyIHRyaWFuZ2xlcyB0byBwcmVzZXJ2ZSBmcm9udC1iYWNrIGZhY2luZ1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtVHJpYW5nbGVzOyBpKyspIHtcclxuICAgICAgICAgY29uc3QgaTEgPSB0aGlzLmluZGljZXNbMyAqIGkgKyAwXTtcclxuICAgICAgICAgY29uc3QgaTIgPSB0aGlzLmluZGljZXNbMyAqIGkgKyAxXTtcclxuICAgICAgICAgdGhpcy5pbmRpY2VzWzMgKiBpICsgMF0gPSBpMjtcclxuICAgICAgICAgdGhpcy5pbmRpY2VzWzMgKiBpICsgMV0gPSBpMTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcC5sb2coJ1JldmVyc2UgQ29tcGxldGUnKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNvbWJpbmUodE9iajogVHJpYW5nbGVPYmopOiB2b2lkIHtcclxuXHJcbiAgICAgIC8vIHNhdmUgdGhlIHZhbHVlIGZvciB0aGUgZmlyc3QgaW5kZXggb2YgdGhlIGNvbWJpbmVkIG9iamVjdHNcclxuICAgICAgY29uc3Qgc3RhcnRJbmRleCA9IHRoaXMubnVtVmVydGljZXM7XHJcblxyXG4gICAgICAvLyBhZGQgdGhlIG90aGVyIHZlcnRpY2VzIGFuZCBub3JtYWxzIHRvIG91cnNcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0T2JqLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgIHRoaXMudmVydGljZXMucHVzaCh0T2JqLnZlcnRpY2VzW2ldKTtcclxuICAgICAgICAgdGhpcy5ub3JtYWxzLnB1c2godE9iai5ub3JtYWxzW2ldKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gYWRkIHRoZSBvdGhlciBpbmRpY2VzLCBidXQgb2Zmc2V0IHRoZW0gcHJvcGVybHlcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0T2JqLmluZGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgdGhpcy5pbmRpY2VzLnB1c2goc3RhcnRJbmRleCArIHRPYmouaW5kaWNlc1tpXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIG1lcmdlIHRoZSBib3VuZGluZyBib3hlc1xyXG4gICAgICB0aGlzLmJveC5tZXJnZSh0T2JqLmJveCk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyB0b0RhdGEoKTogSVRyaWFuZ2xlT2JqRGF0YSB7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgICBzb3VyY2U6IHRoaXMuc291cmNlLFxyXG4gICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgIHZlcnRpY2VzOiBuZXcgRmxvYXQzMkFycmF5KHRoaXMudmVydGljZXMpLFxyXG4gICAgICAgICBub3JtYWxzOiBuZXcgRmxvYXQzMkFycmF5KHRoaXMubm9ybWFscyksXHJcbiAgICAgICAgIGluZGljZXM6IG5ldyBJbnQzMkFycmF5KHRoaXMuaW5kaWNlcyksXHJcbiAgICAgICAgIGJveE1pbjogdGhpcy5ib3gubWluLmNsb25lKCksXHJcbiAgICAgICAgIGJveE1heDogdGhpcy5ib3gubWF4LmNsb25lKCksXHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcHVibGljIHN0YXRpYyBmcm9tRGF0YShkYXRhOiBJVHJpYW5nbGVPYmpEYXRhKTogVHJpYW5nbGVPYmoge1xyXG5cclxuICAgICAgY29uc3QgdE9iaiA9IG5ldyBUcmlhbmdsZU9iaigpO1xyXG4gICAgICB0T2JqLm5hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgIHRPYmoudmVydGljZXMgPSBBcnJheS5mcm9tKGRhdGEudmVydGljZXMpO1xyXG4gICAgICB0T2JqLm5vcm1hbHMgPSBBcnJheS5mcm9tKGRhdGEubm9ybWFscyk7XHJcbiAgICAgIHRPYmouaW5kaWNlcyA9IEFycmF5LmZyb20oZGF0YS5pbmRpY2VzKTtcclxuICAgICAgdE9iai5ib3ggPSBuZXcgQm91bmRpbmdCb3gobmV3IFZlYzMoZGF0YS5ib3hNaW4udmFsdWVzKSwgbmV3IFZlYzMoZGF0YS5ib3hNYXgudmFsdWVzKSk7XHJcbiAgICAgIHJldHVybiB0T2JqO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgdG9CbG9iKCk6IEJsb2Ige1xyXG5cclxuICAgICAgLy8gY3JlYXRlIGEgZGVzY3JpcHRpb25cclxuICAgICAgY29uc3QgaW5mbyA9IHtcclxuICAgICAgICAgRmlsZVR5cGU6ICdCaW5hcnkgT0JKJyxcclxuICAgICAgICAgVmVyc2lvbjogJzEuMCcsXHJcbiAgICAgICAgIE5hbWU6IHRoaXMubmFtZSxcclxuICAgICAgICAgU291cmNlOiB0aGlzLnNvdXJjZSxcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gZ2V0IHRoZSByYXcgZGF0YVxyXG4gICAgICBjb25zdCBkYXRhID0gdGhpcy50b0RhdGEoKTtcclxuXHJcbiAgICAgIC8vIGJyZWFrIGl0IGludG8gcGFydHNcclxuICAgICAgY29uc3QgcGFydHM6IEJsb2JQYXJ0W10gPSBbXTtcclxuICAgICAgcGFydHMucHVzaChkYXRhLnZlcnRpY2VzKTtcclxuICAgICAgcGFydHMucHVzaChkYXRhLm5vcm1hbHMpO1xyXG4gICAgICBwYXJ0cy5wdXNoKGRhdGEuaW5kaWNlcyk7XHJcbiAgICAgIHBhcnRzLnB1c2gobmV3IEZsb2F0MzJBcnJheShkYXRhLmJveE1pbi52YWx1ZXMpKTtcclxuICAgICAgcGFydHMucHVzaChuZXcgRmxvYXQzMkFycmF5KGRhdGEuYm94TWF4LnZhbHVlcykpO1xyXG5cclxuICAgICAgLy8gY3JlYXRlIHRoZSBCbG9iXHJcbiAgICAgIHJldHVybiBCbG9iRmlsZS5jcmVhdGVCbG9iKGluZm8sIHBhcnRzKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHN0YXRpYyBhc3luYyBmcm9tQmxvYihibG9iOiBCbG9iKTogUHJvbWlzZTxUcmlhbmdsZU9iaj4ge1xyXG5cclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IFRyaWFuZ2xlT2JqLmJsb2JUb0RhdGEoYmxvYik7XHJcbiAgICAgIHJldHVybiBUcmlhbmdsZU9iai5mcm9tRGF0YShkYXRhKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIHN0YXRpYyBhc3luYyBibG9iVG9EYXRhKGJsb2I6IEJsb2IpOiBQcm9taXNlPElUcmlhbmdsZU9iakRhdGE+IHtcclxuXHJcbiAgICAgIGNvbnN0IGJGaWxlID0gYXdhaXQgQmxvYkZpbGUuZXh0cmFjdChibG9iKTtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgIG5hbWU6IGJGaWxlLmluZm8uTmFtZSxcclxuICAgICAgICAgc291cmNlOiBiRmlsZS5pbmZvLlNvdXJjZSxcclxuICAgICAgICAgdmVydGljZXM6IG5ldyBGbG9hdDMyQXJyYXkoYXdhaXQgYkZpbGUucGFydHNbMF0uYXJyYXlCdWZmZXIoKSksXHJcbiAgICAgICAgIG5vcm1hbHM6IG5ldyBGbG9hdDMyQXJyYXkoYXdhaXQgYkZpbGUucGFydHNbMV0uYXJyYXlCdWZmZXIoKSksXHJcbiAgICAgICAgIGluZGljZXM6IG5ldyBJbnQzMkFycmF5KGF3YWl0IGJGaWxlLnBhcnRzWzJdLmFycmF5QnVmZmVyKCkpLFxyXG4gICAgICAgICBib3hNaW46IG5ldyBWZWMzKEFycmF5LmZyb20obmV3IEZsb2F0MzJBcnJheShhd2FpdCBiRmlsZS5wYXJ0c1szXS5hcnJheUJ1ZmZlcigpKSkpLFxyXG4gICAgICAgICBib3hNYXg6IG5ldyBWZWMzKEFycmF5LmZyb20obmV3IEZsb2F0MzJBcnJheShhd2FpdCBiRmlsZS5wYXJ0c1s0XS5hcnJheUJ1ZmZlcigpKSkpLFxyXG4gICAgICB9XHJcbiAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDbGFzcyB1c2VkIHRvIGNvbXB1dGUgbm9ybWFscyBmb3IgdmVydGljZXMgdGhhdCBqb2luIG11bHRpcGxlIGZhY2VzXHJcbiAqL1xyXG5jbGFzcyBNdWx0aU5vcm1WZXJ0ZXgge1xyXG4gICBwcml2YXRlIG5vcm1hbHM6IFZlYzNbXSA9IFtdO1xyXG5cclxuICAgLyoqXHJcbiAgICAqIFN0b3JlcyBhIG5vcm1hbCBmb3IgdGhpcyB2ZXJ0ZXhcclxuICAgICogXHJcbiAgICAqIEBwYXJhbSBub3JtYWwgU3RvcmVzIGEgbm9ybWFsIGZvciB0aGUgdmVydGV4XHJcbiAgICAqL1xyXG4gICBwdWJsaWMgcHVzaChub3JtYWw6IFZlYzMpIHtcclxuICAgICAgdGhpcy5ub3JtYWxzLnB1c2gobm9ybWFsKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENvbXB1dGVzIHRoZSBub3JtYWwgYnkgYXZlcmFnaW5nIGFsbCB0aGUgaW5kaXZpZHVhbCBub3JtYWxzIGFzc29jaWF0ZWQgd2l0aCB0aGUgdmVydGV4XHJcbiAgICAqL1xyXG4gICBwdWJsaWMgZ2V0IG5vcm1hbCgpOiBWZWMzIHtcclxuICAgICAgY29uc3QgbiA9IG5ldyBWZWMzKCk7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ub3JtYWxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgIG4ueCArPSB0aGlzLm5vcm1hbHNbaV0ueDtcclxuICAgICAgICAgbi55ICs9IHRoaXMubm9ybWFsc1tpXS55O1xyXG4gICAgICAgICBuLnogKz0gdGhpcy5ub3JtYWxzW2ldLno7XHJcbiAgICAgIH1cclxuICAgICAgbi54IC89IHRoaXMubm9ybWFscy5sZW5ndGg7XHJcbiAgICAgIG4ueSAvPSB0aGlzLm5vcm1hbHMubGVuZ3RoO1xyXG4gICAgICBuLnogLz0gdGhpcy5ub3JtYWxzLmxlbmd0aDtcclxuXHJcbiAgICAgIHJldHVybiBuO1xyXG4gICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IFRyaWFuZ2xlT2JqIH0gZnJvbSAnLi9UcmlhbmdsZU9iaic7XHJcbmltcG9ydCB7IFZlYzMgfSBmcm9tICcuL1ZlYyc7XHJcblxyXG5leHBvcnQgY2xhc3MgVHJpYW5nbGVPYmpCdWlsZGVyIGV4dGVuZHMgVHJpYW5nbGVPYmoge1xyXG4gICBjb25zdHJ1Y3RvcihuYW1lPzogc3RyaW5nKSB7XHJcbiAgICAgIHN1cGVyKG5hbWUpO1xyXG4gICB9XHJcblxyXG4gICAvLyBUT0RPIHBhc3MgaW4gYXJncyBmb3IgY29uc3RydWN0aW9uXHJcbiAgIHB1YmxpYyBhZGRBcnJvdygpOiB2b2lkIHtcclxuICAgICAgY29uc3QgTlVNX1NURVBTID0gMzA7XHJcbiAgICAgIGNvbnN0IFRPVEFMX0xFTkdUSCA9IDAuNDtcclxuICAgICAgY29uc3QgQVJST1dfUkFESVVTID0gMC4xNTtcclxuICAgICAgY29uc3QgQVJST1dfTEVOR1RIID0gMS41ICogQVJST1dfUkFESVVTO1xyXG4gICAgICBjb25zdCBTSEFGVF9SQURJVVMgPSAwLjUgKiBBUlJPV19SQURJVVM7XHJcbiAgICAgIGNvbnN0IFRJUCA9IG5ldyBWZWMzKFswLCAwLCAwXSk7XHJcbiAgICAgIGNvbnN0IFRJUF9CQVNFID0gbmV3IFZlYzMoWzAsIEFSUk9XX0xFTkdUSCwgMF0pO1xyXG5cclxuICAgICAgLy8gYnVpbGQgdGhlIGFycm93IGhlYWRcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOVU1fU1RFUFM7IGkrKykge1xyXG4gICAgICAgICBjb25zdCB4MSA9IEFSUk9XX1JBRElVUyAqIE1hdGguc2luKGkgLyAoTlVNX1NURVBTIC0gMSkgKiAyICogTWF0aC5QSSk7XHJcbiAgICAgICAgIGNvbnN0IHkxID0gQVJST1dfTEVOR1RIO1xyXG4gICAgICAgICBjb25zdCB6MSA9IEFSUk9XX1JBRElVUyAqIE1hdGguY29zKGkgLyAoTlVNX1NURVBTIC0gMSkgKiAyICogTWF0aC5QSSk7XHJcbiAgICAgICAgIGNvbnN0IHgyID0gQVJST1dfUkFESVVTICogTWF0aC5zaW4oKGkgKyAxKSAvIChOVU1fU1RFUFMgLSAxKSAqIDIgKiBNYXRoLlBJKTtcclxuICAgICAgICAgY29uc3QgeTIgPSBBUlJPV19MRU5HVEg7XHJcbiAgICAgICAgIGNvbnN0IHoyID0gQVJST1dfUkFESVVTICogTWF0aC5jb3MoKGkgKyAxKSAvIChOVU1fU1RFUFMgLSAxKSAqIDIgKiBNYXRoLlBJKTtcclxuXHJcbiAgICAgICAgIGNvbnN0IHAxID0gbmV3IFZlYzMoW3gxLCB5MSwgejFdKTtcclxuICAgICAgICAgY29uc3QgcDIgPSBuZXcgVmVjMyhbeDIsIHkyLCB6Ml0pO1xyXG4gICAgICAgICB0aGlzLnB1c2hUcmlhbmdsZShUSVAsIHAyLCBwMSk7XHJcbiAgICAgICAgIHRoaXMucHVzaFRyaWFuZ2xlKFRJUF9CQVNFLCBwMSwgcDIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBidWlsZCB0aGUgYXJyb3cgc2hhZnRcclxuICAgICAgY29uc3QgRU5EID0gbmV3IFZlYzMoWzAsIFRPVEFMX0xFTkdUSCwgMF0pO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE5VTV9TVEVQUzsgaSsrKSB7XHJcbiAgICAgICAgIGNvbnN0IHgxID0gU0hBRlRfUkFESVVTICogTWF0aC5zaW4oaSAvIChOVU1fU1RFUFMgLSAxKSAqIDIgKiBNYXRoLlBJKTtcclxuICAgICAgICAgY29uc3QgejEgPSBTSEFGVF9SQURJVVMgKiBNYXRoLmNvcyhpIC8gKE5VTV9TVEVQUyAtIDEpICogMiAqIE1hdGguUEkpO1xyXG4gICAgICAgICBjb25zdCB4MiA9IFNIQUZUX1JBRElVUyAqIE1hdGguc2luKChpICsgMSkgLyAoTlVNX1NURVBTIC0gMSkgKiAyICogTWF0aC5QSSk7XHJcbiAgICAgICAgIGNvbnN0IHoyID0gU0hBRlRfUkFESVVTICogTWF0aC5jb3MoKGkgKyAxKSAvIChOVU1fU1RFUFMgLSAxKSAqIDIgKiBNYXRoLlBJKTtcclxuXHJcbiAgICAgICAgIGNvbnN0IHAxID0gbmV3IFZlYzMoW3gxLCBBUlJPV19MRU5HVEgsIHoxXSk7XHJcbiAgICAgICAgIGNvbnN0IHAyID0gbmV3IFZlYzMoW3gyLCBBUlJPV19MRU5HVEgsIHoyXSk7XHJcbiAgICAgICAgIGNvbnN0IHAzID0gbmV3IFZlYzMoW3gxLCBUT1RBTF9MRU5HVEgsIHoxXSk7XHJcbiAgICAgICAgIGNvbnN0IHA0ID0gbmV3IFZlYzMoW3gyLCBUT1RBTF9MRU5HVEgsIHoyXSk7XHJcbiAgICAgICAgIHRoaXMucHVzaFRyaWFuZ2xlKHAxLCBwMiwgcDQpO1xyXG4gICAgICAgICB0aGlzLnB1c2hUcmlhbmdsZShwMSwgcDQsIHAzKTtcclxuICAgICAgICAgdGhpcy5wdXNoVHJpYW5nbGUoRU5ELCBwMywgcDQpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBhZGRTcGhlcmUobnVtU3RlcHM6IG51bWJlciwgcmFkaXVzOiBudW1iZXIsIGNlbnRlcjogVmVjMyk6IHZvaWQge1xyXG5cclxuICAgICAgLy8gY3JlYXRlIGFuIGFycmF5IG9mIHZlcnRpY2VzXHJcbiAgICAgIGNvbnN0IHZlcnRpY2VzOiBWZWMzW10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1TdGVwczsgaSsrKSB7XHJcbiAgICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoW2NlbnRlci54LCBjZW50ZXIueSArIHJhZGl1cywgY2VudGVyLnpdKSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSBpZiAoaSA9PT0gbnVtU3RlcHMgLSAxKSB7XHJcbiAgICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoW2NlbnRlci54LCBjZW50ZXIueSAtIHJhZGl1cywgY2VudGVyLnpdKSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHkgPSByYWRpdXMgKiBNYXRoLmNvcyhpIC8gKG51bVN0ZXBzIC0gMSkgKiBNYXRoLlBJKTtcclxuICAgICAgICAgICAgY29uc3QgciA9IHJhZGl1cyAqIE1hdGguc2luKGkgLyAobnVtU3RlcHMgLSAxKSAqIE1hdGguUEkpO1xyXG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBpICUgMiA/IDAgOiAoKDIgKiBNYXRoLlBJKSAvIG51bVN0ZXBzKSAqIDAuNTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbnVtU3RlcHM7IGorKykge1xyXG5cclxuICAgICAgICAgICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMyhbXHJcbiAgICAgICAgICAgICAgICAgIGNlbnRlci54ICsgciAqIE1hdGguc2luKChqIC8gbnVtU3RlcHMpICogMiAqIE1hdGguUEkgLSBvZmZzZXQpLFxyXG4gICAgICAgICAgICAgICAgICBjZW50ZXIueSArIHksXHJcbiAgICAgICAgICAgICAgICAgIGNlbnRlci56ICsgciAqIE1hdGguY29zKChqIC8gbnVtU3RlcHMpICogMiAqIE1hdGguUEkgLSBvZmZzZXQpLFxyXG4gICAgICAgICAgICAgICBdKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBjb25uZWN0IHRoZSB2ZXJ0aWNlc1xyXG4gICAgICBjb25zdCBmaXJzdCA9IDA7XHJcbiAgICAgIGNvbnN0IGxhc3QgPSB2ZXJ0aWNlcy5sZW5ndGggLSAxO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVN0ZXBzIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbnVtU3RlcHM7IGorKykge1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICBjb25zdCBpMSA9IGZpcnN0O1xyXG4gICAgICAgICAgICAgICBjb25zdCBpMiA9IGogKyAxO1xyXG4gICAgICAgICAgICAgICBjb25zdCBpMyA9IGogPT09IChudW1TdGVwcyAtIDEpID8gMSA6IGkyICsgMTtcclxuICAgICAgICAgICAgICAgdGhpcy5wdXNoVHJpYW5nbGUodmVydGljZXNbaTFdLCB2ZXJ0aWNlc1tpMl0sIHZlcnRpY2VzW2kzXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaSA9PT0gbnVtU3RlcHMgLSAyKSB7XHJcbiAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBsYXN0IC0gbnVtU3RlcHM7XHJcbiAgICAgICAgICAgICAgIGNvbnN0IGkxID0gbGFzdDtcclxuICAgICAgICAgICAgICAgY29uc3QgaTIgPSBzdGFydEluZGV4ICsgajtcclxuICAgICAgICAgICAgICAgY29uc3QgaTMgPSBqID09PSAobnVtU3RlcHMgLSAxKSA/IHN0YXJ0SW5kZXggOiBpMiArIDE7XHJcbiAgICAgICAgICAgICAgIHRoaXMucHVzaFRyaWFuZ2xlKHZlcnRpY2VzW2kxXSwgdmVydGljZXNbaTNdLCB2ZXJ0aWNlc1tpMl0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICBjb25zdCBzdGFydEEgPSAxICsgKGkgLSAxKSAqIG51bVN0ZXBzO1xyXG4gICAgICAgICAgICAgICBjb25zdCBzdGFydEIgPSAxICsgaSAqIG51bVN0ZXBzO1xyXG4gICAgICAgICAgICAgICBjb25zdCBpMSA9IHN0YXJ0QSArIGo7XHJcbiAgICAgICAgICAgICAgIGNvbnN0IGkyID0gKGogPT09IChudW1TdGVwcyAtIDEpKSA/IHN0YXJ0QSA6IGkxICsgMTtcclxuICAgICAgICAgICAgICAgY29uc3QgaTMgPSBzdGFydEIgKyBqO1xyXG4gICAgICAgICAgICAgICBjb25zdCBpNCA9IChqID09PSAobnVtU3RlcHMgLSAxKSkgPyBzdGFydEIgOiBpMyArIDE7XHJcbiAgICAgICAgICAgICAgIGlmIChpICUgMikge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnB1c2hUcmlhbmdsZSh2ZXJ0aWNlc1tpMV0sIHZlcnRpY2VzW2k0XSwgdmVydGljZXNbaTJdKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoVHJpYW5nbGUodmVydGljZXNbaTFdLCB2ZXJ0aWNlc1tpM10sIHZlcnRpY2VzW2k0XSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucHVzaFRyaWFuZ2xlKHZlcnRpY2VzW2kxXSwgdmVydGljZXNbaTNdLCB2ZXJ0aWNlc1tpMl0pO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnB1c2hUcmlhbmdsZSh2ZXJ0aWNlc1tpMl0sIHZlcnRpY2VzW2kzXSwgdmVydGljZXNbaTRdKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBhZGRDdWJlKHNpemU6IG51bWJlciwgY2VudGVyOiBWZWMzKTogdm9pZCB7XHJcblxyXG4gICAgICBjb25zdCB2MSA9IG5ldyBWZWMzKFtjZW50ZXIueCAtIHNpemUgLyAyLCBjZW50ZXIueSAtIHNpemUgLyAyLCBjZW50ZXIueiAtIHNpemUgLyAyXSk7XHJcbiAgICAgIGNvbnN0IHYyID0gbmV3IFZlYzMoW2NlbnRlci54IC0gc2l6ZSAvIDIsIGNlbnRlci55IC0gc2l6ZSAvIDIsIGNlbnRlci56ICsgc2l6ZSAvIDJdKTtcclxuICAgICAgY29uc3QgdjMgPSBuZXcgVmVjMyhbY2VudGVyLnggLSBzaXplIC8gMiwgY2VudGVyLnkgKyBzaXplIC8gMiwgY2VudGVyLnogLSBzaXplIC8gMl0pO1xyXG4gICAgICBjb25zdCB2NCA9IG5ldyBWZWMzKFtjZW50ZXIueCAtIHNpemUgLyAyLCBjZW50ZXIueSArIHNpemUgLyAyLCBjZW50ZXIueiArIHNpemUgLyAyXSk7XHJcbiAgICAgIGNvbnN0IHY1ID0gbmV3IFZlYzMoW2NlbnRlci54ICsgc2l6ZSAvIDIsIGNlbnRlci55IC0gc2l6ZSAvIDIsIGNlbnRlci56IC0gc2l6ZSAvIDJdKTtcclxuICAgICAgY29uc3QgdjYgPSBuZXcgVmVjMyhbY2VudGVyLnggKyBzaXplIC8gMiwgY2VudGVyLnkgLSBzaXplIC8gMiwgY2VudGVyLnogKyBzaXplIC8gMl0pO1xyXG4gICAgICBjb25zdCB2NyA9IG5ldyBWZWMzKFtjZW50ZXIueCArIHNpemUgLyAyLCBjZW50ZXIueSArIHNpemUgLyAyLCBjZW50ZXIueiAtIHNpemUgLyAyXSk7XHJcbiAgICAgIGNvbnN0IHY4ID0gbmV3IFZlYzMoW2NlbnRlci54ICsgc2l6ZSAvIDIsIGNlbnRlci55ICsgc2l6ZSAvIDIsIGNlbnRlci56ICsgc2l6ZSAvIDJdKTtcclxuXHJcbiAgICAgIHRoaXMucHVzaFF1YWQodjEsIHYyLCB2MywgdjQpO1xyXG4gICAgICB0aGlzLnB1c2hRdWFkKHY1LCB2NywgdjYsIHY4KTtcclxuXHJcbiAgICAgIHRoaXMucHVzaFF1YWQodjEsIHY1LCB2MiwgdjYpO1xyXG4gICAgICB0aGlzLnB1c2hRdWFkKHYzLCB2NCwgdjcsIHY4KTtcclxuXHJcbiAgICAgIHRoaXMucHVzaFF1YWQodjEsIHYzLCB2NSwgdjcpO1xyXG4gICAgICB0aGlzLnB1c2hRdWFkKHYyLCB2NiwgdjQsIHY4KTtcclxuICAgfVxyXG5cclxuICAgYWRkRGlzayhudW1TdGVwczogbnVtYmVyLCByYWRpdXM6IG51bWJlciwgY2VudGVyOiBWZWMzKTogdm9pZCB7XHJcblxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBudW1TdGVwczsgaSsrKSB7XHJcbiAgICAgICAgIGNvbnN0IHgxID0gY2VudGVyLnggKyByYWRpdXMgKiBNYXRoLnNpbigoaSAvIG51bVN0ZXBzKSAqIDIgKiBNYXRoLlBJKTtcclxuICAgICAgICAgY29uc3QgeTEgPSBjZW50ZXIueTtcclxuICAgICAgICAgY29uc3QgejEgPSBjZW50ZXIueiArIHJhZGl1cyAqIE1hdGguY29zKChpIC8gbnVtU3RlcHMpICogMiAqIE1hdGguUEkpO1xyXG4gICAgICAgICBjb25zdCB4MiA9IGNlbnRlci54ICsgcmFkaXVzICogTWF0aC5zaW4oKChpICsgMSkgLyBudW1TdGVwcykgKiAyICogTWF0aC5QSSk7XHJcbiAgICAgICAgIGNvbnN0IHkyID0gY2VudGVyLnk7XHJcbiAgICAgICAgIGNvbnN0IHoyID0gY2VudGVyLnogKyByYWRpdXMgKiBNYXRoLmNvcygoKGkgKyAxKSAvIG51bVN0ZXBzKSAqIDIgKiBNYXRoLlBJKTtcclxuXHJcbiAgICAgICAgIGNvbnN0IHAxID0gbmV3IFZlYzMoW3gxLCB5MSwgejFdKTtcclxuICAgICAgICAgY29uc3QgcDIgPSBuZXcgVmVjMyhbeDIsIHkyLCB6Ml0pO1xyXG4gICAgICAgICB0aGlzLnB1c2hUcmlhbmdsZShjZW50ZXIsIHAxLCBwMik7XHJcbiAgICAgIH1cclxuICAgfVxyXG59IiwiaW1wb3J0IHsgVHJpYW5nbGVPYmosIE5vcm1hbFR5cGUgfSBmcm9tICcuL1RyaWFuZ2xlT2JqJztcclxuaW1wb3J0IHsgU3RhdHVzRnVuY3Rpb24gfSBmcm9tICcuLi9VdGlsL0dsb2JhbHMnO1xyXG5pbXBvcnQgeyBQcm9maWxlciB9IGZyb20gJy4uL1V0aWwvUHJvZmlsZXInO1xyXG5cclxuLyoqXHJcbiAqIENsYXNzIHRoYXQgbG9hZHMgYSAub2JqIGZpbGUgYW5kIGNyZWF0ZXMgdHJpYW5nbGVzIGZvciBpdFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRyaWFuZ2xlT2JqRmlsZSBleHRlbmRzIFRyaWFuZ2xlT2JqIHtcclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHNyYzogc3RyaW5nLCB1cGRhdGVTdGF0dXM/OiBTdGF0dXNGdW5jdGlvbikge1xyXG5cclxuICAgICAgc3VwZXIobmFtZSk7XHJcblxyXG4gICAgICAvLyByZWNvcmQgdGhlIHN0YXR1cyBmdW5jdGlvbi4gSWYgb25lIGlzIG5vdCBzdXBwbGllZCwgY3JlYXRlIG9uZSB0aGF0IGRvZXMgbm90aGluZ1xyXG4gICAgICBpZiAoIXVwZGF0ZVN0YXR1cykge1xyXG4gICAgICAgICB1cGRhdGVTdGF0dXMgPSAoc3RhdHVzKSA9PiB7IHJldHVybjsgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5wYXJzZShzcmMsIHVwZGF0ZVN0YXR1cyk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgcGFyc2VGYWNlKGxpbmU6IHN0cmluZyk6IHsgaVY6IG51bWJlcltdLCBpTjogbnVtYmVyW10gfSB7XHJcbiAgICAgIGNvbnN0IHJldCA9IHtcclxuICAgICAgICAgaVY6IFtdIGFzIG51bWJlcltdLFxyXG4gICAgICAgICBpTjogW10gYXMgbnVtYmVyW10sXHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgdG9rZW5zID0gbGluZS5tYXRjaCgvXFxTKy9nKTtcclxuICAgICAgY29uc3QgbnVtVmFscyA9IHRva2Vucy5sZW5ndGggLSAxO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVZhbHM7IGkrKykge1xyXG4gICAgICAgICBjb25zdCB2YWxzID0gdG9rZW5zW2kgKyAxXS5zcGxpdCgnLycpO1xyXG4gICAgICAgICByZXQuaVYucHVzaChwYXJzZUludCh2YWxzWzBdKSAtIDEpO1xyXG4gICAgICAgICBpZiAodmFscy5sZW5ndGggPT09IDMpIHtcclxuICAgICAgICAgICAgcmV0LmlOLnB1c2gocGFyc2VJbnQodmFsc1syXSkgLSAxKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXQ7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgcGFyc2Uoc3JjOiBzdHJpbmcsIHVwZGF0ZVN0YXR1czogU3RhdHVzRnVuY3Rpb24pIHtcclxuXHJcbiAgICAgIHVwZGF0ZVN0YXR1cygnUHJvY2Vzc2luZycpO1xyXG4gICAgICBsZXQgdCA9IERhdGUubm93KCk7XHJcblxyXG4gICAgICBjb25zdCBwMiA9IG5ldyBQcm9maWxlcigpO1xyXG4gICAgICBjb25zdCBwID0gbmV3IFByb2ZpbGVyKCk7XHJcbiAgICAgIGNvbnN0IGxpbmVzID0gc3JjLnNwbGl0KCdcXG4nKTtcclxuICAgICAgcC5sb2coJ3NwbGl0Jyk7XHJcblxyXG4gICAgICBjb25zdCB2ZXJ0aWNlczogbnVtYmVyW10gPSBbXTtcclxuICAgICAgY29uc3Qgbm9ybWFsczogbnVtYmVyW10gPSBbXTtcclxuICAgICAgY29uc3QgdkluZGljZXM6IG51bWJlcltdID0gW107XHJcbiAgICAgIGNvbnN0IG5JbmRpY2VzOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgICBsZXQgbWF0Y2ggPSB0cnVlO1xyXG4gICAgICBsZXQgY29udGFpbnNOb3JtYWxzID0gdHJ1ZTtcclxuXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgLy8gcmVwb3J0IHByb2dyZXNzIGV2ZXJ5IDUwIG1zXHJcbiAgICAgICAgIGlmIChEYXRlLm5vdygpIC0gdCA+IDUwKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZVN0YXR1cygnUHJvY2Vzc2luZzogJyArICgxMDAgKiBpIC8gbGluZXMubGVuZ3RoKS50b0ZpeGVkKCkgKyAnJScpO1xyXG4gICAgICAgICAgICB0ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBjb25zdCBsaW5lID0gbGluZXNbaV07XHJcbiAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ3YgJykpIHtcclxuICAgICAgICAgICAgY29uc3QgdG9rZW5zID0gbGluZS5tYXRjaCgvXFxTKy9nKTtcclxuICAgICAgICAgICAgdmVydGljZXMucHVzaChwYXJzZUZsb2F0KHRva2Vuc1sxXSkpO1xyXG4gICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKHBhcnNlRmxvYXQodG9rZW5zWzJdKSk7XHJcbiAgICAgICAgICAgIHZlcnRpY2VzLnB1c2gocGFyc2VGbG9hdCh0b2tlbnNbM10pKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBlbHNlIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ3ZuICcpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRva2VucyA9IGxpbmUubWF0Y2goL1xcUysvZyk7XHJcbiAgICAgICAgICAgIG5vcm1hbHMucHVzaChwYXJzZUZsb2F0KHRva2Vuc1sxXSkpO1xyXG4gICAgICAgICAgICBub3JtYWxzLnB1c2gocGFyc2VGbG9hdCh0b2tlbnNbMl0pKTtcclxuICAgICAgICAgICAgbm9ybWFscy5wdXNoKHBhcnNlRmxvYXQodG9rZW5zWzNdKSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKCdmICcpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJldCA9IHRoaXMucGFyc2VGYWNlKGxpbmUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5zTm9ybWFscykge1xyXG4gICAgICAgICAgICAgICBpZiAocmV0LmlWLmxlbmd0aCAhPT0gcmV0LmlOLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICBjb250YWluc05vcm1hbHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdOb3JtYWxzIG5vdCBzcGVjaWZpZWQgaW4gZmlsZS4gRmxhdCBub3JtYWxzIHdpbGwgYmUgY29tcHV0ZWQuJyk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgZWxzZSBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXQuaVYubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgaWYgKHJldC5pVltpXSAhPSByZXQuaU5baV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdWZXJ0aWNlcyBhbmQgbm9ybWFscyBkb25cXCd0IG1hdGNoLiBDb250ZW50IHdpbGwgYmUgcmUtaW5kZXhlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJldC5pVi5sZW5ndGggPT09IDQpIHtcclxuXHJcbiAgICAgICAgICAgICAgIHZJbmRpY2VzLnB1c2gocmV0LmlWWzBdLCByZXQuaVZbMV0sIHJldC5pVlsyXSk7XHJcbiAgICAgICAgICAgICAgIHZJbmRpY2VzLnB1c2gocmV0LmlWWzBdLCByZXQuaVZbMl0sIHJldC5pVlszXSk7XHJcbiAgICAgICAgICAgICAgIGlmIChjb250YWluc05vcm1hbHMpIHtcclxuICAgICAgICAgICAgICAgICAgbkluZGljZXMucHVzaChyZXQuaU5bMF0sIHJldC5pTlsxXSwgcmV0LmlOWzJdKTtcclxuICAgICAgICAgICAgICAgICAgbkluZGljZXMucHVzaChyZXQuaU5bMF0sIHJldC5pTlsyXSwgcmV0LmlOWzNdKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICB2SW5kaWNlcy5wdXNoKHJldC5pVlswXSwgcmV0LmlWWzFdLCByZXQuaVZbMl0pO1xyXG4gICAgICAgICAgICAgICBpZiAoY29udGFpbnNOb3JtYWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgIG5JbmRpY2VzLnB1c2gocmV0LmlOWzBdLCByZXQuaU5bMV0sIHJldC5pTlsyXSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHAubG9nKCdwYXJzZScpO1xyXG5cclxuICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgIHRoaXMudmVydGljZXMgPSB2ZXJ0aWNlcztcclxuICAgICAgICAgdGhpcy5pbmRpY2VzID0gdkluZGljZXM7XHJcblxyXG4gICAgICAgICBpZiAoY29udGFpbnNOb3JtYWxzKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9ybWFscyA9IG5vcm1hbHM7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IFtdO1xyXG4gICAgICAgICB0aGlzLm5vcm1hbHMgPSBbXTtcclxuICAgICAgICAgdGhpcy5pbmRpY2VzID0gW107XHJcblxyXG4gICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZJbmRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmVydGljZXMucHVzaCh2ZXJ0aWNlc1szICogdkluZGljZXNbaV0gKyAwXSk7XHJcbiAgICAgICAgICAgIHRoaXMudmVydGljZXMucHVzaCh2ZXJ0aWNlc1szICogdkluZGljZXNbaV0gKyAxXSk7XHJcbiAgICAgICAgICAgIHRoaXMudmVydGljZXMucHVzaCh2ZXJ0aWNlc1szICogdkluZGljZXNbaV0gKyAyXSk7XHJcbiAgICAgICAgICAgIHRoaXMubm9ybWFscy5wdXNoKG5vcm1hbHNbMyAqIG5JbmRpY2VzW2ldICsgMF0pO1xyXG4gICAgICAgICAgICB0aGlzLm5vcm1hbHMucHVzaChub3JtYWxzWzMgKiBuSW5kaWNlc1tpXSArIDFdKTtcclxuICAgICAgICAgICAgdGhpcy5ub3JtYWxzLnB1c2gobm9ybWFsc1szICogbkluZGljZXNbaV0gKyAyXSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5kaWNlcy5wdXNoKGkpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHAubG9nKCdyZWluZGV4Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChjb250YWluc05vcm1hbHMgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgIHRoaXMuY29tcHV0ZU5vcm1hbHMoTm9ybWFsVHlwZS5GbGF0KTtcclxuICAgICAgICAgcC5sb2coJ2NvbXB1dGUgbm9ybWFscycpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmZpbmRCb3VuZHMoKTtcclxuICAgICAgcC5sb2coJ2ZpbmRCb3VuZHMnKTtcclxuICAgICAgcDIubG9nKCdUb3RhbCcpO1xyXG5cclxuICAgICAgdXBkYXRlU3RhdHVzKCdQcm9jZXNzaW5nOiAxMDAlJyk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnVmVydGljZXM6ICcgKyB0aGlzLnZlcnRpY2VzLmxlbmd0aCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdOb3JtYWxzOiAnICsgdGhpcy5ub3JtYWxzLmxlbmd0aCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdUcmlhbmdsZXM6ICcgKyB0aGlzLm51bVRyaWFuZ2xlcyk7XHJcbiAgIH1cclxufSIsImV4cG9ydCBpbnRlcmZhY2UgSVZlYzMge1xyXG4gICB4OiBudW1iZXI7XHJcbiAgIHk6IG51bWJlcjtcclxuICAgejogbnVtYmVyO1xyXG59XHJcbi8qKlxyXG4gKiBWZWN0b3IgY2xhc3MgZm9yIHVzZSB3aXRoIFdlYkdMIGFwcGxpY2F0aW9ucy5cclxuICovXHJcbmNsYXNzIFZlYyB7XHJcblxyXG4gICAvKiogVGhlIHZlY3RvciB2YWx1ZXMuICovXHJcbiAgIHB1YmxpYyB2YWx1ZXM6IG51bWJlcltdO1xyXG5cclxuICAgLyoqXHJcbiAgICAqIEBwYXJhbSB2YWx1ZXNPclNpemUgSWYgYSBhcnJheSwgdGhlIHZhbHVlcyBmb3IgdGhlIHZlY3Rvci4gSWYgYSBudW1iZXIsIHRoZSBzaXplIG9mIHRoZSB2ZWN0b3IuXHJcbiAgICAqL1xyXG4gICBwcm90ZWN0ZWQgY29uc3RydWN0b3IodmFsdWVzT3JTaXplOiBudW1iZXIgfCBudW1iZXJbXSkge1xyXG4gICAgICBpZiAodmFsdWVzT3JTaXplIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgdGhpcy52YWx1ZXMgPSBbLi4udmFsdWVzT3JTaXplXTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgdGhpcy52YWx1ZXMgPSBuZXcgQXJyYXkodmFsdWVzT3JTaXplKTtcclxuICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXNPclNpemU7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlc1tpXSA9IDA7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogQ29tcHV0ZXMgdGhlIG1hZ25pdHVkZSBvZiB0aGUgdmVjdG9yLlxyXG4gICAgKiBcclxuICAgICogQHJldHVybiBUaGUgdmVjdG9yIG1hZ25pdHVkZS5cclxuICAgICovXHJcbiAgIHB1YmxpYyBtYWduaXR1ZGUoKTogbnVtYmVyIHtcclxuICAgICAgbGV0IHN1bSA9IDA7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52YWx1ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgc3VtICs9IHRoaXMudmFsdWVzW2ldICogdGhpcy52YWx1ZXNbaV07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIE1hdGguc3FydChzdW0pO1xyXG4gICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiB4LXkgdmVjdG9yLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZlYzIgZXh0ZW5kcyBWZWMge1xyXG5cclxuICAgLyoqXHJcbiAgICAqIEBwYXJhbSB2YWxzIElmIHN1cHBsaWVkLCB0aGUgaW5pdGlhbCB2YWx1ZXMgZm9yIHRoZSB2ZWN0b3JcclxuICAgICovXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih2YWxzPzogbnVtYmVyW10pIHtcclxuICAgICAgaWYgKHZhbHMpIHtcclxuICAgICAgICAgc3VwZXIodmFscyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHN1cGVyKDIpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBDcmVhdGVzIGEgY29weSBvZiB0aGUgdmVjdG9yLlxyXG4gICAgKlxyXG4gICAgKiBAcmV0dXJucyBBIGNvcHkgb2YgdGhlIHZlY3Rvci5cclxuICAgICovXHJcbiAgIHB1YmxpYyBjbG9uZSgpOiBWZWMyIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWMyKHRoaXMudmFsdWVzKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIEdldHMgdGhlIFggY29tcG9uZW50IG9mIHRoZSB2ZWN0b3JcclxuICAgICogXHJcbiAgICAqIEByZXR1cm5zIFRoZSB2YWx1ZVxyXG4gICAgKi9cclxuICAgcHVibGljIGdldCB4KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlc1swXTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFNldHMgdGhlIFggY29tcG9uZW50IG9mIHRoZSB2ZWN0b3JcclxuICAgICogXHJcbiAgICAqIEBwYXJhbSB2YWwgVGhlIHZhbHVlXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc2V0IHgodmFsOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy52YWx1ZXNbMF0gPSB2YWw7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBHZXRzIHRoZSBZIGNvbXBvbmVudCBvZiB0aGUgdmVjdG9yXHJcbiAgICAqXHJcbiAgICAqIEByZXR1cm5zIFRoZSB2YWx1ZVxyXG4gICAgKi9cclxuICAgcHVibGljIGdldCB5KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlc1sxXTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFNldHMgdGhlIFkgY29tcG9uZW50IG9mIHRoZSB2ZWN0b3JcclxuICAgICogXHJcbiAgICAqIEBwYXJhbSB2YWwgVGhlIHZhbHVlXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc2V0IHkodmFsOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy52YWx1ZXNbMV0gPSB2YWw7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBDb21wdXRlcyB0aGUgZGlzdGFuY2UgdG8gYW5vdGhlciBwb2ludFxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIG90aGVyIFRoZSBvdGhlciBwb2ludFxyXG4gICAgKiBAcmV0dXJucyBUaGUgZGlzdGFuY2UgYmV0d2VlbiB0aGlzIHBvaW50IGFuZCB0aGUgb3RoZXIgcG9pbnRcclxuICAgICovXHJcbiAgIHB1YmxpYyBkaXN0YW5jZShvdGhlcjogVmVjMik6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3codGhpcy54IC0gb3RoZXIueCwgMikgKyBNYXRoLnBvdyh0aGlzLnkgLSBvdGhlci55LCAyKSk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBDcmVhdGVzIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3JcclxuICAgICogXHJcbiAgICAqIEBwYXJhbSBkaWdpdHMgVGhlIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyB0byBkaXNwbGF5LiBUaGlzIHZhbHVlIGlzIHBhc3NlZCB0byB0b0ZpeGVkKCkuXHJcbiAgICAqIEBwYXJhbSBkaXZpZGVyIFRoZSBzdHJpbmcgdG8gc2VwYXJhdGUgZWFjaCBudW1iZXIuXHJcbiAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uLlxyXG4gICAgKi9cclxuICAgcHVibGljIHRvU3RyaW5nKGRpZ2l0cyA9IDIsIGRpdmlkZXIgPSAnLCcpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy54LnRvRml4ZWQoZGlnaXRzKSArIGRpdmlkZXIgKyB0aGlzLnkudG9GaXhlZChkaWdpdHMpO1xyXG4gICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiB4LXkteiB2ZWN0b3IuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVmVjMyBleHRlbmRzIFZlYyBpbXBsZW1lbnRzIElWZWMzIHtcclxuXHJcbiAgIHB1YmxpYyBzdGF0aWMgZ2V0IG9yaWdpbigpIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWMzKFswLCAwLCAwXSk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBAcGFyYW0gdmFscyBJZiBzdXBwbGllZCwgdGhlIGluaXRpYWwgdmFsdWVzIGZvciB0aGUgdmVjdG9yXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgY29uc3RydWN0b3IodmFscz86IG51bWJlcltdKSB7XHJcbiAgICAgIGlmICh2YWxzKSB7XHJcbiAgICAgICAgIHN1cGVyKHZhbHMpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICBzdXBlcigzKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogR2V0cyB0aGUgWCBjb21wb25lbnQgb2YgdGhlIHZlY3RvclxyXG4gICAgKiBcclxuICAgICogQHJldHVybnMgVGhlIHZhbHVlXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgZ2V0IHgoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMudmFsdWVzWzBdO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogU2V0cyB0aGUgWCBjb21wb25lbnQgb2YgdGhlIHZlY3RvclxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIHZhbCBUaGUgdmFsdWVcclxuICAgICovXHJcbiAgIHB1YmxpYyBzZXQgeCh2YWw6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnZhbHVlc1swXSA9IHZhbDtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIEdldHMgdGhlIFkgY29tcG9uZW50IG9mIHRoZSB2ZWN0b3JcclxuICAgICpcclxuICAgICogQHJldHVybnMgVGhlIHZhbHVlXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgZ2V0IHkoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMudmFsdWVzWzFdO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogU2V0cyB0aGUgWSBjb21wb25lbnQgb2YgdGhlIHZlY3RvclxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIHZhbCBUaGUgdmFsdWVcclxuICAgICovXHJcbiAgIHB1YmxpYyBzZXQgeSh2YWw6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnZhbHVlc1sxXSA9IHZhbDtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIEdldHMgdGhlIFogY29tcG9uZW50IG9mIHRoZSB2ZWN0b3JcclxuICAgICpcclxuICAgICogQHJldHVybnMgVGhlIHZhbHVlXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgZ2V0IHooKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMudmFsdWVzWzJdO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogU2V0cyB0aGUgWiBjb21wb25lbnQgb2YgdGhlIHZlY3RvclxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIHZhbCBUaGUgdmFsdWVcclxuICAgICovXHJcbiAgIHB1YmxpYyBzZXQgeih2YWw6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnZhbHVlc1syXSA9IHZhbDtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIEdldHMgdGhlIHgteSBjb21wb25lbnRzIGFzIGEgMmQgdmVjXHJcbiAgICAqXHJcbiAgICAqIEByZXR1cm4gdGhlIFZlYzNcclxuICAgICovXHJcbiAgIHB1YmxpYyBnZXQgeHkoKTogVmVjMiB7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjMihbdGhpcy54LCB0aGlzLnldKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgYSBjb3B5IG9mIHRoZSB2ZWN0b3IuXHJcbiAgICAqIFxyXG4gICAgKiBAcmV0dXJucyBBIGNvcHkgb2YgdGhlIHZlY3Rvci5cclxuICAgICovXHJcbiAgIHB1YmxpYyBjbG9uZSgpOiBWZWMzIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMudmFsdWVzKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlY3RvclxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIGRpZ2l0cyBUaGUgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIHRvIGRpc3BsYXkuIFRoaXMgdmFsdWUgaXMgcGFzc2VkIHRvIHRvRml4ZWQoKS5cclxuICAgICogQHBhcmFtIGRpdmlkZXIgVGhlIHN0cmluZyB0byBzZXBhcmF0ZSBlYWNoIG51bWJlci5cclxuICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50YXRpb24uXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgdG9TdHJpbmcoZGlnaXRzID0gMiwgZGl2aWRlciA9ICcsJyk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiB0aGlzLngudG9GaXhlZChkaWdpdHMpICsgZGl2aWRlciArIHRoaXMueS50b0ZpeGVkKGRpZ2l0cykgKyBkaXZpZGVyICsgdGhpcy56LnRvRml4ZWQoZGlnaXRzKTtcclxuICAgfVxyXG5cclxuICAgLyoqIFxyXG4gICAgKiBSZXR1cm5zIGEgbm9ybWFsaXplZCB2ZXJzaW9uIG9mIHRoaXMgdmVjdG9yLlxyXG4gICAgKiBcclxuICAgICogQHJldHVybnMgVGhlIHJlc3VsdGluZyBub3JtYWxpemVkIHZlY3Rvci5cclxuICAgICovXHJcbiAgIHB1YmxpYyBub3JtYWxpemUoKTogVmVjMyB7XHJcbiAgICAgIGNvbnN0IG1hZyA9IHRoaXMubWFnbml0dWRlKCk7XHJcbiAgICAgIGlmIChtYWcgPT09IDApIHtcclxuICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHJldHVybiB0aGlzLm11bHQoMSAvIG1hZyk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIE11bHRpcGxpZXMgbWVtYmVycyBieSBhIHZhbHVlIGFuZCByZXR1cm5zIHRoZSBuZXcgdmVjdG9yXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gdmFsdWUgVGhlIG11bHRpcGxpY2F0aW9uIHZhbHVlLlxyXG4gICAgKi9cclxuICAgcHVibGljIG11bHQodmFsdWU6IG51bWJlcik6IFZlYzMge1xyXG4gICAgICByZXR1cm4gbmV3IFZlYzMoW1xyXG4gICAgICAgICB0aGlzLnggKiB2YWx1ZSxcclxuICAgICAgICAgdGhpcy55ICogdmFsdWUsXHJcbiAgICAgICAgIHRoaXMueiAqIHZhbHVlLFxyXG4gICAgICBdKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFJldHVybnMgdGhlIHZlY3RvciBwb2ludGluZyBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLlxyXG4gICAgKiBcclxuICAgICogQHJldHVybnMgVGhlIG5lZ2F0ZWQgdmVjdG9yLlxyXG4gICAgKi9cclxuICAgcHVibGljIG5lZ2F0ZSgpOiBWZWMzIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWMzKFstdGhpcy54LCAtdGhpcy55LCAtdGhpcy56XSk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBTdWJ0cmFjdHMgdmFsdWVzIGZyb20gdGhpcyB2ZWN0b3IuXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gdmVjIFRoZSB2ZWN0b3IgdG8gc3VidHJhY3QuXHJcbiAgICAqIEByZXR1cm5zIFRoZSBjb21wdXRlZCB2ZWN0b3IuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc3VidHJhY3QodmVjOiBWZWMzKTogVmVjMyB7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjMyhbXHJcbiAgICAgICAgIHRoaXMudmFsdWVzWzBdIC0gdmVjLnZhbHVlc1swXSxcclxuICAgICAgICAgdGhpcy52YWx1ZXNbMV0gLSB2ZWMudmFsdWVzWzFdLFxyXG4gICAgICAgICB0aGlzLnZhbHVlc1syXSAtIHZlYy52YWx1ZXNbMl1cclxuICAgICAgXSk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBBZGRzIHZhbHVlcyBmcm9tIHRoaXMgdmVjdG9yLlxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIHZlYyBUaGUgdmVjdG9yIHRvIGFkZC5cclxuICAgICogQHJldHVybnMgVGhlIGNvbXB1dGVkIHZlY3Rvci5cclxuICAgICovXHJcbiAgIHB1YmxpYyBhZGQodmVjOiBWZWMzKTogVmVjMyB7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjMyhbXHJcbiAgICAgICAgIHRoaXMudmFsdWVzWzBdICsgdmVjLnZhbHVlc1swXSxcclxuICAgICAgICAgdGhpcy52YWx1ZXNbMV0gKyB2ZWMudmFsdWVzWzFdLFxyXG4gICAgICAgICB0aGlzLnZhbHVlc1syXSArIHZlYy52YWx1ZXNbMl1cclxuICAgICAgXSk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBDb21wdXRlcyB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3IuXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gb3RoZXIgVGhlIG90aGVyIHZlY3Rvci5cclxuICAgICovXHJcbiAgIHB1YmxpYyBjcm9zcyhvdGhlcjogVmVjMyk6IFZlYzMge1xyXG4gICAgICBjb25zdCBBID0gdGhpcy52YWx1ZXM7XHJcbiAgICAgIGNvbnN0IEIgPSBvdGhlci52YWx1ZXM7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjMyhbXHJcbiAgICAgICAgIEFbMV0gKiBCWzJdIC0gQVsyXSAqIEJbMV0sXHJcbiAgICAgICAgIEFbMl0gKiBCWzBdIC0gQVswXSAqIEJbMl0sXHJcbiAgICAgICAgIEFbMF0gKiBCWzFdIC0gQVsxXSAqIEJbMF1cclxuICAgICAgXSk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBDb21wdXRlcyB0aGUgZGlzdGFuY2UgZnJvbSB0aGlzIHBvaW50IHRvIGEgc3BlY2lmaWVkIHBvaW50LlxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIHB0IFRoZSBwb2ludC5cclxuICAgICogQHJldHVybnMgVGhlIGRpc3RhbmNlIHRvIHRoZSBwb2ludC5cclxuICAgICovXHJcbiAgIHB1YmxpYyBkaXN0VG9Qb2ludChwdDogVmVjMyk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnN1YnRyYWN0KHB0KS5tYWduaXR1ZGUoKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIEJ1aWxkcyBhIFZlYzQgZnJvbSB0aGlzIFZlYzNcclxuICAgICogXHJcbiAgICAqIEBwYXJhbSB3IFRoZSB3IGNvbXBvbmVudCBvZiB0aGUgbmV3IHZlY3Rvci5cclxuICAgICogQHJldHVybnMgVGhlIG5ldyB2ZWN0b3IuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgdG9WZWM0KHc6IG51bWJlcik6IFZlYzQge1xyXG4gICAgICByZXR1cm4gbmV3IFZlYzQoW3RoaXMueCwgdGhpcy55LCB0aGlzLnosIHddKTtcclxuICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQW4geC15LXotdyB2ZWN0b3IuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVmVjNCBleHRlbmRzIFZlYyB7XHJcblxyXG4gICAvKipcclxuICAgICogQHBhcmFtIHZhbHMgSWYgc3VwcGxpZWQsIHRoZSBpbml0aWFsIHZhbHVlcyBmb3IgdGhlIHZlY3Rvci5cclxuICAgICovXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih2YWxzPzogbnVtYmVyW10pIHtcclxuICAgICAgaWYgKHZhbHMpIHtcclxuICAgICAgICAgc3VwZXIodmFscyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIHN1cGVyKDQpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBHZXRzIHRoZSBYIGNvbXBvbmVudCBvZiB0aGUgdmVjdG9yXHJcbiAgICAqIFxyXG4gICAgKiBAcmV0dXJucyBUaGUgdmFsdWVcclxuICAgICovXHJcbiAgIHB1YmxpYyBnZXQgeCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBTZXRzIHRoZSBYIGNvbXBvbmVudCBvZiB0aGUgdmVjdG9yXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gdmFsIFRoZSB2YWx1ZVxyXG4gICAgKi9cclxuICAgcHVibGljIHNldCB4KHZhbDogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMudmFsdWVzWzBdID0gdmFsO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogR2V0cyB0aGUgWSBjb21wb25lbnQgb2YgdGhlIHZlY3RvclxyXG4gICAgKlxyXG4gICAgKiBAcmV0dXJucyBUaGUgdmFsdWVcclxuICAgICovXHJcbiAgIHB1YmxpYyBnZXQgeSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMV07XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBTZXRzIHRoZSBZIGNvbXBvbmVudCBvZiB0aGUgdmVjdG9yXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gdmFsIFRoZSB2YWx1ZVxyXG4gICAgKi9cclxuICAgcHVibGljIHNldCB5KHZhbDogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMudmFsdWVzWzFdID0gdmFsO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogR2V0cyB0aGUgWiBjb21wb25lbnQgb2YgdGhlIHZlY3RvclxyXG4gICAgKlxyXG4gICAgKiBAcmV0dXJucyBUaGUgdmFsdWVcclxuICAgICovXHJcbiAgIHB1YmxpYyBnZXQgeigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMl07XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBTZXRzIHRoZSBaIGNvbXBvbmVudCBvZiB0aGUgdmVjdG9yXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gdmFsIFRoZSB2YWx1ZVxyXG4gICAgKi9cclxuICAgcHVibGljIHNldCB6KHZhbDogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMudmFsdWVzWzJdID0gdmFsO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogR2V0cyB0aGUgWiBjb21wb25lbnQgb2YgdGhlIHZlY3RvclxyXG4gICAgKlxyXG4gICAgKiBAcmV0dXJucyBUaGUgdmFsdWVcclxuICAgICovXHJcbiAgIHB1YmxpYyBnZXQgdygpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy52YWx1ZXNbM107XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBTZXRzIHRoZSBaIGNvbXBvbmVudCBvZiB0aGUgdmVjdG9yXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gdmFsIFRoZSB2YWx1ZVxyXG4gICAgKi9cclxuICAgcHVibGljIHNldCB3KHZhbDogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMudmFsdWVzWzNdID0gdmFsO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogR2V0cyB0aGUgeC15LXogY29tcG9uZW50cyBhcyBhIDNkIHZlY1xyXG4gICAgKiBcclxuICAgICogQHJldHVybiB0aGUgVmVjM1xyXG4gICAgKi9cclxuICAgcHVibGljIGdldCB4eXooKTogVmVjMyB7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjMyhbdGhpcy54LCB0aGlzLnksIHRoaXMuel0pO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogQ3JlYXRlcyBhIGNvcHkgb2YgdGhlIHZlY3Rvci5cclxuICAgICogXHJcbiAgICAqIEByZXR1cm5zIEEgY29weSBvZiB0aGUgdmVjdG9yLlxyXG4gICAgKi9cclxuICAgcHVibGljIGNsb25lKCk6IFZlYzQge1xyXG4gICAgICByZXR1cm4gbmV3IFZlYzQodGhpcy52YWx1ZXMpO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogUmV0dXJucyBhbiB4LXkteiB2ZWN0b3Igd2hlcmUgZWFjaCBlbGVtZW50IGlzIGNvbXB1dGVkIGJ5IGRpdmlkaW5nIHRoaXMgdmVjdG9yc1xyXG4gICAgKiBlbGVtZW50cyBieSB0aGUgdyB2YWx1ZS5cclxuICAgICogXHJcbiAgICAqIEByZXR1cm5zIEFuIHgteS16IHZlY3Rvci5cclxuICAgICovXHJcbiAgIHB1YmxpYyBkaXZpZGVCeVcoKTogVmVjMyB7XHJcbiAgICAgIGNvbnN0IHcgPSB0aGlzLnZhbHVlc1szXTtcclxuICAgICAgcmV0dXJuIG5ldyBWZWMzKFtcclxuICAgICAgICAgdGhpcy52YWx1ZXNbMF0gLyB3LFxyXG4gICAgICAgICB0aGlzLnZhbHVlc1sxXSAvIHcsXHJcbiAgICAgICAgIHRoaXMudmFsdWVzWzJdIC8gd1xyXG4gICAgICBdKTtcclxuICAgfVxyXG5cclxuICAgLyoqIFxyXG4gICAgKiBOb3JtYWxpemVzIHRoaXMgdmVjdG9yLCBhbmQgc3RvcmVzIGFuZCByZXR1cm5zIHRoZSByZXN1bHQuXHJcbiAgICAqIFxyXG4gICAgKiBAcmV0dXJucyBUaGUgcmVzdWx0aW5nIG5vcm1hbGl6ZWQgdmVjdG9yLlxyXG4gICAgKi9cclxuICAgcHVibGljIG5vcm1hbGl6ZSgpOiBWZWM0IHtcclxuICAgICAgY29uc3QgbWFnID0gdGhpcy5tYWduaXR1ZGUoKTtcclxuICAgICAgY29uc3QgcmV0ID0gdGhpcy5jbG9uZSgpO1xyXG4gICAgICBpZiAobWFnICE9PSAwKSB7XHJcbiAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52YWx1ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgcmV0LnZhbHVlc1tpXSAvPSBtYWc7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHJldDtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgYSBWZWM0IGZyb20gYSBWZWMzIG9iamVjdFxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIHZlYyBUaGUgVmVjMyBvYmplY3RcclxuICAgICogQHBhcmFtIHcgVGhlIHcgdmFsdWUgZm9yIHRoZSBWZWM0XHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc3RhdGljIGZyb21WZWMzKHZlYzogVmVjMywgdyA9IDEpOiBWZWM0IHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWM0KFt2ZWMueCwgdmVjLnksIHZlYy56LCB3XSk7XHJcbiAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgZ2xQcm9ncmFtIH0gZnJvbSAnLi9nbFByb2dyYW0nO1xyXG5cclxuLyoqXHJcbiAqIFdyYXBwZXIgZm9yIGEgV2ViR2wgQnVmZmVyIGFuZCBBdHRyaWJ1dGVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBnbEF0dHJpYnV0ZUJ1ZmZlciB7XHJcbiAgIHByaXZhdGUgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XHJcbiAgIHByaXZhdGUgYnVmZmVyOiBXZWJHTEJ1ZmZlciB8IG51bGw7XHJcbiAgIHByaXZhdGUgYXR0cmlidXRlTG9jYXRpb246IG51bWJlcjtcclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuICAgICAgZ2xDdHg6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQsXHJcbiAgICAgIHByb2dyYW06IFdlYkdMUHJvZ3JhbSB8IGdsUHJvZ3JhbSxcclxuICAgICAgYXR0cmlidXRlTmFtZTogc3RyaW5nXHJcbiAgICkge1xyXG4gICAgICB0aGlzLmdsID0gZ2xDdHg7XHJcbiAgICAgIGNvbnN0IGdsID0gdGhpcy5nbDtcclxuXHJcbiAgICAgIGlmIChwcm9ncmFtIGluc3RhbmNlb2YgZ2xQcm9ncmFtKSB7XHJcbiAgICAgICAgIHByb2dyYW0gPSBwcm9ncmFtLmdldCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgICB0aGlzLmF0dHJpYnV0ZUxvY2F0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgYXR0cmlidXRlTmFtZSk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy5idWZmZXIpIHtcclxuICAgICAgICAgdGhpcy5nbC5kZWxldGVCdWZmZXIodGhpcy5idWZmZXIpO1xyXG4gICAgICAgICB0aGlzLmJ1ZmZlciA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5hdHRyaWJ1dGVMb2NhdGlvbiA9IC0xO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgdXBsb2FkKHZhbHVlczogbnVtYmVyW10gfCBGbG9hdDMyQXJyYXkpOiB2b2lkIHtcclxuICAgICAgY29uc3QgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICB0aGlzLmJpbmQoKTtcclxuXHJcbiAgICAgIGlmICh2YWx1ZXMgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpIHtcclxuICAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHZhbHVlcywgZ2wuU1RBVElDX0RSQVcpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheSh2YWx1ZXMpLCBnbC5TVEFUSUNfRFJBVyk7XHJcbiAgICAgIH1cclxuXHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBiaW5kKHNpemUgPSAzKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IGdsID0gdGhpcy5nbDtcclxuICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuYnVmZmVyKTtcclxuICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5hdHRyaWJ1dGVMb2NhdGlvbik7XHJcbiAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoXHJcbiAgICAgICAgIHRoaXMuYXR0cmlidXRlTG9jYXRpb24sXHJcbiAgICAgICAgIHNpemUsICAgICAgICAgICAgIC8vIHNpemVcclxuICAgICAgICAgZ2wuRkxPQVQsICAgICAgICAgLy8gdHlwZVxyXG4gICAgICAgICBmYWxzZSwgICAgICAgICAgICAvLyBub3JtYWxpemVkXHJcbiAgICAgICAgIDAsICAgICAgICAgICAgICAgIC8vIHN0cmlkZVxyXG4gICAgICAgICAwICAgICAgICAgICAgICAgICAvLyBvZmZzZXRcclxuICAgICAgKTtcclxuICAgfVxyXG59IiwiaW1wb3J0IHsgZ2xQcm9ncmFtIH0gZnJvbSAnLi9nbFByb2dyYW0nO1xyXG5cclxuLyoqXHJcbiAqIFdyYXBwZXIgZm9yIGEgV2ViR2wgQnVmZmVyIGFuZCBBdHRyaWJ1dGVcclxuICovXHJcbmV4cG9ydCBjbGFzcyBnbEJ1ZmZlciB7XHJcbiAgIHByaXZhdGUgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XHJcbiAgIHByaXZhdGUgYnVmZmVyOiBXZWJHTEJ1ZmZlciB8IG51bGw7XHJcbiAgIHByaXZhdGUgYXR0cmlidXRlTG9jYXRpb246IG51bWJlcjtcclxuXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuICAgICAgZ2xDdHg6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQsXHJcbiAgICAgIHByb2dyYW06IFdlYkdMUHJvZ3JhbSB8IGdsUHJvZ3JhbSxcclxuICAgICAgYXR0cmlidXRlTmFtZTogc3RyaW5nXHJcbiAgICkge1xyXG4gICAgICB0aGlzLmdsID0gZ2xDdHg7XHJcbiAgICAgIGNvbnN0IGdsID0gdGhpcy5nbDtcclxuXHJcbiAgICAgIGlmIChwcm9ncmFtIGluc3RhbmNlb2YgZ2xQcm9ncmFtKSB7XHJcbiAgICAgICAgIHByb2dyYW0gPSBwcm9ncmFtLmdldCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgICB0aGlzLmF0dHJpYnV0ZUxvY2F0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgYXR0cmlidXRlTmFtZSk7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLmdsLmRlbGV0ZUJ1ZmZlcih0aGlzLmJ1ZmZlcik7XHJcbiAgICAgIHRoaXMuYnVmZmVyID0gbnVsbDtcclxuICAgICAgdGhpcy5hdHRyaWJ1dGVMb2NhdGlvbiA9IC0xO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgdXBsb2FkKHZlcnRpY2VzOiBudW1iZXJbXSk6IHZvaWQge1xyXG4gICAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XHJcbiAgICAgIHRoaXMuYmluZCgpO1xyXG4gICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheSh2ZXJ0aWNlcyksIGdsLlNUQVRJQ19EUkFXKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGJpbmQoc2l6ZSA9IDMpOiB2b2lkIHtcclxuICAgICAgY29uc3QgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5idWZmZXIpO1xyXG4gICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLmF0dHJpYnV0ZUxvY2F0aW9uKTtcclxuICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihcclxuICAgICAgICAgdGhpcy5hdHRyaWJ1dGVMb2NhdGlvbixcclxuICAgICAgICAgc2l6ZSwgICAgICAgICAgICAgLy8gc2l6ZSAtIDIsMyBvciA0IHZhbHVlcyBwZXIgdmVydGV4XHJcbiAgICAgICAgIGdsLkZMT0FULCAgICAgICAgIC8vIHR5cGVcclxuICAgICAgICAgZmFsc2UsICAgICAgICAgICAgLy8gbm9ybWFsaXplZFxyXG4gICAgICAgICAwLCAgICAgICAgICAgICAgICAvLyBzdHJpZGVcclxuICAgICAgICAgMCAgICAgICAgICAgICAgICAgLy8gb2Zmc2V0XHJcbiAgICAgICk7XHJcbiAgIH1cclxufSIsImltcG9ydCB7IENvbG9yIH0gZnJvbSAnLi4vVXRpbC9Db2xvcic7XHJcbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi4vVXRpbC9HbG9iYWxzJztcclxuaW1wb3J0IHsgaHRtbENvbG9yIH0gZnJvbSAnLi4vVXRpbC9odG1sQ29sb3InO1xyXG5cclxuLyoqXHJcbiAqIENvbG9yIGNsYXNzIHRoYXQgcmVxdWlyZXMgUkdCIHZhbHVlcyB0byBiZSBiZXR3ZWVuIDAgYW5kIDFcclxuICovXHJcbmV4cG9ydCBjbGFzcyBnbENvbG9yMyBleHRlbmRzIENvbG9yIHtcclxuXHJcbiAgIHN0YXRpYyByZWFkb25seSBtb2RlbFdoaXRlID0gbmV3IGdsQ29sb3IzKFsyNTUgLyAyNTUsIDI1MCAvIDI1NSwgMjQyIC8gMjU1XSk7XHJcbiAgIHN0YXRpYyByZWFkb25seSBtb2RlbEJsYWNrID0gbmV3IGdsQ29sb3IzKFswLCAwLCAwXSk7XHJcblxyXG4gICAvKipcclxuICAgICogQHBhcmFtIGNvbG9yIEFuIFJHQiBjb2xvciBhcnJheVxyXG4gICAgKi9cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKGNvbG9yOiBudW1iZXJbXSkge1xyXG5cclxuICAgICAgaWYgKGNvbG9yLmxlbmd0aCAhPSAzKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2xvciBhcnJheSBsZW5ndGggKGV4cGVjdGVkIDMgZWxlbWVudHMpJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNvbG9yWzBdIDwgMCB8fCBjb2xvclswXSA+IDEpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvbG9yIFxcJ3JcXCcgdmFsdWUgKGV4cGVjdGVkIFswLTFdKScpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChjb2xvclsxXSA8IDAgfHwgY29sb3JbMV0gPiAxKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2xvciBcXCdnXFwnIHZhbHVlIChleHBlY3RlZCBbMC0xXSknKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY29sb3JbMl0gPCAwIHx8IGNvbG9yWzJdID4gMSkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29sb3IgXFwnYlxcJyB2YWx1ZSAoZXhwZWN0ZWQgWzAtMV0pJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHN1cGVyKGNvbG9yKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgYW4gZ2xDb2xvciBvYmplY3QgdXNpbmcgdmFsdWVzIGluIGEgQ29sb3Igb2JqZWN0LlxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIGNvbG9yIEEgZ2VuZXJpYyBDb2xvciBvYmplY3QuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc3RhdGljIGZyb21Db2xvcihjb2xvcjogQ29sb3IpOiBnbENvbG9yMyB7XHJcbiAgICAgIGNvbnN0IHIgPSBjbGFtcChjb2xvci5yLCAwLCAxKTtcclxuICAgICAgY29uc3QgZyA9IGNsYW1wKGNvbG9yLmcsIDAsIDEpO1xyXG4gICAgICBjb25zdCBiID0gY2xhbXAoY29sb3IuYiwgMCwgMSk7XHJcbiAgICAgIHJldHVybiBuZXcgZ2xDb2xvcjMoW3IsIGcsIGJdKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFJldHVybnMgdGhlIGxpZ2h0ZXIgb2YgdHdvIGNvbG9yc1xyXG4gICAgKiBcclxuICAgICogQHBhcmFtIGMxIFRoZSBmaXJzdCBjb2xvci5cclxuICAgICogQHBhcmFtIGMyIFRoZSBzZWNvbmQgY29sb3IuXHJcbiAgICAqIEByZXR1cm5zIFRoZSBsaWdodGVzdCBjb2xvci5cclxuICAgICovXHJcbiAgIHB1YmxpYyBzdGF0aWMgbGlnaHRlc3QoYzE6IGdsQ29sb3IzLCBjMjogZ2xDb2xvcjMpOiBnbENvbG9yMyB7XHJcbiAgICAgIC8vIFRPRE86IHVzZSBsdW1pbm9zaXR5IGluc3RlYWQ/XHJcbiAgICAgIGlmIChjMS5yICsgYzEuZyArIGMxLmIgPiBjMi5yICsgYzIuZyArIGMyLmIpIHtcclxuICAgICAgICAgcmV0dXJuIGMxO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICByZXR1cm4gYzI7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFJldHVybnMgdGhlIGRhcmtlciBvZiB0d28gY29sb3JzXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gYzEgVGhlIGZpcnN0IGNvbG9yLlxyXG4gICAgKiBAcGFyYW0gYzIgVGhlIHNlY29uZCBjb2xvci5cclxuICAgICogQHJldHVybnMgVGhlIGRhcmtlc3QgY29sb3IuXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc3RhdGljIGRhcmtlc3QoYzE6IGdsQ29sb3IzLCBjMjogZ2xDb2xvcjMpOiBnbENvbG9yMyB7XHJcbiAgICAgIC8vIFRPRE86IHVzZSBsdW1pbm9zaXR5IGluc3RlYWQ/XHJcbiAgICAgIGlmIChjMS5yICsgYzEuZyArIGMxLmIgPCBjMi5yICsgYzIuZyArIGMyLmIpIHtcclxuICAgICAgICAgcmV0dXJuIGMxO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICByZXR1cm4gYzI7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIENvbnZlcnRzIHRoaXMgb2JqZWN0IHRvIGFuIGh0bWwgY29sb3Igb2JqZWN0ICgwLTI1NSBiYXNlZCkuXHJcbiAgICAqIFxyXG4gICAgKiBAcmV0dXJucyBBbiBodG1sQ29sb3Igb2JqZWN0LlxyXG4gICAgKi9cclxuICAgcHVibGljIHRvSHRtbENvbG9yKCk6IGh0bWxDb2xvciB7XHJcbiAgICAgIGNvbnN0IHIgPSBNYXRoLnJvdW5kKDI1NSAqIHRoaXMucik7XHJcbiAgICAgIGNvbnN0IGcgPSBNYXRoLnJvdW5kKDI1NSAqIHRoaXMuZyk7XHJcbiAgICAgIGNvbnN0IGIgPSBNYXRoLnJvdW5kKDI1NSAqIHRoaXMuYik7XHJcbiAgICAgIHJldHVybiBuZXcgaHRtbENvbG9yKFtyLCBnLCBiXSk7XHJcbiAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDb2xvciBjbGFzcyB0aGF0IHJlcXVpcmVzIFJHQkEgdmFsdWVzIHRvIGJlIGJldHdlZW4gMCBhbmQgMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIGdsQ29sb3I0IGV4dGVuZHMgQ29sb3Ige1xyXG5cclxuICAgLyoqXHJcbiAgICAqIEBwYXJhbSBjb2xvciBBbiBSR0IgY29sb3IgYXJyYXlcclxuICAgICovXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihjb2xvcjogbnVtYmVyW10pIHtcclxuXHJcbiAgICAgIGlmIChjb2xvci5sZW5ndGggIT0gNCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29sb3IgYXJyYXkgbGVuZ3RoIChleHBlY3RlZCA0IGVsZW1lbnRzKScpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChjb2xvclswXSA8IDAgfHwgY29sb3JbMF0gPiAxKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2xvciBcXCdyXFwnIHZhbHVlIChleHBlY3RlZCBbMC0xXSknKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY29sb3JbMV0gPCAwIHx8IGNvbG9yWzFdID4gMSkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29sb3IgXFwnZ1xcJyB2YWx1ZSAoZXhwZWN0ZWQgWzAtMV0pJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNvbG9yWzJdIDwgMCB8fCBjb2xvclsyXSA+IDEpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvbG9yIFxcJ2JcXCcgdmFsdWUgKGV4cGVjdGVkIFswLTFdKScpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChjb2xvclszXSA8IDAgfHwgY29sb3JbM10gPiAxKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2xvciBcXCdhXFwnIHZhbHVlIChleHBlY3RlZCBbMC0xXSknKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgc3VwZXIoY29sb3IpO1xyXG4gICB9XHJcbn0iLCJpbXBvcnQgeyBnbENvbG9yMyB9IGZyb20gJy4vZ2xDb2xvcic7XHJcblxyXG4vKipcclxuICogQ2xhc3MgdGhhdCBhZGRzIHRlbXBlcmF0dXJlIHRvIGEgQ29sb3Igb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgZ2xDb2xvcldpdGhUZW1wZXJhdHVyZSBleHRlbmRzIGdsQ29sb3IzIHtcclxuICAgLyoqXHJcbiAgICAqIFRlbXBlcmF0dXJlIGluIEtlbHZpblxyXG4gICAgKi9cclxuICAgcHJpdmF0ZSBfdGVtcGVyYXR1cmU6IG51bWJlcjtcclxuXHJcbiAgIC8qKlxyXG4gICAgKiBHZXRzIHRoZSB0ZW1wZXJhdHVyZSBpbiBLZWx2aW5cclxuICAgICovXHJcbiAgIHB1YmxpYyBnZXQgdGVtcGVyYXR1cmUoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3RlbXBlcmF0dXJlO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogQHBhcmFtIGNvbG9yIEFuIFJHQiBjb2xvciBhcnJheVxyXG4gICAgKiBAcGFyYW0gdGVtcGVyYXR1cmUgVGVtcGVyYXR1cmUgaW4gS2VsdmluXHJcbiAgICAqL1xyXG4gICBwcml2YXRlIGNvbnN0cnVjdG9yKGNvbG9yOiBudW1iZXJbXSwgdGVtcGVyYXR1cmU6IG51bWJlcikge1xyXG4gICAgICBzdXBlcihjb2xvcik7XHJcbiAgICAgIHRoaXMuX3RlbXBlcmF0dXJlID0gdGVtcGVyYXR1cmU7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBLbm93biBjb2xvciB2YWx1ZXMuIEZvciBvdGhlciByZXF1ZXN0cyB0aGUgY2xhc3Mgd2lsbCByZXR1cm4gaW50ZXJwb2xhdGVkIHZhbHVlc1xyXG4gICAgKi9cclxuICAgcHJpdmF0ZSBzdGF0aWMgY29sb3JzOiBnbENvbG9yV2l0aFRlbXBlcmF0dXJlW10gPSBbXHJcbiAgICAgIG5ldyBnbENvbG9yV2l0aFRlbXBlcmF0dXJlKFsyNTUgLyAyNTUsIDE0NyAvIDI1NSwgNDEgLyAyNTVdLCAxOTAwKSxcclxuICAgICAgbmV3IGdsQ29sb3JXaXRoVGVtcGVyYXR1cmUoWzI1NSAvIDI1NSwgMTk3IC8gMjU1LCAxNDMgLyAyNTVdLCAyNjAwKSxcclxuICAgICAgbmV3IGdsQ29sb3JXaXRoVGVtcGVyYXR1cmUoWzI1NSAvIDI1NSwgMjE0IC8gMjU1LCAxNzAgLyAyNTVdLCAyODUwKSxcclxuICAgICAgbmV3IGdsQ29sb3JXaXRoVGVtcGVyYXR1cmUoWzI1NSAvIDI1NSwgMjQxIC8gMjU1LCAyMjQgLyAyNTVdLCAzMjAwKSxcclxuICAgICAgbmV3IGdsQ29sb3JXaXRoVGVtcGVyYXR1cmUoWzI1NSAvIDI1NSwgMjUwIC8gMjU1LCAyNDQgLyAyNTVdLCA1MjAwKSxcclxuICAgICAgbmV3IGdsQ29sb3JXaXRoVGVtcGVyYXR1cmUoWzI1NSAvIDI1NSwgMjU1IC8gMjU1LCAyNTEgLyAyNTVdLCA1NDAwKSxcclxuICAgICAgbmV3IGdsQ29sb3JXaXRoVGVtcGVyYXR1cmUoWzI1NSAvIDI1NSwgMjU1IC8gMjU1LCAyNTUgLyAyNTVdLCA2MDAwKSwgLy8gZGF5bGlnaHRcclxuICAgICAgbmV3IGdsQ29sb3JXaXRoVGVtcGVyYXR1cmUoWzIwMSAvIDI1NSwgMjI2IC8gMjU1LCAyNTUgLyAyNTVdLCA3MDAwKSxcclxuICAgICAgbmV3IGdsQ29sb3JXaXRoVGVtcGVyYXR1cmUoWzY0IC8gMjU1LCAxNTYgLyAyNTUsIDI1NSAvIDI1NV0sIDIwMDAwKSxcclxuICAgXTtcclxuXHJcbiAgIHB1YmxpYyBzdGF0aWMgZ2V0IGRheWxpZ2h0KCk6IGdsQ29sb3JXaXRoVGVtcGVyYXR1cmUge1xyXG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGUoNjAwMCk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBHZXRzIHRoZSBtaW5pbXVtIHN1cHBvcnRlZCB0ZW1wZXJhdHVyZS5cclxuICAgICogXHJcbiAgICAqIEByZXR1cm5zIHRlbXBlcmF0dXJlIHZhbHVlIGluIEtlbHZpbi5cclxuICAgICovXHJcbiAgIHB1YmxpYyBzdGF0aWMgZ2V0IG1pblRlbXBlcmF0dXJlKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNvbG9yc1swXS50ZW1wZXJhdHVyZTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIEdldHMgdGhlIG1heGltdW0gc3VwcG9ydGVkIHRlbXBlcmF0dXJlLlxyXG4gICAgKiBcclxuICAgICogQHJldHVybnMgdGVtcGVyYXR1cmUgdmFsdWUgaW4gS2VsdmluLlxyXG4gICAgKi9cclxuICAgcHVibGljIHN0YXRpYyBnZXQgbWF4VGVtcGVyYXR1cmUoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY29sb3JzW3RoaXMuY29sb3JzLmxlbmd0aCAtIDFdLnRlbXBlcmF0dXJlO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogR2V0cyBhIENvbG9yIG1hdGNoaW5nIHRoZSBzcGVjaWZpZWQgdGVtcGVyYXR1cmUuXHJcbiAgICAqIFxyXG4gICAgKiBAcmV0dXJucyB0ZW1wZXJhdHVyZSB2YWx1ZSBpbiBLZWx2aW4uXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc3RhdGljIGNyZWF0ZSh0ZW1wZXJhdHVyZTogbnVtYmVyKTogZ2xDb2xvcldpdGhUZW1wZXJhdHVyZSB7XHJcblxyXG4gICAgICBpZiAodGVtcGVyYXR1cmUgPD0gdGhpcy5taW5UZW1wZXJhdHVyZSkge1xyXG4gICAgICAgICByZXR1cm4gdGhpcy5jb2xvcnNbMF07XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAodGVtcGVyYXR1cmUgPj0gdGhpcy5tYXhUZW1wZXJhdHVyZSkge1xyXG4gICAgICAgICByZXR1cm4gdGhpcy5jb2xvcnNbdGhpcy5jb2xvcnMubGVuZ3RoIC0gMV07XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2xvcnMubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yMSA9IHRoaXMuY29sb3JzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBjb2xvcjIgPSB0aGlzLmNvbG9yc1tpICsgMV07XHJcbiAgICAgICAgICAgIGlmICh0ZW1wZXJhdHVyZSA+PSBjb2xvcjEudGVtcGVyYXR1cmUgJiYgdGVtcGVyYXR1cmUgPD0gY29sb3IyLnRlbXBlcmF0dXJlKSB7XHJcbiAgICAgICAgICAgICAgIGNvbnN0IHJhdGlvID0gKHRlbXBlcmF0dXJlIC0gY29sb3IxLnRlbXBlcmF0dXJlKSAvIChjb2xvcjIudGVtcGVyYXR1cmUgLSBjb2xvcjEudGVtcGVyYXR1cmUpO1xyXG5cclxuICAgICAgICAgICAgICAgY29uc3QgciA9IGNvbG9yMS5yICsgcmF0aW8gKiAoY29sb3IyLnIgLSBjb2xvcjEucik7XHJcbiAgICAgICAgICAgICAgIGNvbnN0IGcgPSBjb2xvcjEuZyArIHJhdGlvICogKGNvbG9yMi5nIC0gY29sb3IxLmcpO1xyXG4gICAgICAgICAgICAgICBjb25zdCBiID0gY29sb3IxLmIgKyByYXRpbyAqIChjb2xvcjIuYiAtIGNvbG9yMS5iKTtcclxuICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBnbENvbG9yV2l0aFRlbXBlcmF0dXJlKFtyLCBnLCBiXSwgdGVtcGVyYXR1cmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIC8vIHNob3VsZG4ndCBnZXQgaGVyZSwgYnV0IGlmIHdlIGRvLCByZXR1cm4gdGhlIGxhc3QgY29sb3JcclxuICAgICAgICAgcmV0dXJuIHRoaXMuY29sb3JzW3RoaXMuY29sb3JzLmxlbmd0aCAtIDFdO1xyXG4gICAgICB9XHJcbiAgIH1cclxufSIsImltcG9ydCB7IGdsVGV4dHVyZSwgZ2xUZXh0dXJlU3R5bGUgfSBmcm9tICcuL2dsVGV4dHVyZSc7XHJcblxyXG4vKipcclxuICogTGlnaHR3ZWlnaHQgV2ViR0wgd3JhcHBlciBmb3IgYSBmcmFtZWJ1ZmZlclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIGdsRnJhbWVCdWZmZXIge1xyXG5cclxuICAgcHJpdmF0ZSBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0IHwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dDtcclxuICAgcHJpdmF0ZSBmcmFtZUJ1ZmZlcjogV2ViR0xGcmFtZWJ1ZmZlciB8IG51bGw7XHJcbiAgIHB1YmxpYyByZWFkb25seSB3aWR0aDogbnVtYmVyO1xyXG4gICBwdWJsaWMgcmVhZG9ubHkgaGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gICAvKipcclxuICAgICogR2V0cyB0aGUgbGFyZ2VyIG9mIHRoZSB3aWR0aCBvciBoZWlnaHRcclxuICAgICovXHJcbiAgIHB1YmxpYyBnZXQgc2l6ZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gTWF0aC5tYXgodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogQ3JlYXRlIGEgZnJhbWUgYnVmZmVyXHJcbiAgICAqIFxyXG4gICAgKiBAcGFyYW0gZ2xDdHggVGhlIFdlYkdMIGNvbnRleHRcclxuICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCAoaW4gcGl4ZWxzKSBvZiB0aGUgcmVuZGVyaW5nIChtdXN0IGJlIHBvd2VyIG9mIDIpXHJcbiAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCAoaW4gcGl4ZWxzKSBvZiB0aGUgcmVuZGVyaW5nIChtdXN0IGJlIHBvd2VyIG9mIDIpXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgY29uc3RydWN0b3IoXHJcbiAgICAgIGdsQ3R4OiBXZWJHTFJlbmRlcmluZ0NvbnRleHQgfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LFxyXG4gICAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgKSB7XHJcblxyXG4gICAgICB0aGlzLmdsID0gZ2xDdHg7XHJcbiAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcblxyXG4gICAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XHJcbiAgICAgIHRoaXMuZnJhbWVCdWZmZXIgPSBnbC5jcmVhdGVGcmFtZWJ1ZmZlcigpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgICAgY29uc3QgZ2wgPSB0aGlzLmdsO1xyXG5cclxuICAgICAgaWYgKHRoaXMuZnJhbWVCdWZmZXIpIHtcclxuICAgICAgICAgZ2wuZGVsZXRlRnJhbWVidWZmZXIodGhpcy5mcmFtZUJ1ZmZlcik7XHJcbiAgICAgICAgIHRoaXMuZnJhbWVCdWZmZXIgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQoKTogV2ViR0xGcmFtZWJ1ZmZlciB8IG51bGwge1xyXG4gICAgICByZXR1cm4gdGhpcy5mcmFtZUJ1ZmZlcjtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGJpbmQoKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IGdsID0gdGhpcy5nbDtcclxuICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCB0aGlzLmZyYW1lQnVmZmVyKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGNyZWF0ZVRleHR1cmUoc3R5bGU6IGdsVGV4dHVyZVN0eWxlKTogZ2xUZXh0dXJlIHtcclxuICAgICAgcmV0dXJuIG5ldyBnbFRleHR1cmUodGhpcy5nbCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIHN0eWxlKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGF0dGFjaFRleHR1cmUoYXR0YWNobWVudDogbnVtYmVyLCB0ZXh0dXJlOiBXZWJHTFRleHR1cmUgfCBnbFRleHR1cmUpOiB2b2lkIHtcclxuXHJcbiAgICAgIGlmICh0ZXh0dXJlIGluc3RhbmNlb2YgZ2xUZXh0dXJlKSB7XHJcbiAgICAgICAgIHRleHR1cmUgPSB0ZXh0dXJlLmdldCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XHJcbiAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgdGhpcy5mcmFtZUJ1ZmZlcik7XHJcbiAgICAgIGdsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKFxyXG4gICAgICAgICBnbC5GUkFNRUJVRkZFUixcclxuICAgICAgICAgYXR0YWNobWVudCxcclxuICAgICAgICAgZ2wuVEVYVFVSRV8yRCxcclxuICAgICAgICAgdGV4dHVyZSxcclxuICAgICAgICAgMFxyXG4gICAgICApO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY2hlY2soKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IGdsID0gdGhpcy5nbDtcclxuICAgICAgY29uc3Qgc3RhdHVzID0gZ2wuY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhnbC5GUkFNRUJVRkZFUik7XHJcbiAgICAgIGlmIChzdGF0dXMgIT09IGdsLkZSQU1FQlVGRkVSX0NPTVBMRVRFKSB7XHJcbiAgICAgICAgIGNvbnN0IG1zZyA9ICdUaGUgY3JlYXRlZCBmcmFtZSBidWZmZXIgaXMgaW52YWxpZDogJyArIHN0YXR1cy50b1N0cmluZygpO1xyXG4gICAgICAgICBhbGVydChtc2cpO1xyXG4gICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICB9XHJcbiAgIH1cclxufSIsIlxyXG4vKipcclxuICogV3JhcHBlciBmb3IgYSBXZWJHbCBCdWZmZXIgYW5kIEF0dHJpYnV0ZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIGdsSW5kZXhCdWZmZXIge1xyXG4gICBwcml2YXRlIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQgfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0O1xyXG4gICBwcml2YXRlIGJ1ZmZlcjogV2ViR0xCdWZmZXIgfCBudWxsO1xyXG5cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKGdsQ3R4OiBXZWJHTFJlbmRlcmluZ0NvbnRleHQgfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0KSB7XHJcbiAgICAgIHRoaXMuZ2wgPSBnbEN0eDtcclxuICAgICAgY29uc3QgZ2wgPSB0aGlzLmdsO1xyXG5cclxuICAgICAgdGhpcy5idWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZ2wuZGVsZXRlQnVmZmVyKHRoaXMuYnVmZmVyKTtcclxuICAgICAgdGhpcy5idWZmZXIgPSBudWxsO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgdXBsb2FkKHZhbHVlczogbnVtYmVyW10gfCBJbnQzMkFycmF5KTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IGdsID0gdGhpcy5nbDtcclxuICAgICAgdGhpcy5iaW5kKCk7XHJcblxyXG4gICAgICBpZiAodmFsdWVzIGluc3RhbmNlb2YgSW50MzJBcnJheSkge1xyXG4gICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB2YWx1ZXMsIGdsLlNUQVRJQ19EUkFXKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgbmV3IEludDMyQXJyYXkodmFsdWVzKSwgZ2wuU1RBVElDX0RSQVcpO1xyXG4gICAgICB9XHJcblxyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgYmluZCgpOiB2b2lkIHtcclxuICAgICAgY29uc3QgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmJ1ZmZlcik7XHJcbiAgIH1cclxufSIsIi8qKlxyXG4gKiBVdGlsaXR5IHdyYXBwZXIgZm9yIGNvbXBpbGluZyBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBnbFByb2dyYW0ge1xyXG5cclxuICAgcHJpdmF0ZSBnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0IHwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dDtcclxuICAgcHJpdmF0ZSBwcm9ncmFtOiBXZWJHTFByb2dyYW07XHJcblxyXG4gICAvKipcclxuICAgICogQ29tcGlsZXMgYW5kIGxpbmtzIHZlcnRleCBhbmQgZnJhZ21lbnQgc2hhZGVycyBpbnRvIGEgcHJvZ3JhbVxyXG4gICAgKlxyXG4gICAgKiBAcGFyYW0gZ2wgVGhlIFdlYkdMIGNvbnRleHRcclxuICAgICogQHBhcmFtIHZlcnRleFNvdXJjZSBWZXJ0ZXggc2hhZGVyIHNvdXJjZVxyXG4gICAgKiBAcGFyYW0gZnJhZ21lbnRTb3VyY2UgRnJhZ21lbnQgc2hhZGVyIHNvdXJjZVxyXG4gICAgKiBAcmV0dXJucyB0aGUgcHJvZ3JhbSBpZFxyXG4gICAgKiBAdGhyb3dzIGlmIHRoZSBjb21waWxhdGlvbiBmYWlsc1xyXG4gICAgKi9cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQgfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LFxyXG4gICAgICB2ZXJ0ZXhTb3VyY2U6IHN0cmluZyxcclxuICAgICAgZnJhZ21lbnRTb3VyY2U6IHN0cmluZ1xyXG4gICApIHtcclxuICAgICAgdGhpcy5nbCA9IGdsO1xyXG4gICAgICB0aGlzLmNvbXBpbGUodmVydGV4U291cmNlLCBmcmFnbWVudFNvdXJjZSk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBHZXRzIHRoZSB1bmRlcmx5aW5nIFdlYkdMUHJvZ3JhbVxyXG4gICAgKiBcclxuICAgICogQHJldHVybiB0aGUgV2ViR0xQcm9ncmFtXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgZ2V0KCk6IFdlYkdMUHJvZ3JhbSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnByb2dyYW07XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBDYWxscyB1c2VQcm9ncmFtKCkgZm9yIHRoaXMgcHJvZ3JhbVxyXG4gICAgKi9cclxuICAgcHVibGljIHVzZSgpOiB2b2lkIHtcclxuICAgICAgY29uc3QgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICBnbC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBDb21waWxlcyBhIHNoYWRlciBwcm9ncmFtXHJcbiAgICAqXHJcbiAgICAqIEBwYXJhbSBnbCBUaGUgV2ViR0wgY29udGV4dCBcclxuICAgICogQHBhcmFtIHNvdXJjZSBUaGUgc291cmNlIGNvZGVcclxuICAgICogQHBhcmFtIHR5cGUgVGhlIHNoYWRlciB0eXBlXHJcbiAgICAqIEB0aHJvd3MgaWYgdGhlIGNvbXBpbGF0aW9uIGZhaWxzXHJcbiAgICAqL1xyXG4gICBwcml2YXRlIGNvbXBpbGVTaGFkZXIoXHJcbiAgICAgIHNvdXJjZTogc3RyaW5nLFxyXG4gICAgICB0eXBlOiBudW1iZXJcclxuICAgKSB7XHJcbiAgICAgIGNvbnN0IGdsID0gdGhpcy5nbDtcclxuXHJcbiAgICAgIGNvbnN0IHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcih0eXBlKTtcclxuICAgICAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc291cmNlKTtcclxuICAgICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xyXG4gICAgICBpZiAoIWdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKSkge1xyXG4gICAgICAgICBjb25zb2xlLmxvZyhzb3VyY2UpO1xyXG4gICAgICAgICBjb25zdCBlcnIgPSBnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcik7XHJcbiAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgdGhyb3cgJ2NvbXBpbGUgZXJyb3I6ICcgKyBlcnI7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNoYWRlcjtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IGdsID0gdGhpcy5nbDtcclxuICAgICAgZ2wuZGVsZXRlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xyXG4gICAgICB0aGlzLnByb2dyYW0gPSBudWxsO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogQ29tcGlsZXMgYW5kIGxpbmtzIHZlcnRleCBhbmQgZnJhZ21lbnQgc2hhZGVycyBpbnRvIGEgcHJvZ3JhbVxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIHZlcnRleFNvdXJjZSBWZXJ0ZXggc2hhZGVyIHNvdXJjZVxyXG4gICAgKiBAcGFyYW0gZnJhZ21lbnRTb3VyY2UgRnJhZ21lbnQgc2hhZGVyIHNvdXJjZVxyXG4gICAgKiBAcmV0dXJucyB0aGUgcHJvZ3JhbSBpZFxyXG4gICAgKiBAdGhyb3dzIGlmIHRoZSBjb21waWxhdGlvbiBmYWlsc1xyXG4gICAgKi9cclxuICAgcHJpdmF0ZSBjb21waWxlKFxyXG4gICAgICB2ZXJ0ZXhTb3VyY2U6IHN0cmluZyxcclxuICAgICAgZnJhZ21lbnRTb3VyY2U6IHN0cmluZ1xyXG4gICApIHtcclxuXHJcbiAgICAgIGNvbnN0IGdsID0gdGhpcy5nbDtcclxuICAgICAgdGhpcy5wcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xyXG4gICAgICBnbC5hdHRhY2hTaGFkZXIodGhpcy5wcm9ncmFtLCB0aGlzLmNvbXBpbGVTaGFkZXIodmVydGV4U291cmNlLCBnbC5WRVJURVhfU0hBREVSKSk7XHJcbiAgICAgIGdsLmF0dGFjaFNoYWRlcih0aGlzLnByb2dyYW0sIHRoaXMuY29tcGlsZVNoYWRlcihmcmFnbWVudFNvdXJjZSwgZ2wuRlJBR01FTlRfU0hBREVSKSk7XHJcbiAgICAgIGdsLmxpbmtQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XHJcbiAgICAgIGlmICghZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcih0aGlzLnByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSkge1xyXG4gICAgICAgICBjb25zdCBlcnIgPSBnbC5nZXRQcm9ncmFtSW5mb0xvZyh0aGlzLnByb2dyYW0pO1xyXG4gICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgIHRocm93ICdsaW5rIGVycm9yOiAnICsgZXJyO1xyXG4gICAgICB9XHJcbiAgIH1cclxufSIsImltcG9ydCB7IFZlYzMgfSBmcm9tICcuLi9VdGlsM0QvVmVjJztcclxuXHJcbi8qKlxyXG4gKiBVdGlsaXR5IGZvciBob2xkaW5nIGEgY2xpcCBzcGFjZS4gQ2FuIGJlIHVzZWQgdG8gaG9sZCB0aGUgdmlld2luZyBzcGFjZVxyXG4gKiBvciBjbGlwIHNwYWNlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIGdsU3BhY2Uge1xyXG4gICBwdWJsaWMgbWluOiBWZWMzO1xyXG4gICBwdWJsaWMgbWF4OiBWZWMzO1xyXG5cclxuICAgcHVibGljIGdldCBsZWZ0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLm1pbi54O1xyXG4gICB9XHJcbiAgIHB1YmxpYyBnZXQgcmlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMubWF4Lng7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgdG9wKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLm1heC55O1xyXG4gICB9XHJcbiAgIHB1YmxpYyBnZXQgYm90dG9tKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLm1pbi55O1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0IG5lYXIoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMubWluLno7XHJcbiAgIH1cclxuICAgcHVibGljIGdldCBmYXIoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMubWF4Lno7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBnZXQgd2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIE1hdGguYWJzKHRoaXMubWF4LnggLSB0aGlzLm1pbi54KTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBoZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIE1hdGguYWJzKHRoaXMubWF4LnkgLSB0aGlzLm1pbi55KTtcclxuICAgfVxyXG5cclxuICAgcHVibGljIGdldCBkZXB0aCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gTWF0aC5hYnModGhpcy5tYXgueiAtIHRoaXMubWluLnopO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgY29uc3RydWN0b3IobWluOiBWZWMzLCBtYXg6IFZlYzMpIHtcclxuICAgICAgdGhpcy5taW4gPSBtaW47XHJcbiAgICAgIHRoaXMubWF4ID0gbWF4O1xyXG4gICB9XHJcbn0iLCJleHBvcnQgZW51bSBnbFRleHR1cmVTdHlsZSB7XHJcbiAgIENvbG9yLFxyXG4gICBEZXB0aCxcclxuICAgRmxvYXRcclxufVxyXG5cclxuLyoqXHJcbiAqIExpZ2h0d2VpZ2h0IFdlYkdMIHdyYXBwZXIgZm9yIGEgdGV4dHVyZVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIGdsVGV4dHVyZSB7XHJcblxyXG4gICBwcml2YXRlIGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQgfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0O1xyXG4gICBwdWJsaWMgdGV4dHVyZTogV2ViR0xUZXh0dXJlIHwgdW5kZWZpbmVkO1xyXG4gICBwdWJsaWMgcmVhZG9ubHkgd2lkdGg6IG51bWJlcjtcclxuICAgcHVibGljIHJlYWRvbmx5IGhlaWdodDogbnVtYmVyO1xyXG5cclxuICAgLyoqXHJcbiAgICAqIENyZWF0ZSBhIGZyYW1lIGJ1ZmZlciBmb3IgcmVuZGVyaW5nIGludG8gdGV4dHVyZSBvYmplY3RzLlxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIGdsQ3R4IFRoZSBXZWJHTCBjb250ZXh0XHJcbiAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggKGluIHBpeGVscykgb2YgdGhlIHJlbmRlcmluZyAobXVzdCBiZSBwb3dlciBvZiAyKVxyXG4gICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgKGluIHBpeGVscykgb2YgdGhlIHJlbmRlcmluZyAobXVzdCBiZSBwb3dlciBvZiAyKVxyXG4gICAgKi9cclxuICAgcHVibGljIGNvbnN0cnVjdG9yKFxyXG4gICAgICBnbEN0eDogV2ViR0xSZW5kZXJpbmdDb250ZXh0IHwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dCxcclxuICAgICAgd2lkdGg6IG51bWJlcixcclxuICAgICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICAgIHN0eWxlOiBnbFRleHR1cmVTdHlsZVxyXG4gICApIHtcclxuXHJcbiAgICAgIHRoaXMuZ2wgPSBnbEN0eDtcclxuICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcclxuXHJcbiAgICAgIHN3aXRjaCAoc3R5bGUpIHtcclxuICAgICAgICAgY2FzZSBnbFRleHR1cmVTdHlsZS5Db2xvcjpcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVDb2xvcih3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICBjYXNlIGdsVGV4dHVyZVN0eWxlLkRlcHRoOlxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZURlcHRoKHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgIGNhc2UgZ2xUZXh0dXJlU3R5bGUuRmxvYXQ6XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRmxvYXQod2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XHJcblxyXG4gICAgICBpZiAodGhpcy50ZXh0dXJlKSB7XHJcbiAgICAgICAgIGdsLmRlbGV0ZVRleHR1cmUodGhpcy50ZXh0dXJlKTtcclxuICAgICAgICAgdGhpcy50ZXh0dXJlID0gbnVsbDtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwcml2YXRlIGNyZWF0ZUNvbG9yKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XHJcblxyXG4gICAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XHJcblxyXG4gICAgICB0aGlzLnRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XHJcbiAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMudGV4dHVyZSk7XHJcblxyXG4gICAgICBnbC50ZXhJbWFnZTJEKFxyXG4gICAgICAgICBnbC5URVhUVVJFXzJELCAgICAgICAgICAvLyB0YXJnZXRcclxuICAgICAgICAgMCwgICAgICAgICAgICAgICAgICAgICAgLy8gbGV2ZWxcclxuICAgICAgICAgZ2wuUkdCQSwgICAgICAgICAgICAgICAgLy8gaW50ZXJuYWwgZm9ybWF0XHJcbiAgICAgICAgIHdpZHRoLCAgICAgICAgICAgICAgICAgIC8vIHdpZHRoXHJcbiAgICAgICAgIGhlaWdodCwgICAgICAgICAgICAgICAgIC8vIGhlaWdodFxyXG4gICAgICAgICAwLCAgICAgICAgICAgICAgICAgICAgICAvLyBib3JkZXJcclxuICAgICAgICAgZ2wuUkdCQSwgICAgICAgICAgICAgICAgLy8gZm9ybWF0XHJcbiAgICAgICAgIGdsLlVOU0lHTkVEX0JZVEUsICAgICAgIC8vIHR5cGVcclxuICAgICAgICAgbnVsbCAgICAgICAgICAgICAgICAgICAgLy8gcGl4ZWxzXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKTtcclxuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLkxJTkVBUik7XHJcbiAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLkNMQU1QX1RPX0VER0UpO1xyXG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcclxuICAgfVxyXG5cclxuICAgcHJpdmF0ZSBjcmVhdGVEZXB0aCh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xyXG4gICAgICBjb25zdCBnbCA9IHRoaXMuZ2w7XHJcblxyXG4gICAgICBjb25zdCBkZXB0aF90ZXh0dXJlX2V4dGVuc2lvbiA9IGdsLmdldEV4dGVuc2lvbignV0VCR0xfZGVwdGhfdGV4dHVyZScpO1xyXG4gICAgICBpZiAoIWRlcHRoX3RleHR1cmVfZXh0ZW5zaW9uKSB7XHJcbiAgICAgICAgIGFsZXJ0KCdUaGlzIFdlYkdMIHByb2dyYW0gcmVxdWlyZXMgdGhlIHVzZSBvZiB0aGUgV0VCR0xfZGVwdGhfdGV4dHVyZSBleHRlbnNpb24uJyk7XHJcbiAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy50ZXh0dXJlID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xyXG4gICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLnRleHR1cmUpO1xyXG5cclxuICAgICAgZ2wudGV4SW1hZ2UyRChcclxuICAgICAgICAgZ2wuVEVYVFVSRV8yRCwgICAgICAgICAgLy8gdGFyZ2V0XHJcbiAgICAgICAgIDAsICAgICAgICAgICAgICAgICAgICAgIC8vIGxldmVsXHJcbiAgICAgICAgIGdsLkRFUFRIX0NPTVBPTkVOVCwgICAgIC8vIGludGVybmFsIGZvcm1hdFxyXG4gICAgICAgICB3aWR0aCwgICAgICAgICAgICAgICAgICAvLyB3aWR0aFxyXG4gICAgICAgICBoZWlnaHQsICAgICAgICAgICAgICAgICAvLyBoZWlnaHRcclxuICAgICAgICAgMCwgICAgICAgICAgICAgICAgICAgICAgLy8gYm9yZGVyXHJcbiAgICAgICAgIGdsLkRFUFRIX0NPTVBPTkVOVCwgICAgIC8vIGZvcm1hdFxyXG4gICAgICAgICBnbC5VTlNJR05FRF9JTlQsICAgICAgICAvLyB0eXBlXHJcbiAgICAgICAgIG51bGwgICAgICAgICAgICAgICAgICAgIC8vIHBpeGVsc1xyXG4gICAgICApO1xyXG5cclxuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLkxJTkVBUik7XHJcbiAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5MSU5FQVIpO1xyXG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcclxuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSk7XHJcbiAgIH1cclxuXHJcbiAgIHByaXZhdGUgY3JlYXRlRmxvYXQod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcclxuICAgICAgY29uc3QgZ2wgPSB0aGlzLmdsO1xyXG5cclxuICAgICAgbGV0IGludGVybmFsRm9ybWF0OiBudW1iZXI7XHJcbiAgICAgIGxldCBmb3JtYXQ6IG51bWJlcjtcclxuICAgICAgbGV0IHR5cGU6IG51bWJlcjtcclxuXHJcbiAgICAgIC8vIGNyZWF0ZSB0ZXh0dXJlc1xyXG4gICAgICBpZiAoZ2wgaW5zdGFuY2VvZiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpIHtcclxuICAgICAgICAgY29uc3QgZXh0ID0gZ2wuZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0Jyk7XHJcbiAgICAgICAgIGlmIChleHQpIHtcclxuICAgICAgICAgICAgLy8gVGhhbmtzIEFwcGxlLiBBbHdheXMgZ290IHRvIGRvIHRoaW5ncyBhIGxpdHRsZSBkaWZmZXJlbnRseVxyXG4gICAgICAgICAgICBpbnRlcm5hbEZvcm1hdCA9IGdsLlJHQkE7XHJcbiAgICAgICAgICAgIGZvcm1hdCA9IGdsLlJHQkE7XHJcbiAgICAgICAgICAgIHR5cGUgPSBleHQuSEFMRl9GTE9BVF9PRVM7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIE5vIGZsb2F0aW5nIHBvaW50IHRleHR1cmVzPyByZWFsbHkgZmFsbCBiYWNrIHRvIHVuc2lnbmVkIGJ5dGVzXHJcbiAgICAgICAgICAgIGludGVybmFsRm9ybWF0ID0gZ2wuUkdCQTtcclxuICAgICAgICAgICAgZm9ybWF0ID0gZ2wuUkdCQTtcclxuICAgICAgICAgICAgdHlwZSA9IGdsLlVOU0lHTkVEX0JZVEU7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVHlwZXNjcmlwdCBkb2Vzbid0IGxldCB5b3UgZG8gYW4gJ2Vsc2UgaWYnIGhlcmUgYW5kIHdoZW4gV2ViR0wyIGlzXHJcbiAgICAgIC8vIG5vdCBzdXBwb3J0ZWQsIHdlIGdldCBhbiBleGNlcHRpb24sIHNvIHRodXMgdGhlIHRyeS1jYXRjaFxyXG4gICAgICAvLyBzZWU6IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQ1MzgxMTIyL3R5cGVzY3JpcHQtdHlwZS1uYXJyb3dlZC10by1uZXZlci13aXRoLWluc3RhbmNlb2YtaW4tYW4taWYtZWxzZS1zdGF0ZW1lbnRcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAgaWYgKGdsIGluc3RhbmNlb2YgV2ViR0wyUmVuZGVyaW5nQ29udGV4dCkge1xyXG4gICAgICAgICAgICBnbC5nZXRFeHRlbnNpb24oJ0VYVF9jb2xvcl9idWZmZXJfZmxvYXQnKTtcclxuICAgICAgICAgICAgaW50ZXJuYWxGb3JtYXQgPSBnbC5SR0JBMzJGO1xyXG4gICAgICAgICAgICBmb3JtYXQgPSBnbC5SR0JBO1xyXG4gICAgICAgICAgICB0eXBlID0gZ2wuRkxPQVRcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBjcmVhdGUgdHdvIHRleHR1cmVzLiBPbmUgd2UgZGlzcGxheSBhbmQgb25lIHdlIGRyYXcgdG9cclxuICAgICAgdGhpcy50ZXh0dXJlID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xyXG4gICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLnRleHR1cmUpO1xyXG5cclxuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpO1xyXG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XHJcblxyXG4gICAgICBnbC50ZXhJbWFnZTJEKFxyXG4gICAgICAgICBnbC5URVhUVVJFXzJELCAgICAgICAgICAvLyB0YXJnZXRcclxuICAgICAgICAgMCwgICAgICAgICAgICAgICAgICAgICAgLy8gbGV2ZWxcclxuICAgICAgICAgaW50ZXJuYWxGb3JtYXQsICAgICAgICAgLy8gaW50ZXJuYWwgZm9ybWF0XHJcbiAgICAgICAgIHdpZHRoLCAgICAgICAgICAgICAgICAgIC8vIHdpZHRoXHJcbiAgICAgICAgIGhlaWdodCwgICAgICAgICAgICAgICAgIC8vIGhlaWdodFxyXG4gICAgICAgICAwLCAgICAgICAgICAgICAgICAgICAgICAvLyBib3JkZXJcclxuICAgICAgICAgZm9ybWF0LCAgICAgICAgICAgICAgICAgLy8gZm9ybWF0XHJcbiAgICAgICAgIHR5cGUsICAgICAgICAgICAgICAgICAgIC8vIHR5cGVcclxuICAgICAgICAgbnVsbCAgICAgICAgICAgICAgICAgICAgLy8gcGl4ZWxzXHJcbiAgICAgICk7XHJcbiAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIG51bGwpO1xyXG4gICB9XHJcblxyXG4gICBwdWJsaWMgZ2V0KCk6IFdlYkdMVGV4dHVyZSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnRleHR1cmU7XHJcbiAgIH1cclxuXHJcbiAgIHB1YmxpYyBiaW5kKCkge1xyXG4gICAgICBsZXQgZ2wgPSB0aGlzLmdsO1xyXG4gICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLnRleHR1cmUpO1xyXG4gICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgZ2xQcm9ncmFtIH0gZnJvbSAnLi9nbFByb2dyYW0nO1xyXG5pbXBvcnQgeyBWZWMzIH0gZnJvbSAnLi4vVXRpbDNEL1ZlYyc7XHJcbmltcG9ydCB7IGdsQ29sb3IzLCBnbENvbG9yNCB9IGZyb20gJy4vZ2xDb2xvcic7XHJcbmltcG9ydCB7IE1hdDQgfSBmcm9tICcuLi9VdGlsM0QvTWF0JztcclxuXHJcbi8qKlxyXG4gKiBVdGlsaXR5IGNsYXNzIGZvciBzZXR0aW5nIHVuaWZvcm0gdmFsdWVzIGluIGEgc2hhZGVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgZ2xVbmlmb3JtIHtcclxuXHJcbiAgIHByaXZhdGUgZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBudWxsO1xyXG5cclxuICAgLy8gdGhlIFdlYkdMIHNoYWRlciBwcm9ncmFtXHJcbiAgIHByaXZhdGUgcHJvZ3JhbTogV2ViR0xQcm9ncmFtO1xyXG5cclxuICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGZvciBzZXR0aW5nIHZhbHVlcyBhbmQgY2FsbHMgZ2wudXNlUHJvZ3JhbVxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIGdsQ3R4IFRoZSBXZWJHTCBjb250ZXh0XHJcbiAgICAqIEBwYXJhbSBwcm9ncmFtIFRoZSBwcm9ncmFtIGFzc29jaWF0ZWQgd2l0aCB0aGUgdW5pZm9ybSB2YWx1ZXNcclxuICAgICovXHJcbiAgIHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuICAgICAgZ2xDdHg6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQsXHJcbiAgICAgIHByb2dyYW06IFdlYkdMUHJvZ3JhbSB8IGdsUHJvZ3JhbVxyXG4gICApIHtcclxuICAgICAgdGhpcy5nbCA9IGdsQ3R4O1xyXG4gICAgICBsZXQgZ2wgPSB0aGlzLmdsO1xyXG5cclxuICAgICAgaWYgKHByb2dyYW0gaW5zdGFuY2VvZiBnbFByb2dyYW0pIHtcclxuICAgICAgICAgcHJvZ3JhbSA9IHByb2dyYW0uZ2V0KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07XHJcbiAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBTZXRzIGEgdW5pZm9ybSB2YWx1ZVxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIG5hbWUgVGhlIHZhcmlhYmxlIG5hbWVcclxuICAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZVxyXG4gICAgKiBAcGFyYW0gaW50IElmIHRydWUgYW5kIHRoZSB2YWx1ZSBpcyBhIG51bWJlciwgaXQgaXMgdHJlYXRlZCBhcyBhbiBpbnRlZ2VyXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc2V0KFxyXG4gICAgICBuYW1lOiBzdHJpbmcsXHJcbiAgICAgIHZhbHVlOiBib29sZWFuIHwgbnVtYmVyIHwgVmVjMyB8IGdsQ29sb3IzIHwgZ2xDb2xvcjQgfCBNYXQ0LFxyXG4gICAgICBpbnQgPSBmYWxzZVxyXG4gICApOiB2b2lkIHtcclxuXHJcbiAgICAgIGNvbnN0IGdsID0gdGhpcy5nbDtcclxuXHJcbiAgICAgIGNvbnN0IGxvYyA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sIG5hbWUpO1xyXG4gICAgICBpZiAobG9jKSB7XHJcbiAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFZlYzMpIHtcclxuICAgICAgICAgICAgZ2wudW5pZm9ybTNmdihsb2MsIG5ldyBGbG9hdDMyQXJyYXkodmFsdWUudmFsdWVzKSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBnbENvbG9yMykge1xyXG4gICAgICAgICAgICBnbC51bmlmb3JtM2Z2KGxvYywgbmV3IEZsb2F0MzJBcnJheShbdmFsdWUuciwgdmFsdWUuZywgdmFsdWUuYl0pKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIGdsQ29sb3I0KSB7XHJcbiAgICAgICAgICAgIGdsLnVuaWZvcm00ZnYobG9jLCBuZXcgRmxvYXQzMkFycmF5KFt2YWx1ZS5yLCB2YWx1ZS5nLCB2YWx1ZS5iLCB2YWx1ZS5hXSkpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgTWF0NCkge1xyXG4gICAgICAgICAgICBnbC51bmlmb3JtTWF0cml4NGZ2KGxvYywgZmFsc2UsIG5ldyBGbG9hdDMyQXJyYXkodmFsdWUudHJhbnNwb3NlKCkudmFsdWVzKSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSBpZiAodHlwZW9mICh2YWx1ZSkgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICBnbC51bmlmb3JtMWkobG9jLCB2YWx1ZSA/IDEuMCA6IDAuMCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSBpZiAobmFtZSA9PT0gJ3VNb2RlJykge1xyXG4gICAgICAgICAgICBnbC51bmlmb3JtMWkobG9jLCB2YWx1ZSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChpbnQpIHtcclxuICAgICAgICAgICAgICAgZ2wudW5pZm9ybTFpKGxvYywgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICBnbC51bmlmb3JtMWYobG9jLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBTZXRzIGFuIGludGVnZXIgdW5pZm9ybSB2YWx1ZSAoc2FtZSBhcyBzZXQobmFtZSwgdmFsdWUsIHRydWUpKVxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIG5hbWUgVGhlIHZhcmlhYmxlIG5hbWVcclxuICAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZVxyXG4gICAgKi9cclxuICAgcHVibGljIHNldGkobmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2V0KG5hbWUsIHZhbHVlLCB0cnVlKTtcclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFNldHMgYWxsIHZhbHVlcyBmb3IgdmFyaWFibGVzIHN0b3JlZCBhcyBtZW1iZXJzIG9mIGFuIG9iamVjdFxyXG4gICAgKiBcclxuICAgICogQHBhcmFtIHVuaWZvcm1zIFRoZSBvYmplY3Qgd2l0aCBtZW1iZXIgdmFsdWVzXHJcbiAgICAqL1xyXG4gICBwdWJsaWMgc2V0QWxsKHVuaWZvcm1zOiBhbnkpOiB2b2lkIHtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgbmFtZSBpbiB1bmlmb3Jtcykge1xyXG4gICAgICAgICBjb25zdCB2YWx1ZSA9IHVuaWZvcm1zW25hbWVdO1xyXG4gICAgICAgICB0aGlzLnNldChuYW1lLCB2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgfVxyXG59IiwiaW1wb3J0IHsgZ2xQcm9ncmFtIH0gZnJvbSAnLi9nbFByb2dyYW0nO1xyXG5cclxuZXhwb3J0IGNsYXNzIGdsVW5pZm9ybUJsb2NrIHtcclxuICAgcHJpdmF0ZSBnbDI6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XHJcbiAgIHByaXZhdGUgYmxvY2tMb2NhdGlvbjogbnVtYmVyO1xyXG4gICBwcml2YXRlIGJsb2NrQnVmZmVyOiBXZWJHTEJ1ZmZlcjtcclxuXHJcbiAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICBnbEN0eDogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCxcclxuICAgICAgcHJvZ3JhbTogV2ViR0xQcm9ncmFtIHwgZ2xQcm9ncmFtLFxyXG4gICAgICBibG9ja05hbWU6IHN0cmluZyxcclxuICAgICAgYmxvY2tCaW5kaW5nOiBudW1iZXJcclxuICAgKSB7XHJcblxyXG4gICAgICB0aGlzLmdsMiA9IGdsQ3R4O1xyXG4gICAgICBjb25zdCBnbDIgPSB0aGlzLmdsMjtcclxuXHJcbiAgICAgIGlmIChwcm9ncmFtIGluc3RhbmNlb2YgZ2xQcm9ncmFtKSB7XHJcbiAgICAgICAgIHByb2dyYW0gPSBwcm9ncmFtLmdldCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmJsb2NrTG9jYXRpb24gPSBnbDIuZ2V0VW5pZm9ybUJsb2NrSW5kZXgocHJvZ3JhbSwgYmxvY2tOYW1lKTtcclxuICAgICAgZ2wyLnVuaWZvcm1CbG9ja0JpbmRpbmcocHJvZ3JhbSwgdGhpcy5ibG9ja0xvY2F0aW9uLCBibG9ja0JpbmRpbmcpO1xyXG5cclxuICAgICAgdGhpcy5ibG9ja0J1ZmZlciA9IGdsMi5jcmVhdGVCdWZmZXIoKTtcclxuICAgICAgZ2wyLmJpbmRCdWZmZXJCYXNlKGdsMi5VTklGT1JNX0JVRkZFUiwgYmxvY2tCaW5kaW5nLCB0aGlzLmJsb2NrQnVmZmVyKTtcclxuICAgfVxyXG5cclxuICAgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgICAgY29uc3QgZ2wyID0gdGhpcy5nbDI7XHJcbiAgICAgIGdsMi5kZWxldGVCdWZmZXIodGhpcy5ibG9ja0J1ZmZlcik7XHJcbiAgIH1cclxuXHJcbiAgIHVwbG9hZChkYXRhOiBGbG9hdDMyQXJyYXkgfCBJbnQzMkFycmF5KTogdm9pZCB7XHJcblxyXG4gICAgICBjb25zdCBnbDIgPSB0aGlzLmdsMjtcclxuICAgICAgZ2wyLmJpbmRCdWZmZXIoZ2wyLlVOSUZPUk1fQlVGRkVSLCB0aGlzLmJsb2NrQnVmZmVyKTtcclxuICAgICAgZ2wyLmJ1ZmZlckRhdGEoZ2wyLlVOSUZPUk1fQlVGRkVSLCBkYXRhLCBnbDIuU1RBVElDX0RSQVcpO1xyXG4gICAgICBnbDIuYmluZEJ1ZmZlcihnbDIuVU5JRk9STV9CVUZGRVIsIG51bGwpO1xyXG4gICB9XHJcbn0iLCJpbXBvcnQgJy4vc3R5bGVzL3N0eWxlcy5jc3MnO1xyXG5pbXBvcnQgeyBMYXVuY2hlciB9IGZyb20gJy4vTGF1bmNoZXInO1xyXG5cclxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgIGxldCBhcHAgPSBuZXcgTGF1bmNoZXIoKTtcclxufVxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgXCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxyXFxudmFyeWluZyB2ZWMyIHRleENvb3JkO1xcclxcbnVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xcclxcbnVuaWZvcm0gaW50IHVNb2RlO1xcclxcbnVuaWZvcm0gZmxvYXQgdU1heENocm9tYTtcXHJcXG5cXHJcXG51bmlmb3JtIHZlYzMgdUhpZ2hsaWdodENvbG9yO1xcclxcbnVuaWZvcm0gdmVjMyB1TGlnaHRMaWdodENvbG9yO1xcclxcbnVuaWZvcm0gdmVjMyB1TWlkTGlnaHRDb2xvcjtcXHJcXG51bmlmb3JtIHZlYzMgdURhcmtMaWdodENvbG9yO1xcclxcblxcclxcbnVuaWZvcm0gdmVjMyB1U2hhZG93Q29sb3I7XFxyXFxudW5pZm9ybSB2ZWMzIHVSZWZsZWN0ZWRMaWdodENvbG9yO1xcclxcbnVuaWZvcm0gdmVjMyB1RGFya0FjY2VudENvbG9yO1xcclxcblxcclxcbnVuaWZvcm0gZmxvYXQgdVNoYWRvd0FscGhhO1xcclxcbnVuaWZvcm0gZmxvYXQgdUxpZ2h0QWxwaGE7XFxyXFxuXFxyXFxuI2RlZmluZSBNT0RFX1NDSUVOQ0UgMFxcclxcbiNkZWZpbmUgTU9ERV9WQUxVRSAxXFxyXFxuI2RlZmluZSBNT0RFX0NIUk9NQSAyXFxyXFxuI2RlZmluZSBNT0RFX0JBTkRTIDNcXHJcXG5cXHJcXG52ZWM0IHdoaXRlID0gdmVjNCgxLjAsIDEuMCwgMS4wLCAxLjApO1xcclxcbnZlYzQgcmVkID0gdmVjNCgxLjAsIDAuMCwgMC4wLCAxLjApO1xcclxcbnZlYzQgb3JhbmdlID0gdmVjNCgxLjAsIDAuNjUsIDAuMCwgMS4wKTtcXHJcXG52ZWM0IHllbGxvdyA9IHZlYzQoMS4wLCAxLjAsIDAuMCwgMS4wKTtcXHJcXG52ZWM0IGdyZWVuID0gdmVjNCgwLjAsIDEuMCwgMC4wLCAxLjApO1xcclxcbnZlYzQgY3lhbiA9IHZlYzQoMC4wLCAxLjAsIDEuMCwgMS4wKTtcXHJcXG52ZWM0IGJsdWUgPSB2ZWM0KDAuMCwgMC4wLCAxLjAsIDEuMCk7XFxyXFxudmVjNCBibGFjayA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcXHJcXG4jZGVmaW5lIE5VTV9DT0xPUlMgNlxcclxcbnZlYzQgY29sb3JzW05VTV9DT0xPUlNdO1xcclxcblxcclxcbnZlYzQgdmFsdWUyQ29sb3IoZmxvYXQgdmFsdWUpXFxyXFxue1xcclxcbiAgIGZsb2F0IHNwYW4gPSAxLjAgLyBmbG9hdChOVU1fQ09MT1JTIC0gMSk7XFxyXFxuICAgdmFsdWUgKj0gZmxvYXQoTlVNX0NPTE9SUyAtIDEpO1xcclxcbiAgIGlmICh2YWx1ZSA8IDAuMClcXHJcXG4gICB7XFxyXFxuICAgICAgcmV0dXJuIGNvbG9yc1swXTtcXHJcXG4gICB9XFxyXFxuICAgZWxzZSBpZiAodmFsdWUgPCAxLjApXFxyXFxuICAge1xcclxcbiAgICAgIHJldHVybiBjb2xvcnNbMF0gKyB2YWx1ZSAqIChjb2xvcnNbMV0gLSBjb2xvcnNbMF0pO1xcclxcbiAgIH1cXHJcXG4gICBlbHNlIGlmICh2YWx1ZSA8IDIuMClcXHJcXG4gICB7XFxyXFxuICAgICAgcmV0dXJuIGNvbG9yc1sxXSArICh2YWx1ZSAtIDEuMCkgKiAoY29sb3JzWzJdIC0gY29sb3JzWzFdKTtcXHJcXG4gICB9XFxyXFxuICAgZWxzZSBpZiAodmFsdWUgPCAzLjApXFxyXFxuICAge1xcclxcbiAgICAgIHJldHVybiBjb2xvcnNbMl0gKyAodmFsdWUgLSAyLjApICogKGNvbG9yc1szXSAtIGNvbG9yc1syXSk7XFxyXFxuICAgfVxcclxcbiAgIGVsc2UgaWYgKHZhbHVlIDwgNC4wKVxcclxcbiAgIHtcXHJcXG4gICAgICByZXR1cm4gY29sb3JzWzNdICsgKHZhbHVlIC0gMy4wKSAqIChjb2xvcnNbNF0gLSBjb2xvcnNbM10pO1xcclxcbiAgIH1cXHJcXG4gICBlbHNlIGlmICh2YWx1ZSA8IDUuMClcXHJcXG4gICB7XFxyXFxuICAgICAgcmV0dXJuIGNvbG9yc1s0XSArICh2YWx1ZSAtIDQuMCkgKiAoY29sb3JzWzVdIC0gY29sb3JzWzRdKTtcXHJcXG4gICB9XFxyXFxuICAgLypcXHJcXG4gICBlbHNlIGlmICh2YWx1ZSA8IDYuMClcXHJcXG4gICB7XFxyXFxuICAgICAgcmV0dXJuIGNvbG9yc1s1XSArICh2YWx1ZSAtIDUuMCkgKiAoY29sb3JzWzZdIC0gY29sb3JzWzVdKTtcXHJcXG4gICB9XFxyXFxuICAgKi9cXHJcXG4gICBlbHNlXFxyXFxuICAge1xcclxcbiAgICAgIHJldHVybiBjb2xvcnNbTlVNX0NPTE9SUyAtIDFdO1xcclxcbiAgIH1cXHJcXG59XFxyXFxuXFxyXFxuZmxvYXQgdG9HcmF5KHZlYzQgYylcXHJcXG57XFxyXFxuICAgLy8gbG90cyBvZiB3YXlzIHRvIGNvbnZlcnQgUkdCIHRvIGdyYXkgc2NhbGUuXFxyXFxuXFxyXFxuICAgLy8gc2ltcGxlIGF2ZXJhZ2luZyBtZXRob2RcXHJcXG4gICAvLyByZXR1cm4gKGMuciArIGMuZyArIGMuYikgLyAzLjA7XFxyXFxuXFxyXFxuICAgLy8gcmVsYXRpdmUgcGVyY2VwdHVhbCB2YWx1ZXNcXHJcXG4gICAvLyByZXR1cm4gMC4zICogYy5yICsgMC41OSAqIGMuZyArIDAuMTEgKiBjLmI7XFxyXFxuXFxyXFxuICAgLy8gbHVtaW5vc2l0eSBtZWFzdXJlXFxyXFxuICAgZmxvYXQgZ2FtbWEgPSAyLjI7XFxyXFxuICAgZmxvYXQgeSA9IDAuMjEyNiAqIHBvdyhjLnIsIGdhbW1hKSArIDAuNzE1MiAqIHBvdyhjLmcsIGdhbW1hKSArIC4wNzIyICogcG93KGMuYiwgZ2FtbWEpO1xcclxcbiAgIGZsb2F0IGwgPSAxMTYuMCAqIHBvdyh5LCAxLjAgLyAzLjApIC0gMTYuMDtcXHJcXG4gICByZXR1cm4gbCAvIDEwMC4wO1xcclxcbn1cXHJcXG5cXHJcXG52ZWM0IHJlbmRlckFzVmFsdWUoKVxcclxcbntcXHJcXG4gICB2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB0ZXhDb29yZCk7XFxyXFxuICAgZmxvYXQgcmdiID0gdG9HcmF5KGNvbG9yKTtcXHJcXG4gICByZXR1cm4gdmVjNChyZ2IsIHJnYiwgcmdiLCAxLjApO1xcclxcbn1cXHJcXG5cXHJcXG52ZWM0IHJlbmRlckFzQ2hyb21hKClcXHJcXG57XFxyXFxuICAgdmVjNCBjb2xvciA9IHRleHR1cmUyRCh1VGV4dHVyZSwgdGV4Q29vcmQpO1xcclxcblxcclxcbiAgIC8vIHJlbmRlciB0aGUgc2NhbGUgYXMgYSBiYXIgb24gdGhlIGxlZnRcXHJcXG4gICBpZiAodGV4Q29vcmQueCA8IDAuMDMpXFxyXFxuICAge1xcclxcbiAgICAgIHJldHVybiB2YWx1ZTJDb2xvcigodGV4Q29vcmQueSAtIDAuMSkgLyAwLjkpO1xcclxcbiAgIH1cXHJcXG4gICBlbHNlXFxyXFxuICAge1xcclxcbiAgICAgIGlmIChjb2xvci5hID49IHVTaGFkb3dBbHBoYSlcXHJcXG4gICAgICB7XFxyXFxuICAgICAgICAgZmxvYXQgYXZnID0gKGNvbG9yLnIgKyBjb2xvci5nICsgY29sb3IuYikgLyAzLjA7XFxyXFxuICAgICAgICAgZmxvYXQgcmdiID0gKGFicyhhdmcgLSBjb2xvci5yKSArIGFicyhhdmcgLSBjb2xvci5nKSArIGFicyhhdmcgLSBjb2xvci5iKSkgLyAoNC4wIC8gMy4wKTtcXHJcXG4gICAgICAgICByZXR1cm4gdmFsdWUyQ29sb3IocmdiIC8gdU1heENocm9tYSk7XFxyXFxuICAgICAgfVxcclxcbiAgICAgIGVsc2VcXHJcXG4gICAgICB7XFxyXFxuICAgICAgICAgcmV0dXJuIHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcXHJcXG4gICAgICB9XFxyXFxuICAgfVxcclxcbn1cXHJcXG5cXHJcXG5mbG9hdCBkMih2ZWMzIGMxLCB2ZWMzIGMyKVxcclxcbntcXHJcXG4gICAvLyBzdW0gdGhlIHNxdWFyZXMgb2YgdGhlIGRpZmZlcmVuY2VzXFxyXFxuICAgcmV0dXJuIHBvdyhjMS5yIC0gYzIuciwgMi4wKSArIHBvdyhjMS5nIC0gYzIuZywgMi4wKSArIHBvdyhjMS5iIC0gYzIuYiwgMi4wKTtcXHJcXG59XFxyXFxuXFxyXFxudmVjMyBjbG9zZXN0KHZlYzMgY29sb3IsIHZlYzMgbGlnaHQsIHZlYzMgbWlkLCB2ZWMzIGRhcmspXFxyXFxue1xcclxcbiAgIGZsb2F0IGRsaWdodCA9IGQyKGNvbG9yLCBsaWdodCk7XFxyXFxuICAgZmxvYXQgZG1pZCA9IGQyKGNvbG9yLCBtaWQpO1xcclxcbiAgIGZsb2F0IGRkYXJrID0gZDIoY29sb3IsIGRhcmspO1xcclxcblxcclxcbiAgIGZsb2F0IGRtaW4gPSBtaW4oZGxpZ2h0LCBtaW4oZG1pZCwgZGRhcmspKTtcXHJcXG4gICBpZiAoZG1pbiA9PSBkbGlnaHQpXFxyXFxuICAge1xcclxcbiAgICAgIHJldHVybiBsaWdodDtcXHJcXG4gICB9XFxyXFxuICAgZWxzZSBpZiAoZG1pbiA9PSBkbWlkKVxcclxcbiAgIHtcXHJcXG4gICAgICByZXR1cm4gbWlkO1xcclxcbiAgIH1cXHJcXG4gICBlbHNlXFxyXFxuICAge1xcclxcbiAgICAgIHJldHVybiBkYXJrO1xcclxcbiAgIH1cXHJcXG59XFxyXFxuXFxyXFxudmVjNCByZW5kZXJBc0JhbmRzKClcXHJcXG57XFxyXFxuICAgZmxvYXQgc2l6ZSA9IDAuMDc7XFxyXFxuICAgZmxvYXQgbWFyZ2luID0gKDEuMCAtIDYuMCAqIHNpemUpIC8gMi4wO1xcclxcbiAgIGlmICh0ZXhDb29yZC54IDwgc2l6ZSAmJiB0ZXhDb29yZC55ID4gbWFyZ2luICYmIHRleENvb3JkLnkgPCAoMS4wIC0gbWFyZ2luKSlcXHJcXG4gICB7XFxyXFxuICAgICAgaWYgKHRleENvb3JkLnkgPCAobWFyZ2luICsgMS4wICogc2l6ZSkpXFxyXFxuICAgICAge1xcclxcbiAgICAgICAgIHJldHVybiB2ZWM0KHVEYXJrQWNjZW50Q29sb3IsIDEuMCk7XFxyXFxuICAgICAgfVxcclxcbiAgICAgIGVsc2UgaWYgKHRleENvb3JkLnkgPCAobWFyZ2luICsgMi4wICogc2l6ZSkpXFxyXFxuICAgICAge1xcclxcbiAgICAgICAgIHJldHVybiB2ZWM0KHVTaGFkb3dDb2xvciwgMS4wKTtcXHJcXG4gICAgICB9XFxyXFxuICAgICAgZWxzZSBpZiAodGV4Q29vcmQueSA8IChtYXJnaW4gKyAzLjAgKiBzaXplKSlcXHJcXG4gICAgICB7XFxyXFxuICAgICAgICAgcmV0dXJuIHZlYzQodURhcmtMaWdodENvbG9yLCAxLjApO1xcclxcbiAgICAgIH1cXHJcXG4gICAgICBlbHNlIGlmICh0ZXhDb29yZC55IDwgKG1hcmdpbiArIDQuMCAqIHNpemUpKVxcclxcbiAgICAgIHtcXHJcXG4gICAgICAgICByZXR1cm4gdmVjNCh1TWlkTGlnaHRDb2xvciwgMS4wKTtcXHJcXG4gICAgICB9XFxyXFxuICAgICAgZWxzZSBpZiAodGV4Q29vcmQueSA8IChtYXJnaW4gKyA1LjAgKiBzaXplKSlcXHJcXG4gICAgICB7XFxyXFxuICAgICAgICAgcmV0dXJuIHZlYzQodUxpZ2h0TGlnaHRDb2xvciwgMS4wKTtcXHJcXG4gICAgICB9XFxyXFxuICAgICAgZWxzZSAvLyBpZiAodGV4Q29vcmQueSA8IChtYXJnaW4gKyA3LjAgKiBzaXplKSlcXHJcXG4gICAgICB7XFxyXFxuICAgICAgICAgcmV0dXJuIHZlYzQodUhpZ2hsaWdodENvbG9yLCAxLjApO1xcclxcbiAgICAgIH1cXHJcXG4gICB9XFxyXFxuICAgZWxzZVxcclxcbiAgIHtcXHJcXG4gICAgICB2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB0ZXhDb29yZCk7XFxyXFxuXFxyXFxuICAgICAgLy8gZGVmaW5lIHRoZSB0ZXJtaW5hdG9yIGFzIHRoZSBwb2ludCB3aGVyZSB0aGluZ3MgYXJlIDUwJSBpbiBzaGFkb3dcXHJcXG4gICAgICBmbG9hdCB0ZXJtaW5hdG9yID0gKCh1U2hhZG93QWxwaGEgKyB1TGlnaHRBbHBoYSkgLyAyLjApO1xcclxcbiAgICAgIGlmIChjb2xvci5hID4gMS4wICYmIGNvbG9yLmEgPD0gdGVybWluYXRvcilcXHJcXG4gICAgICB7XFxyXFxuICAgICAgICAgdmVjMyBjID0gY2xvc2VzdChjb2xvci5yZ2IsIHVTaGFkb3dDb2xvciwgdVJlZmxlY3RlZExpZ2h0Q29sb3IsIHVEYXJrQWNjZW50Q29sb3IpO1xcclxcbiAgICAgICAgIHJldHVybiB2ZWM0KGMsIDEuMCk7XFxyXFxuICAgICAgfVxcclxcbiAgICAgIGVsc2UgaWYgKGNvbG9yLmEgPiB0ZXJtaW5hdG9yKVxcclxcbiAgICAgIHtcXHJcXG4gICAgICAgICAvLyBvbmx5IHJlbmRlciB0aGUgaGlnaGxpZ2h0IHdoZXJlIGl0J3MgY29udHJpYnV0aW9uIGlzIHNpZ25pZmljYW50LCBpLmUuIGdyZWF0ZXJcXHJcXG4gICAgICAgICAvLyB0aGFuIHNvbWUgdGhyZXNob2xkXFxyXFxuICAgICAgICAgY29uc3QgZmxvYXQgU1BFQ1VMQVJfVEhSRVNIT0xEID0gMC4xO1xcclxcbiAgICAgICAgIGlmIChjb2xvci5hID4gKHVMaWdodEFscGhhICsgU1BFQ1VMQVJfVEhSRVNIT0xEKSlcXHJcXG4gICAgICAgICB7XFxyXFxuICAgICAgICAgICAgcmV0dXJuIHZlYzQodUhpZ2hsaWdodENvbG9yLCAxLjApO1xcclxcbiAgICAgICAgIH1cXHJcXG4gICAgICAgICBlbHNlXFxyXFxuICAgICAgICAge1xcclxcbiAgICAgICAgICAgIHZlYzMgYyA9IGNsb3Nlc3QoY29sb3IucmdiLCB1TGlnaHRMaWdodENvbG9yLCB1TWlkTGlnaHRDb2xvciwgdURhcmtMaWdodENvbG9yKTtcXHJcXG4gICAgICAgICAgICByZXR1cm4gdmVjNChjLCAxLjApO1xcclxcbiAgICAgICAgIH1cXHJcXG4gICAgICB9XFxyXFxuICAgICAgZWxzZVxcclxcbiAgICAgIHtcXHJcXG4gICAgICAgICByZXR1cm4gY29sb3I7XFxyXFxuICAgICAgfVxcclxcbiAgIH1cXHJcXG59XFxyXFxuXFxyXFxudmVjNCByZW5kZXJBc1NjaWVuY2UoKVxcclxcbntcXHJcXG4gICAvLyBqdXN0IHJldHVybiB0aGUgdGV4dHVyZVxcclxcbiAgIHJldHVybiB0ZXh0dXJlMkQodVRleHR1cmUsIHRleENvb3JkKTtcXHJcXG59XFxyXFxuXFxyXFxudm9pZCBtYWluKClcXHJcXG57XFxyXFxuICAgY29sb3JzWzBdID0gYmxhY2s7XFxyXFxuICAgY29sb3JzWzFdID0gYmx1ZTtcXHJcXG4gICBjb2xvcnNbMl0gPSBncmVlbjtcXHJcXG4gICBjb2xvcnNbM10gPSB5ZWxsb3c7XFxyXFxuICAgY29sb3JzWzRdID0gb3JhbmdlO1xcclxcbiAgIGNvbG9yc1s1XSA9IHJlZDtcXHJcXG5cXHJcXG4gICBpZiAodU1vZGUgPT0gTU9ERV9WQUxVRSlcXHJcXG4gICB7XFxyXFxuICAgICAgZ2xfRnJhZ0NvbG9yID0gcmVuZGVyQXNWYWx1ZSgpO1xcclxcbiAgIH1cXHJcXG4gICBlbHNlIGlmICh1TW9kZSA9PSBNT0RFX0NIUk9NQSlcXHJcXG4gICB7XFxyXFxuICAgICAgZ2xfRnJhZ0NvbG9yID0gcmVuZGVyQXNDaHJvbWEoKTtcXHJcXG4gICB9XFxyXFxuICAgZWxzZSBpZiAodU1vZGUgPT0gTU9ERV9CQU5EUylcXHJcXG4gICB7XFxyXFxuICAgICAgZ2xfRnJhZ0NvbG9yID0gcmVuZGVyQXNCYW5kcygpO1xcclxcbiAgIH1cXHJcXG4gICBlbHNlXFxyXFxuICAge1xcclxcbiAgICAgIGdsX0ZyYWdDb2xvciA9IHJlbmRlckFzU2NpZW5jZSgpO1xcclxcbiAgIH1cXHJcXG59XFxyXFxuXCIiLCJleHBvcnQgZGVmYXVsdCBcImF0dHJpYnV0ZSB2ZWMzIHZlcnRleDtcXHJcXG52YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7XFxyXFxudW5pZm9ybSBmbG9hdCB1U2NhbGU7XFxyXFxudW5pZm9ybSBmbG9hdCB1WE9mZnNldDtcXHJcXG51bmlmb3JtIGZsb2F0IHVZT2Zmc2V0O1xcclxcblxcclxcbnZvaWQgbWFpbigpXFxyXFxue1xcclxcbiAgIHRleENvb3JkID0gdmVydGV4Lnh5ICogMC41ICsgMC41O1xcclxcblxcclxcbiAgIGdsX1Bvc2l0aW9uID0gdmVjNCh1U2NhbGUgKiB2ZXJ0ZXgueCArIHVYT2Zmc2V0LCB1U2NhbGUgKiB2ZXJ0ZXgueSArIHVZT2Zmc2V0LCAwLjAsIDEuMCk7XFxyXFxufVxcclxcblwiIiwiZXhwb3J0IGRlZmF1bHQgXCI8VkVSU0lPTj5cXHJcXG5cXHJcXG4jZGVmaW5lIE5PVEhJTkdcXHJcXG5cXHJcXG4jaWZkZWYgVVNFX1RSSUFOR0xFU1xcclxcbiNkZWZpbmUgRVMzMDBcXHJcXG4jZW5kaWZcXHJcXG5cXHJcXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxyXFxuXFxyXFxuI2lmZGVmIEVTMzAwXFxyXFxuaW4gdmVjMyBpbml0aWFsUmF5O1xcclxcbiNlbHNlXFxyXFxudmFyeWluZyB2ZWMzIGluaXRpYWxSYXk7XFxyXFxuI2VuZGlmXFxyXFxuXFxyXFxudW5pZm9ybSB2ZWMzIHVFeWU7XFxyXFxudW5pZm9ybSBmbG9hdCB1VGV4dHVyZVNpemU7XFxyXFxudW5pZm9ybSBmbG9hdCB1UmFuZG9tO1xcclxcbnVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xcclxcbnVuaWZvcm0gdmVjMyB1TGlnaHRQb3M7XFxyXFxudW5pZm9ybSBmbG9hdCB1TGlnaHRJbnRlbnNpdHk7XFxyXFxudW5pZm9ybSB2ZWMzIHVMaWdodENvbG9yO1xcclxcbnVuaWZvcm0gZmxvYXQgdUFtYmllbnRMaWdodEludGVuc2l0eTtcXHJcXG51bmlmb3JtIHZlYzMgdU9iakNvbG9yO1xcclxcbnVuaWZvcm0gZmxvYXQgdUJhbGxSYWRpdXM7XFxyXFxudW5pZm9ybSBmbG9hdCB1U2FtcGxlO1xcclxcbnVuaWZvcm0gZmxvYXQgdUxpZ2h0QWxwaGE7XFxyXFxudW5pZm9ybSBmbG9hdCB1U2hhZG93QWxwaGE7XFxyXFxuXFxyXFxuI2lmZGVmIEVTMzAwXFxyXFxub3V0IHZlYzQgZnJhZ0NvbG9yO1xcclxcbiNlbHNlXFxyXFxuI2RlZmluZSBmcmFnQ29sb3IgZ2xfRnJhZ0NvbG9yXFxyXFxuI2RlZmluZSB0ZXh0dXJlIHRleHR1cmUyRFxcclxcbiNlbmRpZlxcclxcblxcclxcbmNvbnN0IGludCBNQVhfQk9VTkNFUyA9IDEwO1xcclxcbmNvbnN0IGZsb2F0IEVQU0lMT04gPSAwLjAwMDAwMTtcXHJcXG5jb25zdCBmbG9hdCBPRkZTRVQgPSAwLjAwMDE7XFxyXFxuY29uc3QgZmxvYXQgSU5GSU5JVFkgPSAxMDAwMC4wO1xcclxcbmNvbnN0IGZsb2F0IExJR0hUX1NJWkUgPSAwLjE7XFxyXFxuI2RlZmluZSBCQUxMX0NFTlRFUiB2ZWMzKDAsIHVCYWxsUmFkaXVzLCAwKVxcclxcbmNvbnN0IHZlYzMgRE9NRV9DRU5URVIgPSB2ZWMzKDAsIDAsIDApO1xcclxcbmNvbnN0IGZsb2F0IERPTUVfUkFESVVTID0gOC4wO1xcclxcbmNvbnN0IGZsb2F0IFZBTCA9IDAuODtcXHJcXG5jb25zdCB2ZWMzIERPTUVfQ09MT1IgPSB2ZWMzKFZBTCwgVkFMLCBWQUwpO1xcclxcbmNvbnN0IHZlYzMgRkxPT1JfQ09MT1IgPSB2ZWMzKFZBTCwgVkFMLCBWQUwpO1xcclxcbmNvbnN0IHZlYzMgQU1CSUVOVF9DT0xPUiA9IHZlYzMoMS4wLCAxLjAsIDEuMCk7XFxyXFxuY29uc3QgaW50IE5VTV9MSUdIVFMgPSA2O1xcclxcbmNvbnN0IGZsb2F0IEhFSUdIVCA9IDUuMDtcXHJcXG5jb25zdCBmbG9hdCBSQURJVVMgPSA0LjA7XFxyXFxuY29uc3QgZmxvYXQgUEkgPSAzLjE0MTU5MjY1O1xcclxcblxcclxcbnN0cnVjdCBMaWdodFxcclxcbntcXHJcXG4gICBmbG9hdCBpbnRlbnNpdHk7XFxyXFxuICAgZmxvYXQgc2l6ZTtcXHJcXG4gICB2ZWMzIHBvcztcXHJcXG4gICB2ZWMzIGNvbG9yO1xcclxcbn07XFxyXFxuXFxyXFxuIExpZ2h0IExpZ2h0c1tOVU1fTElHSFRTXTtcXHJcXG5cXHJcXG4jaWZkZWYgVVNFX1RSSUFOR0xFU1xcclxcbnN0cnVjdCBUcmlhbmdsZVxcclxcbntcXHJcXG4gICB2ZWMzIHAwO1xcclxcbiAgIHZlYzMgcDE7XFxyXFxuICAgdmVjMyBwMjtcXHJcXG59O1xcclxcblxcclxcbnN0cnVjdCBWb2x1bWVcXHJcXG57XFxyXFxuICAgaW50IHN0YXJ0SW5kZXg7XFxyXFxuICAgaW50IG51bVRyaWFuZ2xlcztcXHJcXG4gICB2ZWMzIGJveE1pbjtcXHJcXG4gICB2ZWMzIGJveE1heDtcXHJcXG59O1xcclxcblxcclxcbi8vIFRoZSBmb2xsb3dpbmcgbGluZSBpcyByZXBsYWNlZCB3aXRoIGNvZGUgZ2VuZXJhdGVkIGluIEphdmFTY3JpcHRcXHJcXG5jb25zdCBpbnQgTlVNX1ZFUlRJQ0VTID0gPE5VTV9WRVJUSUNFUz47XFxyXFxuY29uc3QgaW50IE5VTV9WT0xVTUVTID0gPE5VTV9WT0xVTUVTPjtcXHJcXG5jb25zdCBpbnQgTlVNX1RSSUFOR0xFUyA9IDxOVU1fVFJJQU5HTEVTPjtcXHJcXG5cXHJcXG5sYXlvdXQoc3RkMTQwKSB1bmlmb3JtIE15VmVydGljZXNCbG9jayB7IHZlYzMgdmVydGljZXNbTlVNX1ZFUlRJQ0VTXTsgfTtcXHJcXG5cXHJcXG5zdHJ1Y3QgSVRyaWFuZ2xlXFxyXFxue1xcclxcbiAgIGludCBpMDtcXHJcXG4gICBpbnQgaTE7XFxyXFxuICAgaW50IGkyO1xcclxcbn07XFxyXFxuXFxyXFxubGF5b3V0KHN0ZDE0MCkgdW5pZm9ybSBNeVRyaWFuZ2xlc0Jsb2NrIHsgSVRyaWFuZ2xlIHRyaWFuZ2xlc1tOVU1fVFJJQU5HTEVTXTsgfTtcXHJcXG5UcmlhbmdsZSBnZXRUcmlhbmdsZShpbnQgaW5kZXgpXFxyXFxue1xcclxcbiAgIElUcmlhbmdsZSB0cmkgPSB0cmlhbmdsZXNbaW5kZXhdO1xcclxcbiAgIHZlYzMgcDAgPSB2ZXJ0aWNlc1t0cmkuaTBdO1xcclxcbiAgIHZlYzMgcDEgPSB2ZXJ0aWNlc1t0cmkuaTFdO1xcclxcbiAgIHZlYzMgcDIgPSB2ZXJ0aWNlc1t0cmkuaTJdO1xcclxcbiAgIHJldHVybiBUcmlhbmdsZShwMCwgcDEsIHAyKTtcXHJcXG59XFxyXFxuXFxyXFxuLy8gVGhlIGNlbnRyYWwgb2JqZWN0IGJlaW5nIHJlbmRlcmVkXFxyXFxuc3RydWN0IE9iamVjdFxcclxcbntcXHJcXG4gICBWb2x1bWUgdm9sdW1lc1tOVU1fVk9MVU1FU107XFxyXFxuICAgdmVjMyBib3hNaW47XFxyXFxuICAgdmVjMyBib3hNYXg7XFxyXFxufTtcXHJcXG5cXHJcXG51bmlmb3JtIE9iamVjdCBvYmplY3Q7XFxyXFxuXFxyXFxuYm9vbCBpbnRlcnNlY3RCb3goY29uc3QgdmVjMyBvcmlnaW4sIGNvbnN0IHZlYzMgcmF5LCBjb25zdCB2ZWMzIGJveE1pbiwgY29uc3QgdmVjMyBib3hNYXgpXFxyXFxue1xcclxcbiAgIHZlYzMgcmF5SW52ID0gMS4wIC8gcmF5O1xcclxcbiAgIHZlYzMgdGJvdCA9IHJheUludiAqIChib3hNaW4gLSBvcmlnaW4pO1xcclxcbiAgIHZlYzMgdHRvcCA9IHJheUludiAqIChib3hNYXggLSBvcmlnaW4pO1xcclxcbiAgIHZlYzMgdG1pbiA9IG1pbih0dG9wLCB0Ym90KTtcXHJcXG4gICB2ZWMzIHRtYXggPSBtYXgodHRvcCwgdGJvdCk7XFxyXFxuICAgdmVjMiB0ID0gbWF4KHRtaW4ueHgsIHRtaW4ueXopO1xcclxcbiAgIGZsb2F0IHQwID0gbWF4KHQueCwgdC55KTtcXHJcXG4gICB0ID0gbWluKHRtYXgueHgsIHRtYXgueXopO1xcclxcbiAgIGZsb2F0IHQxID0gbWluKHQueCwgdC55KTtcXHJcXG4gICByZXR1cm4gdDEgPiBtYXgodDAsIDAuMCk7XFxyXFxufVxcclxcblxcclxcbmJvb2wgaW50ZXJzZWN0Vm9sKGNvbnN0IHZlYzMgb3JpZ2luLCBjb25zdCB2ZWMzIHJheSwgVm9sdW1lIHZvbClcXHJcXG57XFxyXFxuICAgaWYgKHZvbC5udW1UcmlhbmdsZXMgPT0gMClcXHJcXG4gICB7XFxyXFxuICAgICAgcmV0dXJuIGZhbHNlO1xcclxcbiAgIH1cXHJcXG5cXHJcXG4gICByZXR1cm4gaW50ZXJzZWN0Qm94KG9yaWdpbiwgcmF5LCB2b2wuYm94TWluLCB2b2wuYm94TWF4KTtcXHJcXG59XFxyXFxuXFxyXFxuYm9vbCBpbnRlcnNlY3RPYmooY29uc3QgdmVjMyBvcmlnaW4sIGNvbnN0IHZlYzMgcmF5LCBPYmplY3Qgb2JqZWN0KVxcclxcbntcXHJcXG4gICByZXR1cm4gaW50ZXJzZWN0Qm94KG9yaWdpbiwgcmF5LCBvYmplY3QuYm94TWluLCBvYmplY3QuYm94TWF4KTtcXHJcXG59XFxyXFxuXFxyXFxuLy8gTcO2bGxlcuKAk1RydW1ib3JlIHJheS10cmlhbmdsZSBpbnRlcnNlY3Rpb24gYWxnb3JpdGhtXFxyXFxuLy8gc291cmNlOiBodHRwOi8vYml0Lmx5LzJNeG5QTUdcXHJcXG5mbG9hdCBpbnRlcnNlY3RUcmlhbmdsZSh2ZWMzIG9yaWdpbiwgdmVjMyByYXksIFRyaWFuZ2xlIHRyaSlcXHJcXG57XFxyXFxuICAgdmVjMyBlZGdlMSwgZWRnZTIsIGgsIHMsIHE7XFxyXFxuICAgZmxvYXQgYSwgZiwgdSwgdjtcXHJcXG4gICBlZGdlMSA9IHRyaS5wMSAtIHRyaS5wMDtcXHJcXG4gICBlZGdlMiA9IHRyaS5wMiAtIHRyaS5wMDtcXHJcXG5cXHJcXG4gICBoID0gY3Jvc3MocmF5LCBlZGdlMik7XFxyXFxuICAgYSA9IGRvdChlZGdlMSwgaCk7XFxyXFxuICAgaWYgKGFicyhhKSA8IEVQU0lMT04pXFxyXFxuICAgICAgcmV0dXJuIElORklOSVRZO1xcclxcblxcclxcbiAgIGYgPSAxLjAgLyBhO1xcclxcbiAgIHMgPSBvcmlnaW4gLSB0cmkucDA7XFxyXFxuICAgdSA9IGYgKiBkb3QocywgaCk7XFxyXFxuICAgaWYgKHUgPCAwLjAgfHwgdSA+IDEuMClcXHJcXG4gICAgICByZXR1cm4gSU5GSU5JVFk7XFxyXFxuXFxyXFxuICAgcSA9IGNyb3NzKHMsIGVkZ2UxKTtcXHJcXG4gICB2ID0gZiAqIGRvdChyYXksIHEpO1xcclxcbiAgIGlmICh2IDwgMC4wIHx8ICh1ICsgdikgPiAxLjApXFxyXFxuICAgICAgcmV0dXJuIElORklOSVRZO1xcclxcblxcclxcbiAgIC8vIEF0IHRoaXMgc3RhZ2Ugd2UgY2FuIGNvbXB1dGUgdCB0byBmaW5kIG91dCB3aGVyZSB0aGUgaW50ZXJzZWN0aW9uIHBvaW50IGlzIG9uIHRoZSBsaW5lLlxcclxcbiAgIGZsb2F0IHQgPSBmICogZG90KGVkZ2UyLCBxKTtcXHJcXG4gICBpZiAodCA8PSBFUFNJTE9OKSAvLyB0aGlzIG1lYW5zIHRoYXQgdGhlcmUgaXMgYSBsaW5lIGludGVyc2VjdGlvbiBidXQgbm90IGEgcmF5IGludGVyc2VjdGlvbi5cXHJcXG4gICAgICByZXR1cm4gSU5GSU5JVFk7XFxyXFxuXFxyXFxuICAgcmV0dXJuIHQ7IC8vIHJheSBpbnRlcnNlY3Rpb25cXHJcXG59XFxyXFxuXFxyXFxudmVjMyBub3JtYWxGb3JUcmlhbmdsZSh2ZWMzIG9yaWdpbiwgdmVjMyBoaXQsIGludCB0SW5kZXgpXFxyXFxue1xcclxcbiAgIFRyaWFuZ2xlIHRyaSA9IGdldFRyaWFuZ2xlKHRJbmRleCk7XFxyXFxuICAgdmVjMyBub3JtYWwgPSBjcm9zcyh0cmkucDEgLSB0cmkucDAsIHRyaS5wMiAtIHRyaS5wMCk7XFxyXFxuICAgbm9ybWFsID0gbm9ybWFsaXplKG5vcm1hbCk7XFxyXFxuICAgaWYgKGRvdChub3JtYWwsIG9yaWdpbiAtIGhpdCkgPiAwLjApXFxyXFxuICAge1xcclxcbiAgICAgIHJldHVybiBub3JtYWw7XFxyXFxuICAgfVxcclxcbiAgIGVsc2VcXHJcXG4gICB7XFxyXFxuICAgICAgcmV0dXJuIC1ub3JtYWw7XFxyXFxuICAgfVxcclxcbn1cXHJcXG4jZW5kaWZcXHJcXG5cXHJcXG5mbG9hdCBpbnRlcnNlY3RTcGhlcmUodmVjMyBvcmlnaW4sIHZlYzMgcmF5LCB2ZWMzIHNwaGVyZUNlbnRlciwgZmxvYXQgc3BoZXJlUmFkaXVzKVxcclxcbntcXHJcXG4gICB2ZWMzIHRvU3BoZXJlID0gb3JpZ2luIC0gc3BoZXJlQ2VudGVyO1xcclxcbiAgIGZsb2F0IGEgPSBkb3QocmF5LCByYXkpO1xcclxcbiAgIGZsb2F0IGIgPSAyLjAgKiBkb3QodG9TcGhlcmUsIHJheSk7XFxyXFxuICAgZmxvYXQgYyA9IGRvdCh0b1NwaGVyZSwgdG9TcGhlcmUpIC0gc3BoZXJlUmFkaXVzICogc3BoZXJlUmFkaXVzO1xcclxcbiAgIGZsb2F0IGRpc2NyaW1pbmFudCA9IGIgKiBiIC0gNC4wICogYSAqIGM7XFxyXFxuICAgaWYgKGRpc2NyaW1pbmFudCA+IDAuMClcXHJcXG4gICB7XFxyXFxuICAgICAgZmxvYXQgdDEgPSAoLWIgLSBzcXJ0KGRpc2NyaW1pbmFudCkpIC8gKDIuMCAqIGEpO1xcclxcbiAgICAgIGZsb2F0IHQyID0gKC1iICsgc3FydChkaXNjcmltaW5hbnQpKSAvICgyLjAgKiBhKTtcXHJcXG4gICAgICBpZiAodDEgPiAwLjApXFxyXFxuICAgICAge1xcclxcbiAgICAgICAgIHJldHVybiB0MTtcXHJcXG4gICAgICB9XFxyXFxuICAgICAgZWxzZSBpZiAodDIgPiAwLjApXFxyXFxuICAgICAge1xcclxcbiAgICAgICAgIHJldHVybiB0MjtcXHJcXG4gICAgICB9XFxyXFxuICAgfVxcclxcbiAgIHJldHVybiBJTkZJTklUWTtcXHJcXG59XFxyXFxuXFxyXFxudmVjMyBub3JtYWxGb3JTcGhlcmUodmVjMyBoaXQsIHZlYzMgc3BoZXJlQ2VudGVyLCBmbG9hdCBzcGhlcmVSYWRpdXMpXFxyXFxue1xcclxcbiAgIHJldHVybiAoaGl0IC0gc3BoZXJlQ2VudGVyKSAvIHNwaGVyZVJhZGl1cztcXHJcXG59XFxyXFxuXFxyXFxuZmxvYXQgcmFuZG9tKHZlYzMgc2NhbGUsIGZsb2F0IHNlZWQpXFxyXFxue1xcclxcbiAgIHJldHVybiBmcmFjdChzaW4oZG90KGdsX0ZyYWdDb29yZC54eXogKyBzZWVkLCBzY2FsZSkpICogNDM3NTguNTQ1MyArIHNlZWQpO1xcclxcbn1cXHJcXG5cXHJcXG52ZWMzIGNvc2luZVdlaWdodGVkRGlyZWN0aW9uKGZsb2F0IHNlZWQsIHZlYzMgbm9ybWFsKVxcclxcbntcXHJcXG4gICBmbG9hdCB1ID0gcmFuZG9tKHZlYzMoMTIuOTg5OCwgNzguMjMzLCAxNTEuNzE4MiksIHNlZWQpO1xcclxcbiAgIGZsb2F0IHYgPSByYW5kb20odmVjMyg2My43MjY0LCAxMC44NzMsIDYyMy42NzM2KSwgc2VlZCk7XFxyXFxuICAgZmxvYXQgciA9IHNxcnQodSk7XFxyXFxuICAgZmxvYXQgYW5nbGUgPSA2LjI4MzE4NTMwNzE3OTU4NiAqIHY7XFxyXFxuICAgLy8gY29tcHV0ZSBiYXNpcyBmcm9tIG5vcm1hbFxcclxcbiAgIHZlYzMgc2RpciwgdGRpcjtcXHJcXG4gICBpZiAoYWJzKG5vcm1hbC54KSA8IC41KVxcclxcbiAgIHtcXHJcXG4gICAgICBzZGlyID0gY3Jvc3Mobm9ybWFsLCB2ZWMzKDEsIDAsIDApKTtcXHJcXG4gICB9XFxyXFxuICAgZWxzZVxcclxcbiAgIHtcXHJcXG4gICAgICBzZGlyID0gY3Jvc3Mobm9ybWFsLCB2ZWMzKDAsIDEsIDApKTtcXHJcXG4gICB9XFxyXFxuICAgdGRpciA9IGNyb3NzKG5vcm1hbCwgc2Rpcik7XFxyXFxuICAgcmV0dXJuIHIgKiBjb3MoYW5nbGUpICogc2RpciArIHIgKiBzaW4oYW5nbGUpICogdGRpciArIHNxcnQoMS4gLSB1KSAqIG5vcm1hbDtcXHJcXG59XFxyXFxuXFxyXFxudmVjMyB1bmlmb3JtbHlSYW5kb21EaXJlY3Rpb24oZmxvYXQgc2VlZClcXHJcXG57XFxyXFxuICAgZmxvYXQgdSA9IHJhbmRvbSh2ZWMzKDEyLjk4OTgsIDc4LjIzMywgMTUxLjcxODIpLCBzZWVkKTtcXHJcXG4gICBmbG9hdCB2ID0gcmFuZG9tKHZlYzMoNjMuNzI2NCwgMTAuODczLCA2MjMuNjczNiksIHNlZWQpO1xcclxcbiAgIGZsb2F0IHogPSAxLjAgLSAyLjAgKiB1O1xcclxcbiAgIGZsb2F0IHIgPSBzcXJ0KDEuMCAtIHogKiB6KTtcXHJcXG4gICBmbG9hdCBhbmdsZSA9IDYuMjgzMTg1MzA3MTc5NTg2ICogdjtcXHJcXG4gICByZXR1cm4gdmVjMyhyICogY29zKGFuZ2xlKSwgciAqIHNpbihhbmdsZSksIHopO1xcclxcbn1cXHJcXG5cXHJcXG52ZWMzIHVuaWZvcm1seVJhbmRvbVZlY3RvcihmbG9hdCBzZWVkKVxcclxcbntcXHJcXG4gICByZXR1cm4gdW5pZm9ybWx5UmFuZG9tRGlyZWN0aW9uKHNlZWQpICogc3FydChyYW5kb20odmVjMygzNi43NTM5LCA1MC4zNjU4LCAzMDYuMjc1OSksIHNlZWQpKTtcXHJcXG59XFxyXFxuXFxyXFxuYm9vbCBpblNoYWRvdyh2ZWMzIG9yaWdpbiwgdmVjMyByYXksIGZsb2F0IHRMaWdodClcXHJcXG57XFxyXFxuICAgZmxvYXQgdEJhbGwgPSBpbnRlcnNlY3RTcGhlcmUob3JpZ2luLCByYXksIEJBTExfQ0VOVEVSLCB1QmFsbFJhZGl1cyk7XFxyXFxuICAgaWYgKHRCYWxsIDwgdExpZ2h0KVxcclxcbiAgIHtcXHJcXG4gICAgICByZXR1cm4gdHJ1ZTtcXHJcXG4gICB9XFxyXFxuXFxyXFxuI2lmZGVmIFVTRV9UUklBTkdMRVNcXHJcXG4gICBpZiAoaW50ZXJzZWN0T2JqKG9yaWdpbiwgcmF5LCBvYmplY3QpKVxcclxcbiAgIHtcXHJcXG4gICAgICBmb3IgKGludCBpID0gMDsgaSA8IE5VTV9WT0xVTUVTOyBpKyspXFxyXFxuICAgICAge1xcclxcbiAgICAgICAgIFZvbHVtZSB2b2wgPSBvYmplY3Qudm9sdW1lc1tpXTtcXHJcXG4gICAgICAgICBpZiAoaW50ZXJzZWN0Vm9sKG9yaWdpbiwgcmF5LCB2b2wpKVxcclxcbiAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICBmb3IgKGludCBpID0gdm9sLnN0YXJ0SW5kZXg7IGkgPCAodm9sLnN0YXJ0SW5kZXggKyB2b2wubnVtVHJpYW5nbGVzKTsgaSsrKVxcclxcbiAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICBUcmlhbmdsZSB0cmkgPSBnZXRUcmlhbmdsZShpKTtcXHJcXG4gICAgICAgICAgICAgICBpZiAoaW50ZXJzZWN0VHJpYW5nbGUob3JpZ2luLCByYXksIHRyaSkgPCB0TGlnaHQpXFxyXFxuICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xcclxcbiAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICAgfVxcclxcbiAgICAgIH1cXHJcXG4gICB9XFxyXFxuI2VuZGlmXFxyXFxuXFxyXFxuICAgcmV0dXJuIGZhbHNlO1xcclxcbn1cXHJcXG5cXHJcXG4vLyBBbGwgY29tcG9uZW50cyBhcmUgaW4gdGhlIHJhbmdlIFsw4oCmMV0sIGluY2x1ZGluZyBodWUuXFxyXFxudmVjNCByZ2IyaHN2KHZlYzQgYylcXHJcXG57XFxyXFxuICAgdmVjNCBLID0gdmVjNCgwLjAsIC0xLjAgLyAzLjAsIDIuMCAvIDMuMCwgLTEuMCk7XFxyXFxuICAgdmVjNCBwID0gbWl4KHZlYzQoYy5iZywgSy53eiksIHZlYzQoYy5nYiwgSy54eSksIHN0ZXAoYy5iLCBjLmcpKTtcXHJcXG4gICB2ZWM0IHEgPSBtaXgodmVjNChwLnh5dywgYy5yKSwgdmVjNChjLnIsIHAueXp4KSwgc3RlcChwLngsIGMucikpO1xcclxcblxcclxcbiAgIGZsb2F0IGQgPSBxLnggLSBtaW4ocS53LCBxLnkpO1xcclxcbiAgIGZsb2F0IGUgPSAxLjBlLTEwO1xcclxcbiAgIHJldHVybiB2ZWM0KGFicyhxLnogKyAocS53IC0gcS55KSAvICg2LjAgKiBkICsgZSkpLCBkIC8gKHEueCArIGUpLCBxLngsIGMuYSk7XFxyXFxufVxcclxcblxcclxcbi8vIEFsbCBjb21wb25lbnRzIGFyZSBpbiB0aGUgcmFuZ2VbMOKApjFdLCBpbmNsdWRpbmcgaHVlLlxcclxcbnZlYzQgaHN2MnJnYih2ZWM0IGMpXFxyXFxue1xcclxcbiAgIHZlYzQgSyA9IHZlYzQoMS4wLCAyLjAgLyAzLjAsIDEuMCAvIDMuMCwgMy4wKTtcXHJcXG4gICB2ZWMzIHAgPSBhYnMoZnJhY3QoYy54eHggKyBLLnh5eikgKiA2LjAgLSBLLnd3dyk7XFxyXFxuICAgcmV0dXJuIHZlYzQoYy56ICogbWl4KEsueHh4LCBjbGFtcChwIC0gSy54eHgsIDAuMCwgMS4wKSwgYy55KSwgYy5hKTtcXHJcXG59XFxyXFxuXFxyXFxudmVjNCBzaGlmdFRlbXBlcmF0dXJlKHZlYzQgcmdiLCBmbG9hdCBkZWcsIGZsb2F0IHRpbnRTdHJlbmd0aClcXHJcXG57XFxyXFxuICAgdmVjNCBoc3YgPSByZ2IyaHN2KHJnYik7XFxyXFxuICAgaHN2LnggKz0gZGVnIC8gMzYwLjA7XFxyXFxuICAgdmVjNCBmdWxsVGludFJnYiA9IGhzdjJyZ2IoaHN2KTtcXHJcXG5cXHJcXG4gICByZXR1cm4gbWl4KHJnYiwgZnVsbFRpbnRSZ2IsIHRpbnRTdHJlbmd0aCk7XFxyXFxufVxcclxcblxcclxcbi8vIFRPRE8gbW92ZSB0byBhIGNvbW1vbiBmaWxlXFxyXFxuZmxvYXQgdG9HcmF5KHZlYzQgYylcXHJcXG57XFxyXFxuICAgLy8gbG90cyBvZiB3YXlzIHRvIGNvbnZlcnQgUkdCIHRvIGdyYXkgc2NhbGUuXFxyXFxuXFxyXFxuICAgLy8gc2ltcGxlIGF2ZXJhZ2luZyBtZXRob2RcXHJcXG4gICAvLyByZXR1cm4gKGMuciArIGMuZyArIGMuYikgLyAzLjA7XFxyXFxuXFxyXFxuICAgLy8gcmVsYXRpdmUgcGVyY2VwdHVhbCB2YWx1ZXNcXHJcXG4gICAvLyByZXR1cm4gMC4zICogYy5yICsgMC41OSAqIGMuZyArIDAuMTEgKiBjLmI7XFxyXFxuXFxyXFxuICAgLy8gbHVtaW5vc2l0eSBtZWFzdXJlXFxyXFxuICAgZmxvYXQgZ2FtbWEgPSAyLjI7XFxyXFxuICAgZmxvYXQgeSA9IDAuMjEyNiAqIHBvdyhjLnIsIGdhbW1hKSArIDAuNzE1MiAqIHBvdyhjLmcsIGdhbW1hKSArIC4wNzIyICogcG93KGMuYiwgZ2FtbWEpO1xcclxcbiAgIGZsb2F0IGwgPSAxMTYuMCAqIHBvdyh5LCAxLjAgLyAzLjApIC0gMTYuMDtcXHJcXG4gICByZXR1cm4gbCAvIDEwMC4wO1xcclxcbn1cXHJcXG5cXHJcXG52ZWM0IGNhbGN1bGF0ZUNvbG9yKHZlYzMgb3JpZ2luLCB2ZWMzIHJheSlcXHJcXG57XFxyXFxuICAgdmVjMyBhY2N1bXVsYXRlZENvbG9yID0gdmVjMygwLjApO1xcclxcbiAgIHZlYzMgY29sb3JNYXNrID0gdmVjMygxLjApO1xcclxcbiAgIHZlYzMgZXllID0gb3JpZ2luO1xcclxcbiAgIGJvb2wgb2JqSGl0ID0gZmFsc2U7XFxyXFxuICAgYm9vbCBvYmpTaGFkb3cgPSBmYWxzZTtcXHJcXG4gICBmbG9hdCBzcGVjdWxhckNvbnRyaWJ1dGlvbiA9IDAuMDtcXHJcXG5cXHJcXG4gICAvLyBtYWluIHJheXRyYWNpbmcgbG9vcFxcclxcbiAgIGZvciAoaW50IGJvdW5jZSA9IDA7IGJvdW5jZSA8IE1BWF9CT1VOQ0VTOyBib3VuY2UrKylcXHJcXG4gICB7XFxyXFxuICAgICAgLy8gY29tcHV0ZSB0aGUgaW50ZXJzZWN0aW9uIHdpdGggZXZlcnl0aGluZ1xcclxcbiAgICAgIGZsb2F0IHRCYWxsID0gaW50ZXJzZWN0U3BoZXJlKG9yaWdpbiwgcmF5LCBCQUxMX0NFTlRFUiwgdUJhbGxSYWRpdXMpO1xcclxcbiAgICAgIHZlYzMgc3VyZmFjZUNvbG9yID0gdmVjMygwLjUsIDAuNSwgMC41KTtcXHJcXG5cXHJcXG4gICAgICBmbG9hdCB0T2JqID0gSU5GSU5JVFk7XFxyXFxuICAgICAgaW50IHRJbmRleDtcXHJcXG4jaWZkZWYgVVNFX1RSSUFOR0xFU1xcclxcbiAgICAgIGlmIChpbnRlcnNlY3RPYmoob3JpZ2luLCByYXksIG9iamVjdCkpXFxyXFxuICAgICAge1xcclxcbiAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTlVNX1ZPTFVNRVM7IGkrKylcXHJcXG4gICAgICAgICB7XFxyXFxuICAgICAgICAgICAgVm9sdW1lIHZvbCA9IG9iamVjdC52b2x1bWVzW2ldO1xcclxcbiAgICAgICAgICAgIGlmIChpbnRlcnNlY3RWb2wob3JpZ2luLCByYXksIHZvbCkpXFxyXFxuICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSB2b2wuc3RhcnRJbmRleDsgaSA8ICh2b2wuc3RhcnRJbmRleCArIHZvbC5udW1UcmlhbmdsZXMpOyBpKyspXFxyXFxuICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgIFRyaWFuZ2xlIHRyaSA9IGdldFRyaWFuZ2xlKGkpO1xcclxcbiAgICAgICAgICAgICAgICAgIGZsb2F0IHRUcmkgPSBtaW4odE9iaiwgaW50ZXJzZWN0VHJpYW5nbGUob3JpZ2luLCByYXksIHRyaSkpO1xcclxcbiAgICAgICAgICAgICAgICAgIGlmICh0VHJpIDwgdE9iailcXHJcXG4gICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgdE9iaiA9IHRUcmk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgdEluZGV4ID0gaTtcXHJcXG4gICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICB9XFxyXFxuICAgICAgfVxcclxcbiNlbmRpZlxcclxcblxcclxcbiAgICAgIC8vIGlmIHRoZSBmaXJzdCByYXkgaGl0cyB0aGUgbGlnaHQsIHJldHVybiB0aGUgbGlnaHQgY29sb3IuIFRoaXNcXHJcXG4gICAgICAvLyBzaW11bGF0ZXMgZGlzcGxheWluZyB0aGUgbGlnaHRcXHJcXG4gICAgICBpZiAoYm91bmNlID09IDApXFxyXFxuICAgICAge1xcclxcbiAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTlVNX0xJR0hUUzsgaSsrKVxcclxcbiAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICBmbG9hdCB0TGlnaHQgPSBpbnRlcnNlY3RTcGhlcmUob3JpZ2luLCByYXksIExpZ2h0c1tpXS5wb3MsIExpZ2h0c1tpXS5zaXplKTtcXHJcXG4gICAgICAgICAgICBpZiAodExpZ2h0IDwgdEJhbGwgJiYgdExpZ2h0IDwgdE9iailcXHJcXG4gICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgcmV0dXJuIHZlYzQoTGlnaHRzW2ldLmludGVuc2l0eSAqIExpZ2h0c1tpXS5jb2xvciwgMS4wKTtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICAgfVxcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAvLyBmaW5kIHRoZSBjbG9zZXN0IGludGVyc2VjdGlvblxcclxcbiAgICAgIGZsb2F0IHREb21lID0gaW50ZXJzZWN0U3BoZXJlKG9yaWdpbiwgcmF5LCBET01FX0NFTlRFUiwgRE9NRV9SQURJVVMpO1xcclxcbiAgICAgIGZsb2F0IHRGbG9vciA9IElORklOSVRZO1xcclxcblxcclxcbiAgICAgIC8vIGNoZWNrIGZvciBpbnRlcnNlY3Rpb24gd2l0aCB0aGUgZ3JvdW5kXFxyXFxuICAgICAgaWYgKHJheS55IDwgMC4wKVxcclxcbiAgICAgIHtcXHJcXG4gICAgICAgICAvLyBkaXN0YW5jZSB0byBmbG9vciA9IG51bSB1bml0IHZlY3RvcnMgcmVxdWlyZWQgdG8gcmVhY2ggdGhlIGZsb29yXFxyXFxuICAgICAgICAgdEZsb29yID0gLW9yaWdpbi55IC8gcmF5Lnk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIC8vIGZpbmQgdGhlIGNsb3Nlc3QgaGl0XFxyXFxuICAgICAgZmxvYXQgdCA9IG1pbihtaW4odERvbWUsIHRGbG9vciksIG1pbih0QmFsbCwgdE9iaikpO1xcclxcblxcclxcbiAgICAgIC8vIGluZm8gYWJvdXQgaGl0XFxyXFxuICAgICAgdmVjMyBoaXQgPSBvcmlnaW4gKyByYXkgKiB0O1xcclxcbiAgICAgIHZlYzMgbm9ybWFsO1xcclxcblxcclxcbiAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgbm9ybWFsXFxyXFxuICAgICAgaWYgKHQgPT0gdEZsb29yKVxcclxcbiAgICAgIHtcXHJcXG4gICAgICAgICBzdXJmYWNlQ29sb3IgPSBGTE9PUl9DT0xPUjtcXHJcXG4gICAgICAgICBub3JtYWwgPSB2ZWMzKDAuMCwgMS4wLCAwLjApO1xcclxcbiAgICAgIH1cXHJcXG4gICAgICBlbHNlIGlmICh0ID09IHRCYWxsKVxcclxcbiAgICAgIHtcXHJcXG4gICAgICAgICBzdXJmYWNlQ29sb3IgPSB2ZWMzKHVPYmpDb2xvcik7XFxyXFxuICAgICAgICAgbm9ybWFsID0gbm9ybWFsRm9yU3BoZXJlKGhpdCwgQkFMTF9DRU5URVIsIHVCYWxsUmFkaXVzKTtcXHJcXG5cXHJcXG4gICAgICAgICBpZiAoYm91bmNlID09IDApXFxyXFxuICAgICAgICAge1xcclxcbiAgICAgICAgICAgIG9iakhpdCA9IHRydWU7XFxyXFxuICAgICAgICAgfVxcclxcbiAgICAgIH1cXHJcXG4jaWZkZWYgVVNFX1RSSUFOR0xFU1xcclxcbiAgICAgIGVsc2UgaWYgKHQgPT0gdE9iailcXHJcXG4gICAgICB7XFxyXFxuICAgICAgICAgc3VyZmFjZUNvbG9yID0gdU9iakNvbG9yO1xcclxcbiAgICAgICAgIG5vcm1hbCA9IG5vcm1hbEZvclRyaWFuZ2xlKG9yaWdpbiwgaGl0LCB0SW5kZXgpO1xcclxcblxcclxcbiAgICAgICAgIGlmIChib3VuY2UgPT0gMClcXHJcXG4gICAgICAgICB7XFxyXFxuICAgICAgICAgICAgb2JqSGl0ID0gdHJ1ZTtcXHJcXG4gICAgICAgICB9XFxyXFxuICAgICAgfVxcclxcbiNlbmRpZlxcclxcbiAgICAgIGVsc2UgaWYgKHQgPT0gdERvbWUpXFxyXFxuICAgICAge1xcclxcbiAgICAgICAgIHN1cmZhY2VDb2xvciA9IERPTUVfQ09MT1I7XFxyXFxuICAgICAgICAgbm9ybWFsID0gLW5vcm1hbEZvclNwaGVyZShoaXQsIERPTUVfQ0VOVEVSLCBET01FX1JBRElVUyk7XFxyXFxuICAgICAgfVxcclxcbiAgICAgIGVsc2VcXHJcXG4gICAgICB7XFxyXFxuICAgICAgICAgYnJlYWs7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGNvbG9yTWFzayAqPSBzdXJmYWNlQ29sb3I7XFxyXFxuXFxyXFxuICAgICAgaWYgKGxlbmd0aChjb2xvck1hc2spIDwgMC4wMSlcXHJcXG4gICAgICB7XFxyXFxuICAgICAgICAgYnJlYWs7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTlVNX0xJR0hUUzsgaSsrKVxcclxcbiAgICAgIHtcXHJcXG4gICAgICAgICAvLyBjb21wdXRlIGRpZmZ1c2UgbGlnaHRpbmcgY29udHJpYnV0aW9uXFxyXFxuICAgICAgICAgdmVjMyB0b0xpZ2h0ID0gTGlnaHRzW2ldLnBvcyAtIGhpdDtcXHJcXG4gICAgICAgICB2ZWMzIHRvTGlnaHROID0gbm9ybWFsaXplKHRvTGlnaHQpO1xcclxcblxcclxcbiAgICAgICAgIC8vIHRyYWNlIGEgc2hhZG93IHJheSB0byB0aGUgbGlnaHRcXHJcXG4gICAgICAgICBpZiAoaW5TaGFkb3coaGl0ICsgbm9ybWFsICogT0ZGU0VULCB0b0xpZ2h0TiwgbGVuZ3RoKHRvTGlnaHQpKSA9PSBmYWxzZSlcXHJcXG4gICAgICAgICB7XFxyXFxuICAgICAgICAgICAgLy8gZGlmZnVzZSBjb21wb25lbnRcXHJcXG4gICAgICAgICAgICBmbG9hdCBkaWZmdXNlID0gbWF4KDAuMCwgZG90KHRvTGlnaHROLCBub3JtYWwpKTtcXHJcXG5cXHJcXG4gICAgICAgICAgICAvLyBzcGVjdWxhciBjb21wb25lbnRcXHJcXG4gICAgICAgICAgICB2ZWMzIHRvRXllID0gZXllIC0gaGl0O1xcclxcbiAgICAgICAgICAgIHZlYzMgbjJsID0gdG9MaWdodE47XFxyXFxuICAgICAgICAgICAgdmVjMyBuMmUgPSBub3JtYWxpemUodG9FeWUpO1xcclxcbiAgICAgICAgICAgIHZlYzMgYmlzZWN0b3IgPSAobjJsICsgbjJlKSAvIGxlbmd0aChuMmwgKyBuMmUpO1xcclxcbiAgICAgICAgICAgIGZsb2F0IHNwZWN1bGFyQ29lZmZpY2llbnQgPSAwLjU7XFxyXFxuICAgICAgICAgICAgZmxvYXQgc2hpbmluZXNzID0gMTAwLjA7XFxyXFxuICAgICAgICAgICAgZmxvYXQgc3BlY3VsYXIgPSBzcGVjdWxhckNvZWZmaWNpZW50ICogcG93KG1heCgwLjAsIGRvdChiaXNlY3Rvciwgbm9ybWFsKSksIHNoaW5pbmVzcyk7XFxyXFxuXFxyXFxuICAgICAgICAgICAgLy8gYXBwbHkgbGlnaHQgZmFsbCBvZmYgYXMgZGlzdGFuY2Ugc3F1YXJlcy4gVXNlIGEgbWluIHZhbHVlIGZvciB0aGVcXHJcXG4gICAgICAgICAgICAvLyBsaWdodCBzaXplIG90aGVyd2lzZSBmYWxsb2ZmIGlzIHRvbyByYXBpZFxcclxcbiAgICAgICAgICAgIGZsb2F0IHJhZGl1cyA9IG1heCgwLjc1LCBMaWdodHNbaV0uc2l6ZSk7XFxyXFxuICAgICAgICAgICAgZmxvYXQgZGlzdCA9IG1heCgxLjAsIChsZW5ndGgodG9MaWdodCkgLSByYWRpdXMpIC8gcmFkaXVzKTtcXHJcXG4gICAgICAgICAgICBmbG9hdCBsaWdodEludGVuc2l0eSA9IExpZ2h0c1tpXS5pbnRlbnNpdHkgLyAoZGlzdCAqIGRpc3QpO1xcclxcblxcclxcbiAgICAgICAgICAgIGFjY3VtdWxhdGVkQ29sb3IgKz0gY29sb3JNYXNrICogTGlnaHRzW2ldLmNvbG9yICogbGlnaHRJbnRlbnNpdHkgKiBkaWZmdXNlO1xcclxcblxcclxcbiAgICAgICAgICAgIC8vIFRPRE8gZGVmaW5lIGEgY29sb3IgbWFzayBmb3Igc3BlY3VsYXIgcmVmbGVjdGlvblxcclxcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgYWNjdW11bGF0ZWRDb2xvciArPSBtaXgoc3VyZmFjZUNvbG9yLCBMaWdodHNbaV0uY29sb3IsIDAuOCkgKlxcclxcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgbGlnaHRJbnRlbnNpdHkgKiBzcGVjdWxhcjtcXHJcXG4gICAgICAgICAgICBhY2N1bXVsYXRlZENvbG9yICs9XFxyXFxuICAgICAgICAgICAgICAgIChsZW5ndGgoc3VyZmFjZUNvbG9yKSAqIExpZ2h0c1tpXS5jb2xvcikgKiBsaWdodEludGVuc2l0eSAqIHNwZWN1bGFyO1xcclxcblxcclxcbiAgICAgICAgICAgIGlmIChib3VuY2UgPT0gMCAmJiBpID09IDApXFxyXFxuICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgIHNwZWN1bGFyQ29udHJpYnV0aW9uICs9IGxpZ2h0SW50ZW5zaXR5ICogc3BlY3VsYXI7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgIH1cXHJcXG4gICAgICAgICBlbHNlIGlmIChib3VuY2UgPT0gMCAmJiBpID09IDApXFxyXFxuICAgICAgICAge1xcclxcbiAgICAgICAgICAgIG9ialNoYWRvdyA9IHRydWU7XFxyXFxuICAgICAgICAgfVxcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAvLyBjYWxjdWxhdGUgbmV4dCBvcmlnaW5cXHJcXG4gICAgICByYXkgPSBjb3NpbmVXZWlnaHRlZERpcmVjdGlvbih1UmFuZG9tICsgZmxvYXQoYm91bmNlKSwgbm9ybWFsKTtcXHJcXG5cXHJcXG4gICAgICBvcmlnaW4gPSBoaXQ7XFxyXFxuICAgfVxcclxcblxcclxcbiAgIGZsb2F0IGFscGhhID0gMS4wO1xcclxcbiAgIGlmIChvYmpIaXQpXFxyXFxuICAge1xcclxcbiAgICAgIGlmIChvYmpTaGFkb3cpXFxyXFxuICAgICAge1xcclxcbiAgICAgICAgIGFscGhhID0gdVNoYWRvd0FscGhhO1xcclxcbiAgICAgIH1cXHJcXG4gICAgICBlbHNlXFxyXFxuICAgICAge1xcclxcbiAgICAgICAgIGFscGhhID0gdUxpZ2h0QWxwaGE7XFxyXFxuICAgICAgfVxcclxcbiAgICAgIGFscGhhICs9IGNsYW1wKHNwZWN1bGFyQ29udHJpYnV0aW9uLCAwLjAsIDEuMCk7XFxyXFxuICAgfVxcclxcblxcclxcbiAgIHZlYzQgc2NpZW5jZUNvbG9yID0gdmVjNChjbGFtcChhY2N1bXVsYXRlZENvbG9yLCAwLjAsIDEuMCksIGFscGhhKTtcXHJcXG4gICByZXR1cm4gc2NpZW5jZUNvbG9yO1xcclxcbiAgIC8qXFxyXFxuICAgaWYgKG9iakhpdClcXHJcXG4gICB7XFxyXFxuICAgICAgcmV0dXJuIHZlYzQodG9BcnRpc3Qoc2NpZW5jZUNvbG9yKS5yZ2IsIGFscGhhKTtcXHJcXG4gICB9XFxyXFxuICAgZWxzZVxcclxcbiAgIHtcXHJcXG4gICAgICByZXR1cm4gc2NpZW5jZUNvbG9yO1xcclxcbiAgIH1cXHJcXG4gICAqL1xcclxcbn1cXHJcXG5cXHJcXG52b2lkIG1haW4oKVxcclxcbntcXHJcXG4gICB2ZWMzIHJhbmQgPSB1bmlmb3JtbHlSYW5kb21WZWN0b3IodVJhbmRvbSkgKiBMSUdIVF9TSVpFO1xcclxcblxcclxcbiAgIExpZ2h0c1swXS5pbnRlbnNpdHkgPSB1TGlnaHRJbnRlbnNpdHk7XFxyXFxuICAgTGlnaHRzWzBdLnNpemUgPSBMSUdIVF9TSVpFO1xcclxcbiAgIExpZ2h0c1swXS5wb3MgPSB1TGlnaHRQb3MgKyByYW5kO1xcclxcbiAgIExpZ2h0c1swXS5jb2xvciA9IHVMaWdodENvbG9yO1xcclxcblxcclxcbiAgIGZvciAoaW50IGkgPSAxOyBpIDwgTlVNX0xJR0hUUzsgaSsrKVxcclxcbiAgIHtcXHJcXG4gICAgICBmbG9hdCB4ID0gUkFESVVTICogc2luKDIuMCAqIFBJICogZmxvYXQoaSkgLyAoZmxvYXQoTlVNX0xJR0hUUykgLSAxLjApKSArIHJhbmQueDtcXHJcXG4gICAgICBmbG9hdCB5ID0gSEVJR0hUICsgcmFuZC55O1xcclxcbiAgICAgIGZsb2F0IHogPSBSQURJVVMgKiBjb3MoMi4wICogUEkgKiBmbG9hdChpKSAvIChmbG9hdChOVU1fTElHSFRTKSAtIDEuMCkpICsgcmFuZC56O1xcclxcblxcclxcbiAgICAgIExpZ2h0c1tpXS5pbnRlbnNpdHkgPSB1QW1iaWVudExpZ2h0SW50ZW5zaXR5O1xcclxcbiAgICAgIExpZ2h0c1tpXS5zaXplID0gMi4wICogTElHSFRfU0laRTtcXHJcXG4gICAgICBMaWdodHNbaV0ucG9zID0gdmVjMyh4LCB5LCB6KTtcXHJcXG4gICAgICBMaWdodHNbaV0uY29sb3IgPSBBTUJJRU5UX0NPTE9SO1xcclxcbiAgIH1cXHJcXG5cXHJcXG4gICAvLyBtZXJnZSB0aGUgbmV3IGNvbG9yIGludG8gdGhlIGV4aXN0aW5nIHRleHR1cmVcXHJcXG4gICB2ZWM0IHRleHR1cmVDb2xvciA9IHRleHR1cmUodVRleHR1cmUsIGdsX0ZyYWdDb29yZC54eSAvIHVUZXh0dXJlU2l6ZSk7XFxyXFxuICAgdmVjNCBuZXdDb2xvciA9IGNhbGN1bGF0ZUNvbG9yKHVFeWUsIGluaXRpYWxSYXkpO1xcclxcbiAgIGZsb2F0IHdlaWdodCA9ICh1U2FtcGxlIC8gKDEuMCArIHVTYW1wbGUpKTtcXHJcXG4gICBmcmFnQ29sb3IgPSBtaXgobmV3Q29sb3IsIHRleHR1cmVDb2xvciwgd2VpZ2h0KTtcXHJcXG59XCIiLCJleHBvcnQgZGVmYXVsdCBcIjxWRVJTSU9OPlxcclxcblxcclxcbiNkZWZpbmUgTk9USElOR1xcclxcbiNpZmRlZiBVU0VfVFJJQU5HTEVTXFxyXFxuI2RlZmluZSBFUzMwMFxcclxcbiNlbmRpZlxcclxcblxcclxcbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcXHJcXG51bmlmb3JtIHZlYzMgdUV5ZSwgdVJheTAwLCB1UmF5MDEsIHVSYXkxMCwgdVJheTExO1xcclxcblxcclxcbiNpZmRlZiBFUzMwMFxcclxcbmluIHZlYzMgdmVydGV4O1xcclxcbm91dCB2ZWMzIGluaXRpYWxSYXk7XFxyXFxuI2Vsc2VcXHJcXG5hdHRyaWJ1dGUgdmVjMyB2ZXJ0ZXg7XFxyXFxudmFyeWluZyB2ZWMzIGluaXRpYWxSYXk7XFxyXFxuI2VuZGlmIFxcclxcblxcclxcbnZvaWQgbWFpbigpXFxyXFxue1xcclxcbiAgIHZlYzIgcGVyY2VudCA9IHZlcnRleC54eSAqIDAuNSArIDAuNTtcXHJcXG4gICBpbml0aWFsUmF5ID0gbWl4KG1peCh1UmF5MDAsIHVSYXkwMSwgcGVyY2VudC55KSwgbWl4KHVSYXkxMCwgdVJheTExLCBwZXJjZW50LnkpLCBwZXJjZW50LngpO1xcclxcbiAgIGdsX1Bvc2l0aW9uID0gdmVjNCh2ZXJ0ZXgsIDEuMCk7XFxyXFxufVxcclxcblwiIiwiZXhwb3J0IGRlZmF1bHQgXCJcXHJcXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxyXFxudmFyeWluZyB2ZWMyIHRleENvb3JkO1xcclxcbnVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xcclxcblxcclxcbnZvaWQgbWFpbigpIHsgZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB0ZXhDb29yZCk7IH1cXHJcXG5cIiIsImV4cG9ydCBkZWZhdWx0IFwiXFxyXFxuYXR0cmlidXRlIHZlYzIgdmVydGV4O1xcclxcbnZhcnlpbmcgdmVjMiB0ZXhDb29yZDtcXHJcXG5cXHJcXG52b2lkIG1haW4oKVxcclxcbntcXHJcXG4gICB0ZXhDb29yZCA9IHZlcnRleC54eSAqIDAuNSArIDAuNTtcXHJcXG5cXHJcXG4gICBnbF9Qb3NpdGlvbiA9IHZlYzQodmVydGV4Lnh5LCAwLjAsIDEuMCk7XFxyXFxufVxcclxcblwiIiwiZXhwb3J0IGRlZmF1bHQgXCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxyXFxuXFxyXFxuLy8gaW50ZXJwb2xhdGVkIHZhbHVlcyBmcm9tIHRoZSB2ZXJ0ZXggc2hhZGVyXFxyXFxudmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxyXFxudmFyeWluZyB2ZWMzIHZWZXJ0ZXg7XFxyXFxudmFyeWluZyB2ZWMzIHZTaGFkb3dWZXJ0ZXg7XFxyXFxudmFyeWluZyB2ZWMzIHZNb2RlbFZlcnRleDtcXHJcXG5cXHJcXG51bmlmb3JtIG1hdDQgbW9kZWw7XFxyXFxudW5pZm9ybSB2ZWMzIHVFeWU7XFxyXFxudW5pZm9ybSBib29sIHVPcnRob2dyYXBoaWM7XFxyXFxuXFxyXFxuI2RlZmluZSBOT1JNQUwgMFxcclxcbiNkZWZpbmUgQ09OVE9VUl9QTEFORVMgMVxcclxcbiNkZWZpbmUgQ09OVE9VUl9WQUxVRVMgMlxcclxcbiNkZWZpbmUgTElHSFRfQU5EX1NIQURPVyAzXFxyXFxuI2RlZmluZSBISUdITElHSFRfVEVSTUlOQVRPUiA0XFxyXFxuI2RlZmluZSBISUdITElHSFRfU0hBRE9XIDVcXHJcXG4jZGVmaW5lIEVNUEhBU0laRV9ISUdITElHSFRTIDZcXHJcXG5cXHJcXG51bmlmb3JtIGludCB1UmVuZGVyTW9kZTtcXHJcXG5cXHJcXG4vLyB0aGVzZSBhcmUgdmFsdWUgYmV0d2VlbiAwLTFcXHJcXG51bmlmb3JtIGZsb2F0IHVEaWZmdXNlSW50ZW5zaXR5O1xcclxcbnVuaWZvcm0gZmxvYXQgdUFtYmllbnRJbnRlbnNpdHk7XFxyXFxudW5pZm9ybSBmbG9hdCB1U3BlY3VsYXJJbnRlbnNpdHk7XFxyXFxuXFxyXFxuLy8gdGhlIGNvbG9ycyB3ZSB1c2UgdG8gcmVwcmVzZW50IG91ciBsaWdodGVzdCBhbmQgZGFya2VzdCB2YWx1ZXNcXHJcXG51bmlmb3JtIHZlYzMgdVdoaXRlQ29sb3I7XFxyXFxudW5pZm9ybSB2ZWMzIHVCbGFja0NvbG9yO1xcclxcblxcclxcbnVuaWZvcm0gdmVjMyB1TGlnaHRQb3M7XFxyXFxudW5pZm9ybSBib29sIHVQb2ludExpZ2h0O1xcclxcbnVuaWZvcm0gZmxvYXQgdUZhbGxvZmY7XFxyXFxudW5pZm9ybSBmbG9hdCB1TGlnaHRJbnRlbnNpdHk7XFxyXFxudW5pZm9ybSBmbG9hdCB1TGlnaHRJbnRlbnNpdHlBdFNvdXJjZTtcXHJcXG5cXHJcXG51bmlmb3JtIGJvb2wgdVVzZVNoYWRvd3M7XFxyXFxudW5pZm9ybSBzYW1wbGVyMkQgdVNoYWRvd1RleHR1cmU7XFxyXFxuXFxyXFxudW5pZm9ybSB2ZWMzIHVGbG9vckNlbnRlcjtcXHJcXG51bmlmb3JtIGZsb2F0IHVGbG9vclJhZGl1cztcXHJcXG51bmlmb3JtIGJvb2wgdVJlbmRlcmluZ0Zsb29yO1xcclxcbnVuaWZvcm0gYm9vbCB1U2hvd0dyaWQ7XFxyXFxuI2RlZmluZSBNQVhfQ09OVE9VUlMgOVxcclxcbnVuaWZvcm0gaW50IHVOdW1Db250b3VycztcXHJcXG51bmlmb3JtIHZlYzMgdUNvbnRvdXJDb2xvcnNbOV07XFxyXFxudW5pZm9ybSBmbG9hdCB1Q29udG91ckFuZ2xlc1s5XTtcXHJcXG51bmlmb3JtIGJvb2wgdVNob3dIaWdobGlnaHRzO1xcclxcbnVuaWZvcm0gZmxvYXQgdVNoaW5pbmVzcztcXHJcXG5cXHJcXG4vLyBGb3IgY29udG91ciBzaGFkaW5nLCB0aGUgbWluaW11bSBzcGVjdWxhciBjb250cmlidXRpb24gcmVxdWlyZWQgdG9cXHJcXG4vLyBzaG93IHNvbWV0aGluZyBhcyBhIGhpZ2hsaWdodFxcclxcbmNvbnN0IGZsb2F0IFNQRUNVTEFSX1RIUkVTSE9MRCA9IDAuMDY7XFxyXFxuXFxyXFxuYm9vbCB1U2hvd1Rlcm1pbmF0b3IgPSB0cnVlO1xcclxcblxcclxcbmJvb2wgaW5fc2hhZG93KClcXHJcXG57XFxyXFxuICAgaWYgKHVVc2VTaGFkb3dzID09IGZhbHNlKVxcclxcbiAgIHtcXHJcXG4gICAgICByZXR1cm4gZmFsc2U7XFxyXFxuICAgfVxcclxcblxcclxcbiAgIC8vIFRoZSB2ZXJ0ZXggbG9jYXRpb24gcmVuZGVyZWQgZnJvbSB0aGUgbGlnaHQgc291cmNlIGlzIGFsbW9zdCBpbiBOb3JtYWxpemVkXFxyXFxuICAgLy8gRGV2aWNlIENvb3JkaW5hdGVzIChOREMpLCBidXQgdGhlIHBlcnNwZWN0aXZlIGRpdmlzaW9uIGhhcyBub3QgYmVlblxcclxcbiAgIC8vIHBlcmZvcm1lZCB5ZXQuIFBlcmZvcm0gdGhlIHBlcnNwZWN0aXZlIGRpdmlkZS4gVGhlICh4LHkseikgdmVydGV4IGxvY2F0aW9uXFxyXFxuICAgLy8gY29tcG9uZW50cyBhcmUgbm93IGVhY2ggaW4gdGhlIHJhbmdlIFstMS4wLCsxLjBdLlxcclxcbiAgIC8vIHZlYzMgdmVydGV4X3JlbGF0aXZlX3RvX2xpZ2h0ID0gdl9WZXJ0ZXhfcmVsYXRpdmVfdG9fbGlnaHQueHl6IC8gdl9WZXJ0ZXhfcmVsYXRpdmVfdG9fbGlnaHQudztcXHJcXG4gICB2ZWMzIHZlcnRleCA9IHZTaGFkb3dWZXJ0ZXg7XFxyXFxuXFxyXFxuICAgLy8gQ29udmVydCB0aGUgdGhlIHZhbHVlcyBmcm9tIE5vcm1hbGl6ZWQgRGV2aWNlIENvb3JkaW5hdGVzIChyYW5nZSBbLTEuMCwrMS4wXSlcXHJcXG4gICAvLyB0byB0aGUgcmFuZ2UgWzAuMCwxLjBdLiBUaGlzIG1hcHBpbmcgaXMgZG9uZSBieSBzY2FsaW5nXFxyXFxuICAgLy8gdGhlIHZhbHVlcyBieSAwLjUsIHdoaWNoIGdpdmVzIHZhbHVlcyBpbiB0aGUgcmFuZ2UgWy0wLjUsKzAuNV0gYW5kIHRoZW5cXHJcXG4gICAvLyBzaGlmdGluZyB0aGUgdmFsdWVzIGJ5ICswLjUuXFxyXFxuICAgdmVydGV4ID0gdmVydGV4ICogMC41ICsgMC41O1xcclxcblxcclxcbiAgIC8vIEdldCB0aGUgeiB2YWx1ZSBvZiB0aGlzIGZyYWdtZW50IGluIHJlbGF0aW9uc2hpcCB0byB0aGUgbGlnaHQgc291cmNlLlxcclxcbiAgIC8vIFRoaXMgdmFsdWUgd2FzIHN0b3JlZCBpbiB0aGUgc2hhZG93IG1hcCAoZGVwdGggYnVmZmVyIG9mIHRoZSBmcmFtZSBidWZmZXIpXFxyXFxuICAgLy8gd2hpY2ggd2FzIHBhc3NlZCB0byB0aGUgc2hhZGVyIGFzIGEgdGV4dHVyZSBtYXAuXFxyXFxuICAgLy8gdmVjNCB0ZXh0dXJlVmFsdWUgPSB0ZXh0dXJlMkQodVNoYWRvd1NhbXBsZXIsIHZlcnRleC54eSk7XFxyXFxuXFxyXFxuICAgLy8gVGhlIHRleHR1cmUgbWFwIGNvbnRhaW5zIGEgc2luZ2xlIGRlcHRoIHZhbHVlIGZvciBlYWNoIHBpeGVsLiBIb3dldmVyLFxcclxcbiAgIC8vIHRoZSB0ZXh0dXJlMkQgc2FtcGxlciBhbHdheXMgcmV0dXJucyBhIGNvbG9yIGZyb20gYSB0ZXh0dXJlLiBGb3IgYVxcclxcbiAgIC8vIGdsLkRFUFRIX0NPTVBPTkVOVCB0ZXh0dXJlLCB0aGUgY29sb3IgY29udGFpbnMgdGhlIGRlcHRoIHZhbHVlIGluXFxyXFxuICAgLy8gZWFjaCBvZiB0aGUgY29sb3IgY29tcG9uZW50cy4gSWYgdGhlIHZhbHVlIHdhcyBkLCB0aGVuIHRoZSBjb2xvciByZXR1cm5lZFxcclxcbiAgIC8vIGlzIChkLGQsZCwxKS4gVGhpcyBpcyBhIFxcXCJjb2xvclxcXCIgKGRlcHRoKSB2YWx1ZSBiZXR3ZWVuIFswLjAsKzEuMF0uXFxyXFxuICAgZmxvYXQgc2hhZG93bWFwX2Rpc3RhbmNlID0gdGV4dHVyZTJEKHVTaGFkb3dUZXh0dXJlLCB2ZXJ0ZXgueHkpLnI7XFxyXFxuXFxyXFxuICAgLy8gVGVzdCB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGlzIGZyYWdtZW50IGFuZCB0aGUgbGlnaHQgc291cmNlIGFzXFxyXFxuICAgLy8gY2FsY3VsYXRlZCB1c2luZyB0aGUgc2hhZG93bWFwIHRyYW5zZm9ybWF0aW9uICh2ZXJ0ZXhfcmVsYXRpdmVfdG9fbGlnaHQueikgYW5kXFxyXFxuICAgLy8gdGhlIHNtYWxsZXN0IGRpc3RhbmNlIGJldHdlZW4gdGhlIGNsb3Nlc3QgZnJhZ21lbnQgdG8gdGhlIGxpZ2h0IHNvdXJjZVxcclxcbiAgIC8vIGZvciB0aGlzIGxvY2F0aW9uLCBhcyBzdG9yZWQgaW4gdGhlIHNoYWRvd21hcC4gV2hlbiB0aGUgY2xvc2VzdFxcclxcbiAgIC8vIGRpc3RhbmNlIHRvIHRoZSBsaWdodCBzb3VyY2Ugd2FzIHNhdmVkIGluIHRoZSBzaGFkb3dtYXAsIHNvbWVcXHJcXG4gICAvLyBwcmVjaXNpb24gd2FzIGxvc3QuIFRoZXJlZm9yZSB3ZSBuZWVkIGEgc21hbGwgdG9sZXJhbmNlIGZhY3RvciB0b1xcclxcbiAgIC8vIGNvbXBlbnNhdGUgZm9yIHRoZSBsb3N0IHByZWNpc2lvbi5cXHJcXG4gICBmbG9hdCB0b2wgPSAwLjAwMTtcXHJcXG4gICBpZiAodmVydGV4LnogPD0gc2hhZG93bWFwX2Rpc3RhbmNlICsgdG9sKVxcclxcbiAgIHtcXHJcXG4gICAgICAvLyBUaGlzIHN1cmZhY2UgcmVjZWl2ZXMgZnVsbCBsaWdodCBiZWNhdXNlIGl0IGlzIHRoZSBjbG9zZXN0IHN1cmZhY2VcXHJcXG4gICAgICAvLyB0byB0aGUgbGlnaHQuXFxyXFxuICAgICAgcmV0dXJuIGZhbHNlO1xcclxcbiAgIH1cXHJcXG4gICBlbHNlXFxyXFxuICAge1xcclxcbiAgICAgIC8vIFRoaXMgc3VyZmFjZSBpcyBpbiBhIHNoYWRvdyBiZWNhdXNlIHRoZXJlIGlzIGEgY2xvc2VyIHN1cmZhY2UgdG9cXHJcXG4gICAgICAvLyB0aGUgbGlnaHQgc291cmNlLlxcclxcbiAgICAgIHJldHVybiB0cnVlO1xcclxcbiAgIH1cXHJcXG59XFxyXFxuXFxyXFxudmVjNCB2YWwyQ29sb3IoZmxvYXQgdmFsKSB7IHJldHVybiB2ZWM0KG1peCh1QmxhY2tDb2xvciwgdVdoaXRlQ29sb3IsIHZhbCksIDEuMCk7IH1cXHJcXG5cXHJcXG52ZWM0IHZhbDJDb250b3VyQ29sb3IoZmxvYXQgdmFsKVxcclxcbntcXHJcXG4gICB2YWwgPSBjbGFtcCh2YWwsIDAuMCwgMS4wKTtcXHJcXG4gICBmb3IgKGludCBpID0gMDsgaSA8IE1BWF9DT05UT1VSUzsgaSsrKVxcclxcbiAgIHtcXHJcXG4gICAgICBmbG9hdCBtYXggPSAoZmxvYXQoaSkgKyAxLjApIC8gZmxvYXQodU51bUNvbnRvdXJzKTtcXHJcXG4gICAgICBpZiAodmFsIDw9IG1heClcXHJcXG4gICAgICB7XFxyXFxuICAgICAgICAgcmV0dXJuIHZlYzQodUNvbnRvdXJDb2xvcnNbKE1BWF9DT05UT1VSUyAtIDEpIC0gaV0sIDEuMCk7XFxyXFxuICAgICAgfVxcclxcbiAgIH1cXHJcXG59XFxyXFxuXFxyXFxuZmxvYXQgZ2V0RGlmZnVzZSh2ZWMzIG5vcm1hbCwgdmVjMyB0b0xpZ2h0KVxcclxcbntcXHJcXG4gICBmbG9hdCB2RG90ID0gY2xhbXAoZG90KG5vcm1hbCwgdG9MaWdodCksIDAuMCwgMS4wKTtcXHJcXG4gICBmbG9hdCBkaWZmdXNlID0gdURpZmZ1c2VJbnRlbnNpdHkgKiB2RG90O1xcclxcbiAgIHJldHVybiBkaWZmdXNlO1xcclxcbn1cXHJcXG5cXHJcXG5mbG9hdCBnZXRTcGVjdWxhcih2ZWMzIG5vcm1hbCwgdmVjMyB0b0xpZ2h0LCB2ZWMzIHRvRXllKVxcclxcbntcXHJcXG4gICBmbG9hdCBzcGVjdWxhciA9IDAuMDtcXHJcXG5cXHJcXG4gICBpZiAodVNob3dIaWdobGlnaHRzKVxcclxcbiAgIHtcXHJcXG4gICAgICB2ZWMzIHJlZmxlY3Rpb24gPSBub3JtYWxpemUoMi4wICogZG90KG5vcm1hbCwgdG9MaWdodCkgKiBub3JtYWwgLSB0b0xpZ2h0KTtcXHJcXG4gICAgICBmbG9hdCBjb3NBbmdsZSA9IGNsYW1wKGRvdChyZWZsZWN0aW9uLCB0b0V5ZSksIDAuMCwgMS4wKTsgLy8gY2xhbXAgdG8gYXZvaWQgdmFsdWVzID4gOTAgZGVnXFxyXFxuICAgICAgc3BlY3VsYXIgPSB1U3BlY3VsYXJJbnRlbnNpdHkgKiAodVNoaW5pbmVzcyAvIDE1LjApICogcG93KGNvc0FuZ2xlLCB1U2hpbmluZXNzKTtcXHJcXG4gICB9XFxyXFxuXFxyXFxuICAgcmV0dXJuIHNwZWN1bGFyO1xcclxcbn1cXHJcXG5cXHJcXG5mbG9hdCBnZXREaXN0YW5jZVB0VG9QbGFuZSh2ZWMzIHB0LCB2ZWMzIHBsYW5lKVxcclxcbntcXHJcXG4gICBmbG9hdCBhID0gcGxhbmUueDtcXHJcXG4gICBmbG9hdCBiID0gcGxhbmUueTtcXHJcXG4gICBmbG9hdCBjID0gcGxhbmUuejtcXHJcXG4gICBmbG9hdCBkID0gLShhICogYSArIGIgKiBiICsgYyAqIGMpO1xcclxcblxcclxcbiAgIHJldHVybiAtKGEgKiBwdC54ICsgYiAqIHB0LnkgKyBjICogcHQueiArIGQpIC8gc3FydChhICogYSArIGIgKiBiICsgYyAqIGMpO1xcclxcbn1cXHJcXG5cXHJcXG5mbG9hdCBnZXRMaWdodERpc3RhbmNlKHZlYzMgbGlnaHRQb3MpXFxyXFxue1xcclxcbiAgIGlmICh1UG9pbnRMaWdodClcXHJcXG4gICB7XFxyXFxuICAgICAgcmV0dXJuIGxlbmd0aChsaWdodFBvcyAtIHZWZXJ0ZXgpO1xcclxcbiAgIH1cXHJcXG4gICBlbHNlXFxyXFxuICAge1xcclxcbiAgICAgIHJldHVybiBnZXREaXN0YW5jZVB0VG9QbGFuZSh2VmVydGV4LCBsaWdodFBvcyk7XFxyXFxuICAgfVxcclxcbn1cXHJcXG5cXHJcXG5mbG9hdCBnZXRWYWx1ZUZyb21MaWdodCh2ZWMzIG5vcm1hbCwgdmVjMyB0b0xpZ2h0LCB2ZWMzIHRvRXllKVxcclxcbntcXHJcXG4gICBmbG9hdCBkaWZmdXNlID0gZ2V0RGlmZnVzZShub3JtYWwsIHRvTGlnaHQpO1xcclxcbiAgIGZsb2F0IHNwZWN1bGFyID0gZ2V0U3BlY3VsYXIobm9ybWFsLCB0b0xpZ2h0LCB0b0V5ZSk7XFxyXFxuXFxyXFxuICAgZmxvYXQgZmFsbG9mZiA9IDEuMDtcXHJcXG4gICBpZiAodUZhbGxvZmYgPiAwLjApXFxyXFxuICAge1xcclxcbiAgICAgIGZsb2F0IHZEb3QgPSBkb3Qobm9ybWFsLCB0b0xpZ2h0KTtcXHJcXG5cXHJcXG4gICAgICBmbG9hdCB2RGlzdGFuY2UgPSBnZXRMaWdodERpc3RhbmNlKHVMaWdodFBvcyk7XFxyXFxuICAgICAgZmFsbG9mZiA9IHVMaWdodEludGVuc2l0eUF0U291cmNlIC8gKHZEaXN0YW5jZSAqIHZEaXN0YW5jZSk7XFxyXFxuXFxyXFxuICAgICAgLy8gdGhlIGxpZ2h0IG9ubHkgc2hpbmVzIG9uZSB3YXlcXHJcXG4gICAgICBpZiAodkRpc3RhbmNlIDwgMC4wKVxcclxcbiAgICAgIHtcXHJcXG4gICAgICAgICBkaWZmdXNlID0gMC4wO1xcclxcbiAgICAgICAgIHNwZWN1bGFyID0gMC4wO1xcclxcbiAgICAgIH1cXHJcXG4gICB9XFxyXFxuXFxyXFxuICAgcmV0dXJuIHVBbWJpZW50SW50ZW5zaXR5ICsgdUxpZ2h0SW50ZW5zaXR5ICogZmFsbG9mZiAqIChkaWZmdXNlICsgc3BlY3VsYXIpO1xcclxcbn1cXHJcXG5cXHJcXG52ZWM0IGdldENvbnRvdXJQbGFuZUNvbG9yKGZsb2F0IHZEb3QsIHZlYzMgbm9ybWFsLCB2ZWMzIHRvTGlnaHQsIHZlYzMgdG9FeWUpXFxyXFxue1xcclxcbiAgIGZsb2F0IHNwZWN1bGFyID0gZ2V0U3BlY3VsYXIobm9ybWFsLCB0b0xpZ2h0LCB0b0V5ZSk7XFxyXFxuICAgaWYgKHNwZWN1bGFyID4gU1BFQ1VMQVJfVEhSRVNIT0xEKVxcclxcbiAgIHtcXHJcXG4gICAgICByZXR1cm4gdmFsMkNvbG9yKHVBbWJpZW50SW50ZW5zaXR5ICsgdURpZmZ1c2VJbnRlbnNpdHkgKyB1U3BlY3VsYXJJbnRlbnNpdHkpO1xcclxcbiAgIH1cXHJcXG5cXHJcXG4gICBmbG9hdCBhbmdsZSA9ICgxODAuMCAvIDMuMTQxNTkyNikgKiBhY29zKHZEb3QpO1xcclxcbiAgIGlmIChhbmdsZSA+IDkwLjApXFxyXFxuICAge1xcclxcbiAgICAgIHJldHVybiB2YWwyQ29sb3IodUFtYmllbnRJbnRlbnNpdHkpO1xcclxcbiAgIH1cXHJcXG4gICBlbHNlXFxyXFxuICAge1xcclxcbiAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTUFYX0NPTlRPVVJTOyBpKyspXFxyXFxuICAgICAge1xcclxcbiAgICAgICAgIGlmIChpIDwgdU51bUNvbnRvdXJzKVxcclxcbiAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICBpZiAoYW5nbGUgPCB1Q29udG91ckFuZ2xlc1tpXSlcXHJcXG4gICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgcmV0dXJuIHZlYzQodUNvbnRvdXJDb2xvcnNbaV0sIDEuMCk7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgIH1cXHJcXG4gICAgICB9XFxyXFxuICAgfVxcclxcbn1cXHJcXG5cXHJcXG52ZWM0IGdldENvbnRvdXJWYWx1ZUNvbG9yKGZsb2F0IHZEb3QsIHZlYzMgbm9ybWFsLCB2ZWMzIHRvTGlnaHQsIHZlYzMgdG9FeWUpXFxyXFxue1xcclxcbiAgIGZsb2F0IHNwZWN1bGFyID0gZ2V0U3BlY3VsYXIobm9ybWFsLCB0b0xpZ2h0LCB0b0V5ZSk7XFxyXFxuICAgaWYgKHNwZWN1bGFyID4gU1BFQ1VMQVJfVEhSRVNIT0xEKVxcclxcbiAgIHtcXHJcXG4gICAgICByZXR1cm4gdmVjNCgxLjAsIDEuMCwgMS4wLCAxLjApO1xcclxcbiAgIH1cXHJcXG5cXHJcXG4gICBmbG9hdCB2YWwgPSBnZXRWYWx1ZUZyb21MaWdodChub3JtYWwsIHRvTGlnaHQsIHRvRXllKTtcXHJcXG4gICByZXR1cm4gdmFsMkNvbnRvdXJDb2xvcih2YWwpO1xcclxcbn1cXHJcXG5cXHJcXG5mbG9hdCByb3VuZChmbG9hdCB2YWwpIHsgcmV0dXJuIGZsb29yKHZhbCArIDAuNSk7IH1cXHJcXG5cXHJcXG5mbG9hdCBnZXRGbG9vckdyaWRBZGp1c3RtZW50KGZsb2F0IGRpc3QpXFxyXFxue1xcclxcbiAgIGZsb2F0IHRoaWNrbmVzcyA9IDAuMDAxO1xcclxcbiAgIGZsb2F0IGFsaWFzID0gMC4wMDU7XFxyXFxuXFxyXFxuICAgaWYgKGRpc3QgPCAodGhpY2tuZXNzICsgYWxpYXMpKVxcclxcbiAgIHtcXHJcXG4gICAgICBpZiAoZGlzdCA8IHRoaWNrbmVzcylcXHJcXG4gICAgICB7XFxyXFxuICAgICAgICAgcmV0dXJuIDAuNTtcXHJcXG4gICAgICB9XFxyXFxuICAgICAgZWxzZVxcclxcbiAgICAgIHtcXHJcXG4gICAgICAgICByZXR1cm4gMC41ICogKDEuMCArIChkaXN0IC0gdGhpY2tuZXNzKSAvIGFsaWFzKTtcXHJcXG4gICAgICB9XFxyXFxuICAgfVxcclxcbiAgIGVsc2VcXHJcXG4gICB7XFxyXFxuICAgICAgcmV0dXJuIDEuMDtcXHJcXG4gICB9XFxyXFxufVxcclxcblxcclxcbnZlYzQgZ2V0Rmxvb3JDb2xvcihib29sIGluU2hhZG93LCB2ZWMzIG5vcm1hbCwgdmVjMyB0b0xpZ2h0LCB2ZWMzIHRvRXllKVxcclxcbntcXHJcXG4gICB2ZWM0IGZyYWdDb2xvcjtcXHJcXG5cXHJcXG4gICAvLyBncmFkaWF0ZSBvdXQgdGhlIGJhY2tncm91bmQgZnJvbSBoYWxmIHRyYW5zcGFyZW50IHRvIGZ1bGwgdHJhbnNwYXJlbmN5XFxyXFxuICAgdmVjMyBjZW50ZXIgPSAobW9kZWwgKiB2ZWM0KHVGbG9vckNlbnRlciwgMS4wKSkueHl6O1xcclxcbiAgIGZsb2F0IGRpc3QgPSBsZW5ndGgoY2VudGVyIC0gdlZlcnRleCk7XFxyXFxuICAgZmxvYXQgYSA9IDAuNSAqICgxLjAgLSBkaXN0IC8gdUZsb29yUmFkaXVzKTtcXHJcXG5cXHJcXG4gICBmbG9hdCBncmlkRmFjdG9yID0gMS4wO1xcclxcbiAgIGlmICh1U2hvd0dyaWQpXFxyXFxuICAge1xcclxcbiAgICAgIGZsb2F0IGNpcmNsZSA9IGdldEZsb29yR3JpZEFkanVzdG1lbnQoYWJzKGRpc3QgLSByb3VuZChkaXN0KSkpO1xcclxcbiAgICAgIGZsb2F0IHggPSBnZXRGbG9vckdyaWRBZGp1c3RtZW50KGFicyh2TW9kZWxWZXJ0ZXgueCAtIHJvdW5kKHZNb2RlbFZlcnRleC54KSkpO1xcclxcbiAgICAgIGZsb2F0IHogPSBnZXRGbG9vckdyaWRBZGp1c3RtZW50KGFicyh2TW9kZWxWZXJ0ZXgueiAtIHJvdW5kKHZNb2RlbFZlcnRleC56KSkpO1xcclxcblxcclxcbiAgICAgIGdyaWRGYWN0b3IgPSBtaW4oY2lyY2xlLCBtaW4oeCwgeikpO1xcclxcbiAgIH1cXHJcXG5cXHJcXG4gICBmbG9hdCB2YWwgPSAwLjA7XFxyXFxuICAgaWYgKGluU2hhZG93KVxcclxcbiAgIHtcXHJcXG4gICAgICB2YWwgPSB1QW1iaWVudEludGVuc2l0eTtcXHJcXG4gICB9XFxyXFxuICAgZWxzZVxcclxcbiAgIHtcXHJcXG4gICAgICB2YWwgPSBnZXRWYWx1ZUZyb21MaWdodChub3JtYWwsIHRvTGlnaHQsIHRvRXllKTtcXHJcXG4gICB9XFxyXFxuXFxyXFxuICAgZnJhZ0NvbG9yID0gdmFsMkNvbG9yKGdyaWRGYWN0b3IgKiB2YWwpO1xcclxcbiAgIGZyYWdDb2xvci5hID0gYTtcXHJcXG5cXHJcXG4gICByZXR1cm4gZnJhZ0NvbG9yO1xcclxcbn1cXHJcXG5cXHJcXG52b2lkIG1haW4oKVxcclxcbntcXHJcXG4gICB2ZWMzIHRvTGlnaHQ7XFxyXFxuICAgaWYgKHVQb2ludExpZ2h0KVxcclxcbiAgIHtcXHJcXG4gICAgICB0b0xpZ2h0ID0gbm9ybWFsaXplKHVMaWdodFBvcyAtIHZWZXJ0ZXgpO1xcclxcbiAgIH1cXHJcXG4gICBlbHNlXFxyXFxuICAge1xcclxcbiAgICAgIHRvTGlnaHQgPSBub3JtYWxpemUodUxpZ2h0UG9zKTtcXHJcXG4gICB9XFxyXFxuXFxyXFxuICAgYm9vbCBpblNoYWRvdyA9IGluX3NoYWRvdygpO1xcclxcblxcclxcbiAgIHZlYzMgdG9FeWU7XFxyXFxuICAgaWYgKHVPcnRob2dyYXBoaWMpXFxyXFxuICAge1xcclxcbiAgICAgIHRvRXllID0gdmVjMygwLjAsIDAuMCwgMS4wKTtcXHJcXG4gICB9XFxyXFxuICAgZWxzZVxcclxcbiAgIHtcXHJcXG4gICAgICB0b0V5ZSA9IG5vcm1hbGl6ZSh1RXllIC0gdlZlcnRleCk7XFxyXFxuICAgfVxcclxcblxcclxcbiAgIHZlYzMgbm9ybWFsID0gbm9ybWFsaXplKHZOb3JtYWwpOyAvLyB2Tm9ybWFsIGlzIGludGVycG9sYXRlZCBhbmQgbm9sb25nZXIgbm9ybWFsXFxyXFxuXFxyXFxuICAgLy8gc3dhcCBub3JtYWxzIGZvciBiYWNrIGZhY2luZyB0cmlhbmdsZXNcXHJcXG4gICBpZiAoZG90KG5vcm1hbCwgdG9FeWUpIDwgMC4wKVxcclxcbiAgIHtcXHJcXG4gICAgICBub3JtYWwgPSAtbm9ybWFsO1xcclxcbiAgIH1cXHJcXG5cXHJcXG4gICAvLyBjb21wdXRlIGRpZmZ1c2UgY29udHJpYnV0aW9uID0gY29zIG9mIGFuZ2xlIGJldHdlZW4gdGhlIHZlY3RvcnMgKGRvdCBwcm9kdWN0KVxcclxcbiAgIGZsb2F0IHZEb3QgPSBkb3Qobm9ybWFsLCB0b0xpZ2h0KTtcXHJcXG5cXHJcXG4gICB2ZWM0IGZyYWdDb2xvcjtcXHJcXG4gICBpZiAodVJlbmRlcmluZ0Zsb29yKVxcclxcbiAgIHtcXHJcXG4gICAgICBmcmFnQ29sb3IgPSBnZXRGbG9vckNvbG9yKGluU2hhZG93LCBub3JtYWwsIHRvTGlnaHQsIHRvRXllKTtcXHJcXG4gICB9XFxyXFxuICAgZWxzZVxcclxcbiAgIHtcXHJcXG4gICAgICBpZiAodVJlbmRlck1vZGUgPT0gQ09OVE9VUl9QTEFORVMpXFxyXFxuICAgICAge1xcclxcbiAgICAgICAgIGlmIChpblNoYWRvdylcXHJcXG4gICAgICAgICB7XFxyXFxuICAgICAgICAgICAgZnJhZ0NvbG9yID0gdmFsMkNvbG9yKHVBbWJpZW50SW50ZW5zaXR5KTtcXHJcXG4gICAgICAgICB9XFxyXFxuICAgICAgICAgZWxzZVxcclxcbiAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICBmcmFnQ29sb3IgPSBnZXRDb250b3VyUGxhbmVDb2xvcih2RG90LCBub3JtYWwsIHRvTGlnaHQsIHRvRXllKTtcXHJcXG4gICAgICAgICB9XFxyXFxuICAgICAgfVxcclxcbiAgICAgIGVsc2UgaWYgKHVSZW5kZXJNb2RlID09IENPTlRPVVJfVkFMVUVTKVxcclxcbiAgICAgIHtcXHJcXG4gICAgICAgICBpZiAoaW5TaGFkb3cpXFxyXFxuICAgICAgICAge1xcclxcbiAgICAgICAgICAgIGZyYWdDb2xvciA9IHZhbDJDb250b3VyQ29sb3IodUFtYmllbnRJbnRlbnNpdHkpO1xcclxcbiAgICAgICAgIH1cXHJcXG4gICAgICAgICBlbHNlXFxyXFxuICAgICAgICAge1xcclxcbiAgICAgICAgICAgIGZyYWdDb2xvciA9IGdldENvbnRvdXJWYWx1ZUNvbG9yKHZEb3QsIG5vcm1hbCwgdG9MaWdodCwgdG9FeWUpO1xcclxcbiAgICAgICAgIH1cXHJcXG4gICAgICB9XFxyXFxuICAgICAgZWxzZVxcclxcbiAgICAgIHtcXHJcXG4gICAgICAgICB2ZWM0IGhpZ2hsaWdodENvbG9yID0gdmVjNCgwLjAsIDAuNywgMC43LCAxLjApO1xcclxcblxcclxcbiAgICAgICAgIGlmIChpblNoYWRvdylcXHJcXG4gICAgICAgICB7XFxyXFxuICAgICAgICAgICAgaWYgKHVSZW5kZXJNb2RlID09IEhJR0hMSUdIVF9TSEFET1cpXFxyXFxuICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgIGZyYWdDb2xvciA9IGhpZ2hsaWdodENvbG9yO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICBlbHNlIGlmICh1UmVuZGVyTW9kZSA9PSBMSUdIVF9BTkRfU0hBRE9XKVxcclxcbiAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICBmcmFnQ29sb3IgPSB2YWwyQ29sb3IodUFtYmllbnRJbnRlbnNpdHkpO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICBlbHNlXFxyXFxuICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgIC8vIHdoZW4gaW4gc2hhZG93LCBhcHBseSBzbGlnaHQgc2hhZGluZyBhcyBpZiB0aGUgbGlnaHRcXHJcXG4gICAgICAgICAgICAgICAvLyB3ZXJlIGNvbWluZyBmcm9tIHRoZSBleWUuXFxyXFxuICAgICAgICAgICAgICAgdmVjMyB0b1NoYWRvd0xpZ2h0ID0gdmVjMygwLjAsIDAuMCwgMS4wKTtcXHJcXG4gICAgICAgICAgICAgICBmbG9hdCB2YWwgPSBnZXRWYWx1ZUZyb21MaWdodChub3JtYWwsIHRvU2hhZG93TGlnaHQsIHRvRXllKSAvIDIwLjA7XFxyXFxuICAgICAgICAgICAgICAgZnJhZ0NvbG9yID0gdmFsMkNvbG9yKHVBbWJpZW50SW50ZW5zaXR5ICsgdmFsKTtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICAgfVxcclxcbiAgICAgICAgIGVsc2VcXHJcXG4gICAgICAgICB7XFxyXFxuICAgICAgICAgICAgaWYgKHVSZW5kZXJNb2RlID09IExJR0hUX0FORF9TSEFET1cpXFxyXFxuICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgIGZyYWdDb2xvciA9IHZhbDJDb2xvcih1QW1iaWVudEludGVuc2l0eSArIDAuNzUgKiB1RGlmZnVzZUludGVuc2l0eSk7XFxyXFxuICAgICAgICAgICAgICAgdmVjNCBzaGFkb3dDb2xvciA9IHZhbDJDb2xvcih1QW1iaWVudEludGVuc2l0eSk7XFxyXFxuXFxyXFxuICAgICAgICAgICAgICAgZmxvYXQgdkRvdCA9IGRvdChub3JtYWwsIHRvTGlnaHQpO1xcclxcbiAgICAgICAgICAgICAgIGZsb2F0IGFuZ2xlID0gKDE4MC4wIC8gMy4xNDE1OTI2KSAqIGFjb3ModkRvdCk7XFxyXFxuICAgICAgICAgICAgICAgZmxvYXQgcmFuZ2UgPSA4LjA7IC8vIGRlZ3JlZXNcXHJcXG4gICAgICAgICAgICAgICBmbG9hdCBwZXJjZW50VGVybWluYXRvciA9IGNsYW1wKChhbmdsZSAtICg5MC4wIC0gcmFuZ2UpKSAvIChyYW5nZSAvIDIuMCksIDAuMCwgMS4wKTtcXHJcXG4gICAgICAgICAgICAgICBmcmFnQ29sb3IgPSBtaXgoZnJhZ0NvbG9yLCBzaGFkb3dDb2xvciwgcGVyY2VudFRlcm1pbmF0b3IpO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICBlbHNlIGlmICh1UmVuZGVyTW9kZSA9PSBISUdITElHSFRfU0hBRE9XIHx8IHVSZW5kZXJNb2RlID09IEhJR0hMSUdIVF9URVJNSU5BVE9SKVxcclxcbiAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAvLyBmYWRlIGhpZ2hsaWdodGluZyBmcm9tIHRlcm1pbmF0b3IgdGhyb3VnaCB0aGUgc2hhZG93XFxyXFxuICAgICAgICAgICAgICAgZmxvYXQgdmFsID0gZ2V0VmFsdWVGcm9tTGlnaHQobm9ybWFsLCB0b0xpZ2h0LCB0b0V5ZSk7XFxyXFxuICAgICAgICAgICAgICAgZnJhZ0NvbG9yID0gdmFsMkNvbG9yKHZhbCk7XFxyXFxuXFxyXFxuICAgICAgICAgICAgICAgZmxvYXQgdkRvdCA9IGRvdChub3JtYWwsIHRvTGlnaHQpO1xcclxcbiAgICAgICAgICAgICAgIGZsb2F0IGFuZ2xlID0gKDE4MC4wIC8gMy4xNDE1OTI2KSAqIGFjb3ModkRvdCk7XFxyXFxuICAgICAgICAgICAgICAgZmxvYXQgcmFuZ2UgPSA4LjA7IC8vIGRlZ3JlZXNcXHJcXG4gICAgICAgICAgICAgICBmbG9hdCBwZXJjZW50VGVybWluYXRvcjtcXHJcXG5cXHJcXG4gICAgICAgICAgICAgICBpZiAodVJlbmRlck1vZGUgPT0gSElHSExJR0hUX1NIQURPVylcXHJcXG4gICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgcGVyY2VudFRlcm1pbmF0b3IgPSBjbGFtcCgoYW5nbGUgLSAoOTAuMCAtIHJhbmdlKSkgLyAocmFuZ2UpLCAwLjAsIDEuMCk7XFxyXFxuICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgIGVsc2VcXHJcXG4gICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgaWYgKGFuZ2xlID4gOTAuMClcXHJcXG4gICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSAyLjA7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgcGVyY2VudFRlcm1pbmF0b3IgPSBjbGFtcCgxLjAgLSAoYW5nbGUgLSA5MC4wKSAvIHJhbmdlLCAwLjAsIDEuMCk7XFxyXFxuICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgIGVsc2VcXHJcXG4gICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgcGVyY2VudFRlcm1pbmF0b3IgPSBjbGFtcCgoYW5nbGUgLSAoOTAuMCAtIHJhbmdlKSkgLyAocmFuZ2UpLCAwLjAsIDEuMCk7XFxyXFxuICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICBmcmFnQ29sb3IgPSBtaXgoZnJhZ0NvbG9yLCBoaWdobGlnaHRDb2xvciwgcGVyY2VudFRlcm1pbmF0b3IpO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICBlbHNlXFxyXFxuICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgIGZsb2F0IHZhbCA9IGdldFZhbHVlRnJvbUxpZ2h0KG5vcm1hbCwgdG9MaWdodCwgdG9FeWUpO1xcclxcbiAgICAgICAgICAgICAgIGZyYWdDb2xvciA9IHZhbDJDb2xvcih2YWwpO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICB9XFxyXFxuICAgICAgfVxcclxcbiAgIH1cXHJcXG5cXHJcXG4gICBnbF9GcmFnQ29sb3IgPSBmcmFnQ29sb3I7XFxyXFxufVwiIiwiZXhwb3J0IGRlZmF1bHQgXCJhdHRyaWJ1dGUgdmVjMyBhVmVydGV4O1xcclxcbmF0dHJpYnV0ZSB2ZWMzIGFOb3JtYWw7XFxyXFxuXFxyXFxudW5pZm9ybSBtYXQ0IG1vZGVsO1xcclxcbnVuaWZvcm0gbWF0NCB2aWV3O1xcclxcbnVuaWZvcm0gbWF0NCBsaWdodFZpZXc7XFxyXFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb247XFxyXFxuXFxyXFxudmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxyXFxudmFyeWluZyB2ZWMzIHZWZXJ0ZXg7XFxyXFxudmFyeWluZyB2ZWMzIHZTaGFkb3dWZXJ0ZXg7XFxyXFxudmFyeWluZyB2ZWMzIHZNb2RlbFZlcnRleDtcXHJcXG5cXHJcXG52b2lkIG1haW4oKVxcclxcbntcXHJcXG4gICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb24gKiB2aWV3ICogbW9kZWwgKiB2ZWM0KGFWZXJ0ZXgsIDEuMCk7XFxyXFxuICAgdk5vcm1hbCA9IChtb2RlbCAqIHZlYzQoYU5vcm1hbCwgMC4wKSkueHl6O1xcclxcbiAgIHZWZXJ0ZXggPSAobW9kZWwgKiB2ZWM0KGFWZXJ0ZXgsIDEuMCkpLnh5ejtcXHJcXG4gICB2U2hhZG93VmVydGV4ID0gKGxpZ2h0VmlldyAqIG1vZGVsICogdmVjNChhVmVydGV4LCAxLjApKS54eXo7XFxyXFxuICAgdk1vZGVsVmVydGV4ID0gYVZlcnRleDtcXHJcXG59XCIiLCJ2YXIgYXBpID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIik7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGVzLmNzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHMgfHwge307Il0sInNvdXJjZVJvb3QiOiIifQ==